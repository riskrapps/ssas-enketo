(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(t,e,n){var i;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(e,n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,r){"use strict";var o=[],s=n.document,a=Object.getPrototypeOf,u=o.slice,l=o.concat,c=o.push,h=o.indexOf,d={},p=d.toString,f=d.hasOwnProperty,m=f.toString,g=m.call(Object),v={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},_=function(t){return null!=t&&t===t.window},b={type:!0,src:!0,noModule:!0};function w(t,e,n){var i,r=(e=e||s).createElement("script");if(r.text=t,n)for(i in b)n[i]&&(r[i]=n[i]);e.head.appendChild(r).parentNode.removeChild(r)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[p.call(t)]||"object":typeof t}var $=function(t,e){return new $.fn.init(t,e)},k=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function E(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!y(t)&&!_(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}$.fn=$.prototype={jquery:"3.3.1",constructor:$,length:0,toArray:function(){return u.call(this)},get:function(t){return null==t?u.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=$.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return $.each(this,t)},map:function(t){return this.pushStack($.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},$.extend=$.fn.extend=function(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||y(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],s!==(i=t[e])&&(l&&i&&($.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,o=n&&Array.isArray(n)?n:[]):o=n&&$.isPlainObject(n)?n:{},s[e]=$.extend(l,o,i)):void 0!==i&&(s[e]=i));return s},$.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==p.call(t))&&(!(e=a(t))||"function"==typeof(n=f.call(e,"constructor")&&e.constructor)&&m.call(n)===g)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){w(t)},each:function(t,e){var n,i=0;if(E(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(k,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(E(Object(t))?$.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:h.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,s=!n;r<o;r++)!e(t[r],r)!==s&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,s=[];if(E(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&s.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&s.push(r);return l.apply([],s)},guid:1,support:v}),"function"==typeof Symbol&&($.fn[Symbol.iterator]=o[Symbol.iterator]),$.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){d["[object "+e+"]"]=e.toLowerCase()});var C=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(t){var e,n,i,r,o,s,a,u,l,c,h,d,p,f,m,g,v,y,_,b="sizzle"+1*new Date,w=t.document,x=0,$=0,k=st(),E=st(),C=st(),T=function(t,e){return t===e&&(h=!0),0},L={}.hasOwnProperty,S=[],D=S.pop,M=S.push,A=S.push,P=S.slice,N=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",j="\\["+I+"*("+R+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+I+"*\\]",F=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",q=new RegExp(I+"+","g"),B=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),U=new RegExp("^"+I+"*,"+I+"*"),z=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),V=new RegExp("="+I+"*([^\\]'\"]*?)"+I+"*\\]","g"),H=new RegExp(F),W=new RegExp("^"+R+"$"),Z={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Q=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),tt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},it=function(){d()},rt=yt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{A.apply(S=P.call(w.childNodes),w.childNodes),S[w.childNodes.length].nodeType}catch(t){A={apply:S.length?function(t,e){M.apply(t,P.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function ot(t,e,i,r){var o,a,l,c,h,f,v,y=e&&e.ownerDocument,x=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return i;if(!r&&((e?e.ownerDocument||e:w)!==p&&d(e),e=e||p,m)){if(11!==x&&(h=K.exec(t)))if(o=h[1]){if(9===x){if(!(l=e.getElementById(o)))return i;if(l.id===o)return i.push(l),i}else if(y&&(l=y.getElementById(o))&&_(e,l)&&l.id===o)return i.push(l),i}else{if(h[2])return A.apply(i,e.getElementsByTagName(t)),i;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return A.apply(i,e.getElementsByClassName(o)),i}if(n.qsa&&!C[t+" "]&&(!g||!g.test(t))){if(1!==x)y=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((c=e.getAttribute("id"))?c=c.replace(et,nt):e.setAttribute("id",c=b),a=(f=s(t)).length;a--;)f[a]="#"+c+" "+vt(f[a]);v=f.join(","),y=J.test(t)&&mt(e.parentNode)||e}if(v)try{return A.apply(i,y.querySelectorAll(v)),i}catch(t){}finally{c===b&&e.removeAttribute("id")}}}return u(t.replace(B,"$1"),e,i,r)}function st(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function at(t){return t[b]=!0,t}function ut(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function lt(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function ct(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function pt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&rt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ft(t){return at(function(e){return e=+e,at(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},d=ot.setDocument=function(t){var e,r,s=t?t.ownerDocument||t:w;return s!==p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,m=!o(p),w!==p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",it,!1):r.attachEvent&&r.attachEvent("onunload",it)),n.attributes=ut(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=ut(function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=X.test(p.getElementsByClassName),n.getById=ut(function(t){return f.appendChild(t).id=b,!p.getElementsByName||!p.getElementsByName(b).length}),n.getById?(i.filter.ID=function(t){var e=t.replace(Q,tt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(Q,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},v=[],g=[],(n.qsa=X.test(p.querySelectorAll))&&(ut(function(t){f.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+I+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+I+"*(?:value|"+O+")"),t.querySelectorAll("[id~="+b+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]")}),ut(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+I+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=X.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ut(function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",F)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),e=X.test(f.compareDocumentPosition),_=e||X.test(f.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===p||t.ownerDocument===w&&_(w,t)?-1:e===p||e.ownerDocument===w&&_(w,e)?1:c?N(c,t)-N(c,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!r||!o)return t===p?-1:e===p?1:r?-1:o?1:c?N(c,t)-N(c,e):0;if(r===o)return ct(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?ct(s[i],a[i]):s[i]===w?-1:a[i]===w?1:0},p):p},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==p&&d(t),e=e.replace(V,"='$1']"),n.matchesSelector&&m&&!C[e+" "]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var i=y.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return ot(e,p,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==p&&d(t),_(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==p&&d(t);var r=i.attrHandle[e.toLowerCase()],o=r&&L.call(i.attrHandle,e.toLowerCase())?r(t,e,!m):void 0;return void 0!==o?o:n.attributes||!m?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(et,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,i=[],r=0,o=0;if(h=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(T),h){for(;e=t[o++];)e===t[o]&&(r=i.push(o));for(;r--;)t.splice(i[r],1)}return c=null,t},r=ot.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(i=ot.selectors={cacheLength:50,createPseudo:at,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Q,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(Q,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Z.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&H.test(n)&&(e=s(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Q,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=k[t+" "];return e||(e=new RegExp("(^|"+I+")"+t+"("+I+"|$)"))&&k(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=ot.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(q," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,d,p,f,m=o!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!u&&!a,_=!1;if(g){if(o){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(_=(p=(l=(c=(h=(d=g)[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&l[1])&&l[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(_=p=0)||f.pop();)if(1===d.nodeType&&++_&&d===e){c[t]=[x,p,_];break}}else if(y&&(_=p=(l=(c=(h=(d=e)[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&l[1]),!1===_)for(;(d=++p&&d&&d[m]||(_=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++_||(y&&((c=(h=d[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[x,_]),d!==e)););return(_-=r)===i||_%i==0&&_/i>=0}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return r[b]?r(e):r.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,n){for(var i,o=r(t,e),s=o.length;s--;)t[i=N(t,o[s])]=!(n[i]=o[s])}):function(t){return r(t,0,n)}):r}},pseudos:{not:at(function(t){var e=[],n=[],i=a(t.replace(B,"$1"));return i[b]?at(function(t,e,n,r){for(var o,s=i(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:at(function(t){return function(e){return ot(t,e).length>0}}),contains:at(function(t){return t=t.replace(Q,tt),function(e){return(e.textContent||e.innerText||r(e)).indexOf(t)>-1}}),lang:at(function(t){return W.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(Q,tt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:pt(!1),disabled:pt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return Y.test(t.nodeName)},input:function(t){return G.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ft(function(){return[0]}),last:ft(function(t,e){return[e-1]}),eq:ft(function(t,e,n){return[n<0?n+e:n]}),even:ft(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:ft(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:ft(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:ft(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=dt(e);function gt(){}function vt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function yt(t,e,n){var i=e.dir,r=e.next,o=r||i,s=n&&"parentNode"===o,a=$++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,r);return!1}:function(e,n,u){var l,c,h,d=[x,a];if(u){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,u))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(c=(h=e[b]||(e[b]={}))[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=c[o])&&l[0]===x&&l[1]===a)return d[2]=l[2];if(c[o]=d,d[2]=t(e,n,u))return!0}return!1}}function _t(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function bt(t,e,n,i,r){for(var o,s=[],a=0,u=t.length,l=null!=e;a<u;a++)(o=t[a])&&(n&&!n(o,i,r)||(s.push(o),l&&e.push(a)));return s}function wt(t,e,n,i,r,o){return i&&!i[b]&&(i=wt(i)),r&&!r[b]&&(r=wt(r,o)),at(function(o,s,a,u){var l,c,h,d=[],p=[],f=s.length,m=o||function(t,e,n){for(var i=0,r=e.length;i<r;i++)ot(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),g=!t||!o&&e?m:bt(m,d,t,a,u),v=n?r||(o?t:f||i)?[]:s:g;if(n&&n(g,v,a,u),i)for(l=bt(v,p),i(l,[],a,u),c=l.length;c--;)(h=l[c])&&(v[p[c]]=!(g[p[c]]=h));if(o){if(r||t){if(r){for(l=[],c=v.length;c--;)(h=v[c])&&l.push(g[c]=h);r(null,v=[],l,u)}for(c=v.length;c--;)(h=v[c])&&(l=r?N(o,h):d[c])>-1&&(o[l]=!(s[l]=h))}}else v=bt(v===s?v.splice(f,v.length):v),r?r(null,s,v,u):A.apply(s,v)})}function xt(t){for(var e,n,r,o=t.length,s=i.relative[t[0].type],a=s||i.relative[" "],u=s?1:0,c=yt(function(t){return t===e},a,!0),h=yt(function(t){return N(e,t)>-1},a,!0),d=[function(t,n,i){var r=!s&&(i||n!==l)||((e=n).nodeType?c(t,n,i):h(t,n,i));return e=null,r}];u<o;u++)if(n=i.relative[t[u].type])d=[yt(_t(d),n)];else{if((n=i.filter[t[u].type].apply(null,t[u].matches))[b]){for(r=++u;r<o&&!i.relative[t[r].type];r++);return wt(u>1&&_t(d),u>1&&vt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(B,"$1"),n,u<r&&xt(t.slice(u,r)),r<o&&xt(t=t.slice(r)),r<o&&vt(t))}d.push(n)}return _t(d)}return gt.prototype=i.filters=i.pseudos,i.setFilters=new gt,s=ot.tokenize=function(t,e){var n,r,o,s,a,u,l,c=E[t+" "];if(c)return e?0:c.slice(0);for(a=t,u=[],l=i.preFilter;a;){for(s in n&&!(r=U.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),i.filter)!(r=Z[s].exec(a))||l[s]&&!(r=l[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return e?a.length:a?ot.error(t):E(t,u).slice(0)},a=ot.compile=function(t,e){var n,r=[],o=[],a=C[t+" "];if(!a){for(e||(e=s(t)),n=e.length;n--;)(a=xt(e[n]))[b]?r.push(a):o.push(a);(a=C(t,function(t,e){var n=e.length>0,r=t.length>0,o=function(o,s,a,u,c){var h,f,g,v=0,y="0",_=o&&[],b=[],w=l,$=o||r&&i.find.TAG("*",c),k=x+=null==w?1:Math.random()||.1,E=$.length;for(c&&(l=s===p||s||c);y!==E&&null!=(h=$[y]);y++){if(r&&h){for(f=0,s||h.ownerDocument===p||(d(h),a=!m);g=t[f++];)if(g(h,s||p,a)){u.push(h);break}c&&(x=k)}n&&((h=!g&&h)&&v--,o&&_.push(h))}if(v+=y,n&&y!==v){for(f=0;g=e[f++];)g(_,b,s,a);if(o){if(v>0)for(;y--;)_[y]||b[y]||(b[y]=D.call(u));b=bt(b)}A.apply(u,b),c&&!o&&b.length>0&&v+e.length>1&&ot.uniqueSort(u)}return c&&(x=k,l=w),_};return n?at(o):o}(o,r))).selector=t}return a},u=ot.select=function(t,e,n,r){var o,u,l,c,h,d="function"==typeof t&&t,p=!r&&s(t=d.selector||t);if(n=n||[],1===p.length){if((u=p[0]=p[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===e.nodeType&&m&&i.relative[u[1].type]){if(!(e=(i.find.ID(l.matches[0].replace(Q,tt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(o=Z.needsContext.test(t)?0:u.length;o--&&(l=u[o],!i.relative[c=l.type]);)if((h=i.find[c])&&(r=h(l.matches[0].replace(Q,tt),J.test(u[0].type)&&mt(e.parentNode)||e))){if(u.splice(o,1),!(t=r.length&&vt(u)))return A.apply(n,r),n;break}}return(d||a(t,p))(r,e,!m,n,!e||J.test(t)&&mt(e.parentNode)||e),n},n.sortStable=b.split("").sort(T).join("")===b,n.detectDuplicates=!!h,d(),n.sortDetached=ut(function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))}),ut(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||lt("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&ut(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||lt("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ut(function(t){return null==t.getAttribute("disabled")})||lt(O,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),ot}(n);$.find=C,$.expr=C.selectors,$.expr[":"]=$.expr.pseudos,$.uniqueSort=$.unique=C.uniqueSort,$.text=C.getText,$.isXMLDoc=C.isXML,$.contains=C.contains,$.escapeSelector=C.escape;var T=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&$(t).is(n))break;i.push(t)}return i},L=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},S=$.expr.match.needsContext;function D(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function A(t,e,n){return y(e)?$.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?$.grep(t,function(t){return t===e!==n}):"string"!=typeof e?$.grep(t,function(t){return h.call(e,t)>-1!==n}):$.filter(e,t,n)}$.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?$.find.matchesSelector(i,t)?[i]:[]:$.find.matches(t,$.grep(e,function(t){return 1===t.nodeType}))},$.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack($(t).filter(function(){for(e=0;e<i;e++)if($.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)$.find(t,r[e],n);return i>1?$.uniqueSort(n):n},filter:function(t){return this.pushStack(A(this,t||[],!1))},not:function(t){return this.pushStack(A(this,t||[],!0))},is:function(t){return!!A(this,"string"==typeof t&&S.test(t)?$(t):t||[],!1).length}});var P,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;($.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||P,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:N.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof $?e[0]:e,$.merge(this,$.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:s,!0)),M.test(i[1])&&$.isPlainObject(e))for(i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=s.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t($):$.makeArray(t,this)}).prototype=$.fn,P=$(s);var O=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function R(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}$.fn.extend({has:function(t){var e=$(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if($.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],s="string"!=typeof t&&$(t);if(!S.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&$.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?$.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?h.call($(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack($.uniqueSort($.merge(this.get(),$(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),$.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return T(t,"parentNode")},parentsUntil:function(t,e,n){return T(t,"parentNode",n)},next:function(t){return R(t,"nextSibling")},prev:function(t){return R(t,"previousSibling")},nextAll:function(t){return T(t,"nextSibling")},prevAll:function(t){return T(t,"previousSibling")},nextUntil:function(t,e,n){return T(t,"nextSibling",n)},prevUntil:function(t,e,n){return T(t,"previousSibling",n)},siblings:function(t){return L((t.parentNode||{}).firstChild,t)},children:function(t){return L(t.firstChild)},contents:function(t){return D(t,"iframe")?t.contentDocument:(D(t,"template")&&(t=t.content||t),$.merge([],t.childNodes))}},function(t,e){$.fn[t]=function(n,i){var r=$.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=$.filter(i,r)),this.length>1&&(I[t]||$.uniqueSort(r),O.test(t)&&r.reverse()),this.pushStack(r)}});var j=/[^\x20\t\r\n\f]+/g;function F(t){return t}function q(t){throw t}function B(t,e,n,i){var r;try{t&&y(r=t.promise)?r.call(t).done(e).fail(n):t&&y(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}$.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return $.each(t.match(j)||[],function(t,n){e[n]=!0}),e}(t):$.extend({},t);var e,n,i,r,o=[],s=[],a=-1,u=function(){for(r=r||t.once,i=e=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,r&&(o=n?[]:"")},l={add:function(){return o&&(n&&!e&&(a=o.length-1,s.push(n)),function e(n){$.each(n,function(n,i){y(i)?t.unique&&l.has(i)||o.push(i):i&&i.length&&"string"!==x(i)&&e(i)})}(arguments),n&&!e&&u()),this},remove:function(){return $.each(arguments,function(t,e){for(var n;(n=$.inArray(e,o,n))>-1;)o.splice(n,1),n<=a&&a--}),this},has:function(t){return t?$.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=s=[],n||e||(o=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},$.extend({Deferred:function(t){var e=[["notify","progress",$.Callbacks("memory"),$.Callbacks("memory"),2],["resolve","done",$.Callbacks("once memory"),$.Callbacks("once memory"),0,"resolved"],["reject","fail",$.Callbacks("once memory"),$.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return $.Deferred(function(n){$.each(e,function(e,i){var r=y(t[i[4]])&&t[i[4]];o[i[1]](function(){var t=r&&r.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(t,i,r){var o=0;function s(t,e,i,r){return function(){var a=this,u=arguments,l=function(){var n,l;if(!(t<o)){if((n=i.apply(a,u))===e.promise())throw new TypeError("Thenable self-resolution");l=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(l)?r?l.call(n,s(o,e,F,r),s(o,e,q,r)):(o++,l.call(n,s(o,e,F,r),s(o,e,q,r),s(o,e,F,e.notifyWith))):(i!==F&&(a=void 0,u=[n]),(r||e.resolveWith)(a,u))}},c=r?l:function(){try{l()}catch(n){$.Deferred.exceptionHook&&$.Deferred.exceptionHook(n,c.stackTrace),t+1>=o&&(i!==q&&(a=void 0,u=[n]),e.rejectWith(a,u))}};t?c():($.Deferred.getStackHook&&(c.stackTrace=$.Deferred.getStackHook()),n.setTimeout(c))}}return $.Deferred(function(n){e[0][3].add(s(0,n,y(r)?r:F,n.notifyWith)),e[1][3].add(s(0,n,y(t)?t:F)),e[2][3].add(s(0,n,y(i)?i:q))}).promise()},promise:function(t){return null!=t?$.extend(t,r):r}},o={};return $.each(e,function(t,n){var s=n[2],a=n[5];r[n[1]]=s.add,a&&s.add(function(){i=a},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=s.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),r=u.call(arguments),o=$.Deferred(),s=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?u.call(arguments):n,--e||o.resolveWith(i,r)}};if(e<=1&&(B(t,o.done(s(n)).resolve,o.reject,!e),"pending"===o.state()||y(r[n]&&r[n].then)))return o.then();for(;n--;)B(r[n],s(n),o.reject);return o.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;$.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&U.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},$.readyException=function(t){n.setTimeout(function(){throw t})};var z=$.Deferred();function V(){s.removeEventListener("DOMContentLoaded",V),n.removeEventListener("load",V),$.ready()}$.fn.ready=function(t){return z.then(t).catch(function(t){$.readyException(t)}),this},$.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--$.readyWait:$.isReady)||($.isReady=!0,!0!==t&&--$.readyWait>0||z.resolveWith(s,[$]))}}),$.ready.then=z.then,"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?n.setTimeout($.ready):(s.addEventListener("DOMContentLoaded",V),n.addEventListener("load",V));var H=function(t,e,n,i,r,o,s){var a=0,u=t.length,l=null==n;if("object"===x(n))for(a in r=!0,n)H(t,e,a,n[a],!0,o,s);else if(void 0!==i&&(r=!0,y(i)||(s=!0),l&&(s?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call($(t),n)})),e))for(;a<u;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return r?t:l?e.call(t):u?e(t[0],n):o},W=/^-ms-/,Z=/-([a-z])/g;function G(t,e){return e.toUpperCase()}function Y(t){return t.replace(W,"ms-").replace(Z,G)}var X=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function K(){this.expando=$.expando+K.uid++}K.uid=1,K.prototype={cache:function(t){var e=t[this.expando];return e||(e={},X(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[Y(e)]=n;else for(i in e)r[Y(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in i?[e]:e.match(j)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||$.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!$.isEmptyObject(e)}};var J=new K,Q=new K,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Q.set(t,e,n)}else n=void 0;return n}$.extend({hasData:function(t){return Q.hasData(t)||J.hasData(t)},data:function(t,e,n){return Q.access(t,e,n)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,n){return J.access(t,e,n)},_removeData:function(t,e){J.remove(t,e)}}),$.fn.extend({data:function(t,e){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=Q.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=Y(i.slice(5)),nt(o,i,r[i]));J.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Q.set(this,t)}):H(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=Q.get(o,t))?n:void 0!==(n=nt(o,t))?n:void 0;this.each(function(){Q.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Q.remove(this,t)})}}),$.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=J.get(t,e),n&&(!i||Array.isArray(n)?i=J.access(t,e,$.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=$.queue(t,e),i=n.length,r=n.shift(),o=$._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,function(){$.dequeue(t,e)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return J.get(t,n)||J.access(t,n,{empty:$.Callbacks("once memory").add(function(){J.remove(t,[e+"queue",n])})})}}),$.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?$.queue(this[0],t):void 0===e?this:this.each(function(){var n=$.queue(this,t,e);$._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&$.dequeue(this,t)})},dequeue:function(t){return this.each(function(){$.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=$.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=J.get(o[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],st=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&$.contains(t.ownerDocument,t)&&"none"===$.css(t,"display")},at=function(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=s[o];return r};function ut(t,e,n,i){var r,o,s=20,a=i?function(){return i.cur()}:function(){return $.css(t,e,"")},u=a(),l=n&&n[3]||($.cssNumber[e]?"":"px"),c=($.cssNumber[e]||"px"!==l&&+u)&&rt.exec($.css(t,e));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;s--;)$.style(t,e,c+l),(1-o)*(1-(o=a()/u||.5))<=0&&(s=0),c/=o;c*=2,$.style(t,e,c+l),n=n||[]}return n&&(c=+c||+u||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=r)),r}var lt={};function ct(t){var e,n=t.ownerDocument,i=t.nodeName,r=lt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=$.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),lt[i]=r,r)}function ht(t,e){for(var n,i,r=[],o=0,s=t.length;o<s;o++)(i=t[o]).style&&(n=i.style.display,e?("none"===n&&(r[o]=J.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&st(i)&&(r[o]=ct(i))):"none"!==n&&(r[o]="none",J.set(i,"display",n)));for(o=0;o<s;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}$.fn.extend({show:function(){return ht(this,!0)},hide:function(){return ht(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){st(this)?$(this).show():$(this).hide()})}});var dt=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ft=/^$|^module$|\/(?:java|ecma)script/i,mt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function gt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&D(t,e)?$.merge([t],n):n}function vt(t,e){for(var n=0,i=t.length;n<i;n++)J.set(t[n],"globalEval",!e||J.get(e[n],"globalEval"))}mt.optgroup=mt.option,mt.tbody=mt.tfoot=mt.colgroup=mt.caption=mt.thead,mt.th=mt.td;var yt=/<|&#?\w+;/;function _t(t,e,n,i,r){for(var o,s,a,u,l,c,h=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((o=t[p])||0===o)if("object"===x(o))$.merge(d,o.nodeType?[o]:o);else if(yt.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(pt.exec(o)||["",""])[1].toLowerCase(),u=mt[a]||mt._default,s.innerHTML=u[1]+$.htmlPrefilter(o)+u[2],c=u[0];c--;)s=s.lastChild;$.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",p=0;o=d[p++];)if(i&&$.inArray(o,i)>-1)r&&r.push(o);else if(l=$.contains(o.ownerDocument,o),s=gt(h.appendChild(o),"script"),l&&vt(s),n)for(c=0;o=s[c++];)ft.test(o.type||"")&&n.push(o);return h}!function(){var t=s.createDocumentFragment().appendChild(s.createElement("div")),e=s.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),v.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var bt=s.documentElement,wt=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,$t=/^([^.]*)(?:\.(.+)|)/;function kt(){return!0}function Et(){return!1}function Ct(){try{return s.activeElement}catch(t){}}function Tt(t,e,n,i,r,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)Tt(t,a,n,i,e[a],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Et;else if(!r)return t;return 1===o&&(s=r,(r=function(t){return $().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=$.guid++)),t.each(function(){$.event.add(this,e,r,i,n)})}$.event={global:{},add:function(t,e,n,i,r){var o,s,a,u,l,c,h,d,p,f,m,g=J.get(t);if(g)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&$.find.matchesSelector(bt,r),n.guid||(n.guid=$.guid++),(u=g.events)||(u=g.events={}),(s=g.handle)||(s=g.handle=function(e){return void 0!==$&&$.event.triggered!==e.type?$.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(j)||[""]).length;l--;)p=m=(a=$t.exec(e[l])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=$.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=$.event.special[p]||{},c=$.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&$.expr.match.needsContext.test(r),namespace:f.join(".")},o),(d=u[p])||((d=u[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,f,s)||t.addEventListener&&t.addEventListener(p,s)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),$.event.global[p]=!0)},remove:function(t,e,n,i,r){var o,s,a,u,l,c,h,d,p,f,m,g=J.hasData(t)&&J.get(t);if(g&&(u=g.events)){for(l=(e=(e||"").match(j)||[""]).length;l--;)if(p=m=(a=$t.exec(e[l])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=$.event.special[p]||{},d=u[p=(i?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)c=d[o],!r&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,g.handle)||$.removeEvent(t,p,g.handle),delete u[p])}else for(p in u)$.event.remove(t,p+e[l],n,i,!0);$.isEmptyObject(u)&&J.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,s,a=$.event.fix(t),u=new Array(arguments.length),l=(J.get(this,"events")||{})[a.type]||[],c=$.event.special[a.type]||{};for(u[0]=a,e=1;e<arguments.length;e++)u[e]=arguments[e];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(s=$.event.handlers.call(this,a,l),e=0;(r=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(i=(($.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,u))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,r,o,s,a=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(o=[],s={},n=0;n<u;n++)void 0===s[r=(i=e[n]).selector+" "]&&(s[r]=i.needsContext?$(r,this).index(l)>-1:$.find(r,this,null,[l]).length),s[r]&&o.push(i);o.length&&a.push({elem:l,handlers:o})}return l=this,u<e.length&&a.push({elem:l,handlers:e.slice(u)}),a},addProp:function(t,e){Object.defineProperty($.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[$.expando]?t:new $.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ct()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ct()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&D(this,"input"))return this.click(),!1},_default:function(t){return D(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},$.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},$.Event=function(t,e){if(!(this instanceof $.Event))return new $.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?kt:Et,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&$.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[$.expando]=!0},$.Event.prototype={constructor:$.Event,isDefaultPrevented:Et,isPropagationStopped:Et,isImmediatePropagationStopped:Et,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=kt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=kt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=kt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},$.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},$.event.addProp),$.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){$.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||$.contains(this,i))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),$.fn.extend({on:function(t,e,n,i){return Tt(this,t,e,n,i)},one:function(t,e,n,i){return Tt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,$(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Et),this.each(function(){$.event.remove(this,t,n,e)})}});var Lt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,St=/<script|<style|<link/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function At(t,e){return D(t,"table")&&D(11!==e.nodeType?e:e.firstChild,"tr")&&$(t).children("tbody")[0]||t}function Pt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ot(t,e){var n,i,r,o,s,a,u,l;if(1===e.nodeType){if(J.hasData(t)&&(o=J.access(t),s=J.set(e,o),l=o.events))for(r in delete s.handle,s.events={},l)for(n=0,i=l[r].length;n<i;n++)$.event.add(e,r,l[r][n]);Q.hasData(t)&&(a=Q.access(t),u=$.extend({},a),Q.set(e,u))}}function It(t,e){var n=e.nodeName.toLowerCase();"input"===n&&dt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Rt(t,e,n,i){e=l.apply([],e);var r,o,s,a,u,c,h=0,d=t.length,p=d-1,f=e[0],m=y(f);if(m||d>1&&"string"==typeof f&&!v.checkClone&&Dt.test(f))return t.each(function(r){var o=t.eq(r);m&&(e[0]=f.call(this,r,o.html())),Rt(o,e,n,i)});if(d&&(o=(r=_t(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(a=(s=$.map(gt(r,"script"),Pt)).length;h<d;h++)u=r,h!==p&&(u=$.clone(u,!0,!0),a&&$.merge(s,gt(u,"script"))),n.call(t[h],u,h);if(a)for(c=s[s.length-1].ownerDocument,$.map(s,Nt),h=0;h<a;h++)u=s[h],ft.test(u.type||"")&&!J.access(u,"globalEval")&&$.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?$._evalUrl&&$._evalUrl(u.src):w(u.textContent.replace(Mt,""),c,u))}return t}function jt(t,e,n){for(var i,r=e?$.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||$.cleanData(gt(i)),i.parentNode&&(n&&$.contains(i.ownerDocument,i)&&vt(gt(i,"script")),i.parentNode.removeChild(i));return t}$.extend({htmlPrefilter:function(t){return t.replace(Lt,"<$1></$2>")},clone:function(t,e,n){var i,r,o,s,a=t.cloneNode(!0),u=$.contains(t.ownerDocument,t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||$.isXMLDoc(t)))for(s=gt(a),i=0,r=(o=gt(t)).length;i<r;i++)It(o[i],s[i]);if(e)if(n)for(o=o||gt(t),s=s||gt(a),i=0,r=o.length;i<r;i++)Ot(o[i],s[i]);else Ot(t,a);return(s=gt(a,"script")).length>0&&vt(s,!u&&gt(t,"script")),a},cleanData:function(t){for(var e,n,i,r=$.event.special,o=0;void 0!==(n=t[o]);o++)if(X(n)){if(e=n[J.expando]){if(e.events)for(i in e.events)r[i]?$.event.remove(n,i):$.removeEvent(n,i,e.handle);n[J.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),$.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return H(this,function(t){return void 0===t?$.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Rt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||At(this,t).appendChild(t)})},prepend:function(){return Rt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=At(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Rt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Rt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&($.cleanData(gt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return $.clone(this,t,e)})},html:function(t){return H(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!St.test(t)&&!mt[(pt.exec(t)||["",""])[1].toLowerCase()]){t=$.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&($.cleanData(gt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Rt(this,arguments,function(e){var n=this.parentNode;$.inArray(this,t)<0&&($.cleanData(gt(this)),n&&n.replaceChild(e,this))},t)}}),$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){$.fn[t]=function(t){for(var n,i=[],r=$(t),o=r.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),$(r[s])[e](n),c.apply(i,n.get());return this.pushStack(i)}});var Ft=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),qt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Bt=new RegExp(ot.join("|"),"i");function Ut(t,e,n){var i,r,o,s,a=t.style;return(n=n||qt(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||$.contains(t.ownerDocument,t)||(s=$.style(t,e)),!v.pixelBoxStyles()&&Ft.test(s)&&Bt.test(e)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",bt.appendChild(l).appendChild(c);var t=n.getComputedStyle(c);i="1%"!==t.top,u=12===e(t.marginLeft),c.style.right="60%",a=36===e(t.right),r=36===e(t.width),c.style.position="absolute",o=36===c.offsetWidth||"absolute",bt.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var i,r,o,a,u,l=s.createElement("div"),c=s.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,$.extend(v,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o}}))}();var Vt=/^(none|table(?!-c[ea]).+)/,Ht=/^--/,Wt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"},Gt=["Webkit","Moz","ms"],Yt=s.createElement("div").style;function Xt(t){var e=$.cssProps[t];return e||(e=$.cssProps[t]=function(t){if(t in Yt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Gt.length;n--;)if((t=Gt[n]+e)in Yt)return t}(t)||t),e}function Kt(t,e,n){var i=rt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function Jt(t,e,n,i,r,o){var s="width"===e?1:0,a=0,u=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=$.css(t,n+ot[s],!0,r)),i?("content"===n&&(u-=$.css(t,"padding"+ot[s],!0,r)),"margin"!==n&&(u-=$.css(t,"border"+ot[s]+"Width",!0,r))):(u+=$.css(t,"padding"+ot[s],!0,r),"padding"!==n?u+=$.css(t,"border"+ot[s]+"Width",!0,r):a+=$.css(t,"border"+ot[s]+"Width",!0,r));return!i&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-a-.5))),u}function Qt(t,e,n){var i=qt(t),r=Ut(t,e,i),o="border-box"===$.css(t,"boxSizing",!1,i),s=o;if(Ft.test(r)){if(!n)return r;r="auto"}return s=s&&(v.boxSizingReliable()||r===t.style[e]),("auto"===r||!parseFloat(r)&&"inline"===$.css(t,"display",!1,i))&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),(r=parseFloat(r)||0)+Jt(t,e,n||(o?"border":"content"),s,i,r)+"px"}function te(t,e,n,i,r){return new te.prototype.init(t,e,n,i,r)}$.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ut(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=Y(e),u=Ht.test(e),l=t.style;if(u||(e=Xt(a)),s=$.cssHooks[e]||$.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:l[e];"string"===(o=typeof n)&&(r=rt.exec(n))&&r[1]&&(n=ut(t,e,r),o="number"),null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||($.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(u?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,i){var r,o,s,a=Y(e);return Ht.test(e)||(e=Xt(a)),(s=$.cssHooks[e]||$.cssHooks[a])&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=Ut(t,e,i)),"normal"===r&&e in Zt&&(r=Zt[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),$.each(["height","width"],function(t,e){$.cssHooks[e]={get:function(t,n,i){if(n)return!Vt.test($.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Qt(t,e,i):at(t,Wt,function(){return Qt(t,e,i)})},set:function(t,n,i){var r,o=qt(t),s="border-box"===$.css(t,"boxSizing",!1,o),a=i&&Jt(t,e,i,s,o);return s&&v.scrollboxSize()===o.position&&(a-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Jt(t,e,"border",!1,o)-.5)),a&&(r=rt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=$.css(t,e)),Kt(0,n,a)}}}),$.cssHooks.marginLeft=zt(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Ut(t,"marginLeft"))||t.getBoundingClientRect().left-at(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),$.each({margin:"",padding:"",border:"Width"},function(t,e){$.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+ot[i]+e]=o[i]||o[i-2]||o[0];return r}},"margin"!==t&&($.cssHooks[t+e].set=Kt)}),$.fn.extend({css:function(t,e){return H(this,function(t,e,n){var i,r,o={},s=0;if(Array.isArray(e)){for(i=qt(t),r=e.length;s<r;s++)o[e[s]]=$.css(t,e[s],!1,i);return o}return void 0!==n?$.style(t,e,n):$.css(t,e)},t,e,arguments.length>1)}}),$.Tween=te,te.prototype={constructor:te,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||$.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||($.cssNumber[n]?"":"px")},cur:function(){var t=te.propHooks[this.prop];return t&&t.get?t.get(this):te.propHooks._default.get(this)},run:function(t){var e,n=te.propHooks[this.prop];return this.options.duration?this.pos=e=$.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):te.propHooks._default.set(this),this}},te.prototype.init.prototype=te.prototype,te.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=$.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){$.fx.step[t.prop]?$.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[$.cssProps[t.prop]]&&!$.cssHooks[t.prop]?t.elem[t.prop]=t.now:$.style(t.elem,t.prop,t.now+t.unit)}}},te.propHooks.scrollTop=te.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},$.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},$.fx=te.prototype.init,$.fx.step={};var ee,ne,ie=/^(?:toggle|show|hide)$/,re=/queueHooks$/;function oe(){ne&&(!1===s.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(oe):n.setTimeout(oe,$.fx.interval),$.fx.tick())}function se(){return n.setTimeout(function(){ee=void 0}),ee=Date.now()}function ae(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=ot[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function ue(t,e,n){for(var i,r=(le.tweeners[e]||[]).concat(le.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,e,t))return i}function le(t,e,n){var i,r,o=0,s=le.prefilters.length,a=$.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var e=ee||se(),n=Math.max(0,l.startTime+l.duration-e),i=1-(n/l.duration||0),o=0,s=l.tweens.length;o<s;o++)l.tweens[o].run(i);return a.notifyWith(t,[l,i,n]),i<1&&s?n:(s||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:$.extend({},e),opts:$.extend(!0,{specialEasing:{},easing:$.easing._default},n),originalProperties:e,originalOptions:n,startTime:ee||se(),duration:n.duration,tweens:[],createTween:function(e,n){var i=$.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),c=l.props;for(!function(t,e){var n,i,r,o,s;for(n in t)if(r=e[i=Y(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(s=$.cssHooks[i])&&"expand"in s)for(n in o=s.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}(c,l.opts.specialEasing);o<s;o++)if(i=le.prefilters[o].call(l,t,c,l.opts))return y(i.stop)&&($._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return $.map(c,ue,l),y(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),$.fx.timer($.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}$.Animation=$.extend(le,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ut(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(j);for(var n,i=0,r=t.length;i<r;i++)n=t[i],le.tweeners[n]=le.tweeners[n]||[],le.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,o,s,a,u,l,c,h="width"in e||"height"in e,d=this,p={},f=t.style,m=t.nodeType&&st(t),g=J.get(t,"fxshow");for(i in n.queue||(null==(s=$._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,$.queue(t,"fx").length||s.empty.fire()})})),e)if(r=e[i],ie.test(r)){if(delete e[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||$.style(t,i)}if((u=!$.isEmptyObject(e))||!$.isEmptyObject(p))for(i in h&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(l=g&&g.display)&&(l=J.get(t,"display")),"none"===(c=$.css(t,"display"))&&(l?c=l:(ht([t],!0),l=t.style.display||l,c=$.css(t,"display"),ht([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===$.css(t,"float")&&(u||(d.done(function(){f.display=l}),null==l&&(c=f.display,l="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),u=!1,p)u||(g?"hidden"in g&&(m=g.hidden):g=J.access(t,"fxshow",{display:l}),o&&(g.hidden=!m),m&&ht([t],!0),d.done(function(){for(i in m||ht([t]),J.remove(t,"fxshow"),p)$.style(t,i,p[i])})),u=ue(m?g[i]:0,i,d),i in g||(g[i]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?le.prefilters.unshift(t):le.prefilters.push(t)}}),$.speed=function(t,e,n){var i=t&&"object"==typeof t?$.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return $.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in $.fx.speeds?i.duration=$.fx.speeds[i.duration]:i.duration=$.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&$.dequeue(this,i.queue)},i},$.fn.extend({fadeTo:function(t,e,n,i){return this.filter(st).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=$.isEmptyObject(t),o=$.speed(e,n,i),s=function(){var e=le(this,$.extend({},t),o);(r||J.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=$.timers,s=J.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&re.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||$.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=J.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=$.timers,s=i?i.length:0;for(n.finish=!0,$.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),$.each(["toggle","show","hide"],function(t,e){var n=$.fn[e];$.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ae(e,!0),t,i,r)}}),$.each({slideDown:ae("show"),slideUp:ae("hide"),slideToggle:ae("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){$.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),$.timers=[],$.fx.tick=function(){var t,e=0,n=$.timers;for(ee=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||$.fx.stop(),ee=void 0},$.fx.timer=function(t){$.timers.push(t),$.fx.start()},$.fx.interval=13,$.fx.start=function(){ne||(ne=!0,oe())},$.fx.stop=function(){ne=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fn.delay=function(t,e){return t=$.fx&&$.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,i){var r=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(r)}})},function(){var t=s.createElement("input"),e=s.createElement("select").appendChild(s.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=s.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var ce,he=$.expr.attrHandle;$.fn.extend({attr:function(t,e){return H(this,$.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){$.removeAttr(this,t)})}}),$.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?$.prop(t,e,n):(1===o&&$.isXMLDoc(t)||(r=$.attrHooks[e.toLowerCase()]||($.expr.match.bool.test(e)?ce:void 0)),void 0!==n?null===n?void $.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=$.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&D(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(j);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),ce={set:function(t,e,n){return!1===e?$.removeAttr(t,n):t.setAttribute(n,n),n}},$.each($.expr.match.bool.source.match(/\w+/g),function(t,e){var n=he[e]||$.find.attr;he[e]=function(t,e,i){var r,o,s=e.toLowerCase();return i||(o=he[s],he[s]=r,r=null!=n(t,e,i)?s:null,he[s]=o),r}});var de=/^(?:input|select|textarea|button)$/i,pe=/^(?:a|area)$/i;function fe(t){return(t.match(j)||[]).join(" ")}function me(t){return t.getAttribute&&t.getAttribute("class")||""}function ge(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(j)||[]}$.fn.extend({prop:function(t,e){return H(this,$.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[$.propFix[t]||t]})}}),$.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&$.isXMLDoc(t)||(e=$.propFix[e]||e,r=$.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=$.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||pe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||($.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),$.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){$.propFix[this.toLowerCase()]=this}),$.fn.extend({addClass:function(t){var e,n,i,r,o,s,a,u=0;if(y(t))return this.each(function(e){$(this).addClass(t.call(this,e,me(this)))});if((e=ge(t)).length)for(;n=this[u++];)if(r=me(n),i=1===n.nodeType&&" "+fe(r)+" "){for(s=0;o=e[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(a=fe(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,o,s,a,u=0;if(y(t))return this.each(function(e){$(this).removeClass(t.call(this,e,me(this)))});if(!arguments.length)return this.attr("class","");if((e=ge(t)).length)for(;n=this[u++];)if(r=me(n),i=1===n.nodeType&&" "+fe(r)+" "){for(s=0;o=e[s++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(a=fe(i))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):y(t)?this.each(function(n){$(this).toggleClass(t.call(this,n,me(this),e),e)}):this.each(function(){var e,r,o,s;if(i)for(r=0,o=$(this),s=ge(t);e=s[r++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=me(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+fe(me(n))+" ").indexOf(e)>-1)return!0;return!1}});var ve=/\r/g;$.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=y(t),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,$(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=$.map(r,function(t){return null==t?"":t+""})),(e=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=$.valHooks[r.type]||$.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(ve,""):null==n?"":n:void 0}}),$.extend({valHooks:{option:{get:function(t){var e=$.find.attr(t,"value");return null!=e?e:fe($.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],u=s?o+1:r.length;for(i=o<0?u:s?o:0;i<u;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!D(n.parentNode,"optgroup"))){if(e=$(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=$.makeArray(e),s=r.length;s--;)((i=r[s]).selected=$.inArray($.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=$.inArray($(t).val(),e)>-1}},v.checkOn||($.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),v.focusin="onfocusin"in n;var ye=/^(?:focusinfocus|focusoutblur)$/,_e=function(t){t.stopPropagation()};$.extend($.event,{trigger:function(t,e,i,r){var o,a,u,l,c,h,d,p,m=[i||s],g=f.call(t,"type")?t.type:t,v=f.call(t,"namespace")?t.namespace.split("."):[];if(a=p=u=i=i||s,3!==i.nodeType&&8!==i.nodeType&&!ye.test(g+$.event.triggered)&&(g.indexOf(".")>-1&&(g=(v=g.split(".")).shift(),v.sort()),c=g.indexOf(":")<0&&"on"+g,(t=t[$.expando]?t:new $.Event(g,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:$.makeArray(e,[t]),d=$.event.special[g]||{},r||!d.trigger||!1!==d.trigger.apply(i,e))){if(!r&&!d.noBubble&&!_(i)){for(l=d.delegateType||g,ye.test(l+g)||(a=a.parentNode);a;a=a.parentNode)m.push(a),u=a;u===(i.ownerDocument||s)&&m.push(u.defaultView||u.parentWindow||n)}for(o=0;(a=m[o++])&&!t.isPropagationStopped();)p=a,t.type=o>1?l:d.bindType||g,(h=(J.get(a,"events")||{})[t.type]&&J.get(a,"handle"))&&h.apply(a,e),(h=c&&a[c])&&h.apply&&X(a)&&(t.result=h.apply(a,e),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(m.pop(),e)||!X(i)||c&&y(i[g])&&!_(i)&&((u=i[c])&&(i[c]=null),$.event.triggered=g,t.isPropagationStopped()&&p.addEventListener(g,_e),i[g](),t.isPropagationStopped()&&p.removeEventListener(g,_e),$.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(t,e,n){var i=$.extend(new $.Event,n,{type:t,isSimulated:!0});$.event.trigger(i,null,e)}}),$.fn.extend({trigger:function(t,e){return this.each(function(){$.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return $.event.trigger(t,e,n,!0)}}),v.focusin||$.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){$.event.simulate(e,t.target,$.event.fix(t))};$.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=J.access(i,e);r||i.addEventListener(t,n,!0),J.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=J.access(i,e)-1;r?J.access(i,e,r):(i.removeEventListener(t,n,!0),J.remove(i,e))}}});var be=n.location,we=Date.now(),xe=/\?/;$.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||$.error("Invalid XML: "+t),e};var $e=/\[\]$/,ke=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,Ce=/^(?:input|select|textarea|keygen)/i;function Te(t,e,n,i){var r;if(Array.isArray(e))$.each(e,function(e,r){n||$e.test(t)?i(t,r):Te(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==x(e))i(t,e);else for(r in e)Te(t+"["+r+"]",e[r],n,i)}$.param=function(t,e){var n,i=[],r=function(t,e){var n=y(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!$.isPlainObject(t))$.each(t,function(){r(this.name,this.value)});else for(n in t)Te(n,t[n],e,r);return i.join("&")},$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=$.prop(this,"elements");return t?$.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!$(this).is(":disabled")&&Ce.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!dt.test(t))}).map(function(t,e){var n=$(this).val();return null==n?null:Array.isArray(n)?$.map(n,function(t){return{name:e.name,value:t.replace(ke,"\r\n")}}):{name:e.name,value:n.replace(ke,"\r\n")}}).get()}});var Le=/%20/g,Se=/#.*$/,De=/([?&])_=[^&]*/,Me=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ae=/^(?:GET|HEAD)$/,Pe=/^\/\//,Ne={},Oe={},Ie="*/".concat("*"),Re=s.createElement("a");function je(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(j)||[];if(y(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Fe(t,e,n,i){var r={},o=t===Oe;function s(a){var u;return r[a]=!0,$.each(t[a]||[],function(t,a){var l=a(e,n,i);return"string"!=typeof l||o||r[l]?o?!(u=l):void 0:(e.dataTypes.unshift(l),s(l),!1)}),u}return s(e.dataTypes[0])||!r["*"]&&s("*")}function qe(t,e){var n,i,r=$.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&$.extend(!0,t,i),t}Re.href=be.href,$.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ie,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":$.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?qe(qe(t,$.ajaxSettings),e):qe($.ajaxSettings,t)},ajaxPrefilter:je(Ne),ajaxTransport:je(Oe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,a,u,l,c,h,d,p,f=$.ajaxSetup({},e),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?$(m):$.event,v=$.Deferred(),y=$.Callbacks("once memory"),_=f.statusCode||{},b={},w={},x="canceled",k={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a)for(a={};e=Me.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)k.always(t[k.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||x;return i&&i.abort(e),E(0,e),this}};if(v.promise(k),f.url=((t||f.url||be.href)+"").replace(Pe,be.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(j)||[""],null==f.crossDomain){l=s.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Re.protocol+"//"+Re.host!=l.protocol+"//"+l.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=$.param(f.data,f.traditional)),Fe(Ne,f,e,k),c)return k;for(d in(h=$.event&&f.global)&&0==$.active++&&$.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ae.test(f.type),r=f.url.replace(Se,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Le,"+")):(p=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(xe.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(De,"$1"),p=(xe.test(r)?"&":"?")+"_="+we+++p),f.url=r+p),f.ifModified&&($.lastModified[r]&&k.setRequestHeader("If-Modified-Since",$.lastModified[r]),$.etag[r]&&k.setRequestHeader("If-None-Match",$.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ie+"; q=0.01":""):f.accepts["*"]),f.headers)k.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(m,k,f)||c))return k.abort();if(x="abort",y.add(f.complete),k.done(f.success),k.fail(f.error),i=Fe(Oe,f,e,k)){if(k.readyState=1,h&&g.trigger("ajaxSend",[k,f]),c)return k;f.async&&f.timeout>0&&(u=n.setTimeout(function(){k.abort("timeout")},f.timeout));try{c=!1,i.send(b,E)}catch(t){if(c)throw t;E(-1,t)}}else E(-1,"No Transport");function E(t,e,s,a){var l,d,p,b,w,x=e;c||(c=!0,u&&n.clearTimeout(u),i=void 0,o=a||"",k.readyState=t>0?4:0,l=t>=200&&t<300||304===t,s&&(b=function(t,e,n){for(var i,r,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){u.unshift(r);break}if(u[0]in n)o=u[0];else{for(r in n){if(!u[0]||t.converters[r+" "+u[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(f,k,s)),b=function(t,e,n,i){var r,o,s,a,u,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=l[u+" "+o]||l["* "+o]))for(r in l)if((a=r.split(" "))[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[r]:!0!==l[r]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(f,b,k,l),l?(f.ifModified&&((w=k.getResponseHeader("Last-Modified"))&&($.lastModified[r]=w),(w=k.getResponseHeader("etag"))&&($.etag[r]=w)),204===t||"HEAD"===f.type?x="nocontent":304===t?x="notmodified":(x=b.state,d=b.data,l=!(p=b.error))):(p=x,!t&&x||(x="error",t<0&&(t=0))),k.status=t,k.statusText=(e||x)+"",l?v.resolveWith(m,[d,x,k]):v.rejectWith(m,[k,x,p]),k.statusCode(_),_=void 0,h&&g.trigger(l?"ajaxSuccess":"ajaxError",[k,f,l?d:p]),y.fireWith(m,[k,x]),h&&(g.trigger("ajaxComplete",[k,f]),--$.active||$.event.trigger("ajaxStop")))}return k},getJSON:function(t,e,n){return $.get(t,e,n,"json")},getScript:function(t,e){return $.get(t,void 0,e,"script")}}),$.each(["get","post"],function(t,e){$[e]=function(t,n,i,r){return y(n)&&(r=r||i,i=n,n=void 0),$.ajax($.extend({url:t,type:e,dataType:r,data:n,success:i},$.isPlainObject(t)&&t))}}),$._evalUrl=function(t){return $.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},$.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=$(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return y(t)?this.each(function(e){$(this).wrapInner(t.call(this,e))}):this.each(function(){var e=$(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=y(t);return this.each(function(n){$(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){$(this).replaceWith(this.childNodes)}),this}}),$.expr.pseudos.hidden=function(t){return!$.expr.pseudos.visible(t)},$.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},$.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Be={0:200,1223:204},Ue=$.ajaxSettings.xhr();v.cors=!!Ue&&"withCredentials"in Ue,v.ajax=Ue=!!Ue,$.ajaxTransport(function(t){var e,i;if(v.cors||Ue&&!t.crossDomain)return{send:function(r,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(s,r[s]);e=function(t){return function(){e&&(e=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Be[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),i=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout(function(){e&&i()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),$.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return $.globalEval(t),t}}}),$.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),$.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(i,r){e=$("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),s.head.appendChild(e[0])},abort:function(){n&&n()}}});var ze=[],Ve=/(=)\?(?=&|$)|\?\?/;$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ze.pop()||$.expando+"_"+we++;return this[t]=!0,t}}),$.ajaxPrefilter("json jsonp",function(t,e,i){var r,o,s,a=!1!==t.jsonp&&(Ve.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ve.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ve,"$1"+r):!1!==t.jsonp&&(t.url+=(xe.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||$.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=n[r],n[r]=function(){s=arguments},i.always(function(){void 0===o?$(n).removeProp(r):n[r]=o,t[r]&&(t.jsonpCallback=e.jsonpCallback,ze.push(r)),s&&y(o)&&o(s[0]),s=o=void 0}),"script"}),v.createHTMLDocument=function(){var t=s.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),$.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((i=(e=s.implementation.createHTMLDocument("")).createElement("base")).href=s.location.href,e.head.appendChild(i)):e=s),r=M.exec(t),o=!n&&[],r?[e.createElement(r[1])]:(r=_t([t],e,o),o&&o.length&&$(o).remove(),$.merge([],r.childNodes)));var i,r,o},$.fn.load=function(t,e,n){var i,r,o,s=this,a=t.indexOf(" ");return a>-1&&(i=fe(t.slice(a)),t=t.slice(0,a)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&$.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?$("<div>").append($.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},$.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){$.fn[e]=function(t){return this.on(e,t)}}),$.expr.pseudos.animated=function(t){return $.grep($.timers,function(e){return t===e.elem}).length},$.offset={setOffset:function(t,e,n){var i,r,o,s,a,u,l=$.css(t,"position"),c=$(t),h={};"static"===l&&(t.style.position="relative"),a=c.offset(),o=$.css(t,"top"),u=$.css(t,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(s=(i=c.position()).top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(u)||0),y(e)&&(e=e.call(t,n,$.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):c.css(h)}},$.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){$.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===$.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===$.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=$(t).offset()).top+=$.css(t,"borderTopWidth",!0),r.left+=$.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-$.css(i,"marginTop",!0),left:e.left-r.left-$.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===$.css(t,"position");)t=t.offsetParent;return t||bt})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;$.fn[t]=function(i){return H(this,function(t,i,r){var o;if(_(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r},t,i,arguments.length)}}),$.each(["top","left"],function(t,e){$.cssHooks[e]=zt(v.pixelPosition,function(t,n){if(n)return n=Ut(t,e),Ft.test(n)?$(t).position()[e]+"px":n})}),$.each({Height:"height",Width:"width"},function(t,e){$.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){$.fn[i]=function(r,o){var s=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===o?"margin":"border");return H(this,function(e,n,r){var o;return _(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?$.css(e,n,a):$.style(e,n,r,a)},e,s?r:void 0,s)}})}),$.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){$.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),$.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),$.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),$.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return i=u.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(u.call(arguments)))}).guid=t.guid=t.guid||$.guid++,r},$.holdReady=function(t){t?$.readyWait++:$.ready(!0)},$.isArray=Array.isArray,$.parseJSON=JSON.parse,$.nodeName=D,$.isFunction=y,$.isWindow=_,$.camelCase=Y,$.type=x,$.now=Date.now,$.isNumeric=function(t){var e=$.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(i=function(){return $}.apply(e,[]))||(t.exports=i);var He=n.jQuery,We=n.$;return $.noConflict=function(t){return n.$===$&&(n.$=We),t&&n.jQuery===$&&(n.jQuery=He),$},r||(n.jQuery=n.$=$),$})},function(t,e,n){"use strict";var i=n(0),r=function(t,e,n){this.element=t,this.options=e||{},this.namespace=this.namespace||"somewidget",this.event=n||null};r.prototype={destroy:function(t){i(t).removeData(this.namespace).off("."+this.namespace).show().next(".widget").remove()},disable:function(t){i(t).next(".widget").addClass("readonly")},enable:function(t){t.readOnly||i(t).next(".widget").removeClass("readonly")},update:function(){}},t.exports=r},,,function(t,e,n){"use strict";var i=n(105).os,r={},o=!1;["date","datetime","time","month"].forEach(function(t){var e=document.createElement("input");e.setAttribute("type",t),r[t]="text"!==e.type}),(i.ios||i.android)&&(o=!0,document.documentElement.classList.add("touch")),t.exports={get inputtypes(){return console.deprecate("support.inputtypes","support.inputTypes"),r},get inputTypes(){return r},get touch(){return o},set touch(t){o=t}}},function(t,e,n){"use strict";var i;t.exports={parseFunctionFromExpression:function(t,e){var n,i,r,o,s,a,u=new RegExp(e+"\\s*\\(","g"),l=[];if(!t||!e)return l;for(;null!==(i=u.exec(t));){for(r=1,a=[],o=i.index,s=n=u.lastIndex;0!==r;)"("===t[++n]?r++:")"===t[n]?r--:","===t[n]&&1===r&&(a.push(t.substring(s,n).trim()),s=n+1);a.push(t.substring(s,n).trim()),l.push([t.substring(o,n+1),a])}return l},stripQuotes:function(t){return/^".+"$/.test(t)||/^'.+'$/.test(t)?t.substring(1,t.length-1):t},getFilename:function(t,e){var n;return"object"==typeof t&&null!==t&&t.name?(e=e||"",(n=t.name.split(".")).length>1?n[n.length-2]+=e:1===n.length&&(n[0]+=e),n.join(".")):""},toArray:function(t){for(var e=[],n=t.length>>>0;n--;)e[n]=t[n];return e},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},readCookie:function(t){var e,n,r;if(i)return i[t];for(e=document.cookie.split("; "),i={},r=e.length-1;r>=0;r--)(n=e[r].split("="))[1]=decodeURIComponent(n[1]),"s:"===n[1].substr(0,2)&&(n[1]=n[1].slice(2),n[1]=n[1].slice(0,n[1].lastIndexOf("."))),i[n[0]]=decodeURIComponent(n[1]);return i[t]},dataUriToBlobSync:function(t){var e,n,i,r;e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),r=new Uint8Array(i);for(var o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return new Blob([r],{type:n})},getPasteData:function(t){var e=t.originalEvent.clipboardData||window.clipboardData;return e?e.getData("text"):null}}},function(t,e,n){"use strict";var i={constraint:{invalid:"Value not allowed",required:"This field is required"},"esri-geopicker":{"coordinate-mgrs":"MGRS coordinate",decimal:"decimal",degrees:"degrees, minutes, seconds","latitude-degrees":"latitude (dÂ° mâ sâ N)","longitude-degrees":"longitude (dÂ° mâ sâ W)",mgrs:"MGRS",notavailable:"Not Available",utm:"UTM","utm-easting":"easting (m)","utm-hemisphere":"hemisphere","utm-north":"North","utm-northing":"northing (m)","utm-south":"South","utm-zone":"zone"},filepicker:{placeholder:"Click here to upload file. (< __maxSize__)",notFound:"File __existing__ could not be found (leave unchanged if already submitted and you want to preserve it).",waitingForPermissions:"Waiting for user permissions.",resetWarning:"This will remove the __item__. Are you sure you want to do this?",toolargeerror:"File too large (> __maxSize__)",file:"file"},drawwidget:{drawing:"drawing",signature:"signature",annotation:"file and drawing"},form:{required:"required"},geopicker:{accuracy:"accuracy (m)",altitude:"altitude (m)",closepolygon:"close polygon",kmlcoords:"KML coordinates",kmlpaste:"paste KML coordinates here",latitude:"latitude (x.y Â°)",longitude:"longitude (x.y Â°)",points:"points",searchPlaceholder:"search for place or address",removePoint:"This will completely remove the current geopoint from the list of geopoints and cannot be undone. Are you sure you want to do this?"},selectpicker:{noneselected:"none selected",numberselected:"__number__ selected"},imagemap:{svgNotFound:"SVG image could not be found"},widget:{comment:{update:"Update"}},alert:{gotonotfound:{msg:"Failed to find question '__path__' in form. Is it a valid path?"}}};t.exports={t:function(t,e){var n="",r=i;return t.split(".").forEach(function(t){r=r?r[t]:"",n=r}),e=e||{},n=n.replace(/__([^_]+)__/,function(t,n){return e[n]})}}},function(t,e,n){"use strict";var i=n(14);function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==r&&p(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){i(function(){var i;try{i=e(n)}catch(e){return o.reject(t,e)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)})}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var s=f(function(){e(r,i)});"error"===s.status&&i(s.value)}function f(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}t.exports=l,l.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){throw n})})},l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(r);this.state!==u?h(n,this.state===a?t:e,this.outcome):this.queue.push(new c(n,t,e));return n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=f(d,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)p(t,i);else{t.state=a,t.outcome=e;for(var r=-1,s=t.queue.length;++r<s;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},l.resolve=function(t){if(t instanceof this)return t;return o.resolve(new this(r),t)},l.reject=function(t){var e=new this(r);return o.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);var s=new Array(n),a=0,u=-1,l=new this(r);for(;++u<n;)c(t[u],u);return l;function c(t,r){e.resolve(t).then(function(t){s[r]=t,++a!==n||i||(i=!0,o.resolve(l,s))},function(t){i||(i=!0,o.reject(l,t))})}},l.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);var s=-1,a=new this(r);for(;++s<n;)u(t[s]);return a;function u(t){e.resolve(t).then(function(t){i||(i=!0,o.resolve(a,t))},function(t){i||(i=!0,o.reject(a,t))})}}},function(t,e,n){"use strict";var i=n(14);function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==r&&p(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){i(function(){var i;try{i=e(n)}catch(e){return o.reject(t,e)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)})}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var s=f(function(){e(r,i)});"error"===s.status&&i(s.value)}function f(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}t.exports=l,l.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){throw n})})},l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(r);this.state!==u?h(n,this.state===a?t:e,this.outcome):this.queue.push(new c(n,t,e));return n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=f(d,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)p(t,i);else{t.state=a,t.outcome=e;for(var r=-1,s=t.queue.length;++r<s;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},l.resolve=function(t){if(t instanceof this)return t;return o.resolve(new this(r),t)},l.reject=function(t){var e=new this(r);return o.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);var s=new Array(n),a=0,u=-1,l=new this(r);for(;++u<n;)c(t[u],u);return l;function c(t,r){e.resolve(t).then(function(t){s[r]=t,++a!==n||i||(i=!0,o.resolve(l,s))},function(t){i||(i=!0,o.reject(l,t))})}},l.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);var s=-1,a=new this(r);for(;++s<n;)u(t[s]);return a;function u(t){e.resolve(t).then(function(t){i||(i=!0,o.resolve(a,t))},function(t){i||(i=!0,o.reject(a,t))})}}},function(t,e,n){"use strict";(function(e){function i(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var r=i(n(145)),o=i(n(146)),s=i(n(14)),a=n(147),u=i(n(148)),l=i(n(149)),c=i(n(152)),h=i(n(156)),d=i(n(157)),p="function"==typeof Promise?Promise:r;function f(t){if(t instanceof ArrayBuffer)return function(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),i=new Uint8Array(t);return n.set(i),e}(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}var m,g,v=Function.prototype.toString,y=v.call(Object);function _(t){var e,n,i;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,i=t.length;n<i;n++)e[n]=_(t[n]);return e}if(t instanceof Date)return t.toISOString();if(function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}(t))return f(t);if(!function(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&v.call(n)==y}(t))return t;for(n in e={},t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=_(t[n]);void 0!==r&&(e[n]=r)}return e}function b(t){var e=!1;return o(function(n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)})}function w(t){return o(function(e){var n=this,i="function"==typeof(e=_(e))[e.length-1]&&e.pop(),r=new p(function(i,r){var o;try{var s=b(function(t,e){t?r(t):i(e)});e.push(s),(o=t.apply(n,e))&&"function"==typeof o.then&&i(o)}catch(t){r(t)}});return i&&r.then(function(t){i(null,t)},i),r})}function x(t,e){return w(o(function(n){if(this._closed)return p.reject(new Error("database is closed"));if(this._destroyed)return p.reject(new Error("database is destroyed"));var i=this;return function(t,e,n){if(t.constructor.listeners("debug").length){for(var i=["api",t.name,e],r=0;r<n.length-1;r++)i.push(n[r]);t.constructor.emit("debug",i);var o=n[n.length-1];n[n.length-1]=function(n,i){var r=["api",t.name,e];r=r.concat(n?["error",n]:["success",i]),t.constructor.emit("debug",r),o(n,i)}}}(i,t,n),this.taskqueue.isReady?e.apply(this,n):new p(function(e,r){i.taskqueue.addTask(function(o){o?r(o):e(i[t].apply(i,n))})})}))}function $(t){return"$"+t}function k(t){return t.substring(1)}function E(){this._store={}}function C(t){if(this._store=new E,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}function T(t,e){for(var n={},i=0,r=e.length;i<r;i++){var o=e[i];o in t&&(n[o]=t[o])}return n}E.prototype.get=function(t){var e=$(t);return this._store[e]},E.prototype.set=function(t,e){var n=$(t);return this._store[n]=e,!0},E.prototype.has=function(t){return $(t)in this._store},E.prototype.delete=function(t){var e=$(t),n=e in this._store;return delete this._store[e],n},E.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,i=e.length;n<i;n++){var r=e[n];t(this._store[r],r=k(r))}},Object.defineProperty(E.prototype,"size",{get:function(){return Object.keys(this._store).length}}),C.prototype.add=function(t){return this._store.set(t,!0)},C.prototype.has=function(t){return this._store.has(t)},C.prototype.forEach=function(t){this._store.forEach(function(e,n){t(n)})},Object.defineProperty(C.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}()?(m=C,g=E):(m=Set,g=Map);var L,S=6;function D(t){return t}function M(t){return[{ok:t}]}function A(t,e,n){var i=e.docs,r=new g;i.forEach(function(t){r.has(t.id)?r.get(t.id).push(t):r.set(t.id,[t])});var o=r.size,s=0,a=new Array(o);function u(){++s===o&&function(){var t=[];a.forEach(function(e){e.docs.forEach(function(n){t.push({id:e.id,docs:[n]})})}),n(null,{results:t})}()}var l=[];r.forEach(function(t,e){l.push(e)});var c=0;function h(){if(!(c>=l.length)){var n=Math.min(c+S,l.length),i=l.slice(c,n);!function(n,i){n.forEach(function(n,o){var s=i+o,l=r.get(n),c=T(l[0],["atts_since","attachments"]);c.open_revs=l.map(function(t){return t.rev}),c.open_revs=c.open_revs.filter(D);var d=D;0===c.open_revs.length&&(delete c.open_revs,d=M),["revs","attachments","binary","ajax","latest"].forEach(function(t){t in e&&(c[t]=e[t])}),t.get(n,c,function(t,e){var i;i=t?[{error:t}]:d(e),function(t,e,n){a[t]={id:e,docs:n},u()}(s,n,i),h()})})}(i,c),c+=i.length}}h()}function P(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}if(P())L=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),L=!!localStorage.getItem("_pouch_check_localstorage")}catch(t){L=!1}function N(){return L}function O(){a.EventEmitter.call(this),this._listeners={},function(t){P()?chrome.storage.onChanged.addListener(function(e){null!=e.db_name&&t.emit(e.dbName.newValue)}):N()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(e){t.emit(e.key)}):window.attachEvent("storage",function(e){t.emit(e.key)}))}(this)}function I(t){if("undefined"!=typeof console&&"function"==typeof console[t]){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function R(t){var e=0;return t||(e=2e3),function(t,e){return t=parseInt(t,10)||0,(e=parseInt(e,10))!=e||e<=t?e=(t||1)<<1:e+=1,e>6e5&&(t=3e5,e=6e5),~~((e-t)*Math.random()+t)}(t,e)}function j(t,e){I("info","The above "+t+" is totally normal. "+e)}u(O,a.EventEmitter),O.prototype.addListener=function(t,e,n,i){if(!this._listeners[e]){var r=this,o=!1;this._listeners[e]=a,this.on(t,a)}function a(){if(r._listeners[e])if(o)o="waiting";else{o=!0;var t=T(i,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(t).on("change",function(t){t.seq>i.since&&!i.cancelled&&(i.since=t.seq,i.onChange(t))}).on("complete",function(){"waiting"===o&&s(a),o=!1}).on("error",function(){o=!1})}}},O.prototype.removeListener=function(t,e){e in this._listeners&&(a.EventEmitter.prototype.removeListener.call(this,t,this._listeners[e]),delete this._listeners[e])},O.prototype.notifyLocalWindows=function(t){P()?chrome.storage.local.set({dbName:t}):N()&&(localStorage[t]="a"===localStorage[t]?"b":"a")},O.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)};var F="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e};function q(t,e,n){Error.call(this,n),this.status=t,this.name=e,this.message=n,this.error=!0}u(q,Error),q.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new q(401,"unauthorized","Name or password is incorrect.");var B=new q(400,"bad_request","Missing JSON list of 'docs'"),U=new q(404,"not_found","missing"),z=new q(409,"conflict","Document update conflict"),V=new q(400,"bad_request","_id field must contain a string"),H=new q(412,"missing_id","_id is required for puts"),W=new q(400,"bad_request","Only reserved document ids may start with underscore."),Z=(new q(412,"precondition_failed","Database not open"),new q(500,"unknown_error","Database encountered an unknown error")),G=new q(500,"badarg","Some query argument is invalid"),Y=(new q(400,"invalid_request","Request was invalid"),new q(400,"query_parse_error","Some query parameter is invalid")),X=new q(500,"doc_validation","Bad special document member"),K=new q(400,"bad_request","Something wrong with the request"),J=new q(400,"bad_request","Document must be a JSON object"),Q=(new q(404,"not_found","Database not found"),new q(500,"indexed_db_went_bad","unknown")),tt=new q(500,"web_sql_went_bad","unknown"),et=(new q(500,"levelDB_went_went_bad","unknown"),new q(403,"forbidden","Forbidden by design doc validate_doc_update function"),new q(400,"bad_request","Invalid rev format")),nt=(new q(412,"file_exists","The database could not be created, the file already exists."),new q(412,"missing_stub","A pre-existing attachment stub wasn't found"));new q(413,"invalid_url","Provided URL is invalid");function it(t,e){function n(e){for(var n in t)"function"!=typeof t[n]&&(this[n]=t[n]);void 0!==e&&(this.reason=e)}return n.prototype=q.prototype,new n(e)}function rt(t){if("object"!=typeof t){var e=t;(t=Z).data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),t}function ot(t){var e={},n=t.filter&&"function"==typeof t.filter;return e.query=t.query_params,function(i){i.doc||(i.doc={});var r=n&&function(t,e,n){try{return!t(e,n)}catch(t){var i="Filter function threw: "+t.toString();return it(K,i)}}(t.filter,i.doc,e);if("object"==typeof r)return r;if(r)return!1;if(t.include_docs){if(!t.attachments)for(var o in i.doc._attachments)i.doc._attachments.hasOwnProperty(o)&&(i.doc._attachments[o].stub=!0)}else delete i.doc;return!0}}function st(t){for(var e=[],n=0,i=t.length;n<i;n++)e=e.concat(t[n]);return e}function at(t){var e;if(t?"string"!=typeof t?e=it(V):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=it(W)):e=it(H),e)throw e}function ut(t){return"boolean"==typeof t._remote?t._remote:"function"==typeof t.type&&(I("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===t.type())}function lt(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function ct(t){var e=lt(t);return e?e.join("/"):null}var ht=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],dt="queryKey",pt=/(?:^|&)([^&=]*)=?([^&]*)/g,ft=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function mt(t){for(var e=ft.exec(t),n={},i=14;i--;){var r=ht[i],o=e[i]||"",s=-1!==["user","password"].indexOf(r);n[r]=s?decodeURIComponent(o):o}return n[dt]={},n[ht[12]].replace(pt,function(t,e,i){e&&(n[dt][e]=i)}),n}function gt(t,e){var n=[],i=[];for(var r in e)e.hasOwnProperty(r)&&(n.push(r),i.push(e[r]));return n.push(t),Function.apply(null,n).apply(null,i)}function vt(t,e,n){return new p(function(i,r){t.get(e,function(o,s){if(o){if(404!==o.status)return r(o);s={}}var a=s._rev,u=n(s);if(!u)return i({updated:!1,rev:a});u._id=e,u._rev=a,i(function(t,e,n){return t.put(e).then(function(t){return{updated:!0,rev:t.rev}},function(i){if(409!==i.status)throw i;return vt(t,e._id,n)})}(t,u,n))})})}function yt(){return l.v4().replace(/-/g,"").toLowerCase()}var _t=l.v4;function bt(t){for(var e,n,i,r,o=t.rev_tree.slice();r=o.pop();){var s=r.ids,a=s[2],u=r.pos;if(a.length)for(var l=0,c=a.length;l<c;l++)o.push({pos:u+1,ids:a[l]});else{var h=!!s[1].deleted,d=s[0];e&&!(i!==h?i:n!==u?n<u:e<d)||(e=d,n=u,i=h)}}return n+"-"+e}function wt(t,e){for(var n,i=t.slice();n=i.pop();)for(var r=n.pos,o=n.ids,s=o[2],a=e(0===s.length,r,o[0],n.ctx,o[1]),u=0,l=s.length;u<l;u++)i.push({pos:r+1,ids:s[u],ctx:a})}function xt(t,e){return t.pos-e.pos}function $t(t){var e=[];wt(t,function(t,n,i,r,o){t&&e.push({rev:n+"-"+i,pos:n,opts:o})}),e.sort(xt).reverse();for(var n=0,i=e.length;n<i;n++)delete e[n].pos;return e}function kt(t){for(var e=bt(t),n=$t(t.rev_tree),i=[],r=0,o=n.length;r<o;r++){var s=n[r];s.rev===e||s.opts.deleted||i.push(s.rev)}return i}function Et(t){var e=[];return wt(t.rev_tree,function(t,n,i,r,o){"available"!==o.status||t||(e.push(n+"-"+i),o.status="missing")}),e}function Ct(t){for(var e,n=[],i=t.slice();e=i.pop();){var r=e.pos,o=e.ids,s=o[0],a=o[1],u=o[2],l=0===u.length,c=e.history?e.history.slice():[];c.push({id:s,opts:a}),l&&n.push({pos:r+1-c.length,ids:c});for(var h=0,d=u.length;h<d;h++)i.push({pos:r+1,ids:u[h],history:c})}return n.reverse()}function Tt(t,e){return t.pos-e.pos}function Lt(t,e,n){var i=function(t,e,n){for(var i,r=0,o=t.length;r<o;)n(t[i=r+o>>>1],e)<0?r=i+1:o=i;return r}(t,e,n);t.splice(i,0,e)}function St(t,e){for(var n,i,r=e,o=t.length;r<o;r++){var s=t[r],a=[s.id,s.opts,[]];i?(i[2].push(a),i=a):n=i=a}return n}function Dt(t,e){return t[0]<e[0]?-1:1}function Mt(t,e){for(var n=[{tree1:t,tree2:e}],i=!1;n.length>0;){var r=n.pop(),o=r.tree1,s=r.tree2;(o[1].status||s[1].status)&&(o[1].status="available"===o[1].status||"available"===s[1].status?"available":"missing");for(var a=0;a<s[2].length;a++)if(o[2][0]){for(var u=!1,l=0;l<o[2].length;l++)o[2][l][0]===s[2][a][0]&&(n.push({tree1:o[2][l],tree2:s[2][a]}),u=!0);u||(i="new_branch",Lt(o[2],s[2][a],Dt))}else i="new_leaf",o[2][0]=s[2][a]}return{conflicts:i,tree:t}}function At(t,e,n){var i,r=[],o=!1,s=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var a=0,u=t.length;a<u;a++){var l=t[a];if(l.pos===e.pos&&l.ids[0]===e.ids[0])i=Mt(l.ids,e.ids),r.push({pos:l.pos,ids:i.tree}),o=o||i.conflicts,s=!0;else if(!0!==n){var c=l.pos<e.pos?l:e,h=l.pos<e.pos?e:l,d=h.pos-c.pos,p=[],f=[];for(f.push({ids:c.ids,diff:d,parent:null,parentIdx:null});f.length>0;){var m=f.pop();if(0!==m.diff)for(var g=m.ids[2],v=0,y=g.length;v<y;v++)f.push({ids:g[v],diff:m.diff-1,parent:m.ids,parentIdx:v});else m.ids[0]===h.ids[0]&&p.push(m)}var _=p[0];_?(i=Mt(_.ids,h.ids),_.parent[2][_.parentIdx]=i.tree,r.push({pos:c.pos,ids:c.ids}),o=o||i.conflicts,s=!0):r.push(l)}else r.push(l)}return s||r.push(e),r.sort(Tt),{tree:r,conflicts:o||"internal_node"}}function Pt(t,e,n){var i=At(t,e),r=function(t,e){for(var n,i,r=Ct(t),o=0,s=r.length;o<s;o++){var a,u=r[o],l=u.ids;if(l.length>e){n||(n={});var c=l.length-e;a={pos:u.pos+c,ids:St(l,c)};for(var h=0;h<c;h++){var d=u.pos+h+"-"+l[h].id;n[d]=!0}}else a={pos:u.pos,ids:St(l,0)};i=i?At(i,a,!0).tree:[a]}return n&&wt(i,function(t,e,i){delete n[e+"-"+i]}),{tree:i,revs:n?Object.keys(n):[]}}(i.tree,n);return{tree:r.tree,stemmedRevs:r.revs,conflicts:i.conflicts}}function Nt(t){return t.ids}function Ot(t,e){e||(e=bt(t));for(var n,i=e.substring(e.indexOf("-")+1),r=t.rev_tree.map(Nt);n=r.pop();){if(n[0]===i)return!!n[1].deleted;r=r.concat(n[2])}}function It(t){return/^_local/.test(t)}function Rt(t,e){for(var n,i=e.rev_tree.slice();n=i.pop();){var r=n.pos,o=n.ids,s=o[0],a=o[1],u=o[2],l=0===u.length,c=n.history?n.history.slice():[];if(c.push({id:s,pos:r,opts:a}),l)for(var h=0,d=c.length;h<d;h++){var p=c[h];if(p.pos+"-"+p.id===t)return r+"-"+s}for(var f=0,m=u.length;f<m;f++)i.push({pos:r+1,ids:u[f],history:c})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}function jt(t,e,n){a.EventEmitter.call(this);var i=this;this.db=t;var r=(e=e?_(e):{}).complete=b(function(e,n){e?function(t,e){return"listenerCount"in t?t.listenerCount(e):a.EventEmitter.listenerCount(t,e)}(i,"error")>0&&i.emit("error",e):i.emit("complete",n),i.removeAllListeners(),t.removeListener("destroyed",o)});function o(){i.cancel()}n&&(i.on("complete",function(t){n(null,t)}),i.on("error",n)),t.once("destroyed",o),e.onChange=function(t,e,n){i.isCancelled||function(t,e,n,i){try{t.emit("change",e,n,i)}catch(t){I("error",'Error in .on("change", function):',t)}}(i,t,e,n)};var s=new p(function(t,n){e.complete=function(e,i){e?n(e):t(i)}});i.once("cancel",function(){t.removeListener("destroyed",o),e.complete(null,{status:"cancelled"})}),this.then=s.then.bind(s),this.catch=s.catch.bind(s),this.then(function(t){r(null,t)},r),t.taskqueue.isReady?i.validateChanges(e):t.taskqueue.addTask(function(t){t?e.complete(t):i.isCancelled?i.emit("cancel"):i.validateChanges(e)})}function Ft(t,e,n){var i=[{rev:t._rev}];"all_docs"===n.style&&(i=$t(e.rev_tree).map(function(t){return{rev:t.rev}}));var r={id:e.id,changes:i,doc:t};return Ot(e,t._rev)&&(r.deleted=!0),n.conflicts&&(r.doc._conflicts=kt(e),r.doc._conflicts.length||delete r.doc._conflicts),r}function qt(t,e){return t<e?-1:t>e?1:0}function Bt(t,e){return function(n,i){n||i[0]&&i[0].error?((n=n||i[0]).docId=e,t(n)):t(null,i.length?i[0]:i)}}function Ut(t,e){var n=qt(t._id,e._id);return 0!==n?n:qt(t._revisions?t._revisions.start:0,e._revisions?e._revisions.start:0)}function zt(){a.EventEmitter.call(this)}function Vt(){this.isReady=!1,this.failed=!1,this.queue=[]}function Ht(t,e){if(!(this instanceof Ht))return new Ht(t,e);var n=this;if(e=e||{},t&&"object"==typeof t&&(t=(e=t).name,delete e.name),this.__opts=e=_(e),n.auto_compaction=e.auto_compaction,n.prefix=Ht.prefix,"string"!=typeof t)throw new Error("Missing/invalid DB name");var i=function(t,e){var n=t.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var i=Ht.adapters,r=Ht.preferredAdapters,o=Ht.prefix,s=e.adapter;if(!s)for(var a=0;a<r.length&&"idb"===(s=r[a])&&"websql"in i&&N()&&localStorage["_pouch__websqldb_"+o+t];++a)I("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var u=i[s];return{name:u&&"use_prefix"in u&&!u.use_prefix?t:o+t,adapter:s}}((e.prefix||"")+t,e);if(e.name=i.name,e.adapter=e.adapter||i.adapter,n.name=t,n._adapter=e.adapter,Ht.emit("debug",["adapter","Picked adapter: ",e.adapter]),!Ht.adapters[e.adapter]||!Ht.adapters[e.adapter].valid())throw new Error("Invalid Adapter: "+e.adapter);zt.call(n),n.taskqueue=new Vt,n.adapter=e.adapter,Ht.adapters[e.adapter].call(n,e,function(t){if(t)return n.taskqueue.fail(t);!function(t){function e(e){t.removeListener("closed",n),e||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)}(n),n.emit("created",n),Ht.emit("created",n.name),n.taskqueue.ready(n)})}u(jt,a.EventEmitter),jt.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},jt.prototype.validateChanges=function(t){var e=t.complete,n=this;Ht._changesFilterPlugin?Ht._changesFilterPlugin.validate(t,function(i){if(i)return e(i);n.doChanges(t)}):n.doChanges(t)},jt.prototype.doChanges=function(t){var e=this,n=t.complete;if("live"in(t=_(t))&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=Ft,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"!==t.since){if(Ht._changesFilterPlugin){if(Ht._changesFilterPlugin.normalize(t),Ht._changesFilterPlugin.shouldFilter(this,t))return Ht._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach(function(e){e in t&&I("warn",'The "'+e+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=n;var i=this.db._changes(t);if(i&&"function"==typeof i.cancel){var r=e.cancel;e.cancel=o(function(t){i.cancel(),r.apply(this,t)})}}else this.db.info().then(function(i){e.isCancelled?n(null,{status:"cancelled"}):(t.since=i.update_seq,e.doChanges(t))},n)},u(zt,a.EventEmitter),zt.prototype.post=x("post",function(t,e,n){if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(it(J));this.bulkDocs({docs:[t]},e,Bt(n,t._id))}),zt.prototype.put=x("put",function(t,e,n){if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(it(J));if(at(t._id),It(t._id)&&"function"==typeof this._putLocal)return t._deleted?this._removeLocal(t,n):this._putLocal(t,n);var i=this;function r(n){"function"==typeof i._put&&!1!==e.new_edits?i._put(t,e,n):i.bulkDocs({docs:[t]},e,Bt(n,t._id))}e.force&&t._rev?(!function(){var n=t._rev.split("-"),i=n[1],r=parseInt(n[0],10)+1,o=yt();t._revisions={start:r,ids:[o,i]},t._rev=r+"-"+o,e.new_edits=!1}(),r(function(e){var i=e?null:{ok:!0,id:t._id,rev:t._rev};n(e,i)})):r(n)}),zt.prototype.putAttachment=x("putAttachment",function(t,e,n,i,r){var o=this;function s(t){var n="_rev"in t?parseInt(t._rev,10):0;return t._attachments=t._attachments||{},t._attachments[e]={content_type:r,data:i,revpos:++n},o.put(t)}return"function"==typeof r&&(r=i,i=n,n=null),void 0===r&&(r=i,i=n,n=null),r||I("warn","Attachment",e,"on document",t,"is missing content_type"),o.get(t).then(function(t){if(t._rev!==n)throw it(z);return s(t)},function(e){if(e.reason===U.message)return s({_id:t});throw e})}),zt.prototype.removeAttachment=x("removeAttachment",function(t,e,n,i){var r=this;r.get(t,function(t,o){if(t)i(t);else if(o._rev===n){if(!o._attachments)return i();delete o._attachments[e],0===Object.keys(o._attachments).length&&delete o._attachments,r.put(o,i)}else i(it(z))})}),zt.prototype.remove=x("remove",function(t,e,n,i){var r;"string"==typeof e?(r={_id:t,_rev:e},"function"==typeof n&&(i=n,n={})):(r=t,"function"==typeof e?(i=e,n={}):(i=n,n=e)),(n=n||{}).was_delete=!0;var o={_id:r._id,_rev:r._rev||n.rev,_deleted:!0};if(It(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(r,i);this.bulkDocs({docs:[o]},n,Bt(i,o._id))}),zt.prototype.revsDiff=x("revsDiff",function(t,e,n){"function"==typeof e&&(n=e,e={});var i=Object.keys(t);if(!i.length)return n(null,{});var r=0,o=new g;function s(t,e){o.has(t)||o.set(t,{missing:[]}),o.get(t).missing.push(e)}i.map(function(e){this._getRevisionTree(e,function(a,u){if(a&&404===a.status&&"missing"===a.message)o.set(e,{missing:t[e]});else{if(a)return n(a);!function(e,n){var i=t[e].slice(0);wt(n,function(t,n,r,o,a){var u=n+"-"+r,l=i.indexOf(u);-1!==l&&(i.splice(l,1),"available"!==a.status&&s(e,u))}),i.forEach(function(t){s(e,t)})}(e,u)}if(++r===i.length){var l={};return o.forEach(function(t,e){l[e]=t}),n(null,l)}})},this)}),zt.prototype.bulkGet=x("bulkGet",function(t,e){A(this,t,e)}),zt.prototype.compactDocument=x("compactDocument",function(t,e,n){var i=this;this._getRevisionTree(t,function(r,o){if(r)return n(r);var s=function(t){var e={},n=[];return wt(t,function(t,i,r,o){var s=i+"-"+r;return t&&(e[s]=0),void 0!==o&&n.push({from:o,to:s}),s}),n.reverse(),n.forEach(function(t){void 0===e[t.from]?e[t.from]=1+e[t.to]:e[t.from]=Math.min(e[t.from],1+e[t.to])}),e}(o),a=[],u=[];Object.keys(s).forEach(function(t){s[t]>e&&a.push(t)}),wt(o,function(t,e,n,i,r){var o=e+"-"+n;"available"===r.status&&-1!==a.indexOf(o)&&u.push(o)}),i._doCompaction(t,u,n)})}),zt.prototype.compact=x("compact",function(t,e){"function"==typeof t&&(e=t,t={});t=t||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:t,callback:e}),1===this._compactionQueue.length&&function t(e){var n=e._compactionQueue[0],i=n.opts,r=n.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(n){n&&n.last_seq&&(i.last_seq=n.last_seq),e._compact(i,function(n,i){n?r(n):r(null,i),s(function(){e._compactionQueue.shift(),e._compactionQueue.length&&t(e)})})})}(this)}),zt.prototype._compact=function(t,e){var n=this,i={return_docs:!1,last_seq:t.last_seq||0},r=[];n.changes(i).on("change",function(t){r.push(n.compactDocument(t.id,0))}).on("complete",function(t){var i=t.last_seq;p.all(r).then(function(){return vt(n,"_local/compaction",function(t){return(!t.last_seq||t.last_seq<i)&&(t.last_seq=i,t)})}).then(function(){e(null,{ok:!0})}).catch(e)}).on("error",e)},zt.prototype.get=x("get",function(t,e,n){if("function"==typeof e&&(n=e,e={}),"string"!=typeof t)return n(it(V));if(It(t)&&"function"==typeof this._getLocal)return this._getLocal(t,n);var i=[],r=this;function o(){var o=[],s=i.length;if(!s)return n(null,o);i.forEach(function(i){r.get(t,{rev:i,revs:e.revs,latest:e.latest,attachments:e.attachments,binary:e.binary},function(t,e){if(t)o.push({missing:i});else{for(var r,a=0,u=o.length;a<u;a++)if(o[a].ok&&o[a].ok._rev===e._rev){r=!0;break}r||o.push({ok:e})}--s||n(null,o)})})}if(!e.open_revs)return this._get(t,e,function(i,o){if(i)return i.docId=t,n(i);var s=o.doc,a=o.metadata,u=o.ctx;if(e.conflicts){var l=kt(a);l.length&&(s._conflicts=l)}if(Ot(a,s._rev)&&(s._deleted=!0),e.revs||e.revs_info){for(var c=s._rev.split("-"),h=parseInt(c[0],10),d=c[1],p=Ct(a.rev_tree),f=null,m=0;m<p.length;m++){var g=p[m],v=g.ids.map(function(t){return t.id}).indexOf(d);(v===h-1||!f&&-1!==v)&&(f=g)}var y=f.ids.map(function(t){return t.id}).indexOf(s._rev.split("-")[1])+1,_=f.ids.length-y;if(f.ids.splice(y,_),f.ids.reverse(),e.revs&&(s._revisions={start:f.pos+f.ids.length-1,ids:f.ids.map(function(t){return t.id})}),e.revs_info){var b=f.pos+f.ids.length;s._revs_info=f.ids.map(function(t){return{rev:--b+"-"+t.id,status:t.opts.status}})}}if(e.attachments&&s._attachments){var w=s._attachments,x=Object.keys(w).length;if(0===x)return n(null,s);Object.keys(w).forEach(function(t){this._getAttachment(s._id,t,w[t],{rev:s._rev,binary:e.binary,ctx:u},function(e,i){var r=s._attachments[t];r.data=i,delete r.stub,delete r.length,--x||n(null,s)})},r)}else{if(s._attachments)for(var $ in s._attachments)s._attachments.hasOwnProperty($)&&(s._attachments[$].stub=!0);n(null,s)}});if("all"===e.open_revs)this._getRevisionTree(t,function(t,e){if(t)return n(t);i=$t(e).map(function(t){return t.rev}),o()});else{if(!Array.isArray(e.open_revs))return n(it(Z,"function_clause"));i=e.open_revs;for(var s=0;s<i.length;s++){var a=i[s];if("string"!=typeof a||!/^\d+-/.test(a))return n(it(et))}o()}}),zt.prototype.getAttachment=x("getAttachment",function(t,e,n,i){var r=this;n instanceof Function&&(i=n,n={}),this._get(t,n,function(o,s){return o?i(o):s.doc._attachments&&s.doc._attachments[e]?(n.ctx=s.ctx,n.binary=!0,void r._getAttachment(t,e,s.doc._attachments[e],n,i)):i(it(U))})}),zt.prototype.allDocs=x("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(n)return void e(it(Y,"Query parameter `"+n+"` is not compatible with multi-get"));if(!ut(this)&&(function(t){var e="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;t.keys=e,t.skip=0,delete t.limit,t.descending&&(e.reverse(),t.descending=!1)}(t),0===t.keys.length))return this._allDocs({limit:0},e)}return this._allDocs(t,e)}),zt.prototype.changes=function(t,e){return"function"==typeof t&&(e=t,t={}),new jt(this,t,e)},zt.prototype.close=x("close",function(t){return this._closed=!0,this.emit("closed"),this._close(t)}),zt.prototype.info=x("info",function(t){var e=this;this._info(function(n,i){if(n)return t(n);i.db_name=i.db_name||e.name,i.auto_compaction=!(!e.auto_compaction||ut(e)),i.adapter=e.adapter,t(null,i)})}),zt.prototype.id=x("id",function(t){return this._id(t)}),zt.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},zt.prototype.bulkDocs=x("bulkDocs",function(t,e,n){if("function"==typeof e&&(n=e,e={}),e=e||{},Array.isArray(t)&&(t={docs:t}),!t||!t.docs||!Array.isArray(t.docs))return n(it(B));for(var i=0;i<t.docs.length;++i)if("object"!=typeof t.docs[i]||Array.isArray(t.docs[i]))return n(it(J));var r;if(t.docs.forEach(function(t){t._attachments&&Object.keys(t._attachments).forEach(function(e){r=r||function(t){return"_"===t.charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'"}(e),t._attachments[e].content_type||I("warn","Attachment",e,"on document",t._id,"is missing content_type")})}),r)return n(it(K,r));"new_edits"in e||(e.new_edits=!("new_edits"in t)||t.new_edits);var o=this;e.new_edits||ut(o)||t.docs.sort(Ut),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var i=Object.keys(n._attachments),r=0;r<i.length;r++){var o=i[r];n._attachments[o]=T(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}(t.docs);var s=t.docs.map(function(t){return t._id});return this._bulkDocs(t,e,function(t,i){if(t)return n(t);if(e.new_edits||(i=i.filter(function(t){return t.error})),!ut(o))for(var r=0,a=i.length;r<a;r++)i[r].id=i[r].id||s[r];n(null,i)})}),zt.prototype.registerDependentDatabase=x("registerDependentDatabase",function(t,e){var n=new this.constructor(t,this.__opts);vt(this,"_local/_pouch_dependentDbs",function(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}).then(function(){e(null,{db:n})}).catch(e)}),zt.prototype.destroy=x("destroy",function(t,e){"function"==typeof t&&(e=t,t={});var n=this,i=!("use_prefix"in n)||n.use_prefix;function r(){n._destroy(t,function(t,i){if(t)return e(t);n._destroyed=!0,n.emit("destroyed"),e(null,i||{ok:!0})})}if(ut(n))return r();n.get("_local/_pouch_dependentDbs",function(t,o){if(t)return 404!==t.status?e(t):r();var s=o.dependentDbs,a=n.constructor,u=Object.keys(s).map(function(t){var e=i?t.replace(new RegExp("^"+a.prefix),""):t;return new a(e,n.__opts).destroy()});p.all(u).then(r,e)})}),Vt.prototype.execute=function(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()},Vt.prototype.fail=function(t){this.failed=t,this.execute()},Vt.prototype.ready=function(t){this.isReady=!0,this.db=t,this.execute()},Vt.prototype.addTask=function(t){this.queue.push(t),this.failed&&this.execute()},u(Ht,zt),Ht.adapters={},Ht.preferredAdapters=[],Ht.prefix="_pouch_";var Wt=new a.EventEmitter;!function(t){Object.keys(a.EventEmitter.prototype).forEach(function(e){"function"==typeof a.EventEmitter.prototype[e]&&(t[e]=Wt[e].bind(Wt))});var e=t._destructionListeners=new g;t.on("ref",function(t){e.has(t.name)||e.set(t.name,[]),e.get(t.name).push(t)}),t.on("unref",function(t){if(e.has(t.name)){var n=e.get(t.name),i=n.indexOf(t);i<0||(n.splice(i,1),n.length>1?e.set(t.name,n):e.delete(t.name))}}),t.on("destroyed",function(t){if(e.has(t)){var n=e.get(t);e.delete(t),n.forEach(function(t){t.emit("destroyed",!0)})}})}(Ht),Ht.adapter=function(t,e,n){e.valid()&&(Ht.adapters[t]=e,n&&Ht.preferredAdapters.push(t))},Ht.plugin=function(t){if("function"==typeof t)t(Ht);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){Ht.prototype[e]=t[e]})}return this.__defaults&&(Ht.__defaults=F({},this.__defaults)),Ht},Ht.defaults=function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);n=n||{},t&&"object"==typeof t&&(t=(n=t).name,delete n.name),n=F({},e.__defaults,n),Ht.call(this,t,n)}return u(e,Ht),e.preferredAdapters=Ht.preferredAdapters.slice(),Object.keys(Ht).forEach(function(t){t in e||(e[t]=Ht[t])}),e.__defaults=F({},this.__defaults,t),e};function Zt(t,e){for(var n=t,i=0,r=e.length;i<r;i++){if(!(n=n[e[i]]))break}return n}function Gt(t){for(var e=[],n="",i=0,r=t.length;i<r;i++){var o=t[i];"."===o?i>0&&"\\"===t[i-1]?n=n.substring(0,n.length-1)+".":(e.push(n),n=""):n+=o}return e.push(n),e}var Yt=["$or","$nor","$not"];function Xt(t){return Yt.indexOf(t)>-1}function Kt(t){return Object.keys(t)[0]}function Jt(t){var e={};return t.forEach(function(t){Object.keys(t).forEach(function(n){var i=t[n];if("object"!=typeof i&&(i={$eq:i}),Xt(n))i instanceof Array?e[n]=i.map(function(t){return Jt([t])}):e[n]=Jt([i]);else{var r=e[n]=e[n]||{};Object.keys(i).forEach(function(t){var e=i[t];return"$gt"===t||"$gte"===t?function(t,e,n){if(void 0!==n.$eq)return;void 0!==n.$gte?"$gte"===t?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):void 0!==n.$gt?"$gte"===t?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e}(t,e,r):"$lt"===t||"$lte"===t?function(t,e,n){if(void 0!==n.$eq)return;void 0!==n.$lte?"$lte"===t?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):void 0!==n.$lt?"$lte"===t?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e}(t,e,r):"$ne"===t?function(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}(e,r):"$eq"===t?function(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}(e,r):void(r[t]=e)})}})}),e}var Qt=-324,te=3,ee="";function ne(t,e){if(t===e)return 0;t=ie(t),e=ie(e);var n=ue(t),i=ue(e);if(n-i!=0)return n-i;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return function(t,e){return t===e?0:t>e?1:-1}(t,e)}return Array.isArray(t)?function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=ne(t[i],e[i]);if(0!==r)return r}return t.length===e.length?0:t.length>e.length?1:-1}(t,e):function(t,e){for(var n=Object.keys(t),i=Object.keys(e),r=Math.min(n.length,i.length),o=0;o<r;o++){var s=ne(n[o],i[o]);if(0!==s)return s;if(0!==(s=ne(t[n[o]],e[i[o]])))return s}return n.length===i.length?0:n.length>i.length?1:-1}(t,e)}function ie(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var i=0;i<n;i++)t[i]=ie(e[i])}else{if(t instanceof Date)return t.toJSON();if(null!==t)for(var r in t={},e)if(e.hasOwnProperty(r)){var o=e[r];void 0!==o&&(t[r]=ie(o))}}}return t}function re(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return function(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),i=t<0,r=i?"0":"2",o=function(t,e,n){return function(t,e,n){for(var i="",r=n-t.length;i.length<r;)i+=e;return i}(t,e,n)+t}(((i?-n:n)-Qt).toString(),"0",te);r+=ee+o;var s=Math.abs(parseFloat(e[0]));i&&(s=10-s);var a=s.toFixed(20);return a=a.replace(/\.?0+$/,""),r+=ee+a}(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),i=-1,r=n.length,o="";if(e)for(;++i<r;)o+=oe(n[i]);else for(;++i<r;){var s=n[i];o+=oe(s)+oe(t[s])}return o}return""}function oe(t){return ue(t=ie(t))+ee+re(t)+"\0"}function se(t,e){var n,i=e;if("1"===t[e])n=0,e++;else{var r="0"===t[e];e++;var o="",s=t.substring(e,e+te),a=parseInt(s,10)+Qt;for(r&&(a=-a),e+=te;;){var u=t[e];if("\0"===u)break;o+=u,e++}n=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),r&&(n-=10),0!==a&&(n=parseFloat(n+"e"+a))}return{num:n,length:e-i}}function ae(t,e){var n=t.pop();if(e.length){var i=e[e.length-1];n===i.element&&(e.pop(),i=e[e.length-1]);var r=i.element,o=i.index;if(Array.isArray(r))r.push(n);else if(o===t.length-2){r[t.pop()]=n}else t.push(n)}}function ue(t){var e=["boolean","number","string","object"].indexOf(typeof t);return~e?null===t?1:Array.isArray(t)?5:e<3?e+2:e+3:Array.isArray(t)?5:void 0}function le(t,e,n){if(t=t.filter(function(t){return ce(t.doc,e.selector,n)}),e.sort){var i=function(t){function e(e){return t.map(function(t){var n=Gt(Kt(t));return Zt(e,n)})}return function(t,n){var i=ne(e(t.doc),e(n.doc));return 0!==i?i:function(t,e){return t<e?-1:t>e?1:0}(t.doc._id,n.doc._id)}}(e.sort);t=t.sort(i),"string"!=typeof e.sort[0]&&"desc"===function(t){return t[Kt(t)]}(e.sort[0])&&(t=t.reverse())}if("limit"in e||"skip"in e){var r=e.skip||0,o=("limit"in e?e.limit:t.length)+r;t=t.slice(r,o)}return t}function ce(t,e,n){return n.every(function(n){var i=e[n],r=Gt(n),o=Zt(t,r);return Xt(n)?function(t,e,n){if("$or"===t)return e.some(function(t){return ce(n,t,Object.keys(t))});if("$not"===t)return!ce(n,e,Object.keys(e));return!e.find(function(t){return ce(n,t,Object.keys(t))})}(n,i,t):he(i,t,r,o)})}function he(t,e,n,i){return!t||Object.keys(t).every(function(r){var o=t[r];return function(t,e,n,i,r){if(!me[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return me[t](e,n,i,r)}(r,e,o,n,i)})}function de(t){return void 0!==t&&null!==t}function pe(t){return void 0!==t}function fe(t,e){return e.some(function(e){return t instanceof Array?t.indexOf(e)>-1:t===e})}var me={$elemMatch:function(t,e,n,i){return!!Array.isArray(i)&&(0!==i.length&&("object"==typeof i[0]?i.some(function(t){return ce(t,e,Object.keys(e))}):i.some(function(i){return he(e,t,n,i)})))},$allMatch:function(t,e,n,i){return!!Array.isArray(i)&&(0!==i.length&&("object"==typeof i[0]?i.every(function(t){return ce(t,e,Object.keys(e))}):i.every(function(i){return he(e,t,n,i)})))},$eq:function(t,e,n,i){return pe(i)&&0===ne(i,e)},$gte:function(t,e,n,i){return pe(i)&&ne(i,e)>=0},$gt:function(t,e,n,i){return pe(i)&&ne(i,e)>0},$lte:function(t,e,n,i){return pe(i)&&ne(i,e)<=0},$lt:function(t,e,n,i){return pe(i)&&ne(i,e)<0},$exists:function(t,e,n,i){return e?pe(i):!pe(i)},$mod:function(t,e,n,i){return de(i)&&function(t,e){var n=e[0],i=e[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(i,10)!==i)throw new Error("Modulus is not an integer");return parseInt(t,10)===t&&t%n===i}(i,e)},$ne:function(t,e,n,i){return e.every(function(t){return 0!==ne(i,t)})},$in:function(t,e,n,i){return de(i)&&fe(i,e)},$nin:function(t,e,n,i){return de(i)&&!fe(i,e)},$size:function(t,e,n,i){return de(i)&&function(t,e){return t.length===e}(i,e)},$all:function(t,e,n,i){return Array.isArray(i)&&function(t,e){return e.every(function(e){return t.indexOf(e)>-1})}(i,e)},$regex:function(t,e,n,i){return de(i)&&function(t,e){return new RegExp(e).test(t)}(i,e)},$type:function(t,e,n,i){return function(t,e){switch(e){case"null":return null===t;case"boolean":return"boolean"==typeof t;case"number":return"number"==typeof t;case"string":return"string"==typeof t;case"array":return t instanceof Array;case"object":return"[object Object]"==={}.toString.call(t)}throw new Error(e+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(i,e)}};function ge(t,e){if("object"!=typeof e)throw new Error("Selector error: expected a JSON object");var n=le([{doc:t}],{selector:e=function(t){var e=_(t),n=!1;"$and"in e&&(e=Jt(e.$and),n=!0),["$or","$nor"].forEach(function(t){t in e&&e[t].forEach(function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n],r=t[i];"object"==typeof r&&null!==r||(t[i]={$eq:r})}})}),"$not"in e&&(e.$not=Jt([e.$not]));for(var i=Object.keys(e),r=0;r<i.length;r++){var o=i[r],s=e[o];"object"!=typeof s||null===s?s={$eq:s}:"$ne"in s&&!n&&(s.$ne=[s.$ne]),e[o]=s}return e}(e)},Object.keys(e));return n&&1===n.length}function ve(t,e){if(t.selector&&t.filter&&"_selector"!==t.filter){var n="string"==typeof t.filter?t.filter:"function";return e(new Error('selector invalid for filter "'+n+'"'))}e()}function ye(t){t.view&&!t.filter&&(t.filter="_view"),t.selector&&!t.filter&&(t.filter="_selector"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=ct(t.view):t.filter=ct(t.filter))}function _e(t,e){return e.filter&&"string"==typeof e.filter&&!e.doc_ids&&!ut(t.db)}function be(t,e){var n=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var i=it(K,"`view` filter parameter not found or invalid.");return n(i)}var r=lt(e.view);t.db.get("_design/"+r[0],function(i,o){if(t.isCancelled)return n(null,{status:"cancelled"});if(i)return n(rt(i));var s=o&&o.views&&o.views[r[1]]&&o.views[r[1]].map;if(!s)return n(it(U,o.views?"missing json key: "+r[1]:"missing json key: views"));e.filter=function(t){return gt(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+t+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{})}(s),t.doChanges(e)})}else if(e.selector)e.filter=function(t){return ge(t,e.selector)},t.doChanges(e);else{var o=lt(e.filter);t.db.get("_design/"+o[0],function(i,r){if(t.isCancelled)return n(null,{status:"cancelled"});if(i)return n(rt(i));var s=r&&r.filters&&r.filters[o[1]];if(!s)return n(it(U,r&&r.filters?"missing json key: "+o[1]:"missing json key: filters"));e.filter=function(t){return gt('"use strict";\nreturn '+t+";",{})}(s),t.doChanges(e)})}}function we(t){return t.reduce(function(t,e){return t[e]=!0,t},{})}Ht.plugin(function(t){t.debug=c;var e={};t.on("debug",function(t){var n=t[0],i=t.slice(1);e[n]||(e[n]=c("pouchdb:"+n)),e[n].apply(null,i)})}),Ht.plugin(function(t){t._changesFilterPlugin={validate:ve,normalize:ye,shouldFilter:_e,filter:be}}),Ht.version="6.4.3";var xe=we(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),$e=we(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function ke(t){if(!/^\d+-./.test(t))return it(et);var e=t.indexOf("-"),n=t.substring(0,e),i=t.substring(e+1);return{prefix:parseInt(n,10),id:i}}function Ee(t,e){var n,i,r,o={status:"available"};if(t._deleted&&(o.deleted=!0),e)if(t._id||(t._id=_t()),i=yt(),t._rev){if((r=ke(t._rev)).error)return r;t._rev_tree=[{pos:r.prefix,ids:[r.id,{status:"missing"},[[i,o,[]]]]}],n=r.prefix+1}else t._rev_tree=[{pos:1,ids:[i,o,[]]}],n=1;else if(t._revisions&&(t._rev_tree=function(t,e){for(var n=t.start-t.ids.length+1,i=t.ids,r=[i[0],e,[]],o=1,s=i.length;o<s;o++)r=[i[o],{status:"missing"},[r]];return[{pos:n,ids:r}]}(t._revisions,o),n=t._revisions.start,i=t._revisions.ids[0]),!t._rev_tree){if((r=ke(t._rev)).error)return r;n=r.prefix,i=r.id,t._rev_tree=[{pos:n,ids:[i,o,[]]}]}at(t._id),t._rev=n+"-"+i;var s={metadata:{},data:{}};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u="_"===a[0];if(u&&!xe[a]){var l=it(X,a);throw l.message=X.message+": "+a,l}u&&!$e[a]?s.metadata[a.slice(1)]=t[a]:s.data[a]=t[a]}return s}var Ce=function(t){return atob(t)},Te=function(t){return btoa(t)};function Le(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)n.append(t[i]);return n.getBlob(e.type)}}function Se(t,e){return Le([function(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n}(t)],{type:e})}function De(t,e){return Se(Ce(t),e)}function Me(t){for(var e="",n=new Uint8Array(t),i=n.byteLength,r=0;r<i;r++)e+=String.fromCharCode(n[r]);return e}function Ae(t,e){if("undefined"==typeof FileReader)return e(Me((new FileReaderSync).readAsArrayBuffer(t)));var n=new FileReader,i="function"==typeof n.readAsBinaryString;n.onloadend=function(t){var n=t.target.result||"";if(i)return e(n);e(Me(n))},i?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function Pe(t,e){Ae(t,function(t){e(t)})}function Ne(t,e){Pe(t,function(t){e(Te(t))})}function Oe(t,e){if("undefined"==typeof FileReader)return e((new FileReaderSync).readAsArrayBuffer(t));var n=new FileReader;n.onloadend=function(t){var n=t.target.result||new ArrayBuffer(0);e(n)},n.readAsArrayBuffer(t)}var Ie=e.setImmediate||e.setTimeout,Re=32768;function je(t,e,n,i,r){(n>0||i<e.size)&&(e=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.slice(e,n)}(e,n,i)),Oe(e,function(e){t.append(e),r()})}function Fe(t,e,n,i,r){(n>0||i<e.length)&&(e=e.substring(n,i)),t.appendBinary(e),r()}function qe(t,e){var n="string"==typeof t,i=n?t.length:t.size,r=Math.min(Re,i),o=Math.ceil(i/r),s=0,a=n?new h:new h.ArrayBuffer,u=n?Fe:je;function l(){Ie(d)}function c(){var t=function(t){return Te(t)}(a.end(!0));e(t),a.destroy()}function d(){var e=s*r,n=e+r;u(a,t,e,n,++s<o?l:c)}d()}function Be(t,e,n){var i=function(t){try{return Ce(t)}catch(t){return{error:it(G,"Attachment is not a valid base64 string")}}}(t.data);if(i.error)return n(i.error);t.length=i.length,t.data="blob"===e?Se(i,t.content_type):"base64"===e?Te(i):i,qe(i,function(e){t.digest="md5-"+e,n()})}function Ue(t,e,n){if(t.stub)return n();"string"==typeof t.data?Be(t,e,n):function(t,e,n){qe(t.data,function(i){t.digest="md5-"+i,t.length=t.data.size||t.data.length||0,"binary"===e?Pe(t.data,function(e){t.data=e,n()}):"base64"===e?Ne(t.data,function(e){t.data=e,n()}):n()})}(t,e,n)}function ze(t,e,n){if(!t.length)return n();var i,r=0;function o(){r++,t.length===r&&(i?n(i):n())}t.forEach(function(t){var n=t.data&&t.data._attachments?Object.keys(t.data._attachments):[],r=0;if(!n.length)return o();function s(t){i=t,++r===n.length&&o()}for(var a in t.data._attachments)t.data._attachments.hasOwnProperty(a)&&Ue(t.data._attachments[a],e,s)})}function Ve(t,e,n,i,r,o,s,a){if(function(t,e){for(var n,i=t.slice(),r=e.split("-"),o=parseInt(r[0],10),s=r[1];n=i.pop();){if(n.pos===o&&n.ids[0]===s)return!0;for(var a=n.ids[2],u=0,l=a.length;u<l;u++)i.push({pos:n.pos+1,ids:a[u]})}return!1}(e.rev_tree,n.metadata.rev))return i[r]=n,o();var u=e.winningRev||bt(e),l="deleted"in e?e.deleted:Ot(e,u),c="deleted"in n.metadata?n.metadata.deleted:Ot(n.metadata),h=/^1-/.test(n.metadata.rev);if(l&&!c&&a&&h){var d=n.data;d._rev=u,d._id=n.metadata.id,n=Ee(d,a)}var p=Pt(e.rev_tree,n.metadata.rev_tree[0],t);if(a&&(l&&c&&"new_leaf"!==p.conflicts||!l&&"new_leaf"!==p.conflicts||l&&!c&&"new_branch"===p.conflicts)){var f=it(z);return i[r]=f,o()}var m=n.metadata.rev;n.metadata.rev_tree=p.tree,n.stemmedRevs=p.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var g=bt(n.metadata),v=Ot(n.metadata,g),y=l===v?0:l<v?-1:1;s(n,g,v,m===g?v:Ot(n.metadata,m),!0,y,r,o)}function He(t,e,n,i,r,o,s,a,u){t=t||1e3;var l=a.new_edits,c=new g,h=0,d=e.length;function p(){++h===d&&u&&u()}e.forEach(function(t,e){if(t._id&&It(t._id)){var i=t._deleted?"_removeLocal":"_putLocal";n[i](t,{ctx:r},function(t,n){o[e]=t||n,p()})}else{var s=t.metadata.id;c.has(s)?(d--,c.get(s).push([t,e])):c.set(s,[[t,e]])}}),c.forEach(function(e,n){var r=0;function u(){++r<e.length?c():p()}function c(){var c=e[r],h=c[0],d=c[1];if(i.has(n))Ve(t,i.get(n),h,o,d,u,s,l);else{var p=Pt([],h.metadata.rev_tree[0],t);h.metadata.rev_tree=p.tree,h.stemmedRevs=p.stemmedRevs||[],function(t,e,n){var i=bt(t.metadata),r=Ot(t.metadata,i);if("was_delete"in a&&r)return o[e]=it(U,"deleted"),n();if(l&&function(t){return"missing"===t.metadata.rev_tree[0].ids[1].status}(t)){var u=it(z);return o[e]=u,n()}s(t,i,r,r,!1,r?0:1,e,n)}(h,d,u)}}c()})}var We=5,Ze="document-store",Ge="by-sequence",Ye="attach-store",Xe="attach-seq-store",Ke="meta-store",Je="local-store",Qe="detect-blob-support";function tn(t){try{return JSON.parse(t)}catch(e){return d.parse(t)}}function en(t){try{return JSON.stringify(t)}catch(e){return d.stringify(t)}}function nn(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(it(Q,n,e.type))}}function rn(t,e,n){return{data:en(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function on(t){if(!t)return null;var e=tn(t.data);return e.winningRev=t.winningRev,e.deleted="1"===t.deletedOrLocal,e.seq=t.seq,e}function sn(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function an(t,e,n,i){n?i(t?"string"!=typeof t?t:De(t,e):Le([""],{type:e})):t?"string"!=typeof t?Ae(t,function(t){i(Te(t))}):i(t):i("")}function un(t,e,n,i){var r=Object.keys(t._attachments||{});if(!r.length)return i&&i();var o=0;function s(){++o===r.length&&i&&i()}r.forEach(function(i){e.attachments&&e.include_docs?function(t,e){var i=t._attachments[e],r=i.digest;n.objectStore(Ye).get(r).onsuccess=function(t){i.body=t.target.result.body,s()}}(t,i):(t._attachments[i].stub=!0,s())})}function ln(t,e){return p.all(t.map(function(t){if(t.doc&&t.doc._attachments){var n=Object.keys(t.doc._attachments);return p.all(n.map(function(n){var i=t.doc._attachments[n];if("body"in i){var r=i.body,o=i.content_type;return new p(function(s){an(r,o,e,function(e){t.doc._attachments[n]=F(T(i,["digest","content_type"]),{data:e}),s()})})}}))}}))}function cn(t,e,n){var i=[],r=n.objectStore(Ge),o=n.objectStore(Ye),s=n.objectStore(Xe),a=t.length;function u(){--a||function(){if(!i.length)return;i.forEach(function(t){var e=s.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::ï¿¿",!1,!1));e.onsuccess=function(e){var n=e.target.result;n||o.delete(t)}})}()}t.forEach(function(t){var n=r.index("_doc_id_rev"),o=e+"::"+t;n.getKey(o).onsuccess=function(t){var e=t.target.result;if("number"!=typeof e)return u();r.delete(e),s.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(t){var e=t.target.result;if(e){var n=e.value.digestSeq.split("::")[0];i.push(n),s.delete(e.primaryKey),e.continue()}else u()}}})}function hn(t,e,n){try{return{txn:t.transaction(e,n)}}catch(t){return{error:t}}}var dn=new O;function pn(t,e,n,i,r,o){for(var s,a,u,l,c,h,d,p,f=e.docs,m=0,v=f.length;m<v;m++){var y=f[m];y._id&&It(y._id)||(y=f[m]=Ee(y,n.new_edits)).error&&!d&&(d=y)}if(d)return o(d);var _=!1,b=0,w=new Array(f.length),x=new g,$=!1,k=i._meta.blobSupport?"blob":"base64";function E(){_=!0,C()}function C(){p&&_&&(p.docCount+=b,h.put(p))}function T(){$||(dn.notify(i._meta.name),o(null,w))}function L(t,e,n,i,r,o,s,a){t.metadata.winningRev=e,t.metadata.deleted=n;var u=t.data;if(u._id=t.metadata.id,u._rev=t.metadata.rev,i&&(u._deleted=!0),u._attachments&&Object.keys(u._attachments).length)return function(t,e,n,i,r,o){var s=t.data,a=0,u=Object.keys(s._attachments);function c(){a===u.length&&S(t,e,n,i,r,o)}function h(){a++,c()}u.forEach(function(n){var i=t.data._attachments[n];if(i.stub)a++,c();else{var r=i.data;delete i.data,i.revpos=parseInt(e,10);var o=i.digest;!function(t,e,n){l.count(t).onsuccess=function(i){var r=i.target.result;if(r)return n();var o={digest:t,body:e},s=l.put(o);s.onsuccess=n}}(o,r,h)}})}(t,e,n,r,s,a);b+=o,C(),S(t,e,n,r,s,a)}function S(t,e,n,r,o,l){var h=t.data,d=t.metadata;function p(o){var u=t.stemmedRevs||[];r&&i.auto_compaction&&(u=u.concat(Et(t.metadata))),u&&u.length&&cn(u,t.metadata.id,s),d.seq=o.target.result;var l=rn(d,e,n);a.put(l).onsuccess=f}function f(){w[o]={ok:!0,id:d.id,rev:d.rev},x.set(t.metadata.id,t.metadata),function(t,e,n){var i=0,r=Object.keys(t.data._attachments||{});if(!r.length)return n();function o(){++i===r.length&&n()}function s(n){var i=t.data._attachments[n].digest,r=c.put({seq:e,digestSeq:i+"::"+e});r.onsuccess=o,r.onerror=function(t){t.preventDefault(),t.stopPropagation(),o()}}for(var a=0;a<r.length;a++)s(r[a])}(t,d.seq,l)}h._doc_id_rev=d.id+"::"+d.rev,delete h._id,delete h._rev;var m=u.put(h);m.onsuccess=p,m.onerror=function(t){t.preventDefault(),t.stopPropagation(),u.index("_doc_id_rev").getKey(h._doc_id_rev).onsuccess=function(t){u.put(h,t.target.result).onsuccess=p}}}ze(f,k,function(e){if(e)return o(e);!function(){var e=hn(r,[Ze,Ge,Ye,Je,Xe,Ke],"readwrite");if(e.error)return o(e.error);(s=e.txn).onabort=nn(o),s.ontimeout=nn(o),s.oncomplete=T,a=s.objectStore(Ze),u=s.objectStore(Ge),l=s.objectStore(Ye),c=s.objectStore(Xe),(h=s.objectStore(Ke)).get(Ke).onsuccess=function(t){p=t.target.result,C()},function(t){var e=[];if(f.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(n){var i=t.data._attachments[n];i.stub&&e.push(i.digest)})}),!e.length)return t();var n,i=0;e.forEach(function(r){!function(t,e){l.get(t).onsuccess=function(n){if(n.target.result)e();else{var i=it(nt,"unknown stub attachment with digest "+t);i.status=412,e(i)}}}(r,function(r){r&&!n&&(n=r),++i===e.length&&t(n)})})}(function(e){if(e)return $=!0,o(e);!function(){if(!f.length)return;var e=0;function r(){++e===f.length&&He(t.revs_limit,f,i,x,s,w,L,n,E)}function o(t){var e=on(t.target.result);e&&x.set(e.id,e),r()}for(var u=0,l=f.length;u<l;u++){var c=f[u];if(c._id&&It(c._id))r();else{var h=a.get(c.metadata.id);h.onsuccess=o}}}()})}()})}function fn(t,e,n,i,r){var o,s,a;function u(t){s=t.target.result,o&&r(o,s,a)}function l(t){o=t.target.result,s&&r(o,s,a)}function c(t){var e=t.target.result;if(!e)return r();r([e.key],[e.value],e)}"function"==typeof t.getAll&&"function"==typeof t.getAllKeys&&i>1&&!n?(a={continue:function(){if(!o.length)return r();var n,a=o[o.length-1];if(e&&e.upper)try{n=IDBKeyRange.bound(a,e.upper,!0,e.upperOpen)}catch(t){if("DataError"===t.name&&0===t.code)return r()}else n=IDBKeyRange.lowerBound(a,!0);e=n,o=null,s=null,t.getAll(e,i).onsuccess=u,t.getAllKeys(e,i).onsuccess=l}},t.getAll(e,i).onsuccess=u,t.getAllKeys(e,i).onsuccess=l):n?t.openCursor(e,"prev").onsuccess=c:t.openCursor(e).onsuccess=c}function mn(t,e,n){var i,r,o="startkey"in t&&t.startkey,s="endkey"in t&&t.endkey,a="key"in t&&t.key,u="keys"in t&&t.keys,l=t.skip||0,c="number"==typeof t.limit?t.limit:-1,h=!1!==t.inclusive_end;if(!u&&(r=(i=function(t,e,n,i,r){try{if(t&&e)return r?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return r?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return r?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(i)return IDBKeyRange.only(i)}catch(t){return{error:t}}return null}(o,s,h,a,t.descending))&&i.error)&&("DataError"!==r.name||0!==r.code))return n(it(Q,r.name,r.message));var d=[Ze,Ge,Ke];t.attachments&&d.push(Ye);var p=hn(e,d,"readonly");if(p.error)return n(p.error);var f=p.txn;f.oncomplete=function(){t.attachments?ln(w,t.binary).then(E):E()},f.onabort=nn(n);var m,g,v=f.objectStore(Ze),y=f.objectStore(Ge),_=f.objectStore(Ke),b=y.index("_doc_id_rev"),w=[];function x(e,n){var i={id:n.id,key:n.id,value:{rev:e}};n.deleted?u&&(w.push(i),i.value.deleted=!0,i.doc=null):l--<=0&&(w.push(i),t.include_docs&&function(e,n,i){var r=e.id+"::"+i;b.get(r).onsuccess=function(i){if(n.doc=sn(i.target.result),t.conflicts){var r=kt(e);r.length&&(n.doc._conflicts=r)}un(n.doc,t,f)}}(n,i,e))}function $(t){for(var e=0,n=t.length;e<n&&w.length!==c;e++){var i=t[e];if(i.error&&u)w.push(i);else{var r=on(i);x(r.winningRev,r)}}}function k(t,e,n){n&&($(e),w.length<c&&n.continue())}function E(){var e={total_rows:m,offset:t.skip,rows:w};t.update_seq&&void 0!==g&&(e.update_seq=g),n(null,e)}return _.get(Ke).onsuccess=function(t){m=t.target.result.docCount},t.update_seq&&function(t,e){t.openCursor(null,"prev").onsuccess=function(t){var n=t.target.result,i=void 0;n&&n.key&&(i=n.key);return e({target:{result:[i]}})}}(y,function(t){t.target.result&&t.target.result.length>0&&(g=t.target.result[0])}),r||0===c?void 0:u?function(t,e,n){var i=[],r=0;t.forEach(function(o,s){e.get(o).onsuccess=function(e){e.target.result?i[s]=e.target.result:i[s]={key:o,error:"not_found"},++r===t.length&&n(t,i,{})}})}(t.keys,v,k):-1===c?function(t,e,n){if("function"!=typeof t.getAll){var i=[];t.openCursor(e).onsuccess=function(t){var e=t.target.result;e?(i.push(e.value),e.continue()):n({target:{result:i}})}}else t.getAll(e).onsuccess=n}(v,i,function(e){var n=e.target.result;t.descending&&(n=n.reverse()),$(n)}):void fn(v,i,t.descending,c+l,k)}var gn=!1,vn=[];function yn(){!gn&&vn.length&&(gn=!0,vn.shift()())}function _n(t,e,n,i){if((t=_(t)).continuous){var r=n+":"+_t();return dn.addListener(n,r,e,t),dn.notify(n),{cancel:function(){dn.removeListener(n,r)}}}var o=t.doc_ids&&new m(t.doc_ids);t.since=t.since||0;var s,a=t.since,u="limit"in t?t.limit:-1;0===u&&(u=1),s="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var l,c,h,d,p=[],f=0,v=ot(t),y=new g;function b(t,e,n,i){if(n.seq!==e)return i();if(n.winningRev===t._rev)return i(n,t);var r=t._id+"::"+n.winningRev;d.get(r).onsuccess=function(t){i(n,sn(t.target.result))}}function w(){t.complete(null,{results:p,last_seq:a})}var x=[Ze,Ge];t.attachments&&x.push(Ye);var $=hn(i,x,"readonly");if($.error)return t.complete($.error);(l=$.txn).onabort=nn(t.complete),l.oncomplete=function(){!t.continuous&&t.attachments?ln(p).then(w):w()},c=l.objectStore(Ge),h=l.objectStore(Ze),d=c.index("_doc_id_rev"),fn(c,t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null,t.descending,u,function(e,n,i){if(i&&e.length){var r=new Array(e.length),c=new Array(e.length),d=0;n.forEach(function(t,n){!function(t,e,n){if(o&&!o.has(t._id))return n();var i=y.get(t._id);if(i)return b(t,e,i,n);h.get(t._id).onsuccess=function(r){i=on(r.target.result),y.set(t._id,i),b(t,e,i,n)}}(sn(t),e[n],function(t,o){c[n]=t,r[n]=o,++d===e.length&&function(){for(var t=0,e=r.length;t<e&&f!==u;t++){var n=r[t];n&&m(c[t],n)}f!==u&&i.continue()}()})})}function m(e,n){var i=t.processChange(n,e,t);a=i.seq=e.seq;var r=v(i);if("object"==typeof r)return t.complete(r);r&&(f++,s&&p.push(i),t.attachments&&t.include_docs?un(n,t,l,function(){ln([i],t.binary).then(function(){t.onChange(i)})}):t.onChange(i))}})}var bn,wn=new g,xn=new g;function $n(t,e){var n=this;!function(t,e,n){vn.push(function(){t(function(t,i){!function(t,e,n,i){try{t(e,n)}catch(e){i.emit("error",e)}}(e,t,i,n),gn=!1,s(function(){yn()})})}),yn()}(function(e){!function(t,e,n){var i=e.name,r=null;function o(t,e){var n=t.objectStore(Ze);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(t){var i=t.target.result;if(i){var r=i.value,o=Ot(r);r.deletedOrLocal=o?"1":"0",n.put(r),i.continue()}else e()}}function a(t,e){var n=t.objectStore(Je),i=t.objectStore(Ze),r=t.objectStore(Ge),o=i.openCursor();o.onsuccess=function(t){var o=t.target.result;if(o){var s=o.value,a=s.id,u=It(a),l=bt(s);if(u){var c=a+"::"+l,h=a+"::",d=a+"::~",p=r.index("_doc_id_rev"),f=IDBKeyRange.bound(h,d,!1,!1),m=p.openCursor(f);m.onsuccess=function(t){if(m=t.target.result){var e=m.value;e._doc_id_rev===c&&n.put(e),r.delete(m.primaryKey),m.continue()}else i.delete(o.primaryKey),o.continue()}}else o.continue()}else e&&e()}}function u(t,e){var n=t.objectStore(Ge),i=t.objectStore(Ye),r=t.objectStore(Xe),o=i.count();o.onsuccess=function(t){var i=t.target.result;if(!i)return e();n.openCursor().onsuccess=function(t){var n=t.target.result;if(!n)return e();for(var i=n.value,o=n.primaryKey,s=Object.keys(i._attachments||{}),a={},u=0;u<s.length;u++){var l=i._attachments[s[u]];a[l.digest]=!0}var c=Object.keys(a);for(u=0;u<c.length;u++){var h=c[u];r.put({seq:o,digestSeq:h+"::"+o})}n.continue()}}}function l(t){var e=t.objectStore(Ge),n=t.objectStore(Ze),i=n.openCursor();i.onsuccess=function(t){var i=t.target.result;if(i){var r=function(t){if(!t.data)return t.deleted="1"===t.deletedOrLocal,t;return on(t)}(i.value);if(r.winningRev=r.winningRev||bt(r),r.seq)return o();!function(){var t=r.id+"::",n=r.id+"::ï¿¿",i=0;e.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,n)).onsuccess=function(t){var e=t.target.result;if(!e)return r.seq=i,o();var n=e.primaryKey;n>i&&(i=n),e.continue()}}()}function o(){var t=rn(r,r.winningRev,r.deleted),e=n.put(t);e.onsuccess=function(){i.continue()}}}}t._meta=null,t._remote=!1,t.type=function(){return"idb"},t._id=w(function(e){e(null,t._meta.instanceId)}),t._bulkDocs=function(n,i,o){pn(e,n,i,t,r,o)},t._get=function(t,e,n){var i,o,s,a=e.ctx;if(!a){var u=hn(r,[Ze,Ge,Ye],"readonly");if(u.error)return n(u.error);a=u.txn}function l(){n(s,{doc:i,metadata:o,ctx:a})}a.objectStore(Ze).get(t).onsuccess=function(t){if(!(o=on(t.target.result)))return s=it(U,"missing"),l();var n;if(e.rev)n=e.latest?Rt(e.rev,o):e.rev;else{n=o.winningRev;var r=Ot(o);if(r)return s=it(U,"deleted"),l()}var u=a.objectStore(Ge),c=o.id+"::"+n;u.index("_doc_id_rev").get(c).onsuccess=function(t){if((i=t.target.result)&&(i=sn(i)),!i)return s=it(U,"missing"),l();l()}}},t._getAttachment=function(t,e,n,i,o){var s;if(i.ctx)s=i.ctx;else{var a=hn(r,[Ze,Ge,Ye],"readonly");if(a.error)return o(a.error);s=a.txn}var u=n.digest,l=n.content_type;s.objectStore(Ye).get(u).onsuccess=function(t){var e=t.target.result.body;an(e,l,i.binary,function(t){o(null,t)})}},t._info=function(e){var n,i,o=hn(r,[Ke,Ge],"readonly");if(o.error)return e(o.error);var s=o.txn;s.objectStore(Ke).get(Ke).onsuccess=function(t){i=t.target.result.docCount},s.objectStore(Ge).openCursor(null,"prev").onsuccess=function(t){var e=t.target.result;n=e?e.key:0},s.oncomplete=function(){e(null,{doc_count:i,update_seq:n,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(t,e){mn(t,r,e)},t._changes=function(e){return _n(e,t,i,r)},t._close=function(t){r.close(),wn.delete(i),t()},t._getRevisionTree=function(t,e){var n=hn(r,[Ze],"readonly");if(n.error)return e(n.error);var i=n.txn,o=i.objectStore(Ze).get(t);o.onsuccess=function(t){var n=on(t.target.result);n?e(null,n.rev_tree):e(it(U))}},t._doCompaction=function(t,e,n){var i=[Ze,Ge,Ye,Xe],o=hn(r,i,"readwrite");if(o.error)return n(o.error);var s=o.txn,a=s.objectStore(Ze);a.get(t).onsuccess=function(n){var i=on(n.target.result);wt(i.rev_tree,function(t,n,i,r,o){var s=n+"-"+i;-1!==e.indexOf(s)&&(o.status="missing")}),cn(e,t,s);var r=i.winningRev,o=i.deleted;s.objectStore(Ze).put(rn(i,r,o))},s.onabort=nn(n),s.oncomplete=function(){n()}},t._getLocal=function(t,e){var n=hn(r,[Je],"readonly");if(n.error)return e(n.error);var i=n.txn,o=i.objectStore(Je).get(t);o.onerror=nn(e),o.onsuccess=function(t){var n=t.target.result;n?(delete n._doc_id_rev,e(null,n)):e(it(U))}},t._putLocal=function(t,e,n){"function"==typeof e&&(n=e,e={}),delete t._revisions;var i=t._rev,o=t._id;t._rev=i?"0-"+(parseInt(i.split("-")[1],10)+1):"0-1";var s,a=e.ctx;if(!a){var u=hn(r,[Je],"readwrite");if(u.error)return n(u.error);(a=u.txn).onerror=nn(n),a.oncomplete=function(){s&&n(null,s)}}var l,c=a.objectStore(Je);i?(l=c.get(o)).onsuccess=function(r){var o=r.target.result;if(o&&o._rev===i){var a=c.put(t);a.onsuccess=function(){s={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,s)}}else n(it(z))}:((l=c.add(t)).onerror=function(t){n(it(z)),t.preventDefault(),t.stopPropagation()},l.onsuccess=function(){s={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,s)})},t._removeLocal=function(t,e,n){"function"==typeof e&&(n=e,e={});var i,o=e.ctx;if(!o){var s=hn(r,[Je],"readwrite");if(s.error)return n(s.error);(o=s.txn).oncomplete=function(){i&&n(null,i)}}var a=t._id,u=o.objectStore(Je),l=u.get(a);l.onerror=nn(n),l.onsuccess=function(r){var o=r.target.result;o&&o._rev===t._rev?(u.delete(a),i={ok:!0,id:a,rev:"0-0"},e.ctx&&n(null,i)):n(it(U))}},t._destroy=function(t,e){dn.removeAllListeners(i);var n=xn.get(i);n&&n.result&&(n.result.close(),wn.delete(i));var r=indexedDB.deleteDatabase(i);r.onsuccess=function(){xn.delete(i),N()&&i in localStorage&&delete localStorage[i],e(null,{ok:!0})},r.onerror=nn(e)};var c,h=wn.get(i);if(h)return r=h.idb,t._meta=h.global,s(function(){n(null,t)});c=e.storage?function(t,e){try{return indexedDB.open(t,{version:We,storage:e})}catch(e){return indexedDB.open(t,We)}}(i,e.storage):indexedDB.open(i,We);xn.set(i,c),c.onupgradeneeded=function(t){var e=t.target.result;if(t.oldVersion<1)return function(t){var e=t.createObjectStore(Ze,{keyPath:"id"});t.createObjectStore(Ge,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore(Ye,{keyPath:"digest"}),t.createObjectStore(Ke,{keyPath:"id",autoIncrement:!1}),t.createObjectStore(Qe),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.createObjectStore(Je,{keyPath:"_id"});var n=t.createObjectStore(Xe,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}(e);var n=t.currentTarget.transaction;t.oldVersion<3&&function(t){t.createObjectStore(Je,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(e),t.oldVersion<4&&function(t){var e=t.createObjectStore(Xe,{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}(e);var i=[o,a,u,l],r=t.oldVersion;!function t(){var e=i[r-1];r++;e&&e(n,t)}()},c.onsuccess=function(e){(r=e.target.result).onversionchange=function(){r.close(),wn.delete(i)},r.onabort=function(t){I("error","Database has a global failure",t.target.error),r.close(),wn.delete(i)};var o,s,a,u,l=r.transaction([Ke,Qe,Ze],"readwrite"),c=!1;function h(){void 0!==a&&c&&(t._meta={name:i,instanceId:u,blobSupport:a},wn.set(i,{idb:r,global:t._meta}),n(null,t))}function d(){if(void 0!==s&&void 0!==o){var t=i+"_id";t in o?u=o[t]:o[t]=u=_t(),o.docCount=s,l.objectStore(Ke).put(o)}}l.objectStore(Ke).get(Ke).onsuccess=function(t){o=t.target.result||{id:Ke},d()},function(t,e){t.objectStore(Ze).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(t){e(t.target.result)}}(l,function(t){s=t,d()}),bn||(bn=function(t){return new p(function(e){var n=Le([""]);t.objectStore(Qe).put(n,"key").onsuccess=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)},t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)}}).catch(function(){return!1})}(l)),bn.then(function(t){a=t,h()}),l.oncomplete=function(){c=!0,h()},l.onabort=nn(n)},c.onerror=function(){var t="Failed to open indexedDB, are you in private browsing mode?";I("error",t),n(it(Q,t))}}(n,t,e)},e,n.constructor)}function kn(t){return t<65?t-48:t-55}function En(t,e){return"UTF-8"===e?function(t){return decodeURIComponent(escape(t))}(function(t,e,n){for(var i="";e<n;)i+=String.fromCharCode(kn(t.charCodeAt(e++))<<4|kn(t.charCodeAt(e++)));return i}(t,0,t.length)):function(t,e,n){for(var i="";e<n;)i+=String.fromCharCode(kn(t.charCodeAt(e+2))<<12|kn(t.charCodeAt(e+3))<<8|kn(t.charCodeAt(e))<<4|kn(t.charCodeAt(e+1))),e+=4;return i}(t,0,t.length)}function Cn(t){return"'"+t+"'"}$n.valid=function(){var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");try{return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}};var Tn=7,Ln=Cn("document-store"),Sn=Cn("by-sequence"),Dn=Cn("attach-store"),Mn=Cn("local-store"),An=Cn("metadata-store"),Pn=Cn("attach-seq-store");function Nn(t){return delete t._id,delete t._rev,JSON.stringify(t)}function On(t,e,n){return(t=JSON.parse(t))._id=e,t._rev=n,t}function In(t){for(var e="(";t--;)e+="?",t&&(e+=",");return e+")"}function Rn(t,e,n,i,r){return"SELECT "+t+" FROM "+("string"==typeof e?e:e.join(" JOIN "))+(n?" ON "+n:"")+(i?" WHERE "+("string"==typeof i?i:i.join(" AND ")):"")+(r?" ORDER BY "+r:"")}function jn(t,e,n){if(t.length){var i=0,r=[];t.forEach(function(t){var i="SELECT seq FROM "+Sn+" WHERE doc_id=? AND rev=?";n.executeSql(i,[e,t],function(t,e){if(!e.rows.length)return o();var n=e.rows.item(0).seq;r.push(n),t.executeSql("DELETE FROM "+Sn+" WHERE seq=?",[n],o)})})}function o(){++i===t.length&&function(){if(!r.length)return;var t="SELECT DISTINCT digest AS digest FROM "+Pn+" WHERE seq IN "+In(r.length);n.executeSql(t,r,function(t,e){for(var n=[],i=0;i<e.rows.length;i++)n.push(e.rows.item(i).digest);if(n.length){var o="DELETE FROM "+Pn+" WHERE seq IN ("+r.map(function(){return"?"}).join(",")+")";t.executeSql(o,r,function(t){var e="SELECT digest FROM "+Pn+" WHERE digest IN ("+n.map(function(){return"?"}).join(",")+")";t.executeSql(e,n,function(t,e){for(var i=new m,r=0;r<e.rows.length;r++)i.add(e.rows.item(r).digest);n.forEach(function(e){i.has(e)||(t.executeSql("DELETE FROM "+Pn+" WHERE digest=?",[e]),t.executeSql("DELETE FROM "+Dn+" WHERE digest=?",[e]))})})})}})}()}}function Fn(t){return function(e){I("error","WebSQL threw an error",e);var n=e&&e.constructor.toString().match(/function ([^(]+)/),i=(n&&n[1]||e.type,e.target||e.message);t(it(tt,i))}}function qn(t,e,n,i,r,o,s){var a,u=n.new_edits,l=e.docs.map(function(t){return t._id&&It(t._id)?t:Ee(t,u)}),c=l.filter(function(t){return t.error});if(c.length)return s(c[0]);var h,d=new Array(l.length),p=new g;function f(){if(h)return s(h);o.notify(i._name),s(null,d)}function m(t){var e=[];if(l.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(n){var i=t.data._attachments[n];i.stub&&e.push(i.digest)})}),!e.length)return t();var n,i=0;e.forEach(function(r){!function(t,e){var n="SELECT count(*) as cnt FROM "+Dn+" WHERE digest=?";a.executeSql(n,[t],function(n,i){if(0===i.rows.item(0).cnt){var r=it(nt,"unknown stub attachment with digest "+t);e(r)}else e()})}(r,function(r){r&&!n&&(n=r),++i===e.length&&t(n)})})}function v(t,e,n,r,o,s,u,l){function c(){var e=t.data,n=r?1:0,i=e._id,o=e._rev,s=Nn(e),u="INSERT INTO "+Sn+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",l=[i,o,s,n];function c(t,n){var i=0,r=Object.keys(e._attachments||{});if(!r.length)return n();function o(){return++i===r.length&&n(),!1}function s(n){var i="INSERT INTO "+Pn+" (digest, seq) VALUES (?,?)",r=[e._attachments[n].digest,t];a.executeSql(i,r,o,o)}for(var u=0;u<r.length;u++)s(r[u])}a.executeSql(u,l,function(t,e){var n=e.insertId;c(n,function(){y(t,n)})},function(){var t=Rn("seq",Sn,null,"doc_id=? AND rev=?");return a.executeSql(t,[i,o],function(t,e){var r=e.rows.item(0).seq,a="UPDATE "+Sn+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",u=[s,n,i,o];t.executeSql(a,u,function(t){c(r,function(){y(t,r)})})}),!1})}function h(t){f||(t?l(f=t):m===g.length&&c())}var f=null,m=0;t.data._id=t.metadata.id,t.data._rev=t.metadata.rev;var g=Object.keys(t.data._attachments||{});function v(t){m++,h(t)}function y(n,r){var s=t.metadata.id,a=t.stemmedRevs||[];o&&i.auto_compaction&&(a=Et(t.metadata).concat(a)),a.length&&jn(a,s,n),t.metadata.seq=r;var c=t.metadata.rev;delete t.metadata.rev;var h=o?"UPDATE "+Ln+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+Sn+" WHERE doc_id="+Ln+".id AND rev=?) WHERE id=?":"INSERT INTO "+Ln+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",f=en(t.metadata),m=o?[f,r,e,s]:[s,r,r,f];n.executeSql(h,m,function(){d[u]={ok:!0,id:t.metadata.id,rev:c},p.set(s,t.metadata),l()})}r&&(t.data._deleted=!0),g.forEach(function(n){var i=t.data._attachments[n];if(i.stub)m++,h();else{var r=i.data;delete i.data,i.revpos=parseInt(e,10),function(t,e,n){var i="SELECT digest FROM "+Dn+" WHERE digest=?";a.executeSql(i,[t],function(r,o){if(o.rows.length)return n();i="INSERT INTO "+Dn+" (digest, body, escaped) VALUES (?,?,1)",r.executeSql(i,[t,function(t){return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}(e)],function(){n()},function(){return n(),!1})})}(i.digest,r,v)}}),g.length||c()}function y(){He(t.revs_limit,l,i,p,a,d,v,n)}ze(l,"binary",function(t){if(t)return s(t);r.transaction(function(t){a=t,m(function(t){t?h=t:function(t){if(!l.length)return t();var e=0;function n(){++e===l.length&&t()}l.forEach(function(t){if(t._id&&It(t._id))return n();var e=t.metadata.id;a.executeSql("SELECT json FROM "+Ln+" WHERE id = ?",[e],function(t,i){if(i.rows.length){var r=tn(i.rows.item(0).json);p.set(e,r)}n()})})}(y)})},Fn(s),f)})}var Bn=new g;var Un=new O;function zn(t,e,n,i,r){var o=Object.keys(t._attachments||{});if(!o.length)return r&&r();var s=0;function a(){++s===o.length&&r&&r()}o.forEach(function(r){e.attachments&&e.include_docs?function(t,r){var o=t._attachments[r],s={binary:e.binary,ctx:i};n._getAttachment(t._id,r,o,s,function(e,n){t._attachments[r]=F(T(o,["digest","content_type"]),{data:n}),a()})}(t,r):(t._attachments[r].stub=!0,a())})}var Vn=1,Hn="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+Sn+" (seq, deleted)",Wn="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+Sn+" (doc_id, rev)",Zn="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+Ln+" (winningseq)",Gn="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+Pn+" (seq)",Yn="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+Pn+" (digest, seq)",Xn=Sn+".seq = "+Ln+".winningseq",Kn=Sn+".seq AS seq, "+Sn+".deleted AS deleted, "+Sn+".json AS data, "+Sn+".rev AS rev, "+Ln+".json AS metadata";function Jn(t,e){var n,i=this,r=null,o=function(t){return"size"in t?1e6*t.size:"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent)?5e6:1}(t),s=[];i._name=t.name;var a=function(t){var e=Bn.get(t.name);return e||(e=function(t){try{return{db:function(t){return t.websql(t.name,t.version,t.description,t.size)}(t)}}catch(t){return{error:t}}}(t),Bn.set(t.name,e)),e}(F({},t,{version:Vn,description:t.name,size:o}));if(a.error)return Fn(e)(a.error);var u=a.db;function l(){N()&&(window.localStorage["_pouch__websqldb_"+i._name]=!0),e(null,i)}function c(t,e){t.executeSql(Zn),t.executeSql("ALTER TABLE "+Sn+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){t.executeSql(Hn),t.executeSql("ALTER TABLE "+Ln+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){t.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+Ln+" (local, id)");var n="SELECT "+Ln+".winningseq AS seq, "+Ln+".json AS metadata FROM "+Sn+" JOIN "+Ln+" ON "+Sn+".seq = "+Ln+".winningseq";t.executeSql(n,[],function(t,n){for(var i=[],r=[],o=0;o<n.rows.length;o++){var s=n.rows.item(o),a=s.seq,u=JSON.parse(s.metadata);Ot(u)&&i.push(a),It(u.id)&&r.push(u.id)}t.executeSql("UPDATE "+Ln+"SET local = 1 WHERE id IN "+In(r.length),r,function(){t.executeSql("UPDATE "+Sn+" SET deleted = 1 WHERE seq IN "+In(i.length),i,e)})})})})}function h(t,e){var n="CREATE TABLE IF NOT EXISTS "+Mn+" (id UNIQUE, rev, json)";t.executeSql(n,[],function(){var n="SELECT "+Ln+".id AS id, "+Sn+".json AS data FROM "+Sn+" JOIN "+Ln+" ON "+Sn+".seq = "+Ln+".winningseq WHERE local = 1";t.executeSql(n,[],function(t,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r));!function n(){if(!i.length)return e(t);var r=i.shift(),o=JSON.parse(r.data)._rev;t.executeSql("INSERT INTO "+Mn+" (id, rev, json) VALUES (?,?,?)",[r.id,o,r.data],function(t){t.executeSql("DELETE FROM "+Ln+" WHERE id=?",[r.id],function(t){t.executeSql("DELETE FROM "+Sn+" WHERE seq=?",[r.seq],function(){n()})})})}()})})}function d(t,e){function i(i){!function r(){if(!i.length)return e(t);var o=En(i.shift().hex,n),s=o.lastIndexOf("::"),a=o.substring(0,s),u=o.substring(s+2),l="UPDATE "+Sn+" SET doc_id=?, rev=? WHERE doc_id_rev=?";t.executeSql(l,[a,u,o],function(){r()})}()}var r="ALTER TABLE "+Sn+" ADD COLUMN doc_id";t.executeSql(r,[],function(t){var e="ALTER TABLE "+Sn+" ADD COLUMN rev";t.executeSql(e,[],function(t){t.executeSql(Wn,[],function(t){var e="SELECT hex(doc_id_rev) as hex FROM "+Sn;t.executeSql(e,[],function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r));i(n)})})})})}function p(t,e){function n(t){var n="SELECT COUNT(*) AS cnt FROM "+Dn;t.executeSql(n,[],function(t,n){if(!n.rows.item(0).cnt)return e(t);var i=0,r=10;!function n(){var o=Rn(Kn+", "+Ln+".id AS id",[Ln,Sn],Xn,null,Ln+".id ");o+=" LIMIT "+r+" OFFSET "+i,i+=r,t.executeSql(o,[],function(t,i){if(!i.rows.length)return e(t);var r={};function o(t,e){var n=r[t]=r[t]||[];-1===n.indexOf(e)&&n.push(e)}for(var s=0;s<i.rows.length;s++)for(var a=i.rows.item(s),u=On(a.data,a.id,a.rev),l=Object.keys(u._attachments||{}),c=0;c<l.length;c++)o(u._attachments[l[c]].digest,a.seq);var h=[];if(Object.keys(r).forEach(function(t){r[t].forEach(function(e){h.push([t,e])})}),!h.length)return n();var d=0;h.forEach(function(e){var i="INSERT INTO "+Pn+" (digest, seq) VALUES (?,?)";t.executeSql(i,e,function(){++d===h.length&&n()})})})}()})}var i="CREATE TABLE IF NOT EXISTS "+Pn+" (digest, seq INTEGER)";t.executeSql(i,[],function(t){t.executeSql(Yn,[],function(t){t.executeSql(Gn,[],n)})})}function f(t,e){var n="ALTER TABLE "+Dn+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";t.executeSql(n,[],e)}function m(t,e){var n="ALTER TABLE "+Ln+" ADD COLUMN max_seq INTEGER";t.executeSql(n,[],function(t){var n="UPDATE "+Ln+" SET max_seq=(SELECT MAX(seq) FROM "+Sn+" WHERE doc_id=id)";t.executeSql(n,[],function(t){var n="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+Ln+" (max_seq)";t.executeSql(n,[],e)})})}function g(){for(;s.length>0;){s.pop()(null,r)}}function v(t,e){if(0===e){var n="CREATE TABLE IF NOT EXISTS "+An+" (dbid, db_version INTEGER)",i="CREATE TABLE IF NOT EXISTS "+Dn+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",o="CREATE TABLE IF NOT EXISTS "+Pn+" (digest, seq INTEGER)",s="CREATE TABLE IF NOT EXISTS "+Ln+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",a="CREATE TABLE IF NOT EXISTS "+Sn+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",u="CREATE TABLE IF NOT EXISTS "+Mn+" (id UNIQUE, rev, json)";t.executeSql(i),t.executeSql(u),t.executeSql(o,[],function(){t.executeSql(Gn),t.executeSql(Yn)}),t.executeSql(s,[],function(){t.executeSql(Zn),t.executeSql(a,[],function(){t.executeSql(Hn),t.executeSql(Wn),t.executeSql(n,[],function(){var e="INSERT INTO "+An+" (db_version, dbid) VALUES (?,?)";r=_t();var n=[Tn,r];t.executeSql(e,n,function(){g()})})})})}else{var l=[c,h,d,p,f,m,function(){e<Tn&&t.executeSql("UPDATE "+An+" SET db_version = "+Tn);var n="SELECT dbid FROM "+An;t.executeSql(n,[],function(t,e){r=e.rows.item(0).dbid,g()})}],v=e,y=function(t){l[v-1](t,y),v++};y(t)}}function y(t,e){var n="SELECT MAX(seq) AS seq FROM "+Sn;t.executeSql(n,[],function(t,n){var i=n.rows.item(0).seq||0;e(i)})}function b(t,e){var n=Rn("COUNT("+Ln+".id) AS 'num'",[Ln,Sn],Xn,Sn+".deleted=0");t.executeSql(n,[],function(t,n){e(n.rows.item(0).num)})}"function"!=typeof u.readTransaction&&(u.readTransaction=u.transaction),u.transaction(function(t){!function(t,e){t.executeSql('SELECT HEX("a") AS hex',[],function(t,i){var r=i.rows.item(0).hex;n=2===r.length?"UTF-8":"UTF-16",e()})}(t,function(){!function(t){var e="SELECT sql FROM sqlite_master WHERE tbl_name = "+An;t.executeSql(e,[],function(t,e){e.rows.length?/db_version/.test(e.rows.item(0).sql)?t.executeSql("SELECT db_version FROM "+An,[],function(t,e){var n=e.rows.item(0).db_version;v(t,n)}):t.executeSql("ALTER TABLE "+An+" ADD COLUMN db_version INTEGER",[],function(){v(t,1)}):v(t,0)})}(t)})},Fn(e),l),i._remote=!1,i.type=function(){return"websql"},i._id=w(function(t){t(null,r)}),i._info=function(t){var e,i;u.readTransaction(function(t){y(t,function(t){e=t}),b(t,function(t){i=t})},Fn(t),function(){t(null,{doc_count:i,update_seq:e,websql_encoding:n})})},i._bulkDocs=function(e,n,r){qn(t,e,n,i,u,Un,r)},i._get=function(t,e,n){var r,o,s,a,l=e.ctx;if(!l)return u.readTransaction(function(r){i._get(t,F({ctx:r},e),n)});function c(t){n(t,{doc:r,metadata:o,ctx:l})}if(e.rev){if(e.latest)return void function(t,e,n,i,r){var o=Rn(Kn,[Ln,Sn],Xn,Ln+".id=?"),s=[e];t.executeSql(o,s,function(t,e){if(!e.rows.length){var o=it(U,"missing");return r(o)}var s=tn(e.rows.item(0).metadata);i(Rt(n,s))})}(l,t,e.rev,function(r){e.latest=!1,e.rev=r,i._get(t,e,n)},c);s=Rn(Kn,[Ln,Sn],Ln+".id="+Sn+".doc_id",[Sn+".doc_id=?",Sn+".rev=?"]),a=[t,e.rev]}else s=Rn(Kn,[Ln,Sn],Xn,Ln+".id=?"),a=[t];l.executeSql(s,a,function(t,n){if(!n.rows.length)return c(it(U,"missing"));var i=n.rows.item(0);if(o=tn(i.metadata),i.deleted&&!e.rev)return c(it(U,"deleted"));r=On(i.data,o.id,i.rev),c()})},i._allDocs=function(t,e){var n,r,o=[],s="startkey"in t&&t.startkey,a="endkey"in t&&t.endkey,l="key"in t&&t.key,c="keys"in t&&t.keys,h="descending"in t&&t.descending,d="limit"in t?t.limit:-1,p="skip"in t?t.skip:0,f=!1!==t.inclusive_end,m=[],g=[];if(c){var v=[],_="";c.forEach(function(t){-1===v.indexOf(t)&&(v.push(t),_+="?,")}),_=_.substring(0,_.length-1),g.push(Ln+".id IN ("+_+")"),m=m.concat(v)}else if(!1!==l)g.push(Ln+".id = ?"),m.push(l);else if(!1!==s||!1!==a){if(!1!==s&&(g.push(Ln+".id "+(h?"<=":">=")+" ?"),m.push(s)),!1!==a){var w=h?">":"<";f&&(w+="="),g.push(Ln+".id "+w+" ?"),m.push(a)}!1!==l&&(g.push(Ln+".id = ?"),m.push(l))}c||g.push(Sn+".deleted = 0"),u.readTransaction(function(e){if(b(e,function(t){n=t}),t.update_seq&&y(e,function(t){r=t}),0!==d){var s=Rn(Kn,[Ln,Sn],Xn,g,Ln+".id "+(h?"DESC":"ASC"));s+=" LIMIT "+d+" OFFSET "+p,e.executeSql(s,m,function(e,n){for(var r=0,s=n.rows.length;r<s;r++){var a=n.rows.item(r),u=tn(a.metadata),l=u.id,h=On(a.data,l,a.rev),d=h._rev,p={id:l,key:l,value:{rev:d}};if(t.include_docs){if(p.doc=h,p.doc._rev=d,t.conflicts){var f=kt(u);f.length&&(p.doc._conflicts=f)}zn(p.doc,t,i,e)}if(a.deleted){if(!c)continue;p.value.deleted=!0,p.doc=null}if(c){var m=c.indexOf(l,m);do{o[m]=p,m=c.indexOf(l,m+1)}while(m>-1&&m<c.length)}else o.push(p)}c&&c.forEach(function(t,e){o[e]||(o[e]={key:t,error:"not_found"})})})}},Fn(e),function(){var i={total_rows:n,offset:t.skip,rows:o};t.update_seq&&(i.update_seq=r),e(null,i)})},i._changes=function(t){if((t=_(t)).continuous){var e=i._name+":"+_t();return Un.addListener(i._name,e,i,t),Un.notify(i._name),{cancel:function(){Un.removeListener(i._name,e)}}}var n=t.descending;t.since=t.since&&!n?t.since:0;var r,o="limit"in t?t.limit:-1;0===o&&(o=1),r="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var s=[],a=0;!function(){var e=Ln+".json AS metadata, "+Ln+".max_seq AS maxSeq, "+Sn+".json AS winningDoc, "+Sn+".rev AS winningRev ",l=Ln+" JOIN "+Sn,c=Ln+".id="+Sn+".doc_id AND "+Ln+".winningseq="+Sn+".seq",h=["maxSeq > ?"],d=[t.since];t.doc_ids&&(h.push(Ln+".id IN "+In(t.doc_ids.length)),d=d.concat(t.doc_ids));var p=Rn(e,l,c,h,"maxSeq "+(n?"DESC":"ASC")),f=ot(t);t.view||t.filter||(p+=" LIMIT "+o);var m=t.since||0;u.readTransaction(function(e){e.executeSql(p,d,function(e,n){function u(e){return function(){t.onChange(e)}}for(var l=0,c=n.rows.length;l<c;l++){var h=n.rows.item(l),d=tn(h.metadata);m=h.maxSeq;var p=On(h.winningDoc,d.id,h.winningRev),g=t.processChange(p,d,t);g.seq=h.maxSeq;var v=f(g);if("object"==typeof v)return t.complete(v);if(v&&(a++,r&&s.push(g),t.attachments&&t.include_docs?zn(p,t,i,e,u(g)):u(g)()),a===o)break}})},Fn(t.complete),function(){t.continuous||t.complete(null,{results:s,last_seq:m})})}()},i._close=function(t){t()},i._getAttachment=function(t,e,i,r,o){var s,a=r.ctx,u=i.digest,l=i.content_type,c="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+Dn+" WHERE digest=?";a.executeSql(c,[u],function(t,e){var i=e.rows.item(0),a=i.escaped?function(t){return t.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}(i.body):En(i.body,n);s=r.binary?Se(a,l):Te(a),o(null,s)})},i._getRevisionTree=function(t,e){u.readTransaction(function(n){var i="SELECT json AS metadata FROM "+Ln+" WHERE id = ?";n.executeSql(i,[t],function(t,n){if(n.rows.length){var i=tn(n.rows.item(0).metadata);e(null,i.rev_tree)}else e(it(U))})})},i._doCompaction=function(t,e,n){if(!e.length)return n();u.transaction(function(n){var i="SELECT json AS metadata FROM "+Ln+" WHERE id = ?";n.executeSql(i,[t],function(n,i){var r=tn(i.rows.item(0).metadata);wt(r.rev_tree,function(t,n,i,r,o){var s=n+"-"+i;-1!==e.indexOf(s)&&(o.status="missing")});var o="UPDATE "+Ln+" SET json = ? WHERE id = ?";n.executeSql(o,[en(r),t])}),jn(e,t,n)},Fn(n),function(){n()})},i._getLocal=function(t,e){u.readTransaction(function(n){var i="SELECT json, rev FROM "+Mn+" WHERE id=?";n.executeSql(i,[t],function(n,i){if(i.rows.length){var r=i.rows.item(0),o=On(r.json,t,r.rev);e(null,o)}else e(it(U))})})},i._putLocal=function(t,e,n){"function"==typeof e&&(n=e,e={}),delete t._revisions;var i,r=t._rev,o=t._id;i=t._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var s,a=Nn(t);function l(t){var u,l;r?(u="UPDATE "+Mn+" SET rev=?, json=? WHERE id=? AND rev=?",l=[i,a,o,r]):(u="INSERT INTO "+Mn+" (id, rev, json) VALUES (?,?,?)",l=[o,i,a]),t.executeSql(u,l,function(t,r){r.rowsAffected?(s={ok:!0,id:o,rev:i},e.ctx&&n(null,s)):n(it(z))},function(){return n(it(z)),!1})}e.ctx?l(e.ctx):u.transaction(l,Fn(n),function(){s&&n(null,s)})},i._removeLocal=function(t,e,n){var i;function r(r){var o="DELETE FROM "+Mn+" WHERE id=? AND rev=?",s=[t._id,t._rev];r.executeSql(o,s,function(r,o){if(!o.rowsAffected)return n(it(U));i={ok:!0,id:t._id,rev:"0-0"},e.ctx&&n(null,i)})}"function"==typeof e&&(n=e,e={}),e.ctx?r(e.ctx):u.transaction(r,Fn(n),function(){i&&n(null,i)})},i._destroy=function(t,e){Un.removeAllListeners(i._name),u.transaction(function(t){[Ln,Sn,Dn,An,Mn,Pn].forEach(function(e){t.executeSql("DROP TABLE IF EXISTS "+e,[])})},Fn(e),function(){N()&&(delete window.localStorage["_pouch__websqldb_"+i._name],delete window.localStorage[i._name]),e(null,{ok:!0})})}}function Qn(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var t=N(),e="_pouch__websqldb_valid_"+navigator.userAgent;if(t&&localStorage[e])return"1"===localStorage[e];var n=function(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(t){return!1}}();return t&&(localStorage[e]=n?"1":"0"),n}function ti(t,e,n,i){return openDatabase(t,e,n,i)}function ei(t,e){I("warn","WebSQL is deprecated and will be removed in future releases of PouchDB. Please migrate to IndexedDB: https://pouchdb.com/2018/01/23/pouchdb-6.4.2.html");var n=F({websql:ti},t);Jn.call(this,n,e)}function ni(t,e){var n,i,r,o=new Headers,s={method:t.method,credentials:"include",headers:o};return t.json&&(o.set("Accept","application/json"),o.set("Content-Type",t.headers["Content-Type"]||"application/json")),t.body&&t.processData&&"string"!=typeof t.body?s.body=JSON.stringify(t.body):s.body="body"in t?t.body:null,Object.keys(t.headers).forEach(function(e){t.headers.hasOwnProperty(e)&&o.set(e,t.headers[e])}),n=function(){for(var t={},e=new p(function(e,n){t.resolve=e,t.reject=n}),n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.promise=e,p.resolve().then(function(){return fetch.apply(null,n)}).then(function(e){t.resolve(e)}).catch(function(e){t.reject(e)}),t}(t.url,s),t.timeout>0&&(i=setTimeout(function(){n.reject(new Error("Load timeout for resource: "+t.url))},t.timeout)),n.promise.then(function(e){return r={statusCode:e.status},t.timeout>0&&clearTimeout(i),r.statusCode>=200&&r.statusCode<300?t.binary?e.blob():e.text():e.json()}).then(function(t){r.statusCode>=200&&r.statusCode<300?e(null,r,t):(t.status=r.statusCode,e(t))}).catch(function(t){t||(t=new Error("canceled")),e(t)}),{abort:n.reject}}ei.valid=function(){return"function"==typeof openDatabase&&Qn()},ei.use_prefix=!0;var ii=function(){try{return new XMLHttpRequest,!0}catch(t){return!1}}();function ri(t,e){return ii||t.xhr?function(t,e){var n,i,r=!1,o=function(){r=!0,n.abort(),a()},s={abort:function(){n.abort(),a()}},a=function(){clearTimeout(i),s.abort=function(){},n&&(n.onprogress=void 0,n.upload&&(n.upload.onprogress=void 0),n.onreadystatechange=void 0,n=void 0)};n=t.xhr?new t.xhr:new XMLHttpRequest;try{n.open(t.method,t.url)}catch(t){return e(new Error(t.name||"Url is invalid"))}for(var u in n.withCredentials=!("withCredentials"in t)||t.withCredentials,"GET"===t.method?delete t.headers["Content-Type"]:t.json&&(t.headers.Accept="application/json",t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.body&&t.processData&&"string"!=typeof t.body&&(t.body=JSON.stringify(t.body))),t.binary&&(n.responseType="arraybuffer"),"body"in t||(t.body=null),t.headers)t.headers.hasOwnProperty(u)&&n.setRequestHeader(u,t.headers[u]);return t.timeout>0&&(i=setTimeout(o,t.timeout),n.onprogress=function(){clearTimeout(i),4!==n.readyState&&(i=setTimeout(o,t.timeout))},void 0!==n.upload&&(n.upload.onprogress=n.onprogress)),n.onreadystatechange=function(){if(4===n.readyState){var i={statusCode:n.status};if(n.status>=200&&n.status<300){var o;o=t.binary?Le([n.response||""],{type:n.getResponseHeader("Content-Type")}):n.responseText,e(null,i,o)}else{var s={};if(r)(s=new Error("ETIMEDOUT")).code="ETIMEDOUT";else if("string"==typeof n.response&&""!==n.response)try{s=JSON.parse(n.response)}catch(t){}s.status=n.status,e(s)}a()}},t.body&&t.body instanceof Blob?Oe(t.body,function(t){n.send(t)}):n.send(t.body),s}(t,e):ni(t,e)}function oi(t,e){t=_(t);return(t=F({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},t)).json&&(t.binary||(t.headers.Accept="application/json"),t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json"),t.binary&&(t.encoding=null,t.json=!1),t.processData||(t.json=!1),ri(t,function(n,i,r){if(n)return e(rt(n));var o,s=i.headers&&i.headers["content-type"],a=r||"";if(!t.binary&&(t.json||!t.processData)&&"object"!=typeof a&&(/json/.test(s)||/^[\s]*\{/.test(a)&&/\}[\s]*$/.test(a)))try{a=JSON.parse(a.toString())}catch(t){}i.statusCode>=200&&i.statusCode<300?function(e,n,i){if(!t.binary&&t.json&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){return i(t)}Array.isArray(e)&&(e=e.map(function(t){return t.error||t.missing?rt(t):t})),t.binary,i(null,e,n)}(a,i,e):((o=rt(a)).status=i.statusCode,e(o))})}function si(t,e){var n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",i=-1!==n.indexOf("safari")&&-1===n.indexOf("chrome"),r=-1!==n.indexOf("msie"),o=-1!==n.indexOf("trident"),s=-1!==n.indexOf("edge"),a=i||(r||o||s)&&"GET"===t.method,u=!("cache"in t)||t.cache;if(!/^blob:/.test(t.url)&&(a||!u)){var l=-1!==t.url.indexOf("?");t.url+=(l?"&":"?")+"_nonce="+Date.now()}return oi(t,e)}var ai=25,ui=50,li=5e3,ci=1e4,hi={};function di(t){var e=(t.doc||t.ok)._attachments;e&&Object.keys(e).forEach(function(t){var n=e[t];n.data=De(n.data,n.content_type)})}function pi(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function fi(t){return t._attachments&&Object.keys(t._attachments)?p.all(Object.keys(t._attachments).map(function(e){var n=t._attachments[e];if(n.data&&"string"!=typeof n.data)return new p(function(t){Ne(n.data,t)}).then(function(t){n.data=t})})):p.resolve()}function mi(t,e){if(function(t){if(!t.prefix)return!1;var e=mt(t.prefix).protocol;return"http"===e||"https"===e}(e)){var n=e.name.substr(e.prefix.length);t=e.prefix+encodeURIComponent(n)}var i=mt(t);(i.user||i.password)&&(i.auth={username:i.user,password:i.password});var r=i.path.replace(/(^\/|\/$)/g,"").split("/");return i.db=r.pop(),-1===i.db.indexOf("%")&&(i.db=encodeURIComponent(i.db)),i.path=r.join("/"),i}function gi(t,e){return vi(t,t.db+"/"+e)}function vi(t,e){var n=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+n+e}function yi(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function _i(t,e){var n,i=this,r=mi(t.name,t),a=gi(r,""),u=(t=_(t)).ajax||{};if(t.auth||r.auth){var l=t.auth||r.auth,c=l.username+":"+l.password,h=Te(unescape(encodeURIComponent(c)));u.headers=u.headers||{},u.headers.Authorization="Basic "+h}function d(t,e,n){var r=(t||{}).ajax||{},o=F(_(u),r,e),s=_(u.headers||{});return o.headers=F(s,r.headers,e.headers||{}),i.constructor.listeners("debug").length&&i.constructor.emit("debug",["http",o.method,o.url]),i._ajax(o,n)}function f(t,e){return new p(function(n,i){d(t,e,function(t,e){if(t)return i(t);n(e)})})}function m(t,e){return x(t,o(function(t){g().then(function(){return e.apply(this,t)}).catch(function(e){t.pop()(e)})}))}function g(){return t.skipSetup||t.skip_setup?p.resolve():n||((n=f({},{method:"GET",url:a}).catch(function(t){return t&&t.status&&404===t.status?(j(404,"PouchDB is just detecting if the remote exists."),f({},{method:"PUT",url:a})):p.reject(t)}).catch(function(t){return!(!t||!t.status||412!==t.status)||p.reject(t)})).catch(function(){n=null}),n)}function v(t){return t.split("/").map(encodeURIComponent).join("/")}i._ajax=si,s(function(){e(null,i)}),i._remote=!0,i.type=function(){return"http"},i.id=m("id",function(t){d({},{method:"GET",url:vi(r,"")},function(e,n){var i=n&&n.uuid?n.uuid+r.db:gi(r,"");t(null,i)})}),i.request=m("request",function(t,e){t.url=gi(r,t.url),d({},t,e)}),i.compact=m("compact",function(t,e){"function"==typeof t&&(e=t,t={}),d(t=_(t),{url:gi(r,"_compact"),method:"POST"},function(){!function n(){i.info(function(i,r){r&&!r.compact_running?e(null,{ok:!0}):setTimeout(n,t.interval||200)})}()})}),i.bulkGet=x("bulkGet",function(t,e){var n=this;function i(e){var n={};t.revs&&(n.revs=!0),t.attachments&&(n.attachments=!0),t.latest&&(n.latest=!0),d(t,{url:gi(r,"_bulk_get"+yi(n)),method:"POST",body:{docs:t.docs}},function(n,i){!n&&t.attachments&&t.binary&&i.results.forEach(function(t){t.docs.forEach(di)}),e(n,i)})}function o(){var i=ui,r=Math.ceil(t.docs.length/i),o=0,s=new Array(r);function a(t){return function(n,i){s[t]=i.results,++o===r&&e(null,{results:st(s)})}}for(var l=0;l<r;l++){var c=T(t,["revs","attachments","binary","latest"]);c.ajax=u,c.docs=t.docs.slice(l*i,Math.min(t.docs.length,(l+1)*i)),A(n,c,a(l))}}var s=vi(r,""),a=hi[s];"boolean"!=typeof a?i(function(t,n){t?(hi[s]=!1,j(t.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):(hi[s]=!0,e(null,n))}):a?i(e):o()}),i._info=function(t){g().then(function(){d({},{method:"GET",url:gi(r,"")},function(e,n){if(e)return t(e);n.host=gi(r,""),t(null,n)})}).catch(t)},i.get=m("get",function(t,e,n){"function"==typeof e&&(n=e,e={});var i={};(e=_(e)).revs&&(i.revs=!0),e.revs_info&&(i.revs_info=!0),e.latest&&(i.latest=!0),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),i.open_revs=e.open_revs),e.rev&&(i.rev=e.rev),e.conflicts&&(i.conflicts=e.conflicts),e.update_seq&&(i.update_seq=e.update_seq),t=pi(t);var o={method:"GET",url:gi(r,t+yi(i))};function s(t){var n=t._attachments,i=n&&Object.keys(n);if(n&&i.length)return function(t,e){return new p(function(n,i){var r,o=0,s=0,a=0,u=t.length;function l(){++a===u?r?i(r):n():d()}function c(){o--,l()}function h(t){o--,r=r||t,l()}function d(){for(;o<e&&s<u;)o++,t[s++]().then(c,h)}d()})}(i.map(function(i){return function(){return function(i){var o=n[i],s=pi(t._id)+"/"+v(i)+"?rev="+t._rev;return f(e,{method:"GET",url:gi(r,s),binary:!0}).then(function(t){return e.binary?t:new p(function(e){Ne(t,e)})}).then(function(t){delete o.stub,delete o.length,o.data=t})}(i)}}),5)}f(e,o).then(function(t){return p.resolve().then(function(){if(e.attachments)return function(t){return Array.isArray(t)?p.all(t.map(function(t){if(t.ok)return s(t.ok)})):s(t)}(t)}).then(function(){n(null,t)})}).catch(function(e){e.docId=t,n(e)})}),i.remove=m("remove",function(t,e,n,i){var o;"string"==typeof e?(o={_id:t,_rev:e},"function"==typeof n&&(i=n,n={})):(o=t,"function"==typeof e?(i=e,n={}):(i=n,n=e));var s=o._rev||n.rev;d(n,{method:"DELETE",url:gi(r,pi(o._id))+"?rev="+s},i)}),i.getAttachment=m("getAttachment",function(t,e,n,i){"function"==typeof n&&(i=n,n={});var o=n.rev?"?rev="+n.rev:"";d(n,{method:"GET",url:gi(r,pi(t))+"/"+v(e)+o,binary:!0},i)}),i.removeAttachment=m("removeAttachment",function(t,e,n,i){d({},{method:"DELETE",url:gi(r,pi(t)+"/"+v(e))+"?rev="+n},i)}),i.putAttachment=m("putAttachment",function(t,e,n,i,o,s){"function"==typeof o&&(s=o,o=i,i=n,n=null);var a=pi(t)+"/"+v(e),l=gi(r,a);if(n&&(l+="?rev="+n),"string"==typeof i){var c;try{c=Ce(i)}catch(t){return s(it(G,"Attachment is not a valid base64 string"))}i=c?Se(c,o):""}d({},{headers:{"Content-Type":o},method:"PUT",url:l,processData:!1,body:i,timeout:u.timeout||6e4},s)}),i._bulkDocs=function(t,e,n){t.new_edits=e.new_edits,g().then(function(){return p.all(t.docs.map(fi))}).then(function(){d(e,{method:"POST",url:gi(r,"_bulk_docs"),timeout:e.timeout,body:t},function(t,e){if(t)return n(t);e.forEach(function(t){t.ok=!0}),n(null,e)})}).catch(n)},i._put=function(t,e,n){g().then(function(){return fi(t)}).then(function(){d(e,{method:"PUT",url:gi(r,pi(t._id)),body:t},function(e,i){if(e)return e.docId=t&&t._id,n(e);n(null,i)})}).catch(n)},i.allDocs=m("allDocs",function(t,e){"function"==typeof t&&(e=t,t={});var n,i={},o="GET";(t=_(t)).conflicts&&(i.conflicts=!0),t.update_seq&&(i.update_seq=!0),t.descending&&(i.descending=!0),t.include_docs&&(i.include_docs=!0),t.attachments&&(i.attachments=!0),t.key&&(i.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(i.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(i.endkey=JSON.stringify(t.endkey)),void 0!==t.inclusive_end&&(i.inclusive_end=!!t.inclusive_end),void 0!==t.limit&&(i.limit=t.limit),void 0!==t.skip&&(i.skip=t.skip);var s=yi(i);void 0!==t.keys&&(o="POST",n={keys:t.keys}),f(t,{method:o,url:gi(r,"_all_docs"+s),body:n}).then(function(n){t.include_docs&&t.attachments&&t.binary&&n.rows.forEach(di),e(null,n)}).catch(e)}),i._changes=function(t){var e="batch_size"in t?t.batch_size:ai;!(t=_(t)).continuous||"heartbeat"in t||(t.heartbeat=ci);var n="timeout"in t?t.timeout:"timeout"in u?u.timeout:3e4;"timeout"in t&&t.timeout&&n-t.timeout<li&&(n=t.timeout+li),"heartbeat"in t&&t.heartbeat&&n-t.heartbeat<li&&(n=t.heartbeat+li);var i={};"timeout"in t&&t.timeout&&(i.timeout=t.timeout);var o,a=void 0!==t.limit&&t.limit;o="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var l=a;if(t.style&&(i.style=t.style),(t.include_docs||t.filter&&"function"==typeof t.filter)&&(i.include_docs=!0),t.attachments&&(i.attachments=!0),t.continuous&&(i.feed="longpoll"),t.seq_interval&&(i.seq_interval=t.seq_interval),t.conflicts&&(i.conflicts=!0),t.descending&&(i.descending=!0),t.update_seq&&(i.update_seq=!0),"heartbeat"in t&&t.heartbeat&&(i.heartbeat=t.heartbeat),t.filter&&"string"==typeof t.filter&&(i.filter=t.filter),t.view&&"string"==typeof t.view&&(i.filter="_view",i.view=t.view),t.query_params&&"object"==typeof t.query_params)for(var c in t.query_params)t.query_params.hasOwnProperty(c)&&(i[c]=t.query_params[c]);var h,p,f,m="GET";t.doc_ids?(i.filter="_doc_ids",m="POST",h={doc_ids:t.doc_ids}):t.selector&&(i.filter="_selector",m="POST",h={selector:t.selector});var v=function(o,s){if(!t.aborted){i.since=o,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),t.descending?a&&(i.limit=l):i.limit=!a||l>e?e:l;var u={method:m,url:gi(r,"_changes"+yi(i)),timeout:n,body:h};f=o,t.aborted||g().then(function(){p=d(t,u,s)}).catch(s)}},y={results:[]},b=function(n,i){if(!t.aborted){var r=0;if(i&&i.results){r=i.results.length,y.last_seq=i.last_seq;var u=null,c=null;"number"==typeof i.pending&&(u=i.pending),"string"!=typeof y.last_seq&&"number"!=typeof y.last_seq||(c=y.last_seq);t.query_params,i.results=i.results.filter(function(e){l--;var n=ot(t)(e);return n&&(t.include_docs&&t.attachments&&t.binary&&di(e),o&&y.results.push(e),t.onChange(e,u,c)),n})}else if(n)return t.aborted=!0,void t.complete(n);i&&i.last_seq&&(f=i.last_seq);var h=a&&l<=0||i&&r<e||t.descending;(!t.continuous||a&&l<=0)&&h?t.complete(null,y):s(function(){v(f,b)})}};return v(t.since||0,b),{cancel:function(){t.aborted=!0,p&&p.abort()}}},i.revsDiff=m("revsDiff",function(t,e,n){"function"==typeof e&&(n=e,e={}),d(e,{method:"POST",url:gi(r,"_revs_diff"),body:t},n)}),i._close=function(t){t()},i._destroy=function(t,e){d(t,{url:gi(r,""),method:"DELETE"},function(t,n){if(t&&t.status&&404!==t.status)return e(t);e(null,n)})}}function bi(t){this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,bi)}catch(t){}}function wi(t){this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,wi)}catch(t){}}function xi(t){this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,xi)}catch(t){}}function $i(t,e){return e&&t.then(function(t){s(function(){e(null,t)})},function(t){s(function(){e(t)})}),t}function ki(t,e){return function(){var n=arguments,i=this;return t.add(function(){return e.apply(i,n)})}}function Ei(t){var e=new m(t),n=new Array(e.size),i=-1;return e.forEach(function(t){n[++i]=t}),n}function Ci(t){var e=new Array(t.size),n=-1;return t.forEach(function(t,i){e[++n]=i}),e}function Ti(t){return new xi("builtin "+t+" function requires map values to be numbers or number arrays")}function Li(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];if("number"!=typeof r){if(!Array.isArray(r))throw Ti("_sum");e="number"==typeof e?[e]:e;for(var o=0,s=r.length;o<s;o++){var a=r[o];if("number"!=typeof a)throw Ti("_sum");void 0===e[o]?e.push(a):e[o]+=a}}else"number"==typeof e?e+=r:e[0]+=r}return e}_i.valid=function(){return!0},u(bi,Error),u(wi,Error),u(xi,Error);var Si=I.bind(null,"log"),Di=Array.isArray,Mi=JSON.parse;function Ai(t,e){return gt("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:Li,log:Si,isArray:Di,toJSON:Mi})}function Pi(){this.promise=new p(function(t){t()})}function Ni(t){if(!t)return"undefined";switch(typeof t){case"function":case"string":return t.toString();default:return JSON.stringify(t)}}function Oi(t,e,n,i,r,o){var s,a=function(t,e){return Ni(t)+Ni(e)+"undefined"}(n,i);if(!r&&(s=t._cachedViews=t._cachedViews||{})[a])return s[a];var u=t.info().then(function(u){var l=u.db_name+"-mrview-"+(r?"temp":function(t){return h.hash(t)}(a));return vt(t,"_local/"+o,function(t){t.views=t.views||{};var n=e;-1===n.indexOf("/")&&(n=e+"/"+e);var i=t.views[n]=t.views[n]||{};if(!i[l])return i[l]=!0,t}).then(function(){return t.registerDependentDatabase(l).then(function(e){var r=e.db;r.auto_compaction=!0;var o={name:l,db:r,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:i};return o.db.get("_local/lastSeq").catch(function(t){if(404!==t.status)throw t}).then(function(t){return o.seq=t?t.seq:0,s&&o.db.once("destroyed",function(){delete s[a]}),o})})})});return s&&(s[a]=u),u}Pi.prototype.add=function(t){return this.promise=this.promise.catch(function(){}).then(function(){return t()}),this.promise},Pi.prototype.finish=function(){return this.promise};var Ii={},Ri=new Pi,ji=50;function Fi(t){return-1===t.indexOf("/")?[t,t]:t.split("/")}function qi(t,e){try{t.emit("error",e)}catch(t){I("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),I("error",e)}}var Bi={_sum:function(t,e){return Li(e)},_count:function(t,e){return e.length},_stats:function(t,e){return{sum:Li(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:function(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];e+=r*r}return e}(e)}}};var Ui=function(t,e,n,i){function r(t,e,n){try{e(n)}catch(e){qi(t,e)}}function a(t,e,n,i,r){try{return{output:e(n,i,r)}}catch(e){return qi(t,e),{error:e}}}function u(t,e){var n=ne(t.key,e.key);return 0!==n?n:ne(t.value,e.value)}function l(t){var e=t.value;return e&&"object"==typeof e&&e._id||t.id}function c(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&function(t){t.rows.forEach(function(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){var n=e[t];e[t].data=De(n.data,n.content_type)})})}(e),e}}function h(t,e,n,i){var r=e[t];void 0!==r&&(i&&(r=encodeURIComponent(JSON.stringify(r))),n.push(t+"="+r))}function d(t){if(void 0!==t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function f(t,e){var n=t.descending?"endkey":"startkey",i=t.descending?"startkey":"endkey";if(void 0!==t[n]&&void 0!==t[i]&&ne(t[n],t[i])>0)throw new bi("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==t.reduce){if(t.include_docs)throw new bi("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new bi("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){var n=function(t){if(t){if("number"!=typeof t)return new bi('Invalid value for integer: "'+t+'"');if(t<0)return new bi('Invalid value for positive integer: "'+t+'"')}}(t[e]);if(n)throw n})}function v(t){return function(e){if(404===e.status)return t;throw e}}function y(t,e,n){var i="_local/doc_"+t,r={_id:i,keys:[]},o=n.get(t),s=o[0];return(function(t){return 1===t.length&&/^1-/.test(t[0].rev)}(o[1])?p.resolve(r):e.db.get(i).catch(v(r))).then(function(t){return function(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):p.resolve({rows:[]})}(t).then(function(e){return function(t,e){for(var n=[],i=new m,r=0,o=e.rows.length;r<o;r++){var a=e.rows[r].doc;if(a&&(n.push(a),i.add(a._id),a._deleted=!s.has(a._id),!a._deleted)){var u=s.get(a._id);"value"in u&&(a.value=u.value)}}var l=Ci(s);return l.forEach(function(t){if(!i.has(t)){var e={_id:t},r=s.get(t);"value"in r&&(e.value=r.value),n.push(e)}}),t.keys=Ei(l.concat(t.keys)),n.push(t),n}(t,e)})})}function _(t){var e="string"==typeof t?t:t.name,n=Ii[e];return n||(n=Ii[e]=new Pi),n}function b(t){return ki(_(t),function(){return function(t){var n,i,o=e(t.mapFun,function(t,e){var r={id:i._id,key:ie(t)};void 0!==e&&null!==e&&(r.value=ie(e)),n.push(r)}),s=t.seq||0;function a(e,n){return function(){return function(t,e,n){return t.db.get("_local/lastSeq").catch(v({_id:"_local/lastSeq",seq:0})).then(function(i){var r=Ci(e);return p.all(r.map(function(n){return y(n,t,e)})).then(function(e){var r=st(e);return i.seq=n,r.push(i),t.db.bulkDocs({docs:r})})})}(t,e,n)}}var l=new Pi;function c(){return t.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:s,limit:ji}).then(h)}function h(e){var h=e.results;if(h.length){var p=function(e){for(var a=new g,l=0,c=e.length;l<c;l++){var h=e[l];if("_"!==h.doc._id[0]){n=[],(i=h.doc)._deleted||r(t.sourceDB,o,i),n.sort(u);var p=d(n);a.set(h.doc._id,[p,h.changes])}s=h.seq}return a}(h);if(l.add(a(p,s)),!(h.length<ji))return c()}}function d(t){for(var e,n=new g,i=0,r=t.length;i<r;i++){var o=t[i],s=[o.key,o.id];i>0&&0===ne(o.key,e)&&s.push(i),n.set(oe(s),o),e=o.key}return n}return c().then(function(){return l.finish()}).then(function(){t.seq=s})}(t)})()}function w(t,e){return ki(_(t),function(){return function(t,e){var i,r=t.reduceFun&&!1!==e.reduce,o=e.skip||0;function s(e){return e.include_docs=!0,t.db.allDocs(e).then(function(t){return i=t.total_rows,t.rows.map(function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),n=["id","key","value"];if(!(e<n||e>n))return t.doc.value}var i=function(t){for(var e=[],n=[],i=0;;){var r=t[i++];if("\0"!==r)switch(r){case"1":e.push(null);break;case"2":e.push("1"===t[i]),i++;break;case"3":var o=se(t,i);e.push(o.num),i+=o.length;break;case"4":for(var s="";;){var a=t[i];if("\0"===a)break;s+=a,i++}s=s.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(s);break;case"5":var u={element:[],index:e.length};e.push(u.element),n.push(u);break;case"6":var l={element:{},index:e.length};e.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+r)}else{if(1===e.length)return e.pop();ae(e,n)}}}(t.doc._id);return{key:i[0],id:i[1],value:"value"in t.doc?t.doc.value:null}})})}function u(s){var u;if(u=r?function(t,e,i){0===i.group_level&&delete i.group_level;var r=i.group||i.group_level,o=n(t.reduceFun),s=[],u=isNaN(i.group_level)?Number.POSITIVE_INFINITY:i.group_level;e.forEach(function(t){var e=s[s.length-1],n=r?t.key:null;if(r&&Array.isArray(n)&&(n=n.slice(0,u)),e&&0===ne(e.groupKey,n))return e.keys.push([t.key,t.id]),void e.values.push(t.value);s.push({keys:[[t.key,t.id]],values:[t.value],groupKey:n})}),e=[];for(var l=0,c=s.length;l<c;l++){var h=s[l],d=a(t.sourceDB,o,h.keys,h.values,!1);if(d.error&&d.error instanceof xi)throw d.error;e.push({value:d.error?null:d.output,key:h.groupKey})}return{rows:function(t,e,n){return n=n||0,"number"==typeof e?t.slice(n,e+n):n>0?t.slice(n):t}(e,i.limit,i.skip)}}(t,s,e):{total_rows:i,offset:o,rows:s},e.update_seq&&(u.update_seq=t.seq),e.include_docs){var c=Ei(s.map(l));return t.sourceDB.allDocs({keys:c,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then(function(t){var e=new g;return t.rows.forEach(function(t){e.set(t.id,t.doc)}),s.forEach(function(t){var n=l(t),i=e.get(n);i&&(t.doc=i)}),u})}return u}if(void 0===e.keys||e.keys.length||(e.limit=0,delete e.keys),void 0!==e.keys){var c=e.keys,h=c.map(function(t){var n={startkey:oe([t]),endkey:oe([t,{}])};return e.update_seq&&(n.update_seq=!0),s(n)});return p.all(h).then(st).then(u)}var d,f,m={descending:e.descending};if(e.update_seq&&(m.update_seq=!0),"start_key"in e&&(d=e.start_key),"startkey"in e&&(d=e.startkey),"end_key"in e&&(f=e.end_key),"endkey"in e&&(f=e.endkey),void 0!==d&&(m.startkey=e.descending?oe([d,{}]):oe([d])),void 0!==f){var v=!1!==e.inclusive_end;e.descending&&(v=!v),m.endkey=oe(v?[f,{}]:[f])}if(void 0!==e.key){var y=oe([e.key]),_=oe([e.key,{}]);m.descending?(m.endkey=y,m.startkey=_):(m.startkey=y,m.endkey=_)}return r||("number"==typeof e.limit&&(m.limit=e.limit),m.skip=o),s(m).then(u)}(t,e)})()}function x(e,n,r){if("function"==typeof e._query)return function(t,e,n){return new p(function(i,r){t._query(e,n,function(t,e){if(t)return r(t);i(e)})})}(e,n,r);if(ut(e))return function(t,e,n){var i,r=[],o="GET";if(h("reduce",n,r),h("include_docs",n,r),h("attachments",n,r),h("limit",n,r),h("descending",n,r),h("group",n,r),h("group_level",n,r),h("skip",n,r),h("stale",n,r),h("conflicts",n,r),h("startkey",n,r,!0),h("start_key",n,r,!0),h("endkey",n,r,!0),h("end_key",n,r,!0),h("inclusive_end",n,r),h("key",n,r,!0),h("update_seq",n,r),r=""===(r=r.join("&"))?"":"?"+r,void 0!==n.keys){var s="keys="+encodeURIComponent(JSON.stringify(n.keys));s.length+r.length+1<=2e3?r+=("?"===r[0]?"&":"?")+s:(o="POST","string"==typeof e?i={keys:n.keys}:e.keys=n.keys)}if("string"==typeof e){var a=Fi(e);return t.request({method:o,url:"_design/"+a[0]+"/_view/"+a[1]+r,body:i}).then(function(t){return t.rows.forEach(function(t){if(t.value&&t.value.error&&"builtin_reduce_error"===t.value.error)throw new Error(t.reason)}),t}).then(c(n))}return i=i||{},Object.keys(e).forEach(function(t){Array.isArray(e[t])?i[t]=e[t]:i[t]=e[t].toString()}),t.request({method:"POST",url:"_temp_view"+r,body:i}).then(c(n))}(e,n,r);if("string"!=typeof n)return f(r,n),Ri.add(function(){return Oi(e,"temp_view/temp_view",n.map,n.reduce,!0,t).then(function(t){return function(t,e){return t.then(function(t){return e().then(function(){return t})},function(t){return e().then(function(){throw t})})}(b(t).then(function(){return w(t,r)}),function(){return t.db.destroy()})})}),Ri.finish();var o=n,a=Fi(o),u=a[0],l=a[1];return e.get("_design/"+u).then(function(n){var a=n.views&&n.views[l];if(!a)throw new wi("ddoc "+n._id+" has no view named "+l);return i(n,l),f(r,a),Oi(e,o,a.map,a.reduce,!1,t).then(function(t){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&s(function(){b(t)}),w(t,r)):b(t).then(function(){return w(t,r)})})})}return{query:function(t,e,n){var i=this;"function"==typeof e&&(n=e,e={}),e=e?function(t){return t.group_level=d(t.group_level),t.limit=d(t.limit),t.skip=d(t.skip),t}(e):{},"function"==typeof t&&(t={map:t});var r=p.resolve().then(function(){return x(i,t,e)});return $i(r,n),r},viewCleanup:function(t){return o(function(e){var n=e.pop(),i=t.apply(this,e);return"function"==typeof n&&$i(i,n),i})}(function(){var e=this;return"function"==typeof e._viewCleanup?function(t){return new p(function(e,n){t._viewCleanup(function(t,i){if(t)return n(t);e(i)})})}(e):ut(e)?function(t){return t.request({method:"POST",url:"_view_cleanup"})}(e):function(e){return e.get("_local/"+t).then(function(t){var n=new g;Object.keys(t.views).forEach(function(t){var e=Fi(t),i="_design/"+e[0],r=e[1],o=n.get(i);o||(o=new m,n.set(i,o)),o.add(r)});var i={keys:Ci(n),include_docs:!0};return e.allDocs(i).then(function(i){var r={};i.rows.forEach(function(e){var i=e.key.substring(8);n.get(e.key).forEach(function(n){var o=i+"/"+n;t.views[o]||(o=n);var s=Object.keys(t.views[o]),a=e.doc&&e.doc.views&&e.doc.views[n];s.forEach(function(t){r[t]=r[t]||a})})});var o=Object.keys(r).filter(function(t){return!r[t]}).map(function(t){return ki(_(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return p.all(o).then(function(){return{ok:!0}})})},v({ok:!0}))}(e)})}}("mrviews",function(t,e){if("function"==typeof t&&2===t.length){var n=t;return function(t){return n(t,e)}}return Ai(t.toString(),e)},function(t){var e=t.toString(),n=function(t){if(/^_sum/.test(t))return Bi._sum;if(/^_count/.test(t))return Bi._count;if(/^_stats/.test(t))return Bi._stats;if(/^_/.test(t))throw new Error(t+" is not a supported reduce function.")}(e);return n||Ai(e)},function(t,e){var n=t.views&&t.views[e];if("string"!=typeof n.map)throw new wi("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof n.map)});var zi={query:function(t,e,n){return Ui.query.call(this,t,e,n)},viewCleanup:function(t){return Ui.viewCleanup.call(this,t)}};function Vi(t){return/^1-/.test(t)}function Hi(t,e){var n=Object.keys(e._attachments);return p.all(n.map(function(n){return t.getAttachment(e._id,n,{rev:e._rev})}))}function Wi(t,e,n,i){n=_(n);var r=[],o=!0;function s(e){return t.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(t){if(i.cancelled)throw new Error("cancelled");t.rows.forEach(function(t){t.deleted||!t.doc||!Vi(t.value.rev)||function(t){return t._attachments&&Object.keys(t._attachments).length>0}(t.doc)||function(t){return t._conflicts&&t._conflicts.length>0}(t.doc)||(t.doc._conflicts&&delete t.doc._conflicts,r.push(t.doc),delete n[t.id])})})}return p.resolve().then(function(){var t=Object.keys(n).filter(function(t){var e=n[t].missing;return 1===e.length&&Vi(e[0])});if(t.length>0)return s(t)}).then(function(){var s=function(t){var e=[];return Object.keys(t).forEach(function(n){t[n].missing.forEach(function(t){e.push({id:n,rev:t})})}),{docs:e,revs:!0,latest:!0}}(n);if(s.docs.length)return t.bulkGet(s).then(function(n){if(i.cancelled)throw new Error("cancelled");return p.all(n.results.map(function(n){return p.all(n.docs.map(function(n){var i=n.ok;return n.error&&(o=!1),i&&i._attachments?function(t,e,n){var i=ut(e)&&!ut(t),r=Object.keys(n._attachments);return i?t.get(n._id).then(function(i){return p.all(r.map(function(r){return function(t,e,n){return!t._attachments||!t._attachments[n]||t._attachments[n].digest!==e._attachments[n].digest}(i,n,r)?e.getAttachment(n._id,r):t.getAttachment(i._id,r)}))}).catch(function(t){if(404!==t.status)throw t;return Hi(e,n)}):Hi(e,n)}(e,t,i).then(function(t){var e=Object.keys(i._attachments);return t.forEach(function(t,n){var r=i._attachments[e[n]];delete r.stub,delete r.length,r.data=t}),i}):i}))})).then(function(t){r=r.concat(st(t).filter(Boolean))})})}).then(function(){return{ok:o,docs:r}})}var Zi=1,Gi="pouchdb",Yi=5,Xi=0;function Ki(t,e,n,i,r){return t.get(e).catch(function(n){if(404===n.status)return"http"!==t.adapter&&"https"!==t.adapter||j(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:i,_id:e,history:[],replicator:Gi,version:Zi};throw n}).then(function(o){if(!r.cancelled&&o.last_seq!==n)return o.history=(o.history||[]).filter(function(t){return t.session_id!==i}),o.history.unshift({last_seq:n,session_id:i}),o.history=o.history.slice(0,Yi),o.version=Zi,o.replicator=Gi,o.session_id=i,o.last_seq=n,t.put(o).catch(function(o){if(409===o.status)return Ki(t,e,n,i,r);throw o})})}function Ji(t,e,n,i,r){this.src=t,this.target=e,this.id=n,this.returnValue=i,this.opts=r||{}}Ji.prototype.writeCheckpoint=function(t,e){var n=this;return this.updateTarget(t,e).then(function(){return n.updateSource(t,e)})},Ji.prototype.updateTarget=function(t,e){return this.opts.writeTargetCheckpoint?Ki(this.target,this.id,t,e,this.returnValue):p.resolve(!0)},Ji.prototype.updateSource=function(t,e){if(this.opts.writeSourceCheckpoint){var n=this;return Ki(this.src,this.id,t,e,this.returnValue).catch(function(t){if(er(t))return n.opts.writeSourceCheckpoint=!1,!0;throw t})}return p.resolve(!0)};var Qi={undefined:function(t,e){return 0===ne(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return function(t,e){if(t.session_id===e.session_id)return{last_seq:t.last_seq,history:t.history};return function t(e,n){var i=e[0];var r=e.slice(1);var o=n[0];var s=n.slice(1);if(!i||0===n.length)return{last_seq:Xi,history:[]};var a=i.session_id;if(tr(a,n))return{last_seq:i.last_seq,history:e};var u=o.session_id;if(tr(u,r))return{last_seq:o.last_seq,history:s};return t(r,s)}(t.history,e.history)}(e,t).last_seq}};function tr(t,e){var n=e[0],i=e.slice(1);return!(!t||0===e.length)&&(t===n.session_id||tr(t,i))}function er(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}Ji.prototype.getCheckpoint=function(){var t=this;return t.opts&&t.opts.writeSourceCheckpoint&&!t.opts.writeTargetCheckpoint?t.src.get(t.id).then(function(t){return t.last_seq||Xi}).catch(function(t){if(404!==t.status)throw t;return Xi}):t.target.get(t.id).then(function(e){return t.opts&&t.opts.writeTargetCheckpoint&&!t.opts.writeSourceCheckpoint?e.last_seq||Xi:t.src.get(t.id).then(function(t){return e.version!==t.version?Xi:(n=e.version?e.version.toString():"undefined")in Qi?Qi[n](e,t):Xi;var n},function(n){if(404===n.status&&e.last_seq)return t.src.put({_id:t.id,last_seq:Xi}).then(function(){return Xi},function(n){return er(n)?(t.opts.writeSourceCheckpoint=!1,e.last_seq):Xi});throw n})}).catch(function(t){if(404!==t.status)throw t;return Xi})};var nr=0;function ir(t,e,n){var i=n.doc_ids?n.doc_ids.sort(ne):"",r=n.filter?n.filter.toString():"",o="",s="",a="";return n.selector&&(a=JSON.stringify(n.selector)),n.filter&&n.query_params&&(o=JSON.stringify(function(t){return Object.keys(t).sort(ne).reduce(function(e,n){return e[n]=t[n],e},{})}(n.query_params))),n.filter&&"_view"===n.filter&&(s=n.view.toString()),p.all([t.id(),e.id()]).then(function(t){var e=t[0]+t[1]+r+s+o+i+a;return new p(function(t){qe(e,t)})}).then(function(t){return"_local/"+(t=t.replace(/\//g,".").replace(/\+/g,"_"))})}function rr(t,e,n,i,r){var o,s,a,u=[],l={seq:0,changes:[],docs:[]},c=!1,h=!1,d=!1,f=0,m=n.continuous||n.live||!1,g=n.batch_size||100,v=n.batches_limit||10,y=!1,b=n.doc_ids,w=n.selector,x=[],$=_t(),k=n.seq_interval;r=r||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var E={};function C(){return a?p.resolve():ir(t,e,n).then(function(r){s=r;var o={};o=!1===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},a=new Ji(t,e,s,i,o)})}function T(){if(x=[],0!==o.docs.length){var t=o.docs,s={timeout:n.timeout};return e.bulkDocs({docs:t,new_edits:!1},s).then(function(e){if(i.cancelled)throw P(),new Error("cancelled");var n=Object.create(null);e.forEach(function(t){t.error&&(n[t.id]=t)});var o=Object.keys(n).length;r.doc_write_failures+=o,r.docs_written+=t.length-o,t.forEach(function(t){var e=n[t._id];if(e){r.errors.push(e);var o=(e.name||"").toLowerCase();if("unauthorized"!==o&&"forbidden"!==o)throw e;i.emit("denied",_(e))}else x.push(t)})},function(e){throw r.doc_write_failures+=t.length,e})}}function L(){if(o.error)throw new Error("There was a problem getting docs.");r.last_seq=f=o.seq;var t=_(r);return x.length&&(t.docs=x,"number"==typeof o.pending&&(t.pending=o.pending,delete o.pending),i.emit("change",t)),c=!0,a.writeCheckpoint(o.seq,$).then(function(){if(c=!1,i.cancelled)throw P(),new Error("cancelled");o=void 0,j()}).catch(function(t){throw q(t),t})}function S(){return Wi(t,e,o.diffs,i).then(function(t){o.error=!t.ok,t.docs.forEach(function(t){delete o.diffs[t._id],r.docs_read++,o.docs.push(t)})})}function D(){i.cancelled||o||(0!==u.length?(o=u.shift(),function(){var t={};return o.changes.forEach(function(e){"_user/"!==e.id&&(t[e.id]=e.changes.map(function(t){return t.rev}))}),e.revsDiff(t).then(function(t){if(i.cancelled)throw P(),new Error("cancelled");o.diffs=t})}().then(S).then(T).then(L).then(D).catch(function(t){A("batch processing terminated with error",t)})):M(!0))}function M(t){0!==l.changes.length?(t||h||l.changes.length>=g)&&(u.push(l),l={seq:0,changes:[],docs:[]},"pending"!==i.state&&"stopped"!==i.state||(i.state="active",i.emit("active")),D()):0!==u.length||o||((m&&E.live||h)&&(i.state="pending",i.emit("paused")),h&&P())}function A(t,e){d||(e.message||(e.message=t),r.ok=!1,r.status="aborting",u=[],l={seq:0,changes:[],docs:[]},P(e))}function P(o){if(!(d||i.cancelled&&(r.status="cancelled",c)))if(r.status=r.status||"complete",r.end_time=new Date,r.last_seq=f,d=!0,o){(o=it(o)).result=r;var s=(o.name||"").toLowerCase();"unauthorized"===s||"forbidden"===s?(i.emit("error",o),i.removeAllListeners()):function(t,e,n,i){if(!1===t.retry)return e.emit("error",n),void e.removeAllListeners();if("function"!=typeof t.back_off_function&&(t.back_off_function=R),e.emit("requestError",n),"active"===e.state||"pending"===e.state){e.emit("paused",n),e.state="stopped";var r=function(){t.current_back_off=nr};e.once("paused",function(){e.removeListener("active",r)}),e.once("active",r)}t.current_back_off=t.current_back_off||nr,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(i,t.current_back_off)}(n,i,o,function(){rr(t,e,n,i)})}else i.emit("complete",r),i.removeAllListeners()}function N(t,e,r){if(i.cancelled)return P();"number"==typeof e&&(l.pending=e),ot(n)(t)&&(l.seq=t.seq||r,l.changes.push(t),M(0===u.length&&E.live))}function O(t){if(y=!1,i.cancelled)return P();if(t.results.length>0)E.since=t.last_seq,j(),M(!0);else{var e=function(){m?(E.live=!0,j()):h=!0,M(!0)};o||0!==t.results.length?e():(c=!0,a.writeCheckpoint(t.last_seq,$).then(function(){c=!1,r.last_seq=f=t.last_seq,e()}).catch(q))}}function I(t){if(y=!1,i.cancelled)return P();A("changes rejected",t)}function j(){if(!y&&!h&&u.length<v){y=!0,i._changes&&(i.removeListener("cancel",i._abortChanges),i._changes.cancel()),i.once("cancel",r);var e=t.changes(E).on("change",N);e.then(o,o),e.then(O).catch(I),n.retry&&(i._changes=e,i._abortChanges=r)}function r(){e.cancel()}function o(){i.removeListener("cancel",r)}}function F(){C().then(function(){if(!i.cancelled)return a.getCheckpoint().then(function(t){E={since:f=t,limit:g,batch_size:g,style:"all_docs",doc_ids:b,selector:w,return_docs:!0},!1!==k&&(E.seq_interval=k||g),n.filter&&("string"!=typeof n.filter?E.include_docs=!0:E.filter=n.filter),"heartbeat"in n&&(E.heartbeat=n.heartbeat),"timeout"in n&&(E.timeout=n.timeout),n.query_params&&(E.query_params=n.query_params),n.view&&(E.view=n.view),j()});P()}).catch(function(t){A("getCheckpoint rejected with ",t)})}function q(t){c=!1,A("writeCheckpoint completed with error",t)}i.ready(t,e),i.cancelled?P():(i._addedListeners||(i.once("cancel",P),"function"==typeof n.complete&&(i.once("error",n.complete),i.once("complete",function(t){n.complete(null,t)})),i._addedListeners=!0),void 0===n.since?F():C().then(function(){return c=!0,a.writeCheckpoint(n.since,$)}).then(function(){c=!1,i.cancelled?P():(f=n.since,F())}).catch(q))}function or(){a.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var t=this,e=new p(function(e,n){t.once("complete",e),t.once("error",n)});t.then=function(t,n){return e.then(t,n)},t.catch=function(t){return e.catch(t)},t.catch(function(){})}function sr(t,e){var n=e.PouchConstructor;return"string"==typeof t?new n(t,e):t}function ar(t,e,n,i){if("function"==typeof n&&(i=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw it(K,"`doc_ids` filter parameter is not a list.");n.complete=i,(n=_(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var r=new or(n);return rr(sr(t,n),sr(e,n),n,r),r}function ur(t,e,n,i){return"function"==typeof n&&(i=n,n={}),void 0===n&&(n={}),(n=_(n)).PouchConstructor=n.PouchConstructor||this,new lr(t=sr(t,n),e=sr(e,n),n,i)}function lr(t,e,n,i){var r=this;this.canceled=!1;var o=n.push?F({},n,n.push):n,s=n.pull?F({},n,n.pull):n;function a(t){r.emit("change",{direction:"pull",change:t})}function u(t){r.emit("change",{direction:"push",change:t})}function l(t){r.emit("denied",{direction:"push",doc:t})}function c(t){r.emit("denied",{direction:"pull",doc:t})}function h(){r.pushPaused=!0,r.pullPaused&&r.emit("paused")}function d(){r.pullPaused=!0,r.pushPaused&&r.emit("paused")}function f(){r.pushPaused=!1,r.pullPaused&&r.emit("active",{direction:"push"})}function m(){r.pullPaused=!1,r.pushPaused&&r.emit("active",{direction:"pull"})}this.push=ar(t,e,o),this.pull=ar(e,t,s),this.pushPaused=!0,this.pullPaused=!0;var g={};function v(t){return function(e,n){("change"===e&&(n===a||n===u)||"denied"===e&&(n===c||n===l)||"paused"===e&&(n===d||n===h)||"active"===e&&(n===m||n===f))&&(e in g||(g[e]={}),g[e][t]=!0,2===Object.keys(g[e]).length&&r.removeAllListeners(e))}}function y(t,e,n){-1==t.listeners(e).indexOf(n)&&t.on(e,n)}n.live&&(this.push.on("complete",r.pull.cancel.bind(r.pull)),this.pull.on("complete",r.push.cancel.bind(r.push))),this.on("newListener",function(t){"change"===t?(y(r.pull,"change",a),y(r.push,"change",u)):"denied"===t?(y(r.pull,"denied",c),y(r.push,"denied",l)):"active"===t?(y(r.pull,"active",m),y(r.push,"active",f)):"paused"===t&&(y(r.pull,"paused",d),y(r.push,"paused",h))}),this.on("removeListener",function(t){"change"===t?(r.pull.removeListener("change",a),r.push.removeListener("change",u)):"denied"===t?(r.pull.removeListener("denied",c),r.push.removeListener("denied",l)):"active"===t?(r.pull.removeListener("active",m),r.push.removeListener("active",f)):"paused"===t&&(r.pull.removeListener("paused",d),r.push.removeListener("paused",h))}),this.pull.on("removeListener",v("pull")),this.push.on("removeListener",v("push"));var _=p.all([this.push,this.pull]).then(function(t){var e={push:t[0],pull:t[1]};return r.emit("complete",e),i&&i(null,e),r.removeAllListeners(),e},function(t){if(r.cancel(),i?i(t):r.emit("error",t),r.removeAllListeners(),i)throw t});this.then=function(t,e){return _.then(t,e)},this.catch=function(t){return _.catch(t)}}u(or,a.EventEmitter),or.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},or.prototype.ready=function(t,e){var n=this;function i(){n.cancel()}n._readyCalled||(n._readyCalled=!0,t.once("destroyed",i),e.once("destroyed",i),n.once("complete",function(){t.removeListener("destroyed",i),e.removeListener("destroyed",i)}))},u(lr,a.EventEmitter),lr.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},Ht.plugin(function(t){t.adapter("idb",$n,!0)}).plugin(function(t){t.adapter("websql",ei,!0)}).plugin(function(t){t.adapter("http",_i,!1),t.adapter("https",_i,!1)}).plugin(zi).plugin(function(t){t.replicate=ar,t.sync=ur,Object.defineProperty(t.prototype,"replicate",{get:function(){var t=this;return void 0===this.replicateMethods&&(this.replicateMethods={from:function(e,n,i){return t.constructor.replicate(e,t,n,i)},to:function(e,n,i){return t.constructor.replicate(t,e,n,i)}}),this.replicateMethods}}),t.prototype.sync=function(t,e,n){return this.constructor.sync(this,t,e,n)}}),t.exports=Ht}).call(this,n(10))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i,r;n(82),i=[n(0)],void 0===(r=function(t){return function(){var e,n,i,r=0,o={error:"error",info:"info",success:"success",warning:"warning"},s={clear:function(n,i){var r=h();e||a(r),u(n,r,i)||function(n){for(var i=e.children(),r=i.length-1;r>=0;r--)u(t(i[r]),n)}(r)},remove:function(n){var i=h();e||a(i),n&&0===t(":focus",n).length?d(n):e.children().length&&e.remove()},error:function(t,e,n){return c({type:o.error,iconClass:h().iconClasses.error,message:t,optionsOverride:n,title:e})},getContainer:a,info:function(t,e,n){return c({type:o.info,iconClass:h().iconClasses.info,message:t,optionsOverride:n,title:e})},options:{},subscribe:function(t){n=t},success:function(t,e,n){return c({type:o.success,iconClass:h().iconClasses.success,message:t,optionsOverride:n,title:e})},version:"2.1.4",warning:function(t,e,n){return c({type:o.warning,iconClass:h().iconClasses.warning,message:t,optionsOverride:n,title:e})}};return s;function a(n,i){return n||(n=h()),(e=t("#"+n.containerId)).length?e:(i&&(e=function(n){return(e=t("<div/>").attr("id",n.containerId).addClass(n.positionClass)).appendTo(t(n.target)),e}(n)),e)}function u(e,n,i){var r=!(!i||!i.force)&&i.force;return!(!e||!r&&0!==t(":focus",e).length||(e[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){d(e)}}),0))}function l(t){n&&n(t)}function c(n){var o=h(),s=n.iconClass||o.iconClass;if(void 0!==n.optionsOverride&&(o=t.extend(o,n.optionsOverride),s=n.optionsOverride.iconClass||s),!function(t,e){if(t.preventDuplicates){if(e.message===i)return!0;i=e.message}return!1}(o,n)){r++,e=a(o,!0);var u=null,c=t("<div/>"),p=t("<div/>"),f=t("<div/>"),m=t("<div/>"),g=t(o.closeHtml),v={intervalId:null,hideEta:null,maxHideTime:null},y={toastId:r,state:"visible",startTime:new Date,options:o,map:n};return n.iconClass&&c.addClass(o.toastClass).addClass(s),function(){if(n.title){var t=n.title;o.escapeHtml&&(t=_(n.title)),p.append(t).addClass(o.titleClass),c.append(p)}}(),function(){if(n.message){var t=n.message;o.escapeHtml&&(t=_(n.message)),f.append(t).addClass(o.messageClass),c.append(f)}}(),o.closeButton&&(g.addClass(o.closeClass).attr("role","button"),c.prepend(g)),o.progressBar&&(m.addClass(o.progressClass),c.prepend(m)),o.rtl&&c.addClass("rtl"),o.newestOnTop?e.prepend(c):e.append(c),function(){var t="";switch(n.iconClass){case"toast-success":case"toast-info":t="polite";break;default:t="assertive"}c.attr("aria-live",t)}(),c.hide(),c[o.showMethod]({duration:o.showDuration,easing:o.showEasing,complete:o.onShown}),o.timeOut>0&&(u=setTimeout(b,o.timeOut),v.maxHideTime=parseFloat(o.timeOut),v.hideEta=(new Date).getTime()+v.maxHideTime,o.progressBar&&(v.intervalId=setInterval($,10))),o.closeOnHover&&c.hover(x,w),!o.onclick&&o.tapToDismiss&&c.click(b),o.closeButton&&g&&g.click(function(t){t.stopPropagation?t.stopPropagation():void 0!==t.cancelBubble&&!0!==t.cancelBubble&&(t.cancelBubble=!0),o.onCloseClick&&o.onCloseClick(t),b(!0)}),o.onclick&&c.click(function(t){o.onclick(t),b()}),l(y),o.debug&&console&&console.log(y),c}function _(t){return null==t&&(t=""),t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(e){var n=e&&!1!==o.closeMethod?o.closeMethod:o.hideMethod,i=e&&!1!==o.closeDuration?o.closeDuration:o.hideDuration,r=e&&!1!==o.closeEasing?o.closeEasing:o.hideEasing;if(!t(":focus",c).length||e)return clearTimeout(v.intervalId),c[n]({duration:i,easing:r,complete:function(){d(c),clearTimeout(u),o.onHidden&&"hidden"!==y.state&&o.onHidden(),y.state="hidden",y.endTime=new Date,l(y)}})}function w(){(o.timeOut>0||o.extendedTimeOut>0)&&(u=setTimeout(b,o.extendedTimeOut),v.maxHideTime=parseFloat(o.extendedTimeOut),v.hideEta=(new Date).getTime()+v.maxHideTime)}function x(){clearTimeout(u),v.hideEta=0,c.stop(!0,!0)[o.showMethod]({duration:o.showDuration,easing:o.showEasing})}function $(){var t=(v.hideEta-(new Date).getTime())/v.maxHideTime*100;m.width(t+"%")}}function h(){return t.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},s.options)}function d(t){e||(e=a()),t.is(":visible")||(t.remove(),t=null,0===e.children().length&&(e.remove(),i=void 0))}}()}.apply(e,i))||(t.exports=r)},function(t){t.exports={maps:[{tiles:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],name:"streets",attribution:'Â© <a href="http://openstreetmap.org">OpenStreetMap</a> | <a href="www.openstreetmap.org/copyright">Terms</a>'},{tiles:"GOOGLE_SATELLITE",name:"satellite"}],googleApiKey:"",repeatOrdinals:!1,validateContinuously:!1,validatePage:!1,swipePage:!0,arcGis:{jsUrl:"",cssUrl:"",webMapId:"",hasZ:!0,basemaps:["streets"]}}},,function(t,e,n){"use strict";(function(e){var n,i,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var o=0,s=new r(c),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var u=new e.MessageChannel;u.port1.onmessage=c,n=function(){u.port2.postMessage(0)}}var l=[];function c(){var t,e;i=!0;for(var n=l.length;n;){for(e=l,l=[],t=-1;++t<n;)e[t]();n=l.length}i=!1}t.exports=function(t){1!==l.push(t)||i||n()}}).call(this,n(10))},function(t,e,n){var i=n(0),r=".dropdown-backdrop",o="[data-toggle=dropdown]",s=function(t){i(t).on("click.bs.dropdown",this.toggle)};function a(t){i(r).remove(),i(o).each(function(){var e=u(i(this)),n={relatedTarget:this};e.hasClass("open")&&(e.trigger(t=i.Event("hide.bs.dropdown",n)),t.isDefaultPrevented()||e.removeClass("open").trigger("hidden.bs.dropdown",n))})}function u(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n=e&&i(e);return n&&n.length?n:t.parent()}s.prototype.toggle=function(t){var e=i(this);if(!e.is(".disabled, :disabled")){var n=u(e),r=n.hasClass("open");if(a(),!r){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&i('<div class="dropdown-backdrop"/>').insertAfter(i(this)).on("click",a);var o={relatedTarget:this};if(n.trigger(t=i.Event("show.bs.dropdown",o)),t.isDefaultPrevented())return;n.toggleClass("open").trigger("shown.bs.dropdown",o),e.focus()}return!1}},s.prototype.keydown=function(t){if(/^(38|40|27)$/.test(t.keyCode)){var e=i(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=u(e),r=n.hasClass("open");if(!r||r&&27===t.keyCode)return 27===t.which&&n.find(o).focus(),e.click();var s=" li:not(.divider):visible a",a=n.find("[role=menu]"+s+", [role=listbox]"+s);if(a.length){var l=a.index(a.filter(":focus"));38===t.keyCode&&l>0&&l--,40===t.keyCode&&l<a.length-1&&l++,~l||(l=0),a.eq(l).focus()}}}};var l=i.fn.dropdown;i.fn.dropdown=function(t){return this.each(function(){var e=i(this),n=e.data("bs.dropdown");n||e.data("bs.dropdown",new s(this)),"string"==typeof t&&n[t].call(e)})},i.fn.dropdown.Constructor=s,i.fn.dropdown.noConflict=function(){return i.fn.dropdown=l,this},i(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o+", [role=menu], [role=listbox]",s.prototype.keydown)},,,,,,,function(t,e,n){"use strict";
/*!
 * Vue.js v1.0.28
 * (c) 2016 Evan You
 * Released under the MIT License.
 */function i(t,e,n){if(s(t,e))t[e]=n;else if(t._isVue)i(t._data,e,n);else{var r=t.__ob__;if(r){if(r.convert(e,n),r.dep.notify(),r.vms)for(var o=r.vms.length;o--;){var a=r.vms[o];a._proxy(e),a._digest()}return n}t[e]=n}}function r(t,e){if(s(t,e)){delete t[e];var n=t.__ob__;if(n){if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var r=n.vms[i];r._unproxy(e),r._digest()}}else t._isVue&&(delete t._data[e],t._digest())}}var o=Object.prototype.hasOwnProperty;function s(t,e){return o.call(t,e)}var a=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/;function u(t){return a.test(t)}function l(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function c(t){return null==t?"":t.toString()}function h(t){if("string"!=typeof t)return t;var e=Number(t);return isNaN(e)?t:e}function d(t){return"true"===t||"false"!==t&&t}function p(t){var e=t.charCodeAt(0);return e!==t.charCodeAt(t.length-1)||34!==e&&39!==e?t:t.slice(1,-1)}var f=/-(\w)/g;function m(t){return t.replace(f,g)}function g(t,e){return e?e.toUpperCase():""}var v=/([^-])([A-Z])/g;function y(t){return t.replace(v,"$1-$2").replace(v,"$1-$2").toLowerCase()}var _=/(?:^|[-_\/])(\w)/g;function b(t){return t.replace(_,g)}function w(t,e){return function(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}}function x(t,e){e=e||0;for(var n=t.length-e,i=new Array(n);n--;)i[n]=t[n+e];return i}function $(t,e){for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}function k(t){return null!==t&&"object"==typeof t}var E=Object.prototype.toString,C="[object Object]";function T(t){return E.call(t)===C}var L=Array.isArray;function S(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function D(t,e){var n,i,r,o,s,a=function a(){var u=Date.now()-o;u<e&&u>=0?n=setTimeout(a,e-u):(n=null,s=t.apply(r,i),n||(r=i=null))};return function(){return r=this,i=arguments,o=Date.now(),n||(n=setTimeout(a,e)),s}}function M(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function A(t){var e=function e(){if(!e.cancelled)return t.apply(this,arguments)};return e.cancel=function(){e.cancelled=!0},e}function P(t,e){return t==e||!(!k(t)||!k(e))&&JSON.stringify(t)===JSON.stringify(e)}var N="__proto__"in{},O="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),I=O&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,R=O&&window.navigator.userAgent.toLowerCase(),j=R&&R.indexOf("trident")>0,F=R&&R.indexOf("msie 9.0")>0,q=R&&R.indexOf("android")>0,B=R&&/iphone|ipad|ipod|ios/.test(R),U=void 0,z=void 0,V=void 0,H=void 0;if(O&&!F){var W=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,Z=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;U=W?"WebkitTransition":"transition",z=W?"webkitTransitionEnd":"transitionend",V=Z?"WebkitAnimation":"animation",H=Z?"webkitAnimationEnd":"animationend"}function G(t){return/native code/.test(t.toString())}var Y=function(){var t=[],e=!1,n=void 0;function i(){e=!1;var n=t.slice(0);t.length=0;for(var i=0;i<n.length;i++)n[i]()}if("undefined"!=typeof Promise&&G(Promise)){var r=Promise.resolve(),o=function(){};n=function(){r.then(i),B&&setTimeout(o)}}else if("undefined"!=typeof MutationObserver){var s=1,a=new MutationObserver(i),u=document.createTextNode(String(s));a.observe(u,{characterData:!0}),n=function(){s=(s+1)%2,u.data=String(s)}}else n=setTimeout;return function(r,o){var s=o?function(){r.call(o)}:r;t.push(s),e||(e=!0,n(i,0))}}(),X=void 0;function K(t){this.size=0,this.limit=t,this.head=this.tail=void 0,this._keymap=Object.create(null)}"undefined"!=typeof Set&&G(Set)?X=Set:((X=function(){this.set=Object.create(null)}).prototype.has=function(t){return void 0!==this.set[t]},X.prototype.add=function(t){this.set[t]=1},X.prototype.clear=function(){this.set=Object.create(null)});var J=K.prototype;J.put=function(t,e){var n,i=this.get(t,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:t},this._keymap[t]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=e,n},J.shift=function(){var t=this.head;return t&&(this.head=this.head.newer,this.head.older=void 0,t.newer=t.older=void 0,this._keymap[t.key]=void 0,this.size--),t},J.get=function(t,e){var n=this._keymap[t];if(void 0!==n)return n===this.tail?e?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,e?n:n.value)};var Q,tt,et,nt,it,rt,ot=new K(1e3),st=/^in$|^-?\d+/,at=0,ut=1,lt=2,ct=3,ht=34,dt=39,pt=124,ft=92,mt=32,gt={91:1,123:1,40:1},vt={91:93,123:125,40:41};function yt(){return Q.charCodeAt(nt+1)}function _t(){return Q.charCodeAt(++nt)}function bt(){return nt>=et}function wt(){for(;yt()===mt;)_t()}function xt(t){return t===ht||t===dt}function $t(t){return gt[t]}function kt(t,e){return vt[t]===e}function Et(){for(var t,e=_t();!bt();)if((t=_t())===ft)_t();else if(t===e)break}function Ct(t){for(var e=0,n=t;!bt();)if(xt(t=yt()))Et();else if(n===t&&e++,kt(n,t)&&e--,_t(),0===e)break}function Tt(){for(var t=nt;!bt();)if(xt(it=yt()))Et();else if($t(it))Ct(it);else if(it===pt){if(_t(),(it=yt())!==pt){rt!==at&&rt!==ct||(rt=ut);break}_t()}else{if(it===mt&&(rt===lt||rt===ct)){wt();break}rt===ut&&(rt=lt),_t()}return Q.slice(t+1,nt)||null}function Lt(){var t,e={};return rt=ut,e.name=Tt().trim(),rt=ct,(t=function(){var t=[];for(;!bt()&&rt!==ut;){var e=Tt();if(!e)break;t.push(St(e))}return t}()).length&&(e.args=t),e}function St(t){if(st.test(t))return{value:h(t),dynamic:!1};var e=p(t),n=e===t;return{value:n?t:e,dynamic:n}}function Dt(t){var e,n=ot.get(t);return n||(tt={},et=(Q=t).length,nt=-1,it="",rt=at,Q.indexOf("|")<0?tt.expression=Q.trim():(tt.expression=Tt().trim(),(e=function(){for(var t=[];!bt();)t.push(Lt());return t}()).length&&(tt.filters=e)),ot.put(t,tt),tt)}var Mt=Object.freeze({parseDirective:Dt}),At=/[-.*+?^${}()|[\]\/\\]/g,Pt=void 0,Nt=void 0,Ot=void 0;function It(t){return t.replace(At,"\\$&")}function Rt(){var t=It(Ht.delimiters[0]),e=It(Ht.delimiters[1]),n=It(Ht.unsafeDelimiters[0]),i=It(Ht.unsafeDelimiters[1]);Nt=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+t+"((?:.|\\n)+?)"+e,"g"),Ot=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),Pt=new K(1e3)}function jt(t){Pt||Rt();var e=Pt.get(t);if(e)return e;if(!Nt.test(t))return null;for(var n,i,r,o,s,a=[],u=Nt.lastIndex=0;n=Nt.exec(t);)(i=n.index)>u&&a.push({value:t.slice(u,i)}),o=(s=42===(o=(r=Ot.test(n[0]))?n[1]:n[2]).charCodeAt(0))?o.slice(1):o,a.push({tag:!0,value:o.trim(),html:r,oneTime:s}),u=i+n[0].length;return u<t.length&&a.push({value:t.slice(u)}),Pt.put(t,a),a}function Ft(t,e){return t.length>1?t.map(function(t){return qt(t,e)}).join("+"):qt(t[0],e,!0)}function qt(t,e,n){return t.tag?t.oneTime&&e?'"'+e.$eval(t.value)+'"':function(t,e){if(Bt.test(t)){var n=Dt(t);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+t+")"}return e?t:"("+t+")"}(t.value,n):'"'+t.value+'"'}var Bt=/[^|]\|[^|]/;var Ut=Object.freeze({compileRegex:Rt,parseText:jt,tokensToExp:Ft}),zt=["{{","}}"],Vt=["{{{","}}}"],Ht=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:!1,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return zt},set:function(t){zt=t,Rt()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return Vt},set:function(t){Vt=t,Rt()},configurable:!0,enumerable:!0}}),Wt=void 0;function Zt(t,e,n,i){Xt(t,1,function(){e.appendChild(t)},n,i)}function Gt(t,e,n,i){Xt(t,1,function(){ie(t,e)},n,i)}function Yt(t,e,n){Xt(t,-1,function(){oe(t)},e,n)}function Xt(t,e,n,i,r){var o=t.__v_trans;if(!o||!o.hooks&&!z||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(r&&r());o[e>0?"enter":"leave"](n,r)}var Kt=Object.freeze({appendWithTransition:Zt,beforeWithTransition:Gt,removeWithTransition:Yt,applyTransition:Xt});function Jt(t){if("string"==typeof t){t=document.querySelector(t)}return t}function Qt(t){if(!t)return!1;var e=t.ownerDocument.documentElement,n=t.parentNode;return e===t||e===n||!(!n||1!==n.nodeType||!e.contains(n))}function te(t,e){var n=t.getAttribute(e);return null!==n&&t.removeAttribute(e),n}function ee(t,e){var n=te(t,":"+e);return null===n&&(n=te(t,"v-bind:"+e)),n}function ne(t,e){return t.hasAttribute(e)||t.hasAttribute(":"+e)||t.hasAttribute("v-bind:"+e)}function ie(t,e){e.parentNode.insertBefore(t,e)}function re(t,e){e.nextSibling?ie(t,e.nextSibling):e.parentNode.appendChild(t)}function oe(t){t.parentNode.removeChild(t)}function se(t,e){e.firstChild?ie(t,e.firstChild):e.appendChild(t)}function ae(t,e){var n=t.parentNode;n&&n.replaceChild(e,t)}function ue(t,e,n,i){t.addEventListener(e,n,i)}function le(t,e,n){t.removeEventListener(e,n)}function ce(t){var e=t.className;return"object"==typeof e&&(e=e.baseVal||""),e}function he(t,e){F&&!/svg$/.test(t.namespaceURI)?t.className=e:t.setAttribute("class",e)}function de(t,e){if(t.classList)t.classList.add(e);else{var n=" "+ce(t)+" ";n.indexOf(" "+e+" ")<0&&he(t,(n+e).trim())}}function pe(t,e){if(t.classList)t.classList.remove(e);else{for(var n=" "+ce(t)+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");he(t,n.trim())}t.className||t.removeAttribute("class")}function fe(t,e){var n,i;if(ve(t)&&$e(t.content)&&(t=t.content),t.hasChildNodes())for(me(t),i=e?document.createDocumentFragment():document.createElement("div");n=t.firstChild;)i.appendChild(n);return i}function me(t){for(var e;ge(e=t.firstChild);)t.removeChild(e);for(;ge(e=t.lastChild);)t.removeChild(e)}function ge(t){return t&&(3===t.nodeType&&!t.data.trim()||8===t.nodeType)}function ve(t){return t.tagName&&"template"===t.tagName.toLowerCase()}function ye(t,e){var n=Ht.debug?document.createComment(t):document.createTextNode(e?" ":"");return n.__v_anchor=!0,n}var _e=/^v-ref:/;function be(t){if(t.hasAttributes())for(var e=t.attributes,n=0,i=e.length;n<i;n++){var r=e[n].name;if(_e.test(r))return m(r.replace(_e,""))}}function we(t,e,n){for(var i;t!==e;)i=t.nextSibling,n(t),t=i;n(e)}function xe(t,e,n,i,r){var o=!1,s=0,a=[];function u(){if(o&&++s>=a.length){for(var t=0;t<a.length;t++)i.appendChild(a[t]);r&&r()}}we(t,e,function(t){t===e&&(o=!0),a.push(t),Yt(t,n,u)})}function $e(t){return t&&11===t.nodeType}function ke(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}var Ee=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Ce=/^(slot|partial|component)$/i;function Te(t,e){var n=t.tagName.toLowerCase(),i=t.hasAttributes();if(Ee.test(n)||Ce.test(n)){if(i)return Le(t,e)}else{if(Oe(e,"components",n))return{id:n};var r=i&&Le(t,e);if(r)return r}}function Le(t,e){var n=t.getAttribute("is");if(null!=n){if(Oe(e,"components",n))return t.removeAttribute("is"),{id:n}}else if(null!=(n=ee(t,"is")))return{id:n,dynamic:!0}}var Se=Ht.optionMergeStrategies=Object.create(null);function De(t,e){var n,r,o;for(n in e)r=t[n],o=e[n],s(t,n)?k(r)&&k(o)&&De(r,o):i(t,n,o);return t}function Me(t,e){var n=Object.create(t||null);return e?$(n,Pe(e)):n}Se.data=function(t,e,n){return n?t||e?function(){var i="function"==typeof e?e.call(n):e,r="function"==typeof t?t.call(n):void 0;return i?De(i,r):r}:void 0:e?"function"!=typeof e?t:t?function(){return De(e.call(this),t.call(this))}:e:t},Se.el=function(t,e,n){if(n||!e||"function"==typeof e){var i=e||t;return n&&"function"==typeof i?i.call(n):i}},Se.init=Se.created=Se.ready=Se.attached=Se.detached=Se.beforeCompile=Se.compiled=Se.beforeDestroy=Se.destroyed=Se.activate=function(t,e){return e?t?t.concat(e):L(e)?e:[e]:t},Ht._assetTypes.forEach(function(t){Se[t+"s"]=Me}),Se.watch=Se.events=function(t,e){if(!e)return t;if(!t)return e;var n={};for(var i in $(n,t),e){var r=n[i],o=e[i];r&&!L(r)&&(r=[r]),n[i]=r?r.concat(o):[o]}return n},Se.props=Se.methods=Se.computed=function(t,e){if(!e)return t;if(!t)return e;var n=Object.create(null);return $(n,t),$(n,e),n};var Ae=function(t,e){return void 0===e?t:e};function Pe(t){if(L(t)){for(var e,n={},i=t.length;i--;){var r="function"==typeof(e=t[i])?e.options&&e.options.name||e.id:e.name||e.id;r&&(n[r]=e)}return n}return t}function Ne(t,e,n){!function(t){if(t.components)for(var e,n=t.components=Pe(t.components),i=Object.keys(n),r=0,o=i.length;r<o;r++){var s=i[r];Ee.test(s)||Ce.test(s)||T(e=n[s])&&(n[s]=qr.extend(e))}}(e),function(t){var e,n,i=t.props;if(L(i))for(t.props={},e=i.length;e--;)"string"==typeof(n=i[e])?t.props[n]=null:n.name&&(t.props[n.name]=n);else if(T(i)){var r=Object.keys(i);for(e=r.length;e--;)"function"==typeof(n=i[r[e]])&&(i[r[e]]={type:n})}}(e);var i,r={};if(e.extends&&(t="function"==typeof e.extends?Ne(t,e.extends.options,n):Ne(t,e.extends,n)),e.mixins)for(var o=0,a=e.mixins.length;o<a;o++){var u=e.mixins[o],l=u.prototype instanceof qr?u.options:u;t=Ne(t,l,n)}for(i in t)c(i);for(i in e)s(t,i)||c(i);function c(i){var o=Se[i]||Ae;r[i]=o(t[i],e[i],n,i)}return r}function Oe(t,e,n,i){if("string"==typeof n){var r,o=t[e];return o[n]||o[r=m(n)]||o[r.charAt(0).toUpperCase()+r.slice(1)]}}var Ie=0;function Re(){this.id=Ie++,this.subs=[]}Re.target=null,Re.prototype.addSub=function(t){this.subs.push(t)},Re.prototype.removeSub=function(t){this.subs.$remove(t)},Re.prototype.depend=function(){Re.target.addDep(this)},Re.prototype.notify=function(){for(var t=x(this.subs),e=0,n=t.length;e<n;e++)t[e].update()};var je=Array.prototype,Fe=Object.create(je);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=je[t];S(Fe,t,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var r,o=e.apply(this,i),s=this.__ob__;switch(t){case"push":case"unshift":r=i;break;case"splice":r=i.slice(2)}return r&&s.observeArray(r),s.dep.notify(),o})}),S(je,"$set",function(t,e){return t>=this.length&&(this.length=Number(t)+1),this.splice(t,1,e)[0]}),S(je,"$remove",function(t){if(this.length){var e=M(this,t);return e>-1?this.splice(e,1):void 0}});var qe=Object.getOwnPropertyNames(Fe),Be=!0;function Ue(t){Be=!1,t(),Be=!0}function ze(t){(this.value=t,this.dep=new Re,S(t,"__ob__",this),L(t))?((N?Ve:He)(t,Fe,qe),this.observeArray(t)):this.walk(t)}function Ve(t,e){t.__proto__=e}function He(t,e,n){for(var i=0,r=n.length;i<r;i++){var o=n[i];S(t,o,e[o])}}function We(t,e){var n;if(t&&"object"==typeof t)return s(t,"__ob__")&&t.__ob__ instanceof ze?n=t.__ob__:Be&&(L(t)||T(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new ze(t)),n&&e&&n.addVm(e),n}function Ze(t,e,n){var i=new Re,r=Object.getOwnPropertyDescriptor(t,e);if(!r||!1!==r.configurable){var o=r&&r.get,s=r&&r.set,a=We(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=o?o.call(t):n;if(Re.target&&(i.depend(),a&&a.dep.depend(),L(e)))for(var r,s=0,u=e.length;s<u;s++)(r=e[s])&&r.__ob__&&r.__ob__.dep.depend();return e},set:function(e){e!==(o?o.call(t):n)&&(s?s.call(t,e):n=e,a=We(e),i.notify())}})}}ze.prototype.walk=function(t){for(var e=Object.keys(t),n=0,i=e.length;n<i;n++)this.convert(e[n],t[e[n]])},ze.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)We(t[e])},ze.prototype.convert=function(t,e){Ze(this.value,t,e)},ze.prototype.addVm=function(t){(this.vms||(this.vms=[])).push(t)},ze.prototype.removeVm=function(t){this.vms.$remove(t)};var Ge=Object.freeze({defineReactive:Ze,set:i,del:r,hasOwn:s,isLiteral:u,isReserved:l,_toString:c,toNumber:h,toBoolean:d,stripQuotes:p,camelize:m,hyphenate:y,classify:b,bind:w,toArray:x,extend:$,isObject:k,isPlainObject:T,def:S,debounce:D,indexOf:M,cancellable:A,looseEqual:P,isArray:L,hasProto:N,inBrowser:O,devtools:I,isIE:j,isIE9:F,isAndroid:q,isIOS:B,get transitionProp(){return U},get transitionEndEvent(){return z},get animationProp(){return V},get animationEndEvent(){return H},nextTick:Y,get _Set(){return X},query:Jt,inDoc:Qt,getAttr:te,getBindAttr:ee,hasBindAttr:ne,before:ie,after:re,remove:oe,prepend:se,replace:ae,on:ue,off:le,setClass:he,addClass:de,removeClass:pe,extractContent:fe,trimNode:me,isTemplate:ve,createAnchor:ye,findRef:be,mapNodeRange:we,removeNodeRange:xe,isFragment:$e,getOuterHTML:ke,mergeOptions:Ne,resolveAsset:Oe,checkComponentAttr:Te,commonTagRE:Ee,reservedTagRE:Ce,get warn(){return Wt}}),Ye=0;var Xe=new K(1e3),Ke=0,Je=1,Qe=2,tn=3,en=0,nn=4,rn=5,on=6,sn=7,an=8,un=[];function ln(t){if(void 0===t)return"eof";var e=t.charCodeAt(0);switch(e){case 91:case 93:case 46:case 34:case 39:case 48:return t;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return e>=97&&e<=122||e>=65&&e<=90?"ident":e>=49&&e<=57?"number":"else"}function cn(t){var e,n,i,r,o,s,a,l=[],c=-1,h=en,d=0,f=[];function m(){var e=t[c+1];if(h===rn&&"'"===e||h===on&&'"'===e)return c++,n="\\"+e,f[Ke](),!0}for(f[Je]=function(){void 0!==i&&(l.push(i),i=void 0)},f[Ke]=function(){void 0===i?i=n:i+=n},f[Qe]=function(){f[Ke](),d++},f[tn]=function(){if(d>0)d--,h=nn,f[Ke]();else{if(d=0,!1===(i=function(t){var e=t.trim();return("0"!==t.charAt(0)||!isNaN(t))&&(u(e)?p(e):"*"+e)}(i)))return!1;f[Je]()}};null!=h;)if("\\"!==(e=t[++c])||!m()){if(r=ln(e),(o=(a=un[h])[r]||a.else||an)===an)return;if(h=o[0],(s=f[o[1]])&&(n=void 0===(n=o[2])?e:n,!1===s()))return;if(h===sn)return l.raw=t,l}}function hn(t){var e=Xe.get(t);return e||(e=cn(t))&&Xe.put(t,e),e}function dn(t,e){return An(e).get(t)}function pn(t,e,n){var r,o,s=t;if("string"==typeof e&&(e=cn(e)),!e||!k(t))return!1;for(var a=0,u=e.length;a<u;a++)r=t,"*"===(o=e[a]).charAt(0)&&(o=An(o.slice(1)).get.call(s,s)),a<u-1?k(t=t[o])||i(r,o,t={}):L(t)?t.$set(o,n):o in t?t[o]=n:i(t,o,n);return!0}un[en]={ws:[en],ident:[3,Ke],"[":[nn],eof:[sn]},un[1]={ws:[1],".":[2],"[":[nn],eof:[sn]},un[2]={ws:[2],ident:[3,Ke]},un[3]={ident:[3,Ke],0:[3,Ke],number:[3,Ke],ws:[1,Je],".":[2,Je],"[":[nn,Je],eof:[sn,Je]},un[nn]={"'":[rn,Ke],'"':[on,Ke],"[":[nn,Qe],"]":[1,tn],eof:an,else:[nn,Ke]},un[rn]={"'":[nn,Ke],eof:an,else:[rn,Ke]},un[on]={'"':[nn,Ke],eof:an,else:[on,Ke]};var fn=Object.freeze({parsePath:hn,getPath:dn,setPath:pn}),mn=new K(1e3),gn=new RegExp("^("+"Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat".replace(/,/g,"\\b|")+"\\b)"),vn=new RegExp("^("+"break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public".replace(/,/g,"\\b|")+"\\b)"),yn=/\s/g,_n=/\n/g,bn=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\"']|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,wn=/"(\d+)"/g,xn=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,$n=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,kn=/^(?:true|false|null|undefined|Infinity|NaN)$/;function En(){}var Cn=[];function Tn(t,e){var n=Cn.length;return Cn[n]=e?t.replace(_n,"\\n"):t,'"'+n+'"'}function Ln(t){var e=t.charAt(0),n=t.slice(1);return gn.test(n)?t:e+"scope."+(n=n.indexOf('"')>-1?n.replace(wn,Sn):n)}function Sn(t,e){return Cn[e]}function Dn(t){try{return new Function("scope","return "+t+";")}catch(t){return En}}function Mn(t){var e=hn(t);if(e)return function(t,n){pn(t,e,n)}}function An(t,e){t=t.trim();var n=mn.get(t);if(n)return e&&!n.set&&(n.set=Mn(n.exp)),n;var i={exp:t};return i.get=Pn(t)&&t.indexOf("[")<0?Dn("scope."+t):function(t){vn.test(t),Cn.length=0;var e=t.replace(bn,Tn).replace(yn,"");return Dn(e=(" "+e).replace($n,Ln).replace(wn,Sn))}(t),e&&(i.set=Mn(t)),mn.put(t,i),i}function Pn(t){return xn.test(t)&&!kn.test(t)&&"Math."!==t.slice(0,5)}var Nn=Object.freeze({parseExpression:An,isSimplePath:Pn}),On=[],In=[],Rn={},jn=!1;function Fn(){for(var t=!0;t;)t=!1,qn(On),qn(In),On.length?t=!0:(I&&Ht.devtools&&I.emit("flush"),On.length=0,In.length=0,Rn={},{},jn=!1)}function qn(t){for(var e=0;e<t.length;e++){var n=t[e],i=n.id;Rn[i]=null,n.run()}t.length=0}var Bn=0;function Un(t,e,n,i){i&&$(this,i);var r="function"==typeof e;if(this.vm=t,t._watchers.push(this),this.expression=e,this.cb=n,this.id=++Bn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new X,this.newDepIds=new X,this.prevError=null,r)this.getter=e,this.setter=void 0;else{var o=An(e,this.twoWay);this.getter=o.get,this.setter=o.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}Un.prototype.get=function(){this.beforeGet();var t,e=this.scope||this.vm;try{t=this.getter.call(e,e)}catch(t){0}return this.deep&&function t(e,n){var i=void 0,r=void 0;n||(n=zn).clear();var o=L(e);var s=k(e);if((o||s)&&Object.isExtensible(e)){if(e.__ob__){var a=e.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(o)for(i=e.length;i--;)t(e[i],n);else if(s)for(r=Object.keys(e),i=r.length;i--;)t(e[r[i]],n)}}(t),this.preProcess&&(t=this.preProcess(t)),this.filters&&(t=e._applyFilters(t,null,this.filters,!1)),this.postProcess&&(t=this.postProcess(t)),this.afterGet(),t},Un.prototype.set=function(t){var e=this.scope||this.vm;this.filters&&(t=e._applyFilters(t,this.value,this.filters,!0));try{this.setter.call(e,e,t)}catch(t){0}var n=e.$forContext;if(n&&n.alias===this.expression){if(n.filters)return;n._withLock(function(){e.$key?n.rawValue[e.$key]=t:n.rawValue.$set(e.$index,t)})}},Un.prototype.beforeGet=function(){Re.target=this},Un.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},Un.prototype.afterGet=function(){Re.target=null;for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Un.prototype.update=function(t){this.lazy?this.dirty=!0:this.sync||!Ht.async?this.run():(this.shallow=this.queued?!!t&&this.shallow:!!t,this.queued=!0,function(t){var e=t.id;if(null==Rn[e]){var n=t.user?In:On;Rn[e]=n.length,n.push(t),jn||(jn=!0,Y(Fn))}}(this))},Un.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||(k(t)||this.deep)&&!this.shallow){var e=this.value;this.value=t;this.prevError;this.cb.call(this.vm,t,e)}this.queued=this.shallow=!1}},Un.prototype.evaluate=function(){var t=Re.target;this.value=this.get(),this.dirty=!1,Re.target=t},Un.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},Un.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var zn=new X;var Vn={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(t){this.el[this.attr]=c(t)}},Hn=new K(1e3),Wn=new K(1e3),Zn={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};function Gn(t){return ve(t)&&$e(t.content)}Zn.td=Zn.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Zn.option=Zn.optgroup=[1,'<select multiple="multiple">',"</select>"],Zn.thead=Zn.tbody=Zn.colgroup=Zn.caption=Zn.tfoot=[1,"<table>","</table>"],Zn.g=Zn.defs=Zn.symbol=Zn.use=Zn.image=Zn.text=Zn.circle=Zn.ellipse=Zn.line=Zn.path=Zn.polygon=Zn.polyline=Zn.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Yn=/<([\w:-]+)/,Xn=/&#?\w+?;/,Kn=/<!--/;function Jn(t,e){var n=e?t:t.trim(),i=Hn.get(n);if(i)return i;var r=document.createDocumentFragment(),o=t.match(Yn),s=Xn.test(t),a=Kn.test(t);if(o||s||a){var u,l=o&&o[1],c=Zn[l]||Zn.efault,h=c[0],d=c[1],p=c[2],f=document.createElement("div");for(f.innerHTML=d+t+p;h--;)f=f.lastChild;for(;u=f.firstChild;)r.appendChild(u)}else r.appendChild(document.createTextNode(t));return e||me(r),Hn.put(n,r),r}function Qn(t){if(Gn(t))return Jn(t.innerHTML);if("SCRIPT"===t.tagName)return Jn(t.textContent);for(var e,n=ni(t),i=document.createDocumentFragment();e=n.firstChild;)i.appendChild(e);return me(i),i}var ti=function(){if(O){var t=document.createElement("div");return t.innerHTML="<template>1</template>",!t.cloneNode(!0).firstChild.innerHTML}return!1}(),ei=function(){if(O){var t=document.createElement("textarea");return t.placeholder="t","t"===t.cloneNode(!0).value}return!1}();function ni(t){if(!t.querySelectorAll)return t.cloneNode();var e,n,i,r=t.cloneNode(!0);if(ti){var o=r;if(Gn(t)&&(t=t.content,o=r.content),(n=t.querySelectorAll("template")).length)for(e=(i=o.querySelectorAll("template")).length;e--;)i[e].parentNode.replaceChild(ni(n[e]),i[e])}if(ei)if("TEXTAREA"===t.tagName)r.value=t.value;else if((n=t.querySelectorAll("textarea")).length)for(e=(i=r.querySelectorAll("textarea")).length;e--;)i[e].value=n[e].value;return r}function ii(t,e,n){var i,r;return $e(t)?(me(t),e?ni(t):t):("string"==typeof t?n||"#"!==t.charAt(0)?r=Jn(t,n):(r=Wn.get(t))||(i=document.getElementById(t.slice(1)))&&(r=Qn(i),Wn.put(t,r)):t.nodeType&&(r=Qn(t)),r&&e?ni(r):r)}var ri=Object.freeze({cloneNode:ni,parseTemplate:ii}),oi={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=ye("v-html"),ae(this.el,this.anchor))},update:function(t){t=c(t),this.nodes?this.swap(t):this.el.innerHTML=t},swap:function(t){for(var e=this.nodes.length;e--;)oe(this.nodes[e]);var n=ii(t,!0,!0);this.nodes=x(n.childNodes),ie(n,this.anchor)}};function si(t,e,n,i,r,o){this.children=[],this.childFrags=[],this.vm=e,this.scope=r,this.inserted=!1,this.parentFrag=o,o&&o.childFrags.push(this),this.unlink=t(e,n,i,r,this),(this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor)?(this.node=n.childNodes[0],this.before=ai,this.remove=ui):(this.node=ye("fragment-start"),this.end=ye("fragment-end"),this.frag=n,se(this.node,n),n.appendChild(this.end),this.before=li,this.remove=ci),this.node.__v_frag=this}function ai(t,e){this.inserted=!0,(!1!==e?Gt:ie)(this.node,t,this.vm),Qt(this.node)&&this.callHook(hi)}function ui(){this.inserted=!1;var t=Qt(this.node),e=this;this.beforeRemove(),Yt(this.node,this.vm,function(){t&&e.callHook(di),e.destroy()})}function li(t,e){this.inserted=!0;var n=this.vm,i=!1!==e?Gt:ie;we(this.node,this.end,function(e){i(e,t,n)}),Qt(this.node)&&this.callHook(hi)}function ci(){this.inserted=!1;var t=this,e=Qt(this.node);this.beforeRemove(),xe(this.node,this.end,this.vm,this.frag,function(){e&&t.callHook(di),t.destroy()})}function hi(t){!t._isAttached&&Qt(t.$el)&&t._callHook("attached")}function di(t){t._isAttached&&!Qt(t.$el)&&t._callHook("detached")}si.prototype.callHook=function(t){var e,n;for(e=0,n=this.childFrags.length;e<n;e++)this.childFrags[e].callHook(t);for(e=0,n=this.children.length;e<n;e++)t(this.children[e])},si.prototype.beforeRemove=function(){var t,e;for(t=0,e=this.childFrags.length;t<e;t++)this.childFrags[t].beforeRemove(!1);for(t=0,e=this.children.length;t<e;t++)this.children[t].$destroy(!1,!0);var n=this.unlink.dirs;for(t=0,e=n.length;t<e;t++)n[t]._watcher&&n[t]._watcher.teardown()},si.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var pi=new K(5e3);function fi(t,e){var n;this.vm=t;var i,r="string"==typeof e;r||ve(e)&&!e.hasAttribute("v-if")?n=ii(e,!0):(n=document.createDocumentFragment()).appendChild(e),this.template=n;var o=t.constructor.cid;if(o>0){var s=o+(r?e:ke(e));(i=pi.get(s))||(i=gr(n,t.$options,!0),pi.put(s,i))}else i=gr(n,t.$options,!0);this.linker=i}fi.prototype.create=function(t,e,n){var i=ni(this.template);return new si(this.linker,this.vm,i,t,e,n)};var mi=0,gi={priority:2200,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var t=this.expression.match(/(.*) (?:in|of) (.*)/);if(t){var e=t[1].match(/\((.*),(.*)\)/);e?(this.iterator=e[1].trim(),this.alias=e[2].trim()):this.alias=t[1].trim(),this.expression=t[2]}if(this.alias){this.id="__v-for__"+ ++mi;var n=this.el.tagName;this.isOption=("OPTION"===n||"OPTGROUP"===n)&&"SELECT"===this.el.parentNode.tagName,this.start=ye("v-for-start"),this.end=ye("v-for-end"),ae(this.el,this.end),ie(this.start,this.end),this.cache=Object.create(null),this.factory=new fi(this.vm,this.el)}},update:function(t){this.diff(t),this.updateRef(),this.updateModel()},diff:function(t){var e,n,i,r,o,a,u=t[0],l=this.fromObject=k(u)&&s(u,"$key")&&s(u,"$value"),c=this.params.trackBy,h=this.frags,d=this.frags=new Array(t.length),p=this.alias,f=this.iterator,m=this.start,g=this.end,v=Qt(m),y=!h;for(e=0,n=t.length;e<n;e++)u=t[e],r=l?u.$key:null,a=!k(o=l?u.$value:u),(i=!y&&this.getCachedFrag(o,e,r))?(i.reused=!0,i.scope.$index=e,r&&(i.scope.$key=r),f&&(i.scope[f]=null!==r?r:e),(c||l||a)&&Ue(function(){i.scope[p]=o})):(i=this.create(o,p,e,r)).fresh=!y,d[e]=i,y&&i.before(g);if(!y){var _,b,w,x=0,$=h.length-d.length;for(this.vm._vForRemoving=!0,e=0,n=h.length;e<n;e++)(i=h[e]).reused||(this.deleteCachedFrag(i),this.remove(i,x++,$,v));this.vm._vForRemoving=!1,x&&(this.vm._watchers=this.vm._watchers.filter(function(t){return t.active}));var E=0;for(e=0,n=d.length;e<n;e++)i=d[e],b=(_=d[e-1])?_.staggerCb?_.staggerAnchor:_.end||_.node:m,i.reused&&!i.staggerCb?(w=vi(i,m,this.id))===_||w&&vi(w,m,this.id)===_||this.move(i,b):this.insert(i,E++,b,v),i.reused=i.fresh=!1}},create:function(t,e,n,i){var r=this._host,o=this._scope||this.vm,s=Object.create(o);s.$refs=Object.create(o.$refs),s.$els=Object.create(o.$els),s.$parent=o,s.$forContext=this,Ue(function(){Ze(s,e,t)}),Ze(s,"$index",n),i?Ze(s,"$key",i):s.$key&&S(s,"$key",null),this.iterator&&Ze(s,this.iterator,null!==i?i:n);var a=this.factory.create(r,s,this._frag);return a.forId=this.id,this.cacheFrag(t,a,n,i),a},updateRef:function(){var t=this.descriptor.ref;if(t){var e,n=(this._scope||this.vm).$refs;this.fromObject?(e={},this.frags.forEach(function(t){e[t.scope.$key]=_i(t)})):e=this.frags.map(_i),n[t]=e}},updateModel:function(){if(this.isOption){var t=this.start.parentNode,e=t&&t.__v_model;e&&e.forceUpdate()}},insert:function(t,e,n,i){t.staggerCb&&(t.staggerCb.cancel(),t.staggerCb=null);var r=this.getStagger(t,e,null,"enter");if(i&&r){var o=t.staggerAnchor;o||((o=t.staggerAnchor=ye("stagger-anchor")).__v_frag=t),re(o,n);var s=t.staggerCb=A(function(){t.staggerCb=null,t.before(o),oe(o)});setTimeout(s,r)}else{var a=n.nextSibling;a||(re(this.end,n),a=this.end),t.before(a)}},remove:function(t,e,n,i){if(t.staggerCb)return t.staggerCb.cancel(),void(t.staggerCb=null);var r=this.getStagger(t,e,n,"leave");if(i&&r){var o=t.staggerCb=A(function(){t.staggerCb=null,t.remove()});setTimeout(o,r)}else t.remove()},move:function(t,e){e.nextSibling||this.end.parentNode.appendChild(this.end),t.before(e.nextSibling,!1)},cacheFrag:function(t,e,n,i){var r,o=this.params.trackBy,a=this.cache,u=!k(t);i||o||u?a[r=yi(n,i,t,o)]||(a[r]=e):s(t,r=this.id)?null===t[r]&&(t[r]=e):Object.isExtensible(t)&&S(t,r,e),e.raw=t},getCachedFrag:function(t,e,n){var i,r=this.params.trackBy,o=!k(t);if(n||r||o){var s=yi(e,n,t,r);i=this.cache[s]}else i=t[this.id];return i&&(i.reused||i.fresh),i},deleteCachedFrag:function(t){var e=t.raw,n=this.params.trackBy,i=t.scope,r=i.$index,o=s(i,"$key")&&i.$key,a=!k(e);if(n||o||a){var u=yi(r,o,e,n);this.cache[u]=null}else e[this.id]=null,t.raw=null},getStagger:function(t,e,n,i){i+="Stagger";var r=t.node.__v_trans,o=r&&r.hooks,s=o&&(o[i]||o.stagger);return s?s.call(t,e,n):e*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(t){return this.rawValue=t,t},_postProcess:function(t){if(L(t))return t;if(T(t)){for(var e,n=Object.keys(t),i=n.length,r=new Array(i);i--;)e=n[i],r[i]={$key:e,$value:t[e]};return r}return"number"!=typeof t||isNaN(t)||(t=function(t){var e=-1,n=new Array(Math.floor(t));for(;++e<t;)n[e]=e;return n}(t)),t||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var t,e=this.frags.length;e--;)t=this.frags[e],this.deleteCachedFrag(t),t.destroy()}};function vi(t,e,n){var i=t.node.previousSibling;if(i){for(t=i.__v_frag;!(t&&t.forId===n&&t.inserted||i===e);){if(!(i=i.previousSibling))return;t=i.__v_frag}return t}}function yi(t,e,n,i){return i?"$index"===i?t:i.charAt(0).match(/\w/)?dn(n,i):n[i]:e||n}function _i(t){var e=t.node;if(t.end)for(;!e.__vue__&&e!==t.end&&e.nextSibling;)e=e.nextSibling;return e.__vue__}var bi={priority:2100,terminal:!0,bind:function(){var t=this.el;if(t.__vue__)this.invalid=!0;else{var e=t.nextElementSibling;e&&null!==te(e,"v-else")&&(oe(e),this.elseEl=e),this.anchor=ye("v-if"),ae(t,this.anchor)}},update:function(t){this.invalid||(t?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new fi(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new fi(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},wi={bind:function(){var t=this.el.nextElementSibling;t&&null!==te(t,"v-else")&&(this.elseEl=t)},update:function(t){this.apply(this.el,t),this.elseEl&&this.apply(this.elseEl,!t)},apply:function(t,e){function n(){t.style.display=e?"":"none"}Qt(t)?Xt(t,e?1:-1,n,this.vm):n()}};function xi(t,e,n){for(var i,r,o=e?[]:null,s=0,a=t.options.length;s<a;s++)if(i=t.options[s],n?i.hasAttribute("selected"):i.selected){if(r=i.hasOwnProperty("_value")?i._value:i.value,!e)return r;o.push(r)}return o}function $i(t,e){for(var n=t.length;n--;)if(P(t[n],e))return n;return-1}var ki={text:{bind:function(){var t=this,e=this.el,n="range"===e.type,i=this.params.lazy,r=this.params.number,o=this.params.debounce,s=!1;if(q||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||t.listener()})),this.focused=!1,n||i||(this.on("focus",function(){t.focused=!0}),this.on("blur",function(){t.focused=!1,t._frag&&!t._frag.inserted||t.rawListener()})),this.listener=this.rawListener=function(){if(!s&&t._bound){var i=r||n?h(e.value):e.value;t.set(i),Y(function(){t._bound&&!t.focused&&t.update(t._watcher.value)})}},o&&(this.listener=D(this.listener,o)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(e)[a]("change",this.rawListener),i||jQuery(e)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&F&&(this.on("cut",function(){Y(t.listener)}),this.on("keyup",function(e){46!==e.keyCode&&8!==e.keyCode||t.listener()})),(e.hasAttribute("value")||"TEXTAREA"===e.tagName&&e.value.trim())&&(this.afterBind=this.listener)},update:function(t){(t=c(t))!==this.el.value&&(this.el.value=t)},unbind:function(){var t=this.el;if(this.hasjQuery){var e=jQuery.fn.off?"off":"unbind";jQuery(t)[e]("change",this.listener),jQuery(t)[e]("input",this.listener)}}},radio:{bind:function(){var t=this,e=this.el;this.getValue=function(){if(e.hasOwnProperty("_value"))return e._value;var n=e.value;return t.params.number&&(n=h(n)),n},this.listener=function(){t.set(t.getValue())},this.on("change",this.listener),e.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(t){this.el.checked=P(t,this.getValue())}},select:{bind:function(){var t=this,e=this,n=this.el;this.forceUpdate=function(){e._watcher&&e.update(e._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var t=xi(n,i);t=e.params.number?L(t)?t.map(h):h(t):t,e.set(t)},this.on("change",this.listener);var r=xi(n,i,!0);(i&&r.length||!i&&null!==r)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){Y(t.forceUpdate)}),Qt(n)||Y(this.forceUpdate)},update:function(t){var e=this.el;e.selectedIndex=-1;for(var n,i,r=this.multiple&&L(t),o=e.options,s=o.length;s--;)i=(n=o[s]).hasOwnProperty("_value")?n._value:n.value,n.selected=r?$i(t,i)>-1:P(t,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},checkbox:{bind:function(){var t=this,e=this.el;this.getValue=function(){return e.hasOwnProperty("_value")?e._value:t.params.number?h(e.value):e.value},this.listener=function(){var n=t._watcher.get();if(L(n)){var i=t.getValue(),r=M(n,i);e.checked?r<0&&t.set(n.concat(i)):r>-1&&t.set(n.slice(0,r).concat(n.slice(r+1)))}else t.set(function(){var t=e.checked;return t&&e.hasOwnProperty("_trueValue")?e._trueValue:!t&&e.hasOwnProperty("_falseValue")?e._falseValue:t}())},this.on("change",this.listener),e.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(t){var e=this.el;L(t)?e.checked=M(t,this.getValue())>-1:e.hasOwnProperty("_trueValue")?e.checked=P(t,e._trueValue):e.checked=!!t}}},Ei={priority:800,twoWay:!0,handlers:ki,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&this.hasWrite;var t,e=this.el,n=e.tagName;if("INPUT"===n)t=ki[e.type]||ki.text;else if("SELECT"===n)t=ki.select;else{if("TEXTAREA"!==n)return;t=ki.text}e.__v_model=this,t.bind.call(this),this.update=t.update,this._unbind=t.unbind},checkFilters:function(){var t=this.filters;if(t)for(var e=t.length;e--;){var n=Oe(this.vm.$options,"filters",t[e].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},Ci={esc:27,tab:9,enter:13,space:32,delete:[8,46],up:38,left:37,right:39,down:40};var Ti={priority:700,acceptStatement:!0,keyCodes:Ci,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var t=this;this.iframeBind=function(){ue(t.el.contentWindow,t.arg,t.handler,t.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(t){if(this.descriptor.raw||(t=function(){}),"function"==typeof t){this.modifiers.stop&&(t=function(t){return function(e){return e.stopPropagation(),t.call(this,e)}}(t)),this.modifiers.prevent&&(t=function(t){return function(e){return e.preventDefault(),t.call(this,e)}}(t)),this.modifiers.self&&(t=function(t){return function(e){if(e.target===e.currentTarget)return t.call(this,e)}}(t));var e=Object.keys(this.modifiers).filter(function(t){return"stop"!==t&&"prevent"!==t&&"self"!==t&&"capture"!==t});e.length&&(t=function(t,e){var n=e.map(function(t){var e=t.charCodeAt(0);return e>47&&e<58?parseInt(t,10):1===t.length&&(e=t.toUpperCase().charCodeAt(0))>64&&e<91?e:Ci[t]});return n=[].concat.apply([],n),function(e){if(n.indexOf(e.keyCode)>-1)return t.call(this,e)}}(t,e)),this.reset(),this.handler=t,this.iframeBind?this.iframeBind():ue(this.el,this.arg,this.handler,this.modifiers.capture)}},reset:function(){var t=this.iframeBind?this.el.contentWindow:this.el;this.handler&&le(t,this.arg,this.handler)},unbind:function(){this.reset()}},Li=["-webkit-","-moz-","-ms-"],Si=["Webkit","Moz","ms"],Di=/!important;?$/,Mi=Object.create(null),Ai=null,Pi={deep:!0,update:function(t){"string"==typeof t?this.el.style.cssText=t:L(t)?this.handleObject(t.reduce($,{})):this.handleObject(t||{})},handleObject:function(t){var e,n,i=this.cache||(this.cache={});for(e in i)e in t||(this.handleSingle(e,null),delete i[e]);for(e in t)(n=t[e])!==i[e]&&(i[e]=n,this.handleSingle(e,n))},handleSingle:function(t,e){if(t=function(t){if(Mi[t])return Mi[t];var e=function(t){var e=m(t=y(t)),n=e.charAt(0).toUpperCase()+e.slice(1);Ai||(Ai=document.createElement("div"));var i,r=Li.length;if("filter"!==e&&e in Ai.style)return{kebab:t,camel:e};for(;r--;)if((i=Si[r]+n)in Ai.style)return{kebab:Li[r]+t,camel:i}}(t);return Mi[t]=Mi[e]=e,e}(t))if(null!=e&&(e+=""),e){var n=Di.test(e)?"important":"";n?(e=e.replace(Di,"").trim(),this.el.style.setProperty(t.kebab,e,n)):this.el.style[t.camel]=e}else this.el.style[t.camel]=""}};var Ni=/^xlink:/,Oi=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,Ii=/^(?:value|checked|selected|muted)$/,Ri=/^(?:draggable|contenteditable|spellcheck)$/,ji={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Fi={text:Vn,html:oi,for:gi,if:bi,show:wi,model:Ei,on:Ti,bind:{priority:850,bind:function(){var t=this.arg,e=this.el.tagName;t||(this.deep=!0);var n=this.descriptor,i=n.interp;i&&(n.hasOneTime&&(this.expression=Ft(i,this._scope||this.vm)),(Oi.test(t)||"name"===t&&("PARTIAL"===e||"SLOT"===e))&&(this.el.removeAttribute(t),this.invalid=!0))},update:function(t){if(!this.invalid){var e=this.arg;this.arg?this.handleSingle(e,t):this.handleObject(t||{})}},handleObject:Pi.handleObject,handleSingle:function(t,e){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(t=m(t)),!i&&Ii.test(t)&&t in n){var r="value"===t&&null==e?"":e;n[t]!==r&&(n[t]=r)}var o=ji[t];if(!i&&o){n[o]=e;var s=n.__v_model;s&&s.listener()}"value"!==t||"TEXTAREA"!==n.tagName?Ri.test(t)?n.setAttribute(t,e?"true":"false"):null!=e&&!1!==e?"class"===t?(n.__v_trans&&(e+=" "+n.__v_trans.id+"-transition"),he(n,e)):Ni.test(t)?n.setAttributeNS("http://www.w3.org/1999/xlink",t,!0===e?"":e):n.setAttribute(t,!0===e?"":e):n.removeAttribute(t):n.removeAttribute(t)}},el:{priority:1500,bind:function(){if(this.arg){var t=this.id=m(this.arg),e=(this._scope||this.vm).$els;s(e,t)?e[t]=this.el:Ze(e,t,this.el)}},unbind:function(){var t=(this._scope||this.vm).$els;t[this.id]===this.el&&(t[this.id]=null)}},ref:{bind:function(){}},cloak:{bind:function(){var t=this.el;this.vm.$once("pre-hook:compiled",function(){t.removeAttribute("v-cloak")})}}},qi={deep:!0,update:function(t){t?"string"==typeof t?this.setClass(t.trim().split(/\s+/)):this.setClass(function(t){var e=[];if(L(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];if(r)if("string"==typeof r)e.push(r);else for(var o in r)r[o]&&e.push(o)}else if(k(t))for(var s in t)t[s]&&e.push(s);return e}(t)):this.cleanup()},setClass:function(t){this.cleanup(t);for(var e=0,n=t.length;e<n;e++){var i=t[e];i&&Bi(this.el,i,de)}this.prevKeys=t},cleanup:function(t){var e=this.prevKeys;if(e)for(var n=e.length;n--;){var i=e[n];(!t||t.indexOf(i)<0)&&Bi(this.el,i,pe)}}};function Bi(t,e,n){if(-1!==(e=e.trim()).indexOf(" "))for(var i=e.split(/\s+/),r=0,o=i.length;r<o;r++)n(t,i[r]);else n(t,e)}var Ui={priority:1500,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__||(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=fe(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=ye("v-component"),ae(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+y(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(t){this.literal||this.setComponent(t)},setComponent:function(t,e){if(this.invalidatePending(),t){var n=this;this.resolveComponent(t,function(){n.mountComponent(e)})}else this.unbuild(!0),this.remove(this.childVM,e),this.childVM=null},resolveComponent:function(t,e){var n=this;this.pendingComponentCb=A(function(i){n.ComponentName=i.options.name||("string"==typeof t?t:null),n.Component=i,e()}),this.vm._resolveComponent(t,this.pendingComponentCb)},mountComponent:function(t){this.unbuild(!0);var e=this,n=this.Component.options.activate,i=this.getCached(),r=this.build();n&&!i?(this.waitingFor=r,function(t,e,n){var i=t.length,r=0;t[0].call(e,function o(){++r>=i?n():t[r].call(e,o)})}(n,r,function(){e.waitingFor===r&&(e.waitingFor=null,e.transition(r,t))})):(i&&r._updateRef(),this.transition(r,t))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(t){var e=this.getCached();if(e)return e;if(this.Component){var n={name:this.ComponentName,el:ni(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};t&&$(n,t);var i=new this.Component(n);return this.keepAlive&&(this.cache[this.Component.cid]=i),i}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(t){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var e=this.childVM;e&&!this.keepAlive?e.$destroy(!1,t):e&&(e._inactive=!0,e._updateRef(!0))},remove:function(t,e){var n=this.keepAlive;if(t){this.pendingRemovals++,this.pendingRemovalCb=e;var i=this;t.$remove(function(){i.pendingRemovals--,n||t._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else e&&e()},transition:function(t,e){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),t._inactive=!1,this.childVM=t,n.params.transitionMode){case"in-out":t.$before(n.anchor,function(){n.remove(i,e)});break;case"out-in":n.remove(i,function(){t.$before(n.anchor,e)});break;default:n.remove(i),t.$before(n.anchor,e)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var t in this.cache)this.cache[t].$destroy();this.cache=null}}};var zi=Ht._propBindingModes,Vi={},Hi=/^[$_a-zA-Z]+[\w$]*$/;function Wi(t,e,n){for(var i,r,o,a,l,c,f,g=[],v=n.$options.propsData,_=Object.keys(e),b=_.length;b--;)if(i=e[r=_[b]]||Vi,l=m(r),Hi.test(l)){if(f={name:r,path:l,options:i,mode:zi.ONE_WAY,raw:null},null===(a=ee(t,o=y(r)))&&(null!==(a=ee(t,o+".sync"))?f.mode=zi.TWO_WAY:null!==(a=ee(t,o+".once"))&&(f.mode=zi.ONE_TIME)),null!==a)f.raw=a,a=(c=Dt(a)).expression,f.filters=c.filters,u(a)&&!c.filters?f.optimizedLiteral=!0:f.dynamic=!0,f.parentPath=a;else if(null!==(a=te(t,o)))f.raw=a;else if(v&&null!==(a=v[r]||v[l]))f.raw=a;else{}g.push(f)}return function(t){return function(e,n){e._props={};for(var i,r,o,a,u,l=e.$options.propsData,c=t.length;c--;)if(i=t[c],u=i.raw,r=i.path,o=i.options,e._props[r]=i,l&&s(l,r)&&Gi(e,i,l[r]),null===u)Gi(e,i,void 0);else if(i.dynamic)i.mode===zi.ONE_TIME?(a=(n||e._context||e).$get(i.parentPath),Gi(e,i,a)):e._context?e._bindDir({name:"prop",def:Ki,prop:i},null,null,n):Gi(e,i,e.$get(i.parentPath));else if(i.optimizedLiteral){var f=p(u);a=f===u?d(h(u)):f,Gi(e,i,a)}else a=o.type===Boolean&&(""===u||u===y(i.name))||u,Gi(e,i,a)}}(g)}function Zi(t,e,n,i){var r=e.dynamic&&Pn(e.parentPath),o=n;void 0===o&&(o=function(t,e){var n=e.options;if(!s(n,"default"))return n.type!==Boolean&&void 0;var i=n.default;k(i);return"function"==typeof i&&n.type!==Function?i.call(t):i}(t,e));var a=(o=function(t,e,n){var i=t.options.coerce;if(!i)return e;return"function"==typeof i?i(e):e}(e,o))!==n;(function(t,e,n){if(!t.options.required&&(null===t.raw||null==e))return!0;var i=t.options,r=i.type,o=!r,s=[];if(r){L(r)||(r=[r]);for(var a=0;a<r.length&&!o;a++){var u=Yi(e,r[a]);s.push(u.expectedType),o=u.valid}}if(!o)return!1;var l=i.validator;if(l&&!l(e))return!1;return!0})(e,o)||(o=void 0),r&&!a?Ue(function(){i(o)}):i(o)}function Gi(t,e,n){Zi(t,e,n,function(n){Ze(t,e.path,n)})}function Yi(t,e){var n,i;return e===String?n=typeof t===(i="string"):e===Number?n=typeof t===(i="number"):e===Boolean?n=typeof t===(i="boolean"):e===Function?n=typeof t===(i="function"):e===Object?(i="object",n=T(t)):e===Array?(i="array",n=L(t)):n=t instanceof e,{valid:n,expectedType:i}}var Xi=Ht._propBindingModes,Ki={bind:function(){var t=this.vm,e=t._context,n=this.descriptor.prop,i=n.path,r=n.parentPath,o=n.mode===Xi.TWO_WAY,s=this.parentWatcher=new Un(e,r,function(e){!function(t,e,n){Zi(t,e,n,function(n){t[e.path]=n})}(t,n,e)},{twoWay:o,filters:n.filters,scope:this._scope});if(Gi(t,n,s.value),o){var a=this;t.$once("pre-hook:created",function(){a.childWatcher=new Un(t,i,function(t){s.set(t)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Ji=[],Qi=!1;function tr(t){Ji.push(t),Qi||(Qi=!0,Y(er))}function er(){for(var t=document.documentElement.offsetHeight,e=0;e<Ji.length;e++)Ji[e]();return Ji=[],Qi=!1,t}var nr=U+"Duration",ir=V+"Duration",rr=O&&window.requestAnimationFrame,or=rr?function(t){rr(function(){rr(t)})}:function(t){setTimeout(t,50)};function sr(t,e,n,i){this.id=e,this.el=t,this.enterClass=n&&n.enterClass||e+"-enter",this.leaveClass=n&&n.leaveClass||e+"-leave",this.hooks=n,this.vm=i,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=n&&n.type;var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(t){r[t]=w(r[t],r)})}var ar=sr.prototype;ar.enter=function(t,e){this.cancelPending(),this.callHook("beforeEnter"),this.cb=e,de(this.el,this.enterClass),t(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,tr(this.enterNextTick))},ar.enterNextTick=function(){var t=this;this.justEntered=!0,or(function(){t.justEntered=!1});var e=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?"transition"===n&&pe(this.el,this.enterClass):"transition"===n?(pe(this.el,this.enterClass),this.setupCssCb(z,e)):"animation"===n?this.setupCssCb(H,e):e()},ar.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,pe(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},ar.leave=function(t,e){this.cancelPending(),this.callHook("beforeLeave"),this.op=t,this.cb=e,de(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():tr(this.leaveNextTick)))},ar.leaveNextTick=function(){var t=this.getCssTransitionType(this.leaveClass);if(t){var e="transition"===t?z:H;this.setupCssCb(e,this.leaveDone)}else this.leaveDone()},ar.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),pe(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},ar.cancelPending=function(){this.op=this.cb=null;var t=!1;this.pendingCssCb&&(t=!0,le(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(t=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),t&&(pe(this.el,this.enterClass),pe(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},ar.callHook=function(t){this.hooks&&this.hooks[t]&&this.hooks[t].call(this.vm,this.el)},ar.callHookWithCb=function(t){var e=this.hooks&&this.hooks[t];e&&(e.length>1&&(this.pendingJsCb=A(this[t+"Done"])),e.call(this.vm,this.el,this.pendingJsCb))},ar.getCssTransitionType=function(t){if(!(!z||document.hidden||this.hooks&&!1===this.hooks.css||function(t){if(/svg$/.test(t.namespaceURI)){var e=t.getBoundingClientRect();return!(e.width||e.height)}return!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}(this.el))){var e=this.type||this.typeCache[t];if(e)return e;var n=this.el.style,i=window.getComputedStyle(this.el),r=n[nr]||i[nr];if(r&&"0s"!==r)e="transition";else{var o=n[ir]||i[ir];o&&"0s"!==o&&(e="animation")}return e&&(this.typeCache[t]=e),e}},ar.setupCssCb=function(t,e){this.pendingCssEvent=t;var n=this,i=this.el,r=this.pendingCssCb=function(o){o.target===i&&(le(i,t,r),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&e&&e())};ue(i,t,r)};var ur={style:Pi,class:qi,component:Ui,prop:Ki,transition:{priority:1100,update:function(t,e){var n=this.el,i=Oe(this.vm.$options,"transitions",t);t=t||"v",e=e||"v",n.__v_trans=new sr(n,t,i,this.vm),pe(n,e+"-transition"),de(n,t+"-transition")}}},lr=/^v-bind:|^:/,cr=/^v-on:|^@/,hr=/^v-([^:]+)(?:$|:(.*)$)/,dr=/\.[^\.]+/g,pr=/^(v-bind:|:)?transition$/,fr=1e3,mr=2e3;function gr(t,e,n){var i=n||!e._asComponent?xr(t,e):null,r=i&&i.terminal||Sr(t)||!t.hasChildNodes()?null:function t(e,n){var i=[];var r,o,s;for(var a=0,u=e.length;a<u;a++)s=e[a],r=xr(s,n),o=r&&r.terminal||"SCRIPT"===s.tagName||!s.hasChildNodes()?null:t(s.childNodes,n),i.push(r,o);return i.length?function(t){return function(e,n,i,r,o){for(var s,a,u,l=0,c=0,h=t.length;l<h;c++){s=n[c],a=t[l++],u=t[l++];var d=x(s.childNodes);a&&a(e,s,i,r,o),u&&u(e,d,i,r,o)}}}(i):null}(t.childNodes,e);return function(t,e,n,o,s){var a=x(e.childNodes),u=vr(function(){i&&i(t,e,n,o,s),r&&r(t,a,n,o,s)},t);return yr(t,u)}}function vr(t,e){e._directives=[];var n=e._directives.length;t();var i=e._directives.slice(n);!function(t){if(0===t.length)return;var e,n,i,r,o={},s=0,a=[];for(e=0,n=t.length;e<n;e++){var u=t[e],l=u.descriptor.def.priority||fr,c=o[l];c||(c=o[l]=[],a.push(l)),c.push(u)}for(a.sort(function(t,e){return t>e?-1:t===e?0:1}),e=0,n=a.length;e<n;e++){var h=o[a[e]];for(i=0,r=h.length;i<r;i++)t[s++]=h[i]}}(i);for(var r=0,o=i.length;r<o;r++)i[r]._bind();return i}function yr(t,e,n,i){function r(r){_r(t,e,r),n&&i&&_r(n,i)}return r.dirs=e,r}function _r(t,e,n){for(var i=e.length;i--;)e[i]._teardown()}function br(t,e,n,i){var r=Wi(e,n,t),o=vr(function(){r(t,i)},t);return yr(t,o)}function wr(t,e,n){var i,r,o=e._containerAttrs,s=e._replacerAttrs;11!==t.nodeType&&(e._asComponent?(o&&n&&(i=Tr(o,n)),s&&(r=Tr(s,e))):r=Tr(t.attributes,e));return e._containerAttrs=e._replacerAttrs=null,function(t,e,n){var o,s=t._context;s&&i&&(o=vr(function(){i(s,e,null,n)},s));var a=vr(function(){r&&r(t,e)},t);return yr(t,a,s,o)}}function xr(t,e){var n=t.nodeType;return 1!==n||Sr(t)?3===n&&t.data.trim()?function(t,e){if(t._skip)return $r;var n=jt(t.wholeText);if(!n)return null;var i=t.nextSibling;for(;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var r,o,s=document.createDocumentFragment(),a=0,u=n.length;a<u;a++)o=n[a],r=o.tag?kr(o,e):document.createTextNode(o.value),s.appendChild(r);return function(t,e){return function(n,i,r,o){for(var s,a,u,l=e.cloneNode(!0),h=x(l.childNodes),d=0,p=t.length;d<p;d++)s=t[d],a=s.value,s.tag&&(u=h[d],s.oneTime?(a=(o||n).$eval(a),s.html?ae(u,ii(a,!0)):u.data=c(a)):n._bindDir(s.descriptor,u,r,o));ae(i,l)}}(n,s)}(t,e):null:function(t,e){if("TEXTAREA"===t.tagName){if(null!==te(t,"v-pre"))return Er;var n=jt(t.value);n&&(t.setAttribute(":value",Ft(n)),t.value="")}var i,r=t.hasAttributes(),o=r&&x(t.attributes);r&&(i=function(t,e,n){if(null!==te(t,"v-pre"))return Er;if(t.hasAttribute("v-else")){var i=t.previousElementSibling;if(i&&i.hasAttribute("v-if"))return Er}for(var r,o,s,a,u,l,c,h,d,p,f=0,m=e.length;f<m;f++)r=e[f],o=r.name.replace(dr,""),(u=o.match(hr))&&(d=Oe(n,"directives",u[1]))&&d.terminal&&(!p||(d.priority||mr)>p.priority)&&(p=d,c=r.name,a=Lr(r.name),s=r.value,l=u[1],h=u[2]);if(p)return Cr(t,l,s,n,p,c,h,a)}(t,o,e));i||(i=function(t,e){var n=t.tagName.toLowerCase();if(Ee.test(n))return;var i=Oe(e,"elementDirectives",n);if(i)return Cr(t,n,"",e,i)}(t,e));i||(i=function(t,e){var n=Te(t,e);if(n){var i=be(t),r={name:"component",ref:i,expression:n.id,def:ur.component,modifiers:{literal:!n.dynamic}},o=function(t,e,n,o,s){i&&Ze((o||t).$refs,i,null),t._bindDir(r,e,n,o,s)};return o.terminal=!0,o}}(t,e));!i&&r&&(i=Tr(o,e));return i}(t,e)}function $r(t,e){oe(e)}function kr(t,e){var n;function i(e){if(!t.descriptor){var n=Dt(t.value);t.descriptor={name:e,def:Fi[e],expression:n.expression,filters:n.filters}}}return t.oneTime?n=document.createTextNode(t.value):t.html?(n=document.createComment("v-html"),i("html")):(n=document.createTextNode(" "),i("text")),n}function Er(){}function Cr(t,e,n,i,r,o,s,a){var u=Dt(n),l={name:e,arg:s,expression:u.expression,filters:u.filters,raw:n,attr:o,modifiers:a,def:r};"for"!==e&&"router-view"!==e||(l.ref=be(t));var c=function(t,e,n,i,r){l.ref&&Ze((i||t).$refs,l.ref,null),t._bindDir(l,e,n,i,r)};return c.terminal=!0,c}function Tr(t,e){for(var n,i,r,o,s,a,u,l,c,h,d,p=t.length,f=[];p--;)if(n=t[p],i=o=n.name,h=jt(r=s=n.value),u=null,l=Lr(i),i=i.replace(dr,""),h)r=Ft(h),u=i,m("bind",Fi.bind,h);else if(pr.test(i))l.literal=!lr.test(i),m("transition",ur.transition);else if(cr.test(i))u=i.replace(cr,""),m("on",Fi.on);else if(lr.test(i))"style"===(a=i.replace(lr,""))||"class"===a?m(a,ur[a]):(u=a,m("bind",Fi.bind));else if(d=i.match(hr)){if(a=d[1],u=d[2],"else"===a)continue;(c=Oe(e,"directives",a))&&m(a,c)}function m(t,e,n){var i=n&&function(t){var e=t.length;for(;e--;)if(t[e].oneTime)return!0}(n),a=!i&&Dt(r);f.push({name:t,attr:o,raw:s,def:e,arg:u,modifiers:l,expression:a&&a.expression,filters:a&&a.filters,interp:n,hasOneTime:i})}if(f.length)return function(t){return function(e,n,i,r,o){for(var s=t.length;s--;)e._bindDir(t[s],n,i,r,o)}}(f)}function Lr(t){var e=Object.create(null),n=t.match(dr);if(n)for(var i=n.length;i--;)e[n[i].slice(1)]=!0;return e}function Sr(t){return"SCRIPT"===t.tagName&&(!t.hasAttribute("type")||"text/javascript"===t.getAttribute("type"))}Er.terminal=!0;var Dr=/[^\w\-:\.]/;function Mr(t,e){return e&&(e._containerAttrs=Ar(t)),ve(t)&&(t=ii(t)),e&&(e._asComponent&&!e.template&&(e.template="<slot></slot>"),e.template&&(e._content=fe(t),t=function(t,e){var n=e.template,i=ii(n,!0);if(i){var r=i.firstChild;if(!r)return i;var o=r.tagName&&r.tagName.toLowerCase();return e.replace?(document.body,i.childNodes.length>1||1!==r.nodeType||"component"===o||Oe(e,"components",o)||ne(r,"is")||Oe(e,"elementDirectives",o)||r.hasAttribute("v-for")||r.hasAttribute("v-if")?i:(e._replacerAttrs=Ar(r),function(t,e){var n,i,r=t.attributes,o=r.length;for(;o--;)n=r[o].name,i=r[o].value,e.hasAttribute(n)||Dr.test(n)?"class"===n&&!jt(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(t){de(e,t)}):e.setAttribute(n,i)}(t,r),r)):(t.appendChild(i),t)}}(t,e))),$e(t)&&(se(ye("v-start",!0),t),t.appendChild(ye("v-end",!0))),t}function Ar(t){if(1===t.nodeType&&t.hasAttributes())return x(t.attributes)}function Pr(t,e){if(e){for(var n,i,r=t._slotContents=Object.create(null),o=0,s=e.children.length;o<s;o++)(i=(n=e.children[o]).getAttribute("slot"))&&(r[i]||(r[i]=[])).push(n);for(i in r)r[i]=Nr(r[i],e);if(e.hasChildNodes()){var a=e.childNodes;if(1===a.length&&3===a[0].nodeType&&!a[0].data.trim())return;r.default=Nr(e.childNodes,e)}}}function Nr(t,e){for(var n=document.createDocumentFragment(),i=0,r=(t=x(t)).length;i<r;i++){var o=t[i];!ve(o)||o.hasAttribute("v-if")||o.hasAttribute("v-for")||(e.removeChild(o),o=ii(o,!0)),n.appendChild(o)}return n}var Or=Object.freeze({compile:gr,compileAndLinkProps:br,compileRoot:wr,transclude:Mr,resolveSlots:Pr});var Ir=/^v-on:|^@/;function Rr(){}function jr(t,e,n,i,r,o){this.vm=e,this.el=n,this.descriptor=t,this.name=t.name,this.expression=t.expression,this.arg=t.arg,this.modifiers=t.modifiers,this.filters=t.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=i,this._scope=r,this._frag=o}jr.prototype._bind=function(){var t=this.name,e=this.descriptor;if(("cloak"!==t||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=e.attr||"v-"+t;this.el.removeAttribute(n)}var i=e.def;if("function"==typeof i?this.update=i:$(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(e.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var r=this;this.update?this._update=function(t,e){r._locked||r.update(t,e)}:this._update=Rr;var o=this._preProcess?w(this._preProcess,this):null,s=this._postProcess?w(this._postProcess,this):null,a=this._watcher=new Un(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:o,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},jr.prototype._setupParams=function(){if(this.params){var t=this.params;this.params=Object.create(null);for(var e,n,i,r=t.length;r--;)i=m(e=y(t[r])),null!=(n=ee(this.el,e))?this._setupParamWatcher(i,n):null!=(n=te(this.el,e))&&(this.params[i]=""===n||n)}},jr.prototype._setupParamWatcher=function(t,e){var n=this,i=!1,r=(this._scope||this.vm).$watch(e,function(e,r){if(n.params[t]=e,i){var o=n.paramWatchers&&n.paramWatchers[t];o&&o.call(n,e,r)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(r)},jr.prototype._checkStatement=function(){var t=this.expression;if(t&&this.acceptStatement&&!Pn(t)){var e=An(t).get,n=this._scope||this.vm,i=function(t){n.$event=t,e.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},jr.prototype.set=function(t){this.twoWay&&this._withLock(function(){this._watcher.set(t)})},jr.prototype._withLock=function(t){var e=this;e._locked=!0,t.call(e),Y(function(){e._locked=!1})},jr.prototype.on=function(t,e,n){ue(this.el,t,e,n),(this._listeners||(this._listeners=[])).push([t,e])},jr.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var t,e=this._listeners;if(e)for(t=e.length;t--;)le(this.el,e[t][0],e[t][1]);var n=this._paramUnwatchFns;if(n)for(t=n.length;t--;)n[t]();0,this.vm=this.el=this._watcher=this._listeners=null}};var Fr=/[^|]\|[^|]/;function qr(t){this._init(t)}!function(t){t.prototype._init=function(t){t=t||{},this.$el=null,this.$parent=t.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=Ye++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=t._context||this.$parent,this._scope=t._scope,this._frag=t._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),t=this.$options=Ne(this.constructor.options,t,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),t.el&&this.$mount(t.el)}}(qr),function(t){function e(){}function n(t,e){var n=new Un(e,t,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),Re.target&&n.depend(),n.value}}Object.defineProperty(t.prototype,"$data",{get:function(){return this._data},set:function(t){t!==this._data&&this._setData(t)}}),t.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},t.prototype._initProps=function(){var t=this.$options,e=t.el,n=t.props;e=t.el=Jt(e),this._propsUnlinkFn=e&&1===e.nodeType&&n?br(this,e,n,this._scope):null},t.prototype._initData=function(){var t=this.$options.data,e=this._data=t?t():{};T(e)||(e={});var n,i,r=this._props,o=Object.keys(e);for(n=o.length;n--;)i=o[n],r&&s(r,i)||this._proxy(i);We(e,this)},t.prototype._setData=function(t){t=t||{};var e,n,i,r=this._data;for(this._data=t,i=(e=Object.keys(r)).length;i--;)(n=e[i])in t||this._unproxy(n);for(i=(e=Object.keys(t)).length;i--;)s(this,n=e[i])||this._proxy(n);r.__ob__.removeVm(this),We(t,this),this._digest()},t.prototype._proxy=function(t){if(!l(t)){var e=this;Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e._data[t]},set:function(n){e._data[t]=n}})}},t.prototype._unproxy=function(t){l(t)||delete this[t]},t.prototype._digest=function(){for(var t=0,e=this._watchers.length;t<e;t++)this._watchers[t].update(!0)},t.prototype._initComputed=function(){var t=this.$options.computed;if(t)for(var i in t){var r=t[i],o={enumerable:!0,configurable:!0};"function"==typeof r?(o.get=n(r,this),o.set=e):(o.get=r.get?!1!==r.cache?n(r.get,this):w(r.get,this):e,o.set=r.set?w(r.set,this):e),Object.defineProperty(this,i,o)}},t.prototype._initMethods=function(){var t=this.$options.methods;if(t)for(var e in t)this[e]=w(t[e],this)},t.prototype._initMeta=function(){var t=this.$options._meta;if(t)for(var e in t)Ze(this,e,t[e])}}(qr),function(t){function e(t,e,i){var r,o,s,a;if(i)for(o in i)if(r=i[o],L(r))for(s=0,a=r.length;s<a;s++)n(t,e,o,r[s]);else n(t,e,o,r)}function n(t,e,i,r,o){var s=typeof r;if("function"===s)t[e](i,r,o);else if("string"===s){var a=t.$options.methods,u=a&&a[r];u&&t[e](i,u,o)}else r&&"object"===s&&n(t,e,i,r.handler,r)}function i(){this._isAttached||(this._isAttached=!0,this.$children.forEach(r))}function r(t){!t._isAttached&&Qt(t.$el)&&t._callHook("attached")}function o(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(s))}function s(t){t._isAttached&&!Qt(t.$el)&&t._callHook("detached")}t.prototype._initEvents=function(){var t=this.$options;t._asComponent&&function(t,e){for(var n,i,r,o=e.attributes,s=0,a=o.length;s<a;s++)n=o[s].name,Ir.test(n)&&(n=n.replace(Ir,""),Pn(i=o[s].value)&&(i+=".apply(this, $arguments)"),(r=(t._scope||t._context).$eval(i,!0))._fromParent=!0,t.$on(n.replace(Ir),r))}(this,t.el),e(this,"$on",t.events),e(this,"$watch",t.watch)},t.prototype._initDOMHooks=function(){this.$on("hook:attached",i),this.$on("hook:detached",o)},t.prototype._callHook=function(t){this.$emit("pre-hook:"+t);var e=this.$options[t];if(e)for(var n=0,i=e.length;n<i;n++)e[n].call(this);this.$emit("hook:"+t)}}(qr),function(t){t.prototype._updateRef=function(t){var e=this.$options._ref;if(e){var n=(this._scope||this._context).$refs;t?n[e]===this&&(n[e]=null):n[e]=this}},t.prototype._compile=function(t){var e=this.$options,n=t;if(t=Mr(t,e),this._initElement(t),1!==t.nodeType||null===te(t,"v-pre")){var i,r=wr(t,e,this._context&&this._context.$options);Pr(this,e._content);var o=this.constructor;e._linkerCachable&&((i=o.linker)||(i=o.linker=gr(t,e)));var s=r(this,t,this._scope),a=i?i(this,t):gr(t,e)(this,t);this._unlinkFn=function(){s(),a(!0)},e.replace&&ae(n,t),this._isCompiled=!0,this._callHook("compiled")}},t.prototype._initElement=function(t){$e(t)?(this._isFragment=!0,this.$el=this._fragmentStart=t.firstChild,this._fragmentEnd=t.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=t):this.$el=t,this.$el.__vue__=this,this._callHook("beforeCompile")},t.prototype._bindDir=function(t,e,n,i,r){this._directives.push(new jr(t,this,e,n,i,r))},t.prototype._destroy=function(t,e){if(this._isBeingDestroyed)e||this._cleanup();else{var n,i,r,o=this,s=function(){!n||i||e||o._cleanup()};t&&this.$el&&(i=!0,this.$remove(function(){i=!1,s()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),r=this.$children.length;r--;)this.$children[r].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),r=this._watchers.length;r--;)this._watchers[r].teardown();this.$el&&(this.$el.__vue__=null),n=!0,s()}},t.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}(qr),function(t){t.prototype._applyFilters=function(t,e,n,i){var r,o,s,a,u,l,c,h,d;for(l=0,c=n.length;l<c;l++)if(r=n[i?c-l-1:l],(o=Oe(this.$options,"filters",r.name))&&"function"==typeof(o=i?o.write:o.read||o)){if(s=i?[t,e]:[t],u=i?2:1,r.args)for(h=0,d=r.args.length;h<d;h++)a=r.args[h],s[h+u]=a.dynamic?this.$get(a.value):a.value;t=o.apply(this,s)}return t},t.prototype._resolveComponent=function(e,n){var i;if(i="function"==typeof e?e:Oe(this.$options,"components",e))if(i.options)n(i);else if(i.resolved)n(i.resolved);else if(i.requested)i.pendingCallbacks.push(n);else{i.requested=!0;var r=i.pendingCallbacks=[n];i.call(this,function(e){T(e)&&(e=t.extend(e)),i.resolved=e;for(var n=0,o=r.length;n<o;n++)r[n](e)},function(t){})}}}(qr),function(t){function e(t){return JSON.parse(JSON.stringify(t))}t.prototype.$get=function(t,e){var n=An(t);if(n){if(e){var i=this;return function(){i.$arguments=x(arguments);var t=n.get.call(i,i);return i.$arguments=null,t}}try{return n.get.call(this,this)}catch(t){}}},t.prototype.$set=function(t,e){var n=An(t,!0);n&&n.set&&n.set.call(this,this,e)},t.prototype.$delete=function(t){r(this._data,t)},t.prototype.$watch=function(t,e,n){var i;"string"==typeof t&&(t=(i=Dt(t)).expression);var r=new Un(this,t,e,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||!1!==n.user});return n&&n.immediate&&e.call(this,r.value),function(){r.teardown()}},t.prototype.$eval=function(t,e){if(Fr.test(t)){var n=Dt(t),i=this.$get(n.expression,e);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(t,e)},t.prototype.$interpolate=function(t){var e=jt(t),n=this;return e?1===e.length?n.$eval(e[0].value)+"":e.map(function(t){return t.tag?n.$eval(t.value):t.value}).join(""):t},t.prototype.$log=function(t){var n=t?dn(this._data,t):this._data;if(n&&(n=e(n)),!t){var i;for(i in this.$options.computed)n[i]=e(this[i]);if(this._props)for(i in this._props)n[i]=e(this[i])}console.log(n)}}(qr),function(t){function e(t,e,i,r,o,s){var a=!Qt(e=n(e)),u=!1===r||a?o:s,l=!a&&!t._isAttached&&!Qt(t.$el);return t._isFragment?(we(t._fragmentStart,t._fragmentEnd,function(n){u(n,e,t)}),i&&i()):u(t.$el,e,t,i),l&&t._callHook("attached"),t}function n(t){return"string"==typeof t?document.querySelector(t):t}function i(t,e,n,i){e.appendChild(t),i&&i()}function r(t,e,n,i){ie(t,e),i&&i()}function o(t,e,n){oe(t),n&&n()}t.prototype.$nextTick=function(t){Y(t,this)},t.prototype.$appendTo=function(t,n,r){return e(this,t,n,r,i,Zt)},t.prototype.$prependTo=function(t,e,i){return(t=n(t)).hasChildNodes()?this.$before(t.firstChild,e,i):this.$appendTo(t,e,i),this},t.prototype.$before=function(t,n,i){return e(this,t,n,i,r,Gt)},t.prototype.$after=function(t,e,i){return(t=n(t)).nextSibling?this.$before(t.nextSibling,e,i):this.$appendTo(t.parentNode,e,i),this},t.prototype.$remove=function(t,e){if(!this.$el.parentNode)return t&&t();var n=this._isAttached&&Qt(this.$el);n||(e=!1);var i=this,r=function(){n&&i._callHook("detached"),t&&t()};return this._isFragment?xe(this._fragmentStart,this._fragmentEnd,this,this._fragment,r):(!1===e?o:Yt)(this.$el,this,r),this}}(qr),function(t){t.prototype.$on=function(t,e){return(this._events[t]||(this._events[t]=[])).push(e),n(this,t,1),this},t.prototype.$once=function(t,e){var n=this;function i(){n.$off(t,i),e.apply(this,arguments)}return i.fn=e,this.$on(t,i),this},t.prototype.$off=function(t,e){var i,r;if(!arguments.length){if(this.$parent)for(t in this._events)(i=this._events[t])&&n(this,t,-i.length);return this._events={},this}if(!(i=this._events[t]))return this;if(1===arguments.length)return n(this,t,-i.length),this._events[t]=null,this;for(var o=i.length;o--;)if((r=i[o])===e||r.fn===e){n(this,t,-1),i.splice(o,1);break}return this},t.prototype.$emit=function(t){var e="string"==typeof t;t=e?t:t.name;var n=this._events[t],i=e||!n;if(n){n=n.length>1?x(n):n;var r=e&&n.some(function(t){return t._fromParent});r&&(i=!1);for(var o=x(arguments,1),s=0,a=n.length;s<a;s++){var u=n[s];!0!==u.apply(this,o)||r&&!u._fromParent||(i=!0)}}return i},t.prototype.$broadcast=function(t){var e="string"==typeof t;if(t=e?t:t.name,this._eventsCount[t]){var n=this.$children,i=x(arguments);e&&(i[0]={name:t,source:this});for(var r=0,o=n.length;r<o;r++){var s=n[r];s.$emit.apply(s,i)&&s.$broadcast.apply(s,i)}return this}},t.prototype.$dispatch=function(t){var e=this.$emit.apply(this,arguments);if(e){var n=this.$parent,i=x(arguments);for(i[0]={name:t,source:this};n;)n=(e=n.$emit.apply(n,i))?n.$parent:null;return this}};var e=/^hook:/;function n(t,n,i){var r=t.$parent;if(r&&i&&!e.test(n))for(;r;)r._eventsCount[n]=(r._eventsCount[n]||0)+i,r=r.$parent}}(qr),function(t){function e(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}t.prototype.$mount=function(t){if(!this._isCompiled)return(t=Jt(t))||(t=document.createElement("div")),this._compile(t),this._initDOMHooks(),Qt(this.$el)?(this._callHook("attached"),e.call(this)):this.$once("hook:attached",e),this},t.prototype.$destroy=function(t,e){this._destroy(t,e)},t.prototype.$compile=function(t,e,n,i){return gr(t,this.$options,!0)(this,t,e,n,i)}}(qr);var Br={slot:{priority:2300,params:["name"],bind:function(){var t=this.params.name||"default",e=this.vm._slotContents&&this.vm._slotContents[t];e&&e.hasChildNodes()?this.compile(e.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(t,e,n){if(t&&e){if(this.el.hasChildNodes()&&1===t.childNodes.length&&1===t.childNodes[0].nodeType&&t.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,t.appendChild(i)}var r=n?n._scope:this._scope;this.unlink=e.$compile(t,n,r,this._frag)}t?ae(this.el,t):oe(this.el)},fallback:function(){this.compile(fe(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},partial:{priority:1750,params:["name"],paramWatchers:{name:function(t){bi.remove.call(this),t&&this.insert(t)}},bind:function(){this.anchor=ye("v-partial"),ae(this.el,this.anchor),this.insert(this.params.name)},insert:function(t){var e=Oe(this.vm.$options,"partials",t);e&&(this.factory=new fi(this.vm,e),bi.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}}},Ur=gi._postProcess;function zr(t,e){var n;if(T(t)){var i=Object.keys(t);for(n=i.length;n--;)if(zr(t[i[n]],e))return!0}else if(L(t)){for(n=t.length;n--;)if(zr(t[n],e))return!0}else if(null!=t)return t.toString().toLowerCase().indexOf(e)>-1}var Vr=/(\d{3})(?=\d)/g,Hr={orderBy:function(t){var e=null,n=void 0;t=Ur(t);var i=x(arguments,1),r=i[i.length-1];"number"==typeof r?(r=r<0?-1:1,i=i.length>1?i.slice(0,-1):i):r=1;var o=i[0];if(!o)return t;function s(t,e,i){var o=n[i];return o&&("$key"!==o&&(k(t)&&"$value"in t&&(t=t.$value),k(e)&&"$value"in e&&(e=e.$value)),t=k(t)?dn(t,o):t,e=k(e)?dn(e,o):e),t===e?0:t>e?r:-r}return"function"==typeof o?e=function(t,e){return o(t,e)*r}:(n=Array.prototype.concat.apply([],i),e=function(t,i,r){return(r=r||0)>=n.length-1?s(t,i,r):s(t,i,r)||e(t,i,r+1)}),t.slice().sort(e)},filterBy:function(t,e,n){if(t=Ur(t),null==e)return t;if("function"==typeof e)return t.filter(e);e=(""+e).toLowerCase();for(var i,r,o,s,a="in"===n?3:2,u=Array.prototype.concat.apply([],x(arguments,a)),l=[],c=0,h=t.length;c<h;c++)if(o=(i=t[c])&&i.$value||i,s=u.length){for(;s--;)if("$key"===(r=u[s])&&zr(i.$key,e)||zr(dn(o,r),e)){l.push(i);break}}else zr(i,e)&&l.push(i);return l},limitBy:function(t,e,n){return n=n?parseInt(n,10):0,"number"==typeof(e=h(e))?t.slice(n,n+e):t},json:{read:function(t,e){return"string"==typeof t?t:JSON.stringify(t,null,arguments.length>1?e:2)},write:function(t){try{return JSON.parse(t)}catch(e){return t}}},capitalize:function(t){return t||0===t?(t=t.toString()).charAt(0).toUpperCase()+t.slice(1):""},uppercase:function(t){return t||0===t?t.toString().toUpperCase():""},lowercase:function(t){return t||0===t?t.toString().toLowerCase():""},currency:function(t,e,n){if(t=parseFloat(t),!isFinite(t)||!t&&0!==t)return"";e=null!=e?e:"$",n=null!=n?n:2;var i=Math.abs(t).toFixed(n),r=n?i.slice(0,-1-n):i,o=r.length%3,s=o>0?r.slice(0,o)+(r.length>3?",":""):"",a=n?i.slice(-1-n):"";return(t<0?"-":"")+e+s+r.slice(o).replace(Vr,"$1,")+a},pluralize:function(t){var e=x(arguments,1),n=e.length;if(n>1){var i=t%10-1;return i in e?e[i]:e[n-1]}return e[0]+(1===t?"":"s")},debounce:function(t,e){if(t)return e||(e=300),D(t,e)}};!function(t){t.options={directives:Fi,elementDirectives:Br,filters:Hr,transitions:{},components:{},partials:{},replace:!0},t.util=Ge,t.config=Ht,t.set=i,t.delete=r,t.nextTick=Y,t.compiler=Or,t.FragmentFactory=fi,t.internalDirectives=ur,t.parsers={path:fn,text:Ut,template:ri,directive:Mt,expression:Nn},t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,i=0===n.cid;if(i&&t._Ctor)return t._Ctor;var r=t.name||n.options.name,o=function(t){return new Function("return function "+b(t)+" (options) { this._init(options) }")()}(r||"VueComponent");return o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.cid=e++,o.options=Ne(n.options,t),o.super=n,o.extend=n.extend,Ht._assetTypes.forEach(function(t){o[t]=n[t]}),r&&(o.options.components[r]=o),i&&(t._Ctor=o),o},t.use=function(t){if(!t.installed){var e=x(arguments,1);return e.unshift(this),"function"==typeof t.install?t.install.apply(t,e):t.apply(null,e),t.installed=!0,this}},t.mixin=function(e){t.options=Ne(t.options,e)},Ht._assetTypes.forEach(function(e){t[e]=function(n,i){return i?("component"===e&&T(i)&&(i.name||(i.name=n),i=t.extend(i)),this.options[e+"s"][n]=i,i):this.options[e+"s"][n]}}),$(t.transition,Kt)}(qr),qr.version="1.0.28",setTimeout(function(){Ht.devtools&&I&&I.emit("init",qr)},0),t.exports=qr},,,,,function(t,e,n){"use strict";var i=n(5),r={string:{validate:function(){return!0}},select:{validate:function(){return!0}},select1:{validate:function(){return!0}},decimal:{convert:function(t){var e=Number(t);return isNaN(e)||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY?"":e},validate:function(t){var e=Number(t);return!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY}},int:{convert:function(t){var e=Number(t);return isNaN(e)||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY?"":e>=0?Math.floor(e):-Math.floor(Math.abs(e))},validate:function(t){var e=Number(t);return!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY&&Math.round(e)===e&&e.toString()===t.toString()}},date:{validate:function(t){var e=/([0-9]{4})-([0-9]{2})-([0-9]{2})/.exec(t);if(e&&4===e.length){var n=Number(e[1]),i=Number(e[2])-1,r=Number(e[3]),o=new Date(n,i,r);return o.getFullYear()===n&&o.getMonth()===i&&o.getDate()===r}return!1},convert:function(t){var e;return"Invalid Date"===(e=i.isNumber(t)?new Date(24*t*60*60*1e3):this.validate(t)?new Date(t):"Invalid Date").toString()?"":e.getUTCFullYear().toString().pad(4)+"-"+(e.getUTCMonth()+1).toString().pad(2)+"-"+e.getUTCDate().toString().pad(2)}},datetime:{validate:function(t){var e=t.split("T");return 2===e.length&&(r.date.validate(e[0])&&r.time.validate(e[1],!1))},convert:function(t){var e="Invalid Date",n=t.split("T");if(i.isNumber(t))e=new Date(24*t*60*60*1e3);else if(/[0-9]T[0-9]/.test(t)&&2===n.length){var o=r.date.convert(n[0]),s=r.time.convert(n[1],!1);if(o&&s)return o+"T"+s}return"Invalid Date"!==e.toString()?e.toISOLocalString():""}},time:{validate:function(t,e){var n=t.match(/^(\d\d):(\d\d):(\d\d)\.\d\d\d(\+|-)(\d\d):(\d\d)$/);return e="boolean"!=typeof e||e,n||e||(n=t.match(/^(\d\d):(\d\d):(\d\d)(\+|-)(\d\d):(\d\d)$/)),!!n&&(n[1]<24&&n[1]>=0&&n[2]<60&&n[2]>=0&&n[3]<60&&n[3]>=0&&n[5]<24&&n[5]>=0&&n[6]<60&&n[6]>=0)},convert:function(t,e){var n,i,r,o,s,a,u={};if(e="boolean"!=typeof e||e,!/^[0-9]{1,2}:[0-9]{1,2}(:[0-9.]*)?/.test(t)){if("Invalid Date"===(n=new Date(t)).toString())return"";t=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+"."+n.getMilliseconds()+n.getTimezoneOffsetAsTime()}return(i=t.toString().split(/(\+|-|Z)/)).length<1?"":(r=i[0].split(":"),s=i[2]?[i[1]].concat(i[2].split(":")):"Z"===i[1]?["+","00","00"]:[],u.hours=r[0].pad(2),u.minutes=r[1].pad(2),o=r[2]?r[2].split("."):["00"],u.seconds=o[0],u.milliseconds=o[1]||(e?"000":void 0),a=0===s.length?(new Date).getTimezoneOffsetAsTime():s[0]+s[1].pad(2)+":"+(s[2]?s[2].pad(2):"00"),t=u.hours+":"+u.minutes+":"+u.seconds+(u.milliseconds?"."+u.milliseconds:"")+a,this.validate(t,e)?t:"")}},barcode:{validate:function(){return!0}},geopoint:{validate:function(t){var e=t.toString().trim().split(" ");return""!==e[0]&&e[0]>=-90&&e[0]<=90&&""!==e[1]&&e[1]>=-180&&e[1]<=180&&(void 0===e[2]||!isNaN(e[2]))&&(void 0===e[3]||!isNaN(e[3])&&e[3]>=0)},convert:function(t){return t.toString().trim()}},geotrace:{validate:function(t){var e=t.toString().split(";");return e.length>=2&&e.every(function(t){return r.geopoint.validate(t)})},convert:function(t){return t.toString().trim()}},geoshape:{validate:function(t){var e=t.toString().split(";");return e.length>=4&&e[0]===e[e.length-1]&&e.every(function(t){return r.geopoint.validate(t)})},convert:function(t){return t.toString().trim()}},binary:{validate:function(){return!0}}};t.exports=r},function(t,e,n){"use strict";n(39),String.prototype.pad=function(t){for(var e=this;e.length<t;)e="0"+e;return e},void 0===console.deprecate&&(console.deprecate=function(t,e){console.warn(t+" is deprecated. Use "+e+" instead.")})},function(t,e,n){"use strict";var i=n(8);t.exports={alert:function(t){return window.alert(t),i.resolve()},confirm:function(t){return new i(function(e,n){window.confirm(t)?e():n()})},prompt:function(t,e){return new i(function(n,i){var r=window.prompt(t,e);r?n(r):i()})}}},function(t,e,n){"use strict";var i=n(8),r=n(0),o=n(5),s={},a=n(6).t;s.init=function(){return i.resolve(!0)},s.isWaitingForPermissions=function(){return!1},s.getFileUrl=function(t){return new i(function(e,n){t?"string"==typeof t?n("no!"):"object"==typeof t?s.isTooLarge(t)?n(new Error(a("filepicker.toolargeerror",{maxSize:s.getMaxSizeReadable()}))):e(URL.createObjectURL(t)):n(new Error("Unknown error occurred")):e(null)})},s.getObjectUrl=function(t){return s.getFileUrl(t).then(function(t){return/https?:\/\//.test(t)?s.urlToBlob(t).then(URL.createObjectURL):t})},s.urlToBlob=function(t){var e=new XMLHttpRequest;return new i(function(n){e.open("GET",t),e.responseType="blob",e.onload=function(){n(e.response)},e.send()})},s.getCurrentFiles=function(){var t=[];return r("form.or").find('input[type="file"]:not(.ignore), input[type="text"][data-drawing="true"]').each(function(){var e,n=null,i=null;"file"===this.type?n=this.files[0]:this.value&&(i=r(this).closest(".question")[0].querySelector(".draw-widget canvas"))&&((n=o.dataUriToBlobSync(i.toDataURL())).name=this.value),n&&n.name&&(e=o.getFilename(n,this.dataset.filenamePostfix),(n=new Blob([n],{type:n.type})).name=e,t.push(n))}),t},s.isTooLarge=function(){return!1},s.getMaxSizeReadable=function(){return"5MB"},t.exports=s},,function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(i),o=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[n].concat(o).concat([r]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){var i={},r=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),o=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var i=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),s=null,a=0,u=[],l=n(81);function c(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(g(r.parts[s],e))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(g(r.parts[s],e));i[r.id]={id:r.id,refs:1,parts:a}}}}function h(t,e){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]})}return n}function d(t,e){var n=o(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=o(t.insertAt.before,n);n.insertBefore(e,r)}}function p(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function f(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return n.nc}();i&&(t.attrs.nonce=i)}return m(e,t.attrs),d(t,e),e}function m(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,i,r,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var u=a++;n=s||(s=f(e)),i=y.bind(null,n,u,!1),r=y.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),d(t,e),e}(e),i=function(t,e,n){var i=n.css,r=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(i=l(i));r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([i],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),r=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=f(e),i=function(t,e){var n=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){p(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=r()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return c(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var s=n[o];(a=i[s.id]).refs--,r.push(a)}t&&c(h(t,e),e);for(o=0;o<r.length;o++){var a;if(0===(a=r[o]).refs){for(var u=0;u<a.parts.length;u++)a.parts[u]();delete i[a.id]}}}};var v=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function y(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=v(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}},function(t,e,n){(function(e){var n="Expected a function",i="__lodash_hash_undefined__",r=1/0,o=9007199254740991,s="[object Function]",a="[object GeneratorFunction]",u="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,h=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,g="object"==typeof e&&e&&e.Object===Object&&e,v="object"==typeof self&&self&&self.Object===Object&&self,y=g||v||Function("return this")();var _=Array.prototype,b=Function.prototype,w=Object.prototype,x=y["__core-js_shared__"],$=function(){var t=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),k=b.toString,E=w.hasOwnProperty,C=w.toString,T=RegExp("^"+k.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=y.Symbol,S=_.splice,D=U(y,"Map"),M=U(Object,"create"),A=L?L.prototype:void 0,P=A?A.toString:void 0;function N(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function O(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function I(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function R(t,e,n){var i=t[e];E.call(t,e)&&Z(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function j(t,e){for(var n=t.length;n--;)if(Z(t[n][0],e))return n;return-1}function F(t){return!(!Y(t)||function(t){return!!$&&$ in t}(t))&&(function(t){var e=Y(t)?C.call(t):"";return e==s||e==a}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?T:f).test(function(t){if(null!=t){try{return k.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function q(t,e,n,i){if(!Y(t))return t;for(var r=-1,o=(e=function(t,e){if(G(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||X(t))return!0;return c.test(t)||!l.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:function(t){return G(t)?t:V(t)}(e)).length,s=o-1,a=t;null!=a&&++r<o;){var u=H(e[r]),h=n;if(r!=s){var d=a[u];void 0===(h=i?i(d,u,a):void 0)&&(h=Y(d)?d:z(e[r+1])?[]:{})}R(a,u,h),a=a[u]}return t}function B(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function U(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return F(n)?n:void 0}function z(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||m.test(t))&&t>-1&&t%1==0&&t<e}N.prototype.clear=function(){this.__data__=M?M(null):{}},N.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},N.prototype.get=function(t){var e=this.__data__;if(M){var n=e[t];return n===i?void 0:n}return E.call(e,t)?e[t]:void 0},N.prototype.has=function(t){var e=this.__data__;return M?void 0!==e[t]:E.call(e,t)},N.prototype.set=function(t,e){return this.__data__[t]=M&&void 0===e?i:e,this},O.prototype.clear=function(){this.__data__=[]},O.prototype.delete=function(t){var e=this.__data__,n=j(e,t);return!(n<0||(n==e.length-1?e.pop():S.call(e,n,1),0))},O.prototype.get=function(t){var e=this.__data__,n=j(e,t);return n<0?void 0:e[n][1]},O.prototype.has=function(t){return j(this.__data__,t)>-1},O.prototype.set=function(t,e){var n=this.__data__,i=j(n,t);return i<0?n.push([t,e]):n[i][1]=e,this},I.prototype.clear=function(){this.__data__={hash:new N,map:new(D||O),string:new N}},I.prototype.delete=function(t){return B(this,t).delete(t)},I.prototype.get=function(t){return B(this,t).get(t)},I.prototype.has=function(t){return B(this,t).has(t)},I.prototype.set=function(t,e){return B(this,t).set(t,e),this};var V=W(function(t){t=function(t){return null==t?"":function(t){if("string"==typeof t)return t;if(X(t))return P?P.call(t):"";var e=t+"";return"0"==e&&1/t==-r?"-0":e}(t)}(t);var e=[];return h.test(t)&&e.push(""),t.replace(d,function(t,n,i,r){e.push(i?r.replace(p,"$1"):n||t)}),e});function H(t){if("string"==typeof t||X(t))return t;var e=t+"";return"0"==e&&1/t==-r?"-0":e}function W(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(n);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var s=t.apply(this,n);return i.cache=o.set(r,s),s};return i.cache=new(W.Cache||I),i}function Z(t,e){return t===e||t!=t&&e!=e}W.Cache=I;var G=Array.isArray;function Y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function X(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&C.call(t)==u}t.exports=function(t,e,n){return null==t?t:q(t,e,n)}}).call(this,n(10))},function(t,e,n){"use strict";(function(e){
/*!
Copyright (C) 2015 by WebReflection

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
function n(t){return encodeURIComponent(t).replace(s,l)}function i(t){return decodeURIComponent(t.replace(a," "))}function r(t){if(this[h]=Object.create(null),t)for(var e,n,r=(t||"").split("&"),o=0,s=r.length;o<s;o++)-1<(e=(n=r[o]).indexOf("="))&&this.append(i(n.slice(0,e)),i(n.slice(e+1)))}var o=r.prototype,s=/[!'\(\)~]|%20|%00/g,a=/\+/g,u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},l=function(t){return u[t]},c=function(){try{return!!Symbol.iterator}catch(t){return!1}}(),h="__URLSearchParams__:"+Math.random();o.append=function(t,e){var n=this[h];t in n?n[t].push(""+e):n[t]=[""+e]},o.delete=function(t){delete this[h][t]},o.get=function(t){var e=this[h];return t in e?e[t][0]:null},o.getAll=function(t){var e=this[h];return t in e?e[t].slice(0):[]},o.has=function(t){return t in this[h]},o.set=function(t,e){this[h][t]=[""+e]},o.forEach=function(t,e){var n=this[h];Object.getOwnPropertyNames(n).forEach(function(i){n[i].forEach(function(n){t.call(e,n,i,this)},this)},this)},o.keys=function(){var t=[];this.forEach(function(e,n){t.push(n)});var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c&&(e[Symbol.iterator]=function(){return e}),e},o.values=function(){var t=[];this.forEach(function(e){t.push(e)});var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c&&(e[Symbol.iterator]=function(){return e}),e},o.entries=function(){var t=[];this.forEach(function(e,n){t.push([n,e])});var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c&&(e[Symbol.iterator]=function(){return e}),e},c&&(o[Symbol.iterator]=o.entries),o.toJSON=function(){return{}},o.toString=function(){var t,e,i,r,o=this[h],s=[];for(e in o)for(i=n(e),t=0,r=o[e];t<r.length;t++)s.push(i+"="+n(r[t]));return s.join("&")},t.exports=e.URLSearchParams||r}).call(this,n(10))},,function(t,e,n){"use strict";(function(e){var i,r,o=n(87),s=n(5),a=n(0),u=n(8),l=n(88),c=n(12),h=n(27),d=/instance\(\s*(["'])((?:(?!\1)[A-z0-9.\-_]+))\1\s*\)/g,p=/(decimal-date-time\(|pow\(|indexed-repeat\(|format-date\(|coalesce\(|join\(|max\(|min\(|random\(|substr\(|int\(|uuid\(|regex\(|now\(|today\(|date\(|if\(|boolean-from-string\(|checklist\(|selected\(|selected-at\(|round\(|area\(|position\([^)])/,f="http://openrosa.org/xforms",m="http://openrosa.org/javarosa",g="http://enketo.org/xforms";n(28),((i=function(t,e){"string"==typeof t&&(t={modelStr:t}),t.external=t.external||[],t.submitted=void 0===t.submitted||t.submitted,(e=e||{}).full=void 0===e.full||e.full,this.$events=a("<div/>"),this.convertedExpressions={},this.templates={},this.loadErrors=[],this.data=t,this.options=e,this.namespaces={}}).prototype={get version(){return this.evaluate("/node()/@version","string",null,null,!0)},get instanceID(){return this.getMetaNode("instanceID").getVal()[0]},get deprecatedID(){return this.getMetaNode("deprecatedID").getVal()[0]||""},get instanceName(){return this.getMetaNode("instanceName").getVal()[0]}}).init=function(){var t,e,n,i,r=this;this.data.modelStr=this.data.modelStr.replace(/\s(xmlns=("|')[^\s>]+("|'))/g," data-$1"),this.options.full||(this.data.modelStr=this.data.modelStr.replace(/^(<model\s*><instance((?!<instance).)+<\/instance\s*>\s*)(<instance.+<\/instance\s*>)*/,"$1"));try{t="model",this.xml=a.parseXML(this.data.modelStr),this.data.external.forEach(function(o){for(t='instance "'+o.id+'"'||"instance unknown",n=r.getSecondaryInstance(o.id),i=n.childNodes,e=i.length-1;e>=0;e--)n.removeChild(i[e]);n.appendChild(a.parseXML(o.xmlStr).firstChild)}),this.createSession("__session",this.data.session)}catch(e){console.error("parseXML error"),this.loadErrors.push("Error trying to parse XML "+t+". "+e.message)}if(this.xml){try{this.$=a(this.xml),this.hasInstance=!!this.xml.querySelector("model > instance"),this.rootElement=this.xml.querySelector("instance > *")||this.xml.documentElement,this.setNamespaces(),this.getMetaNode("instanceID").get().get(0)||r.loadErrors.push("Invalid primary instance. Missing instanceID node."),this.$.find("model > instance[src]:empty").each(function(t,e){r.loadErrors.push('External instance "'+a(e).attr("id")+'" is empty.')}),this.trimValues(),this.extractTemplates()}catch(t){console.error(t),this.loadErrors.push(t.name+": "+t.message)}try{t="record",this.data.instanceStr&&this.mergeXml(this.data.instanceStr),this.setInstanceIdAndDeprecatedId()}catch(e){console.error(e),this.loadErrors.push("Error trying to parse XML "+t+". "+e.message)}}return this.loadErrors},i.prototype.createSession=function(t,e){var n,i,r=this.xml.querySelector("model"),o=["deviceid","username","email","phonenumber","simserial","subscriberid"];r&&(e="object"==typeof e?e:{},(n=r.querySelector('instance[id="'+t+'"]'))||(n=a.parseXML('<instance id="'+t+'"/>').documentElement,this.xml.adoptNode(n),r.appendChild(n)),o.forEach(function(t){e[t]=e[t]||s.readCookie("__enketo_meta_"+t)||t+" not found"}),i=a.parseXML("<session><context>"+o.map(function(t){return"<"+t+">"+e[t]+"</"+t+">"}).join("")+"</context></session>").documentElement,this.xml.adoptNode(i),n.appendChild(i))},i.prototype.getSecondaryInstance=function(t){var e;return[].slice.call(this.xml.querySelectorAll("model > instance")).some(function(n){return n.getAttribute("id")===t&&(e=n,!0)}),e},i.prototype.node=function(t,e,n){return new r(t,e,n,this)},i.prototype.importNode=function(t,e){var n,i;switch(t.nodeType){case document.ELEMENT_NODE:var r=document.createElementNS(t.namespaceURI,t.nodeName);if(t.attributes&&t.attributes.length>0)for(n=0,i=t.attributes.length;n<i;n++){var o=t.attributes[n];o.namespaceURI?r.setAttributeNS(o.namespaceURI,o.nodeName,t.getAttributeNS(o.namespaceURI,o.localName)):r.setAttribute(o.nodeName,t.getAttribute(o.nodeName))}if(e&&t.childNodes&&t.childNodes.length>0)for(n=0,i=t.childNodes.length;n<i;n++)r.appendChild(this.importNode(t.childNodes[n],e));return r;case document.TEXT_NODE:case document.CDATA_SECTION_NODE:case document.COMMENT_NODE:return document.createTextNode(t.nodeValue)}},i.prototype.mergeXml=function(t){var n,i,r,s,u,l,c,h,d=this;if(t){if(r=this.xml.querySelector("instance"),!(s=this.xml.querySelector("instance > *")))throw new Error("Model is corrupt. It does not contain a childnode of instance");t=(t=t.replace(/\s(xmlns=("|')[^\s>]+("|'))/g,"")).replace(/<!--[^>]*-->/g,""),c=a.parseXML(t),h=a(c),l=c.querySelectorAll("[*|template]");for(var p=0;p<l.length;p++)a(l[p]).remove();if(h.find("*").each(function(){var t,e,n,i=0;try{t=d.getXPath(this,"instance",!1),(void 0!==d.templates[t]||d.getRepeatIndex(this)>0)&&(e=d.getXPath(this,"instance",!0),d.evaluate(e,"node",null,null,!0)||((n=e.match(/([^[]+)\[(\d+)\]\//g))&&n.length>0&&(i=n[n.length-1].match(/\[(\d+)\]/)[1]-1),d.addRepeat(t,i,!0)))}catch(t){console.log("Ignored error:",t)}}),h.find("*").filter(function(){var t=this.textContent;return 0===this.childNodes.length&&0===t.trim().length}).each(function(){var t=d.getXPath(this,"instance",!0),e=d.node(t,0).get()[0];e&&(0===a(e).children().length?e.textContent="":d.evaluate(".//*[not(*)]","nodes",t,0,!0).forEach(function(t){t.textContent=""}))}),i=new o({join:!1}),n=(new XMLSerializer).serializeToString(s),t=(new XMLSerializer).serializeToString(c),i.AddSource(n),i.AddSource(t),i.error.code)throw new Error(i.error.text);u=a.parseXML(i.Get(1)),this.xml.querySelector("instance").removeChild(s),s=e.navigator.userAgent.indexOf("Trident/")>=0?this.importNode(u.documentElement,!0):this.xml.adoptNode(u.documentElement,!0),r.appendChild(s),this.rootElement=s}},i.prototype.getXPath=function(t,e,n){var i,r=[],o="",s=t.nodeName,a=t.parentNode,u=a.nodeName;for(e=e||"#document",(n=n||!1)&&(i=this.getRepeatIndex(t))>0&&(o="["+(i+1)+"]"),r.push(s+o);a&&u!==e&&"#document"!==u;)n&&(o=(i=this.getRepeatIndex(a))>0?"["+(i+1)+"]":""),r.push(u+o),u=(a=a.parentNode).nodeName;return"/"+r.reverse().join("/")},i.prototype.getRepeatIndex=function(t){for(var e=0,n=t.nodeName,i=t.previousSibling;i;)i.nodeName&&i.nodeName===n&&e++,i=i.previousSibling;return e},i.prototype.trimValues=function(){this.node(null,null,{noEmpty:!0}).get().each(function(){this.textContent=this.textContent.trim()})},i.prototype.setInstanceIdAndDeprecatedId=function(){var t,e,n,i;e=(t=this.getMetaNode("instanceID")).get().get(0),i=t.getVal()[0],this.data.instanceStr&&this.data.submitted&&(n=this.getMetaNode("deprecatedID").get().get(0),e.textContent="",n||(n=a.parseXML("<deprecatedID/>").documentElement,this.xml.adoptNode(n),this.xml.querySelector("* > meta").appendChild(n))),t.getVal()[0]||t.setVal(this.evaluate('concat("uuid:", uuid())',"string")),n&&this.getMetaNode("deprecatedID").setVal(i)},i.prototype.bindJsEvaluator=n(89),i.prototype.getMetaNode=function(t){var e=this.getNamespacePrefix(f),n=this.node("/*/"+e+":meta/"+e+":"+t);return 0===n.get().length&&(n=this.node("/*/meta/"+t)),n},i.prototype.getRepeatCommentText=function(t){return"repeat:/"+(t=t.trim())},i.prototype.getRepeatCommentEl=function(t,e){var n='//comment()[self::comment()="'+this.getRepeatCommentText(t)+'"]';return this.evaluate(n,"nodes",null,null,!0)[e]},i.prototype.addRepeat=function(t,e,n){var i,r,o,s,u=this;this.templates[t]||this.extractFakeTemplates([t]),s=this.templates[t],i=(o=this.getRepeatSeries(t,e)).length?a(o[o.length-1]):a(this.getRepeatCommentEl(t,e)),n||o.forEach(function(t){u.addOrdinalAttribute(t,o[0])}),s&&1===i.length?(r=a(s).clone().insertAfter(i),this.removeOrdinalAttributes(r[0]),n||this.addOrdinalAttribute(r[0],o[0]),n&&r.find("*").filter(function(){return 0===a(this).children().length}).text("")):console.error("Could not find template node and/or node to insert the clone after")},i.prototype.addOrdinalAttribute=function(t,e){var n,i,r=this.getNamespacePrefix(g);e=e||t,!0!==c.repeatOrdinals||t.getAttributeNS(g,"ordinal")||(n=e.getAttributeNS(g,"last-used-ordinal")||0,i=Number(n)+1,e.setAttributeNS(g,r+":last-used-ordinal",i),t.setAttributeNS(g,r+":ordinal",i))},i.prototype.removeOrdinalAttributes=function(t){if(!0===c.repeatOrdinals){var e=Array.prototype.slice.call(t.querySelectorAll("[*|ordinal]"));e.push(t);for(var n=0;n<e.length;n++)e[n].removeAttributeNS(g,"last-used-ordinal"),e[n].removeAttributeNS(g,"ordinal")}},i.prototype.getRepeatSeries=function(t,e){var n,i,r,o=this.getRepeatCommentEl(t,e),s=[];if(o)for(i=(n=o.textContent.substr("repeat:/".length).split("/"))[n.length-1],r=o.nextSibling;r;)r.nodeName&&r.nodeName===i&&s.push(r),r=r.nextSibling;return s},i.prototype.hasPreviousSiblingElementSameName=function(t){var e=!1,n=t.nodeName;for(t=t.previousSibling;t;){if(t.nodeName&&t.nodeName===n){e=!0;break}t=t.previousSibling}return e},i.prototype.hasPreviousCommentSiblingWithContent=function(t,e){var n=!1;for(t=t.previousSibling;t;){if(t.nodeType===Node.COMMENT_NODE&&t.textContent===e){n=!0;break}t=t.previousSibling}return n},i.prototype.determineIndex=function(t){var e,n,i,r=this;return 1===t.length?(e=t.prop("nodeName"),n=this.getXPath(t.get(0),"instance"),1===(i=this.$.find(e.replace(/\./g,"\\.")).filter(function(){return n===r.getXPath(this,"instance")})).length?null:i.index(t)):(console.error("no node, or multiple nodes, provided to determineIndex function"),-1)},i.prototype.extractTemplates=function(){var t=this;this.getTemplateNodes().reverse().forEach(function(e){var n=t.getXPath(e,"instance");t.addTemplate(n,e),a(e).remove()})},i.prototype.extractFakeTemplates=function(t){var e,n=this;t.forEach(function(t){(e=n.evaluate(t,"node",null,null,!0))&&n.addTemplate(t,e,!0)})},i.prototype.addRepeatComments=function(t){var e=this.getRepeatCommentText(t),n=this;this.evaluate(t,"nodes",null,null,!0).forEach(function(t){n.hasPreviousSiblingElementSameName(t)||n.hasPreviousCommentSiblingWithContent(t,e)||a(t).before(document.createComment(e))})},i.prototype.addTemplate=function(t,e,n){var i;this.addRepeatComments(t),this.templates[t]||(i=a(e).clone().removeAttr("template").removeAttr("jr:template"),n&&i.find("*").filter(function(){return 0===a(this).children().length}).text(""),this.templates[t]=i[0])},i.prototype.getTemplateNodes=function(){var t=this.getNamespacePrefix(m);return this.evaluate("/model/instance[1]/*//*[@template] | /model/instance[1]/*//*[@"+t+":template]","nodes",null,null,!1)},i.prototype.getStr=function(){var t=(new XMLSerializer).serializeToString(this.xml.querySelector("instance > *")||this.xml.documentElement,"text/xml");return t=(t=t.replace(/\s(data-)(xmlns=("|')[^\s>]+("|'))/g," $2")).replace(new RegExp("\x3c!--repeat:/\\/[^>]+--\x3e","g"),""),-1===navigator.userAgent.indexOf("Trident/")&&(t=this.removeDuplicateEnketoNsDeclarations(t)),t},i.prototype.removeDuplicateEnketoNsDeclarations=function(t){var e=0,n=new RegExp("( xmlns:"+this.getNamespacePrefix(g)+'="'+g+'")',"g");return t.replace(n,function(t){return++e>1?"":t})},i.prototype.makeBugCompliant=function(t,e,n){var i,r,o,s,a,u,l,c;for(i=(c=(s=this.node(e,n).get()).parents().add(s)).length-1;i>=0;i--)u=(a=c.eq(i)).prop("nodeName").replace(/\./g,"\\."),l=a.siblings(u).not("[template]"),"instance"!==u.toLowerCase()&&"model"!==u.toLowerCase()&&l.length>0&&(r=this.getXPath(a.get(0),"instance"),o=l.add(a).index(a),t=t.replace(new RegExp(r+"/","g"),r+"["+(o+1)+"]/"));return t},i.prototype.setNamespaces=function(){var t,e=this.hasInstance?"/model/instance":"",n=this;this.evaluate(e+"/*","nodes",null,null,!0).forEach(function(e){if(e.hasAttributes())for(var i=0;i<e.attributes.length;i++){var r=e.attributes[i];0===r.name.indexOf("xmlns:")&&(n.namespaces[r.name.substring(6)]=r.value)}[["orx",f,!1],["jr",m,!1],["enk",g,!0===c.repeatOrdinals]].forEach(function(i){n.getNamespacePrefix(i[1])||(t=n.namespaces[i[0]]?"__"+i[0]:i[0],n.namespaces[t]=i[1],i[2]&&e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+t,i[1]))})})},i.prototype.getNamespacePrefix=function(t){var e;for(var n in this.namespaces)if(this.namespaces.hasOwnProperty(n)&&this.namespaces[n]===t){e=n;break}return e},i.prototype.getNsResolver=function(){var t=void 0===this.namespaces?{}:this.namespaces;return{lookupNamespaceURI:function(e){return t[e]||null}}},i.prototype.shiftRoot=function(t){var e=/"([^"]*)(")|'([^']*)(')/g;return this.hasInstance&&(t=(t=(t=(t=t.replace(e,function(t,e,n,i,r){var o=void 0!==e?encodeURIComponent(e):encodeURIComponent(i),s=n||r;return s+o+s})).replace(/^(\/(?!model\/)[^/][^/\s,"']*\/)/g,"/model/instance[1]$1")).replace(/([^a-zA-Z0-9.\])/*_-])(\/(?!model\/)[^/][^/\s,"']*\/)/g,"$1/model/instance[1]$2")).replace(e,function(t,e,n,i,r){var o=void 0!==e?decodeURIComponent(e):decodeURIComponent(i),s=n||r;return s+o+s})),t},i.prototype.replaceInstanceFn=function(t){var e,n=this;return t.replace(d,function(t,i,r){if(e='/model/instance[@id="'+r+'"]',n.evaluate(e,"nodes",null,null,!0).length)return e;throw new l('instance "'+r+'" does not exist in model')})},i.prototype.replaceCurrentFn=function(t,e){return t=(t=t.replace("current()/.",e+"/.")).replace("current()/","/")},i.prototype.replaceIndexedRepeatFn=function(t,e,n){var i=this,r=s.parseFunctionFromExpression(t,"indexed-repeat");return r.length?(r.forEach(function(r){var o,s,a,u=r[1];if(u.length%2!=1)throw new l("indexed repeat with incorrect number of parameters found: "+r[0]);for(s=u[0],o=u.length-1;o>1;o-=2)a=isNaN(u[o])?i.evaluate(u[o],"number",e,n,!0):u[o],s=s.replace(u[o-1],u[o-1]+"[position() = "+a+"]");t=t.replace(r[0],s)}),t):t},i.prototype.replacePullDataFn=function(t,e,n){var i,r=this.convertPullDataFn(t,e,n);for(var o in r)r.hasOwnProperty(o)&&(i=this.evaluate(r[o],"string",e,n,!0),t=t.replace(o,'"'+i+'"'));return t},i.prototype.convertPullDataFn=function(t,e,n){var i=this,r=s.parseFunctionFromExpression(t,"pulldata"),o={};return r.length?(r.forEach(function(t){var r,a,u=t[1];if(4!==u.length)throw new l("pulldata with incorrect number of parameters found: "+t[0]);u[1]=s.stripQuotes(u[1]),u[2]=s.stripQuotes(u[2]),r=""===(r=i.evaluate(u[3],"string",e,n,!0))||isNaN(r)?"'"+r+"'":r,a="instance("+u[0]+")/root/item["+u[2]+" = "+r+"]/"+u[1],o[t[0]]=a}),o):o},i.prototype.evaluate=function(t,e,n,i,r){var o,s,a,u,c,h,d,f,m,g,v,y;for(u in v=t,r=r||!1,e=e||"any",i=i||0,a=this.xml,m=null,n?(m=(d=this.node(n).get()).length,s=d.eq(i)[0]):s=this.rootElement,g=[t,n,i,m].join("|"),t=this.replaceIndexedRepeatFn(t,n,i),y=v===(t=this.replacePullDataFn(t,n,i)),this.convertedExpressions[g]?t=this.convertedExpressions[g]:(t=t.trim(),t=this.replaceInstanceFn(t),t=this.replaceCurrentFn(t,this.getXPath(s,"instance",!0)),t=this.shiftRoot(t),m&&m>1&&(t=this.makeBugCompliant(t,n,i)),t=(t=(t=t.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"'),y&&(this.convertedExpressions[g]=t)),c={0:["any","ANY_TYPE"],1:["number","NUMBER_TYPE","numberValue"],2:["string","STRING_TYPE","stringValue"],3:["boolean","BOOLEAN_TYPE","booleanValue"],7:["nodes","ORDERED_NODE_SNAPSHOT_TYPE"],9:["node","FIRST_ORDERED_NODE_TYPE","singleNodeValue"]})if(c.hasOwnProperty(u)){if(c[u=Number(u)][0]===e)break;u=0}if(r&&void 0!==a.evaluate&&!p.test(t))try{h=a.evaluate(t,s,this.getNsResolver(),u,null)}catch(e){console.log("%cWell native XPath evaluation did not work... No worries, worth a shot, the expression probably contained unknown OpenRosa functions or errors:","color:orange",t)}if(!h)try{void 0===a.jsEvaluate&&this.bindJsEvaluator(),h=a.jsEvaluate(t,s,this.getNsResolver(),u,null)}catch(e){throw new l("Could not evaluate: "+t+", message: "+e.message)}if(h){if(0===u){for(u in c)if(c.hasOwnProperty(u)&&(u=Number(u))===Number(h.resultType)&&u>0&&u<4){f=h[c[u][2]];break}console.error("Expression: "+t+" did not return any boolean, string or number value as expected")}else if(7===u)for(f=[],o=0;o<h.snapshotLength;o++)f.push(h.snapshotItem(o));else f=h[c[u][2]];return f}},(r=function(t,e,n,i){var r=i.hasInstance?"/model/instance[1]//*":"//*";this.model=i,this.originalSelector=t,this.selector="string"==typeof t&&t.length>0?t:r,n=void 0!==n&&null!==n?n:{},this.filter=n,this.filter.onlyLeaf=void 0!==n.onlyLeaf&&n.onlyLeaf,this.filter.noEmpty=void 0!==n.noEmpty&&n.noEmpty,this.index=e}).prototype.get=function(){var t,e;return this.nodes||(this.nodes=this.model.evaluate(this.selector,"nodes",null,null,!0)),t=!0===this.filter.noEmpty?a(this.nodes).filter(function(){var t=a(this);return e=t.text(),0===t.children().length&&e.trim().length>0}):!0===this.filter.onlyLeaf?a(this.nodes).filter(function(){return 0===a(this).children().length}):a(this.nodes),void 0!==this.index&&null!==this.index?t.eq(this.index):t},r.prototype.setIndex=function(t){this.index=t},r.prototype.setVal=function(t,e,n,i,r){var o,s,u,l,h;return s=this.getVal()[0],u=void 0!==t&&null!==t?Array.isArray(t)?t.join(" "):t.toString():"",u=this.convert(u,n),1===(o=this.get()).length&&u.toString().trim()!==s.toString().trim()?(o.text(u.toString()),(l=this.getClosestRepeat()).nodes=[o.prop("nodeName")],l=(h=this.model.getUpdateEventData(o.get(0),n))?a.extend({},l,h):l,this.model.$events.trigger("dataupdate",l),c.validateContinuously&&!0!==r&&this.validate(e,i,n),"binary"===n&&(u.length>0?o.attr("type","file"):o.removeAttr("type")),l):o.length>1?(console.error("nodeset.setVal expected nodeset with one node, but received multiple"),null):0===o.length?(console.log("Data node: "+this.selector+" with null-based index: "+this.index+" not found. Ignored."),null):null},r.prototype.getVal=function(){var t=[];return this.get().each(function(){t.push(a(this).text())}),t},r.prototype.getClosestRepeat=function(){for(var t=this.get().get(0),e=t.nodeName;!("instance"===e||t.nextSibling&&t.nextSibling.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e);)e=(t=t.parentNode).nodeName;return"instance"===e?{}:{repeatPath:this.model.getXPath(t,"instance"),repeatIndex:this.model.determineIndex(a(t))}},r.prototype.remove=function(){var t,e,n,i,r,o;if((t=this.get()).length>0){for(e=t.prop("nodeName"),n=this.model.getXPath(t.get(0),"instance"),i=this.model.determineIndex(t),r=this.model.getRemovalEventData(t.get(0)),this.model.templates[n]||this.model.extractFakeTemplates([n]),o=t.get(0).nextSibling,t.remove(),this.nodes=null,this.model.$events.trigger("dataupdate",{nodes:null,repeatPath:n,repeatIndex:i});o&&o.nodeName==e;)o=o.nextSibling,this.model.$events.trigger("dataupdate",{nodes:null,repeatPath:n,repeatIndex:i++});this.model.$events.trigger("removed",r)}else console.error("could not find node "+this.selector+" with index "+this.index+" to remove ")},r.prototype.convert=function(t,e){return""===t.toString()?t:void 0!==e&&null!==e&&void 0!==h[e.toLowerCase()]&&void 0!==h[e.toLowerCase()].convert?h[e.toLowerCase()].convert(t):t},r.prototype.validate=function(t,e,n){var i=this,r={};return this.validateRequired(e).then(function(e){return r.requiredValid=e,!1===e?null:i.validateConstraintAndType(t,n)}).then(function(t){return r.constraintValid=t,r})},r.prototype.validateConstraintAndType=function(t,e){var n,i=this;return e&&void 0!==h[e.toLowerCase()]||(e="string"),t||"string"!==e&&"select"!==e&&"select1"!==e&&"binary"!==e?""===(n=i.getVal()[0]).toString()?u.resolve(!0):u.resolve().then(function(){return h[e.toLowerCase()].validate(n)}).then(function(e){var n=!(void 0!==t&&null!==t&&t.length>0)||i.model.evaluate(t,"boolean",i.originalSelector,i.index);return e&&n}):u.resolve(!0)},r.prototype.isRequired=function(t){return!(!t||"false()"===t.trim())&&("true()"===t.trim()||this.model.evaluate(t,"boolean",this.originalSelector,this.index))},r.prototype.validateRequired=function(t){var e=this;return!t||this.getVal()[0]?u.resolve(!0):u.resolve().then(function(){return!e.isRequired(t)})},i.prototype.getUpdateEventData=function(){},i.prototype.getRemovalEventData=function(){},i.prototype.types=h,t.exports=i,i.prototype.getVersion=function(){return console.warn("FormModel.getVersion() is deprecated, use model.version"),this.version},i.prototype.get=function(){return console.warn("model.get() is deprecated, use model.$"),this.$||null},i.prototype.getXML=function(){return console.warn("model.getXML() is deprecated, use model.xml"),this.xml||null},i.prototype.getInstanceID=function(){return console.warn("model.getInstanceID() is deprecated, use model.instanceID"),this.instanceID},i.prototype.getDeprecatedID=function(){return console.warn("model.getDeprecatedID() is deprecated, use model.deprecatedID"),this.deprecatedID},i.prototype.getInstanceName=function(){return console.warn("model.getInstanceName() is deprecated, use model.instanceName"),this.instanceName}}).call(this,n(10))},function(t,e){Date.prototype.toISOLocalString=function(){return"Invalid Date"===this.toString()?this.toString():new Date(this.getTime()-60*this.getTimezoneOffset()*1e3).toISOString().replace("Z",this.getTimezoneOffsetAsTime())},Date.prototype.getTimezoneOffsetAsTime=function(){var t,e=function(t){return t<10?"0"+t:t};return"Invalid Date"===this.toString()?this.toString():((t=this.getTimezoneOffset())<0?"+":"-")+e(Math.abs(Math.floor(t/60)))+":"+e(Math.abs(Math.floor(t%60)))}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){"use strict";var i=n(0);i.fn.clearInputs=function(t,e){return t=t||"edit",e=e||"",this.each(function(){i(this).find(".file-preview").remove(),i(this).find("input, select, textarea").not(".ignore").each(function(){var n,r=i(this),o=r.attr("type");switch("SELECT"===r.prop("nodeName").toUpperCase()&&(o="select"),"TEXTAREA"===r.prop("nodeName").toUpperCase()&&(o="textarea"),o){case"file":n=this.dataset.loadedFileName,delete this.dataset.loadedFileName;case"date":case"datetime":case"time":case"number":case"search":case"color":case"range":case"url":case"email":case"password":case"text":case"tel":case"hidden":case"textarea":(""!==r.val()||n)&&r.val("").trigger(t).trigger(e);break;case"radio":case"checkbox":r.prop("checked")&&(r.prop("checked",!1),r.trigger(t).trigger(e));break;case"select":r[0].selectedIndex>0&&(r[0].selectedIndex=0,r.trigger(t).trigger(e));break;default:console.error("Unrecognized input type found when trying to reset",this)}})})},i.fn.reverse=[].reverse},function(t,e,n){var i,r,o;
/*!
 * Datepicker for Bootstrap v1.8.0 (https://github.com/uxsolutions/bootstrap-datepicker)
 *
 * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)
 */r=[n(0)],void 0===(o="function"==typeof(i=function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function r(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function o(n,i){return function(){return i!==e&&t.fn.datepicker.deprecated(i),this[n].apply(this,arguments)}}var s=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;n<i;n++)if(0<=this[n].valueOf()-e&&this[n].valueOf()-e<864e5)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new s;return t.replace(this),t}};return function(){var n=[];return n.push.apply(n,arguments),t.extend(n,e),n}}(),a=function(e,n){t.data(e,"datepicker",this),this._process_options(n),this.dates=new s,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=t(f.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(t,e){return Number(e)+1}),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};a.prototype={constructor:a,_resolveViewName:function(e){return t.each(f.viewModes,function(n,i){if(e===n||-1!==t.inArray(e,i.names))return e=n,!1}),e},_resolveDaysOfWeek:function(e){return t.isArray(e)||(e=e.split(/[,\s]*/)),t.map(e,Number)},_check_template:function(n){try{if(n===e||""===n)return!1;if((n.match(/[<>]/g)||[]).length<=0)return!0;var i=t(n);return i.length>0}catch(t){return!1}},_process_options:function(e){this._o=t.extend({},this._o,e);var r=this.o=t.extend({},this._o),o=r.language;p[o]||(o=o.split("-")[0],p[o]||(o=h.language)),r.language=o,r.startView=this._resolveViewName(r.startView),r.minViewMode=this._resolveViewName(r.minViewMode),r.maxViewMode=this._resolveViewName(r.maxViewMode),r.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,r.startView)),!0!==r.multidate&&(r.multidate=Number(r.multidate)||!1,!1!==r.multidate&&(r.multidate=Math.max(0,r.multidate))),r.multidateSeparator=String(r.multidateSeparator),r.weekStart%=7,r.weekEnd=(r.weekStart+6)%7;var s=f.parseFormat(r.format);r.startDate!==-1/0&&(r.startDate?r.startDate instanceof Date?r.startDate=this._local_to_utc(this._zero_time(r.startDate)):r.startDate=f.parseDate(r.startDate,s,r.language,r.assumeNearbyYear):r.startDate=-1/0),r.endDate!==1/0&&(r.endDate?r.endDate instanceof Date?r.endDate=this._local_to_utc(this._zero_time(r.endDate)):r.endDate=f.parseDate(r.endDate,s,r.language,r.assumeNearbyYear):r.endDate=1/0),r.daysOfWeekDisabled=this._resolveDaysOfWeek(r.daysOfWeekDisabled||[]),r.daysOfWeekHighlighted=this._resolveDaysOfWeek(r.daysOfWeekHighlighted||[]),r.datesDisabled=r.datesDisabled||[],t.isArray(r.datesDisabled)||(r.datesDisabled=r.datesDisabled.split(",")),r.datesDisabled=t.map(r.datesDisabled,function(t){return f.parseDate(t,s,r.language,r.assumeNearbyYear)});var a=String(r.orientation).toLowerCase().split(/\s+/g),u=r.orientation.toLowerCase();if(a=t.grep(a,function(t){return/^auto|left|right|top|bottom$/.test(t)}),r.orientation={x:"auto",y:"auto"},u&&"auto"!==u)if(1===a.length)switch(a[0]){case"top":case"bottom":r.orientation.y=a[0];break;case"left":case"right":r.orientation.x=a[0]}else u=t.grep(a,function(t){return/^left|right$/.test(t)}),r.orientation.x=u[0]||"auto",u=t.grep(a,function(t){return/^top|bottom$/.test(t)}),r.orientation.y=u[0]||"auto";if(r.defaultViewDate instanceof Date||"string"==typeof r.defaultViewDate)r.defaultViewDate=f.parseDate(r.defaultViewDate,s,r.language,r.assumeNearbyYear);else if(r.defaultViewDate){var l=r.defaultViewDate.year||(new Date).getFullYear(),c=r.defaultViewDate.month||0,d=r.defaultViewDate.day||1;r.defaultViewDate=n(l,c,d)}else r.defaultViewDate=i()},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(i=e,r=t[o][1]):3===t[o].length&&(i=t[o][1],r=t[o][2]),n.on(r,i)},_unapplyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(r=e,i=t[o][1]):3===t[o].length&&(r=t[o][1],i=t[o][2]),n.off(i,r)},_buildEvents:function(){var e={keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this),paste:t.proxy(this.paste,this)};!0===this.o.showOnFocus&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.inputField.length?this._events=[[this.inputField,e],[this.component,{click:t.proxy(this.show,this)}]]:this._events=[[this.element,{click:t.proxy(this.show,this),keydown:t.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":t.proxy(function(t){this.update(t.date)},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[this.picker,".prev, .next",{click:t.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:t.proxy(this.dayCellClick,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),r=this._utc_to_local(i);this.element.trigger({type:e,date:r,viewMode:this.viewMode,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return f.formatDate(n,e,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var n;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==t.inArray("text/plain",e.originalEvent.clipboardData.types))n=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),e.preventDefault()},_utc_to_local:function(t){if(!t)return t;var e=new Date(t.getTime()+6e4*t.getTimezoneOffset());return e.getTimezoneOffset()!==t.getTimezoneOffset()&&(e=new Date(t.getTime()+6e4*e.getTimezoneOffset())),e},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&n(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return t!==e?new Date(t):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,t.map(e,this._utc_to_local)),this},setDate:o("setDates"),setUTCDate:o("setUTCDates"),remove:o("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var t=this.getFormattedDate();return this.inputField.val(t),this},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return f.formatDate(t,n,i)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){return this._process_options({datesDisabled:t}),this.update(),this},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=t(this.o.container),r=i.width(),o="body"===this.o.container?t(document).scrollTop():i.scrollTop(),s=i.offset(),a=[0];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!==e&&0!==Number(e)&&a.push(Number(e))});var u=Math.max.apply(Math,a)+this.o.zIndexOffset,l=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),d=l.left-s.left,p=l.top-s.top;"body"!==this.o.container&&(p+=o),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(d-=e-h)):l.left<0?(this.picker.addClass("datepicker-orient-left"),d-=l.left-10):d+e>r?(this.picker.addClass("datepicker-orient-right"),d+=h-e):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var f=this.o.orientation.y;if("auto"===f&&(f=-o+p-n<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+f),"top"===f?p-=n+parseInt(this.picker.css("padding-top")):p+=c,this.o.rtl){var m=r-(d+h);this.picker.css({top:p,right:m,zIndex:u})}else this.picker.css({top:p,left:d,zIndex:u});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),n=[],i=!1;return arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)},this)),i=!0):(n=(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy(function(t){return f.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),n=t.grep(n,t.proxy(function(t){return!this.dateWithinRange(t)||!t},this),!0),this.dates.replace(n),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),i?(this.setValue(),this.element.change()):this.dates.length&&String(e)!==String(this.dates)&&i&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&e.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var e=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(n+='<th class="cw">&#160;</th>');e<this.o.weekStart+7;)n+='<th class="dow',-1!==t.inArray(e,this.o.daysOfWeekDisabled)&&(n+=" disabled"),n+='">'+p[this.o.language].daysMin[e++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)}},fillMonths:function(){for(var t,e=this._utc_to_local(this.viewDate),n="",i=0;i<12;i++)t=e&&e.getMonth()===i?" focused":"",n+='<span class="month'+t+'">'+p[this.o.language].monthsShort[i]+"</span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var n=[],o=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),a=i();return e.getUTCFullYear()<o||e.getUTCFullYear()===o&&e.getUTCMonth()<s?n.push("old"):(e.getUTCFullYear()>o||e.getUTCFullYear()===o&&e.getUTCMonth()>s)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&r(e,a)&&n.push("today"),-1!==this.dates.contains(e)&&n.push("active"),this.dateWithinRange(e)||n.push("disabled"),this.dateIsDisabled(e)&&n.push("disabled","disabled-date"),-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&n.push("selected"),e.valueOf()===this.range[0]&&n.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,i,r,o,s,a,u){for(var l,c,h,d="",p=r/10,f=this.picker.find(n),m=Math.floor(o/r)*r,g=m+9*p,v=Math.floor(this.viewDate.getFullYear()/p)*p,y=t.map(this.dates,function(t){return Math.floor(t.getUTCFullYear()/p)*p}),_=m-p;_<=g+p;_+=p)l=[i],c=null,_===m-p?l.push("old"):_===g+p&&l.push("new"),-1!==t.inArray(_,y)&&l.push("active"),(_<s||_>a)&&l.push("disabled"),_===v&&l.push("focused"),u!==t.noop&&((h=u(new Date(_,0,1)))===e?h={}:"boolean"==typeof h?h={enabled:h}:"string"==typeof h&&(h={classes:h}),!1===h.enabled&&l.push("disabled"),h.classes&&(l=l.concat(h.classes.split(/\s+/))),h.tooltip&&(c=h.tooltip)),d+='<span class="'+l.join(" ")+'"'+(c?' title="'+c+'"':"")+">"+_+"</span>";f.find(".datepicker-switch").text(m+"-"+g),f.find("td").html(d)},fill:function(){var i,r,o=new Date(this.viewDate),s=o.getUTCFullYear(),a=o.getUTCMonth(),u=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,l=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,d=p[this.o.language].today||p.en.today||"",m=p[this.o.language].clear||p.en.clear||"",g=p[this.o.language].titleFormat||p.en.titleFormat;if(!isNaN(s)&&!isNaN(a)){this.picker.find(".datepicker-days .datepicker-switch").text(f.formatDate(o,g,this.o.language)),this.picker.find("tfoot .today").text(d).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?"table-cell":"none"),this.picker.find("tfoot .clear").text(m).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var v=n(s,a,0),y=v.getUTCDate();v.setUTCDate(y-(v.getUTCDay()-this.o.weekStart+7)%7);var _=new Date(v);v.getUTCFullYear()<100&&_.setUTCFullYear(v.getUTCFullYear()),_.setUTCDate(_.getUTCDate()+42),_=_.valueOf();for(var b,w,x=[];v.valueOf()<_;){if((b=v.getUTCDay())===this.o.weekStart&&(x.push("<tr>"),this.o.calendarWeeks)){var $=new Date(+v+(this.o.weekStart-b-7)%7*864e5),k=new Date(Number($)+(11-$.getUTCDay())%7*864e5),E=new Date(Number(E=n(k.getUTCFullYear(),0,1))+(11-E.getUTCDay())%7*864e5),C=(k-E)/864e5/7+1;x.push('<td class="cw">'+C+"</td>")}(w=this.getClassNames(v)).push("day");var T=v.getUTCDate();this.o.beforeShowDay!==t.noop&&((r=this.o.beforeShowDay(this._utc_to_local(v)))===e?r={}:"boolean"==typeof r?r={enabled:r}:"string"==typeof r&&(r={classes:r}),!1===r.enabled&&w.push("disabled"),r.classes&&(w=w.concat(r.classes.split(/\s+/))),r.tooltip&&(i=r.tooltip),r.content&&(T=r.content)),w=t.isFunction(t.uniqueSort)?t.uniqueSort(w):t.unique(w),x.push('<td class="'+w.join(" ")+'"'+(i?' title="'+i+'"':"")+' data-date="'+v.getTime().toString()+'">'+T+"</td>"),i=null,b===this.o.weekEnd&&x.push("</tr>"),v.setUTCDate(v.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(x.join(""));var L=p[this.o.language].monthsTitle||p.en.monthsTitle||"Months",S=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?L:s).end().find("tbody span").removeClass("active");if(t.each(this.dates,function(t,e){e.getUTCFullYear()===s&&S.eq(e.getUTCMonth()).addClass("active")}),(s<u||s>c)&&S.addClass("disabled"),s===u&&S.slice(0,l).addClass("disabled"),s===c&&S.slice(h+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var D=this;t.each(S,function(n,i){var r=new Date(s,n,1),o=D.o.beforeShowMonth(r);o===e?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),!1!==o.enabled||t(i).hasClass("disabled")||t(i).addClass("disabled"),o.classes&&t(i).addClass(o.classes),o.tooltip&&t(i).prop("title",o.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,s,u,c,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,s,u,c,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,s,u,c,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var t,e,n=new Date(this.viewDate),i=n.getUTCFullYear(),r=n.getUTCMonth(),o=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,s=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,a=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,u=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,l=1;switch(this.viewMode){case 4:l*=10;case 3:l*=10;case 2:l*=10;case 1:t=Math.floor(i/l)*l<o,e=Math.floor(i/l)*l+l>a;break;case 0:t=i<=o&&r<s,e=i>=a&&r>u}this.picker.find(".prev").toggleClass("disabled",t),this.picker.find(".next").toggleClass("disabled",e)}},click:function(e){var r,o,s,a;e.preventDefault(),e.stopPropagation(),(r=t(e.target)).hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),r.hasClass("today")&&!r.hasClass("day")&&(this.setViewMode(0),this._setDate(i(),"linked"===this.o.todayBtn?null:"view")),r.hasClass("clear")&&this.clearDates(),r.hasClass("disabled")||(r.hasClass("month")||r.hasClass("year")||r.hasClass("decade")||r.hasClass("century"))&&(this.viewDate.setUTCDate(1),o=1,1===this.viewMode?(a=r.parent().find("span").index(r),s=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(a)):(a=0,s=Number(r.text()),this.viewDate.setUTCFullYear(s)),this._trigger(f.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(n(s,a,o)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(e){var n=t(e.currentTarget),i=n.data("date"),r=new Date(i);this.o.updateViewDate&&(r.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),r.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(r)},navArrowsClick:function(e){var n=t(e.currentTarget),i=n.hasClass("prev")?-1:1;0!==this.viewMode&&(i*=12*f.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,i),this._trigger(f.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):!1===this.o.multidate?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),(!e&&this.o.updateViewDate||"view"===e)&&(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var n=new Date(t);return n.setUTCDate(t.getUTCDate()+e),n},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!function(t){return t&&!isNaN(t.getTime())}(t))return this.o.defaultViewDate;if(!e)return t;var n,i,r=new Date(t.valueOf()),o=r.getUTCDate(),s=r.getUTCMonth(),a=Math.abs(e);if(e=e>0?1:-1,1===a)i=-1===e?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==n},n=s+e,r.setUTCMonth(n),n=(n+12)%12;else{for(var u=0;u<a;u++)r=this.moveMonth(r,e);n=r.getUTCMonth(),r.setUTCDate(o),i=function(){return n!==r.getUTCMonth()}}for(;i();)r.setUTCDate(--o),r.setUTCMonth(n);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,n){do{if(t=this[n](t,e),!this.dateWithinRange(t))return!1;n="moveDay"}while(this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(e){return-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(e){return this.weekOfDateIsDisabled(e)||t.grep(this.o.datesDisabled,function(t){return r(e,t)}).length>0},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":visible")){var e,n,i=!1,r=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault(),t.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1,0===this.viewMode?t.ctrlKey?(n=this.moveAvailableDate(r,e,"moveYear"))&&this._trigger("changeYear",this.viewDate):t.shiftKey?(n=this.moveAvailableDate(r,e,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===t.keyCode||39===t.keyCode?n=this.moveAvailableDate(r,e,"moveDay"):this.weekOfDateIsDisabled(r)||(n=this.moveAvailableDate(r,e,"moveWeek")):1===this.viewMode?(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(r,e,"moveMonth")):2===this.viewMode&&(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(r,e,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 13:if(!this.o.forceParse)break;r=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(r),i=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),t.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}i&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else 40!==t.keyCode&&27!==t.keyCode||(this.show(),t.stopPropagation())},setViewMode:function(t){this.viewMode=t,this.picker.children("div").hide().filter(".datepicker-"+f.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var u=function(e,n){t.data(e,"datepicker",this),this.element=t(e),this.inputs=t.map(n.inputs,function(t){return t.jquery?t[0]:t}),delete n.inputs,this.keepEmptyValues=n.keepEmptyValues,delete n.keepEmptyValues,c.call(t(this.inputs),n).on("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t.data(e,"datepicker")}),this.updateDates()};u.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,n){n.setRange(e)})},clearDates:function(){t.each(this.pickers,function(t,e){e.clearDates()})},dateUpdated:function(n){if(!this.updating){this.updating=!0;var i=t.data(n.target,"datepicker");if(i!==e){var r=i.getUTCDate(),o=this.keepEmptyValues,s=t.inArray(n.target,this.inputs),a=s-1,u=s+1,l=this.inputs.length;if(-1!==s){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e!==i&&o||e.setUTCDate(r)}),r<this.dates[a])for(;a>=0&&r<this.dates[a];)this.pickers[a--].setUTCDate(r);else if(r>this.dates[u])for(;u<l&&r>this.dates[u];)this.pickers[u++].setUTCDate(r);this.updateDates(),delete this.updating}}}},destroy:function(){t.map(this.pickers,function(t){t.destroy()}),t(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:o("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var l=t.fn.datepicker,c=function(n){var i,r=Array.apply(null,arguments);if(r.shift(),this.each(function(){var e=t(this),o=e.data("datepicker"),s="object"==typeof n&&n;if(!o){var l=function(e,n){var i,r=t(e).data(),o={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])");function a(t,e){return e.toLowerCase()}for(var u in n=new RegExp("^"+n.toLowerCase()),r)n.test(u)&&(i=u.replace(s,a),o[i]=r[u]);return o}(this,"date"),c=t.extend({},h,l,s),f=function(e){var n={};if(p[e]||(e=e.split("-")[0],p[e])){var i=p[e];return t.each(d,function(t,e){e in i&&(n[e]=i[e])}),n}}(c.language),m=t.extend({},h,f,l,s);e.hasClass("input-daterange")||m.inputs?(t.extend(m,{inputs:m.inputs||e.find("input").toArray()}),o=new u(this,m)):o=new a(this,m),e.data("datepicker",o)}"string"==typeof n&&"function"==typeof o[n]&&(i=o[n].apply(o,r))}),i===e||i instanceof a||i instanceof u)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return i};t.fn.datepicker=c;var h=t.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,beforeShowYear:t.noop,beforeShowDecade:t.noop,beforeShowCentury:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},d=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=a;var p=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},f={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(n,r,o,s){if(!n)return e;if(n instanceof Date)return n;if("string"==typeof r&&(r=f.parseFormat(r)),r.toValue)return r.toValue(n,r,o);var u,l,c,h,d,m={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},g={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(n in g&&(n=g[n]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(n)){for(u=n.match(/([\-+]\d+)([dmwy])/gi),n=new Date,h=0;h<u.length;h++)l=u[h].match(/([\-+]\d+)([dmwy])/i),c=Number(l[1]),d=m[l[2].toLowerCase()],n=a.prototype[d](n,c);return a.prototype._zero_utc_time(n)}u=n&&n.match(this.nonpunctuation)||[];var v,y,_={},b=["yyyy","yy","M","MM","m","mm","d","dd"],w={yyyy:function(t,e){return t.setUTCFullYear(s?function(t,e){return!0===e&&(e=10),t<100&&(t+=2e3)>(new Date).getFullYear()+e&&(t-=100),t}(e,s):e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};w.yy=w.yyyy,w.M=w.MM=w.mm=w.m,w.dd=w.d,n=i();var x=r.parts.slice();function $(){var t=this.slice(0,u[h].length),e=u[h].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(u.length!==x.length&&(x=t(x).filter(function(e,n){return-1!==t.inArray(n,b)}).toArray()),u.length===x.length){var k,E,C;for(h=0,k=x.length;h<k;h++){if(v=parseInt(u[h],10),l=x[h],isNaN(v))switch(l){case"MM":y=t(p[o].months).filter($),v=t.inArray(y[0],p[o].months)+1;break;case"M":y=t(p[o].monthsShort).filter($),v=t.inArray(y[0],p[o].monthsShort)+1}_[l]=v}for(h=0;h<b.length;h++)(C=b[h])in _&&!isNaN(_[C])&&(E=new Date(n),w[C](E,_[C]),isNaN(E)||(n=E))}return n},formatDate:function(e,n,i){if(!e)return"";if("string"==typeof n&&(n=f.parseFormat(n)),n.toDisplay)return n.toDisplay(e,n,i);var r={d:e.getUTCDate(),D:p[i].daysShort[e.getUTCDay()],DD:p[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:p[i].monthsShort[e.getUTCMonth()],MM:p[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,e=[];for(var o=t.extend([],n.separators),s=0,a=n.parts.length;s<=a;s++)o.length&&e.push(o.shift()),e.push(r[n.parts[s]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+h.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+h.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};f.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+f.headTemplate+"<tbody></tbody>"+f.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=f,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=l,this},t.fn.datepicker.version="1.8.0",t.fn.datepicker.deprecated=function(t){var e=window.console;e&&e.warn&&e.warn("DEPRECATED: "+t)},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),c.call(n,"show"))}),t(function(){c.call(t('[data-provide="datepicker-inline"]'))})})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){
/*!
 * Timepicker
 *
 * Forked from https://github.com/jdewit/bootstrap-timepicker: 
 * 
 * Copyright 2013 Joris de Wit and timepicker contributors
 *
 * Contributors https://github.com/jdewit/bootstrap-timepicker/graphs/contributors
 * Contributors https://github.com/enketo/timepicker-basic/graphs/contributors
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */
!function(t,e,n){"use strict";var i=function(e,n){this.widget="",this.$element=t(e),this.defaultTime=n.defaultTime,this.disableFocus=n.disableFocus,this.disableMousewheel=n.disableMousewheel,this.isOpen=n.isOpen,this.minuteStep=n.minuteStep,this.orientation=n.orientation,this.secondStep=n.secondStep,this.snapToStep=n.snapToStep,this.showInputs=n.showInputs,this.showMeridian=n.showMeridian,this.showSeconds=n.showSeconds,this.template=n.template,this.appendWidgetTo=n.appendWidgetTo,this.showWidgetOnAddonClick=n.showWidgetOnAddonClick,this.icons=n.icons,this.maxHours=n.maxHours,this.explicitMode=n.explicitMode,this.handleDocumentClick=function(t){var e=t.data.scope;e.$element.parent().find(t.target).length||e.$widget.is(t.target)||e.$widget.find(t.target).length||e.hideWidget()},this._init()};i.prototype={constructor:i,_init:function(){var e=this;this.showWidgetOnAddonClick&&this.$element.parent().hasClass("input-group")&&this.$element.parent().hasClass("timepicker")?(this.$element.parent(".input-group.timepicker").find(".input-group-addon").on({"click.timepicker":t.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":t.proxy(this.highlightUnit,this),"click.timepicker":t.proxy(this.highlightUnit,this),"keydown.timepicker":t.proxy(this.elementKeydown,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)})):this.template?this.$element.on({"focus.timepicker":t.proxy(this.showWidget,this),"click.timepicker":t.proxy(this.showWidget,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)}):this.$element.on({"focus.timepicker":t.proxy(this.highlightUnit,this),"click.timepicker":t.proxy(this.highlightUnit,this),"keydown.timepicker":t.proxy(this.elementKeydown,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)}),!1!==this.template?this.$widget=t(this.getTemplate()).on("click",t.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&!1!==this.$widget&&this.$widget.find("input").each(function(){t(this).on({"click.timepicker":function(){t(this).select()},"keydown.timepicker":t.proxy(e.widgetKeydown,e),"keyup.timepicker":t.proxy(e.widgetKeyup,e)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=null,this.updateFromElementVal()},clear:function(){this.hour="",this.minute="",this.second="",this.meridian="",this.$element.val("")},decrementHour:function(){if(""===this.hour&&(this.hour=this.getCurrentHour(),this.incrementHour()),this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour<=0?this.hour=this.maxHours-1:this.hour--},decrementMinute:function(t){var e;""===this.minute&&(this.minute=this.getCurrentMinute(),this.incrementMinute()),(e=t?this.minute-t:this.minute-this.minuteStep)<0?(this.decrementHour(),this.minute=e+60):this.minute=e},decrementSecond:function(){var t=this.second-this.secondStep;t<0?(this.decrementMinute(!0),this.second=t+60):this.second=t},elementKeydown:function(t){switch(t.which){case 9:if(t.shiftKey){if("hour"===this.highlightedUnit){this.hideWidget();break}this.highlightPrevUnit()}else{if(this.showMeridian&&"meridian"===this.highlightedUnit||this.showSeconds&&"second"===this.highlightedUnit||!this.showMeridian&&!this.showSeconds&&"minute"===this.highlightedUnit){this.hideWidget();break}this.highlightNextUnit()}t.preventDefault(),this.updateFromElementVal();break;case 27:this.updateFromElementVal();break;case 37:t.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(t.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update();break;case 39:t.preventDefault(),this.highlightNextUnit(),this.updateFromElementVal();break;case 40:switch(t.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update()}},getCursorPosition:function(){var t=this.$element.get(0);if("selectionStart"in t)return t.selectionStart;if(n.selection){t.focus();var e=n.selection.createRange(),i=n.selection.createRange().text.length;return e.moveStart("character",-t.value.length),e.text.length-i}},getTemplate:function(){var t,e,n,i,r,o;switch(this.showInputs?(e='<input type="text" class="timepicker-hour" maxlength="2"/>',n='<input type="text" class="timepicker-minute" maxlength="2"/>',i='<input type="text" class="timepicker-second" maxlength="2"/>',r='<input type="text" class="timepicker-meridian" maxlength="2"/>'):(e='<span class="timepicker-hour"></span>',n='<span class="timepicker-minute"></span>',i='<span class="timepicker-second"></span>',r='<span class="timepicker-meridian"></span>'),o='<table><tr><td><a href="#" data-action="incrementHour"><span class="'+this.icons.up+'"></span></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><span class="'+this.icons.up+'"></span></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><span class="'+this.icons.up+'"></span></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><span class="'+this.icons.up+'"></span></a></td>':"")+"</tr><tr><td>"+e+'</td> <td class="separator">:</td><td>'+n+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+i+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+r+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><span class="'+this.icons.down+'"></span></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><span class="'+this.icons.down+'"></span></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><span class="'+this.icons.down+'"></span></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><span class="'+this.icons.down+'"></span></a></td>':"")+"</tr></table>",this.template){case"dropdown":t='<div class="timepicker-widget dropdown-menu">'+o+"</div>"}return t},getTime:function(){return""===this.hour?"":(1===this.hour.toString().length?"0"+this.hour:this.hour)+":"+(1===this.minute.toString().length?"0"+this.minute:this.minute)+(this.showSeconds?":"+(1===this.second.toString().length?"0"+this.second:this.second):"")+(this.showMeridian?" "+this.meridian:"")},hideWidget:function(){!1!==this.isOpen&&(this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.$widget.removeClass("open"),t(n).off("mousedown.timepicker, touchend.timepicker",this.handleDocumentClick),this.isOpen=!1,this.$widget.detach())},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="hour",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(0,1):t.setSelectionRange(0,2)},0)},highlightMinute:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="minute",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(2,4):t.setSelectionRange(3,5)},0)},highlightSecond:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="second",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(5,7):t.setSelectionRange(6,8)},0)},highlightMeridian:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="meridian",t.setSelectionRange&&(this.showSeconds?setTimeout(function(){e.hour<10?t.setSelectionRange(8,10):t.setSelectionRange(9,11)},0):setTimeout(function(){e.hour<10?t.setSelectionRange(5,7):t.setSelectionRange(6,8)},0))},getCurrentHour:function(){var t=(new Date).getHours();return this.showMeridian?t%12:t},getCurrentMinute:function(){return(new Date).getMinutes()},incrementHour:function(){if(""===this.hour&&(this.hour=this.getCurrentHour(),this.decrementHour()),this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}this.hour!==this.maxHours-1?this.hour++:this.hour=0},incrementMinute:function(t){var e;""===this.minute&&(this.minute=this.getCurrentMinute(),this.decrementMinute()),(e=t?this.minute+t:this.minute+this.minuteStep-this.minute%this.minuteStep)>59?(this.incrementHour(),this.minute=e-60):this.minute=e},incrementSecond:function(){var t=this.second+this.secondStep-this.second%this.secondStep;t>59?(this.incrementMinute(!0),this.second=t-60):this.second=t},mousewheel:function(e){if(!this.disableMousewheel){e.preventDefault(),e.stopPropagation();var n=e.originalEvent.wheelDelta||-e.originalEvent.detail,i=null;switch("mousewheel"===e.type?i=-1*e.originalEvent.wheelDelta:"DOMMouseScroll"===e.type&&(i=40*e.originalEvent.detail),i&&(e.preventDefault(),t(this).scrollTop(i+t(this).scrollTop())),this.highlightedUnit){case"minute":n>0?this.incrementMinute():this.decrementMinute(),this.highlightMinute();break;case"second":n>0?this.incrementSecond():this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break;default:n>0?this.incrementHour():this.decrementHour(),this.highlightHour()}return!1}},changeToNearestStep:function(t,e){return t%e==0?t:Math.round(t%e/e)?(t+(e-t%e))%60:t-t%e},place:function(){if(!this.isInline){var n=this.$widget.outerWidth(),i=this.$widget.outerHeight(),r=t(e).width(),o=t(e).height(),s=t(e).scrollTop(),a=parseInt(this.$element.parents().filter(function(){return"auto"!==t(this).css("z-index")}).first().css("z-index"),10)+10,u=this.component?this.component.parent().offset():this.$element.offset(),l=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),c=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1),h=u.left,d=u.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),"auto"!==this.orientation.x?(this.$widget.addClass("timepicker-orient-"+this.orientation.x),"right"===this.orientation.x&&(h-=n-c)):(this.$widget.addClass("timepicker-orient-left"),u.left<0?h-=u.left-10:u.left+n>r&&(h=r-n-10));var p,f,m=this.orientation.y;"auto"===m&&(p=-s+u.top-i,f=s+o-(u.top+l+i),m=Math.max(p,f)===f?"top":"bottom"),this.$widget.addClass("timepicker-orient-"+m),"top"===m?d+=l:d-=i+parseInt(this.$widget.css("padding-top"),10),this.$widget.css({top:d,left:h,zIndex:a})}},remove:function(){t("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(t){if(this.$element.val())this.updateFromElementVal();else if("current"===t){var e=new Date,n=e.getHours(),i=e.getMinutes(),r=e.getSeconds(),o="AM";0!==r&&60===(r=Math.ceil(e.getSeconds()/this.secondStep)*this.secondStep)&&(i+=1,r=0),0!==i&&60===(i=Math.ceil(e.getMinutes()/this.minuteStep)*this.minuteStep)&&(n+=1,i=0),this.showMeridian&&(0===n?n=12:n>=12?(n>12&&(n-=12),o="PM"):o="AM"),this.hour=n,this.minute=i,this.second=r,this.meridian=o,this.update()}else!1===t?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(t)},setTime:function(t,e){if(t){var n,i,r,o,s,a;if("object"==typeof t&&t.getMonth)r=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),this.showMeridian&&(a="AM",r>12&&(a="PM",r%=12),12===r&&(a="PM"));else{if((n=(/a/i.test(t)?1:0)+(/p/i.test(t)?2:0))>2)return void this.clear();if(r=(i=t.replace(/[^0-9:]/g,"").split(":"))[0]?i[0].toString():i.toString(),this.explicitMode&&r.length>2&&r.length%2!=0)return void this.clear();o=i[1]?i[1].toString():"",s=i[2]?i[2].toString():"",r.length>4&&(s=r.slice(-2),r=r.slice(0,-2)),r.length>2&&(o=r.slice(-2),r=r.slice(0,-2)),o.length>2&&(s=o.slice(-2),o=o.slice(0,-2)),r=parseInt(r,10),o=parseInt(o,10),s=parseInt(s,10),isNaN(r)&&(r=0),isNaN(o)&&(o=0),isNaN(s)&&(s=0),s>59&&(s=59),o>59&&(o=59),r>=this.maxHours&&(r=this.maxHours-1),this.showMeridian?(r>12&&(n=2,r-=12),n||(n=1),0===r&&(r=12),a=1===n?"AM":"PM"):r<12&&2===n?r+=12:r>=this.maxHours?r=this.maxHours-1:(r<0||12===r&&1===n)&&(r=0)}this.hour=r,this.snapToStep?(this.minute=this.changeToNearestStep(o,this.minuteStep),this.second=this.changeToNearestStep(s,this.secondStep)):(this.minute=o,this.second=s),this.meridian=a,this.update(e)}else this.clear()},showWidget:function(){this.isOpen||this.$element.is(":disabled")||(this.setTime(this.$element.val()),this.updateWidget(),this.$widget.appendTo(this.appendWidgetTo),t(n).on("mousedown.timepicker, touchend.timepicker",{scope:this},this.handleDocumentClick),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.place(),this.disableFocus&&this.$element.blur(),""===this.hour&&this.defaultTime&&this.setDefaultTime(this.defaultTime),!1===this.isOpen&&this.$widget.addClass("open"),this.isOpen=!0)},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM"},update:function(t){this.updateElement(),t||this.updateWidget(),this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){this.setTime(this.$element.val())},updateWidget:function(){if(!1!==this.$widget){var t=this.hour,e=1===this.minute.toString().length?"0"+this.minute:this.minute,n=1===this.second.toString().length?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.timepicker-hour").val(t),this.$widget.find("input.timepicker-minute").val(e),this.showSeconds&&this.$widget.find("input.timepicker-second").val(n),this.showMeridian&&this.$widget.find("input.timepicker-meridian").val(this.meridian)):(this.$widget.find("span.timepicker-hour").text(t),this.$widget.find("span.timepicker-minute").text(e),this.showSeconds&&this.$widget.find("span.timepicker-second").text(n),this.showMeridian&&this.$widget.find("span.timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(!1!==this.$widget){var t=this.$widget.find("input.timepicker-hour").val()+":"+this.$widget.find("input.timepicker-minute").val()+(this.showSeconds?":"+this.$widget.find("input.timepicker-second").val():"")+(this.showMeridian?this.$widget.find("input.timepicker-meridian").val():"");this.setTime(t,!0)}},widgetClick:function(e){e.stopPropagation(),e.preventDefault();var n=t(e.target),i=n.closest("a").data("action");i&&this[i](),this.update(),n.is("input")&&n.get(0).setSelectionRange(0,2)},widgetKeydown:function(e){var n=t(e.target),i=n.attr("class").replace("timepicker-","");switch(e.which){case 9:if(e.shiftKey){if("hour"===i)return this.hideWidget()}else if(this.showMeridian&&"meridian"===i||this.showSeconds&&"second"===i||!this.showMeridian&&!this.showSeconds&&"minute"===i)return this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(e.preventDefault(),i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),n.get(0).setSelectionRange(0,2);break;case 40:switch(e.preventDefault(),i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),n.get(0).setSelectionRange(0,2)}},widgetKeyup:function(t){(65===t.which||77===t.which||80===t.which||46===t.which||8===t.which||t.which>=48&&t.which<=57||t.which>=96&&t.which<=105)&&this.updateFromWidgetInputs()}},t.fn.timepicker=function(e){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var r=t(this),o=r.data("timepicker"),s="object"==typeof e&&e;o||r.data("timepicker",o=new i(this,t.extend({},t.fn.timepicker.defaults,s,t(this).data()))),"string"==typeof e&&o[e].apply(o,n)})},t.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,disableMousewheel:!1,isOpen:!1,minuteStep:15,orientation:{x:"auto",y:"auto"},secondStep:15,snapToStep:!1,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:!0,icons:{up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},maxHours:24,explicitMode:!1},t.fn.timepicker.Constructor=i,t(n).on("focus.timepicker.data-api click.timepicker.data-api",'[data-provide="timepicker"]',function(e){var n=t(this);n.data("timepicker")||(e.preventDefault(),n.timepicker())})}(n(0),window,document)},function(t,e,n){var i,r,o;r=[n(0)],void 0===(o="function"==typeof(i=function(t,e){var n={formatInvalidInputErrorMsg:function(t){return"Invalid input value '"+t+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},i=function(n,i){var r=this.element=t(n).hide(),o=t(n)[0].style.width,s=!1,a=this.element.next(".widget");switch(!0===a.hasClass("slider")?(s=!0,this.widget=a):this.widget=t('<div class="widget"><div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div></div></div>').insertAfter(this.element),this.picker=this.widget.find(".slider"),this.id=this.element.data("slider-id")||i.id,this.id&&(this.widget[0].id=this.id),("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&(this.touchCapable=!0),!0===s&&(this.widget.removeClass("slider-horizontal"),this.widget.removeClass("slider-vertical")),this.orientation=this.element.data("slider-orientation")||i.orientation,this.orientation){case"vertical":this.widget.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight";break;default:this.widget.addClass("slider-horizontal").css("width",o),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"}var u=this;switch(t.each(["min","max","step","precision","value","reversed","handle"],function(t,e){void 0!==r.data("slider-"+e)?u[e]=r.data("slider-"+e):void 0!==i[e]?u[e]=i[e]:void 0!==r.prop(e)?u[e]=r.prop(e):u[e]=0}),this.value instanceof Array?s&&!this.range?this.value=this.value[0]:this.range=!0:this.range&&(this.value=[this.value,this.max]),this.selection=this.element.data("slider-selection")||i.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style,!0===s&&(this.handle1.removeClass("round triangle"),this.handle2.removeClass("round triangle hide")),this.handle){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=i.formater,this.setValue(this.value),this.handle1.on({keydown:t.proxy(this.keydown,this,0)}),this.handle2.on({keydown:t.proxy(this.keydown,this,1)}),this.touchCapable&&this.picker.on({touchstart:t.proxy(this.mousedown,this)}),this.picker.on({mousedown:t.proxy(this.mousedown,this)}),this.enabled=i.enabled&&(this.element.data("slider-enabled")===e||!0===this.element.data("slider-enabled")),this.enabled?this.enable():this.disable(),this.natural_arrow_keys=this.element.data("slider-natural_arrow_keys")||i.natural_arrow_keys};i.prototype={constructor:i,over:!1,inDrag:!1,layout:function(){var t;t=this.reversed?[100-this.percentage[0],this.percentage[1]]:[this.percentage[0],this.percentage[1]],this.handle1Stype[this.stylePos]=t[0]+"%",this.handle2Stype[this.stylePos]=t[1]+"%","vertical"===this.orientation?(this.selectionElStyle.top=Math.min(t[0],t[1])+"%",this.selectionElStyle.height=Math.abs(t[0]-t[1])+"%"):(this.selectionElStyle.left=Math.min(t[0],t[1])+"%",this.selectionElStyle.width=Math.abs(t[0]-t[1])+"%")},mousedown:function(e){if(!this.isEnabled())return!1;this.touchCapable&&"touchstart"===e.type&&(e=e.originalEvent),this.triggerFocusOnHandle(),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var n=this.getPercentage(e);if(this.range){var i=Math.abs(this.percentage[0]-n),r=Math.abs(this.percentage[1]-n);this.dragged=i<r?0:1}else this.dragged=0;this.percentage[this.dragged]=this.reversed?100-n:n,this.layout(),this.touchCapable&&t(document).on({touchmove:t.proxy(this.mousemove,this),touchend:t.proxy(this.mouseup,this)}),t(document).on({mousemove:t.proxy(this.mousemove,this),mouseup:t.proxy(this.mouseup,this)}),this.inDrag=!0;var o=this.calculateValue();return this.element.trigger({type:"slideStart",value:o}).data("value",o).prop("value",o),this.setValue(o),!0},triggerFocusOnHandle:function(t){0===t&&this.handle1.focus(),1===t&&this.handle2.focus()},keydown:function(t,e){if(!this.isEnabled())return!1;var n;switch(e.which){case 37:case 40:n=-1;break;case 39:case 38:n=1}if(n){this.natural_arrow_keys&&("vertical"===this.orientation&&!this.reversed||"horizontal"===this.orientation&&this.reversed)&&(n*=-1);var i=n*this.percentage[2],r=this.percentage[t]+i;r>100?r=100:r<0&&(r=0),this.dragged=t,this.adjustPercentageForRangeSliders(r),this.percentage[this.dragged]=r,this.layout();var o=this.calculateValue();return this.element.trigger({type:"slideStart",value:o}).data("value",o).prop("value",o),this.setValue(o,!0),this.element.trigger({type:"slideStop",value:o}).data("value",o).prop("value",o),!1}},mousemove:function(t){if(!this.isEnabled())return!1;this.touchCapable&&"touchmove"===t.type&&(t=t.originalEvent);var e=this.getPercentage(t);this.adjustPercentageForRangeSliders(e),this.percentage[this.dragged]=this.reversed?100-e:e,this.layout();var n=this.calculateValue();return this.setValue(n,!0),!1},adjustPercentageForRangeSliders:function(t){this.range&&(0===this.dragged&&this.percentage[1]<t?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>t&&(this.percentage[1]=this.percentage[0],this.dragged=0))},mouseup:function(){if(!this.isEnabled())return!1;this.touchCapable&&t(document).off({touchmove:this.mousemove,touchend:this.mouseup}),t(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1;var e=this.calculateValue();return this.layout(),this.element.data("value",e).prop("value",e).trigger({type:"slideStop",value:e}),!1},calculateValue:function(){var t;return this.range?(t=[this.min,this.max],0!==this.percentage[0]&&(t[0]=Math.max(this.min,this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step),t[0]=this.applyPrecision(t[0])),100!==this.percentage[1]&&(t[1]=Math.min(this.max,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step),t[1]=this.applyPrecision(t[1])),this.value=t):((t=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step)<this.min?t=this.min:t>this.max&&(t=this.max),t=parseFloat(t),t=this.applyPrecision(t),this.value=[t,this.value[1]]),t},applyPrecision:function(t){var e=this.precision||this.getNumDigitsAfterDecimalPlace(this.step);return this.applyToFixedAndParseFloat(t,e)},getNumDigitsAfterDecimalPlace:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},applyToFixedAndParseFloat:function(t,e){var n=t.toFixed(e);return parseFloat(n)},getPercentage:function(t){!this.touchCapable||"touchstart"!==t.type&&"touchmove"!==t.type||(t=t.touches[0]);var e=100*(t[this.mousePos]-this.offset[this.stylePos])/this.size;return e=Math.round(e/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,e))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(t,e){if(t||(t=0),this.value=this.validateInputValue(t),this.range?(this.value[0]=this.applyPrecision(this.value[0]),this.value[1]=this.applyPrecision(this.value[1]),this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=this.applyPrecision(this.value),this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"===this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.diff>0?this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff]:this.percentage=[0,0,100],this.layout(),!0===e){var n=this.range?this.value:this.value[0];this.element.trigger({type:"slide",value:n}).data("value",n).prop("value",n)}},validateInputValue:function(e){if("number"==typeof e)return e;if(e instanceof Array)return t.each(e,function(t,e){if("number"!=typeof e)throw new Error(n.formatInvalidInputErrorMsg(e))}),e;throw new Error(n.formatInvalidInputErrorMsg(e))},destroy:function(){this.handle1.off(),this.handle2.off(),this.element.off().show(),this.picker.off().remove(),t(this.element).removeData("slider")},disable:function(){this.enabled=!1,this.handle1.removeAttr("tabindex"),this.handle2.removeAttr("tabindex"),this.picker.addClass("slider-disabled"),this.element.trigger("slideDisabled")},enable:function(){this.enabled=!0,this.handle1.attr("tabindex",0),this.handle2.attr("tabindex",0),this.picker.removeClass("slider-disabled"),this.element.trigger("slideEnabled")},toggle:function(){this.enabled?this.disable():this.enable()},isEnabled:function(){return this.enabled},setAttribute:function(t,e){this[t]=e},getAttribute:function(t){return this[t]}};var r={getValue:i.prototype.getValue,setValue:i.prototype.setValue,setAttribute:i.prototype.setAttribute,getAttribute:i.prototype.getAttribute,destroy:i.prototype.destroy,disable:i.prototype.disable,enable:i.prototype.enable,toggle:i.prototype.toggle,isEnabled:i.prototype.isEnabled};function o(e,o){if(r[e]){var s=function(e){var r=t(e).data("slider");if(r&&r instanceof i)return r;throw new Error(n.callingContextNotSliderInstance)}(this),a=r[e].apply(s,o);return void 0===a?t(this):a}throw new Error("method '"+e+"()' does not exist for slider.")}t.fn.slider=function(e){if("string"==typeof e&&"refresh"!==e){var n=Array.prototype.slice.call(arguments,1);return o.call(this,e,n)}return function(e){var n=t(this);return n.each(function(){var n=t(this),r=n.data("slider"),o="object"==typeof e&&e;r&&!o&&(o={},t.each(t.fn.slider.defaults,function(t){o[t]=r[t]})),n.data("slider",new i(this,t.extend({},t.fn.slider.defaults,o)))}),n}.call(this,e)},t.fn.slider.defaults={min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",natural_arrow_keys:!1,handle:"round",reversed:!1,enabled:!0,formater:function(t){return t}},t.fn.slider.Constructor=i})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){n(139),t.exports=angular},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},function(t,e){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(t,e){var i=e||0,r=n;return r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(r=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:i+o.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},,,,function(t,e,n){"use strict";var i=n(38),r=n(0),o=n(8),s=n(5),a=n(6).t,u=n(12),l=n(94),c=n(95),h=n(96),d=n(98),p=n(99),f=n(100),m=n(101),g=n(133),v=n(134),y=n(135),_=n(136),b=n(137);function w(t,e,n){var o=r(t);this.$nonRepeats={},this.$all={},this.options="object"!=typeof n?{}:n,void 0===this.options.clearIrrelevantImmediately&&(this.options.clearIrrelevantImmediately=!0),this.view={$:o,html:o[0],$clone:o.clone()},this.model=new i(e),this.repeatsPresent=this.view.$.find(".or-repeat").length>0,this.widgetsInitialized=!1,this.pageNavigationBlocked=!1}n(41),n(28),w.prototype={evaluationCascadeAdditions:[],get evaluationCascade(){return[this.calc.update.bind(this.calc),this.repeats.countUpdate.bind(this.repeats),this.branch.update.bind(this.branch),this.output.update.bind(this.output),this.itemset.update.bind(this.itemset),this.validationUpdate].concat(this.evaluationCascadeAdditions)},get recordName(){return this.view.$.attr("name")},set recordName(t){this.view.$.attr("name",t)},get editStatus(){return!!this.view.$.data("edited")},set editStatus(t){t&&t!==this.view.$.data("edited")&&this.view.$.trigger("edited.enketo"),this.view.$.data("edited",t)},get surveyName(){return this.view.$.find("#form-title").text()},get instanceID(){return this.model.instanceID},get deprecatedID(){return this.model.deprecatedID},get instanceName(){return this.model.instanceName},get version(){return this.model.version},get encryptionKey(){return this.view.$.data("base64rsapublickey")},get action(){return this.view.$.attr("action")},get method(){return this.view.$.attr("method")}},w.prototype.addModule=function(t){return Object.create(t,{form:{value:this}})},w.prototype.init=function(){var t=[],e=this;if(t=t.concat(this.model.init()),void 0===this.model||!(this.model instanceof i))return t.push("Form could not be initialized without a model."),t;this.model.$events.on("dataupdate",function(t,n){e.view.$.trigger("dataupdate.enketo",n)}),this.model.$events.on("removed",function(t,n){e.view.$.trigger("removed.enketo",n)}),this.pages=this.addModule(h),this.langs=this.addModule(g),this.progress=this.addModule(f),this.widgets=this.addModule(m),this.preloads=this.addModule(v),this.branch=this.addModule(d),this.repeats=this.addModule(c),this.input=this.addModule(l),this.output=this.addModule(y),this.itemset=this.addModule(p),this.calc=this.addModule(_),this.mask=this.addModule(b);try{return this.preloads.init(),this.view.$.data({instanceID:this.model.instanceID}),this.grosslyViolateStandardComplianceByIgnoringCertainCalcs(),this.calc.update(),this.langs.init(),this.pages.init(),this.repeats.init(),this.itemset.update(),this.setAllVals(),this.options.input=this.input,this.options.pathToAbsolute=this.pathToAbsolute.bind(this),this.options.evaluate=this.model.evaluate.bind(this.model),this.options.formClasses=s.toArray(this.view.html.classList),this.widgetsInitialized=this.widgets.init(null,this.options),this.branch.update(),this.output.update(),this.setEventHandlers(),this.calc.update(),this.pages.init(),this.mask.init(),this.editStatus=!1,!1!==this.options.printRelevantOnly&&this.view.$.addClass("print-relevant-only"),setTimeout(function(){e.progress.update()},0),t}catch(e){console.error(e),t.push(e.name+": "+e.message)}return document.querySelector("body").scrollIntoView(),console.debug("loadErrors",t),t},w.prototype.goTo=function(t){var e=[];return this.goToTarget(this.getGoToTarget(t))||e.push(a("alert.gotonotfound.msg",{path:location.hash.substring(1)})),e},w.prototype.getDataStr=function(t){return!1===(t="object"!=typeof t||null===t?{}:t).irrelevant?this.getDataStrWithoutIrrelevantNodes():this.model.getStr()},w.prototype.resetView=function(){r("#form-languages").remove(),this.view.$.replaceWith(this.view.$clone)},w.prototype.replaceChoiceNameFn=function(t,e,n,i,o){var s,a,u,l="",c=t.match(new RegExp("jr:choice-name\\(([^,]+),\\s*(?:\"([^\"]*)\"|'([^']*)')\\s*\\)"));return c?(s=this.model.evaluate(c[1],e,n,i,o),a=(c[2]||c[3]||"").trim(),(u=this.view.$.find('[name="'+a+'"]')).length>0&&"select"===u.prop("nodeName").toLowerCase()?l=u.find('[value="'+s+'"]').text():u.length>0&&"input"===u.prop("nodeName").toLowerCase()&&(l=u.filter(function(){return r(this).attr("value")===s}).siblings(".option-label.active").text()),t.replace(c[0],'"'+l+'"')):t},w.prototype.setAllVals=function(t,e){var n,i,o,s=this,a=t&&t.attr("name")?t.attr("name"):null;e=void 0!==e?e:null,this.model.node(a,e).get().find("*").filter(function(){var t=r(this);return 0===t.children().length&&t.text()}).each(function(){var t=r(this);try{o=t.text(),i=s.model.getXPath(t.get(0),"instance"),n=s.model.node(i).get().index(this),s.input.setVal(i,n,o)}catch(t){throw console.error(t),new Error("Could not load input field value with name: "+i+" and value: "+o)}})},w.prototype.getRelatedNodes=function(t,e,n){var i,o,s=null,a=[],u=this;n=n||{},e=e||"",this.$nonRepeats[t]||(o=this.view.$.find(":not(.or-repeat-info)["+t+"]").filter(function(){return 0===r(this).closest(".or-repeat").length}),this.$nonRepeats[t]=this.filterRadioCheckSiblings(o)),void 0!==n.repeatPath&&n.repeatIndex>=0&&(o=this.view.$.find('.or-repeat[name="'+n.repeatPath+'"]').eq(n.repeatIndex).find("["+t+"]"),s=this.filterRadioCheckSiblings(o)),!this.$all[t]||n.repeatPath&&!n.cloned?this.$all[t]=this.filterRadioCheckSiblings(this.view.$.find("["+t+"]")):n.cloned&&s&&(this.$all[t]=this.$all[t].add(s)),i=s?this.$nonRepeats[t].add(s):this.$all[t],n.nodes&&0!==n.nodes.length?(n.nodes.forEach(function(n){a=a.concat(u.getQuerySelectorsForLogic(e,t,n))}),a=a.concat(u.getQuerySelectorsForLogic(e,t,"*"))):a=a.concat([e]);var l=a.join(", ");return i=l?i.filter(l):i},w.prototype.filterRadioCheckSiblings=function(t){var e=[];return t.filter(function(){var t="radio"===this.type||"checkbox"===this.type?r(this.parentNode).parent(".option-wrapper")[0]:null;if(t){if(-1!==e.indexOf(t))return!1;e.push(t)}return!0})},w.prototype.getQuerySelectorsForLogic=function(t,e,n){return[t+"["+e+'*="/'+n+' "]',t+"["+e+'*="/'+n+')"]',t+"["+e+'*="/'+n+',"]',t+"["+e+'$="/'+n+'"]',t+"["+e+'*="/'+n+']"]']},w.prototype.getDataStrWithoutIrrelevantNodes=function(){var t=this,e=new i(this.model.getStr());return e.init(),this.getRelatedNodes("data-relevant").reverse().each(function(){var n,i=r(this),o=t.input.getRelevant(i),s=t.input.getIndex(i),a=t.input.getName(i);(n=i.children('.or-repeat-info[data-name="'+a+'"]').length&&!i.children('.or-repeat[name="'+a+'"]').length?null:a)&&!t.model.evaluate(o,"boolean",n,s)&&e.node(n,s).remove()}),e.getStr()},w.prototype.grosslyViolateStandardComplianceByIgnoringCertainCalcs=function(){var t=this.view.$.find('[name$="instanceID"][data-calculate]');t.length>0&&t.removeAttr("data-calculate")},w.prototype.validationUpdate=function(t){var e,n=this;!0===u.validateContinuously&&(e=t||{},t.cloned&&(e={nodes:t.repeatPath.split("/").reverse().slice(0,1)}),this.getRelatedNodes("data-constraint","",e).add(this.getRelatedNodes("data-required","",e)).each(function(){n.validateInput(r(this))}))},w.prototype.setEventHandlers=function(){var t=this;this.view.$.attr("onsubmit","return false;"),this.view.$.on("change.file","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(){var e,n=r(this),i={path:t.input.getName(n),inputType:t.input.getInputType(n),xmlType:t.input.getXmlType(n),enabled:t.input.isEnabled(n),constraint:t.input.getConstraint(n),val:t.input.getVal(n),required:t.input.getRequired(n),index:t.input.getIndex(n)};i.enabled&&"hidden"!==i.inputType&&i.required&&(e=i.required),i.val.length>0&&"file"===i.inputType&&n[0].files[0]&&n[0].files[0].size>0&&(i.val=s.getFilename(n[0].files[0],n[0].dataset.filenamePostfix)),i.val.length>0&&"drawing"===i.inputType&&(i.val=s.getFilename({name:i.val},n[0].dataset.filenamePostfix)),t.model.node(i.path,i.index).setVal(i.val,i.constraint,i.xmlType,e,!0),t.validateInput(n).then(function(t){n.trigger("valuechange.enketo",t)})}),this.view.$.on("focus fakefocus","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(e){t.progress.update(e.target)}),this.model.$events.on("dataupdate",function(e,n){t.evaluationCascade.forEach(function(e){e.call(t,n)}),t.editStatus=!0}),this.view.$.on("addrepeat",function(e,n){var i=r(e.target),o={repeatPath:i.attr("name"),repeatIndex:n,cloned:!0};t.setAllVals(i,n),t.evaluationCascade.forEach(function(e){e.call(t,o)}),t.progress.update()}),this.view.$.on("removerepeat",function(){t.progress.update()}),this.view.$.on("changelanguage",function(){t.output.update()}),this.view.$.find(".or-group > h4").on("click",function(){r(this).closest(".or-group").toggleClass("or-appearance-compact")})},w.prototype.setValid=function(t,e){var n=e?"invalid-"+e:"invalid-constraint invalid-required invalid-relevant";this.input.getWrapNodes(t).removeClass(n)},w.prototype.setInvalid=function(t,e){e=e||"constraint",!1===u.validatePage&&this.isValid(t)&&this.blockPageNavigation(),this.input.getWrapNodes(t).addClass("invalid-"+e)},w.prototype.blockPageNavigation=function(){var t=this;this.pageNavigationBlocked=!0,window.clearTimeout(this.blockPageNavigationTimeout),this.blockPageNavigationTimeout=window.setTimeout(function(){t.pageNavigationBlocked=!1},600)},w.prototype.isValid=function(t){var e;return t?!(e=this.input.getWrapNodes(t)).hasClass("invalid-required")&&!e.hasClass("invalid-constraint")&&!e.hasClass("invalid-relevant"):0===this.view.$.find(".invalid-required, .invalid-constraint, .invalid-relevant").length},w.prototype.clearIrrelevant=function(){this.branch.update(null,!0)},w.prototype.validateAll=function(){var t=this;return!1===this.options.clearIrrelevantImmediately&&this.clearIrrelevant(),this.validateContent(this.view.$).then(function(e){return t.view.$.trigger("validationcomplete.enketo"),e})},w.prototype.validate=w.prototype.validateAll,w.prototype.validateContent=function(t){var e,n=this;t.find("fieldset:disabled input, fieldset:disabled select, fieldset:disabled textarea, input:disabled, select:disabled, textarea:disabled").each(function(){n.setValid(r(this))});var i=t.find(".question").addBack(".question").map(function(){var t=r(this).find("input:not(.ignore):not(:disabled), select:not(.ignore):not(:disabled), textarea:not(.ignore):not(:disabled)");return 0===t.length?o.resolve():n.validateInput(t.eq(0))}).toArray();return o.all(i).then(function(){return(e=t.find(".invalid-required, .invalid-constraint, .invalid-relevant").addBack(".invalid-required, .invalid-constraint, .invalid-relevant").eq(0)).length>0&&n.goToTarget(e[0]),0===e.length}).catch(function(){return!1})},w.prototype.pathToAbsolute=function(t,e){var n;return 0===t.indexOf("/")?t:(n=this.model.evaluate(t,"node",e,0,!0),this.model.getXPath(n,"instance",!1))},w.prototype.validateInput=function(t){var e,n=this,i={path:this.input.getName(t),inputType:this.input.getInputType(t),xmlType:this.input.getXmlType(t),enabled:this.input.isEnabled(t),constraint:this.input.getConstraint(t),calculation:this.input.getCalculation(t),required:this.input.getRequired(t),readonly:this.input.getReadonly(t),val:this.input.getVal(t)};return!i.readonly||i.val||i.required||i.constraint||i.calculation?(i.enabled&&"hidden"!==i.inputType?(i.ind=this.input.getIndex(t),e=this.model.node(i.path,i.ind).validate(i.constraint,i.required,i.xmlType)):e=o.resolve({requiredValid:!0,constraintValid:!0}),e.then(function(e){var r=!1,o=!1!==e.requiredValid&&!1!==e.constraintValid;return"hidden"!==i.inputType&&(i.$q=n.input.getWrapNodes(t),i.$required=i.$q.find(".required"),r=i.$q.hasClass("invalid-required")||i.$q.hasClass("invalid-constraint"),!1===e.requiredValid?(n.setValid(t,"constraint"),n.setInvalid(t,"required"),i.$required.removeClass("hide")):(n.updateRequiredVisibility(i),!1===e.constraintValid?(n.setValid(t,"required"),n.setInvalid(t,"constraint")):(n.setValid(t,"constraint"),n.setValid(t,"required")))),o||r||t.trigger("invalidated.enketo"),o}).catch(function(e){throw console.error("validation error",e),n.setInvalid(t,"constraint"),e})):o.resolve()},w.prototype.updateRequiredVisibility=function(t){t.required&&t.$required.toggleClass("hide",!this.model.node(t.path,t.ind).isRequired(t.required))},w.prototype.getGoToTarget=function(t){var e,n,i,o,s="",a=/([^[]+)\[(\d+)\]([^[]*$)?/g;if(t&&(n=this.model.node(t).get().get(0))){if(t=this.model.getXPath(n,"instance",!0),!(i=this.view.html.querySelector('[name="'+t+'"]')))for(o=this.view.html;null!==(e=a.exec(t))&&o;)s+=e[1],(o=o.querySelectorAll('[name="'+s+'"], [data-name="'+s+'"]')[e[2]])&&e[3]&&(s+=e[3],o=o.querySelector('[name="'+s+'"],[data-name="'+s+'"]')),i=o;return i?this.input.getWrapNodes(r(i)).get(0):i}},w.prototype.goToTarget=function(t){return t&&(this.pages.active&&this.pages.flipToPageContaining(r(t)),r(t).closest(".or-branch.disabled").length&&r(t).trigger("gotohidden.enketo"),t.scrollIntoView(),r(t.querySelector("input:not(.ignore), textarea:not(.ignore), select:not(.ignore)")).trigger("focus").trigger("applyfocus")),!!t},w.getRequiredTransformerVersion=function(){return console.deprecate("Form.getRequiredTransformerVersion()","Form.requiredTransformerVersion"),w.requiredTransformerVersion},w.requiredTransformerVersion="1.25.2",t.exports=w,w.prototype.getInstanceID=function(){return console.deprecate("form.getInstanceID()","form.instanceID"),this.instanceID},w.prototype.getDeprecatedID=function(){return console.deprecate("form.getDeprecatedID()","form.deprecatedID"),this.deprecatedID},w.prototype.getInstanceName=function(){return console.deprecate("form.getModel()","form.instanceName"),this.instanceName},w.prototype.getVersion=function(){return console.deprecate("form.getVersion()","form.version"),this.version},w.prototype.getEncryptionKey=function(){return console.deprecate("form.getEncryptionKey()","form.encryptionKey"),this.encryptionKey},w.prototype.getAction=function(){return console.deprecate("form.getAction()","form.action"),this.action},w.prototype.getMethod=function(){return console.deprecate("form.getMethod()","form.method "),this.method},w.prototype.getModel=function(){return console.deprecate("form.getModel()","form.model"),this.model},w.prototype.getView=function(){return console.deprecate("form.getView()","form.view"),this.view},w.prototype.getRecordName=function(){return console.deprecate("form.getRecordName()","form.recordName"),this.recordName},w.prototype.setRecordName=function(t){console.deprecate("form.setRecordName()",'form.recordName="val"'),this.recordName=t},w.prototype.setEditStatus=function(t){console.deprecate("form.setEditStatus()",'form.editStatus="val"'),this.editStatus=t},w.prototype.getEditStatus=function(){return console.deprecate("form.getEditStatus()","form.editStatus"),this.editStatus},w.prototype.getSurveyName=function(){return console.deprecate("form.getSurveyName()","form.editStatus"),this.surveyName}},function(t,e,n){var i,r,o;!function(n,s){"use strict";r=[],void 0===(o="function"==typeof(i=function(){return function(t){var e,n,i,r,o,s,a,u,l,c=this;c.Init=function(){return c.dom=null,c.nsp={},c.count=0,u[1]=!1,e>0&&(c.error={code:"",text:""}),e>0},c.AddFile=function(t){return t&&t.target?t.target.result?c.AddSource(t.target.result):b("emf"):b("nof")},c.AddSource=function(t){var n,i;if("object"==typeof t)(i=!!c.Get(1,t)&&t)&&(1===e&&!window.DOMParser||2===e&&!i.selectSingleNode("/"))&&(i=null);else try{i=h(t)}catch(t){i=!1}if(null===i)n=b("nos");else if(!1===i)n=b("inv");else if(!0===i)c.nsp=g(c.dom.documentElement),c.count=1,n=c.dom;else if(p(i)){if(f(i,"/"),!0===u[1]){var r=c.dom.createTextNode("\r\n");c.dom.documentElement.appendChild(r)}c.count++,n=c.dom}else n=!1;return n};var h=function(t){var r,o;return 1===e?c.dom?(o=i.parseFromString(t,"text/xml"),r=!!d(o)&&o):(c.dom=i.parseFromString(t,"text/xml"),r=!!d(c.dom)):c.dom?((o=new ActiveXObject(n)).async=!1,r=!!o.loadXML(t)&&o):(c.dom=new ActiveXObject(n),c.dom.async=!1,c.dom.setProperty("SelectionLanguage","XPath"),r=!!c.dom.loadXML(t)),r},d=function(t){return 0===t.getElementsByTagNameNS(r,"parsererror").length},p=function(t){var n=!0,i=c.dom.characterSet||c.dom.inputEncoding||c.dom.xmlEncoding,r=t.characterSet||t.inputEncoding||t.xmlEncoding;if(r!==i)n=b("enc");else if(t.documentElement.namespaceURI!==c.dom.documentElement.namespaceURI)n=b("nse");else if(t.documentElement.nodeName!==c.dom.documentElement.nodeName)if(u[0]){if(!u[1]){var o=void 0!==i?i:"UTF-8",a=c.dom.xmlVersion?c.dom.xmlVersion:"1.0",d='<?xml version="'+a+'" encoding="'+o+'"?>\r\n<'+u[0]+">\r\n</"+u[0]+">",p=h(d);if(p){var f=c.dom.documentElement.cloneNode(!0);p.documentElement.appendChild(f),f=p.createTextNode("\r\n"),p.documentElement.appendChild(f),c.dom=p,u[1]=!0}else n=b("jne"),u[1]=null}}else n=b("dif");if(n){var m=g(t.documentElement);for(var _ in m)c.nsp[_]||(void 0!==c.dom.documentElement.setAttributeNS?c.dom.documentElement.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+_,m[_]):c.dom.documentElement.setAttribute("xmlns:"+_,m[_]),c.nsp[_]=m[_]);l?1===e?s=v:y():s=null}return n},f=function(t,e){for(var n=0;n<t.childNodes.length;n++){var i,r=t.childNodes[n],o=m(t.childNodes,r,e,n),s=c.Query(o);if(1===r.nodeType){var u=!0;if(null===s||s.namespaceURI!==r.namespaceURI)i=r.cloneNode(!0),(s=c.Query(e)).appendChild(i);else if(!1!==_(s.getAttribute("stay"),a)&&(u=!1),u)try{for(var l=0;l<r.attributes.length;l++)r.attributes[l].namespaceURI&&void 0!==r.setAttributeNS?s.setAttributeNS(r.attributes[l].namespaceURI,r.attributes[l].nodeName,r.attributes[l].nodeValue):s.setAttribute(r.attributes[l].nodeName,r.attributes[l].nodeValue)}catch(t){}r.hasChildNodes()&&u&&f(r,o)}else 3!==r.nodeType&&8!==r.nodeType||(null===s||s.nodeType!==r.nodeType?(s=c.Query(e),i=3===r.nodeType?c.dom.createTextNode(r.nodeValue):c.dom.createComment(r.nodeValue),s.appendChild(i)):s.nodeValue=r.nodeValue)}},m=function(t,n,i,r){var o,s,a=0;if(1===n.nodeType){for(s=0;s<=r;s++)(l&&t[s].nodeType===n.nodeType&&t[s].nodeName===n.nodeName||!l&&7!==t[s].nodeType)&&a++;if(l){var u=!1,h=g(n);for(var d in h)"_"!==d&&(c.nsp[d]=h[d],u=2===e);u&&y(),o=n.prefix?n.prefix+":":c.nsp._?"_:":"",o+=n.localName?n.localName:n.baseName}else o="node()"}else if(3===n.nodeType||8===n.nodeType){for(s=0;s<=r;s++)t[s].nodeType===n.nodeType&&a++;o=3===n.nodeType?"text()":"comment()"}else o=i;return a&&(o=i+("/"===i.slice(-1)?"":"/")+o+"["+a+"]"),o},g=function(t){for(var e={},n=t.attributes,i=0;i<n.length;++i){var r=n[i].name.split(":");if("xmlns"===r[0]){var o=r[1]?r[1]:"_";e[o]=n[i].value}}return e};c.Query=function(t){var n;u[1]&&(t="/"+c.dom.documentElement.nodeName+("/"===t?"":t));try{n=1===e?(n=o.evaluate(t,c.dom,s,XPathResult.FIRST_ORDERED_NODE_TYPE,null)).singleNodeValue:c.dom.selectSingleNode(t)}catch(t){n=null}return n};var v=function(t){return c.nsp[t]||null},y=function(){var t="";for(var e in c.nsp)t+=" xmlns:"+e+"='"+c.nsp[e]+"'";t&&c.dom.setProperty("SelectionNamespaces",t.substr(1))},_=function(t,e){var n=!1;for(var i in e)if(e[i]===t){n=i;break}return n};c.Get=function(t,e){var n;if(t&&!e&&(e=c.dom),t)if(e)if(e.xml)n=e.xml;else try{n=(new XMLSerializer).serializeToString(e)}catch(t){n=null}else n="";else n=c.dom;if(n&&2===t){if(u[1]){var i=n.indexOf("<"+u[0]);n=n.substr(0,i)+"\r\n"+n.substr(i)}n=(n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ |\t/g,"&nbsp;")).replace(/(\r\n|\n|\r)/g,"<br>")}return n};var b=function(t){var e={nod:"XML DOM is not supported in this browser",nox:"xPath is not supported in this browser",nos:"Incompatible source object",nof:"File not found",emf:"File is empty",inv:"Invalid XML source",enc:"Different encoding",dif:"Different root nodes",jne:"Invalid join parameter",nse:"Namespace incompatibility",und:"Undefined error"};return c.error.code=e[t]?t:"und",c.error.text=e[c.error.code],!1};"object"!=typeof t&&(t={}),a=void 0===t.stay?["all"]:t.stay?"object"==typeof t.stay&&t.stay instanceof Array?t.stay:[t.stay]:[],u=void 0===t.join?["root"]:[!!t.join&&String(t.join)],l=void 0===t.updn||t.updn,"string"==typeof(e=function(){for(var t,e=!1,s=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","Microsoft.XmlDom"],a=s.length,u=0;u<a;u++)try{var l=new ActiveXObject(s[u]);if(l.async=!1,e=!0,l.loadXML("<x></x>")&&l.selectSingleNode("/"))break}catch(c){}if(e)u<a?(n=s[u],t=2):t="nox";else if(window.DOMParser)if(window.XPathEvaluator){var c=(i=new DOMParser).parseFromString("Invalid","text/xml");r=c.getElementsByTagName("parsererror")[0].namespaceURI,o=new XPathEvaluator,t=1}else t="nox";else t="nod";return t}())&&(c.error={},b(e),e=0),c.Init()}})?i.apply(e,r):i)||(t.exports=o)}()},function(t,e,n){"use strict";function i(t){this.message=t||"unknown",this.name="FormLogicError",this.stack=(new Error).stack}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,t.exports=i},function(t,e,n){var i=n(90);t.exports=function(t){var e=new i.XPathEvaluator;"function"==typeof t&&t(i),i.bindDomLevel3XPath(this.xml,{window:{JsXPathException:!0,JsXPathExpression:!0,JsXPathNSResolver:!0,JsXPathResult:!0,JsXPathNamespace:!0},document:{jsCreateExpression:function(){return e.createExpression.apply(e,arguments)},jsCreateNSResolver:function(){return e.createNSResolver.apply(e,arguments)},jsEvaluate:function(){return e.evaluate.apply(e,arguments)}}})}},function(t,e,n){var i=n(91),r=n(92),o=n(93);n(39),t.exports=function(){var t,e,n,s,a,u,l,c,h,d,p,f,m,g,y,_,b,x=[],$="http://www.w3.org/XML/1998/namespace",k=function(t){var e=[],n=function(t,e){var n,i,r=[];for(i=0;i<t.length;i++)n=t.item(i),!1!==U(n.nodeType,e)&&r.push(n);return r};switch(t.nodeType){case 1:e=n(t.childNodes,supportedChildNodeTypes=[1,3,4,7,8]);break;case 9:e=n(t.childNodes,supportedChildNodeTypes=[1,7,8]);break;case 2:case 3:case 4:case 7:case 8:case 13:break;default:throw new Error("Internal Error: nodeChildren - unsupported node type: "+t.nodeType)}return e},E=function(t){var e,n,i=[];for(e=k(t),n=0;n<e.length;n++)i.push(e[n]),i.push.apply(i,E(e[n]));return i},C=function(t){switch(t.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:return t.parentNode;case 2:return t.ownerElement?t.ownerElement:j(t.ownerDocument,!0,function(e,n){if(n===t)return!0});case 13:return t.ownerElement;default:throw new Error("Internal Error: nodeParent - node type not supported: "+t.type)}},T=function(t){for(var e,n=[];e=C(t);)n.push(e),t=e;return n},L=function(t){return D(t,"nextSibling")},S=function(t){return D(t,"previousSibling")},D=function(t,e){for(var n,i=[];n=t[e];){switch(n.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:i.push(n)}t=n}return i},M=function(t){switch(t.nodeType){case 9:return t;default:return t.ownerDocument}},A=function(t){var e,n=[];if(1===t.nodeType)for(e=0;e<t.attributes.length;e++)t.attributes[e].specified&&n.push(t.attributes[e]);return n.length>1&&n[0].compareDocumentPosition&&n.sort(function(t,e){var n=t.compareDocumentPosition(e);return 2==(2&n)?1:4==(4&n)?-1:0}),n},P=function(t){var e,n=A(t),i=[];for(e=0;e<n.length;e++)!1===I(n[e])&&i.push(n[e]);return i},N=function(t,e){var n,i,r,o,s=e||[];if(1===t.nodeType){if(t.ownerDocument.documentElement===t&&"object"==typeof t.ownerDocument.namespaces)for(i=t.ownerDocument.namespaces.length-1;i>=0;i--)o=t.ownerDocument.namespaces.item(i),O.call(this,s,o.name,o.urn,t);for(i=(n=A(t)).length-1;i>=0;i--)!1!==(r=I(n[i]))&&(1!==r.length?O.call(this,s,r[1],n[i].nodeValue,t):O.call(this,s,"",n[i].nodeValue,t));if(N.call(this,t.parentNode,s),void 0===e&&(O.call(this,s,"xml",$,t),s[0]&&""===s[0].prefix&&""===s[0].namespaceURI&&s.shift()),void 0===e)for(i=0;i<s.length;i++)s[i].ownerElement!==t&&(s[i]=G(s[i].prefix,s[i].nodeValue,t))}return s},O=function(t,e,n,i){var r,o;for(this.opts["case-sensitive"]||(e=e.toLowerCase()),r=0;r<t.length;r++)if(t[r].prefix===e)return!1;return o=G(e,n,i),""===e&&null!==n?t.unshift(o):t.push(o),!0},I=function(t){var e=t.nodeName.split(":");return"xmlns"===e[0]&&e},R=function(t,e){var n,i,r,o,s,a;if(1===t.nodeType)for(r=e?[e]:P(t),o=N.call(this,t),n=0;n<r.length;n++){for(1===(a=r[n].nodeName.split(":")).length&&(a[1]=a[0],a[0]=""),s=null,i=0;i<o.length;i++)if(o[i].prefix===a[0]){s=o[i].namespaceURI;break}if(null===s&&(s=""),this.opts["unique-ids"][s]===a[1])return r[n]}return null},j=function(t,e,n){var i,r,o,s,a=[];for(o=t.getElementsByTagName("*"),i=0;i<o.length;i++)if(1==(s=o.item(i)).nodeType)for(r=0;r<s.attributes.length;r++)if(s.attributes[r].specified&&!0===n(s,s.attributes[r])){if(e)return s;a.push(s);break}return e?null:a},F=function(t){var e,n,i,r;switch(t.nodeType){case 1:for(r=void 0===t.scopeName||document.addEventListener?1==(e=t.nodeName.split(":")).length?{prefix:"",name:e[0]}:{prefix:e[0],name:e[1]}:{prefix:"HTML"==t.scopeName?"":t.scopeName,name:t.nodeName},this.opts["case-sensitive"]||(r.prefix=r.prefix.toLowerCase(),r.name=r.name.toLowerCase()),n=N.call(this,t),i=0;i<n.length;i++)if(n[i].prefix===r.prefix)return r.ns=n[i].namespaceURI,r;if(""===r.prefix)return r.ns=null,r;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+r.prefix+'" on element: '+t.nodeName);case 2:if(1==(e=t.nodeName.split(":")).length)return{prefix:"",ns:null,name:e[0]};for(r={prefix:e[0],name:e[1]},this.opts["case-sensitive"]||(r.prefix=r.prefix.toLowerCase(),r.name=r.name.toLowerCase()),n=N.call(this,C(t)),i=0;i<n.length;i++)if(n[i].prefix===r.prefix)return r.ns=n[i].namespaceURI,r;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+r.prefix+'" on attribute: '+t.nodeName);case 13:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?t.prefix.toLowerCase():t.prefix};case 7:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?t.target.toLowerCase():t.target};default:return!1}},q=function(t){var e,n,i="";switch(t.nodeType){case 9:case 1:for((n=c(new p(t,1,1,{},{},{}),{type:"step",args:["descendant",{type:"nodeType",args:["text",[]]}]})).sortDocumentOrder(),e=0;e<n.value.length;e++)i+=n.value[e].data;return i;case 2:return t.nodeValue;case 13:return t.namespaceURI;case 7:case 8:case 3:case 4:return t.data;default:throw new Error("Internal Error: nodeStringValue does not support node type: "+t.nodeType)}},B=function(t,e,n){var i=new Error(n);return i.name=e,i.code=t,i},U=function(t,e){for(var n=e.length;n--;)if(e[n]===t)return n;return!1},z=function(t,e,n,i){var r,o,s,a,u;if(t instanceof _)if(e instanceof _){for(a=e.stringValues(),s=t.stringValues(),r=0;r<s.length;r++)for(o=0;o<a.length;o++)if((u=z(s[r],a[o],n,i)).toBoolean())return u}else if(e instanceof y){for(s=t.stringValues(),r=0;r<s.length;r++)if((u=z(new y(s[r].toNumber()),e,n,i)).toBoolean())return u}else if(e instanceof DateType||e instanceof g&&e.isDateString()){for(e instanceof g&&(e=new DateType(e)),s=t.stringValues(),r=0;r<s.length;r++)if((u=z(new DateType(s[r].toDate()),e,n,i)).toBoolean())return u}else{if(!(e instanceof g))return z(new m(t.toBoolean()),e,n,i);for(s=t.stringValues(),r=0;r<s.length;r++)if((u=z(s[r],e,n,i)).toBoolean())return u}else if(e instanceof _)if(t instanceof y){for(a=e.stringValues(),r=0;r<a.length;r++)if((u=z(t,new y(a[r].toNumber()),n,i)).toBoolean())return u}else if(t instanceof DateType||t instanceof g&&t.isDateString()){for(t instanceof g&&(t=new DateType(t)),a=e.stringValues(),r=0;r<a.length;r++)if((u=z(t,new DateType(a[r].toDate()),n,i)).toBoolean())return u}else{if(!(t instanceof g))return z(t,new m(e.toBoolean()),n,i);for(a=e.stringValues(),r=0;r<a.length;r++)if((u=z(t,a[r],n,i)).toBoolean())return u}else switch(n){case"=":case"!=":return new m(t instanceof m||e instanceof m?i(t.toBoolean(),e.toBoolean()):t instanceof y||e instanceof y?i(t.toNumber(),e.toNumber()):i(t.toString(),e.toString()));default:return new m(i(t.toNumber(),e.toNumber()))}return new m(!1)},V=function(t){switch(t.nodeType){case 2:case 3:case 4:case 7:case 8:return C(t);case 1:case 9:return t;case 13:default:throw new Error("Internal Error: getComparableNode - Node type not supported: "+t.nodeType)}},H=function(t,e){var n,i,r;if(13==t.nodeType&&13==e.nodeType&&t.ownerElement==e.ownerElement){if(t===e)return 0;for(i=N.call(b,t.ownerElement),r=0;r<i.length;r++){if(i[r]===t){n=4;break}if(i[r]===e){n=2;break}}}else 13==t.nodeType&&(t=t.ownerElement),13==e.nodeType&&(e=e.ownerElement),n=W(t,e);return n},W=function(t,e){var n,i,r,o,s,a=function(t,e,n,i,r,o,s,a,u){return 0===r||(r&o)===o?a+o:(r&s)===s?u:r};if(t.compareDocumentPosition)return t.compareDocumentPosition(e);if(t===e)return 0;if(n=V(t),i=V(e),9===n.nodeType)if(9===i.nodeType){if(n!==i)return 1;r=0}else{if(n!==i.ownerDocument)return 1;r=20}else if(9===i.nodeType){if(i!==n.ownerDocument)return 1;r=10}else{if(n.ownerDocument!==i.ownerDocument)return 1;if(!n.contains||void 0===n.sourceIndex||!i.contains||void 0===i.sourceIndex)throw new Error('Cannot compare elements. Neither "compareDocumentPosition" nor "contains" available.');r=(n!=i&&n.contains(i)&&16)+(n!=i&&i.contains(n)&&8)+(n.sourceIndex>=0&&i.sourceIndex>=0?(n.sourceIndex<i.sourceIndex&&4)+(n.sourceIndex>i.sourceIndex&&2):1)+0}if(t===n&&e===i)return r;if(t===n)return a(0,0,0,0,r,16,8,4,2);if(e===i)return a(0,0,0,0,r,8,16,2,4);if(16==(16&r))return 4;if(8==(8&r))return 2;if(0===r){for(o=0;o<n.attributes.length;o++)if((s=n.attributes[o]).specified){if(s===e)return 2;if(s===t)return 4}throw new Error("Internal Error: compareDocumentPosition failed to sort attributes.")}return r},Z=function(t){if(!t)throw B(9,"NOT_SUPPORTED_ERR","Context node was not supplied.");if(9!=t.nodeType&&1!=t.nodeType&&2!=t.nodeType&&3!=t.nodeType&&4!=t.nodeType&&8!=t.nodeType&&7!=t.nodeType&&13!=t.nodeType)throw B(9,"NOT_SUPPORTED_ERR","The supplied node type is not supported. (nodeType: "+t.nodeType+")");if(2==t.nodeType&&!t.specified)throw B(9,"NOT_SUPPORTED_ERR","The supplied node is a non-specified attribute node. Only specified attribute nodes are supported.")},G=function(t,e,n){var i,r;for(i=0;i<x.length;i++)if((r=x[i]).prefix===t&&r.nodeValue===e&&r.ownerElement===n)return r;return r=new u(t,e,n),x.push(r),r};return(f=function(t,e,n){this.value=t,this.type=e,this.supports=n}).prototype={value:null,type:null,supports:[],toBoolean:function(){throw new Error('Unable to convert "'+this.type+'" to "boolean".')},toString:function(){throw new Error('Unable to convert "'+this.type+'" to "string".')},toNumber:function(){throw new Error('Unable to convert "'+this.type+'" to "number".')},toNodeSet:function(){throw new Error('Unable to convert "'+this.type+'" to "node-set".')},toDate:function(){throw new Error('Unable to convert "'+this.type+'" to "date".')},canConvertTo:function(t){return!1!==U(t,this.supports)}},(m=function(t){f.call(this,t,"boolean",["boolean","string","number","date"])}).prototype=new f,m.constructor=m,m.prototype.toBoolean=function(){return this.value},m.prototype.toString=function(){return!0===this.value?"true":"false"},m.prototype.toNumber=function(){return this.value?1:0},m.prototype.toDate=function(){return null},(_=function(t,e){f.call(this,t,"node-set",["boolean","string","number","node-set","date"]),this.docOrder=e||"unsorted"}).prototype=new f,_.constructor=_,_.prototype.toBoolean=function(){return this.value.length>0},_.prototype.toString=function(){return this.value.length<1?"":(this.sortDocumentOrder(),q(this.value[0]))},_.prototype.toNumber=function(){return new g(this.toString()).toNumber()},_.prototype.toNodeSet=function(){return this.value},_.prototype.toDate=function(){return new g(this.toString()).toDate()},_.prototype.sortDocumentOrder=function(){switch(this.docOrder){case"document-order":break;case"reverse-document-order":this.value.reverse();break;default:this.value.sort(function(t,e){var n=H(t,e);if(4==(4&n))return-1;if(2==(2&n))return 1;throw new Error("NodeSetType.sortDocumentOrder - unexpected compare result: "+n)})}this.docOrder="document-order"},_.prototype.sortReverseDocumentOrder=function(){switch(this.docOrder){case"document-order":this.value.reverse();break;case"reverse-document-order":break;default:this.sortDocumentOrder(),this.value.reverse()}this.docOrder="reverse-document-order"},_.prototype.append=function(t){var e,n=0,i=0;if(!t instanceof _)throw new Error("NodeSetType can be passed into NodeSetType.append method");for(this.sortDocumentOrder(),t.sortDocumentOrder();n<this.value.length&&i<t.value.length;)if(0==(e=H(this.value[n],t.value[i])))i++;else if(4==(4&e))n++;else{if(2!=(2&e))throw new Error("Internal Error: NodeSetType.append - unable to sort nodes. (result: "+e+")");this.value.splice(n,0,t.value[i]),n++,i++}for(;i<t.value.length;i++)this.value.push(t.value[i]);this.docOrder="document-order"},_.prototype.stringValues=function(){var t,e,n=[];for(t=0;t<this.value.length;t++)(e=new g(q(this.value[t]))).isDateString()&&(e=new DateType(e.value)),n.push(e);return n},(g=function(t){f.call(this,t,"string",["boolean","string","number","date"])}).prototype=new f,g.constructor=g,g.prototype.toBoolean=function(){return this.value.length>0},g.prototype.toString=function(){return this.value},g.prototype.toNumber=function(){var t;return this.isDateString(this.value)?new DateType(this.value).toNumber():null!==(t=this.value.match(/^[ \t\r\n]*(-?[0-9]+(?:[.][0-9]*)?)[ \t\r\n]*$/))?parseFloat(t[1]):null!==(t=this.value.match(/^[ \t\r\n]*(-?[.][0-9]+)[ \t\r\n]*$/))?parseFloat(t[1]):Number.NaN},g.prototype.toDate=function(){return new Date(this.value)},g.prototype.isDateString=function(){return!!isNaN(this.value)&&(!isNaN(Date.parse(this.value))&&!!/('|")?[0-9]{4}(-|\/)[0-9]{2}(-|\/)[0-9]{2}('|")?/.test(this.value))},(y=function(t){f.call(this,t,"number",["boolean","string","number","date"])}).prototype=new f,y.constructor=y,y.prototype.toBoolean=function(){return 0!==this.value&&!isNaN(this.value)},y.prototype.toString=function(){return this.value.toString()},y.prototype.toNumber=function(){return this.value},y.prototype.toDate=function(){return new Date(864e5*this.value)},DateType=function(t){f.call(this,t,"date",["date","string","number","boolean"])},DateType.prototype=new f,DateType.constructor=DateType,DateType.prototype.toDate=function(){return new Date(this.value)},DateType.prototype.toString=function(){return new Date(this.value).toISOLocalString()},DateType.prototype.toNumber=function(){return new Date(this.value).getTime()/864e5},DateType.prototype.toBoolean=function(){return!isNaN(new Date(this.value).getTime())},(t=function(e,n){var i;switch(this.code=e,this.code){case t.INVALID_EXPRESSION_ERR:this.name="INVALID_EXPRESSION_ERR";break;case t.TYPE_ERR:this.name="TYPE_ERR";break;default:throw(i=new Error("Unsupported XPathException code: "+this.code)).name="XPathExceptionInternalError",i}this.message=n||""}).prototype.toString=function(){return'XPathException: "'+this.message+'", code: "'+this.code+'", name: "'+this.name+'"'},t.INVALID_EXPRESSION_ERR=51,t.TYPE_ERR=52,(e=function(t){var e,n,i;for(e in t){for(n in i=!1,this.opts)if(e===n){this.opts[e]=t[e],i=!0;break}if(!i)throw new Error("Unsupported option: "+e)}this.opts["unique-ids"][$]="id",this.opts["unique-ids"]["http://www.w3.org/1999/xhtml"]="id"}).prototype={opts:{"unique-ids":{},"case-sensitive":!1},createExpression:function(e,r){var o,s,a,u,l={};try{o=i.parse(e)}catch(e){throw s="The expression is not a legal expression.",e instanceof i.SyntaxError?s+=" (line: "+e.line+", character: "+e.column+")":s+=" ("+e.message+")",new t(t.INVALID_EXPRESSION_ERR,s)}if(o.nsPrefixes.length>0){if("object"!=typeof r||void 0===r.lookupNamespaceURI)throw new t(t.INVALID_EXPRESSION_ERR,"No namespace resolver provided or lookupNamespaceURI function not supported.");for(a=0;a<o.nsPrefixes.length;a++)if(l[u=o.nsPrefixes[a]]=r.lookupNamespaceURI(u),null===l[u])throw B(14,"NAMESPACE_ERR",'Undefined namespace prefix "'+u+'" in the context of the given resolver.')}return new n(o,l,this.opts)},createNSResolver:function(t){return new s(t)},evaluate:function(t,e,n,i,r){return(t=this.createExpression(t,n)).evaluate(e,i,r)}},(n=function(t,e,n){this.parsedExpression=t,this.namespaceMapping=e,this.opts=n||{}}).prototype={parsedExpression:null,namespaceMapping:null,opts:{},evaluate:function(t,e,n){var i;return b=this,Z(t),i=new p(t,1,1,{},d,this.namespaceMapping,this.opts),a.factory(i,e,c(i,this.parsedExpression.tree))}},(p=function(t,e,n,i,r,o,s){this.node=t,this.pos=e,this.size=n,this.vars=i,this.fns=r,this.nsMap=o,this.opts=s||{}}).prototype={node:null,pos:null,size:null,vars:null,fns:null,nsMap:null,opts:null,clone:function(t,e,n){return new p(t||this.node,void 0!==e?e:this.pos,void 0!==n?n:this.size,this.vars,this.fns,this.nsMap,this.opts)}},(s=function(t){Z(t),this.node=t}).prototype={node:null,lookupNamespaceURI:function(t){var e,n,i,r=this.node;switch(t){case"xml":return $;case"xmlns":return"http://www.w3.org/2000/xmlns/";default:switch(this.node.nodeType){case 9:r=r.documentElement;break;case 1:break;default:r=C(r)}if(null!=r&&1==r.nodeType){if(""==t){if(null!==(n=r.getAttribute("xmlns")))return n}else{if(r.ownerDocument.documentElement===r&&"object"==typeof r.ownerDocument.namespaces)for(e=0;e<r.ownerDocument.namespaces.length;e++)if((n=r.ownerDocument.namespaces.item(e)).name==t)return n.urn;for(e=0;e<r.attributes.length;e++)if(r.attributes[e].specified&&"xmlns:"+t==r.attributes[e].nodeName)return r.attributes[e].nodeValue}if(r.ownerDocument.documentElement!==r&&r.parentNode)return i=this.node,this.node=r.parentNode,n=this.lookupNamespaceURI(t),this.node=i,n}return null}}},h={"/":function(t,e){var n,i,r,o,s;if(null===t)i=new _([M(this.node)],"document-order");else if(!(i=c(this,t))instanceof _)throw new Error("Left side of path separator (/) must be of node-set type. (type: "+i.type+")");if(null===e)o=i;else for(o=new _([],"document-order"),n=0;n<i.value.length;n++){if(s=this.clone(i.value[n]),!(r=c(s,e))instanceof _)throw new Error("Right side of path separator (/) must be of node-set type. (type: "+r.type+")");o.append(r)}return o},step:function(t,e){var n,i,r,o,s,a,u;switch(t){case"child":n=new _(k(this.node),"document-order");break;case"descendant":n=new _(E(this.node),"document-order");break;case"parent":r=C(this.node),n=new _(r?[r]:[],"document-order");break;case"ancestor":n=new _(T(this.node),"reverse-document-order");break;case"following-sibling":n=new _(L(this.node),"document-order");break;case"preceding-sibling":n=new _(S(this.node),"reverse-document-order");break;case"following":n=new _(function(t){var e,n,i,r,o=[];for((e=T(t)).unshift(t),n=0;n<e.length;n++)for(i=L(e[n]),r=0;r<i.length;r++)o.push(i[r]),o.push.apply(o,E(i[r]));return o}(this.node),"document-order");break;case"preceding":n=new _(function(t){var e,n,i,r,o=[];for((e=T(t)).unshift(t),n=0;n<e.length;n++)for(i=S(e[n]),r=0;r<i.length;r++)o.push.apply(o,E(i[r]).reverse()),o.push(i[r]);return o}(this.node),"reverse-document-order");break;case"attribute":n=new _(P(this.node),"document-order");break;case"namespace":n=new _(N.call(this,this.node),"document-order");break;case"self":n=new _([this.node],"document-order");break;case"descendant-or-self":(o=E(this.node)).unshift(this.node),n=new _(o,"document-order");break;case"ancestor-or-self":(o=T(this.node)).unshift(this.node),n=new _(o,"reverse-document-order");break;default:throw new Error("Axis type not supported: "+t)}switch(e.type){case"nodeType":if("node"==e.args[0])break;for(i=n.value.length-1;i>=0;i--)switch(e.args[0]){case"text":3!=n.value[i].nodeType&&4!=n.value[i].nodeType&&n.value.splice(i,1);break;case"comment":8!=n.value[i].nodeType&&n.value.splice(i,1);break;case"processing-instruction":(7!=n.value[i].nodeType||e.args[1].length>0&&c(this,e.args[1][0])!=n.value[i].nodeName)&&n.value.splice(i,1)}break;case"name":switch(s=c(this,e),t){case"attribute":a=2;break;case"namespace":a=13;break;default:a=1}for(i=n.value.length-1;i>=0;i--)n.value[i].nodeType==a?null===s.ns&&null===s.name||(!1!==(u=F.call(this,n.value[i]))&&u.ns===s.ns?null!==s.name&&u.name.toLowerCase()!=s.name.toLowerCase()&&n.value.splice(i,1):n.value.splice(i,1)):n.value.splice(i,1);break;default:throw new Error("NodeTest type not supported in step: "+e.type)}return n},predicate:function(t,e,n){var i,r,o,s,a,u;if(!(i=c(this,e))instanceof _)throw new Error('Expected "node-set", got: '+i.type);switch(t){case"ancestor":case"ancestor-or-self":case"preceding":case"preceding-sibling":i.sortReverseDocumentOrder();break;default:i.sortDocumentOrder()}for(s=0;s<n.length;s++)for(r=0,a=1,u=i.value.length;r<i.value.length;a++){if((o=c(this.clone(i.value[r],a,u),n[s]))instanceof y){if(o.value!=a){i.value.splice(r,1);continue}}else if(!o.toBoolean()){i.value.splice(r,1);continue}r++}return i},function:function(t,e){var n,i,r,o,s=[],a=function(t){return(null!==t.ns?"{"+t.ns+"}":"{}")+t.name},u=function(t){var e,n,i=[];for(e=0;e<t.length;e++)n=void 0===t[e].t?"object":t[e].t,!1!==t[e].r?!0===t[e].rep&&(n+="+"):!0===t[e].rep?n+="*":n+="?",i.push(n);return"("+i.join(", ")+")"},l=0,h=[];if(null===(n=c(this,t)).ns&&(n.ns=""),!this.fns[n.ns]||!this.fns[n.ns][n.name])throw new Error('Function "'+a(n)+'" does not exist.');for((i=this.fns[n.ns][n.name]).args||(i.args=[]),r=0,l=0;r<i.args.length;l++,r++){if(void 0===e[l]){if(!1!==i.args[r].r)throw new Error('Function "'+a(n)+'" expects '+u(i.args)+".")}else h.push(void 0===i.args[r].t?"object":i.args[r].t);if(!0===i.args[r].rep){for(;l<e.length;l++)h.push(void 0===i.args[r].t?"object":i.args[r].t);break}}if(h.length<e.length)throw new Error('Function "'+a(n)+'" expects '+u(i.args)+".");for(r=0;r<e.length;r++){if(o=c(this,e[r]),"object"!==h[r]&&!o.canConvertTo(h[r]))throw new Error('Function "'+a(n)+'" expects '+u(i.args)+'.Cannot convert "'+o.type+'" to "'+h[r]+'".');s.push(o)}if(result=i.fn.apply(this,s),!result instanceof f)throw new Error('Function "'+a(n)+'" did not return a value that inherits from BaseType.');if("object"!==i.ret&&!result.canConvertTo(i.ret))throw new Error('Function "'+a(n)+'" return "'+result.type+'" type that cannot be converted to "'+i.ret+'".');return result},"|":function(t,e){if(t=c(this,t),e=c(this,e),void 0===t||void 0===e||!t instanceof _||!e instanceof _)throw new Error('Unable to perform union on non-"node-set" types.');return t.append(e),t},or:function(t,e){return c(this,t).toBoolean()?new m(!0):new m(c(this,e).toBoolean())},and:function(t,e){return c(this,t).toBoolean()?new m(c(this,e).toBoolean()):new m(!1)},"=":function(t,e){return z.call(this,c(this,t),c(this,e),"=",function(t,e){return t==e})},"!=":function(t,e){return z.call(this,c(this,t),c(this,e),"!=",function(t,e){return t!=e})},"<=":function(t,e){return z.call(this,c(this,t),c(this,e),"<=",function(t,e){return t<=e})},"<":function(t,e){return z.call(this,c(this,t),c(this,e),"<",function(t,e){return t<e})},">=":function(t,e){return z.call(this,c(this,t),c(this,e),">=",function(t,e){return t>=e})},">":function(t,e){return z.call(this,c(this,t),c(this,e),">",function(t,e){return t>e})},"+":function(t,e){return new y(c(this,t).toNumber()+c(this,e).toNumber())},"-":function(t,e){return new y(c(this,t).toNumber()-c(this,e).toNumber())},div:function(t,e){return new y(c(this,t).toNumber()/c(this,e).toNumber())},mod:function(t,e){return new y(c(this,t).toNumber()%c(this,e).toNumber())},"*":function(t,e){return new y(c(this,t).toNumber()*c(this,e).toNumber())},string:function(t){return new g(t)},number:function(t){return new y(t)},$:function(t){throw new Error("TODO: Not implemented.16")},name:function(t,e){var n=null;if(null!==t&&!(n=this.nsMap[t]))throw new Error('Namespace prefix "'+t+'" is not mapped to a namespace.');return{ns:n,name:e}}},(d={"":{last:{fn:function(){return new y(this.size)},ret:"number"},count:{fn:function(t){return new y(t.toNodeSet().length)},args:[{t:"node-set"}],ret:"number"},id:{fn:function(t){var e,n,i,r=this,o=[],s=[],a=function(t){var e,n=t.split(/[\u0020\u0009\u000D\u000A]+/);for(e=n.length-1;e>=0;e--)0==n[e].length&&n.splice(e,1);return n};if(t instanceof _)for(e=0;e<t.value.length;e++)o.push.apply(o,a(q(t.value[e])));else t=t.toString(),o=a(t);for(e=o.length-1;e>=0;e--)for(n=e-1;n>=0;n--)if(o[e]==o[n]&&e!=n){o.splice(e,1);break}for(e=0;e<o.length;e++)(i=M(this.node).getElementById(o[e]))&&R.call(this,i)?s.push(i):j(M(this.node),!0,function(t,n){var i=R.call(r,t,n);if(i&&i.nodeValue==o[e])return s.push(t),!0});return new _(s)},args:[{}],ret:"node-set"},"local-name":{fn:function(t){var e,n="";return 0==arguments.length&&(t=new _([this.node])),t.toNodeSet().length>0&&(t.sortDocumentOrder(),!1!==(e=F.call(this,t.value[0]))&&(n=e.name)),new g(n)},args:[{t:"node-set",r:!1}],ret:"string"},"namespace-uri":{fn:function(t){var e,n="";return 0==arguments.length&&(t=new _([this.node])),t.toNodeSet().length>0&&(t.sortDocumentOrder(),!1!==(e=F.call(this,t.value[0]))&&null!==e.ns&&(n=e.ns)),new g(n)},args:[{t:"node-set",r:!1}],ret:"string"},name:{fn:function(t){var e,n="";return 0==arguments.length&&(t=new _([this.node])),t.toNodeSet().length>0&&(t.sortDocumentOrder(),!1!==(e=F.call(this,t.value[0]))&&(n=e.prefix&&e.prefix.length>0?e.prefix+":"+e.name:e.name)),new g(n)},args:[{t:"node-set",r:!1}],ret:"string"},string:{fn:function(t){return 0==arguments.length&&(t=new _([this.node],"document-order")),new g(t.toString())},args:[{t:"object",r:!1}],ret:"string"},"starts-with":{fn:function(t,e){return new m(t.toString().substr(0,(e=e.toString()).length)==e)},args:[{t:"string"},{t:"string"}],ret:"string"},contains:{fn:function(t,e){return new m(-1!=t.toString().indexOf(e=e.toString()))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-before":{fn:function(t,e){return e=(t=t.toString()).indexOf(e.toString()),new g(-1==e?"":t.substr(0,e))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-after":{fn:function(t,e){var n;return t=t.toString(),e=e.toString(),n=t.indexOf(e),new g(-1==n?"":t.substr(n+e.length))},args:[{t:"string"},{t:"string"}],ret:"string"},substring:{fn:function(t,e,n){return t=t.toString(),e=Math.round(e.toNumber())-1,new g(isNaN(e)?"":2==arguments.length?t.substring(e<0?0:e):t.substring(e<0?0:e,e+Math.round(n.toNumber())))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},"string-length":{fn:function(t){return t=0==arguments.length?q(this.node):t.toString(),new y(t.length)},args:[{t:"string",r:!1}],ret:"number"},"normalize-space":{fn:function(t){return t=0==arguments.length?q(this.node):t.toString(),new g(t.replace(/^[\u0020\u0009\u000D\u000A]+/,"").replace(/[\u0020\u0009\u000D\u000A]+$/,"").replace(/[\u0020\u0009\u000D\u000A]+/g," "))},args:[{t:"string",r:!1}],ret:"string"},translate:{fn:function(t,e,n){var i,r,o,s="";for(t=t.toString(),e=e.toString(),n=n.toString(),i=0;i<t.length;i++)(-1==(r=e.indexOf(o=t.charAt(i)))||(o=n.charAt(r)))&&(s+=o);return new g(s)},args:[{t:"string"},{t:"string"},{t:"string"}],ret:"string"},boolean:{fn:function(t){return new m(t.toBoolean())},args:[{r:!0}],ret:"boolean"},not:{fn:function(t){return new m(!t.toBoolean())},args:[{t:"boolean"}],ret:"boolean"},true:{fn:function(){return new m(!0)},ret:"boolean"},false:{fn:function(){return new m(!1)},ret:"boolean"},lang:{fn:function(t){for(var e,n,i,r,o,s,a,u=this.node,l=t.toString().toLowerCase().split("-");9!=u.nodeType;u=C(u))for(e=P(u),o=0;o<e.length;o++)if(1===(n=e[o].nodeName.split(":")).length&&(n[1]=n[0],n[0]=""),"lang"==n[1]){if((i=e[o].nodeValue.toLowerCase().split("-")).length<l.length)continue;for(a=!0,s=0;s<l.length;s++)if(l[s]!=i[s]){a=!1;break}if(a)for(r=N.call(this,u),s=0;s<r.length;s++)if(r[s].prefix==n[0]&&r[s].nodeValue==$)return new m(!0)}return new m(!1)},args:[{t:"string"}],ret:"boolean"},number:{fn:function(t){return 0==arguments.length&&(t=new _([this.node],"document-order")),new y(t.toNumber())},args:[{t:"object",r:!1}],ret:"number"},sum:{fn:function(t){var e,n=0;for(t=t.toNodeSet(),e=0;e<t.length;e++)n+=new g(q(t[e])).toNumber();return new y(n)},args:[{t:"node-set"}],ret:"number"},floor:{fn:function(t){return new y(Math.floor(t))},args:[{t:"number"}],ret:"number"},ceiling:{fn:function(t){return new y(Math.ceil(t))},args:[{t:"number"}],ret:"number"},"count-non-empty":{fn:function(t){var e,n=0;for(t=t.toNodeSet(),e=0;e<t.length;e++)new g(q(t[e])).toString().length>0&&n++;return new y(n)},args:[{t:"node-set"}],ret:"number"},position:{fn:function(t){if(t){var e,n,i;if(1===(t=t.toNodeSet()).length){for(i=1,n=(e=t[0]).tagName;e.previousElementSibling&&e.previousElementSibling.tagName===n;)e=e.previousElementSibling,i++;return new y(i)}throw new Error("nodeset provided to position() contained multiple nodes")}return new y(this.pos)},args:[{t:"node-set",r:!1}],ret:"number"},concat:{fn:function(t){var e,n="";for(e=0;e<arguments.length;e++)n+=arguments[e]instanceof _?arguments[e].stringValues().join(""):arguments[e].toString();return new g(n)},args:[{t:"object",r:!1,rep:!0}],ret:"string"},round:{fn:function(t,e){return e=Math.round(e)||0,new y(Math.round(t*Math.pow(10,e))/Math.pow(10,e))},args:[{t:"number"},{t:"number",r:!1}],ret:"number"},selected:{fn:function(t,e){var n;return e=e.toString().trim(),n=t.toString(),new m(-1!=(" "+n+" ").indexOf(" "+e+" "))},args:[{t:"object"},{t:"string"}],ret:"boolean"},"selected-at":{fn:function(t,e){var n,i;return e=Math.round(e.toNumber()),n=t.toString().split(" "),i=e>=0&&e<n.length?n[e]:"",new g(i)},args:[{t:"object"},{t:"number"}],ret:"string"},"count-selected":{fn:function(t){var e=[];return(t=t.toNodeSet()).length>0?1==(e=q(t[0]).trim().split(" ")).length&&""===e[0]?new y(0):new y(e.length):new y(0)},args:[{t:"node-set"}],ret:"number"},checklist:{fn:function(t,e,n){var i,r,o=0;for(t=t.toNumber(),e=e.toNumber(),i=2;i<arguments.length;i++)if(arguments[i]instanceof _)for(r=0;r<arguments[i].stringValues().length;r++)!0===arguments[i].stringValues()[r].toBoolean()&&o++;else!0===arguments[i].toBoolean()&&o++;return new m((t<0||o>=t)&&(e<0||o<=e))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"weighted-checklist":{fn:function(t,e,n,i){var r,o=[],s=[],a=0;for(t=t.toNumber(),e=e.toNumber(),r=2;r<arguments.length;r+=2)v=arguments[r],w=arguments[r+1],v&&w&&(v instanceof _?o=o.concat(v.stringValues()):o.push(v),w instanceof _?s=s.concat(w.stringValues()):s.push(w));for(r=0;r<o.length;r++)!0===o[r].toBoolean()&&(a+=s[r].toNumber());return new m((t<0||a>=t)&&(e<0||a<=e))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"boolean-from-string":{fn:function(t){return new m("true"===t.toString().toLowerCase()||"1"===String(t))},args:[{t:"string"}],ret:"boolean"},if:{fn:function(t,e,n){return t.toBoolean()?e:n},args:[{t:"object"},{t:"object"},{t:"object"}],ret:"object"},date:{fn:function(t){return new DateType(t.toDate())},args:[{t:"object"}],ret:"string"},"date-time":{fn:function(t){return new DateType(t.toDate())},args:[{t:"object"}],ret:"string"},"decimal-date-time":{fn:function(t){var e,n=t.toDate();return e="Invalid Date"!==n.toString()?Math.round(1e3*n.getTime()/864e5)/1e3:Number.NaN,new y(e)},args:[{t:"object"}],ret:"number"},"decimal-time":{fn:function(t){var e,n=t.toString().match(/^(\d\d):(\d\d):(\d\d)(\.\d\d?\d?)?(\+|-)(\d\d):(\d\d)$/);new Error("Invalid time format provided.");if(n&&n[1]<24&&n[1]>=0&&n[2]<60&&n[2]>=0&&n[3]<60&&n[3]>=0&&n[6]<24&&n[6]>=0&&n[7]<60&&n[7]>=0){var i=function(t){return t<10?"0"+t:t},r=new Date,o=new Date(r.getFullYear()+"-"+i(r.getMonth()+1)+"-"+i(r.getDate())+"T"+t);e="Invalid Date"===o.toString()?Number.NaN:Math.round(1e3*(o.getSeconds()/3600+o.getMinutes()/60+o.getHours())/24)/1e3}else e=Number.NaN;return new y(e)},args:[{t:"string"}],ret:"number"},today:{fn:function(){var t=new Date;return new DateType(new Date(t.getFullYear(),t.getMonth(),t.getDate()))},ret:"string"},now:{fn:function(){return new DateType(new Date)},ret:"string"},regex:{fn:function(t,e){var n,i;return n=t.toString(),i=new RegExp(e),new m(i.test(n))},args:[{t:"object"},{t:"string"}],ret:"boolean"},uuid:{fn:function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)});return new g(t)},ret:"string"},int:{fn:function(t){return new y(t.toNumber()>=0?Math.floor(t.toNumber()):-Math.floor(Math.abs(t.toNumber())))},args:[{t:"string"}],ret:"number"},substr:{fn:function(t,e,n){return t=t.toString(),length=t.length,e=Math.round(e.toNumber()),n=n?Math.round(n.toNumber()):length,new g(isNaN(e)?"":t.substring(e<0?length+e:e,n<0?length+n:n))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},random:{fn:function(){return new y(Math.random().toFixed(15))},ret:"number"},min:{fn:function(t,e){var n,i,r,o,s;for(n=0;n<arguments.length;n++)if(arguments[n]instanceof _){for(s=arguments[n].toNodeSet(),i=0;i<s.length;i++)(o=new g(q(s[i])))&&(r=void 0!==r?Math.min(r,o.toNumber()):o.toNumber());0===s.length&&(r=NaN)}else(o=new g(arguments[n].toString()))&&(r=void 0!==r?Math.min(r,o.toNumber()):o.toNumber());return new y(r)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},max:{fn:function(t,e){var n,i,r,o,s;for(n=0;n<arguments.length;n++)if(arguments[n]instanceof _){for(s=arguments[n].toNodeSet(),i=0;i<s.length;i++)(o=new g(q(s[i])))&&(r=void 0!==r?Math.max(r,o.toNumber()):o.toNumber());0===s.length&&(r=NaN)}else(o=new g(arguments[n].toString()))&&(r=void 0!==r?Math.max(r,o.toNumber()):o.toNumber());return new y(r)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},join:{fn:function(t,e){var n,i=[];for(n=1;n<arguments.length;n++)arguments[n]instanceof _?i=i.concat(arguments[n].stringValues()):i.push(arguments[n].toString());for(value=i[0]||"",n=1;n<i.length;n++)value+=t.toString()+i[n];return new g(value)},args:[{t:"string"},{t:"object",r:!1,rep:!0}],ret:"string"},coalesce:{fn:function(t,e){return t.toString().length>0?t:e},args:[{t:"object"},{t:"object"}],ret:"string"},"format-date":{fn:function(t,e){var n,i=(t=new DateType(t)).toDate(),r=e.toString(),o=function(t,e){var i=t.toString(),r=e-i.length;for(n=0;n<r;n++)i="0"+i;return i},s=window?window.enketoFormLocale:void 0;if(!t.toBoolean())return new g(i.toString());for(prop in props={Y:i.getFullYear(),y:i.getFullYear().toString().substring(2,4),m:o(i.getMonth()+1,2),n:i.getMonth()+1,b:i.toLocaleDateString(s,{month:"short"}),d:o(i.getDate(),2),e:i.getDate(),H:o(i.getHours(),2),h:i.getHours(),M:o(i.getMinutes(),2),S:o(i.getSeconds(),2),3:o(i.getMilliseconds(),3),a:i.toLocaleDateString(s,{weekday:"short"})},props)r=r.replace("%"+prop,props[prop]);return new g(r)},args:[{t:"date"},{t:"string"}],ret:"string"},pow:{fn:function(t,e){return new y(Math.pow(t,e))},args:[{t:"number"},{t:"number"}],ret:"number"},sin:{fn:function(t){return new y(Math.sin(t))},args:[{t:"number"}],ret:"number"},cos:{fn:function(t){return new y(Math.cos(t))},args:[{t:"number"}],ret:"number"},tan:{fn:function(t){return new y(Math.tan(t))},args:[{t:"number"}],ret:"number"},acos:{fn:function(t){return new y(Math.acos(t))},args:[{t:"number"}],ret:"number"},asin:{fn:function(t){return new y(Math.asin(t))},args:[{t:"number"}],ret:"number"},atan:{fn:function(t){return new y(Math.atan(t))},args:[{t:"number"}],ret:"number"},atan2:{fn:function(t,e){return new y(Math.atan2(t,e))},args:[{t:"number"},{t:"number"}],ret:"number"},log10:{fn:function(t){return void 0!==Math.log10?new y(Math.log10(t)):new y(Math.log(t)/Math.LN10)},args:[{t:"number"}],ret:"number"},log:{fn:function(t){return new y(Math.log(t))},args:[{t:"number"}],ret:"number"},pi:{fn:function(){return new y(Math.PI)},args:[],ret:"number"},exp:{fn:function(t){return new y(Math.exp(t))},args:[{t:"number"}],ret:"number"},exp10:{fn:function(t){return new y(Math.pow(10,t))},args:[{t:"number"}],ret:"number"},sqrt:{fn:function(t){return new y(Math.sqrt(t))},args:[{t:"number"}],ret:"number"},once:{fn:function(t){var e=q(this.node),n=t.toString();return n="NaN"===n?"":n,new g(""!==e?e:n)},args:[{t:"string"}],ret:"string"},area:{fn:function(t){var e=[];return t instanceof _&&t.value.length>1?t.value.forEach(function(t){e.push(q(t))}):t instanceof _?e=q(t.value[0]).split(";"):t instanceof g&&(e=t.value.split(";")),new y(o.area(e))},args:[{t:"string"}],ret:"number"},distance:{fn:function(t){var e=[];return t instanceof _&&t.value.length>1?t.value.forEach(function(t){e.push(q(t))}):t instanceof _?e=q(t.value[0]).split(";"):t instanceof g&&(e=t.value.split(";")),new y(o.distance(e))},args:[{t:"string"}],ret:"number"},"ends-with":{fn:function(t,e){return new m(t.toString().substr(t.toString().length-e.toString().length)===e.toString())},args:[{t:"string"},{t:"string"}],ret:"string"},abs:{fn:function(t){return new y(Math.abs(t))},args:[{t:"number"}],ret:"number"},randomize:{fn:function(t,e){var n=e?e.toNumber():void 0;return new _(r(t.toNodeSet(),n),"document-order")},args:[{t:"node-set"},{t:"number",r:!1}],ret:"node-set"}}})[""]["format-date-time"]=d[""]["format-date"],c=function(t,e){if("function"!=typeof h[e.type])throw new Error("Internal Error: Expression type does not exist: "+e.type);return h[e.type].apply(t,e.args)},(a=function(e,n,i){switch(n){case a.NUMBER_TYPE:this.resultType=a.NUMBER_TYPE,this.numberValue=i.toNumber();break;case a.STRING_TYPE:this.resultType=a.STRING_TYPE,this.stringValue=i.toString();break;case a.BOOLEAN_TYPE:this.resultType=a.BOOLEAN_TYPE,this.booleanValue=i.toBoolean();break;case a.UNORDERED_NODE_ITERATOR_TYPE:case a.ORDERED_NODE_ITERATOR_TYPE:case a.UNORDERED_NODE_SNAPSHOT_TYPE:case a.ORDERED_NODE_SNAPSHOT_TYPE:case a.ANY_UNORDERED_NODE_TYPE:case a.FIRST_ORDERED_NODE_TYPE:if(!i instanceof _)throw new Error('Expected result of type "node-set", got: "'+i.type+'"');switch(this.resultType=n,n){case a.UNORDERED_NODE_ITERATOR_TYPE:case a.UNORDERED_NODE_SNAPSHOT_TYPE:this._value=i.toNodeSet(),this.snapshotLength=this._value.length;break;case a.ORDERED_NODE_ITERATOR_TYPE:case a.ORDERED_NODE_SNAPSHOT_TYPE:i.sortDocumentOrder(),this._value=i.toNodeSet(),this.snapshotLength=this._value.length;break;case a.ANY_UNORDERED_NODE_TYPE:i=i.toNodeSet(),this.singleNodeValue=i.length?i[0]:null;break;case a.FIRST_ORDERED_NODE_TYPE:i.sortDocumentOrder(),i=i.toNodeSet(),this.singleNodeValue=i.length?i[0]:null;break;default:throw new t(t.TYPE_ERR,"XPath result type not supported. (type: "+n+")")}break;default:throw new t(t.TYPE_ERR,"XPath result type not supported. (type: "+n+")")}}).factory=function(e,n,i){var r;if(n!==a.ANY_TYPE)return new a(e,n,i);if(i instanceof _)r=new a(e,a.UNORDERED_NODE_ITERATOR_TYPE,i);else if(i instanceof y)r=new a(e,a.NUMBER_TYPE,i);else if(i instanceof m)r=new a(e,a.BOOLEAN_TYPE,i);else{if(!(i instanceof g))throw new t(t.TYPE_ERR,"Internal Error: Unsupported value type: "+typeof i);r=new a(e,a.STRING_TYPE,i)}return r},a.prototype={resultType:null,numberValue:null,stringValue:null,booleanValue:null,singleNodeValue:null,invalidIteratorState:null,snapshotLength:null,_iteratorIndex:0,iterateNext:function(){if(this.resultType!=a.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=a.ORDERED_NODE_ITERATOR_TYPE)throw new t(t.TYPE_ERR,"iterateNext() method may only be used with results of type UNORDERED_NODE_ITERATOR_TYPE or ORDERED_NODE_ITERATOR_TYPE");return this._iteratorIndex<this._value.length?this._value[this._iteratorIndex++]:null},snapshotItem:function(e){if(this.resultType!=a.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=a.ORDERED_NODE_SNAPSHOT_TYPE)throw new t(t.TYPE_ERR,"snapshotItem() method may only be used with results of type UNORDERED_NODE_SNAPSHOT_TYPE or ORDERED_NODE_SNAPSHOT_TYPE");return this._value[e]}},a.ANY_TYPE=0,a.NUMBER_TYPE=1,a.STRING_TYPE=2,a.BOOLEAN_TYPE=3,a.UNORDERED_NODE_ITERATOR_TYPE=4,a.ORDERED_NODE_ITERATOR_TYPE=5,a.UNORDERED_NODE_SNAPSHOT_TYPE=6,a.ORDERED_NODE_SNAPSHOT_TYPE=7,a.ANY_UNORDERED_NODE_TYPE=8,a.FIRST_ORDERED_NODE_TYPE=9,(u=function(t,e,n){if(1!=n.nodeType)throw new Error("Internal Error: XPathNamespace owner element must be an Element node.");this.ownerElement=n,this.ownerDocument=n.ownerDocument,this.nodeName="#namespace",this.prefix=t,this.localName=t,this.nodeType=u.XPATH_NAMESPACE_NODE,this.namespaceURI=e,this.nodeValue=e}).XPATH_NAMESPACE_NODE=13,l={XPathException:t,XPathEvaluator:e,XPathNSResolver:s,XPathExpression:n,XPathResult:a,XPathNamespace:u,customXPathFunction:{type:{StringType:g,NumberType:y,NodeSetType:_,BooleanType:m},add:function(t,e){d[""][t]=e},remove:function(t){delete d[""][t]}},getCurrentDomLevel3XPathBindings:function(){return{window:{XPathException:window.XPathException,XPathExpression:window.XPathExpression,XPathNSResolver:window.XPathNSResolver,XPathResult:window.XPathResult,XPathNamespace:window.XPathNamespace},document:{createExpression:document.createExpression,createNSResolver:document.createNSResolver,evaluate:document.evaluate}}},createDomLevel3XPathBindings:function(i){var r=new e(i);return{window:{XPathException:t,XPathExpression:n,XPathNSResolver:s,XPathResult:a,XPathNamespace:u},document:{createExpression:function(){return r.createExpression.apply(r,arguments)},createNSResolver:function(){return r.createNSResolver.apply(r,arguments)},evaluate:function(){return r.evaluate.apply(r,arguments)}}}},bindDomLevel3XPath:function(t,e){var n,i=e||l.createDomLevel3XPathBindings(),r=l.getCurrentDomLevel3XPathBindings();t=t||document;for(n in i.window)window[n]=i.window[n];for(n in i.document)t[n]=i.document[n];return r}}}()},function(t,e){t.exports=function(){"use strict";function t(e,n,i,r){this.message=e,this.expected=n,this.found=i,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(t,Error),{SyntaxError:t,parse:function(e){var n,i=arguments.length>1?arguments[1]:{},r={},o={XPath:En},s=En,a=function(t){return{tree:t,nsPrefixes:Xn}},u="/",l={type:"literal",value:"/",description:'"/"'},c=function(t){return{type:"/",args:[null,t?t[1]:null]}},h="//",d={type:"literal",value:"//",description:'"//"'},p=function(t,e){var n;for(n=0;n<e.length;n++)t=Qn(e[n][1],t,e[n][3]);return t},f=function(t,e,n){return Yn({type:"step",args:[t,e]},t,n,1)},m="::",g={type:"literal",value:"::",description:'"::"'},v=function(t){return t},y=function(t){return t.length?t:"child"},_="ancestor-or-self",b={type:"literal",value:"ancestor-or-self",description:'"ancestor-or-self"'},w="ancestor",x={type:"literal",value:"ancestor",description:'"ancestor"'},$="attribute",k={type:"literal",value:"attribute",description:'"attribute"'},E="child",C={type:"literal",value:"child",description:'"child"'},T="descendant-or-self",L={type:"literal",value:"descendant-or-self",description:'"descendant-or-self"'},S="descendant",D={type:"literal",value:"descendant",description:'"descendant"'},M="following-sibling",A={type:"literal",value:"following-sibling",description:'"following-sibling"'},P="following",N={type:"literal",value:"following",description:'"following"'},O="namespace",I={type:"literal",value:"namespace",description:'"namespace"'},R="parent",j={type:"literal",value:"parent",description:'"parent"'},F="preceding-sibling",q={type:"literal",value:"preceding-sibling",description:'"preceding-sibling"'},B="preceding",U={type:"literal",value:"preceding",description:'"preceding"'},z="self",V={type:"literal",value:"self",description:'"self"'},H="(",W={type:"literal",value:"(",description:'"("'},Z=")",G={type:"literal",value:")",description:'")"'},Y=function(t){return{type:"nodeType",args:[t,[]]}},X="processing-instruction",K={type:"literal",value:"processing-instruction",description:'"processing-instruction"'},J=function(t,e){return{type:"nodeType",args:[t,[e]]}},Q=function(t){return t},tt="[",et={type:"literal",value:"[",description:'"["'},nt="]",it={type:"literal",value:"]",description:'"]"'},rt=function(t){return t},ot=function(t){return Qn("//",null,t)},st="..",at={type:"literal",value:"..",description:'".."'},ut=".",lt={type:"literal",value:".",description:'"."'},ct=function(t){var e={type:"step",args:["self",{type:"nodeType",args:["node",[]]}]};return".."==t&&(e.args[0]="parent"),e},ht="@",dt={type:"literal",value:"@",description:'"@"'},pt=function(t){return t?"attribute":""},ft=function(t){return t},mt=function(t){return t},gt=function(t){return t},vt=",",yt={type:"literal",value:",",description:'","'},_t=function(t,e){var n,i=[];if(e)for(i.push(e[1]),n=0;n<e[2].length;n++)i.push(e[2][n][3]);return{type:"function",args:[t,i]}},bt="|",wt={type:"literal",value:"|",description:'"|"'},xt=function(t,e){return Gn(t,e,1,3)},$t=function(t,e){return e?Qn(e[1],t,e[3]):t},kt=function(t){return t},Et=function(t,e){return Yn(t,"child",e,1)},Ct="or",Tt={type:"literal",value:"or",description:'"or"'},Lt="and",St={type:"literal",value:"and",description:'"and"'},Dt="=",Mt={type:"literal",value:"=",description:'"="'},At="!=",Pt={type:"literal",value:"!=",description:'"!="'},Nt="<=",Ot={type:"literal",value:"<=",description:'"<="'},It="<",Rt={type:"literal",value:"<",description:'"<"'},jt=">=",Ft={type:"literal",value:">=",description:'">="'},qt=">",Bt={type:"literal",value:">",description:'">"'},Ut="+",zt={type:"literal",value:"+",description:'"+"'},Vt="-",Ht={type:"literal",value:"-",description:'"-"'},Wt="div",Zt={type:"literal",value:"div",description:'"div"'},Gt="mod",Yt={type:"literal",value:"mod",description:'"mod"'},Xt=function(t){return{type:"*",args:[{type:"number",args:[-1]},t]}},Kt='"',Jt={type:"literal",value:'"',description:'"\\""'},Qt=/^[^"]/,te={type:"class",value:'[^"]',description:'[^"]'},ee=function(t){return{type:"string",args:[t.join("")]}},ne="'",ie={type:"literal",value:"'",description:'"\'"'},re=/^[^']/,oe={type:"class",value:"[^']",description:"[^']"},se=function(t,e){return{type:"number",args:[e?parseFloat(t+"."+e[1]):parseInt(t)]}},ae=function(t){return{type:"number",args:[parseFloat("."+t)]}},ue=/^[0-9]/,le={type:"class",value:"[0-9]",description:"[0-9]"},ce=function(t){return t.join("")},he="*",de={type:"literal",value:"*",description:'"*"'},pe=function(t){var e;if(null===Zn.args[0])for(e=0;e<Jn.length;e++)if(Zn.args[1]==Jn[e])return!1;return!0},fe=function(t){return""===t.args[0]?t={type:t.type,args:[null,t.args[1]]}:Kn(t.args[0]),t},me="$",ge={type:"literal",value:"$",description:'"$"'},ve=function(t){return Kn(t.args[0]),{type:"$",args:[t]}},ye=function(){return{type:"name",args:[null,null]}},_e=":",be={type:"literal",value:":",description:'":"'},we=function(t){return Kn(t),{type:"name",args:[t,null]}},xe=function(t){return Kn(t.args[0]),t},$e="comment",ke={type:"literal",value:"comment",description:'"comment"'},Ee="text",Ce={type:"literal",value:"text",description:'"text"'},Te="node",Le={type:"literal",value:"node",description:'"node"'},Se=/^[ \t\r\n]/,De={type:"class",value:"[\\u0020\\u0009\\u000D\\u000A]",description:"[\\u0020\\u0009\\u000D\\u000A]"},Me=function(t){return Zn=t,t},Ae=function(t,e){return{type:"name",args:[t,e]}},Pe=function(t){return{type:"name",args:[null,t]}},Ne=/^[A-Z]/,Oe={type:"class",value:"[A-Z]",description:"[A-Z]"},Ie="_",Re={type:"literal",value:"_",description:'"_"'},je=/^[a-z]/,Fe={type:"class",value:"[a-z]",description:"[a-z]"},qe=/^[\xC0-\xD6]/,Be={type:"class",value:"[\\u00C0-\\u00D6]",description:"[\\u00C0-\\u00D6]"},Ue=/^[\xD8-\xF6]/,ze={type:"class",value:"[\\u00D8-\\u00F6]",description:"[\\u00D8-\\u00F6]"},Ve=/^[\xF8-\u02FF]/,He={type:"class",value:"[\\u00F8-\\u02FF]",description:"[\\u00F8-\\u02FF]"},We=/^[\u0370-\u037D]/,Ze={type:"class",value:"[\\u0370-\\u037D]",description:"[\\u0370-\\u037D]"},Ge=/^[\u037F-\u1FFF]/,Ye={type:"class",value:"[\\u037F-\\u1FFF]",description:"[\\u037F-\\u1FFF]"},Xe=/^[\u200C-\u200D]/,Ke={type:"class",value:"[\\u200C-\\u200D]",description:"[\\u200C-\\u200D]"},Je=/^[\u2070-\u218F]/,Qe={type:"class",value:"[\\u2070-\\u218F]",description:"[\\u2070-\\u218F]"},tn=/^[\u2C00-\u2FEF]/,en={type:"class",value:"[\\u2C00-\\u2FEF]",description:"[\\u2C00-\\u2FEF]"},nn=/^[\u3001-\uD7FF]/,rn={type:"class",value:"[\\u3001-\\uD7FF]",description:"[\\u3001-\\uD7FF]"},on=/^[\uF900-\uFDCF]/,sn={type:"class",value:"[\\uF900-\\uFDCF]",description:"[\\uF900-\\uFDCF]"},an=/^[\uFDF0-\uFFFD]/,un={type:"class",value:"[\\uFDF0-\\uFFFD]",description:"[\\uFDF0-\\uFFFD]"},ln=/^[\xB7]/,cn={type:"class",value:"[\\u00B7]",description:"[\\u00B7]"},hn=/^[\u0300-\u036F]/,dn={type:"class",value:"[\\u0300-\\u036F]",description:"[\\u0300-\\u036F]"},pn=/^[\u203F-\u2040]/,fn={type:"class",value:"[\\u203F-\\u2040]",description:"[\\u203F-\\u2040]"},mn=function(t,e){return t+e.join("")},gn=0,vn=[{line:1,column:1,seenCR:!1}],yn=0,_n=[],bn=0;if("startRule"in i){if(!(i.startRule in o))throw new Error("Can't start parsing from rule \""+i.startRule+'".');s=o[i.startRule]}function wn(t){var n,i,r=vn[t];if(r)return r;for(n=t-1;!vn[n];)n--;for(r={line:(r=vn[n]).line,column:r.column,seenCR:r.seenCR};n<t;)"\n"===(i=e.charAt(n))?(r.seenCR||r.line++,r.column=1,r.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(r.line++,r.column=1,r.seenCR=!0):(r.column++,r.seenCR=!1),n++;return vn[t]=r,r}function xn(t,e){var n=wn(t),i=wn(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:i.line,column:i.column}}}function $n(t){gn<yn||(gn>yn&&(yn=gn,_n=[]),_n.push(t))}function kn(e,n,i,r){return null!==n&&function(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(n),new t(null!==e?e:function(t,e){var n,i=new Array(t.length);for(n=0;n<t.length;n++)i[n]=t[n].description;return"Expected "+(t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}(e)+'"':"end of input")+" found."}(n,i),n,i,r)}function En(){var t,e;return t=gn,Un()!==r&&(e=Dn())!==r&&Un()!==r?t=a(e):(gn=t,t=r),t}function Cn(){var t;return(t=Tn())===r&&(t=function(){var t,n,i,o,s;return(t=function(){var t,n,i;return t=gn,e.substr(gn,2)===h?(n=h,gn+=2):(n=r,0===bn&&$n(d)),n!==r&&Un()!==r&&(i=Tn())!==r?(n=ot(i),t=n):(gn=t,t=r),t}())===r&&(t=gn,47===e.charCodeAt(gn)?(n=u,gn++):(n=r,0===bn&&$n(l)),n!==r?(i=gn,(o=Un())!==r&&(s=Tn())!==r?i=o=[o,s]:(gn=i,i=r),i===r&&(i=null),i!==r?(n=c(i),t=n):(gn=t,t=r)):(gn=t,t=r)),t}()),t}function Tn(){var t,n,i,o,s,a,c,f;if(t=gn,(n=Ln())!==r){for(i=[],o=gn,(s=Un())!==r?(e.substr(gn,2)===h?(a=h,gn+=2):(a=r,0===bn&&$n(d)),a===r&&(47===e.charCodeAt(gn)?(a=u,gn++):(a=r,0===bn&&$n(l))),a!==r&&(c=Un())!==r&&(f=Ln())!==r?o=s=[s,a,c,f]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(s=Un())!==r?(e.substr(gn,2)===h?(a=h,gn+=2):(a=r,0===bn&&$n(d)),a===r&&(47===e.charCodeAt(gn)?(a=u,gn++):(a=r,0===bn&&$n(l))),a!==r&&(c=Un())!==r&&(f=Ln())!==r?o=s=[s,a,c,f]:(gn=o,o=r)):(gn=o,o=r);i!==r?t=n=p(n,i):(gn=t,t=r)}else gn=t,t=r;return t}function Ln(){var t,n,i,o,s,a,u;if(t=gn,(n=function(){var t,n,i;return t=gn,(n=function(){var t;return e.substr(gn,16)===_?(t=_,gn+=16):(t=r,0===bn&&$n(b)),t===r&&(e.substr(gn,8)===w?(t=w,gn+=8):(t=r,0===bn&&$n(x)),t===r&&(e.substr(gn,9)===$?(t=$,gn+=9):(t=r,0===bn&&$n(k)),t===r&&(e.substr(gn,5)===E?(t=E,gn+=5):(t=r,0===bn&&$n(C)),t===r&&(e.substr(gn,18)===T?(t=T,gn+=18):(t=r,0===bn&&$n(L)),t===r&&(e.substr(gn,10)===S?(t=S,gn+=10):(t=r,0===bn&&$n(D)),t===r&&(e.substr(gn,17)===M?(t=M,gn+=17):(t=r,0===bn&&$n(A)),t===r&&(e.substr(gn,9)===P?(t=P,gn+=9):(t=r,0===bn&&$n(N)),t===r&&(e.substr(gn,9)===O?(t=O,gn+=9):(t=r,0===bn&&$n(I)),t===r&&(e.substr(gn,6)===R?(t=R,gn+=6):(t=r,0===bn&&$n(j)),t===r&&(e.substr(gn,17)===F?(t=F,gn+=17):(t=r,0===bn&&$n(q)),t===r&&(e.substr(gn,9)===B?(t=B,gn+=9):(t=r,0===bn&&$n(U)),t===r&&(e.substr(gn,4)===z?(t=z,gn+=4):(t=r,0===bn&&$n(V)))))))))))))),t}())!==r&&Un()!==r?(e.substr(gn,2)===m?(i=m,gn+=2):(i=r,0===bn&&$n(g)),i!==r?(n=v(n),t=n):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,(n=function(){var t;return gn,64===e.charCodeAt(gn)?(t=ht,gn++):(t=r,0===bn&&$n(dt)),t===r&&(t=null),t!==r&&(t=pt(t)),t}())!==r&&(n=y(n)),t=n),t}())!==r)if(Un()!==r)if((i=function(){var t,n,i,o,s;return t=gn,(n=function(){var t;return e.substr(gn,7)===$e?(t=$e,gn+=7):(t=r,0===bn&&$n(ke)),t===r&&(e.substr(gn,4)===Ee?(t=Ee,gn+=4):(t=r,0===bn&&$n(Ce)),t===r&&(e.substr(gn,22)===X?(t=X,gn+=22):(t=r,0===bn&&$n(K)),t===r&&(e.substr(gn,4)===Te?(t=Te,gn+=4):(t=r,0===bn&&$n(Le))))),t}())!==r&&Un()!==r?(40===e.charCodeAt(gn)?(i=H,gn++):(i=r,0===bn&&$n(W)),i!==r&&Un()!==r?(41===e.charCodeAt(gn)?(o=Z,gn++):(o=r,0===bn&&$n(G)),o!==r?(n=Y(n),t=n):(gn=t,t=r)):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,e.substr(gn,22)===X?(n=X,gn+=22):(n=r,0===bn&&$n(K)),n!==r&&Un()!==r?(40===e.charCodeAt(gn)?(i=H,gn++):(i=r,0===bn&&$n(W)),i!==r&&Un()!==r&&(o=Fn())!==r&&Un()!==r?(41===e.charCodeAt(gn)?(s=Z,gn++):(s=r,0===bn&&$n(G)),s!==r?(n=J(n,o),t=n):(gn=t,t=r)):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,(n=function(){var t,n,i,o;return t=gn,42===e.charCodeAt(gn)?(n=he,gn++):(n=r,0===bn&&$n(de)),n!==r&&(n=ye()),(t=n)===r&&(t=gn,(n=Vn())!==r?(58===e.charCodeAt(gn)?(i=_e,gn++):(i=r,0===bn&&$n(be)),i!==r?(42===e.charCodeAt(gn)?(o=he,gn++):(o=r,0===bn&&$n(de)),o!==r?(n=we(n),t=n):(gn=t,t=r)):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,(n=zn())!==r&&(n=xe(n)),t=n)),t}())!==r&&(n=Q(n)),t=n)),t}())!==r){for(o=[],s=gn,(a=Un())!==r&&(u=Sn())!==r?s=a=[a,u]:(gn=s,s=r);s!==r;)o.push(s),s=gn,(a=Un())!==r&&(u=Sn())!==r?s=a=[a,u]:(gn=s,s=r);o!==r?t=n=f(n,i,o):(gn=t,t=r)}else gn=t,t=r;else gn=t,t=r;else gn=t,t=r;return t===r&&(t=function(){var t;return gn,e.substr(gn,2)===st?(t=st,gn+=2):(t=r,0===bn&&$n(at)),t===r&&(46===e.charCodeAt(gn)?(t=ut,gn++):(t=r,0===bn&&$n(lt))),t!==r&&(t=ct(t)),t}()),t}function Sn(){var t,n,i,o;return t=gn,91===e.charCodeAt(gn)?(n=tt,gn++):(n=r,0===bn&&$n(et)),n!==r&&Un()!==r&&(i=Dn())!==r&&Un()!==r?(93===e.charCodeAt(gn)?(o=nt,gn++):(o=r,0===bn&&$n(it)),o!==r?t=n=rt(i):(gn=t,t=r)):(gn=t,t=r),t}function Dn(){var t;return gn,(t=function(){var t,n,i,o,s,a,u,l;if(t=gn,(n=Pn())!==r){for(i=[],o=gn,(s=Un())!==r?(e.substr(gn,2)===Ct?(a=Ct,gn+=2):(a=r,0===bn&&$n(Tt)),a!==r&&(u=Un())!==r&&(l=Pn())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(s=Un())!==r?(e.substr(gn,2)===Ct?(a=Ct,gn+=2):(a=r,0===bn&&$n(Tt)),a!==r&&(u=Un())!==r&&(l=Pn())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?(n=xt(n,i),t=n):(gn=t,t=r)}else gn=t,t=r;return t}())!==r&&(t=rt(t)),t}function Mn(){var t,n,i,o;return t=gn,(n=function(){var t,n,i;return t=gn,36===e.charCodeAt(gn)?(n=me,gn++):(n=r,0===bn&&$n(ge)),n!==r&&(i=zn())!==r?(n=ve(i),t=n):(gn=t,t=r),t}())!==r&&(n=ft(n)),(t=n)===r&&(t=gn,40===e.charCodeAt(gn)?(n=H,gn++):(n=r,0===bn&&$n(W)),n!==r&&Un()!==r&&(i=Dn())!==r&&Un()!==r?(41===e.charCodeAt(gn)?(o=Z,gn++):(o=r,0===bn&&$n(G)),o!==r?t=n=rt(i):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,(n=Fn())!==r&&(n=mt(n)),(t=n)===r&&(t=gn,(n=function(){var t,n,i,o,s;return t=gn,(n=qn())!==r?(i=gn,46===e.charCodeAt(gn)?(o=ut,gn++):(o=r,0===bn&&$n(lt)),o!==r?((s=qn())===r&&(s=null),s!==r?i=o=[o,s]:(gn=i,i=r)):(gn=i,i=r),i===r&&(i=null),i!==r?(n=se(n,i),t=n):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,46===e.charCodeAt(gn)?(n=ut,gn++):(n=r,0===bn&&$n(lt)),n!==r&&(i=qn())!==r?(n=ae(i),t=n):(gn=t,t=r)),t}())!==r&&(n=gt(n)),(t=n)===r&&(t=function(){var t,n,i,o,s,a,u,l,c,h,d,p;if(t=gn,(n=function(){var t,e;return t=gn,(e=zn())!==r&&(pe(e)?void 0:r)!==r?(e=fe(e),t=e):(gn=t,t=r),t}())!==r)if(Un()!==r)if(40===e.charCodeAt(gn)?(i=H,gn++):(i=r,0===bn&&$n(W)),i!==r){if(o=gn,(s=Un())!==r)if((a=Dn())!==r){for(u=[],l=gn,(c=Un())!==r?(44===e.charCodeAt(gn)?(h=vt,gn++):(h=r,0===bn&&$n(yt)),h!==r&&(d=Un())!==r&&(p=Dn())!==r?l=c=[c,h,d,p]:(gn=l,l=r)):(gn=l,l=r);l!==r;)u.push(l),l=gn,(c=Un())!==r?(44===e.charCodeAt(gn)?(h=vt,gn++):(h=r,0===bn&&$n(yt)),h!==r&&(d=Un())!==r&&(p=Dn())!==r?l=c=[c,h,d,p]:(gn=l,l=r)):(gn=l,l=r);u!==r?o=s=[s,a,u]:(gn=o,o=r)}else gn=o,o=r;else gn=o,o=r;o===r&&(o=null),o!==r&&(s=Un())!==r?(41===e.charCodeAt(gn)?(a=Z,gn++):(a=r,0===bn&&$n(G)),a!==r?(n=_t(n,o),t=n):(gn=t,t=r)):(gn=t,t=r)}else gn=t,t=r;else gn=t,t=r;else gn=t,t=r;return t}())))),t}function An(){var t,n,i,o,s,a,c;return t=gn,(n=function(){var t,e,n,i,o,s;if(t=gn,(e=Mn())!==r){for(n=[],i=gn,(o=Un())!==r&&(s=Sn())!==r?i=o=[o,s]:(gn=i,i=r);i!==r;)n.push(i),i=gn,(o=Un())!==r&&(s=Sn())!==r?i=o=[o,s]:(gn=i,i=r);n!==r?(e=Et(e,n),t=e):(gn=t,t=r)}else gn=t,t=r;return t}())!==r?(i=gn,(o=Un())!==r?(e.substr(gn,2)===h?(s=h,gn+=2):(s=r,0===bn&&$n(d)),s===r&&(47===e.charCodeAt(gn)?(s=u,gn++):(s=r,0===bn&&$n(l))),s!==r&&(a=Un())!==r&&(c=Tn())!==r?i=o=[o,s,a,c]:(gn=i,i=r)):(gn=i,i=r),i===r&&(i=null),i!==r?t=n=$t(n,i):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,(n=Cn())!==r&&(n=kt(n)),t=n),t}function Pn(){var t,n,i,o,s,a,u,l;if(t=gn,(n=Nn())!==r){for(i=[],o=gn,(s=Un())!==r?(e.substr(gn,3)===Lt?(a=Lt,gn+=3):(a=r,0===bn&&$n(St)),a!==r&&(u=Un())!==r&&(l=Nn())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(s=Un())!==r?(e.substr(gn,3)===Lt?(a=Lt,gn+=3):(a=r,0===bn&&$n(St)),a!==r&&(u=Un())!==r&&(l=Nn())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?t=n=xt(n,i):(gn=t,t=r)}else gn=t,t=r;return t}function Nn(){var t,n,i,o,s,a,u,l;if(t=gn,(n=On())!==r){for(i=[],o=gn,(s=Un())!==r?(61===e.charCodeAt(gn)?(a=Dt,gn++):(a=r,0===bn&&$n(Mt)),a===r&&(e.substr(gn,2)===At?(a=At,gn+=2):(a=r,0===bn&&$n(Pt))),a!==r&&(u=Un())!==r&&(l=On())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(s=Un())!==r?(61===e.charCodeAt(gn)?(a=Dt,gn++):(a=r,0===bn&&$n(Mt)),a===r&&(e.substr(gn,2)===At?(a=At,gn+=2):(a=r,0===bn&&$n(Pt))),a!==r&&(u=Un())!==r&&(l=On())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?t=n=xt(n,i):(gn=t,t=r)}else gn=t,t=r;return t}function On(){var t,n,i,o,s,a,u,l;if(t=gn,(n=In())!==r){for(i=[],o=gn,(s=Un())!==r?(e.substr(gn,2)===Nt?(a=Nt,gn+=2):(a=r,0===bn&&$n(Ot)),a===r&&(60===e.charCodeAt(gn)?(a=It,gn++):(a=r,0===bn&&$n(Rt)),a===r&&(e.substr(gn,2)===jt?(a=jt,gn+=2):(a=r,0===bn&&$n(Ft)),a===r&&(62===e.charCodeAt(gn)?(a=qt,gn++):(a=r,0===bn&&$n(Bt))))),a!==r&&(u=Un())!==r&&(l=In())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(s=Un())!==r?(e.substr(gn,2)===Nt?(a=Nt,gn+=2):(a=r,0===bn&&$n(Ot)),a===r&&(60===e.charCodeAt(gn)?(a=It,gn++):(a=r,0===bn&&$n(Rt)),a===r&&(e.substr(gn,2)===jt?(a=jt,gn+=2):(a=r,0===bn&&$n(Ft)),a===r&&(62===e.charCodeAt(gn)?(a=qt,gn++):(a=r,0===bn&&$n(Bt))))),a!==r&&(u=Un())!==r&&(l=In())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?t=n=xt(n,i):(gn=t,t=r)}else gn=t,t=r;return t}function In(){var t,n,i,o,s,a,u,l;if(t=gn,(n=Rn())!==r){for(i=[],o=gn,(s=Un())!==r?(43===e.charCodeAt(gn)?(a=Ut,gn++):(a=r,0===bn&&$n(zt)),a===r&&(45===e.charCodeAt(gn)?(a=Vt,gn++):(a=r,0===bn&&$n(Ht))),a!==r&&(u=Un())!==r&&(l=Rn())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(s=Un())!==r?(43===e.charCodeAt(gn)?(a=Ut,gn++):(a=r,0===bn&&$n(zt)),a===r&&(45===e.charCodeAt(gn)?(a=Vt,gn++):(a=r,0===bn&&$n(Ht))),a!==r&&(u=Un())!==r&&(l=Rn())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?t=n=xt(n,i):(gn=t,t=r)}else gn=t,t=r;return t}function Rn(){var t,n,i,o,s,a,u,l;if(t=gn,(n=jn())!==r){for(i=[],o=gn,(s=Un())!==r?((a=Bn())===r&&(e.substr(gn,3)===Wt?(a=Wt,gn+=3):(a=r,0===bn&&$n(Zt)),a===r&&(e.substr(gn,3)===Gt?(a=Gt,gn+=3):(a=r,0===bn&&$n(Yt)))),a!==r&&(u=Un())!==r&&(l=jn())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(s=Un())!==r?((a=Bn())===r&&(e.substr(gn,3)===Wt?(a=Wt,gn+=3):(a=r,0===bn&&$n(Zt)),a===r&&(e.substr(gn,3)===Gt?(a=Gt,gn+=3):(a=r,0===bn&&$n(Yt)))),a!==r&&(u=Un())!==r&&(l=jn())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?t=n=xt(n,i):(gn=t,t=r)}else gn=t,t=r;return t}function jn(){var t,n,i;return t=gn,(n=function(){var t,n,i,o,s,a,u,l;if(t=gn,(n=An())!==r){for(i=[],o=gn,(s=Un())!==r?(124===e.charCodeAt(gn)?(a=bt,gn++):(a=r,0===bn&&$n(wt)),a!==r&&(u=Un())!==r&&(l=An())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(s=Un())!==r?(124===e.charCodeAt(gn)?(a=bt,gn++):(a=r,0===bn&&$n(wt)),a!==r&&(u=Un())!==r&&(l=An())!==r?o=s=[s,a,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?t=n=xt(n,i):(gn=t,t=r)}else gn=t,t=r;return t}())!==r&&(n=rt(n)),(t=n)===r&&(t=gn,45===e.charCodeAt(gn)?(n=Vt,gn++):(n=r,0===bn&&$n(Ht)),n!==r&&Un()!==r&&(i=jn())!==r?t=n=Xt(i):(gn=t,t=r)),t}function Fn(){var t,n,i,o;if(t=gn,34===e.charCodeAt(gn)?(n=Kt,gn++):(n=r,0===bn&&$n(Jt)),n!==r){for(i=[],Qt.test(e.charAt(gn))?(o=e.charAt(gn),gn++):(o=r,0===bn&&$n(te));o!==r;)i.push(o),Qt.test(e.charAt(gn))?(o=e.charAt(gn),gn++):(o=r,0===bn&&$n(te));i!==r?(34===e.charCodeAt(gn)?(o=Kt,gn++):(o=r,0===bn&&$n(Jt)),o!==r?t=n=ee(i):(gn=t,t=r)):(gn=t,t=r)}else gn=t,t=r;if(t===r)if(t=gn,39===e.charCodeAt(gn)?(n=ne,gn++):(n=r,0===bn&&$n(ie)),n!==r){for(i=[],re.test(e.charAt(gn))?(o=e.charAt(gn),gn++):(o=r,0===bn&&$n(oe));o!==r;)i.push(o),re.test(e.charAt(gn))?(o=e.charAt(gn),gn++):(o=r,0===bn&&$n(oe));i!==r?(39===e.charCodeAt(gn)?(o=ne,gn++):(o=r,0===bn&&$n(ie)),o!==r?t=n=ee(i):(gn=t,t=r)):(gn=t,t=r)}else gn=t,t=r;return t}function qn(){var t,n;if(gn,t=[],ue.test(e.charAt(gn))?(n=e.charAt(gn),gn++):(n=r,0===bn&&$n(le)),n!==r)for(;n!==r;)t.push(n),ue.test(e.charAt(gn))?(n=e.charAt(gn),gn++):(n=r,0===bn&&$n(le));else t=r;return t!==r&&(t=ce(t)),t}function Bn(){var t;return 42===e.charCodeAt(gn)?(t=he,gn++):(t=r,0===bn&&$n(de)),t}function Un(){var t;return(t=function(){var t,n;if(t=[],Se.test(e.charAt(gn))?(n=e.charAt(gn),gn++):(n=r,0===bn&&$n(De)),n!==r)for(;n!==r;)t.push(n),Se.test(e.charAt(gn))?(n=e.charAt(gn),gn++):(n=r,0===bn&&$n(De));else t=r;return t}())===r&&(t=null),t}function zn(){var t;return gn,(t=function(){var t,n,i,o;return t=gn,(n=Vn())!==r?(58===e.charCodeAt(gn)?(i=_e,gn++):(i=r,0===bn&&$n(be)),i!==r&&(o=Vn())!==r?(n=Ae(n,o),t=n):(gn=t,t=r)):(gn=t,t=r),t}())===r&&(t=function(){var t;return gn,(t=Vn())!==r&&(t=Pe(t)),t}()),t!==r&&(t=Me(t)),t}function Vn(){return function(){var t,e,n,i;if(t=gn,(e=Hn())!==r){for(n=[],i=Wn();i!==r;)n.push(i),i=Wn();n!==r?(e=mn(e,n),t=e):(gn=t,t=r)}else gn=t,t=r;return t}()}function Hn(){var t;return Ne.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Oe)),t===r&&(95===e.charCodeAt(gn)?(t=Ie,gn++):(t=r,0===bn&&$n(Re)),t===r&&(je.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Fe)),t===r&&(qe.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Be)),t===r&&(Ue.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(ze)),t===r&&(Ve.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(He)),t===r&&(We.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Ze)),t===r&&(Ge.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Ye)),t===r&&(Xe.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Ke)),t===r&&(Je.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Qe)),t===r&&(tn.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(en)),t===r&&(nn.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(rn)),t===r&&(on.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(sn)),t===r&&(an.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(un))))))))))))))),t}function Wn(){var t;return(t=Hn())===r&&(45===e.charCodeAt(gn)?(t=Vt,gn++):(t=r,0===bn&&$n(Ht)),t===r&&(46===e.charCodeAt(gn)?(t=ut,gn++):(t=r,0===bn&&$n(lt)),t===r&&(ue.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(le)),t===r&&(ln.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(cn)),t===r&&(hn.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(dn)),t===r&&(pn.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(fn)))))))),t}var Zn,Gn=function(t,e,n,i){var r,o,s={type:"",args:[]};for(s.args.push(t),r=0;r<e.length;r++){switch(typeof n){case"string":s.type=n;break;case"object":for(s.type=e[r][n[0]],o=1;o<n.length;o++)s.type=s.type[n[o]];break;default:s.type=e[r][n]}s.args.push(void 0===i?e[r]:e[r][i]),s={type:"",args:[s]}}return s.args[0]},Yn=function(t,e,n,i){var r,o=[];if(n.length<1)return t;for(r=0;r<n.length;r++)o.push(n[r][i]);return{type:"predicate",args:[e,t,o]}},Xn=[],Kn=function(t){var e,n=!1;if(null!==t){for(e=0;e<Xn.length;e++)if(Xn[e]===t){n=!0;break}n||Xn.push(t)}},Jn=["comment","text","processing-instruction","node"],Qn=function(t,e,n){return"/"==t?{type:"/",args:[e,n]}:{type:"/",args:[{type:"/",args:[e,{type:"step",args:["descendant-or-self",{type:"nodeType",args:["node",[]]}]}]},n]}};if((n=s())!==r&&gn===e.length)return n;throw n!==r&&gn<e.length&&$n({type:"end",description:"end of input"}),kn(null,_n,yn<e.length?e.charAt(yn):null,yn<e.length?xn(yn,yn+1):xn(yn,yn))}}}()},function(t,e){var n=2147483647;function i(t){this._seed=t%n,this._seed<=0&&(this._seed+=n-1)}Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},i.prototype.next=function(){return this._seed=16807*this._seed%n},i.prototype.nextFloat=function(){return(this.next()-1)/(n-1)},t.exports=function(t,e){var n,r=[];if(void 0!==e){if(!Number.isInteger(e))throw new Error("Invalid seed argument. Integer required.");var o=new i(e);n=o.nextFloat.bind(o)}else n=Math.random;for(var s=0;s<t.length;++s){var a=Math.floor(n()*(s+1));a!==s&&(r[s]=r[a]),r[a]=t[s]}return r}},function(t,e){var n=6378100,i=100,r=Math.PI/180;function o(t){return t.map(function(t){return t.trim().split(" ")})}function s(t){return t.every(function(t){return""!==t[0]&&t[0]>=-90&&t[0]<=90&&""!==t[1]&&t[1]>=-180&&t[1]<=180&&(void 0===t[2]||!isNaN(t[2]))&&(void 0===t[3]||!isNaN(t[3])&&t[3]>=0)})}t.exports={area:function(t){var e=o(t);if(!s(e))return Number.NaN;var a=e.length,u=0;if(a>2){for(var l=0;l<a;l++){var c={lat:e[l][0],lng:e[l][1]},h={lat:e[(l+1)%a][0],lng:e[(l+1)%a][1]};u+=(h.lng-c.lng)*r*(2+Math.sin(c.lat*r)+Math.sin(h.lat*r))}u=u*n*n/2}return Math.abs(Math.round(u*i))/i},distance:function(t){var e=o(t);if(!s(e))return Number.NaN;var a=e.length,u=0;if(a>1)for(var l=1;l<a;l++){var c={lat:e[l-1][0],lng:e[l-1][1]},h={lat:e[l][0],lng:e[l][1]},d=c.lat*r,p=h.lat*r,f=(h.lat-c.lat)*r,m=(h.lng-c.lng)*r,g=Math.sin(f/2)*Math.sin(f/2)+Math.cos(d)*Math.cos(p)*Math.sin(m/2)*Math.sin(m/2),v=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g));u+=n*v}return Math.abs(Math.round(u*i))/i}}},function(t,e,n){"use strict";t.exports={getWrapNodes:function(t){return"fieldset"===this.getInputType(t.eq(0))?t:t.closest(".question, .calculation")},getProps:function(t){return 1!==t.length?console.error("getProps(): no input node provided or multiple"):{path:this.getName(t),ind:this.getIndex(t),inputType:this.getInputType(t),xmlType:this.getXmlType(t),constraint:this.getConstraint(t),calculation:this.getCalculation(t),relevant:this.getRelevant(t),readonly:this.getReadonly(t),val:this.getVal(t),required:this.getRequired(t),enabled:this.isEnabled(t),multiple:this.isMultiple(t)}},getInputType:function(t){var e;return 1!==t.length?"":"input"===(e=t.prop("nodeName").toLowerCase())?t.data("drawing")?"drawing":t.attr("type").length>0?t.attr("type").toLowerCase():console.error("<input> node has no type"):"select"===e?"select":"textarea"===e?"textarea":"fieldset"===e||"section"===e?"fieldset":console.error("unexpected input node type provided")},getConstraint:function(t){return t.attr("data-constraint")},getRequired:function(t){if(0===t.parentsUntil(".or",".or-appearance-label").length)return t.attr("data-required")},getRelevant:function(t){return t.attr("data-relevant")},getReadonly:function(t){return t.is("[readonly]")},getCalculation:function(t){return t.attr("data-calculate")},getXmlType:function(t){return 1!==t.length?console.error("getXMLType(): no input node provided or multiple"):t.attr("data-type-xml")},getName:function(t){return 1!==t.length?console.error("getName(): no input node provided or multiple"):t.attr("data-name")||t.attr("name")||console.error("input node has no name")},getIndex:function(t){var e,n,i;return 1!==t.length?console.error("getIndex(): no input node provided or multiple"):(e=this.getInputType(t),n=this.getName(t),i=this.getWrapNodes(t),("radio"===e&&n!==t.attr("name")?this.getWrapNodes(this.form.view.$.find('[data-name="'+n+'"]')):"fieldset"===e&&t.hasClass("or-repeat")?this.getWrapNodes(this.form.view.$.find('.or-repeat[name="'+n+'"]')):"fieldset"===e&&t.hasClass("or-group")?this.getWrapNodes(this.form.view.$.find('.or-group[name="'+n+'"]')):this.getWrapNodes(this.form.view.$.find('[name="'+n+'"]'))).index(i))},isMultiple:function(t){return"checkbox"===this.getInputType(t)||void 0!==t.attr("multiple")},isEnabled:function(t){return!(t.prop("disabled")||t.parentsUntil(".or",".disabled").length>0)},getVal:function(t){var e,n,i=[];return 1!==t.length?console.error("getVal(): no inputNode provided or multiple"):(e=this.getInputType(t),n=this.getName(t),"radio"===e?this.getWrapNodes(t).find("input:checked").val()||"":"checkbox"===e?(this.getWrapNodes(t).find('input[name="'+n+'"]:checked').each(function(){i.push(this.value)}),i):t.val()||"")},setVal:function(t,e,n){var i,r,o,s,a;if(e=e||0,"radio"===this.getInputType(this.form.view.$.find('[data-name="'+t+'"]').eq(0)))r="radio",i=this.getWrapNodes(this.form.view.$.find('[data-name="'+t+'"]')).eq(e).find('[data-name="'+t+'"]');else{if(i=this.getWrapNodes(this.form.view.$.find('[name="'+t+'"]')).eq(e).find('[name="'+t+'"]'),"file"===(r=this.getInputType(i.eq(0))))return i.eq(0).attr("data-loaded-file-name",n),!1;"date"!==r&&"datetime"!==r||(n=this.form.model.node(t,e).convert(n,r)),"time"===r&&/(\+|-)/.test(n)&&(a=(new Date).toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}).replace(/\u200E/g,"")+" "+n.replace(/(\d\d:\d\d:\d\d)(\.\d{1,3})(\s?((\+|-)\d\d))(:)?(\d\d)?/,"$1 GMT$3$7"),"Invalid Date"!==(s=new Date(a)).toString()?n=s.getHours().toString().pad(2)+":"+s.getMinutes().toString().pad(2):console.error("could not parse time:",n))}!0===this.isMultiple(i.eq(0))?n=n.split(" "):"radio"===r&&(n=[n]),i.length&&(void 0!==(o=this.getVal(i.eq(0)))&&o.toString()===n.toString()||(i.val(n),i.eq(0).trigger("inputupdate.enketo")))},validate:function(t){return this.form.validateInput(t)}}},function(t,e,n){"use strict";var i=n(0),r=!0===n(12).repeatOrdinals;t.exports={init:function(){var t,e=this;if(!this.form)throw new Error("Repeat module not correctly instantiated with form property.");t=this.form.view.$.find(".or-repeat-info"),this.templates={},t.siblings(".or-repeat").filter(function(){return this.firstChild&&3===this.firstChild.nodeType&&(this.firstChild.textContent=""),!!this.querySelector(".question")}).prepend('<span class="repeat-number"></span>'),t.filter("*:not([data-repeat-fixed]):not([data-repeat-count])").append('<button type="button" class="btn btn-default add-repeat-btn"><i class="icon icon-plus"> </i></button>').siblings(".or-repeat").append('<div class="repeat-buttons"><button type="button" '+(r?" disabled ":" ")+'class="btn btn-default remove"><i class="icon icon-minus"> </i></button></div>'),this.form.model.extractFakeTemplates(t.map(function(){return this.dataset.name}).get()),t.siblings(".or-repeat").reverse().each(function(){var t=i(this).remove(),n=t.attr("name");e.templates[n]=t[0]}),t.filter("*:not([data-repeat-count])").reverse().each(function(){i(this).closest(".or-repeat").length||e.updateDefaultFirstRepeatInstance(null,this)}).each(e.updateViewInstancesFromModel.bind(this)),this.form.view.$.on("click","button.add-repeat-btn:enabled",function(){return e.add(i(this).closest(".or-repeat-info")[0]),!1}),this.form.view.$.on("click","button.remove:enabled",function(){return e.remove(i(this).closest(".or-repeat")),!1}),this.countUpdate()},updateViewInstancesFromModel:function(t,e){var n=this,r=i(e),o=e.dataset.name,s=this.form.view.$.find('.or-repeat-info[data-name="'+o+'"]').index(e),a=this.form.model.getRepeatSeries(o,s),u=r.siblings(".or-repeat");return a.length>u.length&&(this.add(e,a.length-u.length),r.siblings(".or-repeat").find(".or-repeat-info:not([data-repeat-count])").each(function(){n.updateViewInstancesFromModel(null,this)})),a.length},updateDefaultFirstRepeatInstance:function(t,e){var n,r=i(e),o=e.dataset.name;this.form.model.data.instanceStr||this.templates[o].classList.contains("or-appearance-minimal")||(n=this.form.view.$.find('.or-repeat-info[data-name="'+o+'"]').index(e),0===this.form.model.getRepeatSeries(o,n).length&&this.add(e),r.siblings(".or-repeat").find(".or-repeat-info:not([data-repeat-count])").each(this.updateDefaultFirstRepeatInstance.bind(this)))},updateRepeatInstancesFromCount:function(t,e){var n,o,s,a,u,l,c,h=i(e),d=e.dataset.repeatCount||"";if(d){if(l=e.dataset.name,c=this.form.view.$.find('.or-repeat-info[data-name="'+l+'"]').index(e),(o=this.form.model.evaluate(d,"nodes",null,null,!0)).length&&o[c]?s=Number(o[c].textContent):console.error("Unexpectedly, could not obtain repeat count node"),(u=(s=isNaN(s)?0:s)-(a=h.siblings('.or-repeat[name="'+l+'"]').length))>0)this.add(e,u);else if(u<0)for(u=Math.abs(u)>=a?(r?1:0)-a:u;u<0;u++)n=h.siblings(".or-repeat").last(),this.remove(n,0);h.siblings(".or-repeat").children(".or-group, .or-group-data").children(".or-repeat-info[data-repeat-count]").each(this.updateRepeatInstancesFromCount.bind(this))}},countUpdate:function(t){t=t||{},this.form.getRelatedNodes("data-repeat-count",".or-repeat-info",t).each(this.updateRepeatInstancesFromCount.bind(this))},add:function(t,e){var n,r,o,s,a,u,l,c=i(t),h=!!e;if(e=e||1,!t)return console.error("Nothing to clone"),!1;for(a=t.dataset.name,n=c.siblings(".or-repeat"),r=i(this.templates[a]).clone(),s=this.form.view.$.find('.or-repeat-info[data-name="'+a+'"]').index(t),l=this.form.model.getRepeatSeries(a,s).length,u=0;u<e;u++)r.find(".option-wrapper").each(this.fixRadioNames),r.insertBefore(t),r.prev(".or-repeat").length&&r.addClass("clone"),(n=n.add(r)).length>l&&(this.form.model.addRepeat(a,s),l++),o=o||this.form.view.$.find('.or-repeat[name="'+a+'"]').index(r),r.trigger("addrepeat",[o,h]),this.form.widgetsInitialized?this.form.widgets.init(r):this.form.calc.update({repeatPath:a,repeatIndex:o}),r.find(".or-repeat-info:not([data-repeat-count])").each(this.updateDefaultFirstRepeatInstance.bind(this)),r=i(this.templates[a]).clone(),o++;return this.numberRepeats(t),this.toggleButtons(t),!0},remove:function(t,e){var n=this,i=t.next(".or-repeat, .or-repeat-info"),r=t.attr("name"),o=this.form.view.$.find('.or-repeat[name="'+r+'"]').index(t),s=t.siblings(".or-repeat-info")[0];e=void 0!==e?e:600,t.hide(e,function(){t.remove(),n.numberRepeats(s),n.toggleButtons(s),i.trigger("removerepeat"),n.form.model.node(r,o).remove()})},fixRadioNames:function(t,e){i(e).find('input[type="radio"]').attr("name",Math.floor(1e7*Math.random()+1))},toggleButtons:function(t){i(t).siblings(".or-repeat").children(".repeat-buttons").find("button.remove").prop("disabled",!1).first().prop("disabled",r)},numberRepeats:function(t){i(t).siblings(".or-repeat").each(function(t,e){i(e).children(".repeat-number").text(t+1)})}}},function(t,e,n){"use strict";var i=n(0),r=n(8),o=n(12);n(97),t.exports={active:!1,$current:[],$activePages:i(),init:function(){if(!this.form)throw new Error("Repeats module not correclty instantiated with form property.");if(this.form.view.$.hasClass("pages")){var t=this.form.view.$.find(' .question:not([role="comment"]), .or-appearance-field-list').add(".or-repeat.or-appearance-field-list + .or-repeat-info").filter(function(){return 0===i(this).parent().closest(".or-appearance-field-list").length}).attr("role","page");(t.length>0||t.eq(0).hasClass("or-repeat"))&&(this.$formFooter=i(".form-footer"),this.$btnFirst=this.$formFooter.find(".first-page"),this.$btnPrev=this.$formFooter.find(".previous-page"),this.$btnNext=this.$formFooter.find(".next-page"),this.$btnLast=this.$formFooter.find(".last-page"),this.updateAllActive(t),this.toggleButtons(0),this.setButtonHandlers(),this.setRepeatHandlers(),this.setBranchHandlers(),this.setSwipeHandlers(),this.active=!0,this.flipToFirst())}},setButtonHandlers:function(){var t=this;this.$btnFirst.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t.flipToFirst(),!1}),this.$btnPrev.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t.prev(),!1}),this.$btnNext.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t.next(),!1}),this.$btnLast.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t.flipToLast(),!1})},setSwipeHandlers:function(){if(!1!==o.swipePage){var t=this,e=i(".main");e.swipe("destroy"),e.swipe({allowPageScroll:"vertical",threshold:250,preventDefaultEvents:!1,swipeLeft:function(){t.$btnNext.click()},swipeRight:function(){t.$btnPrev.click()},swipeStatus:function(e,n){"start"===n&&t.getCurrent().find(":focus").blur()}})}},setRepeatHandlers:function(){var t=this;this.form.view.$.off("addrepeat.pagemode").on("addrepeat.pagemode",function(e,n,r){t.updateAllActive(),i(e.target).removeClass("current contains-current").find(".current").removeClass("current"),r||t.flipToPageContaining(i(e.target))}).off("removerepeat.pagemode").on("removerepeat.pagemode",function(e){if(0===t.$current.closest("html").length){t.updateAllActive();var n=i(e.target).prev();0===n.length&&(n=i(e.target)),t.flipToPageContaining(n)}})},setBranchHandlers:function(){var t=this;this.form.view.$.off("changebranch.pagemode").on("changebranch.pagemode",function(){t.updateAllActive(),t.toggleButtons()})},getCurrent:function(){return this.$current},updateAllActive:function(t){t=t||i('.or [role="page"]'),this.$activePages=t.filter(function(){var t=i(this);return 0===t.closest(".disabled").length&&(t.is(".question")||t.find(".question:not(.disabled)").length>0||t.is(".or-repeat-info")&&0===t.siblings(".or-repeat").length)})},getAllActive:function(){return this.$activePages},getPrev:function(t){return this.$activePages[t-1]},getNext:function(t){return this.$activePages[t+1]},getCurrentIndex:function(){return this.$activePages.index(this.$current)},next:function(){var t,e=this;return t=this.getCurrentIndex(),(!1===o.validatePage?r.resolve(!0):this.form.validateContent(this.$current)).then(function(n){var i,r;return!!n&&(!(i=e.getNext(t))||(r=t+1,e.flipTo(i,r),r))})},prev:function(){var t,e;e=this.getCurrentIndex(),(t=this.getPrev(e))&&this.flipTo(t,e-1)},setToCurrent:function(t){var e=i(t);e.addClass("current hidden"),this.$current=e.removeClass("hidden").parentsUntil(".or",".or-group, .or-group-data, .or-repeat").addClass("contains-current").end()},flipTo:function(t,e){this.$current.length>0&&1===this.$current.closest("html").length?this.$current[0]!==t&&(this.$current.removeClass("current fade-out").parentsUntil(".or",".or-group, .or-group-data, .or-repeat").removeClass("contains-current"),this.setToCurrent(t),this.focusOnFirstQuestion(t),this.toggleButtons(e),i(t).trigger("pageflip.enketo")):(this.setToCurrent(t),this.focusOnFirstQuestion(t),this.toggleButtons(e),i(t).trigger("pageflip.enketo"))},flipToFirst:function(){this.flipTo(this.$activePages[0])},flipToLast:function(){this.flipTo(this.$activePages.last()[0])},flipToPageContaining:function(t){var e;(e=0===(e=t.closest('[role="page"]')).length?t.find('[role="page"]'):e).length&&this.flipTo(e[0])},focusOnFirstQuestion:function(t){i(t).find(".question:not(.disabled)").addBack(".question:not(.disabled)").filter(function(){return 0===i(this).parentsUntil(".or",".disabled").length}).eq(0).find("input, select, textarea").eq(0).trigger("fakefocus"),t.scrollIntoView()},toggleButtons:function(t){var e=t||this.getCurrentIndex(),n=this.getNext(e),i=this.getPrev(e);this.$btnNext.add(this.$btnLast).toggleClass("disabled",!n),this.$btnPrev.add(this.$btnFirst).toggleClass("disabled",!i),this.$formFooter.toggleClass("end",!n)}}},function(t,e,n){var i,r,o;
/*!
 * @fileOverview TouchSwipe - jQuery Plugin
 * @version 1.6.18
 *
 * @author Matt Bryson http://www.github.com/mattbryson
 * @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
 * @see http://labs.rampinteractive.co.uk/touchSwipe/
 * @see http://plugins.jquery.com/project/touchSwipe
 * @license
 * Copyright (c) 2010-2015 Matt Bryson
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */!function(s){n(40)&&n(40).jQuery?(r=[n(0)],void 0===(o="function"==typeof(i=s)?i.apply(e,r):i)||(t.exports=o)):s(void 0!==t&&t.exports?n(0):jQuery)}(function(t){"use strict";function e(e){return!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll=u),void 0!==e.click&&void 0===e.tap&&(e.tap=e.click),e||(e={}),e=t.extend({},t.fn.swipe.defaults,e),this.each(function(){var T=t(this),L=T.data(C);L||(L=new function(e,T){function L(e){if(!(!0===xt.data(C+"_intouch")||t(e.target).closest(T.excludedElements,xt).length>0)){var s=e.originalEvent?e.originalEvent:e;if(!s.pointerType||"mouse"!=s.pointerType||0!=T.fallbackToMouseEvents){var a,u=s.touches,l=u?u[0]:s;return $t=_,u?kt=u.length:!1!==T.preventDefaultEvents&&e.preventDefault(),dt=0,pt=null,ft=null,bt=null,mt=0,gt=0,vt=0,yt=1,_t=0,wt=function(){var t={};return t[n]=et(n),t[i]=et(i),t[r]=et(r),t[o]=et(o),t}(),Y(),J(0,l),!u||kt===T.fingers||T.fingers===v||B()?(Ct=ot(),2==kt&&(J(1,u[1]),gt=vt=it(Et[0].start,Et[1].start)),(T.swipeStatus||T.pinchStatus)&&(a=O(s,$t))):a=!1,!1===a?(O(s,$t=x),a):(T.hold&&(At=setTimeout(t.proxy(function(){xt.trigger("hold",[s.target]),T.hold&&(a=T.hold.call(xt,s,s.target))},this),T.longTapThreshold)),K(!0),null)}}}function S(e){var c=e.originalEvent?e.originalEvent:e;if($t!==w&&$t!==x&&!X()){var h,d=c.touches,p=d?d[0]:c,f=Q(p);if(Tt=ot(),d&&(kt=d.length),T.hold&&clearTimeout(At),$t=b,2==kt&&(0==gt?(J(1,d[1]),gt=vt=it(Et[0].start,Et[1].start)):(Q(d[1]),vt=it(Et[0].end,Et[1].end),Et[0].end,Et[1].end,bt=yt<1?a:s),yt=function(t,e){return(e/t*1).toFixed(2)}(gt,vt),_t=Math.abs(gt-vt)),kt===T.fingers||T.fingers===v||!d||B()){if(pt=rt(f.start,f.end),ft=rt(f.last,f.end),function(t,e){if(!1!==T.preventDefaultEvents)if(T.allowPageScroll===u)t.preventDefault();else{var s=T.allowPageScroll===l;switch(e){case n:(T.swipeLeft&&s||!s&&T.allowPageScroll!=m)&&t.preventDefault();break;case i:(T.swipeRight&&s||!s&&T.allowPageScroll!=m)&&t.preventDefault();break;case r:(T.swipeUp&&s||!s&&T.allowPageScroll!=g)&&t.preventDefault();break;case o:(T.swipeDown&&s||!s&&T.allowPageScroll!=g)&&t.preventDefault()}}}(e,ft),dt=function(t,e){return Math.round(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))}(f.start,f.end),mt=nt(),function(t,e){t!=u&&(e=Math.max(e,tt(t)),wt[t].distance=e)}(pt,dt),h=O(c,$t),!T.triggerOnTouchEnd||T.triggerOnTouchLeave){var y=!0;if(T.triggerOnTouchLeave){var _=function(e){var n=(e=t(e)).offset();return{left:n.left,right:n.left+e.outerWidth(),top:n.top,bottom:n.top+e.outerHeight()}}(this);y=function(t,e){return t.x>e.left&&t.x<e.right&&t.y>e.top&&t.y<e.bottom}(f.end,_)}!T.triggerOnTouchEnd&&y?$t=N(b):T.triggerOnTouchLeave&&!y&&($t=N(w)),$t!=x&&$t!=w||O(c,$t)}}else O(c,$t=x);!1===h&&O(c,$t=x)}}function D(t){var e=t.originalEvent?t.originalEvent:t,n=e.touches;if(n){if(n.length&&!X())return function(t){Lt=ot(),St=t.touches.length+1}(e),!0;if(n.length&&X())return!0}return X()&&(kt=St),Tt=ot(),mt=nt(),j()||!R()?O(e,$t=x):T.triggerOnTouchEnd||!1===T.triggerOnTouchEnd&&$t===b?(!1!==T.preventDefaultEvents&&!1!==t.cancelable&&t.preventDefault(),O(e,$t=w)):!T.triggerOnTouchEnd&&W()?I(e,$t=w,d):$t===b&&O(e,$t=x),K(!1),null}function M(){kt=0,Tt=0,Ct=0,gt=0,vt=0,yt=1,Y(),K(!1)}function A(t){var e=t.originalEvent?t.originalEvent:t;T.triggerOnTouchLeave&&($t=N(w),O(e,$t))}function P(){xt.unbind(at,L),xt.unbind(ht,M),xt.unbind(ut,S),xt.unbind(lt,D),ct&&xt.unbind(ct,A),K(!1)}function N(t){var e=t,n=F(),i=R(),r=j();return!n||r?e=x:!i||t!=b||T.triggerOnTouchEnd&&!T.triggerOnTouchLeave?!i&&t==w&&T.triggerOnTouchLeave&&(e=x):e=w,e}function O(t,e){var n,i=t.touches;return(!(!U()||!z())||z())&&(n=I(t,e,c)),(!(!q()||!B())||B())&&!1!==n&&(n=I(t,e,h)),G()&&Z()&&!1!==n?n=I(t,e,p):mt>T.longTapThreshold&&dt<y&&T.longTap&&!1!==n?n=I(t,e,f):!(1!==kt&&$||!(isNaN(dt)||dt<T.threshold)||!W())&&!1!==n&&(n=I(t,e,d)),e===x&&M(),e===w&&(i&&i.length||M()),n}function I(e,u,l){var m;if(l==c){if(xt.trigger("swipeStatus",[u,pt||null,dt||0,mt||0,kt,Et,ft]),T.swipeStatus&&!1===(m=T.swipeStatus.call(xt,e,u,pt||null,dt||0,mt||0,kt,Et,ft)))return!1;if(u==w&&U()){if(clearTimeout(Mt),clearTimeout(At),xt.trigger("swipe",[pt,dt,mt,kt,Et,ft]),T.swipe&&!1===(m=T.swipe.call(xt,e,pt,dt,mt,kt,Et,ft)))return!1;switch(pt){case n:xt.trigger("swipeLeft",[pt,dt,mt,kt,Et,ft]),T.swipeLeft&&(m=T.swipeLeft.call(xt,e,pt,dt,mt,kt,Et,ft));break;case i:xt.trigger("swipeRight",[pt,dt,mt,kt,Et,ft]),T.swipeRight&&(m=T.swipeRight.call(xt,e,pt,dt,mt,kt,Et,ft));break;case r:xt.trigger("swipeUp",[pt,dt,mt,kt,Et,ft]),T.swipeUp&&(m=T.swipeUp.call(xt,e,pt,dt,mt,kt,Et,ft));break;case o:xt.trigger("swipeDown",[pt,dt,mt,kt,Et,ft]),T.swipeDown&&(m=T.swipeDown.call(xt,e,pt,dt,mt,kt,Et,ft))}}}if(l==h){if(xt.trigger("pinchStatus",[u,bt||null,_t||0,mt||0,kt,yt,Et]),T.pinchStatus&&!1===(m=T.pinchStatus.call(xt,e,u,bt||null,_t||0,mt||0,kt,yt,Et)))return!1;if(u==w&&q())switch(bt){case s:xt.trigger("pinchIn",[bt||null,_t||0,mt||0,kt,yt,Et]),T.pinchIn&&(m=T.pinchIn.call(xt,e,bt||null,_t||0,mt||0,kt,yt,Et));break;case a:xt.trigger("pinchOut",[bt||null,_t||0,mt||0,kt,yt,Et]),T.pinchOut&&(m=T.pinchOut.call(xt,e,bt||null,_t||0,mt||0,kt,yt,Et))}}return l==d?u!==x&&u!==w||(clearTimeout(Mt),clearTimeout(At),Z()&&!G()?(Dt=ot(),Mt=setTimeout(t.proxy(function(){Dt=null,xt.trigger("tap",[e.target]),T.tap&&(m=T.tap.call(xt,e,e.target))},this),T.doubleTapThreshold)):(Dt=null,xt.trigger("tap",[e.target]),T.tap&&(m=T.tap.call(xt,e,e.target)))):l==p?u!==x&&u!==w||(clearTimeout(Mt),clearTimeout(At),Dt=null,xt.trigger("doubletap",[e.target]),T.doubleTap&&(m=T.doubleTap.call(xt,e,e.target))):l==f&&(u!==x&&u!==w||(clearTimeout(Mt),Dt=null,xt.trigger("longtap",[e.target]),T.longTap&&(m=T.longTap.call(xt,e,e.target)))),m}function R(){var t=!0;return null!==T.threshold&&(t=dt>=T.threshold),t}function j(){var t=!1;return null!==T.cancelThreshold&&null!==pt&&(t=tt(pt)-dt>=T.cancelThreshold),t}function F(){return!(T.maxTimeThreshold&&mt>=T.maxTimeThreshold)}function q(){var t=V(),e=H(),n=null===T.pinchThreshold||_t>=T.pinchThreshold;return t&&e&&n}function B(){return!!(T.pinchStatus||T.pinchIn||T.pinchOut)}function U(){var t=F(),e=R(),n=V(),i=H(),r=j(),o=!r&&i&&n&&e&&t;return o}function z(){return!!(T.swipe||T.swipeStatus||T.swipeLeft||T.swipeRight||T.swipeUp||T.swipeDown)}function V(){return kt===T.fingers||T.fingers===v||!$}function H(){return 0!==Et[0].end.x}function W(){return!!T.tap}function Z(){return!!T.doubleTap}function G(){if(null==Dt)return!1;var t=ot();return Z()&&t-Dt<=T.doubleTapThreshold}function Y(){Lt=0,St=0}function X(){var t=!1;if(Lt){var e=ot()-Lt;e<=T.fingerReleaseThreshold&&(t=!0)}return t}function K(t){xt&&(!0===t?(xt.bind(ut,S),xt.bind(lt,D),ct&&xt.bind(ct,A)):(xt.unbind(ut,S,!1),xt.unbind(lt,D,!1),ct&&xt.unbind(ct,A,!1)),xt.data(C+"_intouch",!0===t))}function J(t,e){var n={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return n.start.x=n.last.x=n.end.x=e.pageX||e.clientX,n.start.y=n.last.y=n.end.y=e.pageY||e.clientY,Et[t]=n,n}function Q(t){var e=void 0!==t.identifier?t.identifier:0,n=function(t){return Et[t]||null}(e);return null===n&&(n=J(e,t)),n.last.x=n.end.x,n.last.y=n.end.y,n.end.x=t.pageX||t.clientX,n.end.y=t.pageY||t.clientY,n}function tt(t){if(wt[t])return wt[t].distance}function et(t){return{direction:t,distance:0}}function nt(){return Tt-Ct}function it(t,e){var n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return Math.round(Math.sqrt(n*n+i*i))}function rt(t,e){if(function(t,e){return t.x==e.x&&t.y==e.y}(t,e))return u;var s=function(t,e){var n=t.x-e.x,i=e.y-t.y,r=Math.atan2(i,n),o=Math.round(180*r/Math.PI);return o<0&&(o=360-Math.abs(o)),o}(t,e);return s<=45&&s>=0?n:s<=360&&s>=315?n:s>=135&&s<=225?i:s>45&&s<135?o:r}function ot(){var t=new Date;return t.getTime()}var T=t.extend({},T),st=$||E||!T.fallbackToMouseEvents,at=st?E?k?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ut=st?E?k?"MSPointerMove":"pointermove":"touchmove":"mousemove",lt=st?E?k?"MSPointerUp":"pointerup":"touchend":"mouseup",ct=st?E?"mouseleave":null:"mouseleave",ht=E?k?"MSPointerCancel":"pointercancel":"touchcancel",dt=0,pt=null,ft=null,mt=0,gt=0,vt=0,yt=1,_t=0,bt=0,wt=null,xt=t(e),$t="start",kt=0,Et={},Ct=0,Tt=0,Lt=0,St=0,Dt=0,Mt=null,At=null;try{xt.bind(at,L),xt.bind(ht,M)}catch(e){t.error("events not supported "+at+","+ht+" on jQuery.swipe")}this.enable=function(){return this.disable(),xt.bind(at,L),xt.bind(ht,M),xt},this.disable=function(){return P(),xt},this.destroy=function(){P(),xt.data(C,null),xt=null},this.option=function(e,n){if("object"==typeof e)T=t.extend(T,e);else if(void 0!==T[e]){if(void 0===n)return T[e];T[e]=n}else{if(!e)return T;t.error("Option "+e+" does not exist on jQuery.swipe.options")}return null}}(this,e),T.data(C,L))})}var n="left",i="right",r="up",o="down",s="in",a="out",u="none",l="auto",c="swipe",h="pinch",d="tap",p="doubletap",f="longtap",m="horizontal",g="vertical",v="all",y=10,_="start",b="move",w="end",x="cancel",$="ontouchstart"in window,k=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!$,E=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!$,C="TouchSwipe";t.fn.swipe=function(n){var i=t(this),r=i.data(C);if(r&&"string"==typeof n){if(r[n])return r[n].apply(r,Array.prototype.slice.call(arguments,1));t.error("Method "+n+" does not exist on jQuery.swipe")}else if(r&&"object"==typeof n)r.option.apply(r,arguments);else if(!(r||"object"!=typeof n&&n))return e.apply(this,arguments);return i},t.fn.swipe.version="1.6.18",t.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0},t.fn.swipe.phases={PHASE_START:_,PHASE_MOVE:b,PHASE_END:w,PHASE_CANCEL:x},t.fn.swipe.directions={LEFT:n,RIGHT:i,UP:r,DOWN:o,IN:s,OUT:a},t.fn.swipe.pageScroll={NONE:u,HORIZONTAL:m,VERTICAL:g,AUTO:l},t.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:v}})},function(t,e,n){"use strict";var i=n(0);t.exports={update:function(t,e){var n;if(!this.form)throw new Error("Branch module not correctly instantiated with form property.");n=this.form.getRelatedNodes("data-relevant","",t),this.updateNodes(n,e)},updateNodes:function(t,e){var n,r,o,s,a,u,l,c={},h=[],d=!1,p=this;l=!!(this.form.repeatsPresent&&this.form.view.$.find(".or-repeat.clone").length>0),t.each(function(){var t,f,m,g=i(this);-1===i.inArray(g.attr("name"),h)&&(r=g.closest(".or-branch"),u=null,(n={}).relevant=p.form.input.getRelevant(g),n.path=p.form.input.getName(g),1===r.length?(f=n.path.split("/")).length>3&&(m=f.splice(0,f.length-1).join("/"),0===p.form.view.$.find('.or-group[name="'+m+'"],.or-group-data[name="'+m+'"]').filter(function(){var t=i(this);return t.children(".or-repeat").length>0||0===t.children(".or-repeat-info").length}).length)||(s=l&&r.parentsUntil(".or",".or-repeat").length>0,a=l&&r.parentsUntil(".or",".or-repeat.clone").length>0,t=g.children('.or-repeat-info[data-name="'+n.path+'"]').length&&!g.children('.or-repeat[name="'+n.path+'"]').length?null:n.path,n.ind=t&&a?p.form.input.getIndex(g):0,-1===n.relevant.indexOf("..")&&(u=s?n.relevant+"__"+n.path.substring(0,n.path.lastIndexOf("/"))+"__"+n.ind:n.relevant),u&&void 0!==c[u]?o=c[u]:(o=p.evaluate(n.relevant,t,n.ind),c[u]=o),s||h.push(i(this).attr("name")),!0===p.process(r,n.path,o,e)&&(d=!0)):0===g.parentsUntil(".or","#or-calculated-items").length&&console.error("could not find branch node for ",i(this)))}),d&&this.form.view.$.trigger("changebranch")},evaluate:function(t,e,n){return this.form.model.evaluate(t,"boolean",e,n)},process:function(t,e,n,i){return!0===n?this.enable(t,e):this.disable(t,e,i)},selfRelevant:function(t){return!t.hasClass("disabled")&&!t.hasClass("pre-init")},enable:function(t,e){var n=!1;return this.selfRelevant(t)||(n=!0,t.removeClass("disabled pre-init"),this.form.calc.update({relevantPath:e}),this.form.widgets.enable(t),this.activate(t)),n},disable:function(t,e,n){var i=t.hasClass("pre-init"),r=!1;return(i||this.selfRelevant(t)||n)&&(r=!0,i?t.removeClass("pre-init"):(this.form.options.clearIrrelevantImmediately||n)&&this.clear(t,e),this.deactivate(t)),r},clear:function(t,e){t.clearInputs("change","inputupdate.enketo"),t.is(".or-group, .or-group-data")&&this.form.calc.update({relevantPath:e})},setDisabledProperty:function(t,e){var n=t.prop("nodeName").toLowerCase();"label"===n?t.children("input, select, textarea").prop("disabled",e):"fieldset"===n||"section"===n?t.prop("disabled",e):t.find("fieldset, input, select, textarea").prop("disabled",e)},activate:function(t){this.setDisabledProperty(t,!1)},deactivate:function(t){t.addClass("disabled"),this.form.widgets.disable(t),this.setDisabledProperty(t,!0)}}},function(t,e,n){"use strict";var i=n(0),r=n(5);t.exports={update:function(t){var e,n,o,s=this,a={};if(!this.form)throw new Error("Output module not correctly instantiated with form property.");o=this.form.getRelatedNodes("data-items-path",".itemset-template",t),e=!!(this.form.repeatsPresent&&this.form.view.$.find(".or-repeat.clone").length>0),o.each(function(){var t,o,u,l,c,h,d,p,f,m,g,v,y,_,b,w,x,$;if(!(p=i(this)).parentsUntil(".or",".or-branch").parentsUntil(".or",".disabled").length){if(f={},m=p.data(),g=p.prop("nodeName").toLowerCase(),$=p.parent("select, datalist"),"label"===g?v=p.children("input").eq(0):"select"===$.prop("nodeName").toLowerCase()?v=$:"datalist"===$.prop("nodeName").toLowerCase()&&(v=$.siblings("input:not(.widget)")),y=p.closest("label, select, datalist").siblings(".itemset-labels"),_=p.attr("data-items-path"),b=y.attr("data-label-type"),w=y.attr("data-label-ref"),x=y.attr("data-value-ref"),d=s.form.input.getName(v),n=!!(e&&v.parentsUntil(".or",".or-repeat").length>0),h=!!(e&&v.parentsUntil(".or",".or-repeat.clone").length>0)?s.form.input.getIndex(v):0,void 0!==a[_])c=a[_];else{c=i(s.form.model.evaluate(_,"nodes",d,h,!0)),n||(a[_]=c)}f.length=c.length,f.text=c.text(),f.length===m.length&&f.text===m.text||(p.data(f),p.closest(".question").find(g).not(p).remove(),p.parent("select").siblings(".or-option-translations").empty(),c.each(function(){var e,n,a,l=i(this);switch(t=i("<root/>"),p.clone().appendTo(t).removeClass("itemset-template").addClass("itemset").removeAttr("data-items-path"),n=(a=r.parseFunctionFromExpression(w,"translate")).length?a[0][1][0]:w+":eq(0)",e=l.children(n),"itext"!==b&&e.length>0&&(b="langs"),b){case"itext":o=y.find('[data-itext-id="'+e.eq(0).text()+'"]').clone();break;case"langs":o=i(),e.each(function(){var t=this.getAttribute("lang"),e=t?' lang="'+this.getAttribute("lang")+'"':"",n='<span class="option-label'+(t&&t!==s.form.langs.getCurrentLang()?"":" active")+'"'+e+">"+this.textContent+"</span>";o=o.add(n)});break;default:o=i('<span class="option-label active" lang="">'+e.eq(0).text()+"</span>")}u=l.children(x).text(),t.find("[value]").attr("value",u),"label"===g?(t.find("input").after(o),y.before(t.find(":first"))):"option"===g&&(t.find("option").text(o.filter(".active").eq(0).text()),o.attr("data-option-value",u).attr("data-itext-id","").appendTo(y.siblings(".or-option-translations")),p.siblings().addBack().last().after(t.find(":first")))}),""!==(l=s.form.model.node(d,h).getVal()[0])&&(s.form.input.setVal(d,h,l),v.trigger("change")),$.length>0&&v.trigger("changeoption"))}})}}},function(t,e,n){"use strict";var i=n(0);t.exports={status:0,lastChanged:null,$all:null,updateTotal:function(){this.$all=this.form.view.$.find(".question").not(".disabled, .or-appearance-comment, .or-appearance-dn").filter(function(){return 0===i(this).parentsUntil(".or",".disabled").length})},update:function(t){var e;this.$all&&t||this.updateTotal(),this.lastChanged=t||this.lastChanged,(e=Math.round(100*(this.$all.index(i(this.lastChanged).closest(".question"))+1)/this.$all.length))>0&&e!==this.status&&(this.status=e,this.form.view.$.trigger("progressupdate.enketo",e))},get:function(){return this.status}}},function(t,e,n){"use strict";var i,r,o,s,a,u,l,c,h,d,p=n(0),f=n(102).filter(function(t){return t.selector});o=function(t,e){if(!this.form)throw new Error("Widgets module not correctly instantiated with form property.");return r=this.form.view.$,t=t||r,i=i||e,f.forEach(function(e){l(e,t)}),!0},s=function(t){for(var e,n=0;n<f.length;n++)(e=f[n]).name&&u(t,e.selector)[e.name]("enable")},a=function(t){for(var e,n=0;n<f.length;n++)(e=f[n]).name&&u(t,e.selector)[e.name]("disable")},u=function(t,e){return e?"form"===e?r:t.is(".question")?t.find("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)").filter(e):t.find(e):p()},l=function(t,e){var n;if(t.options=t.options||{},!t.name)return console.error("widget doesn't have a name");t.helpersRequired&&t.helpersRequired.length>0&&(t.options.helpers={},t.helpersRequired.forEach(function(e){t.options.helpers[e]=i[e]})),(n=u(e,t.selector)).length&&(n[t.name](t.options),c(t,n),h(t,n),d(t,n))},c=function(t,e){e.length>0&&r.on("changelanguage",function(){e[t.name]("update")})},h=function(t,e){e.length>0&&t.list&&e.on("changeoption",function(){p(this)[t.name]("update")})},d=function(t,e){var n=e.prop("nodeName").toLowerCase();e.length>0&&("input"===n||"select"===n||"textarea"===n)&&e.on("inputupdate.enketo",function(){p(this)[t.name]("update")})},t.exports={init:o,enable:s,disable:a}},function(t,e,n){"use strict";t.exports=[n(103),n(104),n(106),n(107),n(109),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(124),n(126),n(127),n(128),n(129),n(130),n(131),n(132)]},function(t,e,n){"use strict";t.exports={name:"notewidget"}},function(t,e,n){"use strict";var i=n(0),r=n(1),o=n(4),s=n(6).t,a="desktopSelectpicker";function u(t,e,n){this.namespace=a,r.call(this,t,e),n&&(n.stopPropagation(),n.preventDefault()),this.$picker=null,this.noneSelectedText=s("selectpicker.noneselected"),this.multiple=void 0!==i(t).attr("multiple")&&!1!==i(t).attr("multiple"),this._init()}n(15),u.prototype=Object.create(r.prototype),u.prototype.constructor=u,u.prototype._init=function(){var t=this._getTemplate(),e=i(this.element);this.readonly=!!e.attr("readonly"),e.css("display","none"),t=this._createLi(t),this.$picker=t.insertAfter(e),this.$picker.find("> a").addClass(this.selectClass),this._clickListener(),this._focusListener()},u.prototype._getTemplate=function(){return'<div class="btn-group bootstrap-select widget clearfix"><button type="button" class="btn btn-default dropdown-toggle clearfix" data-toggle="dropdown"><span class="selected">__SELECTED_OPTIONS</span><span class="caret"></span></button><ul class="dropdown-menu" role="menu">__ADD_LI</ul></div>'},u.prototype._createLi=function(t){var e,n=[],r="",o=this.multiple?'type="checkbox"':'type="radio" name="'+1e5*Math.random()+'"',s=this.readonly?' readonly="readonly"':"",a=this.readonly?' disabled="disabled"':"",u=this.readonly?' class="disabled"':"";if(i(this.element).find("option").each(function(){n.push({label:i(this).text(),selected:i(this).is(":selected"),value:i(this).attr("value")})}),n.length>0){t=t.replace("__SELECTED_OPTIONS",this._createSelectedStr());for(var l=0;l<n.length;l++)n[l].value&&(e=n[l].selected?' checked="checked"':"",r+="<li "+u+(n[l].selected?'class="active"':"")+'><a class="option-wrapper" tabindex="-1" href="#"><label><input class="ignore" '+o+e+s+a+' value="'+n[l].value+'" /><span class="option-label">'+n[l].label+"</span></label></a></li>")}return t=t.replace("__ADD_LI",r),i(t)},u.prototype._createSelectedStr=function(){var t=[];return i(this.element).find("option:selected").each(function(){i(this).attr("value").length>0&&t.push(i(this).text())}),0===t.length?this.noneSelectedText:1===t.length?t[0]:s("selectpicker.numberselected",{number:t.length})},u.prototype._clickListener=function(){var t=this;this.$picker.on("click","li:not(.disabled)",function(e){var n=i(this),r=n.find("input"),o=i(t.element),s=o.find('option[value="'+r.val()+'"]'),a=s.is(":selected");"input"!==e.target.nodeName.toLowerCase()&&e.preventDefault(),t.multiple?e.stopPropagation():(t.$picker.find("li").removeClass("active"),s.siblings("option").prop("selected",!1),t.$picker.find("input").prop("checked",!1)),a?(n.removeClass("active"),r.prop("checked",!1),s.prop("selected",!1)):(n.addClass("active"),r.prop("checked",!0),s.prop("selected",!0)),t.$picker.find(".selected").html(t._createSelectedStr()),o.trigger("change")}).on("keydown","li:not(.disabled)",function(t){if(/(13|32)/.test(t.keyCode.toString(10))){/(32)/.test(t.keyCode.toString(10))||t.preventDefault();var e=i(":focus");e.click(),e.focus(),t.preventDefault()}}).on("click","li.disabled",function(t){return t.stopPropagation(),!1})},u.prototype._focusListener=function(){var t=this;i(this.element).on("applyfocus",function(){t.$picker.find(".dropdown-toggle").focus()}),this.$picker.on("shown.bs.dropdown",function(){return i(t.element).trigger("fakefocus"),!0})},u.prototype.disable=function(){this.$picker.find("li").addClass("disabled")},u.prototype.enable=function(){this.readonly||this.$picker.find("li").removeClass("disabled")},u.prototype.update=function(){this.$picker.remove(),this._init()},i.fn[a]=function(t,e){return t=t||{},this.each(function(){var n=i(this),r=n.data(a);r||"object"!=typeof t||o.touch?r&&"string"==typeof t&&r[t](this):n.data(a,r=new u(this,t,e))})},t.exports={name:a,list:!0,selector:"select:not(#form-languages)"}},function(t,e,n){"use strict";var i=navigator.userAgent;t.exports={os:{get ios(){return/iPad|iPhone|iPod/i.test(i)},get android(){return/android/i.test(i)}}}},function(t,e,n){"use strict";var i=n(0),r=n(1),o=n(4),s="mobileSelectpicker";function a(t,e){this.namespace=s,r.call(this,t,e),this._init()}a.prototype=Object.create(r.prototype),a.prototype.constructor=a,a.prototype._init=function(){var t=this;i(this.element).on("change."+s,function(){return t._showSelectedValues(),!0}),this._showSelectedValues()},a.prototype._showSelectedValues=function(){var t,e=[],n=i(this.element),r=n.next(".widget").length>0?n.next(".widget"):i('<span class="widget mobileselect"></span>').insertAfter(n),o=i.isArray(n.val())?n.val():[n.val()];for(t=0;t<o.length;t++)e.push(i(this).find('option[value="'+o[t]+'"]').text());r.text(o.join(", "))},a.prototype.update=function(){this._showSelectedValues()},i.fn[s]=function(t,e){return t=t||{},this.each(function(){var n=i(this),r=n.data(s);!r&&"object"==typeof t&&o.touch&&n.data(s,new a(this,t,e)),r&&"string"==typeof t&&r[t](this)})},t.exports={name:s,selector:"select[multiple]"}},function(t,e,n){"use strict";var i=n(0),r=n(1),o="autocomplete",s=!("list"in document.createElement("input")&&"options"in document.createElement("datalist")&&void 0!==window.HTMLDataListElement);function a(t,e,n){this.namespace=o,r.call(this,t,e),n&&(n.stopPropagation(),n.preventDefault()),this._init()}n(108),a.prototype=Object.create(r.prototype),a.prototype.constructor=a,a.prototype._init=function(){var t=i(this.element),e=t.attr("list");this.props=this._getProps(),this.$options=t.closest(".question").find("datalist#"+e+" > option"),this.$options.each(function(t,e){var n=e.getAttribute("value");e.classList.contains("itemset-template")||void 0===n||null===n||(e.dataset.value=n,e.setAttribute("value",e.textContent),e.textContent="")}),this.$fakeInput=i('<input type="text" class="ignore widget autocomplete" list="'+e+'" />'),this.props.readonly&&this.$fakeInput.attr("readonly","readonly"),this.props.disabled&&this.$fakeInput.attr("disabled","disabled"),t.hide().after(this.$fakeInput),s&&(console.debug("Polyfill required"),this.$fakeInput.relevantDropdown()),this._setFakeInputListener(),this._setFocusListener(),this._showCurrentLabel()},a.prototype._getProps=function(){return{readonly:this.element.readOnly,disabled:this.element.disabled}},a.prototype._showCurrentLabel=function(){var t=this.element.value,e=this._findLabel(t);this.$fakeInput.val(e),t&&!e&&this.$fakeInput.trigger("input")},a.prototype._setFakeInputListener=function(){var t=this;this.$fakeInput.on("input."+this.namespace,function(e){var n=e.target,r=n.value,o=t._findValue(r)||"";t.element.value!==o&&i(t.element).val(o).trigger("change"),i(n).toggleClass("notfound",r&&!o)})},a.prototype._findValue=function(t){var e="";return t?(this.$options.each(function(n,i){if(i.value===t)return e=i.getAttribute("data-value"),!1}),e):""},a.prototype._findLabel=function(t){var e="";return t?(this.$options.each(function(n,i){if(i.dataset.value===t)return e=i.value,!1}),e):""},a.prototype._setFocusListener=function(){var t=this;this.$fakeInput.on("focus",function(){return i(t.element).trigger("fakefocus"),!0}),i(this.element).on("applyfocus",function(){i(t.$fakeInput).focus()})},a.prototype.disable=function(){this.$fakeInput.find("li").addClass("disabled")},a.prototype.enable=function(){this.$fakeInput.find("li").removeClass("disabled")},a.prototype.update=function(){i(this.element).siblings(".widget").remove(),this._init()},i.fn[o]=function(t,e){return t=t||{},this.each(function(){var n=i(this),r=n.data(o);r||"object"!=typeof t?r&&"string"==typeof t&&r[t](this):n.data(o,r=new a(this,t,e))})},t.exports={name:o,list:!0,selector:"input[list]"}},function(t,e,n){var i=n(0),r="relevantDropdown";function o(t,e,n){this.namespace=r,this.element=t,this.options=i.extend({fadeOutSpeed:"normal",change:null},e),n&&(n.stopPropagation(),n.preventDefault()),this._init()}i.expr[":"].RD_contains=i.expr.createPseudo(function(t){return function(e){return i(e).text().toUpperCase().indexOf(t.toUpperCase())>=0}}),o.prototype._init=function(){var t=i(this.element);this.listId=t.attr("list"),this.$fakeDatalist=i("<ul />",{class:"datalist widget",id:this.listId}).appendTo(t.parent()),this._updateFakeDatalist(),this._setEventListeners()},o.prototype._updateFakeDatalist=function(){var t=i("#"+this.listId),e=document.createDocumentFragment();this.$fakeDatalist.empty(),t.find("option").each(function(){tempItem=i("<li />",{text:i(this).val()})[0],e.appendChild(tempItem)}),this.$fakeDatalist.append(e),this.$fakeDatalistItems=this.$fakeDatalist.find("li")},o.prototype._setEventListeners=function(){var t,e=this,n=i(this.element),r=0;n.on("focus",function(){e.$fakeDatalist.scrollTop(0),r=0}).on("blur",function(){setTimeout(function(){e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),e.$fakeDatalistItems.removeClass("active")},500)}).on("keyup",function(r){t=n.position(),e.$fakeDatalist.show().css({top:t.top+i(this).outerHeight(),left:t.left,width:n.outerWidth()}),e.$fakeDatalistItems.hide(),e.$fakeDatalist.find('li:RD_contains("'+n.val()+'")').show()}),this.$fakeDatalist.on("mouseenter","li",function(){i(this).addClass("active").siblings().removeClass("active")}).on("mouseleave","li",function(){i(this).removeClass("active")}),i(window).resize(function(){t=n.position(),e.$fakeDatalist.css({top:t.top+i(this).outerHeight(),left:t.left,width:n.outerWidth()})}),n.on("keydown",function(t){var i=e.$fakeDatalist.find("li.active"),o=e.$fakeDatalist.outerHeight(),s=e.$fakeDatalistItems.outerHeight();if(38==t.keyCode&&i.length&&(prevAll=i.prevAll("li:visible"),prevAll.length>0&&(i.removeClass("active"),prevAll.eq(0).addClass("active")),prevAll.length&&prevAll.position().top<0&&r>0&&e.$fakeDatalist.scrollTop(r-=s)),40==t.keyCode)if(i.length){var a=i.nextAll("li:visible");a.length>0&&(i.removeClass("active"),a.eq(0).addClass("active")),a.length&&a.position().top+s>=o&&e.$fakeDatalist.stop().animate({scrollTop:r+=s},200)}else e.$fakeDatalistItems.removeClass("active"),e.$fakeDatalist.find("li:visible:first").addClass("active");13!=t.keyCode&&9!=t.keyCode||(i.length&&n.val(i.text()).trigger("input"),e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),e.$fakeDatalistItems.removeClass("active")),13!=t.keyCode&&38!=t.keyCode&&40!=t.keyCode&&(e.$fakeDatalistItems.removeClass("active"),e.$fakeDatalist.find("li:visible:first").addClass("active"),e.$fakeDatalist.scrollTop(0),r=0)}),this.$fakeDatalist.on("click","li",function(){i("li.active").length&&n.val(i(this).text()).trigger("input"),e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),e.$fakeDatalistItems.removeClass("active")})},o.prototype.update=function(){this._updateFakeDatalist()},i.fn[r]=function(t,e){return t=t||{},this.each(function(){var n=i(this),s=n.data(r);s||"object"!=typeof t?s&&"string"==typeof t&&s[t](this):n.data(r,s=new o(this,t,e))})}},function(t,e,n){"use strict";var i,r=n(0),o=n(1),s=n(12),a=n(110),u=n(8),l=n(6).t,c=n(4),h=n(29),d="geopicker",p=s&&s.maps&&s.maps.length>0?s.maps:[{name:"streets",maxzoom:24,tiles:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],attribution:'Â© <a href="http://openstreetmap.org">OpenStreetMap</a> | <a href="www.openstreetmap.org/copyright">Terms</a>'}],f="https://maps.googleapis.com/maps/api/geocode/json?address={address}&sensor=true&key={api_key}",m=s.googleApiKey||s.google_api_key,g=a.divIcon({iconSize:24,className:"enketo-geopoint-marker"}),v=a.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker"}),y=a.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker-active"});function _(t,e){this.namespace=d,o.call(this,t,e),this._init()}n(111),n(112),_.prototype=Object.create(o.prototype),_.prototype.constructor=_,_.prototype._init=function(){var t=r(this.element).val().trim(),e=this;this.$form=r(this.element).closest("form.or"),this.$question=r(this.element).closest(".question"),this.mapId=Math.round(1e7*Math.random()),this.props=this._getProps(),this._addDomElements(),this.currentIndex=0,this.points=[],t&&r(this.element).val().trim().split(";").forEach(function(t,n){e.points[n]=t.trim().split(" "),e.points[n].forEach(function(t,e,n){n[e]=Number(t)})}),this.$widget.find('[name="lat"], [name="long"], [name="alt"], [name="acc"]').on("change change.bymap change.bysearch",function(t){var n=e.$lat.val()?Number(e.$lat.val()):"",i=e.$lng.val()?Number(e.$lng.val()):"",r=e.$alt.val()?Number(e.$alt.val()):"",o=e.$acc.val()?Number(e.$acc.val()):"",s={lat:n,lng:i};t.stopImmediatePropagation(),"bymap"!==t.namespace&&"bysearch"!==t.namespace&&e.polyline&&!e.containsEmptyPoints(e.points,e.currentIndex)&&e.updatedPolylineWouldIntersect(s,e.currentIndex)?(e._showIntersectError(),e._updateInputs(e.points[e.currentIndex],"nochange")):(e._editPoint([n,i,r,o]),"bysearch"!==t.namespace&&e.$search&&e.$search.val(""))}),this.$kmlInput.on("change",function(t){var n=e.$points.find(".addpoint"),i=r(this).prev(".paste-progress").removeClass("hide"),o=t.target.value,s=e._convertKmlCoordinatesToLeafletCoordinates(o);t.target.value="",setTimeout(function(){s.forEach(function(t,i){e._updateInputs(t),i<s.length-1&&n.click()}),i.remove(),e._switchInputType("points")},10)}),this.$widget.find(".toggle-input-type-btn").on("click",function(){var t=e.$inputGroup.hasClass("kml-input-mode")?"points":"kml";return e._switchInputType(t),!1}),r(this.element).on("change",function(){e.$kmlInput.prop("disabled",!!this.value)}).on("applyfocus",function(){e.$widget[0].querySelector("input").focus()}),this.$points.on("click",".point",function(){return e._setCurrent(e.$points.find(".point").index(r(this))),e._switchInputType("points"),!1}),this.$points.find(".addpoint").on("click",function(){return e._addPoint(),!1}),this.$widget.find(".close-chain-btn").on("click",function(){return e._closePolygon(),!1}),this.$widget.find(".btn-remove").on("click",function(){e.points.length<2?e._updateInputs([]):h.confirm(l("geopicker.removePoint")).then(function(){e._removePoint()})}),this.$map.find(".show-map-btn").on("click",function(){return e.$widget.find(".search-bar").removeClass("hide-search"),e.$widget.addClass("full-screen"),e._updateMap(),!1}),this.$form.on("pageflip.enketo.map"+this.mapId,function(t){e.map&&r.contains(t.target,e.element)&&(e.map.invalidateSize(),e.$form.off("pageflip.enketo.map"+e.mapId))}),this.props.wide&&this.$widget.addClass("wide"),this.$widget.toggleClass("hide-input",this.$question.hasClass("or-appearance-hide-input")).find(".toggle-input-visibility-btn").on("click",function(){e.$widget.toggleClass("hide-input"),r(this).toggleClass("open",e.$widget.hasClass("hide-input")),e.map&&e.map.invalidateSize(!1)}).toggleClass("open",e.$widget.hasClass("hide-input")),this.$widget.find(".hide-map-btn").on("click",function(){return e.$widget.find(".search-bar").addClass("hide-search"),e.$widget.removeClass("full-screen").find(".map-canvas").removeClass("leaflet-container").find(".leaflet-google-layer").remove(),e.map&&(e.map.remove(),e.map=null,e.polygon=null,e.polyline=null),!1}),this.$widget.on("focus","input",function(){r(e.element).trigger("fakefocus")}),this.props.search&&this._enableSearch(),this.props.detect&&this._enableDetection(),this.props.readonly&&this.disable(this.element),t?this.points.forEach(function(){e._addPointBtn()}):this._addPoint(),t?(this._updateMap(),this._setCurrent(this.currentIndex)):(this._updateMap([0,0],1),this.props.detect&&navigator.geolocation.getCurrentPosition(function(t){e._updateMap([t.coords.latitude,t.coords.longitude],15)}))},_.prototype._switchInputType=function(t){"kml"===t?this.$inputGroup.addClass("kml-input-mode"):"points"===t&&this.$inputGroup.removeClass("kml-input-mode")},_.prototype._getProps=function(){var t=[],e=!0!==c.touch||!0===c.touch&&r(this.element).closest(".or-appearance-maps").length>0;return e&&(t=r(this.element).closest(".question").attr("class").split(" ").filter(function(t){return"or-appearance-maps"!==t&&/or-appearance-/.test(t)})).forEach(function(e,n){t[n]=e.substring(14)}),{detect:!!navigator.geolocation,map:e,search:e,appearances:t,type:this.element.attributes["data-type-xml"].value,touch:c.touch,wide:this.$question.width()/this.$question.closest("form.or").width()>.8,readonly:this.element.readOnly}},_.prototype._addPointBtn=function(){this.$points.find(".addpoint").before('<a href="#" class="point" aria-label="point"> </a>')},_.prototype._addDomElements=function(){var t='<div class="map-canvas-wrapper"><div class=map-canvas id="map'+this.mapId+'"></div></div>',e=l("geopicker.kmlpaste"),n=l("geopicker.kmlcoords"),i='<a href="#" class="toggle-input-type-btn"><span class="kml-input">KML</span><span class="points-input">'+l("geopicker.points")+'</span></a><label class="geo kml">'+n+'<progress class="paste-progress hide"></progress><textarea class="ignore" name="kml" placeholder="'+e+'"></textarea><span class="disabled-msg">remove all points to enable</span></label>',o='<button type="button" class="close-chain-btn btn btn-default btn-xs">'+l("geopicker.closepolygon")+"</button>",s=l("geopicker.latitude"),a=l("geopicker.longitude"),u=l("geopicker.altitude"),c=l("geopicker.accuracy"),h=l("geopicker.searchPlaceholder");if(this.$widget=r('<div class="geopicker widget"><div class="search-bar hide-search no-map no-detect"><button type="button" class="hide-map-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button><button name="geodetect" type="button" class="btn btn-default" title="detect current location" data-placement="top"><span class="icon icon-crosshairs"> </span></button><div class="input-group"><input class="geo ignore" name="search" type="text" placeholder="'+h+'" disabled="disabled"/><button type="button" class="btn btn-default search-btn"><i class="icon icon-search"> </i></button></div></div><div class="geo-inputs"><label class="geo lat">'+s+'<input class="ignore" name="lat" type="number" step="0.000001" min="-90" max="90"/></label><label class="geo long">'+a+'<input class="ignore" name="long" type="number" step="0.000001" min="-180" max="180"/></label><label class="geo alt">'+u+'<input class="ignore" name="alt" type="number" step="0.1" /></label><label class="geo acc">'+c+'<input class="ignore" name="acc" type="number" step="0.1" /></label><button type="button" class="btn-icon-only btn-remove" aria-label="remove"><span class="icon icon-trash"> </span></button></div></div>'),this.props.detect&&(this.$widget.find(".search-bar").removeClass("no-detect"),this.$detect=this.$widget.find('button[name="geodetect"]')),this.$search=this.$widget.find('[name="search"]'),this.$inputGroup=this.$widget.find(".geo-inputs"),this.props.map?(this.$widget.find(".search-bar").removeClass("no-map").after(t),this.$map=this.$widget.find(".map-canvas"),this.$map.parent().append('<button type="button" class="toggle-input-visibility-btn" aria-label="toggle input"> </button>')):this.$map=r(),this.props.touch&&this.props.map&&this.$map.append('<button type="button" class="show-map-btn btn btn-default">Map</button>'),this.props.touch||this.$widget.find(".search-bar").removeClass("hide-search"),"geopoint"!==this.props.type){this.$points=r('<div class="points"><button type="button" class="addpoint">+</button></div>'),this.$widget.prepend(this.$points),"geoshape"===this.props.type&&this.$inputGroup.append(o);var d=r(i);this.$kmlInput=d.find('[name="kml"]'),this.$inputGroup.prepend(d)}else this.$points=r(),this.$kmlInput=r();this.$lat=this.$widget.find('[name="lat"]'),this.$lng=this.$widget.find('[name="long"]'),this.$alt=this.$widget.find('[name="alt"]'),this.$acc=this.$widget.find('[name="acc"]'),r(this.element).hide().after(this.$widget).parent().addClass("clearfix")},_.prototype._updateValue=function(){var t=r(this.element).val(),e="",n=this;return this._markAsValid(),this.points.forEach(function(t,i,r){var o,s="number"==typeof t[0]?t[0]:"number"==typeof t.lat?t.lat:null,a="number"==typeof t[1]?t[1]:"number"==typeof t.lng?t.lng:null,u="number"==typeof t[2]?t[2]:0,l="number"==typeof t[3]?t[3]:0;o=s&&a?s+" "+a+" "+u+" "+l:"",n._isValidGeopoint(o)||""===o&&i===r.length-1||n._markAsInvalid(i),""!==o||i!==r.length-1?(e+=o,i!==r.length-1&&(e+=";")):e=e.substring(0,e.lastIndexOf(";"))}),t!==e&&(r(this.element).val(e).trigger("change"),!0)},_.prototype._isValidGeopoint=function(t){var e;return!!t&&(""!==(e=t.toString().split(" "))[0]&&e[0]>=-90&&e[0]<=90&&""!==e[1]&&e[1]>=-180&&e[1]<=180&&(void 0===e[2]||!isNaN(e[2]))&&(void 0===e[3]||!isNaN(e[3])&&e[3]>=0))},_.prototype._isValidLatLngList=function(t){var e=this;return t.every(function(t,n,i){return e._isValidLatLng(t)||""===t.join()&&n===i.length-1})},_.prototype._cleanLatLng=function(t){return Array.isArray(t)?[t[0],t[1]]:t},_.prototype._isValidLatLng=function(t){var e,n;return e="number"==typeof t[0]?t[0]:"number"==typeof t.lat?t.lat:null,n="number"==typeof t[1]?t[1]:"number"==typeof t.lng?t.lng:null,null!==e&&null!==n&&e>=-90&&e<=90&&n>=-180&&n<=180},_.prototype._markAsInvalid=function(t){this.$points.find(".point").eq(t).addClass("has-error")},_.prototype._markAsValid=function(){this.$points.find(".point").removeClass("has-error")},_.prototype._setCurrent=function(t){this.currentIndex=t,this.$points.find(".point").removeClass("active").eq(t).addClass("active"),this._updateInputs(this.points[t],""),!this.map||this.props.touch&&!this._inFullScreenMode()||this._updateMarkers()},_.prototype._enableDetection=function(){var t=this,e={enableHighAccuracy:!0,maximumAge:0};this.$detect.click(function(n){return n.preventDefault(),navigator.geolocation.getCurrentPosition(function(e){var n={lat:Math.round(1e6*e.coords.latitude)/1e6,lng:Math.round(1e6*e.coords.longitude)/1e6};t.polyline&&t.updatedPolylineWouldIntersect(n,t.currentIndex)?t._showIntersectError():(t._updateInputs([n.lat,n.lng,e.coords.altitude,e.coords.accuracy]),t.currentIndex===t.points.length-1&&"geopoint"!==t.props.type&&t._addPoint())},function(){console.error("error occurred trying to obtain position")},e),!1})},_.prototype._enableSearch=function(){var t=this;f=m?f.replace("{api_key}",m):f.replace("&key={api_key}",""),this.$search.prop("disabled",!1).on("change",function(e){var n=r(this).val();e.stopImmediatePropagation(),n&&(n=n.split(/\s+/).join("+"),r.get(f.replace("{address}",n),function(e){var i;e.results&&e.results.length>0&&e.results[0].geometry&&e.results[0].geometry.location?(i=e.results[0].geometry.location,t._updateMap([i.lat,i.lng],15),t.$search.closest(".input-group").removeClass("has-error")):(t.$search.closest(".input-group").addClass("has-error"),console.log('Location "'+n+'" not found'))},"json").fail(function(){t.$search.closest(".input-group").addClass("has-error"),console.log("Error. Geocoding service may not be available or app is offline")}).always(function(){}))})},_.prototype._dynamicMapAvailable=function(){return!!this.map},_.prototype._inFullScreenMode=function(){return this.$widget.hasClass("full-screen")},_.prototype._updateMap=function(t,e){var n=this;this.props.map&&(e||(e=this.map&&this.map.getZoom()||15),t&&(this.lastLatLng=t,this.lastZoom=e),this.props.touch&&!this._inFullScreenMode()||(this.map?n._updateDynamicMapView(t,e):this._addDynamicMap().then(function(){n._updateDynamicMapView(t,e)})))},_.prototype._addDynamicMap=function(){var t=this;return this._getLayers().then(function(e){var n={layers:t._getDefaultLayer(e)};t.map=a.map("map"+t.mapId,n).on("click",function(e){var n,i;if(t.props.readonly)return!1;n=e.latlng,i=t.$lat.val()&&t.$lng.val()?t.points.length:t.currentIndex,n.lat=Math.round(1e6*n.lat)/1e6,n.lng=Math.round(1e6*n.lng)/1e6,"geopoint"!==t.props.type&&!t.containsEmptyPoints(t.points,i)&&t.updatedPolylineWouldIntersect(n,i)?t._showIntersectError():t.$lat.val()&&t.$lng.val()&&"geopoint"!==t.props.type?t.$lat.val()&&t.$lng.val()&&(t._addPoint(),t._updateInputs(n,"change.bymap")):t._updateInputs(n,"change.bymap")}),t.map.attributionControl.setPrefix(""),e.length>1&&a.control.layers(t._getBaseLayers(e),null).addTo(t.map),t.$widget.find(".leaflet-control-layers-toggle").append('<span class="icon icon-globe"></span>'),t.map.on("baselayerchange",function(){t.$widget.find(".leaflet-control-container input").addClass("ignore no-unselect").next("span").addClass("option-label")})})},_.prototype._updateDynamicMapView=function(t,e){t?this.map.setView(t,e||15):(this._updatePolyline(),this._updateMarkers(),1===this.points.length&&""===this.points[0].toString()&&(this.lastLatLng?this.map.setView(this.lastLatLng,this.lastZoom||15):this.map.setView(a.latLng(0,0),e||15)))},_.prototype._showIntersectError=function(){h.alert("Borders cannot intersect!")},_.prototype._getLayers=function(){var t=this,e=[];return p.forEach(function(n,i){"string"==typeof n.tiles&&/^GOOGLE_(SATELLITE|ROADMAP|HYBRID|TERRAIN)/.test(n.tiles)?e.push(t._getGoogleTileLayer(n,i)):n.tiles?e.push(t._getLeafletTileLayer(n,i)):console.error("Configuration error for map tiles. Not a valid tile layer: ",n)}),u.all(e)},_.prototype._getLeafletTileLayer=function(t,e){var n,i=this._getTileOptions(t,e);return t.tileIndex=void 0===t.tileIndex?Math.round(100*Math.random())%t.tiles.length:t.tileIndex,n=t.tiles[t.tileIndex],u.resolve(a.tileLayer(n,i))},_.prototype._getGoogleTileLayer=function(t,e){var n=this._getTileOptions(t,e);return n.type=t.tiles.substring(7).toLowerCase(),this._loadGoogleMapsScript().then(function(){return a.gridLayer.googleMutant(n)})},_.prototype._getTileOptions=function(t,e){var n=t.name||"map-"+(e+1);return{id:t.id||n,maxZoom:t.maxzoom||18,minZoom:t.minzoom||0,name:n,attribution:t.attribution||""}},_.prototype._loadGoogleMapsScript=function(){return i||(i=new u(function(t){var e;window.gmapsLoaded=function(){delete window.gmapsLoaded,t()},e="https://maps.google.com/maps/api/js?v=3.exp"+(m?"&key="+m:"")+"&libraries=places&callback=gmapsLoaded",r.getScript(e)})),i},_.prototype._getDefaultLayer=function(t){var e,n=this;return t.reverse().some(function(t){return e=t,n.props.appearances.some(function(e){return e===t.options.name})}),e},_.prototype._getBaseLayers=function(t){var e={};return t.forEach(function(t){e[t.options.name]=t}),e},_.prototype._updateMarkers=function(){var t=[],e=[],n=this;this.markerLayer&&this.markerLayer.clearLayers(),this.points.length<2&&""===this.points[0].join()||(this.points.forEach(function(i,r){var o="geopoint"===n.props.type?g:r===n.currentIndex?y:v;n._isValidLatLng(i)?(t.push(n._cleanLatLng(i)),e.push(a.marker(n._cleanLatLng(i),{icon:o,clickable:!n.props.readonly,draggable:!n.props.readonly,alt:r,opacity:.9}).on("click",function(t){0===t.target.options.alt&&"geoshape"===n.props.type?n._closePolygon():n._setCurrent(t.target.options.alt)}).on("dragend",function(t){var e=t.target.getLatLng(),i=t.target.options.alt;e.lat=Math.round(1e6*e.lat)/1e6,e.lng=Math.round(1e6*e.lng)/1e6,n.polyline&&n.updatedPolylineWouldIntersect(e,i)?(n._showIntersectError(),n._updateMarkers()):(n._setCurrent(i),n._updateInputs(e,"change.bymap"),n._updateMap())}))):console.debug("this latLng was not considered valid",i)}),e.length>0&&(this.markerLayer=a.layerGroup(e).addTo(this.map),1!==this.points.length&&this._isValidLatLngList(this.points)||this.map.setView(t[0],this.lastZoom||15)))},_.prototype._updatePolyline=function(){var t,e=this;if("geopoint"!==this.props.type){if(this.points.length<2||!this._isValidLatLngList(this.points))return this.map&&(this.polyline&&this.map.removeLayer(this.polyline),this.polygon&&this.map.removeLayer(this.polygon)),this.polyline=null,void(this.polygon=null);"geoshape"===this.props.type&&this._updatePolygon(),t=(t=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1)).map(function(t){return e._cleanLatLng(t)}),this.polyline?this.polyline.setLatLngs(t):(this.polyline=a.polyline(t,{color:"red"}),this.map.addLayer(this.polyline)),setTimeout(function(){e.map.fitBounds(e.polyline.getBounds())},0)}},_.prototype._updatePolygon=function(){var t,e=this;"geopoint"!==this.props.type&&"geotrace"!==this.props.type&&(t=(t=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1)).map(function(t){return e._cleanLatLng(t)}),this.polygon?this.polygon.setLatLngs(t):(this.polygon=a.polygon(t,{color:"red",stroke:!1}),this.map.addLayer(this.polygon)),this._updateArea(t))},_.prototype._updateArea=function(t){var e,n;if(t.length>2){var i=t.map(function(t){return{lat:t[0],lng:t[1]}});e=a.GeometryUtil.geodesicArea(i),n=a.GeometryUtil.readableArea(e,!0),a.popup({className:"enketo-area-popup"}).setLatLng(this.polygon.getBounds().getCenter()).setContent(n).openOn(this.map)}else this.map.closePopup()},_.prototype._addPoint=function(){this._addPointBtn(),this.points.push([]),this._setCurrent(this.points.length-1),this._updateValue()},_.prototype._editPoint=function(t){var e;return this.points[this.currentIndex]=t,(e=this._updateValue())&&this._updateMap(),e},_.prototype._removePoint=function(){var t=this.currentIndex;this.points.splice(this.currentIndex,1),this._updateValue(),this.$points.find(".point").eq(this.currentIndex).remove(),void 0===this.points[this.currentIndex]&&(t=this.currentIndex-1),this._setCurrent(t),this._updateMap()},_.prototype._closePolygon=function(){var t=this.points[this.points.length-1];if(!(this.points.length<3||3===this.points.length&&!this._isValidLatLng(this.points[2])||JSON.stringify(this.points[0])===JSON.stringify(t))){if(this._isValidLatLng(t)?(console.log("current last point is valid, so will create a new one to use to close"),this._addPoint()):(console.log("current last point is not a valid point, so will use this as closing point"),this.currentIndex=this.points.length-1),this.polyline&&!this.containsEmptyPoints(this.points,this.points.length)&&this.updatedPolylineWouldIntersect(this.points[0],this.currentIndex))return this._showIntersectError();this._updateInputs(this.points[0])}},_.prototype._updateInputs=function(t,e){var n=t[0]||t.lat||"",i=t[1]||t.lng||"",r=t[2]||t.alt||"",o=t[3]||t.acc||"";e=void 0!==e?e:"change",this.$lat.val(n||""),this.$lng.val(i||""),this.$alt.val(r||""),this.$acc.val(o||"").trigger(e)},_.prototype._convertKmlCoordinatesToLeafletCoordinates=function(t){var e=[],n=/<\s?coordinates>(([^<]|\n)*)<\/\s?coordinates\s?>/;return(t=n.test(t)?t.match(n)[1]:t).trim().split(/\s+/).forEach(function(t){var n=[];t.split(",").forEach(function(t,e){var i=Number(t);0===e?n[1]=i:1===e?n[0]=i:2===e&&(n[2]=i)}),e.push(n)}),e},_.prototype.updatedPolylineWouldIntersect=function(t,e){var n,i,o,s=[],u=this;return!(this.points<3)&&(r.extend(!0,s,this.points),s[e]=[t[0]||t.lat,t[1]||t.lng],(n=""!==s[s.length-1].join("")?s:s.slice(0,s.length-1))[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]&&(n=n.slice(0,n.length-1)),n=n.map(function(t){return u._cleanLatLng(t)}),i=a.polyline(n,{color:"white"}),this.map.addLayer(i),o=i.intersects(),this.map.removeLayer(i),o)},_.prototype.containsEmptyPoints=function(t,e){return t.some(function(t,n){return!(n===e||t[0]&&t[1])})},_.prototype.disable=function(t){r(t).next(".widget").addClass("readonly").find("input, select, textarea").prop("disabled",!0).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!0)},_.prototype.enable=function(t){r(t).next(".widget").removeClass("readonly").find("input, select, textarea").prop("disabled",!1).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!1),this.map&&this.map.invalidateSize()},_.prototype.update=function(t){this.destroy(t),r(t).data(d,new _(t,this.options,this.event))},r.fn[d]=function(t,e){return this.each(function(){try{var n=r(this),i=r(this).data(d);t=t||{},i||"object"!=typeof t?i&&"string"==typeof t&&i[t](this):n.data(d,new _(this,t,e))}catch(t){console.log("Failed to initialise geopicker for "+this+": "+t)}})},t.exports={name:d,selector:'input[data-type-xml="geopoint"], input[data-type-xml="geotrace"], input[data-type-xml="geoshape"]'}},function(t,e,n){
/* @preserve
 * Leaflet 1.3.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2017 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t){"use strict";var e=Object.freeze;function n(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}Object.freeze=function(t){return t};var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var o=0;function s(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function a(t,e,n){var i,r,o,s;return s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)}}function u(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function l(){return!1}function c(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function p(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function f(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(m,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function x(t){var e=+new Date,n=Math.max(0,16-(e-w));return w=e+n,window.setTimeout(t,n)}var $=window.requestAnimationFrame||b("RequestAnimationFrame")||x,k=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,e,n){if(!n||$!==x)return $.call(window,r(t,e));t.call(e)}function C(t){t&&k.call(window,t)}var T=(Object.freeze||Object)({freeze:e,extend:n,create:i,bind:r,lastId:o,stamp:s,throttle:a,wrapNum:u,falseFn:l,formatNum:c,trim:h,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:$,cancelFn:k,requestAnimFrame:E,cancelAnimFrame:C});function S(){}S.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=e.__super__=this.prototype,o=i(r);for(var s in o.constructor=e,e.prototype=o,this)this.hasOwnProperty(s)&&"prototype"!==s&&"__super__"!==s&&(e[s]=this[s]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),n.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=n(i(o.options),t.options)),n(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},S.include=function(t){return n(this.prototype,t),this},S.mergeOptions=function(t){return n(this.prototype.options,t),this},S.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var D={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,o=(t=d(t)).length;r<o;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,o=(t=d(t)).length;r<o;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,s=0,a=o.length;s<a;s++)if(o[s].fn===e&&o[s].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var s=i[r];if(s.ctx===n&&s.fn===e)return s.fn=l,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=l;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var r=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var u=o[s];u.fn.call(u.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var o=r(function(){this.off(t,e,n).off(t,o,n)},this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[s(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[s(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};D.addEventListener=D.on,D.removeEventListener=D.clearAllEventListeners=D.off,D.addOneTimeEventListener=D.once,D.fireEvent=D.fire,D.hasEventListeners=D.listens;var M=S.extend(D);function A(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var P=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function N(t,e,n){return t instanceof A?t:v(t)?new A(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new A(t.x,t.y):new A(t,e,n)}function O(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function I(t,e){return!t||t instanceof O?t:new O(t,e)}function R(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function j(t,e){return t instanceof R?t:new R(t,e)}function F(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function q(t,e,n){return t instanceof F?t:v(t)&&"object"!=typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,n)}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(t){return this.clone()._add(N(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(N(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new A(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new A(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=P(this.x),this.y=P(this.y),this},distanceTo:function(t){var e=(t=N(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=N(t)).x===this.x&&t.y===this.y},contains:function(t){return t=N(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},O.prototype={extend:function(t){return t=N(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new A((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new A(this.min.x,this.max.y)},getTopRight:function(){return new A(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof A?N(t):I(t))instanceof O?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=I(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,s=r.y>=e.y&&i.y<=n.y;return o&&s},overlaps:function(t){t=I(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,s=r.y>e.y&&i.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)}},R.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof F)e=t,n=t;else{if(!(t instanceof R))return t?this.extend(q(t)||j(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new R(new F(e.lat-i,e.lng-r),new F(n.lat+i,n.lng+r))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof F||"lat"in t?q(t):j(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof R?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,s=r.lng>=e.lng&&i.lng<=n.lng;return o&&s},overlaps:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,s=r.lng>e.lng&&i.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=j(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(t,e){if(!t)return!1;t=q(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(void 0===e?1e-9:e)},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,q(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var B={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),i=this.transformation.transform(e.min,n),r=this.transformation.transform(e.max,n);return new O(i,r)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?u(t.lat,this.wrapLat,!0):t.lat,i=t.alt;return new F(n,e,i)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var o=t.getSouthWest(),s=t.getNorthEast(),a=new F(o.lat-i,o.lng-r),u=new F(s.lat-i,s.lng-r);return new R(a,u)}},U=n({},B,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),a=o*o+Math.cos(i)*Math.cos(r)*s*s,u=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*u}}),z={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new A(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new O([-t,-t],[t,t])}()};function V(t,e,n,i){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function H(t,e,n,i){return new V(t,e,n,i)}V.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new A((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var W=n({},U,{code:"EPSG:3857",projection:z,transformation:function(){var t=.5/(Math.PI*z.R);return H(t,.5,-t,.5)}()}),Z=n({},W,{code:"EPSG:900913"});function G(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t,e){var n,i,r,o,s,a,u="";for(n=0,r=t.length;n<r;n++){for(s=t[n],i=0,o=s.length;i<o;i++)a=s[i],u+=(i?"L":"M")+a.x+" "+a.y;u+=e?Ct?"z":"x":""}return u||"M0 0"}var X=document.documentElement.style,K="ActiveXObject"in window,J=K&&!document.addEventListener,Q="msLaunchUri"in navigator&&!("documentMode"in document),tt=Lt("webkit"),et=Lt("android"),nt=Lt("android 2")||Lt("android 3"),it=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=et&&Lt("Google")&&it<537&&!("AudioNode"in window),ot=!!window.opera,st=Lt("chrome"),at=Lt("gecko")&&!tt&&!ot&&!K,ut=!st&&Lt("safari"),lt=Lt("phantom"),ct="OTransition"in X,ht=0===navigator.platform.indexOf("Win"),dt=K&&"transition"in X,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nt,ft="MozPerspective"in X,mt=!window.L_DISABLE_3D&&(dt||pt||ft)&&!ct&&!lt,gt="undefined"!=typeof orientation||Lt("mobile"),vt=gt&&tt,yt=gt&&pt,_t=!window.PointerEvent&&window.MSPointerEvent,bt=!(!window.PointerEvent&&!_t),wt=!window.L_NO_TOUCH&&(bt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),xt=gt&&ot,$t=gt&&at,kt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Et=!!document.createElement("canvas").getContext,Ct=!(!document.createElementNS||!G("svg").createSVGRect),Tt=!Ct&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Lt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var St=(Object.freeze||Object)({ie:K,ielt9:J,edge:Q,webkit:tt,android:et,android23:nt,androidStock:rt,opera:ot,chrome:st,gecko:at,safari:ut,phantom:lt,opera12:ct,win:ht,ie3d:dt,webkit3d:pt,gecko3d:ft,any3d:mt,mobile:gt,mobileWebkit:vt,mobileWebkit3d:yt,msPointer:_t,pointer:bt,touch:wt,mobileOpera:xt,mobileGecko:$t,retina:kt,canvas:Et,svg:Ct,vml:Tt}),Dt=_t?"MSPointerDown":"pointerdown",Mt=_t?"MSPointerMove":"pointermove",At=_t?"MSPointerUp":"pointerup",Pt=_t?"MSPointerCancel":"pointercancel",Nt=["INPUT","SELECT","OPTION"],Ot={},It=!1,Rt=0;function jt(t,e,n,i){return"touchstart"===e?function(t,e,n){var i=r(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Nt.indexOf(t.target.tagName)<0))return;ne(t)}Ut(t,e)});t["_leaflet_touchstart"+n]=i,t.addEventListener(Dt,i,!1),It||(document.documentElement.addEventListener(Dt,Ft,!0),document.documentElement.addEventListener(Mt,qt,!0),document.documentElement.addEventListener(At,Bt,!0),document.documentElement.addEventListener(Pt,Bt,!0),It=!0)}(t,n,i):"touchmove"===e?function(t,e,n){var i=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Ut(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Mt,i,!1)}(t,n,i):"touchend"===e&&function(t,e,n){var i=function(t){Ut(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(At,i,!1),t.addEventListener(Pt,i,!1)}(t,n,i),this}function Ft(t){Ot[t.pointerId]=t,Rt++}function qt(t){Ot[t.pointerId]&&(Ot[t.pointerId]=t)}function Bt(t){delete Ot[t.pointerId],Rt--}function Ut(t,e){for(var n in t.touches=[],Ot)t.touches.push(Ot[n]);t.changedTouches=[t],e(t)}var zt=_t?"MSPointerDown":bt?"pointerdown":"touchstart",Vt=_t?"MSPointerUp":bt?"pointerup":"touchend",Ht="_leaflet_";function Wt(t,e,n){var i,r,o=!1,s=250;function a(t){var e;if(bt){if(!Q||"mouse"===t.pointerType)return;e=Rt}else e=t.touches.length;if(!(e>1)){var n=Date.now(),a=n-(i||n);r=t.touches?t.touches[0]:t,o=a>0&&a<=s,i=n}}function u(t){if(o&&!r.cancelBubble){if(bt){if(!Q||"mouse"===t.pointerType)return;var n,s,a={};for(s in r)n=r[s],a[s]=n&&n.bind?n.bind(r):n;r=a}r.type="dblclick",e(r),i=null}}return t[Ht+zt+n]=a,t[Ht+Vt+n]=u,t[Ht+"dblclick"+n]=e,t.addEventListener(zt,a,!1),t.addEventListener(Vt,u,!1),t.addEventListener("dblclick",e,!1),this}function Zt(t,e){var n=t[Ht+zt+e],i=t[Ht+Vt+e],r=t[Ht+"dblclick"+e];return t.removeEventListener(zt,n,!1),t.removeEventListener(Vt,i,!1),Q||t.removeEventListener("dblclick",r,!1),this}function Gt(t,e,n,i){if("object"==typeof e)for(var r in e)Kt(t,r,e[r],n);else for(var o=0,s=(e=d(e)).length;o<s;o++)Kt(t,e[o],n,i);return this}var Yt="_leaflet_events";function Xt(t,e,n,i){if("object"==typeof e)for(var r in e)Jt(t,r,e[r],n);else if(e)for(var o=0,s=(e=d(e)).length;o<s;o++)Jt(t,e[o],n,i);else{for(var a in t[Yt])Jt(t,a,t[Yt][a]);delete t[Yt]}return this}function Kt(t,e,n,i){var r=e+s(n)+(i?"_"+s(i):"");if(t[Yt]&&t[Yt][r])return this;var o=function(e){return n.call(i||t,e||window.event)},a=o;bt&&0===e.indexOf("touch")?jt(t,e,o,r):!wt||"dblclick"!==e||!Wt||bt&&st?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!1):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,he(t,e)&&a(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&et&&(o=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=ae&&n-ae;i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?ie(t):(ae=n,e(t))}(t,a)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o):Wt(t,o,r),t[Yt]=t[Yt]||{},t[Yt][r]=o}function Jt(t,e,n,i){var r=e+s(n)+(i?"_"+s(i):""),o=t[Yt]&&t[Yt][r];if(!o)return this;bt&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(Dt,i,!1):"touchmove"===e?t.removeEventListener(Mt,i,!1):"touchend"===e&&(t.removeEventListener(At,i,!1),t.removeEventListener(Pt,i,!1))}(t,e,r):!wt||"dblclick"!==e||!Zt||bt&&st?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",o,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o):Zt(t,r),t[Yt][r]=null}function Qt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,ce(t),this}function te(t){return Kt(t,"mousewheel",Qt),this}function ee(t){return Gt(t,"mousedown touchstart dblclick",Qt),Kt(t,"click",le),this}function ne(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ie(t){return ne(t),Qt(t),this}function re(t,e){if(!e)return new A(t.clientX,t.clientY);var n=e.getBoundingClientRect(),i=n.width/e.offsetWidth||1,r=n.height/e.offsetHeight||1;return new A(t.clientX/i-n.left-e.clientLeft,t.clientY/r-n.top-e.clientTop)}var oe=ht&&st?2*window.devicePixelRatio:at?window.devicePixelRatio:1;function se(t){return Q?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/oe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var ae,ue={};function le(t){ue[t.type]=!0}function ce(t){var e=ue[t.type];return ue[t.type]=!1,e}function he(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var de,pe,fe,me,ge,ve=(Object.freeze||Object)({on:Gt,off:Xt,stopPropagation:Qt,disableScrollPropagation:te,disableClickPropagation:ee,preventDefault:ne,stop:ie,getMousePosition:re,getWheelDelta:se,fakeStop:le,skipped:ce,isExternalTarget:he,addListener:Gt,removeListener:Xt}),ye=Ne(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),_e=Ne(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),be="webkitTransition"===_e||"OTransition"===_e?_e+"End":"transitionend";function we(t){return"string"==typeof t?document.getElementById(t):t}function xe(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function $e(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function ke(t){var e=t.parentNode;e&&e.removeChild(t)}function Ee(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ce(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function Te(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Le(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=Ae(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function Se(t,e){if(void 0!==t.classList)for(var n=d(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!Le(t,e)){var o=Ae(t);Me(t,(o?o+" ":"")+e)}}function De(t,e){void 0!==t.classList?t.classList.remove(e):Me(t,h((" "+Ae(t)+" ").replace(" "+e+" "," ")))}function Me(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function Ae(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function Pe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function Ne(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Oe(t,e,n){var i=e||new A(0,0);t.style[ye]=(dt?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function Ie(t,e){t._leaflet_pos=e,mt?Oe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Re(t){return t._leaflet_pos||new A(0,0)}if("onselectstart"in document)de=function(){Gt(window,"selectstart",ne)},pe=function(){Xt(window,"selectstart",ne)};else{var je=Ne(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);de=function(){if(je){var t=document.documentElement.style;fe=t[je],t[je]="none"}},pe=function(){je&&(document.documentElement.style[je]=fe,fe=void 0)}}function Fe(){Gt(window,"dragstart",ne)}function qe(){Xt(window,"dragstart",ne)}function Be(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ue(),me=t,ge=t.style.outline,t.style.outline="none",Gt(window,"keydown",Ue))}function Ue(){me&&(me.style.outline=ge,me=void 0,ge=void 0,Xt(window,"keydown",Ue))}var ze=(Object.freeze||Object)({TRANSFORM:ye,TRANSITION:_e,TRANSITION_END:be,get:we,getStyle:xe,create:$e,remove:ke,empty:Ee,toFront:Ce,toBack:Te,hasClass:Le,addClass:Se,removeClass:De,setClass:Me,getClass:Ae,setOpacity:Pe,testProp:Ne,setTransform:Oe,setPosition:Ie,getPosition:Re,disableTextSelection:de,enableTextSelection:pe,disableImageDrag:Fe,enableImageDrag:qe,preventOutline:Be,restoreOutline:Ue}),Ve=M.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=Re(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),Ie(this._el,n),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),He=M.extend({options:{crs:W,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(q(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=_e&&mt&&!xt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Gt(this._proxy,be,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(q(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i){void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan));var r=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(mt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(mt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=t instanceof A?t:this.latLngToContainerPoint(t),s=o.subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(s));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():j(t);var n=N(e.paddingTopLeft||e.padding||[0,0]),i=N(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),r),a=this.project(t.getNorthEast(),r),u=this.unproject(s.add(a).divideBy(2).add(o),r);return{center:u,zoom:r}},fitBounds:function(t,e){if(!(t=j(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=N(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ve,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){Se(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!mt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),s=this._zoom;t=q(t),e=void 0===e?s:e;var a=Math.max(o.x,o.y),u=a*this.getZoomScale(s,e),l=r.distanceTo(i)||1,c=1.42,h=c*c;function d(t){var e=t?-1:1,n=t?u:a,i=u*u-a*a+e*h*h*l*l,r=2*n*h*l,o=i/r,s=Math.sqrt(o*o+1)-o,c=s<1e-9?-18:Math.log(s);return c}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var m=d(0);function g(t){return a*(f(m)*function(t){return p(t)/f(t)}(m+c*t)-p(m))/h}var v=Date.now(),y=(d(1)-m)/c,_=n.duration?1e3*n.duration:1e3*y*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-v)/_,u=function(t){return 1-Math.pow(1-t,1.5)}(o)*y;o<=1?(this._flyToFrame=E(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(g(u)/l)),s),this.getScaleZoom(a/function(t){return a*(f(m)/f(m+c*t))}(u),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=j(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,j(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=e.divideBy(2).round(),s=i.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new F(e,n),r=i.toBounds(t.coords.accuracy),o=this._locateOptions;if(o.setView){var s=this.getBoundsZoom(r);this.setView(i,o.maxZoom?Math.min(s,o.maxZoom):s)}var a={latlng:i,bounds:r,timestamp:t.timestamp};for(var u in t.coords)"number"==typeof t.coords[u]&&(a[u]=t.coords[u]);this.fire("locationfound",a)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ke(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ke(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i=$e("div",n,e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new R(e,n)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=j(t),n=N(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),u=this.getSize().subtract(n),l=I(this.project(a,i),this.project(s,i)).getSize(),c=mt?this.options.zoomSnap:1,h=u.x/l.x,d=u.y/l.y,p=e?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(p,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new A(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new O(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(q(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(N(t),e)},layerPointToLatLng:function(t){var e=N(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(q(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(q(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(q(t),q(e))},containerPointToLayerPoint:function(t){return N(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return N(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(N(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(q(t)))},mouseEventToContainerPoint:function(t){return re(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=we(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Gt(e,"scroll",this._onScroll,this),this._containerId=s(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&mt,Se(t,"leaflet-container"+(wt?" leaflet-touch":"")+(kt?" leaflet-retina":"")+(J?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=xe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ie(this._mapPane,new A(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Se(t.markerPane,"leaflet-zoom-hide"),Se(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){Ie(this._mapPane,new A(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Ie(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[s(this._container)]=this;var e=t?Xt:Gt;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),mt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,a=!1;o;){if((n=this._targets[s(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(r&&!he(o,t))break;if(i.push(n),r)break}if(o===this._container)break;o=o.parentNode}return i.length||a||r||!he(o,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!ce(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||Be(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var r=n({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var o=i[0];"contextmenu"===e&&o.listens(e,!0)&&ne(t);var s={originalEvent:t};if("keypress"!==t.type){var a=o.getLatLng&&(!o._radius||o._radius<=10);s.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?o.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var u=0;u<i.length;u++)if(i[u].fire(e,s,!0),s.originalEvent._stopped||!1===i[u].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Re(this._mapPane)||new A(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return I([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new O(i.subtract(r),i.add(r)),s=this._getBoundsOffset(o,n,e);return s.round().equals([0,0])?t:this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new O(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=I(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max),s=this._rebound(r.x,-o.x),a=this._rebound(r.y,-o.y);return new A(s,a)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=mt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){De(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=$e("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=ye,n=this._proxy.style[e];Oe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();Oe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ke(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r)||(E(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&De(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),E(function(){this._moveEnd(!0)},this))}}),We=S.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return Se(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map?(ke(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ze=function(t){return new We(t)};He.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=$e("div",e+"control-container",this._container);function i(i,r){var o=e+i+" "+e+r;t[i+r]=$e("div",o,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ke(this._controlCorners[t]);ke(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ge=We.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return We.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(s(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Se(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(Se(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):De(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return De(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=$e("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ee(e),te(e);var i=this._form=$e("form",t+"-list");n&&(this._map.on("click",this.collapse,this),et||Gt(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=$e("a",t+"-toggle",e);r.href="#",r.title="Layers",wt?(Gt(r,"click",ie),Gt(r,"click",this.expand,this)):Gt(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=$e("div",t+"-base",i),this._separator=$e("div",t+"-separator",i),this._overlaysList=$e("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&s(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(r(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ee(this._baseLayersList),Ee(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(s(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),this._layerControlInputs.push(e),e.layerId=s(t.layer),Gt(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("div");n.appendChild(o),o.appendChild(e),o.appendChild(r);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Ye=We.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=$e("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=$e("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),ee(o),Gt(o,"click",ie),Gt(o,"click",r,this),Gt(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";De(this._zoomInButton,e),De(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&Se(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&Se(this._zoomInButton,e)}});He.mergeOptions({zoomControl:!0}),He.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ye,this.addControl(this.zoomControl))});var Xe=We.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=$e("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=$e("div",e,n)),t.imperial&&(this._iScale=$e("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Ke=We.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=$e("div","leaflet-control-attribution"),ee(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});He.mergeOptions({attributionControl:!0}),He.addInitHook(function(){this.options.attributionControl&&(new Ke).addTo(this)}),We.Layers=Ge,We.Zoom=Ye,We.Scale=Xe,We.Attribution=Ke,Ze.layers=function(t,e,n){return new Ge(t,e,n)},Ze.zoom=function(t){return new Ye(t)},Ze.scale=function(t){return new Xe(t)},Ze.attribution=function(t){return new Ke(t)};var Je=S.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Je.addTo=function(t,e){return t.addHandler(e,this),this};var Qe,tn={Events:D},en=wt?"touchstart mousedown":"mousedown",nn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},rn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},on=M.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){p(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Gt(this._dragStartTarget,en,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(on._dragging===this&&this.finishDrag(),Xt(this._dragStartTarget,en,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!Le(this._element,"leaflet-zoom-anim")&&!(on._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(on._dragging=this,this._preventOutline&&Be(this._element),Fe(),de(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new A(e.clientX,e.clientY),Gt(document,rn[t.type],this._onMove,this),Gt(document,nn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new A(e.clientX,e.clientY),i=n.subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(ne(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Re(this._element).subtract(i),Se(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,C(this._animRequest),this._lastEvent=t,this._animRequest=E(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Ie(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in De(document.body,"leaflet-dragging"),this._lastTarget&&(De(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rn)Xt(document,rn[t],this._onMove,this),Xt(document,nn[t],this._onUp,this);qe(),pe(),this._moved&&this._moving&&(C(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,on._dragging=!1}});function sn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,r,o){var s,a,u,l=0;for(a=r+1;a<=o-1;a++)(u=dn(e[a],e[r],e[o],!0))>l&&(s=a,l=u);l>i&&(n[s]=1,t(e,n,i,r,s),t(e,n,i,s,o))}(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}(t=function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)hn(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<o-1&&n.push(t[o-1]),n}(t,n),n)}function an(t,e,n){return Math.sqrt(dn(t,e,n,!0))}function un(t,e,n,i,r){var o,s,a,u=i?Qe:cn(t,n),l=cn(e,n);for(Qe=l;;){if(!(u|l))return[t,e];if(u&l)return!1;s=ln(t,e,o=u||l,n,r),a=cn(s,n),o===u?(t=s,u=a):(e=s,l=a)}}function ln(t,e,n,i,r){var o,s,a=e.x-t.x,u=e.y-t.y,l=i.min,c=i.max;return 8&n?(o=t.x+a*(c.y-t.y)/u,s=c.y):4&n?(o=t.x+a*(l.y-t.y)/u,s=l.y):2&n?(o=c.x,s=t.y+u*(c.x-t.x)/a):1&n&&(o=l.x,s=t.y+u*(l.x-t.x)/a),new A(o,s,r)}function cn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function hn(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function dn(t,e,n,i){var r,o=e.x,s=e.y,a=n.x-o,u=n.y-s,l=a*a+u*u;return l>0&&((r=((t.x-o)*a+(t.y-s)*u)/l)>1?(o=n.x,s=n.y):r>0&&(o+=a*r,s+=u*r)),a=t.x-o,u=t.y-s,i?a*a+u*u:new A(o,s)}function pn(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function fn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),pn(t)}var mn=(Object.freeze||Object)({simplify:sn,pointToSegmentDistance:an,closestPointOnSegment:function(t,e,n){return dn(t,e,n)},clipSegment:un,_getEdgeIntersection:ln,_getBitCode:cn,_sqClosestPointOnSegment:dn,isFlat:pn,_flat:fn});function gn(t,e,n){var i,r,o,s,a,u,l,c,h,d=[1,4,2,8];for(r=0,l=t.length;r<l;r++)t[r]._code=cn(t[r],e);for(s=0;s<4;s++){for(c=d[s],i=[],r=0,l=t.length,o=l-1;r<l;o=r++)a=t[r],u=t[o],a._code&c?u._code&c||((h=ln(u,a,c,e,n))._code=cn(h,e),i.push(h)):(u._code&c&&((h=ln(u,a,c,e,n))._code=cn(h,e),i.push(h)),i.push(a));t=i}return t}var vn=(Object.freeze||Object)({clipPolygon:gn}),yn={project:function(t){return new A(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new O([-180,-90],[180,90])},_n={R:6378137,R_MINOR:6356752.314245179,bounds:new O([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),s=o*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),o/2);return i=-n*Math.log(Math.max(a,1e-10)),new A(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),s=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(s),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=o*Math.sin(a),e=Math.pow((1-e)/(1+e),o/2),l=Math.PI/2-2*Math.atan(s*e)-a,a+=l;return new F(a*n,t.x*n/i)}},bn=(Object.freeze||Object)({LonLat:yn,Mercator:_n,SphericalMercator:z}),wn=n({},U,{code:"EPSG:3395",projection:_n,transformation:function(){var t=.5/(Math.PI*_n.R);return H(t,.5,-t,.5)}()}),xn=n({},U,{code:"EPSG:4326",projection:yn,transformation:H(1/180,1,-1/180,.5)}),$n=n({},B,{projection:yn,transformation:H(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});B.Earth=U,B.EPSG3395=wn,B.EPSG3857=W,B.EPSG900913=Z,B.EPSG4326=xn,B.Simple=$n;var kn=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[s(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[s(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});He.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=s(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=s(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&s(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[s(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=s(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var En=kn.extend({initialize:function(t,e){var n,i;if(p(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return s(t)}}),Cn=En.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),En.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),En.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new R;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Tn=S.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=N(i),o=N("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return kt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Ln=Tn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Ln.imagePath||(Ln.imagePath=this._detectIconPath()),(this.options.imagePath||Ln.imagePath)+Tn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=$e("div","leaflet-default-icon-path",document.body),e=xe(t,"background-image")||xe(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Sn=Je.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new on(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Se(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&De(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=L.DomUtil.getPosition(e._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),u=I(s.min._subtract(a).add(r),s.max._subtract(a).subtract(r));if(!u.contains(o)){var l=N((Math.max(u.max.x,o.x)-u.max.x)/(s.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(s.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(s.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(s.min.y-u.min.y)).multiplyBy(i);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),L.DomUtil.setPosition(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=Re(e._icon),r=e._map.layerPointToLatLng(i);n&&Ie(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Dn=kn.extend({options:{icon:new Ln,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){p(this,e),this._latlng=q(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=q(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),Se(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(Se(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ke(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ke(this._shadow),this._shadow=null},_setPos:function(t){Ie(this._icon,t),this._shadow&&Ie(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Sn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Sn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;Pe(this._icon,t),this._shadow&&Pe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Mn=kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),An=Mn.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=q(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=q(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Mn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new O(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Pn=An.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=n({},i,{radius:e})),p(this,e),this._latlng=q(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Mn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===U.distance){var r=Math.PI/180,o=this._mRadius/U.R/r,s=n.project([e+o,t]),a=n.project([e-o,t]),u=s.add(a).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(l*r))/(Math.cos(e*r)*Math.cos(l*r)))/r;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-n.project([l,t-c]).x,this._radiusY=u.y-s.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),Nn=Mn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=dn,s=0,a=this._parts.length;s<a;s++)for(var u=this._parts[s],l=1,c=u.length;l<c;l++){e=u[l-1],n=u[l];var h=o(t,e,n,!0);h<i&&(i=h,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a=this._rings[0],u=a.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,i=0;t<u-1;t++)if(r=a[t],o=a[t+1],n=r.distanceTo(o),(i+=n)>e)return s=(i-e)/n,this._map.layerPointToLatLng([o.x-s*(o.x-r.x),o.y-s*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=q(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new R,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return pn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=pn(t),i=0,r=t.length;i<r;i++)n?(e[i]=q(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new A(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof F,s=t.length;if(o){for(r=[],i=0;i<s;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,o,s,a,u=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(a=this._rings[e],n=0,o=a.length;n<o-1;n++)(s=un(a[n],a[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(s[0]),s[1]===a[n+1]&&n!==o-2||(u[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=sn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,s,a,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(a=this._parts[n],i=0,s=a.length,r=s-1;i<s;r=i++)if((e||0!==i)&&an(t,a[r],a[i])<=u)return!0;return!1}});Nn._flat=fn;var On=Nn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a,u,l=this._rings[0],c=l.length;if(!c)return null;for(o=s=a=0,t=0,e=c-1;t<c;e=t++)n=l[t],i=l[e],r=n.y*i.x-i.y*n.x,s+=(n.x+i.x)*r,a+=(n.y+i.y)*r,o+=3*r;return u=0===o?l[0]:[s/o,a/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=Nn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof F&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Nn.prototype._setLatLngs.call(this,t),pn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return pn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new A(e,e);if(t=new O(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=gn(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,s,a,u,l=!1;if(!this._pxBounds.contains(t))return!1;for(r=0,a=this._parts.length;r<a;r++)for(e=this._parts[r],o=0,u=e.length,s=u-1;o<u;s=o++)n=e[o],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||Nn.prototype._containsPoint.call(this,t,!0)}}),In=Cn.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=v(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var s=Rn(t,o);return s?(s.feature=zn(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}});function Rn(t,e){var n,i,r,o,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||jn;if(!a&&!s)return null;switch(s.type){case"Point":return n=c(a),l?l(t,n):new Dn(n);case"MultiPoint":for(r=0,o=a.length;r<o;r++)n=c(a[r]),u.push(l?l(t,n):new Dn(n));return new Cn(u);case"LineString":case"MultiLineString":return i=Fn(a,"LineString"===s.type?0:1,c),new Nn(i,e);case"Polygon":case"MultiPolygon":return i=Fn(a,"Polygon"===s.type?1:2,c),new On(i,e);case"GeometryCollection":for(r=0,o=s.geometries.length;r<o;r++){var h=Rn({geometry:s.geometries[r],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new Cn(u);default:throw new Error("Invalid GeoJSON object.")}}function jn(t){return new F(t[1],t[0],t[2])}function Fn(t,e,n){for(var i,r=[],o=0,s=t.length;o<s;o++)i=e?Fn(t[o],e-1,n):(n||jn)(t[o]),r.push(i);return r}function qn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function Bn(t,e,n,i){for(var r=[],o=0,s=t.length;o<s;o++)r.push(e?Bn(t[o],e-1,n,i):qn(t[o],i));return!e&&n&&r.push(r[0]),r}function Un(t,e){return t.feature?n({},t.feature,{geometry:e}):zn(e)}function zn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Vn={toGeoJSON:function(t){return Un(this,{type:"Point",coordinates:qn(this.getLatLng(),t)})}};function Hn(t,e){return new In(t,e)}Dn.include(Vn),Pn.include(Vn),An.include(Vn),Nn.include({toGeoJSON:function(t){var e=!pn(this._latlngs),n=Bn(this._latlngs,e?1:0,!1,t);return Un(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),On.include({toGeoJSON:function(t){var e=!pn(this._latlngs),n=e&&!pn(this._latlngs[0]),i=Bn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Un(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),En.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Un(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var o=zn(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}}),n?Un(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Wn=Hn,Zn=kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=j(e),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ke(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Ce(this._image),this},bringToBack:function(){return this._map&&Te(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=j(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:$e("img");Se(e,"leaflet-image-layer"),this._zoomAnimated&&Se(e,"leaflet-zoom-animated"),this.options.className&&Se(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Oe(this._image,n,e)},_reset:function(){var t=this._image,e=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();Ie(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Pe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Gn=Zn.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:$e("video");if(Se(e,"leaflet-image-layer"),this._zoomAnimated&&Se(e,"leaflet-zoom-animated"),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=r(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],o=0;o<n.length;o++)i.push(n[o].src);this._url=n.length>0?i:[e.src]}else{v(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var s=0;s<this._url.length;s++){var a=$e("source");a.src=this._url[s],e.appendChild(a)}}}}),Yn=kn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Pe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Pe(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(Pe(this._container,0),this._removeTimeout=setTimeout(r(ke,void 0,this._container),200)):ke(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=q(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ce(this._container),this},bringToBack:function(){return this._map&&Te(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=N(this.options.offset),n=this._getAnchor();this._zoomAnimated?Ie(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),Xn=Yn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Yn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mn||this._source.on("preclick",Qt))},onRemove:function(t){Yn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mn||this._source.off("preclick",Qt))},getEvents:function(){var t=Yn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=$e("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=$e("div",t+"-content-wrapper",e);if(this._contentNode=$e("div",t+"-content",n),ee(n),te(this._contentNode),Gt(n,"contextmenu",Qt),this._tipContainer=$e("div",t+"-tip-container",e),this._tip=$e("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=$e("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Gt(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight;r&&i>r?(e.height=r+"px",Se(t,"leaflet-popup-scrolled")):De(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();Ie(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(xe(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new A(this._containerLeft,-n-this._containerBottom);r._add(Re(this._container));var o=t.layerPointToContainerPoint(r),s=N(this.options.autoPanPadding),a=N(this.options.autoPanPaddingTopLeft||s),u=N(this.options.autoPanPaddingBottomRight||s),l=t.getSize(),c=0,h=0;o.x+i+u.x>l.x&&(c=o.x+i-l.x+u.x),o.x-c-a.x<0&&(c=o.x-a.x),o.y+n+u.y>l.y&&(h=o.y+n-l.y+u.y),o.y-h-a.y<0&&(h=o.y-a.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),ie(t)},_getAnchor:function(){return N(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});He.mergeOptions({closePopupOnClick:!0}),He.include({openPopup:function(t,e,n){return t instanceof Xn||(t=new Xn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),kn.include({bindPopup:function(t,e){return t instanceof Xn?(p(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Xn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof kn||(e=t,t=this),t instanceof Cn)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(ie(t),e instanceof Mn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Kn=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Yn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Yn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Yn.prototype.getEvents.call(this);return wt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=$e("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),r=e.layerPointToContainerPoint(t),o=this.options.direction,s=n.offsetWidth,a=n.offsetHeight,u=N(this.options.offset),l=this._getAnchor();"top"===o?t=t.add(N(-s/2+u.x,-a+u.y+l.y,!0)):"bottom"===o?t=t.subtract(N(s/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(N(s/2+u.x,a/2-l.y+u.y,!0)):"right"===o||"auto"===o&&r.x<i.x?(o="right",t=t.add(N(u.x+l.x,l.y-a/2+u.y,!0))):(o="left",t=t.subtract(N(s+l.x-u.x,a/2-l.y-u.y,!0))),De(n,"leaflet-tooltip-right"),De(n,"leaflet-tooltip-left"),De(n,"leaflet-tooltip-top"),De(n,"leaflet-tooltip-bottom"),Se(n,"leaflet-tooltip-"+o),Ie(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Pe(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return N(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});He.include({openTooltip:function(t,e,n){return t instanceof Kn||(t=new Kn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),kn.include({bindTooltip:function(t,e){return t instanceof Kn?(p(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Kn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),wt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof kn||(e=t,t=this),t instanceof Cn)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(Se(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(De(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Jn=Tn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=N(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Tn.Default=Ln;var Qn=kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ke(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ce(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Te(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof A?t:new A(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!J){Pe(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);Pe(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(C(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=$e("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ke(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=$e("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ke(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),s=n-1,a=new A(+r,+o);a.z=+s;var u=this._tileCoordsToKey(a),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),s>i&&this._retainParent(r,o,s,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var s=new A(r,o);s.z=n+1;var a=this._tileCoordsToKey(s),u=this._tiles[a];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();mt?Oe(t.el,r,i):Ie(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new O(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),s=[],a=this.options.keepBuffer,u=new O(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new A(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var p=new A(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:s.push(p)}}if(s.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n),o=e.unproject(i,t.z),s=e.unproject(r,t.z);return[o,s]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new R(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new A(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(rt||e.el.setAttribute("src",_),ke(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Se(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,J&&this.options.opacity<1&&Pe(t,this.options.opacity),et&&!nt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&E(r(this._tileReady,this,t,null,o)),Ie(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(Pe(n.el,0),C(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(Se(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new A(this._wrapX?u(t.x,this._wrapX):t.x,this._wrapY?u(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new O(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),ti=Qn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&kt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),et||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Gt(n,"load",r(this._tileOnLoad,this,e,n)),Gt(n,"error",r(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:kt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){J?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset;return n&&(t=e-t),t+i},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=_,ke(e),delete this._tiles[t]))}});function ei(t,e){return new ti(t,e)}var ni=ti.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var r in e)r in this.options||(i[r]=e[r]);var o=(e=p(this,e)).detectRetina&&kt?2:1,s=this.getTileSize();i.width=s.x*o,i.height=s.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ti.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=I(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,s=(this._wmsVersion>=1.3&&this._crs===xn?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),a=L.TileLayer.prototype.getTileUrl.call(this,t);return a+f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});ti.WMS=ni,ei.wms=function(t,e){return new ni(t,e)};var ii=kn.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=Re(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),s=this._map.project(t,e),a=s.subtract(o),u=r.multiplyBy(-n).add(i).add(r).subtract(a);mt?Oe(this._container,u,n):Ie(this._container,u)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new O(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ri=ii.extend({getEvents:function(){var t=ii.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ii.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Gt(t,"mousemove",a(this._onMouseMove,32,this),this),Gt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Gt(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,ke(this._container),Xt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},ii.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=kt?2:1;Ie(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",kt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ii.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[s(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,s=t._parts,a=s.length,u=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,u.beginPath(),n=0;n<a;n++){for(i=0,r=s[n].length;i<r;i++)o=s[n][i],u[i?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(le(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(De(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(Se(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}});function oi(t){return Et?new ri(t):null}var si=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ai={_initContainer:function(){this._container=$e("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ii.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=si("shape");Se(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=si("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ke(e),t.removeInteractiveTarget(e),delete this._layers[s(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=si("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=si("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Ce(t._container)},_bringToBack:function(t){Te(t._container)}},ui=Tt?si:G,li=ii.extend({getEvents:function(){var t=ii.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=ui("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ui("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ke(this._container),Xt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ii.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),Ie(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=ui("path");t.options.className&&Se(e,t.options.className),t.options.interactive&&Se(e,"leaflet-interactive"),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ke(t._path),t.removeInteractiveTarget(t._path),delete this._layers[s(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Y(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i=Math.max(Math.round(t._radiusY),1)||n,r="a"+n+","+i+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Ce(t._path)},_bringToBack:function(t){Te(t._path)}});function ci(t){return Ct||Tt?new li(t):null}Tt&&li.include(ai),He.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&oi()||ci()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=li&&ci({pane:t})||ri&&oi({pane:t}),this._paneRenderers[t]=e),e}});var hi=On.extend({initialize:function(t,e){On.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=j(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});li.create=ui,li.pointsToPath=Y,In.geometryToLayer=Rn,In.coordsToLatLng=jn,In.coordsToLatLngs=Fn,In.latLngToCoords=qn,In.latLngsToCoords=Bn,In.getFeature=Un,In.asFeature=zn,He.mergeOptions({boxZoom:!0});var di=Je.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Gt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ke(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),de(),Fe(),this._startPoint=this._map.mouseEventToContainerPoint(t),Gt(document,{contextmenu:ie,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=$e("div","leaflet-zoom-box",this._container),Se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new O(this._point,this._startPoint),n=e.getSize();Ie(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ke(this._box),De(this._container,"leaflet-crosshair")),pe(),qe(),Xt(document,{contextmenu:ie,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});He.addInitHook("addHandler","boxZoom",di),He.mergeOptions({doubleClickZoom:!0});var pi=Je.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});He.addInitHook("addHandler","doubleClickZoom",pi),He.mergeOptions({dragging:!0,inertia:!nt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var fi=Je.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new on(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){De(this._map._container,"leaflet-grab"),De(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=I(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=r.multiplyBy(s/o),u=a.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),c=a.multiplyBy(l/u),h=l/(n.inertiaDeceleration*s),d=c.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),E(function(){e.panBy(d,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});He.addInitHook("addHandler","dragging",fi),He.mergeOptions({keyboard:!0,keyboardPanDelta:80});var mi=Je.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Gt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Gt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=N(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}ie(t)}}});He.addInitHook("addHandler","keyboard",mi),He.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var gi=Je.extend({addHooks:function(){Gt(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xt(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=se(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),ie(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,s=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});He.addInitHook("addHandler","scrollWheelZoom",gi),He.mergeOptions({tap:!0,tapTolerance:15});var vi=Je.extend({addHooks:function(){Gt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(ne(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new A(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&Se(n,"leaflet-active"),this._holdTimeout=setTimeout(r(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Gt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Xt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&De(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new A(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});wt&&!bt&&He.addInitHook("addHandler","tap",vi),He.mergeOptions({touchZoom:wt&&!nt,bounceAtZoomLimits:!0});var yi=Je.extend({addHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),Gt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){De(this._map._container,"leaflet-touch-zoom"),Xt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Gt(document,"touchmove",this._onTouchMove,this),Gt(document,"touchend",this._onTouchEnd,this),ne(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var a=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=E(a,this,!0),ne(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),Xt(document,"touchmove",this._onTouchMove),Xt(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});He.addInitHook("addHandler","touchZoom",yi),He.BoxZoom=di,He.DoubleClickZoom=pi,He.Drag=fi,He.Keyboard=mi,He.ScrollWheelZoom=gi,He.Tap=vi,He.TouchZoom=yi;var _i=window.L;window.L=t,Object.freeze=e,t.version="1.3.1",t.noConflict=function(){return window.L=_i,this},t.Control=We,t.control=Ze,t.Browser=St,t.Evented=M,t.Mixin=tn,t.Util=T,t.Class=S,t.Handler=Je,t.extend=n,t.bind=r,t.stamp=s,t.setOptions=p,t.DomEvent=ve,t.DomUtil=ze,t.PosAnimation=Ve,t.Draggable=on,t.LineUtil=mn,t.PolyUtil=vn,t.Point=A,t.point=N,t.Bounds=O,t.bounds=I,t.Transformation=V,t.transformation=H,t.Projection=bn,t.LatLng=F,t.latLng=q,t.LatLngBounds=R,t.latLngBounds=j,t.CRS=B,t.GeoJSON=In,t.geoJSON=Hn,t.geoJson=Wn,t.Layer=kn,t.LayerGroup=En,t.layerGroup=function(t,e){return new En(t,e)},t.FeatureGroup=Cn,t.featureGroup=function(t){return new Cn(t)},t.ImageOverlay=Zn,t.imageOverlay=function(t,e,n){return new Zn(t,e,n)},t.VideoOverlay=Gn,t.videoOverlay=function(t,e,n){return new Gn(t,e,n)},t.DivOverlay=Yn,t.Popup=Xn,t.popup=function(t,e){return new Xn(t,e)},t.Tooltip=Kn,t.tooltip=function(t,e){return new Kn(t,e)},t.Icon=Tn,t.icon=function(t){return new Tn(t)},t.DivIcon=Jn,t.divIcon=function(t){return new Jn(t)},t.Marker=Dn,t.marker=function(t,e){return new Dn(t,e)},t.TileLayer=ti,t.tileLayer=ei,t.GridLayer=Qn,t.gridLayer=function(t){return new Qn(t)},t.SVG=li,t.svg=ci,t.Renderer=ii,t.Canvas=ri,t.canvas=oi,t.Path=Mn,t.CircleMarker=An,t.circleMarker=function(t,e){return new An(t,e)},t.Circle=Pn,t.circle=function(t,e,n){return new Pn(t,e,n)},t.Polyline=Nn,t.polyline=function(t,e){return new Nn(t,e)},t.Polygon=On,t.polygon=function(t,e){return new On(t,e)},t.Rectangle=hi,t.rectangle=function(t,e){return new hi(t,e)},t.Map=He,t.map=function(t,e){return new He(t,e)}}(e)},function(t,e){!function(t,e,n){L.drawVersion="1.0.2",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e);var n=L.version.split(".");1===parseInt(n[0],10)&&parseInt(n[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,n=e.getLatLngs(),i=n.splice(-1,1)[0];this._poly.setLatLngs(n),this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(i,!1)}},addVertex:function(t){this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(t,!0))},completeShape:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);!this.options.allowIntersection&&e||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),n=this._map.layerPointToLatLng(e);this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(e),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,n=e.clientX,i=e.clientY;this._startPoint.call(this,n,i)}},_startPoint:function(t,e){this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){var e=t.originalEvent,n=e.clientX,i=e.clientY;this._endPoint.call(this,n,i,t),this._clickHandled=null},_endPoint:function(e,n,i){if(this._mouseDownOrigin){var r=L.point(e,n).distanceTo(this._mouseDownOrigin),o=this._calculateFinishDistance(i.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(i.latlng),this._finishShape()):o<10&&L.Browser.touch?this._finishShape():Math.abs(r)<9*(t.devicePixelRatio||1)&&this.addVertex(i.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,n,i=t.originalEvent;!i.touches||!i.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=i.touches[0].clientX,n=i.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,n),this._endPoint.call(this,e,n,t),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t){var e;if(this._markers.length>0){var n;if(this.type===L.Draw.Polyline.TYPE)n=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;n=this._markers[0]}var i=this._map.latLngToContainerPoint(n.getLatLng()),r=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),o=this._map.latLngToContainerPoint(r.getLatLng());e=i.distanceTo(o)}else e=1/0;return e},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var n,i,r,o=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),s=this.options.guidelineDistance,a=this.options.maxGuideLineLength,u=o>a?o-a:s;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));u<o;u+=this.options.guidelineDistance)n=u/o,i={x:Math.floor(t.x*(1-n)+n*e.x),y:Math.floor(t.y*(1-n)+n*e.y)},(r=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(r,i)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,n=this._guidesContainer.childNodes.length;e<n;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,n=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=n?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var n,i,r=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(n=r-(e?2:1),i=L.GeometryUtil.isVersion07x()?t.distanceTo(this._markers[n].getLatLng())*(this.options.factor||1):this._map.distance(t,this._markers[n].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=i*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();return t=L.GeometryUtil.isVersion07x()?n&&e&&e.distanceTo?this._measurementRunningTotal+e.distanceTo(n)*(this.options.factor||1):this._measurementRunningTotal||0:n&&e?this._measurementRunningTotal+this._map.distance(e,n)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(t=L.drawLocal.draw.handlers.polygon.tooltip.cont,e=this._getMeasurementString()):(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area,e="";return t||this.options.showLength?(this.options.showLength&&(e=L.Draw.Polyline.prototype._getMeasurementString.call(this)),t&&(e+="<br>"+L.GeometryUtil.readableArea(t,this.options.metric,this.options.precision)),e):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var n;!this.options.allowIntersection&&this.options.showArea&&(n=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(n)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),e.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),L.DomEvent.off(e,"touchend",this._onMouseUp,this),e.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).on(e,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!0},metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(t){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}(t.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,n,i=L.Draw.SimpleShape.prototype._getTooltipText.call(this),r=this._shape,o=this.options.showArea;return r&&(t=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),n=o?L.GeometryUtil.readableArea(e,this.options.metric):""),{text:i.text,subtext:n}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=this._createMarker(e),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(t){return new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},_fireCreatedEvent:function(){var t=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)},_createMarker:function(t){return new L.CircleMarker(t,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){if(L.GeometryUtil.isVersion07x())var e=this._startLatLng.distanceTo(t);else e=this._map.distance(this._startLatLng,t);this._shape?this._shape.setRadius(e):(this._shape=new L.Circle(this._startLatLng,e,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,n=t.latlng,i=this.options.showRadius,r=this.options.metric;if(this._tooltip.updatePosition(n),this._isDrawing){this._drawShape(n),e=this._shape.getRadius().toFixed(1);var o="";i&&(o=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,r,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:o})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display="")},_offsetMarker:function(t,e){var n=parseInt(t.style.marginTop,10)-e,i=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=i+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(t){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(t){t.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t){t.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t){t.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this._poly.options.poly))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t,e,n){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,n&&n.drawError&&(n.drawError=L.Util.extend({},this.options.drawError,n.drawError)),this._latlngs=e,L.setOptions(this,n)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t=this._poly,e=t._path;t instanceof L.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1)),e&&t.options.editing.className&&(t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly,e=t._path;e&&t.options.editing.className&&(t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,n,i,r,o,s=this._defaultShape();for(t=0,n=s.length;t<n;t++)(i=this._createMarker(s[t],t)).on("click",this._onMarkerClick,this),i.on("contextmenu",this._onContextMenu,this),this._markers.push(i);for(t=0,e=n-1;t<n;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(r=this._markers[e],o=this._markers[t],this._createMiddleMarker(r,o),this._updatePrevNext(r,o))},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return n._origLatLng=t,n._index=e,n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(n),n},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t){var e=t.target,n=this._poly;if(L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),n.options.poly){var i=n._map._editTooltip;if(!n.options.poly.allowIntersection&&n.intersects()){var r=n.options.color;n.setStyle({color:this.options.drawError.color}),0!==L.version.indexOf("0.7")&&e.dragging._draggable._onUp(t),this._onMarkerClick(t),i&&i.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){n.setStyle({color:r}),i&&i.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var o=this._poly.getLatLngs();this._poly._convertLatLngs(o,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,n=t.target;this._defaultShape().length<e||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._markerGroup.removeLayer(n._middleLeft),n._middleRight&&this._markerGroup.removeLayer(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(t){var e=t.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:e,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e),i=t.target;L.extend(i._origLatLng,n),i._middleLeft&&i._middleLeft.setLatLng(this._getMiddleLatLng(i._prev,i)),i._middleRight&&i._middleRight.setLatLng(this._getMiddleLatLng(i,i._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(n){n._index>t&&(n._index+=e)})},_createMiddleMarker:function(t,e){var n,i,r,o=this._getMiddleLatLng(t,e),s=this._createMarker(o);s.setOpacity(.6),t._middleRight=e._middleLeft=s,i=function(){s.off("touchmove",i,this);var r=e._index;s._index=r,s.off("click",n,this).on("click",this._onMarkerClick,this),o.lat=s.getLatLng().lat,o.lng=s.getLatLng().lng,this._spliceLatLngs(r,0,o),this._markers.splice(r,0,s),s.setOpacity(1),this._updateIndexes(r,1),e._index++,this._updatePrevNext(t,s),this._updatePrevNext(s,e),this._poly.fire("editstart")},r=function(){s.off("dragstart",i,this),s.off("dragend",r,this),s.off("touchmove",i,this),this._createMiddleMarker(t,s),this._createMiddleMarker(s,e)},n=function(){i.call(this),r.call(this),this._fireEdit()},s.on("click",n,this).on("dragstart",i,this).on("dragend",r,this).on("touchmove",i,this),this._markerGroup.addLayer(s)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var n=this._poly._map,i=n.project(t.getLatLng()),r=n.project(e.getLatLng());return n.unproject(i._add(r)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,n=e.getLatLng();e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),"function"==typeof this._getCorners){var e=this._getCorners(),n=t.target,i=n._cornerIndex;n.setOpacity(0),this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)}this._shape.fire("editstart")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e);return t.target===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),!1},_onTouchEnd:function(t){t.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;e<n;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),n=t.target._cornerIndex;this._oppositeCorner=e[(n+2)%4],this._toggleCornerMarkers(0,n)},_onMarkerDragEnd:function(t){var e,n=t.target;n===this._moveMarker&&(e=this._shape.getBounds().getCenter(),n.setLatLng(e)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),i=this._shape.getBounds().getCenter(),r=[],o=0,s=n.length;o<s;o++)e=[n[o].lat-i.lat,n[o].lng-i.lng],r.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(r),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(t){if(this._resizeMarkers.length){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e)}this._shape.setLatLng(t),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(t);return this._map.unproject([n.x+e,n.y-e])},_resize:function(t){var e=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=e.distanceTo(t):radius=this._map.distance(e,t),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(t,e){var n={};if(void 0!==t.touches){if(!t.touches.length)return;n=t.touches[0]}else{if("touch"!==t.pointerType)return;if(n=t,!this._filterClick(t))return}var i=this._map.mouseEventToContainerPoint(n),r=this._map.mouseEventToLayerPoint(n),o=this._map.layerPointToLatLng(r);this._map.fire(e,{latlng:o,layerPoint:r,containerPoint:i,pageX:n.pageX,pageY:n.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,n=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){this._map._loaded&&this._touchEvent(t,"touchstart")},_onTouchEnd:function(t){this._map._loaded&&this._touchEvent(t,"touchend")},_onTouchCancel:function(t){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(t,e)}},_onTouchLeave:function(t){this._map._loaded&&this._touchEvent(t,"touchleave")},_onTouchMove:function(t){this._map._loaded&&this._touchEvent(t,"touchmove")},_detectIE:function(){var e=t.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e.concat(["touchcancel"]),L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)L.DomEvent.on(t,e[n],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var e=t.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],n=0,i=t.length;n<i;n++)Array.isArray(t[n])?e.push(L.LatLngUtil.cloneLatLngs(t[n])):e.push(this.cloneLatLng(t[n]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},function(){var t={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,n,i=t.length,r=0,o=Math.PI/180;if(i>2){for(var s=0;s<i;s++)e=t[s],r+=((n=t[(s+1)%i]).lng-e.lng)*o*(2+Math.sin(e.lat*o)+Math.sin(n.lat*o));r=6378137*r*6378137/2}return Math.abs(r)},formattedNumber:function(t,e){var n=parseFloat(t).toFixed(e),i=L.drawLocal.format&&L.drawLocal.format.numeric,r=i&&i.delimiters,o=r&&r.thousands,s=r&&r.decimal;if(o||s){var a=n.split(".");n=o?a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o):a[0],s=s||".",a.length>1&&(n=n+s+a[1])}return n},readableArea:function(e,n,i){var r,o;i=L.Util.extend({},t,i);return n?(o=["ha","m"],type=typeof n,"string"===type?o=[n]:"boolean"!==type&&(o=n),r=e>=1e6&&-1!==o.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*e,i.km)+" kmÂ²":e>=1e4&&-1!==o.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*e,i.ha)+" ha":L.GeometryUtil.formattedNumber(e,i.m)+" mÂ²"):r=(e/=.836127)>=3097600?L.GeometryUtil.formattedNumber(e/3097600,i.mi)+" miÂ²":e>=4840?L.GeometryUtil.formattedNumber(e/4840,i.ac)+" acres":L.GeometryUtil.formattedNumber(e,i.yd)+" ydÂ²",r},readableDistance:function(e,n,i,r,o){var s;o=L.Util.extend({},t,o);switch(n?"string"==typeof n?n:"metric":i?"feet":r?"nauticalMile":"yards"){case"metric":s=e>1e3?L.GeometryUtil.formattedNumber(e/1e3,o.km)+" km":L.GeometryUtil.formattedNumber(e,o.m)+" m";break;case"feet":e*=3.28083,s=L.GeometryUtil.formattedNumber(e,o.ft)+" ft";break;case"nauticalMile":e*=.53996,s=L.GeometryUtil.formattedNumber(e/1e3,o.nm)+" nm";break;case"yards":default:s=(e*=1.09361)>1760?L.GeometryUtil.formattedNumber(e/1760,o.mi)+" miles":L.GeometryUtil.formattedNumber(e,o.yd)+" yd"}return s},isVersion07x:function(){var t=L.version.split(".");return 0===parseInt(t[0],10)&&7===parseInt(t[1],10)}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,n,i){return this._checkCounterclockwise(t,n,i)!==this._checkCounterclockwise(e,n,i)&&this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(t,e,i)},_checkCounterclockwise:function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,n,i=this._getProjectedPoints(),r=i?i.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=r-1;t>=3;t--)if(e=i[t-1],n=i[t],this._lineSegmentsIntersectsRange(e,n,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var n=this._getProjectedPoints(),i=n?n.length:0,r=n?n[i-1]:null,o=i-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(r,t,o,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),n=e?e.length:0;return!e||(n+=t||0)<=3},_lineSegmentsIntersectsRange:function(t,e,n,i){var r,o,s=this._getProjectedPoints();i=i||0;for(var a=n;a>i;a--)if(r=s[a-1],o=s[a],L.LineUtil.segmentsIntersect(t,e,r,o))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),n=0;n<e.length;n++)t.push(this._map.latLngToLayerPoint(e[n]));return t}}),L.Polygon.include({intersects:function(){var t,e,n,i,r=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=r.length,e=r[0],n=r[t-1],i=t-2,this._lineSegmentsIntersectsRange(n,e,i,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var e;L.Control.prototype.initialize.call(this,t),this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,n=L.DomUtil.create("div","leaflet-draw"),i=!1;for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&(e=this._toolbars[r].addToolbar(t))&&(i||(L.DomUtil.hasClass(e,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(e.childNodes[0],"leaflet-draw-toolbar-top"),i=!0),n.appendChild(e));return n},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var n in this._toolbars)this._toolbars[n]!==e&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null;var e=L.version.split(".");1===parseInt(e[0],10)&&parseInt(e[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,n=L.DomUtil.create("div","leaflet-draw-section"),i=0,r=this._toolbarClass||"",o=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<o.length;e++)o[e].enabled&&this._initModeHandler(o[e].handler,this._toolbarContainer,i++,r,o[e].title);if(i)return this._lastButtonIndex=--i,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),n.appendChild(this._toolbarContainer),n.appendChild(this._actionsContainer),n},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,n=this._actionButtons.length;e<n;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,n,i,r){var o=t.type;this._modes[o]={},this._modes[o].handler=t,this._modes[o].button=this._createButton({type:o,title:r,className:i+"-"+o,container:e,callback:this._modes[o].handler.enable,context:this._modes[o].handler}),this._modes[o].buttonIndex=n,this._modes[o].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container),n=L.DomUtil.create("span","sr-only",t.container);e.href="#",e.appendChild(n),t.title&&(e.title=t.title,n.innerHTML=t.title),t.text&&(e.innerHTML=t.text,n.innerHTML=t.text);var i=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"touchstart",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,i,t.callback,t.context),e},_disposeButton:function(t,e){var n=this._detectIOS()?"touchstart":"click";L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"touchstart",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,n,e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,n,i,r,o=this._actionsContainer,s=this.getActions(t),a=s.length;for(n=0,i=this._actionButtons.length;n<i;n++)this._disposeButton(this._actionButtons[n].button,this._actionButtons[n].callback);for(this._actionButtons=[];o.firstChild;)o.removeChild(o.firstChild);for(var u=0;u<a;u++)"enabled"in s[u]&&!s[u].enabled||(e=L.DomUtil.create("li","",o),r=this._createButton({title:s[u].title,text:s[u].text,container:e,callback:s[u].callback,context:s[u].context}),this._actionButtons.push({button:r,callback:s[u].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,n=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=n+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._visible=!1,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",t.text||t.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),n=this._container;return this._container&&(this._visible&&(n.style.visibility="inherit"),L.DomUtil.setPosition(n,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(t,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){for(var e in L.setOptions(this,t),this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&(void 0===t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(t){var e=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return t.removeAllLayers&&e.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),e},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var n=L.version.split(".");1===parseInt(n[0],10)&&parseInt(n[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:(t instanceof L.Marker||t instanceof L.CircleMarker)&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):(t instanceof L.Marker||t instanceof L.CircleMarker)&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,n,i=t.layer||t.target||t;this._backupLayer(i),this.options.poly&&(n=L.Util.extend({},this.options.poly),i.options.poly=n),this.options.selectedPathOptions&&((e=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(e.color=i.options.color,e.fillColor=i.options.fillColor),i.options.original=L.extend({},i.options),i.options.editing=e),i instanceof L.Marker?(i.editing&&i.editing.enable(),i.dragging.enable(),i.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):i.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],n=this._map.mouseEventToLayerPoint(e),i=this._map.layerPointToLatLng(n);t.target.setLatLng(i)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var n=L.version.split(".");1===parseInt(n[0],10)&&parseInt(n[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(t){this._removeLayer({layer:t})},this),this.save()},_enableLayerDelete:function(t){(t.layer||t.target||t).on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document)},function(t,e){L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{minZoom:0,maxZoom:23,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._ready=!!window.google&&!!window.google.maps&&!!window.google.maps.Map,this._GAPIPromise=this._ready?Promise.resolve(window.google):new Promise(function(t,e){var n=0,i=null;i=setInterval(function(){return n>=10?(clearInterval(i),e(new Error("window.google not found after 10 attempts"))):window.google&&window.google.maps&&window.google.maps.Map?(clearInterval(i),t(window.google)):void n++},500)}),this._tileCallbacks={},this._freshTiles={},this._imagesPerTile="hybrid"===this.options.type?2:1},onAdd:function(t){L.GridLayer.prototype.onAdd.call(this,t),this._initMutantContainer(),this._GAPIPromise.then(function(){if(this._ready=!0,this._map=t,this._initMutant(),t.on("viewreset",this._reset,this),t.on("move",this._update,this),t.on("zoomend",this._handleZoomAnim,this),t.on("resize",this._resize,this),google.maps.event.addListenerOnce(this._mutant,"idle",function(){this._checkZoomLevels(),this._mutantIsReady=!0}.bind(this)),t._controlCorners.bottomright.style.marginBottom="20px",t._controlCorners.bottomleft.style.marginBottom="20px",this._reset(),this._update(),this._subLayers)for(var e in this._subLayers)this._subLayers[e].setMap(this._mutant)}.bind(this))},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),t._container.removeChild(this._mutantContainer),this._mutantContainer=void 0,google.maps.event.clearListeners(t,"idle"),google.maps.event.clearListeners(this._mutant,"idle"),t.off("viewreset",this._reset,this),t.off("move",this._update,this),t.off("zoomend",this._handleZoomAnim,this),t.off("resize",this._resize,this),t._controlCorners&&(t._controlCorners.bottomright.style.marginBottom="0em",t._controlCorners.bottomleft.style.marginBottom="0em")},getAttribution:function(){return this.options.attribution},setOpacity:function(t){this.options.opacity=t,t<1&&L.DomUtil.setOpacity(this._mutantContainer,t)},setElementSize:function(t,e){t.style.width=e.x+"px",t.style.height=e.y+"px"},addGoogleLayer:function(t,e){return this._subLayers||(this._subLayers={}),this._GAPIPromise.then(function(){var n=new(0,google.maps[t])(e);return n.setMap(this._mutant),this._subLayers[t]=n,n}.bind(this))},removeGoogleLayer:function(t){var e=this._subLayers&&this._subLayers[t];e&&(e.setMap(null),delete this._subLayers[t])},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.zIndex="800",this._mutantContainer.style.pointerEvents="none",this._map.getContainer().appendChild(this._mutantContainer)),this.setOpacity(this.options.opacity),this.setElementSize(this._mutantContainer,this._map.getSize()),this._attachObserver(this._mutantContainer)},_initMutant:function(){if(this._ready&&this._mutantContainer){this._mutantCenter=new google.maps.LatLng(0,0);var t=new google.maps.Map(this._mutantContainer,{center:this._mutantCenter,zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.styles||{},backgroundColor:"transparent"});this._mutant=t,google.maps.event.addListenerOnce(t,"idle",function(){for(var t=this._mutantContainer.querySelectorAll("a"),e=0;e<t.length;e++)t[e].style.pointerEvents="auto"}.bind(this)),this.fire("spawned",{mapObject:t})}},_attachObserver:function(t){new MutationObserver(this._onMutations.bind(this)).observe(t,{childList:!0,subtree:!0})},_onMutations:function(t){for(var e=0;e<t.length;++e)for(var n=t[e],i=0;i<n.addedNodes.length;++i){var r=n.addedNodes[i];r instanceof HTMLImageElement?this._onMutatedImage(r):r instanceof HTMLElement&&Array.prototype.forEach.call(r.querySelectorAll("img"),this._onMutatedImage.bind(this))}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(t){var e,n=t.src.match(this._roadRegexp),i=0;if(n?(e={z:n[1],x:n[2],y:n[3]},this._imagesPerTile>1&&(t.style.zIndex=1,i=1)):((n=t.src.match(this._satRegexp))&&(e={x:n[1],y:n[2],z:n[3]}),i=0),e){var r=this._tileCoordsToKey(e);t.style.position="absolute",t.style.visibility="hidden";var o=r+"/"+i;if(this._freshTiles[o]=t,o in this._tileCallbacks&&this._tileCallbacks[o])this._tileCallbacks[o].pop()(t),this._tileCallbacks[o].length||delete this._tileCallbacks[o];else if(this._tiles[r]){var s=this._tiles[r].el,a=0===i?s.firstChild:s.firstChild.nextSibling,u=this._clone(t);s.replaceChild(u,a)}}else t.src.match(this._staticRegExp)&&(t.style.visibility="hidden")},createTile:function(t,e){var n=this._tileCoordsToKey(t),i=L.DomUtil.create("div");i.dataset.pending=this._imagesPerTile,e=e.bind(this,null,i);for(var r=0;r<this._imagesPerTile;r++){var o=n+"/"+r;if(o in this._freshTiles){var s=this._freshTiles[o];i.appendChild(this._clone(s)),i.dataset.pending--}else this._tileCallbacks[o]=this._tileCallbacks[o]||[],this._tileCallbacks[o].push(function(t){return function(n){t.appendChild(this._clone(n)),t.dataset.pending--,parseInt(t.dataset.pending)||e()}.bind(this)}.bind(this)(i))}return parseInt(i.dataset.pending)||L.Util.requestAnimFrame(e),i},_clone:function(t){var e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){var t=this._map.getZoom(),e=this._mutant.getZoom();t&&e&&(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!=this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_reset:function(){this._initContainer()},_update:function(){if(this._mutant){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e);var n=this._map.getZoom(),i=n!==Math.round(n),r=this._mutant.getZoom();i||n==r||(this._mutant.setZoom(n),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this)},_resize:function(){var t=this._map.getSize();this._mutantContainer.style.width===t.x&&this._mutantContainer.style.height===t.y||(this.setElementSize(this._mutantContainer,t),this._mutant&&google.maps.event.trigger(this._mutant,"resize"))},_handleZoomAnim:function(){if(this._mutant){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e),this._mutant.setZoom(Math.round(this._map.getZoom()))}},_removeTile:function(t){if(this._mutant)return setTimeout(this._pruneTile.bind(this,t),1e3),L.GridLayer.prototype._removeTile.call(this,t)},_pruneTile:function(t){for(var e=this._mutant.getZoom(),n=t.split(":")[2],i=this._mutant.getBounds(),r=i.getSouthWest(),o=i.getNorthEast(),s=L.latLngBounds([[r.lat(),r.lng()],[o.lat(),o.lng()]]),a=0;a<this._imagesPerTile;a++){var u=t+"/"+a;if(u in this._freshTiles){var l=this._map&&this._keyToBounds(t);this._map&&l.overlaps(s)&&n==e||delete this._freshTiles[u]}}}}),L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)}},function(t,e,n){"use strict";var i=n(1),r=n(0),o="textareaWidget";function s(t,e){this.namespace=o,i.call(this,t,e),this._init()}s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype._init=function(){this._setDelegatedHandlers()},s.prototype._setDelegatedHandlers=function(){var t=r(this.element),e=t[0].querySelector("textarea"),n=e?e.clientHeight:20;t.on("input","textarea",function(){this.scrollHeight>this.clientHeight&&this.scrollHeight>n&&(this.style["min-height"]=this.scrollHeight+"px")})},r.fn[o]=function(t,e){var n=r(this),i=n.data(o);return t=t||{},i||"object"!=typeof t?i&&"string"==typeof t&&i[t](this):n.data(o,new s(n[0],t,e)),this},t.exports={name:o,selector:"form"}},function(t,e,n){"use strict";t.exports={name:"tablewidget"}},function(t,e,n){"use strict";var i=n(1),r=n(0);n(41);var o="radiopicker";function s(t,e){this.namespace=o,i.call(this,t,e),this._init()}s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype._init=function(){this._setDelegatedHandlers()},s.prototype._setDelegatedHandlers=function(){var t=r(this.element);t.on("click",'input[type="radio"]:not([readonly]):checked',function(){r(this).parent("label").siblings().removeAttr("data-checked").end().attr("data-checked","true")}).on("click",'input[type="checkbox"]:not([readonly])',function(){this.checked?this.parentNode.dataset.checked="true":delete this.parentNode.dataset.checked}).on("change","[data-checked] > input:not(:checked)",function(){delete this.parentNode.dataset.checked}).on("click",'input[type="checkbox"][readonly],input[type="radio"][readonly]',function(t){return t.stopImmediatePropagation(),!1}).on("change",'input[type="checkbox"][readonly],input[type="radio"][readonly]',function(t){var e=void 0===t.originalEvent;return e||(t.stopImmediatePropagation(),this.checked&&"true"!==this.parentNode.dataset.checked&&(this.checked=!1)),e}).on("click",'[data-checked]>input[type="radio"]:not(.no-unselect)',function(){r(this).prop("checked",!1).trigger("change").parent().removeAttr("data-checked")}),t.find('input[type="radio"]:checked, input[type="checkbox"]:checked').parent("label").attr("data-checked","true")},r.fn[o]=function(t,e){var n=r(this),i=n.data(o);return t=t||{},i||"object"!=typeof t?i&&"string"==typeof t&&i[t](this):n.data(o,new s(n[0],t,e)),this},t.exports={name:o,selector:"form"}},function(t,e,n){"use strict";var i=n(1),r=n(4),o=n(0),s=n(27),a=n(5);n(42),n(15);var u="datepickerExtended";function l(t,e){this.namespace=u,i.call(this,t,e),this._init()}l.prototype=Object.create(i.prototype),l.prototype.constructor=l,l.prototype._init=function(){var t=o(this.element).parent("label");this.settings=t.hasClass("or-appearance-year")?{format:"yyyy",startView:"decade",minViewMode:"years"}:t.hasClass("or-appearance-month-year")?{format:"yyyy-mm",startView:"year",minViewMode:"months"}:{format:"yyyy-mm-dd",startView:"month",minViewMode:"days"},this.$fakeDateI=this._createFakeDateInput(this.settings.format),this._setChangeHandler(this.$fakeDateI),this._setFocusHandler(this.$fakeDateI),this._setResetHandler(this.$fakeDateI),this.$fakeDateI.datepicker({format:this.settings.format,autoclose:!0,todayHighlight:!0,startView:this.settings.startView,minViewMode:this.settings.minViewMode,forceParse:!1})},l.prototype._createFakeDateInput=function(t){var e=o(this.element),n=o('<div class="widget date"><input class="ignore input-small" type="text" value="'+e.val()+'" placeholder="'+t+'" /><button class="btn-icon-only btn-reset" type="button" aria-label="comment"><i class="icon icon-refresh"> </i></button></div>'),i=n.find("input");return e.hide().after(n),i},l.prototype._setChangeHandler=function(t){var e=o(this.element),n=this.settings;t.on("change paste",function(i){var r="",o="paste"===i.type?a.getPasteData(i):t.val(),u="";return o.length>0&&(a.isNumber(o)&&"yyyy"!==n.format?r="":(o="yyyy-mm"===n.format?o+"-01":"yyyy"===n.format?o+"-01-01":o,r=s.date.convert(o))),""!==r&&e.val()===r||("paste"===i.type&&i.stopImmediatePropagation(),e.val(r).trigger("change").blur()),u="yyyy-mm"===n.format?r.substring(0,r.lastIndexOf("-")):"yyyy"===n.format?r.substring(0,r.indexOf("-")):r,t.val(u).datepicker("update"),!1})},l.prototype._setResetHandler=function(t){var e=this;t.next(".btn-reset").on("click",function(){o(e.element).val()&&t.val("").datepicker("update")})},l.prototype._setFocusHandler=function(t){var e=this;t.on("focus",function(){o(e.element).trigger("fakefocus")}),o(this.element).on("applyfocus",function(){t.focus()})},l.prototype.update=function(){this.$fakeDateI.val(this.element.value).datepicker("update")},o.fn[u]=function(t,e){return t=t||{},this.each(function(){var n=o(this),i=n.data(u);i||"object"!=typeof t||r.touch&&r.inputTypes.date&&!/GT-P31[0-9]{2}.+AppleWebKit\/534\.30/.test(navigator.userAgent)?i&&"string"==typeof t&&i[t](this):n.data(u,new l(this,t,e))})},t.exports={name:u,selector:'input[type="date"]:not([readonly])'}},function(t,e,n){"use strict";var i=n(1),r=n(0),o="datepickerNative",s=n(4);function a(t,e){this.namespace=o,i.call(this,t,e),this._init()}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype._init=function(){this.element.type="text",this.element.classList.add("mask-date")},r.fn[o]=function(t,e){return t=t||{},this.each(function(){var n=r(this),i=n.data("datepickerExtended"),u=n.data(o);i||"object"!=typeof t||u||s.touch||n.data(o,new a(this,t,e))})},t.exports={name:o,selector:'input[type="date"]'}},function(t,e,n){"use strict";var i=n(1),r=n(0),o="datepickerMobile",s=n(4);function a(t,e){this.namespace=o,i.call(this,t,e),this._init()}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype._init=function(){var t=r(this.element),e=this.element.value;if(s.inputTypes.month){var n=r('<input class="ignore widget datepicker-mobile" type="month"/>');t.addClass("hide"),n.val(e?e.substring(0,e.lastIndexOf("-")):"").insertAfter(t).on("change",function(){var e=this.value?this.value+"-01":"";t.val(e).trigger("change")})}},r.fn[o]=function(t,e){return t=t||{},this.each(function(){var n=r(this),i=n.data("datepickerExtended"),u=n.data(o);i||"object"!=typeof t||u||!s.touch||n.data(o,new a(this,t,e))})},t.exports={name:o,selector:'.or-appearance-month-year input[type="date"]'}},function(t,e,n){"use strict";var i=n(1),r=n(4),o=n(0);n(43),n(15);var s="timepickerExtended";function a(t,e){this.namespace=s,i.call(this,t,e),this._init()}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype._init=function(){var t=o(this.element),e=o(this.element).val(),n=o('<div class="widget timepicker"><input class="ignore timepicker-default" type="text" value="'+e+'" placeholder="hh:mm" /><button class="btn-icon-only btn-reset" aria-label="reset" type="button"><i class="icon icon-refresh"> </i></button></div>'),i=n.find(".btn-reset"),r=n.find("input");t.hide().after(n),r.timepicker({defaultTime:e.length>0&&e,showMeridian:!1}).val(e).closest(".widget").find("input").addClass("ignore"),r.on("change",function(){return t.val(this.value).trigger("change"),!1}),i.on("click",function(){var e=t.val()?"change":"";(e||r.val())&&r.val("").trigger(e)}),r.on("focus",function(){t.trigger("fakefocus")}),o(this.element).on("applyfocus",function(){r.focus()})},o.fn[s]=function(t,e){return t=t||{},this.each(function(){var n=o(this),i=n.data(s);i||"object"!=typeof t||r.touch&&r.inputTypes.time?i&&"string"==typeof t&&i[t](this):n.data(s,new a(this,t,e))})},t.exports={name:s,selector:'input[type="time"]:not([readonly])'}},function(t,e,n){"use strict";var i=n(1),r=n(4),o=n(0),s=n(27),a="datetimepickerExtended";function u(t,e){this.namespace=a,i.call(this,t,e),this._init()}n(28),n(42),n(43),n(15),u.prototype=Object.create(i.prototype),u.prototype.constructor=u,u.prototype._init=function(){var t=this,e=o(this.element),n=(e.val().length>0?new Date(e.val()).toISOLocalString():"").split("T"),i=n[0],r=n[1]&&n[1].length>4?n[1].substring(0,5):"";function a(){if(t.$fakeDateI.val().length>0&&t.$fakeTimeI.val().length>3){var n=t.$fakeDateI.val().split("-"),i=t.$fakeTimeI.val().split(":");e.val(new Date(n[0],n[1]-1,n[2],i[0],i[1]).toISOLocalString()).trigger("change")}else e.val("").trigger("change")}this.$fakeDateI=this._createFakeDateInput(i),this.$fakeTimeI=this._createFakeTimeInput(r),e.hide().after('<div class="datetimepicker widget" />'),e.siblings(".datetimepicker").append(this.$fakeDateI.closest(".date")).append(this.$fakeTimeI.closest(".timepicker")),this.$fakeDateI.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0,forceParse:!1}),this.$fakeTimeI.timepicker({defaultTime:r.length>0&&"value",showMeridian:!1}).closest(".widget").find("input").addClass("ignore"),this._setFocusHandler(this.$fakeDateI.add(this.$fakeTimeI)),this.$fakeDateI.on("change changeDate",function(){return s.date.validate(this.value)||t.$fakeDateI.val("").datepicker("update"),a(),!1}),this.$fakeTimeI.on("change",function(){return a(),!1}),this.$fakeTimeI.next(".btn-reset").on("click",function(){var n=e.val()?"change":"";(n||t.$fakeDateI.val()||t.$fakeTimeI.val())&&(t.$fakeDateI.val("").trigger(n).datepicker("update"),t.$fakeTimeI.val("").trigger(n))})},u.prototype._createFakeDateInput=function(t){return o('<div class="date"><input class="ignore" type="text" value="'+t+'" placeholder="yyyy-mm-dd"/></div>').find("input")},u.prototype._createFakeTimeInput=function(t){return o('<div class="timepicker"><input class="ignore timepicker-default" type="text" value="'+t+'" placeholder="hh:mm"/><button class="btn-icon-only btn-reset" type="button" aria-label="reset"><i class="icon icon-refresh"> </i></button></div>').find("input")},u.prototype.update=function(){var t=o(this.element),e=(t.val().length>0?new Date(t.val()).toISOLocalString():"").split("T"),n=e[0],i=e[1]&&e[1].length>4?e[1].substring(0,5):"";this.$fakeDateI.val(n),this.$fakeTimeI.val(i)},u.prototype._setFocusHandler=function(t){var e=this;t.on("focus",function(){o(e.element).trigger("fakefocus")}),o(this.element).on("applyfocus",function(){t.eq(0).focus()})},o.fn[a]=function(t,e){return t=t||{},this.each(function(){var n=o(this),i=n.data(a);i||"object"!=typeof t||r.touch&&r.inputTypes.datetime&&!/GT-P31[0-9]{2}.+AppleWebKit\/534\.30/.test(navigator.userAgent)?i&&"string"==typeof t&&i[t](this):n.data(a,new u(this,t,e))})},t.exports={name:a,selector:'input[type="datetime"]:not([readonly])'}},function(t,e,n){"use strict";var i=n(0),r=n(1),o="compactpicker";function s(t,e){this.namespace=o,r.call(this,t,e),this._init()}s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype._init=function(){i(this.element).find(".option-label").each(function(){var t=i(this);t.siblings("img, video, audio").length>0&&t.css("display","none")})},i.fn[o]=function(t,e){return t=t||{},this.each(function(){var n=i(this),r=n.data(o);r||"object"!=typeof t?r&&"string"==typeof t&&r[t](this):n.data(o,new s(this,t,e))})},t.exports={name:"compactpicker",selector:'.or-appearance-compact, .or-appearance-quickcompact, [class*="or-appearance-compact-"]'}},function(t,e,n){"use strict";var i=n(0),r=n(1),o=n(30),s=n(5),a="filepicker",u=n(6).t,l=n(123),c=n(29);function h(t,e,n){n&&(n.stopPropagation(),n.preventDefault()),this.namespace=a,r.call(this,t,e),this._init()}h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.prototype._init=function(){var t=i(this.element),e=t.attr("data-loaded-file-name"),n=this;this.props=this._getProps(),t.prop("disabled",!0).addClass("hide").parent().addClass("with-media clearfix"),this.$widget=i('<div class="widget file-picker"><input class="ignore fake-file-input"/>'+(this.props.readonly?"":'<button class="btn-icon-only btn-reset" aria-label="reset" type="button"><i class="icon icon-refresh"> </i></button>')+'<a class="btn-icon-only btn-download" aria-label="download" download href=""><i class="icon icon-download"> </i></a><div class="file-feedback"></div><div class="file-preview"></div></div>').insertAfter(t),this.$feedback=this.$widget.find(".file-feedback"),this.$preview=this.$widget.find(".file-preview"),this.$fakeInput=this.$widget.find(".fake-file-input"),this.$downloadLink=this.$widget.find(".btn-download"),this.$widget.find(".btn-reset").on("click",function(){(t.val()||n.$fakeInput.val())&&c.confirm(u("filepicker.resetWarning",{item:u("filepicker.file")})).then(function(){t.val("").trigger("change")})}).end(),n._focusListener(),this._showFileName(e),o.isWaitingForPermissions()&&this._showFeedback(u("filepicker.waitingForPermissions"),"warning"),this._updatePlaceholder(),t.closest("form.or").on("updateMaxSize",this._updatePlaceholder.bind(this)),o.init().then(function(){n._showFeedback(),n._changeListener(),t.prop("disabled",!1),e&&o.getFileUrl(e).then(function(t){n._showPreview(t,n.props.mediaType),n._updateDownloadLink(t,e)}).catch(function(){n._showFeedback(u("filepicker.notFound",{existing:e}),"error")})}).catch(function(t){n._showFeedback(t,"error")})},h.prototype._getProps=function(){return{mediaType:this.element.getAttribute("accept"),readonly:this.element.readOnly}},h.prototype._updatePlaceholder=function(){this.$fakeInput.attr("placeholder",u("filepicker.placeholder",{maxSize:o.getMaxSizeReadable()||"?MB"}))},h.prototype._changeListener=function(){var t=this;i(this.element).on("click",function(e){if(t.props.readonly||"propagate"!==e.namespace)return t.$fakeInput.focus(),e.stopImmediatePropagation(),!1}).on("change.propagate."+this.namespace,function(e){var n,r,a,u=i(this),l=u.attr("data-loaded-file-name"),c=new Date;if("propagate"===e.namespace)return u.trigger("change.file"),!1;e.stopImmediatePropagation(),n=this.files[0],a="-"+c.getHours()+"_"+c.getMinutes()+"_"+c.getSeconds(),this.dataset.filenamePostfix=a,r=s.getFilename(n,a),o.getFileUrl(n,r).then(function(e){t._showPreview(e,t.props.mediaType),t._showFeedback(),t._showFileName(r),l&&l!==r&&u.removeAttr("data-loaded-file-name"),t._updateDownloadLink(e,r),u.trigger("change.propagate")}).catch(function(e){u.val("").trigger("change.propagate"),t._showFileName(""),t._showPreview(null),t._showFeedback(e,"error"),t._updateDownloadLink("","")})}),this.$fakeInput.on("click",function(e){if(t.props.readonly||t.element.value||t.$fakeInput[0].value)return i(this).focus(),e.stopImmediatePropagation(),!1;e.preventDefault(),i(t.element).trigger("click.propagate")}).on("change",function(){return!1})},h.prototype._focusListener=function(){var t=this;this.$fakeInput.on("focus",function(){i(t.element).trigger("fakefocus")}),i(this.element).on("applyfocus",function(){t.$fakeInput.focus()})},h.prototype._showFileName=function(t){this.$fakeInput.val(t).prop("readonly",!!t)},h.prototype._showFeedback=function(t,e){var n=t instanceof l?u(t.translationKey,t.translationOptions):t instanceof Error?t.message:t||"";e=e||"",this.$feedback.text(n).attr("class","file-feedback "+e)},h.prototype._showPreview=function(t,e){var n;switch(this.$widget.find(".file-preview").empty(),e){case"image/*":n=i("<img />");break;case"audio/*":n=i('<audio controls="controls"/>');break;case"video/*":n=i('<video controls="controls"/>');break;default:n=i("")}t&&this.$preview.append(n.attr("src",t))},h.prototype._updateDownloadLink=function(t,e){this.$downloadLink.attr({href:t||"",download:e||""})},i.fn[a]=function(t,e){return t=t||{},this.each(function(){var n=i(this),r=n.data(a);r||"object"!=typeof t?r&&"string"==typeof t&&r[t](this):n.data(a,new h(this,t,e))})},t.exports={name:a,selector:'.question:not(.or-appearance-draw):not(.or-appearance-signature):not(.or-appearance-annotate) input[type="file"]'}},function(t,e,n){"use strict";function i(t,e,n){this.message=t,this.translationKey=e,this.translationOptions=n}i.prototype=Object.create(Error.prototype),i.prototype.name="TranslatedError",t.exports=i},function(t,e,n){"use strict";var i=n(1),r=n(0),o="drawWidget",s=n(4),a=n(30),u=n(125),l=n(6).t,c=n(29),h=n(5),d=n(8);function p(t,e){this.namespace=o,i.call(this,t,e),this._init()}u.prototype.fromObjectURL=function(t,e){var n=new Image,i=(e=e||{}).ratio||window.devicePixelRatio||1,r=e.width||this._canvas.width/i,o=e.height||this._canvas.height/i,s=this;return this._reset(),new d(function(e){n.src=t,n.onload=function(){var i,a,u=n.width,l=n.height,c=r/u,h=o/l;if(c<1||h<1){var d=Math.min(c,h);i=(r-u*d)/2,a=(o-l*d)/2,s._ctx.drawImage(n,0,0,u,l,i,a,u*d,l*d)}else i=(r-u)/2,a=(o-l)/2,s._ctx.drawImage(n,i,a,u,l);e(t)},s._isEmpty=!1})},u.prototype.updateData=function(t){var e=this;this._fromData(t,function(t,n){e._drawCurve(t,n.start,n.end)},function(t){e._drawDot(t)}),this._data=t},p.prototype=Object.create(i.prototype),p.prototype.constructor=p,p.prototype._init=function(){var t,e=this,n=this.element.dataset.loadedFileName;this.element.type="text",this.element.dataset.drawing=!0,this.props=this._getProps(this.element),this.$widget=this._getMarkup(),t=this.$widget[0].querySelector(".draw-widget__body__canvas"),r(this.element).after(this.$widget).closest(".question").addClass("or-"+this.props.type+"-initialized"),this._handleResize(t),this._resizeCanvas(t),this.props.load&&this._handleFiles(n),this.initialize=a.init().then(function(){return e.pad=new u(t,{onEnd:e._updateValue.bind(e),penColor:e.props.colors[0]||"black"}),e.pad.off(),!n||(e.element.value=n,e._loadFileIntoPad(n).then(e._updateDownloadLink.bind(e)))}),this.disable(),this.initialize.then(function(){e.$widget.find(".draw-widget__btn-reset").on("click",e._reset.bind(e)).end().find(".draw-widget__colorpicker").on("click",".current",function(){r(this).parent().toggleClass("reveal")}).on("click","[data-color]:not(.current)",function(){r(this).siblings().removeClass("current").end().addClass("current").parent().removeClass("reveal"),e.pad.penColor=this.dataset.color}).end().find(".draw-widget__undo").on("click",function(){var t=e.pad.toData();e.pad.clear();var n=e.$widget[0].querySelector("input[type=file]"),i=n&&n.files[0]?n.files[0]:e.element.dataset.loadedFileName;e._loadFileIntoPad(i).then(function(){e.pad.updateData(t.slice(0,-1)),e._updateValue(),e.pad.penColor=e.$widget.find(".draw-widget__colorpicker .current")[0].dataset.color})}).end().find(".show-canvas-btn").on("click",function(){return e.$widget.addClass("full-screen"),e._resizeCanvas(t),e.enable(),!1}).end().find(".hide-canvas-btn").on("click",function(){return e.$widget.removeClass("full-screen"),e.pad.off(),e._resizeCanvas(t),!1}).click(),r(t).on("canvasreload."+e.namespace,function(){e.cache&&e.pad.fromObjectURL(e.cache)}),e.enable()}).catch(function(t){e._showFeedback(t.message)}),r(this.element).on("applyfocus",function(){t.focus()}).closest('[role="page"]').on("pageflip.enketo",function(){e._resizeCanvas(t)})},p.prototype._getProps=function(t){var e=r(t).closest(".question"),n=e.hasClass("or-appearance-draw")?"drawing":e.hasClass("or-appearance-signature")?"signature":"annotation";return{readonly:t.readOnly,type:n,filename:n+".png",load:e.hasClass("or-appearance-annotate"),colors:e.hasClass("or-appearance-signature")?[]:["black","lightblue","blue","red","orange","cyan","yellow","lightgreen","green","pink","purple","lightgray","darkgray"],touch:s.touch,accept:t.getAttribute("accept"),capture:t.getAttribute("capture")}},p.prototype._handleFiles=function(t){this._updatePlaceholder(),this.$widget.closest("form.or").on("updateMaxSize",this._updatePlaceholder.bind(this));var e=this,n=this.$widget.find("input[type=file]"),i=this.$widget.find(".fake-file-input");this._showFileName(t),n.on("click."+this.namespace,function(t){if(e.props.readonly||"propagate"!==t.namespace)return e.$fakeInput.focus(),t.stopImmediatePropagation(),!1}).on("change."+this.namespace,function(){var t=this.files[0];t?a.isTooLarge(t)?e._showFeedback(l("filepicker.toolargeerror",{maxSize:a.getMaxSizeReadable()})):(e.pad.clear(),e._loadFileIntoPad(this.files[0]).then(function(){e._updateValue.call(e),e._showFileName(t.name),e.enable()})):e._showFileName(null)}),i.on("click."+this.namespace,function(t){if(e.props.readonly||n[0].value||i[0].value)return r(this).focus(),t.stopImmediatePropagation(),!1;t.preventDefault(),n.trigger("click.propagate")}).on("change."+this.namespace,function(){return!1})},p.prototype._showFileName=function(t){this.$widget.find(".fake-file-input").val(t).prop("readonly",!!t)},p.prototype._updatePlaceholder=function(){this.$widget.find(".fake-file-input").attr("placeholder",l("filepicker.placeholder",{maxSize:a.getMaxSizeReadable()||"?MB"}))},p.prototype._getMarkup=function(){var t=this.props.load?'<input type="file" class="ignore draw-widget__load"'+(null!==this.props.capture?' capture="'+this.props.capture+'"':"")+' accept="'+this.props.accept+'"/><div class="widget file-picker"><input class="ignore fake-file-input"/><div class="file-feedback"></div></div>':"",e=this.props.touch?'<button type="button" class="show-canvas-btn btn btn-default">Draw/Sign</button><button type="button" class="hide-canvas-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button>':"",n=r('<div class="widget draw-widget"><div class="draw-widget__body">'+e+t+'<canvas class="draw-widget__body__canvas noSwipe disabled" tabindex="0"></canvas><div class="draw-widget__colorpicker"></div>'+("signature"===this.props.type?"":'<button class="btn-icon-only draw-widget__undo" aria-label="undo" type=button><i class="icon icon-undo"> </i></button>')+'</div><div class="draw-widget__footer"><button type="button" class="btn-icon-only draw-widget__btn-reset" aria-label="reset"><i class="icon icon-refresh"> </i></button><a class="btn-icon-only btn-download" aria-label="download" download href=""><i class="icon icon-download"> </i></a><div class="draw-widget__feedback"></div></div></div>'),i=n.find(".draw-widget__colorpicker");return this.props.colors.forEach(function(t,e){var n=0===e?" current":"";i.append('<div class="'+n+'"data-color="'+t+'" style="background: '+t+';" />')}),n},p.prototype._updateValue=function(){var t=new Date,e="-"+t.getHours()+"_"+t.getMinutes()+"_"+t.getSeconds();this.cache=this.pad.toDataURL(),this.element.dataset.filenamePostfix=e,r(this.element).val(this.props.filename).trigger("change"),this._updateDownloadLink(this.cache)},p.prototype._reset=function(){var t=this;if(this.element.value){var e="signature"===this.props.type?l("drawwidget.signature"):"drawing"===this.props.type?l("drawwidget.drawing"):l("drawwidget.annotation");c.confirm(l("filepicker.resetWarning",{item:e})).then(function(){t.pad.clear(),t.cache=null,delete t.element.dataset.loadedFileName,t.element.dataset.filenamePostfix="",r(t.element).val("").trigger("change"),t.$widget.find("input[type=file]").val("").trigger("change"),t._updateDownloadLink(""),t.disable(),t.enable()})}},p.prototype._loadFileIntoPad=function(t){var e=this;return t?a.getObjectUrl(t).then(e.pad.fromObjectURL.bind(e.pad)).then(function(t){return e.cache=t,t}).catch(function(){e._showFeedback("File could not be loaded (leave unchanged if already submitted and you want to preserve it).","error")}):d.resolve("")},p.prototype._showFeedback=function(t){t=t||"",this.$widget.find(".draw-widget__feedback").text(t)},p.prototype._updateDownloadLink=function(t){t&&0===t.indexOf("data:")&&(t=URL.createObjectURL(h.dataUriToBlobSync(t))),this.$widget.find(".btn-download").attr({href:t||"",download:t?h.getFilename({name:this.element.value},this.element.dataset.filenamePostfix):""})},p.prototype._handleResize=function(t){var e=this;r(window).on("resize",function(){e._resizeCanvas(t)})},p.prototype._resizeCanvas=function(t){var e=Math.max(window.devicePixelRatio||1,1);t.width=t.offsetWidth*e,t.height=t.offsetHeight*e,t.getContext("2d").scale(e,e),r(t).trigger("canvasreload."+this.namespace)},p.prototype.disable=function(){var t=this,e=this.$widget.find(".draw-widget__body__canvas")[0];this.initialize.then(function(){t.pad.off(),e.classList.add("disabled"),t.$widget.find(".draw-widget__btn-reset").prop("disabled",!0)})},p.prototype.enable=function(){var t=this,e=this.$widget.find(".draw-widget__body__canvas")[0],n=this.props.touch&&!this.$widget.is(".full-screen"),i=this.props.load&&!this.element.value;this.initialize.then(function(){t.props.readonly||i||n||(t.pad.on(),e.classList.remove("disabled"),t.$widget.find(".draw-widget__btn-reset").prop("disabled",!1)),t._resizeCanvas(e)})},p.prototype.update=function(t){""===t.value&&this._reset()},r.fn[o]=function(t,e){return t=t||{},this.each(function(){var n=r(this),i=n.data(o);i||"object"!=typeof t||n.data(o,new p(this,t,e)),i&&"string"==typeof t&&i[t](this)})},t.exports={name:o,selector:'.or-appearance-draw input[data-type-xml="binary"][accept^="image"], .or-appearance-signature input[data-type-xml="binary"][accept^="image"], .or-appearance-annotate input[data-type-xml="binary"][accept^="image"]'}},function(t,e,n){
/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width BÃ©zier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic BÃ©zier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a BÃ©zier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */
t.exports=function(){"use strict";function t(t,e,n){this.x=t,this.y=e,this.time=n||(new Date).getTime()}function e(t,e,n,i){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=i}function n(t,e){var i=this,r=e||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this.throttle?this._strokeMoveUpdate=function(t,e,n){var i,r,o,s=null,a=0;n||(n={});var u=function(){a=!1===n.leading?0:Date.now(),s=null,o=t.apply(i,r),s||(i=r=null)};return function(){var l=Date.now();a||!1!==n.leading||(a=l);var c=e-(l-a);return i=this,r=arguments,c<=0||c>e?(s&&(clearTimeout(s),s=null),a=l,o=t.apply(i,r),s||(i=r=null)):s||!1===n.trailing||(s=setTimeout(u,c)),o}}(n.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=n.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(i._mouseButtonDown=!0,i._strokeBegin(t))},this._handleMouseMove=function(t){i._mouseButtonDown&&i._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&i._mouseButtonDown&&(i._mouseButtonDown=!1,i._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var e=t.changedTouches[0];i._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];i._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){var e=t.target===i._canvas;e&&(t.preventDefault(),i._strokeEnd(t))},this.on()}return t.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},e.prototype.length=function(){for(var t=0,e=void 0,n=void 0,i=0;i<=10;i+=1){var r=i/10,o=this._point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),s=this._point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var a=o-e,u=s-n;t+=Math.sqrt(a*a+u*u)}e=o,n=s}return t},e.prototype._point=function(t,e,n,i,r){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*i*(1-t)*t*t+r*t*t*t},n.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},n.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new Image,r=n.ratio||window.devicePixelRatio||1,o=n.width||this._canvas.width/r,s=n.height||this._canvas.height/r;this._reset(),i.src=t,i.onload=function(){e._ctx.drawImage(i,0,0,o,s)},this._isEmpty=!1},n.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(e=this._canvas).toDataURL.apply(e,[t].concat(i))}},n.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},n.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},n.prototype.isEmpty=function(){return this._isEmpty},n.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},n.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,i=this._createPoint(e,n),r=this._data[this._data.length-1],o=r&&r[r.length-1],s=o&&i.distanceTo(o)<this.minDistance;if(!o||!s){var a=this._addPoint(i),u=a.curve,l=a.widths;u&&l&&this._drawCurve(u,l.start,l.end),this._data[this._data.length-1].push({x:i.x,y:i.y,time:i.time,color:this.penColor})}},n.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var i=this._data[this._data.length-1],r=i[i.length-1];n.equals(r)||i.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(t)},n.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},n.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},n.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},n.prototype._createPoint=function(e,n,i){var r=this._canvas.getBoundingClientRect();return new t(e-r.left,n-r.top,i||(new Date).getTime())},n.prototype._addPoint=function(t){var n=this.points;if(n.push(t),n.length>2){3===n.length&&n.unshift(n[0]);var i=this._calculateCurveControlPoints(n[0],n[1],n[2]).c2,r=this._calculateCurveControlPoints(n[1],n[2],n[3]).c1,o=new e(n[1],i,r,n[2]),s=this._calculateCurveWidths(o);return n.shift(),{curve:o,widths:s}}return{}},n.prototype._calculateCurveControlPoints=function(e,n,i){var r=e.x-n.x,o=e.y-n.y,s=n.x-i.x,a=n.y-i.y,u=(e.x+n.x)/2,l=(e.y+n.y)/2,c=(n.x+i.x)/2,h=(n.y+i.y)/2,d=Math.sqrt(r*r+o*o),p=Math.sqrt(s*s+a*a),f=p/(d+p),m=c+(u-c)*f,g=h+(l-h)*f,v=n.x-m,y=n.y-g;return{c1:new t(u+v,l+y),c2:new t(c+v,h+y)}},n.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,i={start:null,end:null},r=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(r);return i.start=this._lastWidth,i.end=o,this._lastVelocity=r,this._lastWidth=o,i},n.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},n.prototype._drawPoint=function(t,e,n){var i=this._ctx;i.moveTo(t,e),i.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1},n.prototype._drawCurve=function(t,e,n){var i=this._ctx,r=n-e,o=Math.floor(t.length());i.beginPath();for(var s=0;s<o;s+=1){var a=s/o,u=a*a,l=u*a,c=1-a,h=c*c,d=h*c,p=d*t.startPoint.x;p+=3*h*a*t.control1.x,p+=3*c*u*t.control2.x,p+=l*t.endPoint.x;var f=d*t.startPoint.y;f+=3*h*a*t.control1.y,f+=3*c*u*t.control2.y,f+=l*t.endPoint.y;var m=e+l*r;this._drawPoint(p,f,m)}i.closePath(),i.fill()},n.prototype._drawDot=function(t){var e=this._ctx,n="function"==typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()},n.prototype._fromData=function(e,n,i){for(var r=0;r<e.length;r+=1){var o=e[r];if(o.length>1)for(var s=0;s<o.length;s+=1){var a=o[s],u=new t(a.x,a.y,a.time),l=a.color;if(0===s)this.penColor=l,this._reset(),this._addPoint(u);else if(s!==o.length-1){var c=this._addPoint(u),h=c.curve,d=c.widths;h&&d&&n(h,d,l)}}else this._reset(),i(o[0])}},n.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,i=Math.max(window.devicePixelRatio||1,1),r=n.width/i,o=n.height/i,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"width",n.width),s.setAttributeNS(null,"height",n.height),this._fromData(e,function(t,e,n){var i=document.createElement("path");if(!(isNaN(t.control1.x)||isNaN(t.control1.y)||isNaN(t.control2.x)||isNaN(t.control2.y))){var r="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" C "+t.control1.x.toFixed(3)+","+t.control1.y.toFixed(3)+" "+t.control2.x.toFixed(3)+","+t.control2.y.toFixed(3)+" "+t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3);i.setAttribute("d",r),i.setAttribute("stroke-width",(2.25*e.end).toFixed(3)),i.setAttribute("stroke",n),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),s.appendChild(i)}},function(e){var n=document.createElement("circle"),i="function"==typeof t.dotSize?t.dotSize():t.dotSize;n.setAttribute("r",i),n.setAttribute("cx",e.x),n.setAttribute("cy",e.y),n.setAttribute("fill",e.color),s.appendChild(n)});var a='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+r+" "+o+'" width="'+r+'" height="'+o+'">',u=s.innerHTML;if(void 0===u){var l=document.createElement("dummy"),c=s.childNodes;l.innerHTML="";for(var h=0;h<c.length;h+=1)l.appendChild(c[h].cloneNode(!0));u=l.innerHTML}return"data:image/svg+xml;base64,"+btoa(a+u+"</svg>")},n.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(t,n){return e._drawCurve(t,n.start,n.end)},function(t){return e._drawDot(t)}),this._data=t},n.prototype.toData=function(){return this._data},n}()},function(t,e,n){"use strict";t.exports={name:"likertitem"}},function(t,e,n){"use strict";var i=n(1),r=n(0);n(44);var o="distresspicker";function s(t,e){this.namespace=o,i.call(this,t,e),this._init()}s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype._init=function(){var t=Number(this.element.value)||-1;this.props=this._getProps(),r(this.element).slider({reversed:!0,min:-1,max:10,orientation:"vertical",step:this.props.step,value:t,enabled:!this.props.readonly}).closest(".question").addClass("or-distress-initialized"),this.$widget=r(this.element).next(".widget"),this.$slider=this.$widget.find(".slider"),this._addBulb(),this._addScale(),this._setChangeListener()},s.prototype._getProps=function(){var t=this.element.attributes["data-type-xml"].value;return{readonly:this.element.readOnly,step:"decimal"===t?.1:1}},s.prototype._addBulb=function(){this.$slider.append('<div class="bulb"><div class="inner"></div></div>')},s.prototype._addScale=function(){for(var t=r('<div class="scale"></div>'),e=10;e>=-1;e--)t.append('<div class="number"><div class="value">'+e+"</div></div>");this.$slider.prepend(t)},s.prototype._setChangeListener=function(){r(this.element).on("slideStop."+this.namespace,function(){-1===Number(this.value)&&(this.value=""),r(this).trigger("change")})},s.prototype.disable=function(){var t=""!==this.element.value?Number(this.element.value):-1;r(this.element).slider("disable").slider("setValue",t,!1)},s.prototype.enable=function(){r(this.element).slider("enable")},s.prototype.update=function(){var t=""!==this.element.value?Number(this.element.value):-1;t!==r(this.element).slider("getValue")&&r(this.element).slider("setValue",t,!1)},r.fn[o]=function(t,e){return this.each(function(){var n=r(this),i=r(this).data(o);t=t||{},i||"object"!=typeof t?i&&"string"==typeof t&&i[t](this):n.data(o,new s(this,t,e))})},t.exports={name:o,selector:'.or-appearance-distress input[type="number"]'}},function(t,e,n){"use strict";var i=n(0),r=n(1),o="horizontalChoices";function s(t,e){this.namespace=o,r.call(this,t,e),this._init()}s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype._init=function(){i(this.element).find(".option-wrapper").each(function(){for(var t=i(this),e=3-t.find("label").length%3;e<3&&e>0;)t.append('<label class="filler"></label>'),e--;i(this).closest(".question").addClass("or-horizontal-initialized")})},i.fn[o]=function(t,e){return t=t||{},this.each(function(){var n=i(this),r=n.data(o);r||"object"!=typeof t?r&&"string"==typeof t&&r[t](this):n.data(o,new s(this,t,e))})},t.exports={name:o,selector:".or-appearance-horizontal"}},function(t,e,n){"use strict";var i=n(1),r=n(0),o="analogscalepicker",s=n(4);function a(t,e){this.namespace=o,i.call(this,t,e),this._init()}n(44),a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype._init=function(){var t=r(this.element).closest(".question").addClass("or-analog-scale-initialized"),e=r(this.element),n=Number(this.element.value)||-1;this.props=this._getProps(t),e.slider({reversed:"vertical"===this.props.orientation,min:0,max:100,orientation:this.props.orientation,step:this.props.step,value:n,enabled:!this.props.readonly}),this.$widget=e.next(".widget"),this.$slider=this.$widget.find(".slider"),this.$labelContent=r('<div class="label-content widget" />').prependTo(t),this.$originalLabels=t.find(".question-label, .or-hint, .or-required-msg, .or-constraint-msg"),this.$labelContent.append(this.$originalLabels),this._renderResetButton(),this._renderLabels(),this._renderScale(),this._setChangeListener(),this._setResizeListener(),e.trigger("programmaticChange"+this.namespace)},a.prototype._getProps=function(t){var e=t.attr("class").split(" ").map(function(t){return t.substring(14)}),n=this.element.attributes["data-type-xml"].value;return{touch:s.touch,readonly:this.element.readOnly,step:"decimal"===n?.1:1,orientation:-1!==e.indexOf("horizontal")?"horizontal":"vertical"}},a.prototype._renderLabels=function(){var t=this.$labelContent.find(".question-label.active"),e=t.html().split(/\|/).map(function(t){return t.trim()});this.$mainLabel=this.$mainLabel||r('<span class="question-label widget active" />').insertAfter(t),this.$mainLabel.empty().append(e[0]),this.$maxLabel=this.$maxLabel||r('<div class="max-label" />').prependTo(this.$widget),this.$maxLabel.empty().append(e[1]),this.$minLabel=this.$minLabel||r('<div class="min-label" />').appendTo(this.$widget),this.$minLabel.empty().append(e[2]),e[3]?(this.$showValue=this.$showValue||r('<div class="widget show-value" />').appendTo(this.$labelContent),this.$showValue.empty().append('<div class="show-value__box">'+e[3]+'<span class="show-value__value">'+this.element.value+"</span></div>")):this.$showValue&&(this.$showValue.remove(),this.$showValue=void 0)},a.prototype._renderScale=function(){var t,e=r('<div class="scale"></div>');if("vertical"===this.props.orientation)for(t=100;t>=0;t-=10)e.append(this._getNumberHtml(t));else for(t=0;t<=100;t+=10)e.append(this._getNumberHtml(t));this.$slider.prepend(e)},a.prototype._getNumberHtml=function(t){return'<div class="scale__number"><div class="scale__ticks"></div><div class="scale__value">'+t+"</div></div>"},a.prototype._renderResetButton=function(){var t=this;this.$resetBtn=r('<button class="btn-icon-only btn-reset" aria-label="reset"><i class="icon icon-refresh"></i></button>').appendTo(this.$widget).on("click",function(){return r(t.element).slider("setValue",0,!1),r(t.element).val("").trigger("programmaticChange"+t.namespace),!1}).prop("disabled",t.props.readonly)},a.prototype._updateCurrentValueShown=function(){this.$showValue&&this.$showValue.find(".show-value__value").text(this.element.value)},a.prototype._setChangeListener=function(){var t=this;r(this.element).on("slideStop."+this.namespace+" programmaticChange"+this.namespace,function(){var e=""===this.value;r(this).trigger("change"),t.$resetBtn.prop("disabled",e||t.props.readonly),t.$slider.toggleClass("slider--empty",e),t._updateCurrentValueShown()})},a.prototype._setResizeListener=function(){var t=r(this.element).closest(".question");t.hasClass("or-appearance-horizontal")||t.on("pageflip.enketo",this._stretchHeight)},a.prototype._stretchHeight=function(){var t=r(this).closest(".question").css("min-height","auto"),e=t.outerHeight(),n=t.closest(".or"),i=n.offset().top+n.height()-(t.offset().top+e)-10;i&&t.css("min-height",e+i+"px")},a.prototype.disable=function(){var t=""!==this.element.value?Number(this.element.value):0;r(this.element).slider("disable").slider("setValue",t,!1)},a.prototype.enable=function(){r(this.element).slider("enable")},a.prototype.update=function(){var t=""!==this.element.value?Number(this.element.value):0;t!==r(this.element).slider("getValue")&&r(this.element).slider("setValue",t,!1).trigger("programmaticChange"+this.namespace),this._renderLabels()},r.fn[o]=function(t,e){return this.each(function(){var n=r(this),i=r(this).data(o);t=t||{},i||"object"!=typeof t?i&&"string"==typeof t&&i[t](this):n.data(o,new a(this,t,e))})},t.exports={name:o,selector:'.or-appearance-analog-scale input[type="number"]'}},function(t,e,n){"use strict";var i=n(1),r=n(0),o="imageViewer";function s(t,e){this.namespace=o,i.call(this,t,e),this._init()}s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype._init=function(){r(this.element).on("click",function(){var t=r(this),e=t.attr("href"),n=t.find("img"),i=n.attr("src");return t.attr("href",i),n.attr("src",e),t.toggleClass("open"),!1})},r.fn[o]=function(t,e){return t=t||{},this.each(function(){var n=r(this),i=n.data(o);i||"object"!=typeof t?i&&"string"==typeof t&&i[t](this):n.data(o,new s(this,t,e))})},t.exports={name:o,selector:"a.or-big-image"}},function(t,e,n){"use strict";var i=n(1),r=n(0),o="comment",s=n(6).t;function a(t,e){this.namespace=o,i.call(this,t,e),this._init()}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype._init=function(){this.$linkedQuestion=this._getLinkedQuestion(this.element),this.$commentQuestion=r(this.element).closest(".question"),1===this.$linkedQuestion.length&&(this.$commentQuestion.addClass("hide").attr("role","comment"),this.$commentButton=r('<a class="btn-icon-only btn-comment aria-label="comment" type="button" href="#"><i class="icon"> </i></a>'),this._setCommentButtonState(this.element.value),this.$linkedQuestion.find(".question-label").last().after(this.$commentButton),this._setCommentButtonHandler(),this._setValidationHandler(),this._setFocusHandler())},a.prototype._getLinkedQuestion=function(t){var e=r(t),n=this.options.helpers.input.getName(e),i=t.dataset.for.trim(),o=this.options.helpers.pathToAbsolute(i,n),s=r(t).closest("form.or, .or-repeat");return this.options.helpers.input.getWrapNodes(s.find('[name="'+o+'"], [data-name="'+o+'"]')).eq(0)},a.prototype._commentHasError=function(){return this.$commentQuestion.hasClass("invalid-required")||this.$commentQuestion.hasClass("invalid-constraint")},a.prototype._setCommentButtonState=function(t,e){t="string"==typeof t?t.trim():t,this.$commentButton.toggleClass("empty",!t),this.$commentButton.toggleClass("invalid",!!e)},a.prototype._setCommentButtonHandler=function(){var t=this;this.$commentButton.click(function(){return t._isCommentModalShown(t.$linkedQuestion)?t._hideCommentModal(t.$linkedQuestion):t._showCommentModal(),!1})},a.prototype._setValidationHandler=function(){var t=this;r("form.or").on("validationcomplete.enketo",function(){var e=t._commentHasError(),n=t.element.value;t._setCommentButtonState(n,e)})},a.prototype._setFocusHandler=function(){var t=this;r(this.element).on("applyfocus",function(){t.$commentButton.is(":visible")?t.$commentButton.click():console.log("The linked question is not visible. Cannot apply focus to "+t.element.getAttribute("name"))})},a.prototype._isCommentModalShown=function(t){return 1===t.find(".or-comment-widget").length},a.prototype._showCommentModal=function(){var t,e,n,i,o=this,a=r(this.element).closest(".question").clone(!1),u=s("widget.comment.update")||"Update",l=r('<button class="btn btn-primary or-comment-widget__content__btn-update" type="button">'+u+"</button>"),c=r('<button class="btn-icon-only or-comment-widget__content__btn-close-x" type="button">&times;</button>');n=a.removeClass("hide").find("input, textarea").addClass("ignore").removeAttr("name data-for data-type-xml").removeData(),i=r('<div class="or-comment-widget__overlay"></div>'),e=r('<div class="or-comment-widget__content"></div>').append(a).append(c).append(l),t=r('<section class="widget or-comment-widget"></section>').append(i).append(e),this.$linkedQuestion.find(".or-comment-widget").remove().end().prepend(t).before(i.clone(!1)),n.focus(),t.get(0).scrollIntoView(!1),l.on("click",function(){var t,e=n.val();return r(o.element).val(e).trigger("change"),t=o._commentHasError(),o._setCommentButtonState(e,t),o._hideCommentModal(o.$linkedQuestion),o.options.helpers.input.validate(r(o.$linkedQuestion.get(0).querySelector("input, select, textarea"))),!1}),c.add(i).on("click",function(){return o._hideCommentModal(o.$linkedQuestion),!1})},a.prototype._hideCommentModal=function(t){t.find(".or-comment-widget").remove().end().prev(".or-comment-widget__overlay").remove()},r.fn[o]=function(t,e){return t=t||{},this.each(function(){var n=r(this),i=n.data(o);i||"object"!=typeof t?i&&"string"==typeof t&&i[t](this):n.data(o,new a(this,t,e))})},t.exports={name:o,selector:'.or-appearance-comment input[type="text"][data-for], .or-appearance-comment textarea[data-for]',helpersRequired:["input","pathToAbsolute"]}},function(t,e,n){"use strict";var i=n(1),r=n(0),o="imageMap",s=n(6).t;function a(t,e){this.namespace=o,i.call(this,t,e),this.options=e,this._init()}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype._init=function(){var t=this,e=this.element.querySelector("img");if(this.$inputs=r(this.element).find("input"),this.props=this._getProps(),this.element.classList.add("or-image-map-initialized"),!e)return this._showSvgNotFoundError();e.getAttribute("src")?this._addMarkup(e).then(this._addFunctionality.bind(this)):r(e).on("load",function(){t._addMarkup(e).then(t._addFunctionality.bind(t))})},a.prototype._addFunctionality=function(t){this.$svg=t.find("svg"),this.$tooltip=t.find(".image-map__ui__tooltip"),this.props.readonly&&this.disable(),this._setSvgClickHandler(),this._setChangeHandler(),this._setHoverHandler(),this._updateImage()},a.prototype._getProps=function(){return{readonly:this.$inputs[0].readOnly}},a.prototype._addMarkup=function(t){var e=this,n=t.getAttribute("src");return r.get(n).then(function(t){var n,i,o,s;if(e._isSvgDoc(t)){n=e._removeUnmatchedIds(r(t.querySelector("svg"))),i=r('<div class="widget image-map"/>').append('<div class="image-map__ui"><span class="image-map__ui__tooltip"></span></div>').append(n),r(e.element).find("img").remove(),r(e.element).find(".option-wrapper").before(i);var a={};try{a=n[0].getBBox()}catch(t){console.error("Could not obtain Boundary Box of SVG element",t)}return o=a.width||n.attr("width"),s=a.height||n.attr("height"),n.attr("viewBox",[0,0,parseInt(o,10),parseInt(s,10)].join(" ")),i}throw"Image is not an SVG doc"}).catch(this._showSvgNotFoundError.bind(e))},a.prototype._showSvgNotFoundError=function(){r(this.element).find(".option-wrapper").before('<div class="widget image-map"><div class="image-map__error">'+s("imagemap.svgNotFound")+"</div></div>")},a.prototype._removeUnmatchedIds=function(t){var e=this;return t.find("path[id], g[id]").each(function(){e._getInput(this.id)||this.removeAttribute("id")}),t},a.prototype._getInput=function(t){return this.element.querySelector('input[value="'+t+'"]')},a.prototype._setSvgClickHandler=function(){var t=this;this.$svg.not("[or-readonly]").on("click","path[id], g[id]",function(e){var n=e.target.id||r(e.target).closest("g[id]")[0].id,i=t._getInput(n);i&&r(i).prop("checked",!i.checked).trigger("change")})},a.prototype._setChangeHandler=function(){this.$inputs.on("change inputupdate.enketo",this._updateImage.bind(this))},a.prototype._setHoverHandler=function(){var t=this;this.$svg.on("mouseenter","path[id], g[id]",function(e){var n=e.target.id||r(e.target).closest("g[id]")[0].id,i=r(t._getInput(n)).siblings(".option-label.active").text();t.$tooltip.text(i)}).on("mouseleave","path[id], g[id]",function(){t.$tooltip.text("")})},a.prototype._isSvgDoc=function(t){return"object"==typeof t&&t.querySelector("svg")},a.prototype._updateImage=function(){var t=this,e=this.options.helpers.input.getVal(this.$inputs.eq(0));this.$svg.find("path[or-selected], g[or-selected]").removeAttr("or-selected"),"string"==typeof e&&(e=[e]),e.forEach(function(e){e&&t.$svg.find("path#"+e+",g#"+e).attr("or-selected","")})},a.prototype.disable=function(){this.$svg.attr("or-readonly","")},a.prototype.enable=function(){this.props.readonly||this.$svg.removeAttr("or-readonly")},r.fn[o]=function(t,e){return t=t||{},this.each(function(){var n=r(this),i=n.data(o);i||"object"!=typeof t?i&&"string"==typeof t&&i[t](this):n.data(o,new a(this,t,e))})},t.exports={name:o,selector:".simple-select.or-appearance-image-map",helpersRequired:["input"]}},function(t,e,n){"use strict";var i=n(0);t.exports={init:function(){var t,e=this,n=i(".form-language-selector");if(!this.form)throw new Error("Language module not correctly instantiated with form property.");this.$formLanguages=this.form.view.$.find("#form-languages"),this.currentLang=this.$formLanguages.attr("data-default-lang")||this.$formLanguages.find("option").eq(0).attr("value"),t=this.$formLanguages.find('[value="'+this.currentLang+'"]').attr("data-dir")||"ltr",this.$formLanguages.detach().appendTo(n).val(this.currentLang),this.form.view.$.attr("dir",t),this.$formLanguages.find("option").length<2||(n.removeClass("hide"),this.$formLanguages.change(function(t){t.preventDefault(),e.currentLang=i(this).val(),e.setAll(e.currentLang)}))},getCurrentLang:function(){return this.currentLang},getCurrentLangDesc:function(){return this.$formLanguages.find('[value="'+this.currentLang+'"]').text()},setAll:function(t){var e=this,n=this.$formLanguages.find('[value="'+t+'"]').attr("data-dir")||"ltr";this.form.view.$.attr("dir",n).find("[lang]").removeClass("active").filter('[lang="'+t+'"], [lang=""]').filter(function(){var t=i(this);return!t.hasClass("or-form-short")||t.hasClass("or-form-short")&&0===t.siblings(".or-form-long").length}).addClass("active"),window.enketoFormLocale=t,this.form.view.$.find("select, datalist").each(function(){e.setSelect(i(this))}),this.form.view.$.trigger("changelanguage")},setSelect:function(t){var e,n,r;t.children("option").not('[value=""], [data-value=""]').each(function(){var t=i(this);n=t.text(),e=t.attr("value")||t[0].dataset.value,r=void 0!==(r=t.closest(".question").find(".or-option-translations").children('.active[data-option-value="'+e+'"]').text().trim())&&r.length>0?r:n,t.text(r)})}}},function(t,e,n){"use strict";var i=n(0);t.exports={init:function(){var t,e,n,r,o,s,a,u=this;if(!this.form)throw new Error("Preload module not correctly instantiated with form property.");this.form.view.$.find("input[data-preload], select[data-preload], textarea[data-preload]").each(function(){a=i(this),s=u.form.input.getProps(a),t=a.attr("data-preload").toLowerCase(),e=a.attr("data-preload-params").toLowerCase(),void 0!==u[t]?(o=u.form.model.node(s.path,s.index)).get().length&&(n=o.getVal()[0],r=u[t]({param:e,curVal:n,dataNode:o}),o.setVal(r,null,s.xmlType)):console.log('Preload "'+t+'" not supported. May or may not be a big deal.')})},timestamp:function(t){var e,n=this;return"start"===t.param?t.curVal.length>0?t.curVal:this.form.model.evaluate("now()","string"):"end"===t.param?(this.form.view.$.on("beforesave",function(){e=n.form.model.evaluate("now()","string"),t.dataNode.setVal(e,null,"datetime")}),this.form.model.evaluate("now()","string")):"error - unknown timestamp parameter"},date:function(t){var e;return 0===t.curVal.length?(e=new Date(this.form.model.evaluate("today()","string"))).getFullYear().toString().pad(4)+"-"+(e.getMonth()+1).toString().pad(2)+"-"+e.getDate().toString().pad(2):t.curVal},property:function(t){var e;return 0===t.curVal.length?(e=this.form.model.node('instance("__session")/session/context/'+t.param)).get().length?e.getVal()[0]:"no "+t.param+" property in enketo":t.curVal},context:function(t){return 0===t.curVal.length?"application"===t.param?"enketo":t.param+" not supported in enketo":t.curVal},patient:function(t){return 0===t.curVal.length?"patient preload item not supported in enketo":t.curVal},user:function(t){return 0===t.curVal.length?"user preload item not supported in enketo yet":t.curVal},uid:function(t){return 0===t.curVal.length?this.form.model.evaluate('concat("uuid:", uuid())',"string"):t.curVal}}},function(t,e,n){"use strict";var i=n(0);t.exports={update:function(t){var e,n,r,o,s,a,u,l,c,h={},d="",p=this;if(!this.form)throw new Error("Output module not correctly instantiated with form property.");c=this.form.getRelatedNodes("data-value",".or-output",t),n=this.form.repeatsPresent&&this.form.view.$.find(".or-repeat.clone").length>0,c.each(function(){(a=i(this)).closest(".or-branch").parent().closest(".disabled").length||(e=a.attr("data-value"),(s=a.closest(".question, .note, .or-group")).is(".or-group")||(s=s.find("[name]").eq(0)),u=p.form.input.getName(s),s.children('.or-repeat-info[data-name="'+u+'"]').length&&!s.children('.or-repeat[name="'+u+'"]').length&&(u=null),r=n&&a.parentsUntil(".or",".or-repeat").length>0,o=r&&a.parentsUntil(".or",".or-repeat.clone").length>0,l=o&&u?p.form.input.getIndex(s):0,void 0!==h[e]?d=h[e]:(d=p.form.model.evaluate(e,"string",u,l,!0),r||(h[e]=d)),a.text()!==d&&a.text(d))})}}},function(t,e,n){"use strict";var i=n(0);t.exports={update:function(t,e){var n=this;if(e=e||"",!this.form)throw new Error("Calculation module not correctly instantiated with form property.");((t=t||{}).relevantPath?this.form.getRelatedNodes("data-calculate",'[name^="'+t.relevantPath+'/"]'+e).add(this.form.getRelatedNodes("data-calculate",'[name="'+t.relevantPath+'"]'+e)).add(this.form.getRelatedNodes("data-calculate",'[data-name="'+t.relevantPath+'"]'+e)):this.form.getRelatedNodes("data-calculate",e,t)).each(function(){var e,r,o,s,a,u,l,c,h,d,p,f,m;function g(t){var o=a.split("/"),s=o.splice(0,o.length-1).join("/"),u=n.form.view.$.find('.or-group[name="'+s+'"],.or-group-data[name="'+s+'"]').eq(t).parents(".or-group, .or-group-data").addBack();f=u.length?u.filter("[data-relevant]").reverse().get().map(function(t){var e=i(t),r=n.form.input.getName(e);return{context:r,index:n.form.view.$.find('.or-group[name="'+r+'"], .or-group-data[name="'+r+'"]').index(e),expr:n.form.input.getRelevant(e)}}).concat([{context:a,index:t,expr:p}]).every(function(t){return!t.expr||n.form.model.evaluate(t.expr,"boolean",t.context,t.index)}):!p||n.form.model.evaluate(p,"boolean",a,t),c=n.form.replaceChoiceNameFn(l,"string",a,t),e=f&&c?n.form.model.evaluate(c,"string",a,t):"",r.setIndex(t),r.setVal(e,d,h),n.form.input.setVal(a,t,r.getVal()[0])}m=i(this),u=-1!==(a=n.form.input.getName(m)).lastIndexOf("/")?a.substring(a.lastIndexOf("/")+1):a,l=n.form.input.getCalculation(m),h=n.form.input.getXmlType(m),d=n.form.input.getConstraint(m),p=n.form.input.getRelevant(m),(o=(r=n.form.model.node(a)).get()).length>1&&t.repeatPath&&-1!==a.indexOf(t.repeatPath)?(s=n.form.model.node(t.repeatPath,t.repeatIndex).get().find(u),g(i(o).index(s))):1===o.length?g(0):o.each(function(t){g(t)})})}}},function(t,e,n){"use strict";var i=n(0),r=n(5),o="xvc";function s(t,e,n){i(t).on("keydown",function(t){return!(!function(t){return t.key.length>1&&"Spacebar"!==t.key}(t)&&!function(t){return-1!==o.indexOf(t.key)&&(t.metaKey||t.ctrlKey)}(t)&&-1===n.indexOf(t.key))}).on("paste",function(t){var n=r.getPasteData(t);return!(!n||!e.test(n.trim()))||(i(this).val("").trigger("change"),!1)}).on("blur",function(){void 0!==this.validity&&void 0!==this.validity.badInput&&this.validity.badInput?this.value="":void 0===this.validity.badInput&&this.value&&!e.test(this.value.trim())&&(this.value="")})}t.exports={init:function(){s('[data-type-xml="int"]',/^(-?[0-9]+$)/,"-0123456789"),s('[data-type-xml="decimal"]',/^(-?[0-9]+[.,]?[0-9]*$)/,"-0123456789.,")}}},,function(t,e){
/**
 * @license AngularJS v1.5.8
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t){"use strict";function e(t,e){return e=e||Error,function(){var n,i,r=arguments,o=r[0],s="["+(t?t+":":"")+o+"] ";for(s+=r[1].replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1)+2;return e<r.length?Ft(r[e]):t}),s+="\nhttp://errors.angularjs.org/1.5.8/"+(t?t+"/":"")+o,i=2,n="?";i<r.length;i++,n="&")s+=n+"p"+(i-2)+"="+encodeURIComponent(Ft(r[i]));return new e(s)}}var n=/^\/(.+)\/([a-z]*)$/,i="validity",r=Object.prototype.hasOwnProperty,o=function(t){return j(t)?t.toLowerCase():t},s=function(t){return j(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(o=function(t){return j(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},s=function(t){return j(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t});var a,u,l,c,h=[].slice,d=[].splice,p=[].push,f=Object.prototype.toString,m=Object.getPrototypeOf,g=e("ng"),v=t.angular||(t.angular={}),y=0;function _(t){if(null==t||V(t))return!1;if(B(t)||j(t)||u&&t instanceof u)return!0;var e="length"in Object(t)&&t.length;return F(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function b(t,e,n){var i,o;if(t)if(U(t))for(i in t)"prototype"==i||"length"==i||"name"==i||t.hasOwnProperty&&!t.hasOwnProperty(i)||e.call(n,t[i],i,t);else if(B(t)||_(t)){var s="object"!=typeof t;for(i=0,o=t.length;i<o;i++)(s||i in t)&&e.call(n,t[i],i,t)}else if(t.forEach&&t.forEach!==b)t.forEach(e,n,t);else if(R(t))for(i in t)e.call(n,t[i],i,t);else if("function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else for(i in t)r.call(t,i)&&e.call(n,t[i],i,t);return t}function w(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function x(t){return function(e,n){t(n,e)}}function $(){return++y}function k(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function E(t,e,n){for(var i=t.$$hashKey,r=0,o=e.length;r<o;++r){var s=e[r];if(I(s)||U(s))for(var a=Object.keys(s),u=0,l=a.length;u<l;u++){var c=a[u],h=s[c];n&&I(h)?q(h)?t[c]=new Date(h.valueOf()):z(h)?t[c]=new RegExp(h):h.nodeName?t[c]=h.cloneNode(!0):K(h)?t[c]=h.clone():(I(t[c])||(t[c]=B(h)?[]:{}),E(t[c],[h],!0)):t[c]=h}}return k(t,i),t}function C(t){return E(t,h.call(arguments,1),!1)}function T(t){return E(t,h.call(arguments,1),!0)}function L(t){return parseInt(t,10)}function S(t,e){return C(Object.create(t),e)}function D(){}function M(t){return t}function A(t){return function(){return t}}function P(t){return U(t.toString)&&t.toString!==f}function N(t){return void 0===t}function O(t){return void 0!==t}function I(t){return null!==t&&"object"==typeof t}function R(t){return null!==t&&"object"==typeof t&&!m(t)}function j(t){return"string"==typeof t}function F(t){return"number"==typeof t}function q(t){return"[object Date]"===f.call(t)}a=t.document.documentMode,D.$inject=[],M.$inject=[];var B=Array.isArray;function U(t){return"function"==typeof t}function z(t){return"[object RegExp]"===f.call(t)}function V(t){return t&&t.window===t}function H(t){return t&&t.$evalAsync&&t.$watch}function W(t){return"boolean"==typeof t}function Z(t){return t&&U(t.then)}var G=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;var Y=function(t){return j(t)?t.trim():t},X=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function K(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function J(t){return o(t.nodeName||t[0]&&t[0].nodeName)}function Q(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function tt(t,e){var n=[],i=[];if(e){if(function(t){return t&&F(t.length)&&G.test(f.call(t))}(e)||function(t){return"[object ArrayBuffer]"===f.call(t)}(e))throw g("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw g("cpi","Can't copy! Source and destination are identical.");return B(e)?e.length=0:b(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),n.push(t),i.push(e),o(t,e)}return s(t);function o(t,e){var n,i=e.$$hashKey;if(B(t))for(var o=0,a=t.length;o<a;o++)e.push(s(t[o]));else if(R(t))for(n in t)e[n]=s(t[n]);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(e[n]=s(t[n]));else for(n in t)r.call(t,n)&&(e[n]=s(t[n]));return k(e,i),e}function s(t){if(!I(t))return t;var e=n.indexOf(t);if(-1!==e)return i[e];if(V(t)||H(t))throw g("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,a=function(t){switch(f.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(s(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(U(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===a&&(a=B(t)?[]:Object.create(m(t)),r=!0),n.push(t),i.push(a),r?o(t,a):a}}function et(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,i,r,o=typeof t;if(o==typeof e&&"object"==o){if(!B(t)){if(q(t))return!!q(e)&&et(t.getTime(),e.getTime());if(z(t))return!!z(e)&&t.toString()==e.toString();if(H(t)||H(e)||V(t)||V(e)||B(e)||q(e)||z(e))return!1;for(i in r=At(),t)if("$"!==i.charAt(0)&&!U(t[i])){if(!et(t[i],e[i]))return!1;r[i]=!0}for(i in e)if(!(i in r)&&"$"!==i.charAt(0)&&O(e[i])&&!U(e[i]))return!1;return!0}if(!B(e))return!1;if((n=t.length)==e.length){for(i=0;i<n;i++)if(!et(t[i],e[i]))return!1;return!0}}return!1}var nt=function(){if(!O(nt.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");nt.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else nt.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return nt.rules},it=function(){if(O(it.name_))return it.name_;var e,n,i,r,o=_t.length;for(n=0;n<o;++n)if(i=_t[n],e=t.document.querySelector("["+i.replace(":","\\:")+"jq]")){r=e.getAttribute(i+"jq");break}return it.name_=r};function rt(t,e,n){return t.concat(h.call(e,n))}function ot(t,e){return h.call(t,e||0)}function st(t,e){var n=arguments.length>2?ot(arguments,2):[];return!U(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,rt(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function at(e,n){var i=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=void 0:V(n)?i="$WINDOW":n&&t.document===n?i="$DOCUMENT":H(n)&&(i="$SCOPE"),i}function ut(t,e){if(!N(t))return F(e)||(e=e?2:null),JSON.stringify(t,at,e)}function lt(t){return j(t)?JSON.parse(t):t}var ct=/:/g;function ht(t,e){t=t.replace(ct,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function dt(t,e,n){n=n?-1:1;var i=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,n*(ht(e,i)-i))}function pt(t){t=u(t).clone();try{t.empty()}catch(t){}var e=u("<div>").append(t).html();try{return t[0].nodeType===Nt?o(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+o(e)})}catch(t){return o(e)}}function ft(t){try{return decodeURIComponent(t)}catch(t){}}function mt(t){var e={};return b((t||"").split("&"),function(t){var n,i,o;t&&(i=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(i=t.substring(0,n),o=t.substring(n+1)),O(i=ft(i))&&(o=!O(o)||ft(o),r.call(e,i)?B(e[i])?e[i].push(o):e[i]=[e[i],o]:e[i]=o))}),e}function gt(t){var e=[];return b(t,function(t,n){B(t)?b(t,function(t){e.push(yt(n,!0)+(!0===t?"":"="+yt(t,!0)))}):e.push(yt(n,!0)+(!0===t?"":"="+yt(t,!0)))}),e.length?e.join("&"):""}function vt(t){return yt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function yt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var _t=["ng-","data-ng-","ng:","x-ng-"];function bt(t,e){var n,i,r={};b(_t,function(e){var r=e+"app";!n&&t.hasAttribute&&t.hasAttribute(r)&&(n=t,i=t.getAttribute(r))}),b(_t,function(e){var r,o=e+"app";!n&&(r=t.querySelector("["+o.replace(":","\\:")+"]"))&&(n=r,i=r.getAttribute(o))}),n&&(r.strictDi=null!==function(t,e){var n,i,r=_t.length;for(i=0;i<r;++i)if(n=_t[i]+e,j(n=t.getAttribute(n)))return n;return null}(n,"strict-di"),e(n,i?[i]:[],r))}function wt(e,n,i){I(i)||(i={});i=C({strictDi:!1},i);var r=function(){if((e=u(e)).injector()){var r=e[0]===t.document?"document":pt(e);throw g("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=qe(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!s.test(t.name))return r();t.name=t.name.replace(s,""),v.resumeBootstrap=function(t){return b(t,function(t){n.push(t)}),r()},U(v.resumeDeferredBootstrap)&&v.resumeDeferredBootstrap()}function xt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function $t(t){var e=v.element(t).injector();if(!e)throw g("test","no injector found for element argument to getTestability");return e.get("$$testability")}var kt=/[A-Z]/g;function Et(t,e){return e=e||"_",t.replace(kt,function(t,n){return(n?e:"")+t.toLowerCase()})}var Ct=!1;function Tt(t,e,n){if(!t)throw g("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function Lt(t,e,n){return n&&B(t)&&(t=t[t.length-1]),Tt(U(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function St(t,e){if("hasOwnProperty"===t)throw g("badname","hasOwnProperty is not a valid {0} name",e)}function Dt(t,e,n){if(!e)return t;for(var i,r=e.split("."),o=t,s=r.length,a=0;a<s;a++)i=r[a],t&&(t=(o=t)[i]);return!n&&U(t)?st(o,t):t}function Mt(t){for(var e,n=t[0],i=t[t.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(e||t[r]!==n)&&(e||(e=u(h.call(t,0,r))),e.push(n));return e||t}function At(){return Object.create(null)}var Pt=1,Nt=3,Ot=8,It=9,Rt=11;function jt(t,e){if(B(t)){e=e||[];for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}else if(I(t))for(var r in e=e||{},t)"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r]);return e||t}function Ft(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):N(t)?"undefined":"string"!=typeof t?function(t){var e=[];return JSON.stringify(t,function(t,n){if(I(n=at(t,n))){if(e.indexOf(n)>=0)return"...";e.push(n)}return n})}(t):t}var qt={full:"1.5.8",major:1,minor:5,dot:8,codeName:"arbitrary-fallbacks"};se.expando="ng339";var Bt=se.cache={},Ut=1,zt=function(t,e,n){t.addEventListener(e,n,!1)},Vt=function(t,e,n){t.removeEventListener(e,n,!1)};se._data=function(t){return this.cache[t[this.expando]]||{}};var Ht=/([\:\-\_]+(.))/g,Wt=/^moz([A-Z])/,Zt={mouseleave:"mouseout",mouseenter:"mouseover"},Gt=e("jqLite");function Yt(t){return t.replace(Ht,function(t,e,n,i){return i?n.toUpperCase():n}).replace(Wt,"Moz$1")}var Xt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Kt=/<|&#?\w+;/,Jt=/<([\w:-]+)/,Qt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,te={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ee(t){return!Kt.test(t)}function ne(t){var e=t.nodeType;return e===Pt||!e||e===It}function ie(t,e){var n,i,r,o,s=e.createDocumentFragment(),a=[];if(ee(t))a.push(e.createTextNode(t));else{for(n=s.appendChild(e.createElement("div")),i=(Jt.exec(t)||["",""])[1].toLowerCase(),r=te[i]||te._default,n.innerHTML=r[1]+t.replace(Qt,"<$1></$2>")+r[2],o=r[0];o--;)n=n.lastChild;a=rt(a,n.childNodes),(n=s.firstChild).textContent=""}return s.textContent="",s.innerHTML="",b(a,function(t){s.appendChild(t)}),s}function re(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}te.optgroup=te.option,te.tbody=te.tfoot=te.colgroup=te.caption=te.thead,te.th=te.td;var oe=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function se(e){if(e instanceof se)return e;var n;if(j(e)&&(e=Y(e),n=!0),!(this instanceof se)){if(n&&"<"!=e.charAt(0))throw Gt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new se(e)}ge(this,n?function(e,n){var i;return n=n||t.document,(i=Xt.exec(e))?[n.createElement(i[1])]:(i=ie(e,n))?i.childNodes:[]}(e):e)}function ae(t){return t.cloneNode(!0)}function ue(t,e){if(e||ce(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),i=0,r=n.length;i<r;i++)ce(n[i])}function le(t,e,n,i){if(O(i))throw Gt("offargs","jqLite#off() does not support the `selector` argument");var r=he(t),o=r&&r.events,s=r&&r.handle;if(s)if(e){var a=function(e){var i=o[e];O(n)&&Q(i||[],n),O(n)&&i&&i.length>0||(Vt(t,e,s),delete o[e])};b(e.split(" "),function(t){a(t),Zt[t]&&a(Zt[t])})}else for(e in o)"$destroy"!==e&&Vt(t,e,s),delete o[e]}function ce(t,e){var n=t.ng339,i=n&&Bt[n];if(i){if(e)return void delete i.data[e];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),le(t)),delete Bt[n],t.ng339=void 0}}function he(t,e){var n=t.ng339,i=n&&Bt[n];return e&&!i&&(t.ng339=n=++Ut,i=Bt[n]={events:{},data:{},handle:void 0}),i}function de(t,e,n){if(ne(t)){var i=O(n),r=!i&&e&&!I(e),o=!e,s=he(t,!r),a=s&&s.data;if(i)a[e]=n;else{if(o)return a;if(r)return a&&a[e];C(a,e)}}}function pe(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function fe(t,e){e&&t.setAttribute&&b(e.split(" "),function(e){t.setAttribute("class",Y((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Y(e)+" "," ")))})}function me(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");b(e.split(" "),function(t){t=Y(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",Y(n))}}function ge(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;i<n;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function ve(t,e){return ye(t,"$"+(e||"ngController")+"Controller")}function ye(t,e,n){t.nodeType==It&&(t=t.documentElement);for(var i=B(e)?e:[e];t;){for(var r=0,o=i.length;r<o;r++)if(O(n=u.data(t,i[r])))return n;t=t.parentNode||t.nodeType===Rt&&t.host}}function _e(t){for(ue(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function be(t,e){e||ue(t);var n=t.parentNode;n&&n.removeChild(t)}var we=se.prototype={ready:function(e){var n=!1;function i(){n||(n=!0,e())}"complete"===t.document.readyState?t.setTimeout(i):(this.on("DOMContentLoaded",i),se(t).on("load",i))},toString:function(){var t=[];return b(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return u(t>=0?this[t]:this[this.length+t])},length:0,push:p,sort:[].sort,splice:[].splice},xe={};b("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){xe[o(t)]=t});var $e={};b("input,select,option,textarea,button,form,details".split(","),function(t){$e[t]=!0});var ke={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function Ee(t,e){var n=xe[e.toLowerCase()];return n&&$e[J(t)]&&n}function Ce(t,e,n){n.call(t,e)}function Te(t,e,n){var i=e.relatedTarget;i&&(i===t||oe.call(t,i))||n.call(t,e)}function Le(){this.$get=function(){return C(se,{hasClass:function(t,e){return t.attr&&(t=t[0]),pe(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),me(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),fe(t,e)}})}}function Se(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return n="function"==i||"object"==i&&null!==t?t.$$hashKey=i+":"+(e||$)():i+":"+t}function De(t,e){if(e){var n=0;this.nextUid=function(){return++n}}b(t,this.put,this)}b({data:de,removeData:ce,hasData:function(t){for(var e in Bt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)ce(t[e])}},function(t,e){se[e]=t}),b({data:de,inheritedData:ye,scope:function(t){return u.data(t,"$scope")||ye(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return u.data(t,"$isolateScope")||u.data(t,"$isolateScopeNoTemplate")},controller:ve,injector:function(t){return ye(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:pe,css:function(t,e,n){if(e=Yt(e),!O(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var i=t.nodeType;if(i!==Nt&&2!==i&&i!==Ot){var r=o(e);if(xe[r]){if(!O(n))return t[e]||(t.attributes.getNamedItem(e)||D).specified?r:void 0;n?(t[e]=!0,t.setAttribute(e,r)):(t[e]=!1,t.removeAttribute(r))}else if(O(n))t.setAttribute(e,n);else if(t.getAttribute){var s=t.getAttribute(e,2);return null===s?void 0:s}}},prop:function(t,e,n){if(!O(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(N(e)){var n=t.nodeType;return n===Pt||n===Nt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(N(e)){if(t.multiple&&"select"===J(t)){var n=[];return b(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){if(N(e))return t.innerHTML;ue(t,!0),t.innerHTML=e},empty:_e},function(t,e){se.prototype[e]=function(e,n){var i,r,o=this.length;if(t!==_e&&N(2==t.length&&t!==pe&&t!==ve?e:n)){if(I(e)){for(i=0;i<o;i++)if(t===de)t(this[i],e);else for(r in e)t(this[i],r,e[r]);return this}for(var s=t.$dv,a=N(s)?Math.min(o,1):o,u=0;u<a;u++){var l=t(this[u],e,n);s=s?s+l:l}return s}for(i=0;i<o;i++)t(this[i],e,n);return this}}),b({removeData:ce,on:function(t,e,n,i){if(O(i))throw Gt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ne(t)){var r=he(t,!0),o=r.events,s=r.handle;s||(s=r.handle=function(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type],o=r?r.length:0;if(o){if(N(n.immediatePropagationStopped)){var s=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),s&&s.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var a=r.specialHandlerWrapper||Ce;o>1&&(r=jt(r));for(var u=0;u<o;u++)n.isImmediatePropagationStopped()||a(t,n,r[u])}};return n.elem=t,n}(t,o));for(var a=e.indexOf(" ")>=0?e.split(" "):[e],u=a.length,l=function(e,i,r){var a=o[e];a||((a=o[e]=[]).specialHandlerWrapper=i,"$destroy"===e||r||zt(t,e,s)),a.push(n)};u--;)e=a[u],Zt[e]?(l(Zt[e],Te),l(e,void 0,!0)):l(e)}},off:le,one:function(t,e,n){(t=u(t)).on(e,function i(){t.off(e,n),t.off(e,i)}),t.on(e,n)},replaceWith:function(t,e){var n,i=t.parentNode;ue(t),b(new se(e),function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e})},children:function(t){var e=[];return b(t.childNodes,function(t){t.nodeType===Pt&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Pt||n===Rt)for(var i=0,r=(e=new se(e)).length;i<r;i++){var o=e[i];t.appendChild(o)}},prepend:function(t,e){if(t.nodeType===Pt){var n=t.firstChild;b(new se(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){re(t,u(e).eq(0).clone()[0])},remove:be,detach:function(t){be(t,!0)},after:function(t,e){for(var n=t,i=t.parentNode,r=0,o=(e=new se(e)).length;r<o;r++){var s=e[r];i.insertBefore(s,n.nextSibling),n=s}},addClass:me,removeClass:fe,toggleClass:function(t,e,n){e&&b(e.split(" "),function(e){var i=n;N(i)&&(i=!pe(t,e)),(i?me:fe)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Rt?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:ae,triggerHandler:function(t,e,n){var i,r,o,s=e.type||e,a=he(t),u=a&&a.events,l=u&&u[s];l&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:D,type:s,target:t},e.type&&(i=C(i,e)),r=jt(l),o=n?[i].concat(n):[i],b(r,function(e){i.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(t,e){se.prototype[e]=function(e,n,i){for(var r,o=0,s=this.length;o<s;o++)N(r)?O(r=t(this[o],e,n,i))&&(r=u(r)):ge(r,t(this[o],e,n,i));return O(r)?r:this},se.prototype.bind=se.prototype.on,se.prototype.unbind=se.prototype.off}),De.prototype={put:function(t,e){this[Se(t,this.nextUid)]=e},get:function(t){return this[Se(t,this.nextUid)]},remove:function(t){var e=this[t=Se(t,this.nextUid)];return delete this[t],e}};var Me=[function(){this.$get=[function(){return De}]}],Ae=/^([^\(]+?)=>/,Pe=/^[^\(]*\(\s*([^\)]*)\)/m,Ne=/,/,Oe=/^\s*(_?)(\S+?)\1\s*$/,Ie=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Re=e("$injector");function je(t){return Function.prototype.toString.call(t)+" "}function Fe(t){var e=je(t).replace(Ie,"");return e.match(Ae)||e.match(Pe)}function qe(t,e){e=!0===e;var n={},i="Provider",r=[],o=new De([],!0),s={$provide:{provider:f(m),factory:f(g),service:f(function(t,e){return g(t,["$injector",function(t){return t.instantiate(e)}])}),value:f(function(t,e){return g(t,A(e),!1)}),constant:f(function(t,e){St(t,"constant"),s[t]=e,l[t]=e}),decorator:function(t,e){var n=u.get(t+i),r=n.$get;n.$get=function(){var t=d.invoke(r,n);return d.invoke(e,null,{$delegate:t})}}}},u=s.$injector=y(s,function(t,e){throw v.isString(e)&&r.push(e),Re("unpr","Unknown provider: {0}",r.join(" <- "))}),l={},h=y(l,function(t,e){var n=u.get(t+i,e);return d.invoke(n.$get,n,void 0,t)}),d=h;s["$injector"+i]={$get:A(h)};var p=function t(e){Tt(N(e)||B(e),"modulesToLoad","not an array");var n,i=[];b(e,function(e){if(!o.get(e)){o.put(e,!0);try{j(e)?(n=c(e),i=i.concat(t(n.requires)).concat(n._runBlocks),r(n._invokeQueue),r(n._configBlocks)):U(e)?i.push(u.invoke(e)):B(e)?i.push(u.invoke(e)):Lt(e,"module")}catch(t){throw B(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1==t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),Re("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var i=t[e],r=u.get(i[0]);r[i[1]].apply(r,i[2])}}});return i}(t);return(d=h.get("$injector")).strictDi=e,b(p,function(t){t&&d.invoke(t)}),d;function f(t){return function(e,n){if(!I(e))return t(e,n);b(e,x(t))}}function m(t,e){if(St(t,"service"),(U(e)||B(e))&&(e=u.instantiate(e)),!e.$get)throw Re("pget","Provider '{0}' must define $get factory method.",t);return s[t+i]=e}function g(t,e,n){return m(t,{$get:!1!==n?function(t,e){return function(){var n=d.invoke(e,this);if(N(n))throw Re("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}(t,e):e})}function y(t,o){function u(e,i){if(t.hasOwnProperty(e)){if(t[e]===n)throw Re("cdep","Circular dependency found: {0}",e+" <- "+r.join(" <- "));return t[e]}try{return r.unshift(e),t[e]=n,t[e]=o(e,i)}catch(i){throw t[e]===n&&delete t[e],i}finally{r.shift()}}function l(t,n,i){for(var r=[],o=qe.$$annotate(t,e,i),s=0,a=o.length;s<a;s++){var l=o[s];if("string"!=typeof l)throw Re("itkn","Incorrect injection token! Expected service name as string, got {0}",l);r.push(n&&n.hasOwnProperty(l)?n[l]:u(l,i))}return r}return{invoke:function(t,e,n,i){"string"==typeof n&&(i=n,n=null);var r=l(t,n,i);return B(t)&&(t=t[t.length-1]),function(t){return!(a<=11)&&"function"==typeof t&&/^(?:class\b|constructor\()/.test(je(t))}(t)?(r.unshift(null),new(Function.prototype.bind.apply(t,r))):t.apply(e,r)},instantiate:function(t,e,n){var i=B(t)?t[t.length-1]:t,r=l(t,e,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))},get:u,annotate:qe.$$annotate,has:function(e){return s.hasOwnProperty(e+i)||t.hasOwnProperty(e)}}}}function Be(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,i,r){var o=n.document;function s(t){if(t){t.scrollIntoView();var e=function(){var t=a.yOffset;if(U(t))t=t();else if(K(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else F(t)||(t=0);return t}();if(e){var i=t.getBoundingClientRect().top;n.scrollBy(0,i-e)}}else n.scrollTo(0,0)}function a(t){var e;(t=j(t)?t:i.hash())?(e=o.getElementById(t))?s(e):(e=function(t){var e=null;return Array.prototype.some.call(t,function(t){if("a"===J(t))return e=t,!0}),e}(o.getElementsByName(t)))?s(e):"top"===t&&s(null):s(null)}return e&&r.$watch(function(){return i.hash()},function(e,n){e===n&&""===e||function(e,n){"complete"===(n=n||t).document.readyState?n.setTimeout(e):u(n).on("load",e)}(function(){r.$evalAsync(a)})}),a}]}qe.$$annotate=function(t,e,n){var i,r;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw j(n)&&n||(n=t.name||function(t){var e=Fe(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Re("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);b(Fe(t)[1].split(Ne),function(t){t.replace(Oe,function(t,e,n){i.push(n)})})}t.$inject=i}}else B(t)?(Lt(t[r=t.length-1],"fn"),i=t.slice(0,r)):Lt(t,"fn",!0);return i};var Ue=e("$animate"),ze=1;function Ve(t,e){return t||e?t?e?(B(t)&&(t=t.join(" ")),B(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function He(t){return I(t)?t:{}}var We=function(){this.$get=D},Ze=function(){var t=new De,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){return{enabled:D,on:D,off:D,pin:D,push:function(s,a,u,l){l&&l(),(u=u||{}).from&&s.css(u.from),u.to&&s.css(u.to),(u.addClass||u.removeClass)&&function(n,s,a){var u=t.get(n)||{},l=r(u,s,!0),c=r(u,a,!1);(l||c)&&(t.put(n,u),e.push(n),1===e.length&&i.$$postDigest(o))}(s,u.addClass,u.removeClass);var c=new n;return c.complete(),c}};function r(t,e,n){var i=!1;return e&&b(e=j(e)?e.split(" "):B(e)?e:[],function(e){e&&(i=!0,t[e]=n)}),i}function o(){b(e,function(e){var n=t.get(e);if(n){var i=function(t){j(t)&&(t=t.split(" "));var e=At();return b(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),r="",o="";b(n,function(t,e){t!==!!i[e]&&(t?r+=(r.length?" ":"")+e:o+=(o.length?" ":"")+e)}),b(e,function(t){r&&me(t,r),o&&fe(t,o)}),t.remove(e)}}),e.length=0}}]},Ge=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw Ue("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";e.$$registeredAnimations[n.substr(1)]=r,t.factory(r,i)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter&&new RegExp("(\\s+|\\/)ng-animate(\\s+|\\/)").test(this.$$classNameFilter.toString())))throw Ue("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===ze)return n}}(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,i,r,o){return i=i&&u(i),r=r&&u(r),e(n,i=i||r.parent(),r),t.push(n,"enter",He(o))},move:function(n,i,r,o){return i=i&&u(i),r=r&&u(r),e(n,i=i||r.parent(),r),t.push(n,"move",He(o))},leave:function(e,n){return t.push(e,"leave",He(n),function(){e.remove()})},addClass:function(e,n,i){return(i=He(i)).addClass=Ve(i.addclass,n),t.push(e,"addClass",i)},removeClass:function(e,n,i){return(i=He(i)).removeClass=Ve(i.removeClass,n),t.push(e,"removeClass",i)},setClass:function(e,n,i,r){return(r=He(r)).addClass=Ve(r.addClass,n),r.removeClass=Ve(r.removeClass,i),t.push(e,"setClass",r)},animate:function(e,n,i,r,o){return(o=He(o)).from=o.from?C(o.from,n):n,o.to=o.to?C(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=Ve(o.tempClasses,r),t.push(e,"animate",o)}}}]}],Ye=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t(function(){for(var t=0;t<e.length;t++)e[t]();e=[]})}return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]},Xe=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(t,e,n,i,r){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){var n=i[0];n&&n.hidden?function(t){r(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function i(){if(n===t.length)return void e(!0);t[n](function(t){!1!==t?(n++,i()):e(!1)})}()},o.all=function(t,e){var n=0,i=!0;function r(r){i=i&&r,++n===t.length&&e(i)}b(t,function(t){t.done(r)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:D,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(b(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},Ke=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,i){var r=i||{};r.$$prepared||(r=tt(r)),r.cleanupStyles&&(r.from=r.to=null),r.from&&(e.css(r.from),r.from=null);var o,s=new n;return{start:a,end:a};function a(){return t(function(){!function(){r.addClass&&(e.addClass(r.addClass),r.addClass=null);r.removeClass&&(e.removeClass(r.removeClass),r.removeClass=null);r.to&&(e.css(r.to),r.to=null)}(),o||s.complete(),o=!0}),s}}}]};function Je(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new function(t,e,n,i){var r=this,o=t.location,s=t.history,a=t.setTimeout,l=t.clearTimeout,c={};r.isMock=!1;var h=0,d=[];function p(t){try{t.apply(null,ot(arguments,1))}finally{if(0==--h)for(;d.length;)try{d.pop()()}catch(t){n.error(t)}}}r.$$completeOutstandingRequest=p,r.$$incOutstandingRequestCount=function(){h++},r.notifyWhenNoOutstandingRequests=function(t){0===h?t():d.push(t)};var f,m,g=o.href,v=e.find("base"),y=null,_=i.history?function(){try{return s.state}catch(t){}}:D;E(),m=f,r.url=function(e,n,a){if(N(a)&&(a=null),o!==t.location&&(o=t.location),s!==t.history&&(s=t.history),e){var u=m===a;if(g===e&&(!i.history||u))return r;var l=g&&Zn(g)===Zn(e);return g=e,m=a,!i.history||l&&u?(l||(y=e),n?o.replace(e):l?o.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):o.href=e,o.href!==e&&(y=e)):(s[n?"replaceState":"pushState"](a,"",e),E(),m=f),y&&(y=e),r}return y||o.href.replace(/%27/g,"'")},r.state=function(){return f};var w=[],x=!1;function $(){y=null,E(),C()}var k=null;function E(){et(f=N(f=_())?null:f,k)&&(f=k),k=f}function C(){g===r.url()&&m===f||(g=r.url(),m=f,b(w,function(t){t(r.url(),f)}))}r.onUrlChange=function(e){return x||(i.history&&u(t).on("popstate",$),u(t).on("hashchange",$),x=!0),w.push(e),e},r.$$applicationDestroyed=function(){u(t).off("hashchange popstate",$)},r.$$checkUrlChange=C,r.baseHref=function(){var t=v.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""},r.defer=function(t,e){var n;return h++,n=a(function(){delete c[n],p(t)},e||0),c[n]=!0,n},r.defer.cancel=function(t){return!!c[t]&&(delete c[t],l(t),p(D),!0)}}(t,i,e,n)}]}function Qe(){this.$get=function(){var t={};function n(n,i){if(n in t)throw e("$cacheFactory")("iid","CacheId '{0}' is already taken!",n);var r=0,o=C({},i,{id:n}),s=At(),a=i&&i.capacity||Number.MAX_VALUE,u=At(),l=null,c=null;return t[n]={put:function(t,e){if(!N(e)){if(a<Number.MAX_VALUE)h(u[t]||(u[t]={key:t}));return t in s||r++,s[t]=e,r>a&&this.remove(c.key),e}},get:function(t){if(a<Number.MAX_VALUE){var e=u[t];if(!e)return;h(e)}return s[t]},remove:function(t){if(a<Number.MAX_VALUE){var e=u[t];if(!e)return;e==l&&(l=e.p),e==c&&(c=e.n),d(e.n,e.p),delete u[t]}t in s&&(delete s[t],r--)},removeAll:function(){s=At(),r=0,u=At(),l=c=null},destroy:function(){s=null,o=null,u=null,delete t[n]},info:function(){return C({},o,{size:r})}};function h(t){t!=l&&(c?c==t&&(c=t.n):c=t,d(t.n,t.p),d(t,l),(l=t).n=null)}function d(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}}return n.info=function(){var e={};return b(t,function(t,n){e[n]=t.info()}),e},n.get=function(e){return t[e]},n}}function tn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var en=e("$compile");var nn=new function(){};function rn(e,n){var i={},s="Directive",l=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,c=/(([\w\-]+)(?:\:([^;]+))?;?)/,h=function(t){var e,n={},i=t.split(",");for(e=0;e<i.length;e++)n[i[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),d=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,p=/^(on[a-z]+|formaction)$/,m=At();function g(t,e,n){var i=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,r=At();return b(t,function(t,o){if(t in m)r[o]=m[t];else{var s=t.match(i);if(!s)throw en("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");r[o]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||o},s[4]&&(m[t]=r[o])}}),r}function v(t,e){var n={isolateScope:null,bindToController:null};if(I(t.scope)&&(!0===t.bindToController?(n.bindToController=g(t.scope,e,!0),n.isolateScope={}):n.isolateScope=g(t.scope,e,!1)),I(t.bindToController)&&(n.bindToController=g(t.bindToController,e,!0)),I(n.bindToController)){var i=t.controller,r=t.controllerAs;if(!i)throw en("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);if(!dn(i,r))throw en("noident","Cannot bind to controller without identifier for directive '{0}'.",e)}return n}this.directive=function t(n,r){return St(n,"directive"),j(n)?(!function(t){var e=t.charAt(0);if(!e||e!==o(e))throw en("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw en("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),Tt(r,"directiveFactory"),i.hasOwnProperty(n)||(i[n]=[],e.factory(n+s,["$injector","$exceptionHandler",function(t,e){var r=[];return b(i[n],function(i,o){try{var s=t.invoke(i);U(s)?s={compile:A(s)}:!s.compile&&s.link&&(s.compile=A(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||n,s.require=function(t){var e=t.require||t.controller&&t.name;return!B(e)&&I(e)&&b(e,function(t,n){var i=t.match(d);t.substring(i[0].length)||(e[n]=i[0]+n)}),e}(s),s.restrict=s.restrict||"EA",s.$$moduleName=i.$$moduleName,r.push(s)}catch(t){e(t)}}),r}])),i[n].push(r)):b(n,x(t)),this},this.component=function(t,e){var n=e.controller||function(){};function i(t){function i(e){return U(e)||B(e)?function(n,i){return t.invoke(e,this,{$element:n,$attrs:i})}:e}var r=e.template||e.templateUrl?e.template:"",o={controller:n,controllerAs:dn(e.controller)||e.controllerAs||"$ctrl",template:i(r),templateUrl:i(e.templateUrl),transclude:e.transclude,scope:{},bindToController:e.bindings||{},restrict:"E",require:e.require};return b(e,function(t,e){"$"===e.charAt(0)&&(o[e]=t)}),o}return b(e,function(t,e){"$"===e.charAt(0)&&(i[e]=t,U(n)&&(n[e]=t))}),i.$inject=["$injector"],this.directive(t,i)},this.aHrefSanitizationWhitelist=function(t){return O(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return O(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(t){return O(t)?(y=t,this):y};var _=10;this.onChangesTtl=function(t){return arguments.length?(_=t,this):_},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,m,g,w,x,$,k,E,T){var L,A=/^\w/,P=t.document.createElement("div"),R=_;function F(){try{if(!--R)throw L=void 0,en("infchng","{0} $onChanges() iterations reached. Aborting!\n",_);$.$apply(function(){for(var t=[],e=0,n=L.length;e<n;++e)try{L[e]()}catch(e){t.push(e)}if(L=void 0,t.length)throw t})}finally{R++}}function q(t,e){if(e){var n,i,r,o=Object.keys(e);for(n=0,i=o.length;n<i;n++)this[r=o[n]]=e[r]}else this.$attr={};this.$$element=t}function z(t,e){try{t.addClass(e)}catch(t){}}q.prototype={$normalize:an,$addClass:function(t){t&&t.length>0&&E.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&E.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=un(t,e);n&&n.length&&E.addClass(this.$$element,n);var i=un(e,t);i&&i.length&&E.removeClass(this.$$element,i)},$set:function(t,e,n,i){var r,o=Ee(this.$$element[0],t),s=function(t){return ke[t]}(t),a=t;if(o?(this.$$element.prop(t,e),i=o):s&&(this[s]=e,a=s),this[t]=e,i?this.$attr[t]=i:(i=this.$attr[t])||(this.$attr[t]=i=Et(t,"-")),"a"===(r=J(this.$$element))&&("href"===t||"xlinkHref"===t)||"img"===r&&"src"===t)this[t]=e=T(e,"src"===t);else if("img"===r&&"srcset"===t&&O(e)){for(var u="",l=Y(e),c=/\s/.test(l)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,h=l.split(c),d=Math.floor(h.length/2),p=0;p<d;p++){var f=2*p;u+=T(Y(h[f]),!0),u+=" "+Y(h[f+1])}var g=Y(h[2*p]).split(/\s/);u+=T(Y(g[0]),!0),2===g.length&&(u+=" "+Y(g[1])),this[t]=e=u}!1!==n&&(null===e||N(e)?this.$$element.removeAttr(i):A.test(i)?this.$$element.attr(i,e):function(t,e,n){P.innerHTML="<span "+e+">";var i=P.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,t.attributes.setNamedItem(r)}(this.$$element[0],i,e));var v=this.$$observers;v&&b(v[a],function(t){try{t(e)}catch(t){m(t)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=At()),r=i[t]||(i[t]=[]);return r.push(e),$.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(t)||N(n[t])||e(n[t])}),function(){Q(r,e)}}};var V=n.startSymbol(),Z=n.endSymbol(),G="{{"==V&&"}}"==Z?M:function(t){return t.replace(/\{\{/g,V).replace(/}}/g,Z)},X=/^ngAttr[A-Z]/,K=/^(.+)Start$/;return tt.$$addBindingInfo=y?function(t,e){var n=t.data("$binding")||[];B(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:D,tt.$$addBindingClass=y?function(t){z(t,"ng-binding")}:D,tt.$$addScopeInfo=y?function(t,e,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(r,e)}:D,tt.$$addScopeClass=y?function(t,e){z(t,e?"ng-isolate-scope":"ng-scope")}:D,tt.$$createComment=function(e,n){var i="";return y&&(i=" "+(e||"")+": ",n&&(i+=n+" ")),t.document.createComment(i)},tt;function tt(e,n,i,r,o){e instanceof u||(e=u(e));for(var s=/\S+/,a=0,l=e.length;a<l;a++){var c=e[a];c.nodeType===Nt&&c.nodeValue.match(s)&&re(c,e[a]=t.document.createElement("span"))}var h=nt(e,n,e,i,r,o);tt.$$addScopeClass(e);var d=null;return function(t,n,i){Tt(t,"scope"),o&&o.needsNewScope&&(t=t.$parent.$new());var r,s=(i=i||{}).parentBoundTranscludeFn,a=i.transcludeControllers,l=i.futureParentElement;if(s&&s.$$boundTransclude&&(s=s.$$boundTransclude),d||(d=function(t){var e=t&&t[0];return e&&"foreignobject"!==J(e)&&f.call(e).match(/SVG/)?"svg":"html"}(l)),r="html"!==d?u(bt(d,u("<div>").append(e).html())):n?we.clone.call(e):e,a)for(var c in a)r.data("$"+c+"Controller",a[c].instance);return tt.$$addScopeInfo(r,t),n&&n(r,t),h&&h(t,r,r,s),r}}function nt(t,e,n,i,r,o){for(var s,a,l,c,h,d,p,f=[],m=0;m<t.length;m++)s=new q,(l=(a=rt(t[m],[],s,0===m?i:void 0,r)).length?ct(a,t[m],s,e,n,null,[],[],o):null)&&l.scope&&tt.$$addScopeClass(s.$$element),h=l&&l.terminal||!(c=t[m].childNodes)||!c.length?null:nt(c,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:e),(l||h)&&(f.push(m,l,h),d=!0,p=p||l),o=null;return d?function(t,n,i,r){var o,s,a,l,c,h,d,m,g;if(p){var v=n.length;for(g=new Array(v),c=0;c<f.length;c+=3)d=f[c],g[d]=n[d]}else g=n;for(c=0,h=f.length;c<h;)a=g[f[c++]],o=f[c++],s=f[c++],o?(o.scope?(l=t.$new(),tt.$$addScopeInfo(u(a),l)):l=t,m=o.transcludeOnThisElement?it(t,o.transclude,r):!o.templateOnThisElement&&r?r:!r&&e?it(t,e):null,o(s,l,a,i,m)):s&&s(t,a.childNodes,void 0,r)}:null}function it(t,e,n){function i(i,r,o,s,a){return i||((i=t.$new(!1,a)).$$transcluded=!0),e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:s})}var r=i.$$slots=At();for(var o in e.$$slots)e.$$slots[o]?r[o]=it(t,e.$$slots[o],n):r[o]=null;return i}function rt(t,e,i,r,o){var s,u,h=t.nodeType,d=i.$attr;switch(h){case Pt:ft(e,an(J(t)),"E",r,o);for(var p,f,m,g,v,y,_=t.attributes,b=0,w=_&&_.length;b<w;b++){var x=!1,$=!1;f=(p=_[b]).name,v=Y(p.value),g=an(f),(y=X.test(g))&&(f=f.replace(sn,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var k=g.match(K);k&&mt(k[1])&&(x=f,$=f.substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),d[m=an(f.toLowerCase())]=f,!y&&i.hasOwnProperty(m)||(i[m]=v,Ee(t,m)&&(i[m]=!0)),wt(t,e,v,m,y),ft(e,m,"A",r,o,x,$)}if(I(u=t.className)&&(u=u.animVal),j(u)&&""!==u)for(;s=c.exec(u);)ft(e,m=an(s[2]),"C",r,o)&&(i[m]=Y(s[3])),u=u.substr(s.index+s[0].length);break;case Nt:if(11===a)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===Nt;)t.nodeValue=t.nodeValue+t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);!function(t,e){var i=n(e,!0);i&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&tt.$$addBindingClass(e),function(t,e){var r=e.parent();n||tt.$$addBindingClass(r),tt.$$addBindingInfo(r,i.expressions),t.$watch(i,function(t){e[0].nodeValue=t})}}})}(e,t.nodeValue);break;case Ot:!function(t,e,n,i,r){try{var o=l.exec(t.nodeValue);if(o){var s=an(o[1]);ft(e,s,"M",i,r)&&(n[s]=Y(o[2]))}}catch(t){}}(t,e,i,r,o)}return e.sort(yt),e}function at(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw en("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType==Pt&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),i.push(t),t=t.nextSibling}while(r>0);else i.push(t);return u(i)}function ut(t,e,n){return function(i,r,o,s,a){return r=at(r[0],e,n),t(i,r,o,s,a)}}function lt(t,e,n,i,r,o){var s;return t?tt(e,n,i,r,o):function(){return s||(s=tt(e,n,i,r,o),e=n=o=null),s.apply(this,arguments)}}function ct(t,e,n,i,r,o,s,a,l){l=l||{};for(var c,h,d,p,f,g=-Number.MAX_VALUE,v=l.newScopeDirective,y=l.controllerDirectives,_=l.newIsolateScopeDirective,w=l.templateDirective,$=l.nonTlbTranscludeDirective,k=!1,E=!1,T=l.hasElementTranscludeDirective,L=n.$$element=u(e),S=o,D=i,M=!1,A=!1,P=0,O=t.length;P<O;P++){var R=(c=t[P]).$$start,j=c.$$end;if(R&&(L=at(e,R,j)),d=void 0,g>c.priority)break;if((f=c.scope)&&(c.templateUrl||(I(f)?(_t("new/isolated scope",_||v,c,L),_=c):_t("new/isolated scope",_,c,L)),v=v||c),h=c.name,!M&&(c.replace&&(c.templateUrl||c.template)||c.transclude&&!c.$$tlb)){for(var F,z=P+1;F=t[z++];)if(F.transclude&&!F.$$tlb||F.replace&&(F.templateUrl||F.template)){A=!0;break}M=!0}if(!c.templateUrl&&c.controller&&(f=c.controller,y=y||At(),_t("'"+h+"' controller",y[h],c,L),y[h]=c),f=c.transclude)if(k=!0,c.$$tlb||(_t("transclusion",$,c,L),$=c),"element"==f)T=!0,g=c.priority,d=L,L=n.$$element=u(tt.$$createComment(h,n[h])),e=L[0],xt(r,ot(d),e),d[0].$$parentNode=d[0].parentNode,D=lt(A,d,i,g,S&&S.name,{nonTlbTranscludeDirective:$});else{var V=At();if(d=u(ae(e)).contents(),I(f)){d=[];var W=At(),Z=At();for(var X in b(f,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,W[t]=e,V[e]=null,Z[e]=n}),b(L.contents(),function(t){var e=W[an(J(t))];e?(Z[e]=!0,V[e]=V[e]||[],V[e].push(t)):d.push(t)}),b(Z,function(t,e){if(!t)throw en("reqslot","Required transclusion slot `{0}` was not filled.",e)}),V)V[X]&&(V[X]=lt(A,V[X],i))}L.empty(),(D=lt(A,d,i,void 0,void 0,{needsNewScope:c.$$isolateScope||c.$$newScope})).$$slots=V}if(c.template)if(E=!0,_t("template",w,c,L),w=c,f=U(c.template)?c.template(L,n):c.template,f=G(f),c.replace){if(S=c,d=ee(f)?[]:ln(bt(c.templateNamespace,Y(f))),e=d[0],1!=d.length||e.nodeType!==Pt)throw en("tplrt","Template for directive '{0}' must have exactly one root element. {1}",h,"");xt(r,L,e);var K={$attr:{}},Q=rt(e,[],K),et=t.splice(P+1,t.length-(P+1));(_||v)&&dt(Q,_,v),t=t.concat(Q).concat(et),gt(n,K),O=t.length}else L.html(f);if(c.templateUrl)E=!0,_t("template",w,c,L),w=c,c.replace&&(S=c),ct=vt(t.splice(P,t.length-P),L,n,r,k&&D,s,a,{controllerDirectives:y,newScopeDirective:v!==c&&v,newIsolateScopeDirective:_,templateDirective:w,nonTlbTranscludeDirective:$}),O=t.length;else if(c.compile)try{p=c.compile(L,n,D);var nt=c.$$originalDirective||c;U(p)?it(null,st(nt,p),R,j):p&&it(st(nt,p.pre),st(nt,p.post),R,j)}catch(t){m(t,pt(L))}c.terminal&&(ct.terminal=!0,g=Math.max(g,c.priority))}return ct.scope=v&&!0===v.scope,ct.transcludeOnThisElement=k,ct.templateOnThisElement=E,ct.transclude=D,l.hasElementTranscludeDirective=T,ct;function it(t,e,n,i){t&&(n&&(t=ut(t,n,i)),t.require=c.require,t.directiveName=h,(_===c||c.$$isolateScope)&&(t=$t(t,{isolateScope:!0})),s.push(t)),e&&(n&&(e=ut(e,n,i)),e.require=c.require,e.directiveName=h,(_===c||c.$$isolateScope)&&(e=$t(e,{isolateScope:!0})),a.push(e))}function ct(t,i,r,o,l){var c,h,d,p,f,g,$,k,E,L;for(var S in e===r?(E=n,k=n.$$element):E=new q(k=u(r),n),f=i,_?p=i.$new(!0):v&&(f=i.$parent),l&&(($=function(t,e,n,i){var r;H(t)||(i=n,n=e,e=t,t=void 0);T&&(r=g);n||(n=T?k.parent():k);if(!i)return l(t,e,r,n,O);var o=l.$$slots[i];if(o)return o(t,e,r,n,O);if(N(o))throw en("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,pt(k))}).$$boundTransclude=l,$.isSlotFilled=function(t){return!!l.$$slots[t]}),y&&(g=function(t,e,n,i,r,o,s){var a=At();for(var u in i){var l=i[u],c={$scope:l===s||l.$$isolateScope?r:o,$element:t,$attrs:e,$transclude:n},h=l.controller;"@"==h&&(h=e[l.name]);var d=x(h,c,!0,l.controllerAs);a[l.name]=d,t.data("$"+l.name+"Controller",d.instance)}return a}(k,E,$,y,p,i,_)),_&&(tt.$$addScopeInfo(k,p,!0,!(w&&(w===_||w===_.$$originalDirective))),tt.$$addScopeClass(k,!0),p.$$isolateBindings=_.$$isolateBindings,(L=Ct(i,E,p,p.$$isolateBindings,_)).removeWatches&&p.$on("$destroy",L.removeWatches)),g){var D=y[S],M=g[S],A=D.$$bindings.bindToController;M.identifier&&A?M.bindingInfo=Ct(f,E,M.instance,A,D):M.bindingInfo={};var P=M();P!==M.instance&&(M.instance=P,k.data("$"+D.name+"Controller",P),M.bindingInfo.removeWatches&&M.bindingInfo.removeWatches(),M.bindingInfo=Ct(f,E,M.instance,A,D))}for(b(y,function(t,e){var n=t.require;t.bindToController&&!B(n)&&I(n)&&C(g[e].instance,ht(e,n,k,g))}),b(g,function(t){var e=t.instance;if(U(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){m(t)}if(U(e.$onInit))try{e.$onInit()}catch(t){m(t)}U(e.$doCheck)&&(f.$watch(function(){e.$doCheck()}),e.$doCheck()),U(e.$onDestroy)&&f.$on("$destroy",function(){e.$onDestroy()})}),c=0,h=s.length;c<h;c++)kt(d=s[c],d.isolateScope?p:i,k,E,d.require&&ht(d.directiveName,d.require,k,g),$);var O=i;for(_&&(_.template||null===_.templateUrl)&&(O=p),t&&t(O,r.childNodes,void 0,l),c=a.length-1;c>=0;c--)kt(d=a[c],d.isolateScope?p:i,k,E,d.require&&ht(d.directiveName,d.require,k,g),$);b(g,function(t){var e=t.instance;U(e.$postLink)&&e.$postLink()})}}function ht(t,e,n,i){var r;if(j(e)){var o=e.match(d),s=e.substring(o[0].length),a=o[1]||o[3],u="?"===o[2];if("^^"===a?n=n.parent():r=(r=i&&i[s])&&r.instance,!r){var l="$"+s+"Controller";r=a?n.inheritedData(l):n.data(l)}if(!r&&!u)throw en("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,t)}else if(B(e)){r=[];for(var c=0,h=e.length;c<h;c++)r[c]=ht(t,e[c],n,i)}else I(e)&&(r={},b(e,function(e,o){r[o]=ht(t,e,n,i)}));return r||null}function dt(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i]=S(t[i],{$$isolateScope:e,$$newScope:n})}function ft(t,n,r,o,a,u,l){if(n===a)return null;var c=null;if(i.hasOwnProperty(n))for(var h,d=e.get(n+s),p=0,f=d.length;p<f;p++)try{if(h=d[p],(N(o)||o>h.priority)&&-1!=h.restrict.indexOf(r)){if(u&&(h=S(h,{$$start:u,$$end:l})),!h.$$bindings){var g=h.$$bindings=v(h,h.name);I(g.isolateScope)&&(h.$$isolateBindings=g.isolateScope)}t.push(h),c=h}}catch(t){m(t)}return c}function mt(t){if(i.hasOwnProperty(t))for(var n=e.get(t+s),r=0,o=n.length;r<o;r++)if(n[r].multiElement)return!0;return!1}function gt(t,e){var n=e.$attr,i=t.$attr;t.$$element;b(t,function(i,r){"$"!=r.charAt(0)&&(e[r]&&e[r]!==i&&(i+=("style"===r?";":" ")+e[r]),t.$set(r,i,!0,n[r]))}),b(e,function(e,r){t.hasOwnProperty(r)||"$"===r.charAt(0)||(t[r]=e,"class"!==r&&"style"!==r&&(i[r]=n[r]))})}function vt(t,e,n,i,r,o,s,a){var l,c,h=[],d=e[0],p=t.shift(),f=S(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),m=U(p.templateUrl)?p.templateUrl(e,n):p.templateUrl,v=p.templateNamespace;return e.empty(),g(m).then(function(g){var y,_,w,x;if(g=G(g),p.replace){if(w=ee(g)?[]:ln(bt(v,Y(g))),y=w[0],1!=w.length||y.nodeType!==Pt)throw en("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,m);_={$attr:{}},xt(i,e,y);var $=rt(y,[],_);I(p.scope)&&dt($,!0),t=$.concat(t),gt(n,_)}else y=d,e.html(g);for(t.unshift(f),l=ct(t,y,n,r,e,p,o,s,a),b(i,function(t,n){t==y&&(i[n]=e[0])}),c=nt(e[0].childNodes,r);h.length;){var k=h.shift(),E=h.shift(),C=h.shift(),T=h.shift(),L=e[0];if(!k.$$destroyed){if(E!==d){var S=E.className;a.hasElementTranscludeDirective&&p.replace||(L=ae(y)),xt(C,u(E),L),z(u(L),S)}x=l.transcludeOnThisElement?it(k,l.transclude,T):T,l(c,k,L,i,x)}}h=null}),function(t,e,n,i,r){var o=r;e.$$destroyed||(h?h.push(e,n,i,o):(l.transcludeOnThisElement&&(o=it(e,l.transclude,r)),l(c,e,n,i,o)))}}function yt(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function _t(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e)throw en("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,pt(i))}function bt(e,n){switch(e=o(e||"html")){case"svg":case"math":var i=t.document.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function wt(t,e,i,r,o){var s=function(t,e){if("srcdoc"==e)return k.HTML;var n=J(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?k.RESOURCE_URL:void 0}(t,r);o=h[r]||o;var a=n(i,!0,s,o);if(a){if("multiple"===r&&"select"===J(t))throw en("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",pt(t));e.push({priority:100,compile:function(){return{pre:function(t,e,u){var l=u.$$observers||(u.$$observers=At());if(p.test(r))throw en("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=u[r];c!==i&&(a=c&&n(c,!0,s,o),i=c),a&&(u[r]=a(t),(l[r]||(l[r]=[])).$$inter=!0,(u.$$observers&&u.$$observers[r].$$scope||t).$watch(a,function(t,e){"class"===r&&t!=e?u.$updateClass(t,e):u.$set(r,t)}))}}}})}}function xt(e,n,i){var r,o,s=n[0],a=n.length,l=s.parentNode;if(e)for(r=0,o=e.length;r<o;r++)if(e[r]==s){e[r++]=i;for(var c=r,h=c+a-1,d=e.length;c<d;c++,h++)h<d?e[c]=e[h]:delete e[c];e.length-=a-1,e.context===s&&(e.context=i);break}l&&l.replaceChild(i,s);var p=t.document.createDocumentFragment();for(r=0;r<a;r++)p.appendChild(n[r]);for(u.hasData(s)&&(u.data(i,u.data(s)),u(s).off("$destroy")),u.cleanData(p.querySelectorAll("*")),r=1;r<a;r++)delete n[r];n[0]=i,n.length=1}function $t(t,e){return C(function(){return t.apply(null,arguments)},t,e)}function kt(t,e,n,i,r,o){try{t(e,n,i,r,o)}catch(t){m(t,pt(n))}}function Ct(t,e,i,o,s){var a,u=[],l={};function c(e,n,r){U(i.$onChanges)&&n!==r&&(L||(t.$$postDigest(F),L=[]),a||(a={},L.push(h)),a[e]&&(r=a[e].previousValue),a[e]=new on(r,n))}function h(){i.$onChanges(a),a=void 0}return b(o,function(o,a){var h,d,p,f,m,g=o.attrName,v=o.optional;switch(o.mode){case"@":v||r.call(e,g)||(i[a]=e[g]=void 0),e.$observe(g,function(t){if(j(t)||W(t)){var e=i[a];c(a,t,e),i[a]=t}}),e.$$observers[g].$$scope=t,j(h=e[g])?i[a]=n(h)(t):W(h)&&(i[a]=h),l[a]=new on(nn,i[a]);break;case"=":if(!r.call(e,g)){if(v)break;e[g]=void 0}if(v&&!e[g])break;d=w(e[g]),f=d.literal?et:function(t,e){return t===e||t!=t&&e!=e},p=d.assign||function(){throw h=i[a]=d(t),en("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[g],g,s.name)},h=i[a]=d(t);var y=function(e){return f(e,i[a])||(f(e,h)?p(t,e=i[a]):i[a]=e),h=e};y.$stateful=!0,m=o.collection?t.$watchCollection(e[g],y):t.$watch(w(e[g],y),null,d.literal),u.push(m);break;case"<":if(!r.call(e,g)){if(v)break;e[g]=void 0}if(v&&!e[g])break;d=w(e[g]);var _=i[a]=d(t);l[a]=new on(nn,i[a]),m=t.$watch(d,function(t,e){if(e===t){if(e===_)return;e=_}c(a,t,e),i[a]=t},d.literal),u.push(m);break;case"&":if((d=e.hasOwnProperty(g)?w(e[g]):D)===D&&v)break;i[a]=function(e){return d(t,e)}}}),{initialChanges:l,removeWatches:u.length&&function(){for(var t=0,e=u.length;t<e;++t)u[t]()}}}}]}function on(t,e){this.previousValue=t,this.currentValue=e}rn.$inject=["$provide","$$sanitizeUriProvider"],on.prototype.isFirstChange=function(){return this.previousValue===nn};var sn=/^((?:x|data)[\:\-_])/i;function an(t){return Yt(t.replace(sn,""))}function un(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var o=0;o<i.length;o++){for(var s=i[o],a=0;a<r.length;a++)if(s==r[a])continue t;n+=(n.length>0?" ":"")+s}return n}function ln(t){var e=(t=u(t)).length;if(e<=1)return t;for(;e--;){t[e].nodeType===Ot&&d.call(t,e,1)}return t}var cn=e("$controller"),hn=/^(\S+)(\s+as\s+([\w$]+))?$/;function dn(t,e){if(e&&j(e))return e;if(j(t)){var n=hn.exec(t);if(n)return n[3]}}function pn(){var t={},n=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){St(e,"controller"),I(e)?C(t,e):t[e]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(i,r){return function(e,s,a,u){var l,c,h,d;if(a=!0===a,u&&j(u)&&(d=u),j(e)){if(!(c=e.match(hn)))throw cn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",e);h=c[1],d=d||c[3],Lt(e=t.hasOwnProperty(h)?t[h]:Dt(s.$scope,h,!0)||(n?Dt(r,h,!0):void 0),h,!0)}if(a){var p=(B(e)?e[e.length-1]:e).prototype;return l=Object.create(p||null),d&&o(s,d,l,h||e.name),C(function(){var t=i.invoke(e,l,s,h);return t!==l&&(I(t)||U(t))&&(l=t,d&&o(s,d,l,h||e.name)),l},{instance:l,identifier:d})}return l=i.instantiate(e,s,h),d&&o(s,d,l,h||e.name),l};function o(t,n,i,r){if(!t||!I(t.$scope))throw e("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,n);t.$scope[n]=i}}]}function fn(){this.$get=["$window",function(t){return u(t.document)}]}function mn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var gn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof u&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},vn="application/json",yn={"Content-Type":vn+";charset=utf-8"},_n=/^\[|^\{(?!\{)/,bn={"[":/]$/,"{":/}$/},wn=/^\)\]\}',?\n/,xn=e("$http"),$n=function(t){return function(){throw xn("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",t)}};function kn(t){return I(t)?q(t)?t.toISOString():ut(t):t}function En(){this.$get=function(){return function(t){if(!t)return"";var e=[];return w(t,function(t,n){null===t||N(t)||(B(t)?b(t,function(t){e.push(yt(n)+"="+yt(kn(t)))}):e.push(yt(n)+"="+yt(kn(t))))}),e.join("&")}}}function Cn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,i,r){if(null===n||N(n))return;B(n)?b(n,function(e,n){t(e,i+"["+(I(e)?n:"")+"]")}):I(n)&&!q(n)?w(n,function(e,n){t(e,i+(r?"":"[")+n+(r?"":"]"))}):e.push(yt(i)+"="+yt(kn(n)))}(t,"",!0),e.join("&")}}}function Tn(t,e){if(j(t)){var n=t.replace(wn,"").trim();if(n){var i=e("Content-Type");(i&&0===i.indexOf(vn)||function(t){var e=t.match(_n);return e&&bn[e[0]].test(t)}(n))&&(t=lt(n))}}return t}function Ln(t){var e,n=At();function i(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return j(t)?b(t.split("\n"),function(t){e=t.indexOf(":"),i(o(Y(t.substr(0,e))),Y(t.substr(e+1)))}):I(t)&&b(t,function(t,e){i(o(e),Y(t))}),n}function Sn(t){var e;return function(n){if(e||(e=Ln(t)),n){var i=e[o(n)];return void 0===i&&(i=null),i}return e}}function Dn(t,e,n,i){return U(i)?i(t,e,n):(b(i,function(i){t=i(t,e,n)}),t)}function Mn(t){return 200<=t&&t<300}function An(){var t=this.defaults={transformResponse:[Tn],transformRequest:[function(t){return!I(t)||function(t){return"[object File]"===f.call(t)}(t)||function(t){return"[object Blob]"===f.call(t)}(t)||function(t){return"[object FormData]"===f.call(t)}(t)?t:ut(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:jt(yn),put:jt(yn),patch:jt(yn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},n=!1;this.useApplyAsync=function(t){return O(t)?(n=!!t,this):n};var i=!0;this.useLegacyPromiseExtensions=function(t){return O(t)?(i=!!t,this):i};var r=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,u,l,c,h,d){var p=l("$http");t.paramSerializer=j(t.paramSerializer)?d.get(t.paramSerializer):t.paramSerializer;var f=[];function m(r){if(!I(r))throw e("$http")("badreq","Http request configuration must be an object.  Received: {0}",r);if(!j(r.url))throw e("$http")("badreq","Http request configuration url must be a string.  Received: {0}",r.url);var l=C({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},r);l.headers=function(e){var n,i,r,s=t.headers,a=C({},e.headers);s=C({},s.common,s[o(e.method)]);t:for(n in s){for(r in i=o(n),a)if(o(r)===i)continue t;a[n]=s[n]}return function(t,e){var n,i={};return b(t,function(t,r){U(t)?null!=(n=t(e))&&(i[r]=n):i[r]=t}),i}(a,jt(e))}(r),l.method=s(l.method),l.paramSerializer=j(l.paramSerializer)?d.get(l.paramSerializer):l.paramSerializer;var g=[],v=[],y=h.when(l);return b(f,function(t){(t.request||t.requestError)&&g.unshift(t.request,t.requestError),(t.response||t.responseError)&&v.push(t.response,t.responseError)}),y=_(y=(y=_(y,g)).then(function(e){var i=e.headers,r=Dn(e.data,Sn(i),void 0,e.transformRequest);N(r)&&b(i,function(t,e){"content-type"===o(e)&&delete i[e]});N(e.withCredentials)&&!N(t.withCredentials)&&(e.withCredentials=t.withCredentials);return function(e,i){var r,o,s=h.defer(),l=s.promise,d=e.headers,f=function(t,e){e.length>0&&(t+=(-1==t.indexOf("?")?"?":"&")+e);return t}(e.url,e.paramSerializer(e.params));m.pendingRequests.push(e),l.then(w,w),!e.cache&&!t.cache||!1===e.cache||"GET"!==e.method&&"JSONP"!==e.method||(r=I(e.cache)?e.cache:I(t.cache)?t.cache:p);r&&(O(o=r.get(f))?Z(o)?o.then(_,_):B(o)?y(o[1],o[0],jt(o[2]),o[3]):y(o,200,{},"OK"):r.put(f,l));if(N(o)){var g=Ki(e.url)?u()[e.xsrfCookieName||t.xsrfCookieName]:void 0;g&&(d[e.xsrfHeaderName||t.xsrfHeaderName]=g),a(e.method,f,i,function(t,e,i,o){r&&(Mn(t)?r.put(f,[t,e,Ln(i),o]):r.remove(f));function s(){y(e,t,i,o)}n?c.$applyAsync(s):(s(),c.$$phase||c.$apply())},d,e.timeout,e.withCredentials,e.responseType,v(e.eventHandlers),v(e.uploadEventHandlers))}return l;function v(t){if(t){var e={};return b(t,function(t,i){e[i]=function(e){function i(){t(e)}n?c.$applyAsync(i):c.$$phase?i():c.$apply(i)}}),e}}function y(t,n,i,r){(Mn(n=n>=-1?n:0)?s.resolve:s.reject)({data:t,status:n,headers:Sn(i),config:e,statusText:r})}function _(t){y(t.data,t.status,jt(t.headers()),t.statusText)}function w(){var t=m.pendingRequests.indexOf(e);-1!==t&&m.pendingRequests.splice(t,1)}}(e,r).then(w,w)}),v),i?(y.success=function(t){return Lt(t,"fn"),y.then(function(e){t(e.data,e.status,e.headers,l)}),y},y.error=function(t){return Lt(t,"fn"),y.then(null,function(e){t(e.data,e.status,e.headers,l)}),y}):(y.success=$n("success"),y.error=$n("error")),y;function _(t,e){for(var n=0,i=e.length;n<i;){var r=e[n++],o=e[n++];t=t.then(r,o)}return e.length=0,t}function w(t){var e=C({},t);return e.data=Dn(t.data,t.headers,t.status,l.transformResponse),Mn(t.status)?e:h.reject(e)}}return b(r,function(t){f.unshift(j(t)?d.get(t):d.invoke(t))}),m.pendingRequests=[],function(t){b(arguments,function(t){m[t]=function(e,n){return m(C({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){b(arguments,function(t){m[t]=function(e,n,i){return m(C({},i||{},{method:t,url:e,data:n}))}})}("post","put","patch"),m.defaults=t,m}]}function Pn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Nn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,i){return function(t,e,n,i,r){return function(s,a,u,l,c,h,d,p,f,m){if(t.$$incOutstandingRequestCount(),a=a||t.url(),"jsonp"===o(s))var g=i.createCallback(a),v=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=r.createElement("script"),s=null;return o.type="text/javascript",o.src=t,o.async=!0,s=function(t){Vt(o,"load",s),Vt(o,"error",s),r.body.removeChild(o),o=null;var a=-1,u="unknown";t&&("load"!==t.type||i.wasCalled(e)||(t={type:"error"}),u=t.type,a="error"===t.type?404:200),n&&n(a,u)},zt(o,"load",s),zt(o,"error",s),r.body.appendChild(o),s}(a,g,function(t,e){var n=200===t&&i.getResponse(g);$(l,t,n,"",e),i.removeCallback(g)});else{var y=e(s,a);y.open(s,a,!0),b(c,function(t,e){O(t)&&y.setRequestHeader(e,t)}),y.onload=function(){var t=y.statusText||"",e="response"in y?y.response:y.responseText,n=1223===y.status?204:y.status;0===n&&(n=e?200:"file"==Xi(a).protocol?404:0),$(l,n,e,y.getAllResponseHeaders(),t)};var _=function(){$(l,-1,null,null,"")};if(y.onerror=_,y.onabort=_,b(f,function(t,e){y.addEventListener(e,t)}),b(m,function(t,e){y.upload.addEventListener(e,t)}),d&&(y.withCredentials=!0),p)try{y.responseType=p}catch(t){if("json"!==p)throw t}y.send(N(u)?null:u)}if(h>0)var w=n(x,h);else Z(h)&&h.then(x);function x(){v&&v(),y&&y.abort()}function $(e,i,r,o,s){O(w)&&n.cancel(w),v=y=null,e(i,r,o,s),t.$$completeOutstandingRequest(D)}}}(t,i,t.defer,e,n[0])}]}var On=v.$interpolateMinErr=e("$interpolate");function In(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){var o=t.length,s=e.length,a=new RegExp(t.replace(/./g,l),"g"),u=new RegExp(e.replace(/./g,l),"g");function l(t){return"\\\\\\"+t}function c(n){return n.replace(a,t).replace(u,e)}function h(t,e,n,i){var r;return r=t.$watch(function(t){return r(),i(t)},e,n)}function d(a,u,l,d){if(!a.length||-1===a.indexOf(t)){var p;if(!u)(p=A(c(a))).exp=a,p.expressions=[],p.$$watchDelegate=h;return p}d=!!d;for(var f,m,g,v=0,y=[],_=[],b=a.length,w=[],x=[];v<b;){if(-1==(f=a.indexOf(t,v))||-1==(m=a.indexOf(e,f+o))){v!==b&&w.push(c(a.substring(v)));break}v!==f&&w.push(c(a.substring(v,f))),g=a.substring(f+o,m),y.push(g),_.push(n(g,E)),v=m+s,x.push(w.length),w.push("")}if(l&&w.length>1&&On.throwNoconcat(a),!u||y.length){var $=function(t){for(var e=0,n=y.length;e<n;e++){if(d&&N(t[e]))return;w[x[e]]=t[e]}return w.join("")},k=function(t){return l?r.getTrusted(l,t):r.valueOf(t)};return C(function(t){var e=0,n=y.length,r=new Array(n);try{for(;e<n;e++)r[e]=_[e](t);return $(r)}catch(t){i(On.interr(a,t))}},{exp:a,expressions:y,$$watchDelegate:function(t,e){var n;return t.$watchGroup(_,function(i,r){var o=$(i);U(e)&&e.call(this,o,i!==r?n:o,t),n=o})}})}function E(t){try{return t=k(t),d&&!O(t)?t:function(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=ut(t)}return t}(t)}catch(t){i(On.interr(a,t))}}}return d.startSymbol=function(){return t},d.endSymbol=function(){return e},d}]}function Rn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,i,r){var o={};function s(s,a,u,l){var c=arguments.length>4,h=c?ot(arguments,4):[],d=e.setInterval,p=e.clearInterval,f=0,m=O(l)&&!l,g=(m?i:n).defer(),v=g.promise;return u=O(u)?u:0,v.$$intervalId=d(function(){m?r.defer(y):t.$evalAsync(y),g.notify(f++),u>0&&f>=u&&(g.resolve(f),p(v.$$intervalId),delete o[v.$$intervalId]),m||t.$apply()},a),o[v.$$intervalId]=g,v;function y(){c?s.apply(null,h):s(f)}}return s.cancel=function(t){return!!(t&&t.$$intervalId in o)&&(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0)},s}]}On.throwNoconcat=function(t){throw On("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},On.interr=function(t,e){return On("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var jn=function(){this.$get=["$window",function(t){var e=t.angular.callbacks,n={};return{createCallback:function(t){var i="_"+(e.$$counter++).toString(36),r="angular.callbacks."+i,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(i);return n[r]=e[i]=o,r},wasCalled:function(t){return n[t].called},getResponse:function(t){return n[t].data},removeCallback:function(t){var i=n[t];delete e[i.id],delete n[t]}}}]},Fn=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,qn={http:80,https:443,ftp:21},Bn=e("$location");function Un(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=vt(e[n]);return e.join("/")}function zn(t,e){var n=Xi(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=L(n.port)||qn[n.protocol]||null}function Vn(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var i=Xi(t);e.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),e.$$search=mt(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Hn(t,e){return 0===t.lastIndexOf(e,0)}function Wn(t,e){if(Hn(e,t))return e.substr(t.length)}function Zn(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function Gn(t){return t.replace(/(#.+)|#$/,"$1")}function Yn(t,e,n){this.$$html5=!0,n=n||"",zn(t,this),this.$$parse=function(t){var n=Wn(e,t);if(!j(n))throw Bn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);Vn(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=gt(this.$$search),n=this.$$hash?"#"+vt(this.$$hash):"";this.$$url=Un(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(O(o=Wn(t,i))?(s=o,a=O(o=Wn(n,o))?e+(Wn("/",o)||o):t+s):O(o=Wn(e,i))?a=e+o:e==i+"/"&&(a=e),a&&this.$$parse(a),!!a);var o,s,a}}function Xn(t,e,n){zn(t,this),this.$$parse=function(i){var r,o=Wn(t,i)||Wn(e,i);N(o)||"#"!==o.charAt(0)?this.$$html5?r=o:(r="",N(o)&&(t=i,this.replace())):N(r=Wn(n,o))&&(r=o),Vn(r,this),this.$$path=function(t,e,n){var i,r=/^\/[A-Z]:(\/.*)/;Hn(e,n)&&(e=e.replace(n,""));if(r.exec(e))return t;return(i=r.exec(t))?i[1]:t}(this.$$path,r,t),this.$$compose()},this.$$compose=function(){var e=gt(this.$$search),i=this.$$hash?"#"+vt(this.$$hash):"";this.$$url=Un(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return Zn(t)==Zn(e)&&(this.$$parse(e),!0)}}function Kn(t,e,n){this.$$html5=!0,Xn.apply(this,arguments),this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(t==Zn(i)?o=i:(s=Wn(e,i))?o=t+n+s:e===i+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,s},this.$$compose=function(){var e=gt(this.$$search),i=this.$$hash?"#"+vt(this.$$hash):"";this.$$url=Un(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+n+this.$$url}}var Jn={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Qn("$$absUrl"),url:function(t){if(N(t))return this.$$url;var e=Fn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:Qn("$$protocol"),host:Qn("$$host"),port:Qn("$$port"),path:ti("$$path",function(t){return"/"==(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(j(t)||F(t))t=t.toString(),this.$$search=mt(t);else{if(!I(t))throw Bn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");b(t=tt(t,{}),function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:N(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:ti("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function Qn(t){return function(){return this[t]}}function ti(t,e){return function(n){return N(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function ei(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return O(e)?(t=e,this):t},this.html5Mode=function(t){return W(t)?(e.enabled=t,this):I(t)?(W(t.enabled)&&(e.enabled=t.enabled),W(t.requireBase)&&(e.requireBase=t.requireBase),W(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,s){var a,l,c,h=i.baseHref(),d=i.url();if(e.enabled){if(!h&&e.requireBase)throw Bn("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=function(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}(d)+(h||"/"),l=r.history?Yn:Kn}else c=Zn(d),l=Xn;var p=function(t){return t.substr(0,Zn(t).lastIndexOf("/")+1)}(c);(a=new l(c,p,"#"+t)).$$parseLinkUrl(d,d),a.$$state=i.state();var f=/^\s*(javascript|mailto):/i;function m(t,e,n){var r=a.url(),o=a.$$state;try{i.url(t,e,n),a.$$state=i.state()}catch(t){throw a.url(r),a.$$state=o,t}}o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var r=u(t.target);"a"!==J(r[0]);)if(r[0]===o[0]||!(r=r.parent())[0])return;var l=r.prop("href"),c=r.attr("href")||r.attr("xlink:href");I(l)&&"[object SVGAnimatedString]"===l.toString()&&(l=Xi(l.animVal).href),f.test(l)||!l||r.attr("target")||t.isDefaultPrevented()||a.$$parseLinkUrl(l,c)&&(t.preventDefault(),a.absUrl()!=i.url()&&(n.$apply(),s.angular["ff-684208-preventDefault"]=!0))}}),Gn(a.absUrl())!=Gn(d)&&i.url(a.absUrl(),!0);var g=!0;return i.onUrlChange(function(t,e){N(Wn(p,t))?s.location.href=t:(n.$evalAsync(function(){var i,r=a.absUrl(),o=a.$$state;t=Gn(t),a.$$parse(t),a.$$state=e,i=n.$broadcast("$locationChangeStart",t,r,e,o).defaultPrevented,a.absUrl()===t&&(i?(a.$$parse(r),a.$$state=o,m(r,!1,o)):(g=!1,v(r,o)))}),n.$$phase||n.$digest())}),n.$watch(function(){var t=Gn(i.url()),e=Gn(a.absUrl()),o=i.state(),s=a.$$replace,u=t!==e||a.$$html5&&r.history&&o!==a.$$state;(g||u)&&(g=!1,n.$evalAsync(function(){var e=a.absUrl(),i=n.$broadcast("$locationChangeStart",e,t,a.$$state,o).defaultPrevented;a.absUrl()===e&&(i?(a.$$parse(t),a.$$state=o):(u&&m(e,s,o===a.$$state?null:a.$$state),v(t,o)))})),a.$$replace=!1}),a;function v(t,e){n.$broadcast("$locationChangeSuccess",a.absUrl(),t,a.$$state,e)}}]}function ni(){var t=!0,e=this;this.debugEnabled=function(e){return O(e)?(t=e,this):t},this.$get=["$window",function(n){return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){t&&n.apply(e,arguments)}}()};function i(t){var e=n.console||{},i=e[t]||e.log||D,r=!1;try{r=!!i.apply}catch(t){}return r?function(){var t=[];return b(arguments,function(e){t.push(function(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}(e))}),i.apply(e,t)}:function(t,e){i(t,null==e?"":e)}}}]}b([Kn,Xn,Yn],function(t){t.prototype=Object.create(Jn),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Yn||!this.$$html5)throw Bn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=N(e)?null:e,this}});var ii=e("$parse");function ri(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw ii("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function oi(t){return t+""}function si(t,e){if(t){if(t.constructor===t)throw ii("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw ii("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw ii("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw ii("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}var ai=Function.prototype.call,ui=Function.prototype.apply,li=Function.prototype.bind;function ci(t,e){if(t){if(t.constructor===t)throw ii("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===ai||t===ui||t===li)throw ii("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function hi(t,e){if(t&&(t===(0).constructor||t===(!1).constructor||t==="".constructor||t==={}.constructor||t===[].constructor||t===Function.constructor))throw ii("isecaf","Assigning to a constructor is disallowed! Expression: {0}",e)}var di=At();b("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){di[t]=!0});var pi={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},fi=function(t){this.options=t};fi.prototype={constructor:fi,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=di[e],o=di[n],s=di[i];if(r||o||s){var a=s?i:o?n:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||"Â "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=O(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw ii("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=o(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{n+=pi[o]||o}r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var mi=function(t,e){this.lexer=t,this.options=e};function gi(t,e){return void 0!==t?t:e}function vi(t,e){return void 0===t?e:void 0===e?t:t+e}function yi(t,e){return!t(e).$stateful}function _i(t,e){var n,i;switch(t.type){case mi.Program:n=!0,b(t.body,function(t){_i(t.expression,e),n=n&&t.expression.constant}),t.constant=n;break;case mi.Literal:t.constant=!0,t.toWatch=[];break;case mi.UnaryExpression:_i(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case mi.BinaryExpression:_i(t.left,e),_i(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case mi.LogicalExpression:_i(t.left,e),_i(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case mi.ConditionalExpression:_i(t.test,e),_i(t.alternate,e),_i(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case mi.Identifier:t.constant=!1,t.toWatch=[t];break;case mi.MemberExpression:_i(t.object,e),t.computed&&_i(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case mi.CallExpression:n=!!t.filter&&yi(e,t.callee.name),i=[],b(t.arguments,function(t){_i(t,e),n=n&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=t.filter&&yi(e,t.callee.name)?i:[t];break;case mi.AssignmentExpression:_i(t.left,e),_i(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case mi.ArrayExpression:n=!0,i=[],b(t.elements,function(t){_i(t,e),n=n&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=i;break;case mi.ObjectExpression:n=!0,i=[],b(t.properties,function(t){_i(t.value,e),n=n&&t.value.constant&&!t.computed,t.value.constant||i.push.apply(i,t.value.toWatch)}),t.constant=n,t.toWatch=i;break;case mi.ThisExpression:case mi.LocalsExpression:t.constant=!1,t.toWatch=[]}}function bi(t){if(1==t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function wi(t){return t.type===mi.Identifier||t.type===mi.MemberExpression}function xi(t){if(1===t.body.length&&wi(t.body[0].expression))return{type:mi.AssignmentExpression,left:t.body[0].expression,right:{type:mi.NGValueParameter},operator:"="}}function $i(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===mi.Literal||t.body[0].expression.type===mi.ArrayExpression||t.body[0].expression.type===mi.ObjectExpression)}function ki(t){return t.constant}function Ei(t,e){this.astBuilder=t,this.$filter=e}function Ci(t,e){this.astBuilder=t,this.$filter=e}mi.Program="Program",mi.ExpressionStatement="ExpressionStatement",mi.AssignmentExpression="AssignmentExpression",mi.ConditionalExpression="ConditionalExpression",mi.LogicalExpression="LogicalExpression",mi.BinaryExpression="BinaryExpression",mi.UnaryExpression="UnaryExpression",mi.CallExpression="CallExpression",mi.MemberExpression="MemberExpression",mi.Identifier="Identifier",mi.Literal="Literal",mi.ArrayExpression="ArrayExpression",mi.Property="Property",mi.ObjectExpression="ObjectExpression",mi.ThisExpression="ThisExpression",mi.LocalsExpression="LocalsExpression",mi.NGValueParameter="NGValueParameter",mi.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:mi.Program,body:t}},expressionStatement:function(){return{type:mi.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();return this.expect("=")&&(t={type:mi.AssignmentExpression,left:t,right:this.assignment(),operator:"="}),t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:mi.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:mi.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:mi.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:mi.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:mi.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:mi.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:mi.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:mi.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=tt(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:mi.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:mi.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:mi.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:mi.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:mi.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:mi.Identifier,name:t.text}},constant:function(){return{type:mi.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:mi.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:mi.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:mi.ObjectExpression,properties:e}},throwError:function(t,e){throw ii("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw ii("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw ii("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===n||s===i||s===r||!e&&!n&&!i&&!r)return o}return!1},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:mi.ThisExpression},$locals:{type:mi.LocalsExpression}}},Ei.prototype={compile:function(t,e){var n=this,i=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},_i(i,n.$filter);var r,o="";if(this.stage="assign",r=xi(i)){this.state.computing="assign";var s=this.nextId();this.recurse(r,s),this.return_(s),o="fn.assign="+this.generateFunction("assign","s,v,l")}var a=bi(i.body);n.stage="inputs",b(a,function(t,e){var i="fn"+e;n.state[i]={vars:[],body:[],own:{}},n.state.computing=i;var r=n.nextId();n.recurse(t,r),n.return_(r),n.state.inputs.push(i),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(i);var u='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+o+this.watchFns()+"return fn;",l=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",u)(this.$filter,ri,si,ci,oi,hi,gi,vi,t);return this.state=this.stage=void 0,l.literal=$i(i),l.constant=ki(i),l},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return b(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return b(this.state.filters,function(n,i){t.push(n+"=$filter("+e.escape(i)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,i,r,o){var s,a,u,l,c,h=this;if(i=i||D,!o&&O(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,i,r,!0));switch(t.type){case mi.Program:b(t.body,function(e,n){h.recurse(e.expression,void 0,void 0,function(t){a=t}),n!==t.body.length-1?h.current().body.push(a,";"):h.return_(a)});break;case mi.Literal:l=this.escape(t.value),this.assign(e,l),i(l);break;case mi.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){a=t}),l=t.operator+"("+this.ifDefined(a,0)+")",this.assign(e,l),i(l);break;case mi.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){s=t}),this.recurse(t.right,void 0,void 0,function(t){a=t}),l="+"===t.operator?this.plus(s,a):"-"===t.operator?this.ifDefined(s,0)+t.operator+this.ifDefined(a,0):"("+s+")"+t.operator+"("+a+")",this.assign(e,l),i(l);break;case mi.LogicalExpression:e=e||this.nextId(),h.recurse(t.left,e),h.if_("&&"===t.operator?e:h.not(e),h.lazyRecurse(t.right,e)),i(e);break;case mi.ConditionalExpression:e=e||this.nextId(),h.recurse(t.test,e),h.if_(e,h.lazyRecurse(t.alternate,e),h.lazyRecurse(t.consequent,e)),i(e);break;case mi.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),ri(t.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",t.name)),function(){h.if_("inputs"===h.stage||"s",function(){r&&1!==r&&h.if_(h.not(h.nonComputedMember("s",t.name)),h.lazyAssign(h.nonComputedMember("s",t.name),"{}")),h.assign(e,h.nonComputedMember("s",t.name))})},e&&h.lazyAssign(e,h.nonComputedMember("l",t.name))),(h.state.expensiveChecks||Li(t.name))&&h.addEnsureSafeObject(e),i(e);break;case mi.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),h.recurse(t.object,s,void 0,function(){h.if_(h.notNull(s),function(){r&&1!==r&&h.addEnsureSafeAssignContext(s),t.computed?(a=h.nextId(),h.recurse(t.property,a),h.getStringValue(a),h.addEnsureSafeMemberName(a),r&&1!==r&&h.if_(h.not(h.computedMember(s,a)),h.lazyAssign(h.computedMember(s,a),"{}")),l=h.ensureSafeObject(h.computedMember(s,a)),h.assign(e,l),n&&(n.computed=!0,n.name=a)):(ri(t.property.name),r&&1!==r&&h.if_(h.not(h.nonComputedMember(s,t.property.name)),h.lazyAssign(h.nonComputedMember(s,t.property.name),"{}")),l=h.nonComputedMember(s,t.property.name),(h.state.expensiveChecks||Li(t.property.name))&&(l=h.ensureSafeObject(l)),h.assign(e,l),n&&(n.computed=!1,n.name=t.property.name))},function(){h.assign(e,"undefined")}),i(e)},!!r);break;case mi.CallExpression:e=e||this.nextId(),t.filter?(a=h.filter(t.callee.name),u=[],b(t.arguments,function(t){var e=h.nextId();h.recurse(t,e),u.push(e)}),l=a+"("+u.join(",")+")",h.assign(e,l),i(e)):(a=h.nextId(),s={},u=[],h.recurse(t.callee,a,s,function(){h.if_(h.notNull(a),function(){h.addEnsureSafeFunction(a),b(t.arguments,function(t){h.recurse(t,h.nextId(),void 0,function(t){u.push(h.ensureSafeObject(t))})}),s.name?(h.state.expensiveChecks||h.addEnsureSafeObject(s.context),l=h.member(s.context,s.name,s.computed)+"("+u.join(",")+")"):l=a+"("+u.join(",")+")",l=h.ensureSafeObject(l),h.assign(e,l)},function(){h.assign(e,"undefined")}),i(e)}));break;case mi.AssignmentExpression:if(a=this.nextId(),s={},!wi(t.left))throw ii("lval","Trying to assign a value to a non l-value");this.recurse(t.left,void 0,s,function(){h.if_(h.notNull(s.context),function(){h.recurse(t.right,a),h.addEnsureSafeObject(h.member(s.context,s.name,s.computed)),h.addEnsureSafeAssignContext(s.context),l=h.member(s.context,s.name,s.computed)+t.operator+a,h.assign(e,l),i(e||l)})},1);break;case mi.ArrayExpression:u=[],b(t.elements,function(t){h.recurse(t,h.nextId(),void 0,function(t){u.push(t)})}),l="["+u.join(",")+"]",this.assign(e,l),i(l);break;case mi.ObjectExpression:u=[],c=!1,b(t.properties,function(t){t.computed&&(c=!0)}),c?(e=e||this.nextId(),this.assign(e,"{}"),b(t.properties,function(t){t.computed?(s=h.nextId(),h.recurse(t.key,s)):s=t.key.type===mi.Identifier?t.key.name:""+t.key.value,a=h.nextId(),h.recurse(t.value,a),h.assign(h.member(e,s,t.computed),a)})):(b(t.properties,function(e){h.recurse(e.value,t.constant?void 0:h.nextId(),void 0,function(t){u.push(h.escape(e.key.type===mi.Identifier?e.key.name:""+e.key.value)+":"+t)})}),l="{"+u.join(",")+"}",this.assign(e,l)),i(e||l);break;case mi.ThisExpression:this.assign(e,"s"),i("s");break;case mi.LocalsExpression:this.assign(e,"l"),i("l");break;case mi.NGValueParameter:this.assign(e,"v"),i("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var i=this.current().body;i.push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/[$_a-zA-Z][$_a-zA-Z0-9]*/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},addEnsureSafeAssignContext:function(t){this.current().body.push(this.ensureSafeAssignContext(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},ensureSafeAssignContext:function(t){return"ensureSafeAssignContext("+t+",text)"},lazyRecurse:function(t,e,n,i,r,o){var s=this;return function(){s.recurse(t,e,n,i,r,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(j(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(F(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw ii("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},Ci.prototype={compile:function(t,e){var n,i,r=this,o=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,_i(o,r.$filter),(n=xi(o))&&(i=this.recurse(n));var s,a=bi(o.body);a&&(s=[],b(a,function(t,e){var n=r.recurse(t);t.input=n,s.push(n),t.watchId=e}));var u=[];b(o.body,function(t){u.push(r.recurse(t.expression))});var l=0===o.body.length?D:1===o.body.length?u[0]:function(t,e){var n;return b(u,function(i){n=i(t,e)}),n};return i&&(l.assign=function(t,e,n){return i(t,n,e)}),s&&(l.inputs=s),l.literal=$i(o),l.constant=ki(o),l},recurse:function(t,e,n){var i,r,o,s=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case mi.Literal:return this.value(t.value,e);case mi.UnaryExpression:return r=this.recurse(t.argument),this["unary"+t.operator](r,e);case mi.BinaryExpression:case mi.LogicalExpression:return i=this.recurse(t.left),r=this.recurse(t.right),this["binary"+t.operator](i,r,e);case mi.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case mi.Identifier:return ri(t.name,s.expression),s.identifier(t.name,s.expensiveChecks||Li(t.name),e,n,s.expression);case mi.MemberExpression:return i=this.recurse(t.object,!1,!!n),t.computed||(ri(t.property.name,s.expression),r=t.property.name),t.computed&&(r=this.recurse(t.property)),t.computed?this.computedMember(i,r,e,n,s.expression):this.nonComputedMember(i,r,s.expensiveChecks,e,n,s.expression);case mi.CallExpression:return o=[],b(t.arguments,function(t){o.push(s.recurse(t))}),t.filter&&(r=this.$filter(t.callee.name)),t.filter||(r=this.recurse(t.callee,!0)),t.filter?function(t,n,i,s){for(var a=[],u=0;u<o.length;++u)a.push(o[u](t,n,i,s));var l=r.apply(void 0,a,s);return e?{context:void 0,name:void 0,value:l}:l}:function(t,n,i,a){var u,l=r(t,n,i,a);if(null!=l.value){si(l.context,s.expression),ci(l.value,s.expression);for(var c=[],h=0;h<o.length;++h)c.push(si(o[h](t,n,i,a),s.expression));u=si(l.value.apply(l.context,c),s.expression)}return e?{value:u}:u};case mi.AssignmentExpression:return i=this.recurse(t.left,!0,1),r=this.recurse(t.right),function(t,n,o,a){var u=i(t,n,o,a),l=r(t,n,o,a);return si(u.value,s.expression),hi(u.context),u.context[u.name]=l,e?{value:l}:l};case mi.ArrayExpression:return o=[],b(t.elements,function(t){o.push(s.recurse(t))}),function(t,n,i,r){for(var s=[],a=0;a<o.length;++a)s.push(o[a](t,n,i,r));return e?{value:s}:s};case mi.ObjectExpression:return o=[],b(t.properties,function(t){t.computed?o.push({key:s.recurse(t.key),computed:!0,value:s.recurse(t.value)}):o.push({key:t.key.type===mi.Identifier?t.key.name:""+t.key.value,computed:!1,value:s.recurse(t.value)})}),function(t,n,i,r){for(var s={},a=0;a<o.length;++a)o[a].computed?s[o[a].key(t,n,i,r)]=o[a].value(t,n,i,r):s[o[a].key]=o[a].value(t,n,i,r);return e?{value:s}:s};case mi.ThisExpression:return function(t){return e?{value:t}:t};case mi.LocalsExpression:return function(t,n){return e?{value:n}:n};case mi.NGValueParameter:return function(t,n,i){return e?{value:i}:i}}},"unary+":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=O(s)?+s:0,e?{value:s}:s}},"unary-":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=O(s)?-s:0,e?{value:s}:s}},"unary!":function(t,e){return function(n,i,r,o){var s=!t(n,i,r,o);return e?{value:s}:s}},"binary+":function(t,e,n){return function(i,r,o,s){var a=vi(t(i,r,o,s),e(i,r,o,s));return n?{value:a}:a}},"binary-":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s),u=e(i,r,o,s),l=(O(a)?a:0)-(O(u)?u:0);return n?{value:l}:l}},"binary*":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)*e(i,r,o,s);return n?{value:a}:a}},"binary/":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)/e(i,r,o,s);return n?{value:a}:a}},"binary%":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)%e(i,r,o,s);return n?{value:a}:a}},"binary===":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)===e(i,r,o,s);return n?{value:a}:a}},"binary!==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!==e(i,r,o,s);return n?{value:a}:a}},"binary==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)==e(i,r,o,s);return n?{value:a}:a}},"binary!=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!=e(i,r,o,s);return n?{value:a}:a}},"binary<":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<e(i,r,o,s);return n?{value:a}:a}},"binary>":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>e(i,r,o,s);return n?{value:a}:a}},"binary<=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<=e(i,r,o,s);return n?{value:a}:a}},"binary>=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>=e(i,r,o,s);return n?{value:a}:a}},"binary&&":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)&&e(i,r,o,s);return n?{value:a}:a}},"binary||":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)||e(i,r,o,s);return n?{value:a}:a}},"ternary?:":function(t,e,n,i){return function(r,o,s,a){var u=t(r,o,s,a)?e(r,o,s,a):n(r,o,s,a);return i?{value:u}:u}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n,i,r){return function(o,s,a,u){var l=s&&t in s?s:o;i&&1!==i&&l&&!l[t]&&(l[t]={});var c=l?l[t]:void 0;return e&&si(c,r),n?{context:l,name:t,value:c}:c}},computedMember:function(t,e,n,i,r){return function(o,s,a,u){var l,c,h=t(o,s,a,u);return null!=h&&(ri(l=oi(l=e(o,s,a,u)),r),i&&1!==i&&(hi(h),h&&!h[l]&&(h[l]={})),si(c=h[l],r)),n?{context:h,name:l,value:c}:c}},nonComputedMember:function(t,e,n,i,r,o){return function(s,a,u,l){var c=t(s,a,u,l);r&&1!==r&&(hi(c),c&&!c[e]&&(c[e]={}));var h=null!=c?c[e]:void 0;return(n||Li(e))&&si(h,o),i?{context:c,name:e,value:h}:h}},inputs:function(t,e){return function(n,i,r,o){return o?o[e]:t(n,i,r)}}};var Ti=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new mi(t,n),this.astCompiler=n.csp?new Ci(this.ast,e):new Ei(this.ast,e)};function Li(t){return"constructor"==t}Ti.prototype={constructor:Ti,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var Si=Object.prototype.valueOf;function Di(t){return U(t.valueOf)?t.valueOf():Si.call(t)}function Mi(){var t,e,n=At(),i=At(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,i){return t=n,e=i,this},this.$get=["$filter",function(o){var s=nt().noUnsafeEval,a={csp:s,expensiveChecks:!1,literals:tt(r),isIdentifierStart:U(t)&&t,isIdentifierContinue:U(e)&&e},u={csp:s,expensiveChecks:!0,literals:tt(r),isIdentifierStart:U(t)&&t,isIdentifierContinue:U(e)&&e},l=!1;return c.$$runningExpensiveChecks=function(){return l},c;function c(t,e,r){var s,c,h;switch(r=r||l,typeof t){case"string":h=t=t.trim();var v=r?i:n;if(!(s=v[h])){":"===t.charAt(0)&&":"===t.charAt(1)&&(c=!0,t=t.substring(2));var y=r?u:a,_=new fi(y);(s=new Ti(_,o,y).parse(t)).constant?s.$$watchDelegate=m:c?s.$$watchDelegate=s.literal?f:p:s.inputs&&(s.$$watchDelegate=d),r&&(s=function t(e){if(!e)return e;i.$$watchDelegate=e.$$watchDelegate;i.assign=t(e.assign);i.constant=e.constant;i.literal=e.literal;for(var n=0;e.inputs&&n<e.inputs.length;++n)e.inputs[n]=t(e.inputs[n]);i.inputs=e.inputs;return i;function i(t,n,i,r){var o=l;l=!0;try{return e(t,n,i,r)}finally{l=o}}}(s)),v[h]=s}return g(s,e);case"function":return g(t,e);default:return g(D,e)}}function h(t,e){return null==t||null==e?t===e:("object"!=typeof t||"object"!=typeof(t=Di(t)))&&(t===e||t!=t&&e!=e)}function d(t,e,n,i,r){var o,s=i.inputs;if(1===s.length){var a=h;return s=s[0],t.$watch(function(t){var e=s(t);return h(e,a)||(o=i(t,void 0,void 0,[e]),a=e&&Di(e)),o},e,n,r)}for(var u=[],l=[],c=0,d=s.length;c<d;c++)u[c]=h,l[c]=null;return t.$watch(function(t){for(var e=!1,n=0,r=s.length;n<r;n++){var a=s[n](t);(e||(e=!h(a,u[n])))&&(l[n]=a,u[n]=a&&Di(a))}return e&&(o=i(t,void 0,void 0,l)),o},e,n,r)}function p(t,e,n,i){var r,o;return r=t.$watch(function(t){return i(t)},function(t,n,i){o=t,U(e)&&e.apply(this,arguments),O(t)&&i.$$postDigest(function(){O(o)&&r()})},n)}function f(t,e,n,i){var r,o;return r=t.$watch(function(t){return i(t)},function(t,n,i){o=t,U(e)&&e.call(this,t,n,i),s(t)&&i.$$postDigest(function(){s(o)&&r()})},n);function s(t){var e=!0;return b(t,function(t){O(t)||(e=!1)}),e}}function m(t,e,n,i){var r;return r=t.$watch(function(t){return r(),i(t)},e,n)}function g(t,e){if(!e)return t;var n=t.$$watchDelegate,i=!1,r=n!==f&&n!==p?function(n,r,o,s){var a=i&&s?s[0]:t(n,r,o,s);return e(a,n,r)}:function(n,i,r,o){var s=t(n,i,r,o),a=e(s,n,i);return O(s)?a:s};return t.$$watchDelegate&&t.$$watchDelegate!==d?r.$$watchDelegate=t.$$watchDelegate:e.$stateful||(r.$$watchDelegate=d,i=!t.inputs,r.inputs=t.inputs?t.inputs:[t]),r}}]}function Ai(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return Ni(function(e){t.$evalAsync(e)},e)}]}function Pi(){this.$get=["$browser","$exceptionHandler",function(t,e){return Ni(function(e){t.defer(e)},e)}]}function Ni(t,n){var i=e("$q",TypeError),r=function(){var t=new u;return t.resolve=s(t,t.resolve),t.reject=s(t,t.reject),t.notify=s(t,t.notify),t};function o(){this.$$state={status:0}}function s(t,e){return function(n){e.call(t,n)}}function a(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){!function(t){var e,i,r;r=t.pending,t.processScheduled=!1,t.pending=void 0;for(var o=0,s=r.length;o<s;++o){i=r[o][0],e=r[o][t.status];try{U(e)?i.resolve(e(t.value)):1===t.status?i.resolve(t.value):i.reject(t.value)}catch(t){i.reject(t),n(t)}}}(e)}))}function u(){this.promise=new o}C(o.prototype,{then:function(t,e,n){if(N(t)&&N(e)&&N(n))return this;var i=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),this.$$state.status>0&&a(this.$$state),i.promise},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return c(e,!0,t)},function(e){return c(e,!1,t)},e)}}),C(u.prototype,{resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(i("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){var e,i=this,r=!1;try{(I(t)||U(t))&&(e=t&&t.then),U(e)?(this.promise.$$state.status=-1,e.call(t,function(t){if(r)return;r=!0,i.$$resolve(t)},o,s(this,this.notify))):(this.promise.$$state.value=t,this.promise.$$state.status=1,a(this.promise.$$state))}catch(t){o(t),n(t)}function o(t){r||(r=!0,i.$$reject(t))}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,a(this.promise.$$state)},notify:function(e){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&t(function(){for(var t,r,o=0,s=i.length;o<s;o++){r=i[o][0],t=i[o][3];try{r.notify(U(t)?t(e):e)}catch(t){n(t)}}})}});var l=function(t,e){var n=new u;return e?n.resolve(t):n.reject(t),n.promise},c=function(t,e,n){var i=null;try{U(n)&&(i=n())}catch(t){return l(t,!1)}return Z(i)?i.then(function(){return l(t,e)},function(t){return l(t,!1)}):l(t,e)},h=function(t,e,n,i){var r=new u;return r.resolve(t),r.promise.then(e,n,i)},d=h;var p=function(t){if(!U(t))throw i("norslvr","Expected resolverFn, got '{0}'",t);var e=new u;return t(function(t){e.resolve(t)},function(t){e.reject(t)}),e.promise};return p.prototype=o.prototype,p.defer=r,p.reject=function(t){var e=new u;return e.reject(t),e.promise},p.when=h,p.resolve=d,p.all=function(t){var e=new u,n=0,i=B(t)?[]:{};return b(t,function(t,r){n++,h(t).then(function(t){i.hasOwnProperty(r)||(i[r]=t,--n||e.resolve(i))},function(t){i.hasOwnProperty(r)||e.reject(t)})}),0===n&&e.resolve(i),e.promise},p.race=function(t){var e=r();return b(t,function(t){h(t).then(e.resolve,e.reject)}),e.promise},p}function Oi(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(t){var e=n(t);return function(){i(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=r,o}]}function Ii(){var t=10,n=e("$rootScope"),i=null,o=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(e,s,u){function l(t){t.currentScope.$$destroyed=!0}function c(){this.$id=$(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}c.prototype={constructor:c,$new:function(t,e){var n;return e=e||this,t?(n=new c).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=$(),this.$$ChildScope=null}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!=this)&&n.$on("$destroy",l),n},$watch:function(t,e,n,r){var o=s(t);if(o.$$watchDelegate)return o.$$watchDelegate(this,e,n,o,t);var a=this,u=a.$$watchers,l={fn:e,last:x,get:o,exp:r||t,eq:!!n};return i=null,U(e)||(l.fn=D),u||(u=a.$$watchers=[]),u.unshift(l),y(this,1),function(){Q(u,l)>=0&&y(a,-1),i=null}},$watchGroup:function(t,e){var n=new Array(t.length),i=new Array(t.length),r=[],o=this,s=!1,a=!0;if(!t.length){var u=!0;return o.$evalAsync(function(){u&&e(i,i,o)}),function(){u=!1}}if(1===t.length)return this.$watch(t[0],function(t,r,o){i[0]=t,n[0]=r,e(i,t===r?i:n,o)});function l(){s=!1,a?(a=!1,e(i,i,o)):e(i,n,o)}return b(t,function(t,e){var a=o.$watch(t,function(t,r){i[e]=t,n[e]=r,s||(s=!0,o.$evalAsync(l))});r.push(a)}),function(){for(;r.length;)r.shift()()}},$watchCollection:function(t,e){m.$stateful=!0;var n,i,o,a=this,u=e.length>1,l=0,c=s(t,m),h=[],d={},p=!0,f=0;function m(t){var e,o,s,a;if(!N(n=t)){if(I(n))if(_(n)){i!==h&&(f=(i=h).length=0,l++),e=n.length,f!==e&&(l++,i.length=f=e);for(var u=0;u<e;u++)a=i[u],s=n[u],a!=a&&s!=s||a===s||(l++,i[u]=s)}else{for(o in i!==d&&(i=d={},f=0,l++),e=0,n)r.call(n,o)&&(e++,s=n[o],a=i[o],o in i?a!=a&&s!=s||a===s||(l++,i[o]=s):(f++,i[o]=s,l++));if(f>e)for(o in l++,i)r.call(n,o)||(f--,delete i[o])}else i!==n&&(i=n,l++);return l}}return this.$watch(c,function(){if(p?(p=!1,e(n,n,a)):e(n,o,a),u)if(I(n))if(_(n)){o=new Array(n.length);for(var t=0;t<n.length;t++)o[t]=n[t]}else for(var i in o={},n)r.call(n,i)&&(o[i]=n[i]);else o=n})},$digest:function(){var r,s,a,l,c,f,y,_,b,w,$=t,E=[];g("$digest"),u.$$checkUrlChange(),this===h&&null!==o&&(u.defer.cancel(o),k()),i=null;do{f=!1,_=this;for(var C=0;C<d.length;C++){try{(w=d[C]).scope.$eval(w.expression,w.locals)}catch(t){e(t)}i=null}d.length=0;t:do{if(l=_.$$watchers)for(c=l.length;c--;)try{if(r=l[c])if((s=(0,r.get)(_))===(a=r.last)||(r.eq?et(s,a):"number"==typeof s&&"number"==typeof a&&isNaN(s)&&isNaN(a))){if(r===i){f=!1;break t}}else f=!0,i=r,r.last=r.eq?tt(s,null):s,(0,r.fn)(s,a===x?s:a,_),$<5&&(E[b=4-$]||(E[b]=[]),E[b].push({msg:U(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:s,oldVal:a}))}catch(t){e(t)}if(!(y=_.$$watchersCount&&_.$$childHead||_!==this&&_.$$nextSibling))for(;_!==this&&!(y=_.$$nextSibling);)_=_.$parent}while(_=y);if((f||d.length)&&!$--)throw v(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,E)}while(f||d.length);for(v();m<p.length;)try{p[m++]()}catch(t){e(t)}p.length=m=0},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===h&&u.$$applicationDestroyed(),y(this,-this.$$watchersCount),this.$$listenerCount)w(this,this.$$listenerCount[e],e);t&&t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=D,this.$on=this.$watch=this.$watchGroup=function(){return D},this.$$listeners={},this.$$nextSibling=null,function t(e){9===a&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return s(t)(this,e)},$evalAsync:function(t,e){h.$$phase||d.length||u.defer(function(){d.length&&h.$digest()}),d.push({scope:this,expression:s(t),locals:e})},$$postDigest:function(t){p.push(t)},$apply:function(t){try{g("$apply");try{return this.$eval(t)}finally{v()}}catch(t){e(t)}finally{try{h.$digest()}catch(t){throw e(t),t}}},$applyAsync:function(t){var e=this;t&&f.push(function(){e.$eval(t)}),t=s(t),null===o&&(o=u.defer(function(){h.$apply(k)}))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var i=this;do{i.$$listenerCount[t]||(i.$$listenerCount[t]=0),i.$$listenerCount[t]++}while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);-1!==i&&(n[i]=null,w(r,1,t))}},$emit:function(t,n){var i,r,o,s=[],a=this,u=!1,l={name:t,targetScope:a,stopPropagation:function(){u=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=rt([l],arguments,1);do{for(i=a.$$listeners[t]||s,l.currentScope=a,r=0,o=i.length;r<o;r++)if(i[r])try{i[r].apply(null,c)}catch(t){e(t)}else i.splice(r,1),r--,o--;if(u)return l.currentScope=null,l;a=a.$parent}while(a);return l.currentScope=null,l},$broadcast:function(t,n){var i=this,r=this,o={name:t,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return o;for(var s,a,u,l=rt([o],arguments,1);i=r;){for(o.currentScope=i,a=0,u=(s=i.$$listeners[t]||[]).length;a<u;a++)if(s[a])try{s[a].apply(null,l)}catch(t){e(t)}else s.splice(a,1),a--,u--;if(!(r=i.$$listenerCount[t]&&i.$$childHead||i!==this&&i.$$nextSibling))for(;i!==this&&!(r=i.$$nextSibling);)i=i.$parent}return o.currentScope=null,o}};var h=new c,d=h.$$asyncQueue=[],p=h.$$postDigestQueue=[],f=h.$$applyAsyncQueue=[],m=0;return h;function g(t){if(h.$$phase)throw n("inprog","{0} already in progress",h.$$phase);h.$$phase=t}function v(){h.$$phase=null}function y(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function w(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function x(){}function k(){for(;f.length;)try{f.shift()()}catch(t){e(t)}o=null}}]}function Ri(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return O(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return O(t)?(e=t,this):e},this.$get=function(){return function(n,i){var r,o=i?e:t;return""===(r=Xi(n).href)||r.match(o)?n:"unsafe:"+r}}}var ji=e("$sce"),Fi={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function qi(t){var e=[];return O(t)&&b(t,function(t){e.push(function(t){if("self"===t)return t;if(j(t)){if(t.indexOf("***")>-1)throw ji("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=X(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(z(t))return new RegExp("^"+t.source+"$");throw ji("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function Bi(){this.SCE_CONTEXTS=Fi;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=qi(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=qi(t)),e},this.$get=["$injector",function(n){var i=function(t){throw ji("unsafe","Attempting to use an unsafe value in a safe context.")};function r(t,e){return"self"===t?Ki(e):!!t.exec(e.href)}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}n.has("$sanitize")&&(i=n.get("$sanitize"));var s=o(),a={};return a[Fi.HTML]=o(s),a[Fi.CSS]=o(s),a[Fi.URL]=o(s),a[Fi.JS]=o(s),a[Fi.RESOURCE_URL]=o(a[Fi.URL]),{trustAs:function(t,e){var n=a.hasOwnProperty(t)?a[t]:null;if(!n)throw ji("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||N(e)||""===e)return e;if("string"!=typeof e)throw ji("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(n,o){if(null===o||N(o)||""===o)return o;var s=a.hasOwnProperty(n)?a[n]:null;if(s&&o instanceof s)return o.$$unwrapTrustedValue();if(n===Fi.RESOURCE_URL){if(function(n){var i,o,s=Xi(n.toString()),a=!1;for(i=0,o=t.length;i<o;i++)if(r(t[i],s)){a=!0;break}if(a)for(i=0,o=e.length;i<o;i++)if(r(e[i],s)){a=!1;break}return a}(o))return o;throw ji("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",o.toString())}if(n===Fi.HTML)return i(o);throw ji("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof s?t.$$unwrapTrustedValue():t}}}]}function Ui(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&a<8)throw ji("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=jt(Fi);i.isEnabled=function(){return t},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,t||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=M),i.parseAs=function(t,n){var r=e(n);return r.literal&&r.constant?r:e(n,function(e){return i.getTrusted(t,e)})};var r=i.parseAs,s=i.getTrusted,u=i.trustAs;return b(Fi,function(t,e){var n=o(e);i[Yt("parse_as_"+n)]=function(e){return r(t,e)},i[Yt("get_trusted_"+n)]=function(e){return s(t,e)},i[Yt("trust_as_"+n)]=function(e){return u(t,e)}}),i}]}function zi(){this.$get=["$window","$document",function(t,e){var n,i,r={},s=!(t.chrome&&t.chrome.app&&t.chrome.app.runtime)&&t.history&&t.history.pushState,u=L((/android (\d+)/.exec(o((t.navigator||{}).userAgent))||[])[1]),l=/Boxee/i.test((t.navigator||{}).userAgent),c=e[0]||{},h=/^(Moz|webkit|ms)(?=[A-Z])/,d=c.body&&c.body.style,p=!1,f=!1;if(d){for(var m in d)if(i=h.exec(m)){n=(n=i[0])[0].toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in d&&"webkit"),p=!!("transition"in d||n+"Transition"in d),f=!!("animation"in d||n+"Animation"in d),!u||p&&f||(p=j(d.webkitTransition),f=j(d.webkitAnimation))}return{history:!(!s||u<4||l),hasEvent:function(t){if("input"===t&&a<=11)return!1;if(N(r[t])){var e=c.createElement("div");r[t]="on"+t in e}return r[t]},csp:nt(),vendorPrefix:n,transitions:p,animations:f,android:u}}]}var Vi=e("$compile");function Hi(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$templateCache","$http","$q","$sce",function(e,n,i,r){function o(s,a){o.totalPendingRequests++,j(s)&&!N(e.get(s))||(s=r.getTrustedResourceUrl(s));var u=n.defaults&&n.defaults.transformResponse;return B(u)?u=u.filter(function(t){return t!==Tn}):u===Tn&&(u=null),n.get(s,C({cache:e,transformResponse:u},t)).finally(function(){o.totalPendingRequests--}).then(function(t){return e.put(s,t.data),t.data},function(t){if(!a)throw Vi("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText);return i.reject(t)})}return o.totalPendingRequests=0,o}]}function Wi(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var i={findBindings:function(t,e,n){var i=[];return b(t.getElementsByClassName("ng-binding"),function(t){var r=v.element(t).data("$binding");r&&b(r,function(r){n?new RegExp("(^|\\s)"+X(e)+"(\\s|\\||$)").test(r)&&i.push(t):-1!=r.indexOf(e)&&i.push(t)})}),i},findModels:function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o="["+i[r]+"model"+(n?"=":"*=")+'"'+e+'"]',s=t.querySelectorAll(o);if(s.length)return s}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return i}]}function Zi(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){var o={};function s(s,a,u){U(s)||(u=a,a=s,s=D);var l,c=ot(arguments,3),h=O(u)&&!u,d=(h?i:n).defer(),p=d.promise;return l=e.defer(function(){try{d.resolve(s.apply(null,c))}catch(t){d.reject(t),r(t)}finally{delete o[p.$$timeoutId]}h||t.$apply()},a),p.$$timeoutId=l,o[l]=d,p}return s.cancel=function(t){return!!(t&&t.$$timeoutId in o)&&(o[t.$$timeoutId].reject("canceled"),delete o[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},s}]}var Gi=t.document.createElement("a"),Yi=Xi(t.location.href);function Xi(t){var e=t;return a&&(Gi.setAttribute("href",e),e=Gi.href),Gi.setAttribute("href",e),{href:Gi.href,protocol:Gi.protocol?Gi.protocol.replace(/:$/,""):"",host:Gi.host,search:Gi.search?Gi.search.replace(/^\?/,""):"",hash:Gi.hash?Gi.hash.replace(/^#/,""):"",hostname:Gi.hostname,port:Gi.port,pathname:"/"===Gi.pathname.charAt(0)?Gi.pathname:"/"+Gi.pathname}}function Ki(t){var e=j(t)?Xi(t):t;return e.protocol===Yi.protocol&&e.host===Yi.host}function Ji(){this.$get=A(t)}function Qi(t){var e=t[0]||{},n={},i="";function r(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,s,a,u,l=e.cookie||"";if(l!==i)for(t=(i=l).split("; "),n={},s=0;s<t.length;s++)(a=(o=t[s]).indexOf("="))>0&&(u=r(o.substring(0,a)),N(n[u])&&(n[u]=r(o.substring(a+1))));return n}}function tr(){this.$get=Qi}function er(t){var e="Filter";function n(i,r){if(I(i)){var o={};return b(i,function(t,e){o[e]=n(e,t)}),o}return t.factory(i+e,r)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",ur),n("date",br),n("filter",nr),n("json",wr),n("limitTo",kr),n("lowercase",xr),n("number",lr),n("orderBy",Cr),n("uppercase",$r)}function nr(){return function(t,n,i,r){if(!_(t)){if(null==t)return t;throw e("filter")("notarray","Expected array but received: {0}",t)}var s,a;switch(r=r||"$",rr(n)){case"function":s=n;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":s=function(t,e,n,i){var r=I(t)&&n in t;!0===e?e=et:U(e)||(e=function(t,e){return!N(t)&&(null===t||null===e?t===e:!(I(e)||I(t)&&!P(t))&&(t=o(""+t),e=o(""+e),-1!==t.indexOf(e)))});return function(o){return r&&!I(o)?ir(o,t[n],e,n,!1):ir(o,t,e,n,i)}}(n,i,r,a);break;default:return t}return Array.prototype.filter.call(t,s)}}function ir(t,e,n,i,r,o){var s=rr(t),a=rr(e);if("string"===a&&"!"===e.charAt(0))return!ir(t,e.substring(1),n,i,r);if(B(t))return t.some(function(t){return ir(t,e,n,i,r)});switch(s){case"object":var u;if(r){for(u in t)if("$"!==u.charAt(0)&&ir(t[u],e,n,i,!0))return!0;return!o&&ir(t,e,n,i,!1)}if("object"===a){for(u in e){var l=e[u];if(!U(l)&&!N(l)){var c=u===i;if(!ir(c?t:t[u],l,n,i,c,c))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function rr(t){return null===t?"null":typeof t}Qi.$inject=["$document"],er.$inject=["$provide"];var or=22,sr=".",ar="0";function ur(t){var e=t.NUMBER_FORMATS;return function(t,n,i){return N(n)&&(n=e.CURRENCY_SYM),N(i)&&(i=e.PATTERNS[1].maxFrac),null==t?t:cr(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function lr(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:cr(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function cr(t,e,n,i,r){if(!j(t)&&!F(t)||isNaN(t))return"";var o,s=!isFinite(t),a=!1,u=Math.abs(t)+"",l="";if(s)l="â";else{(function(t,e,n,i){var r=t.d,o=r.length-t.i,s=(e=N(e)?Math.min(Math.max(n,o),i):+e)+t.i,a=r[s];if(s>0){r.splice(Math.max(t.i,s));for(var u=s;u<r.length;u++)r[u]=0}else{o=Math.max(0,o),t.i=1,r.length=Math.max(1,s=e+1),r[0]=0;for(var l=1;l<s;l++)r[l]=0}if(a>=5)if(s-1<0){for(var c=0;c>s;c--)r.unshift(0),t.i++;r.unshift(1),t.i++}else r[s-1]++;for(;o<Math.max(0,e);o++)r.push(0);var h=r.reduceRight(function(t,e,n,i){return e+=t,i[n]=e%10,Math.floor(e/10)},0);h&&(r.unshift(h),t.i++)})(o=function(t){var e,n,i,r,o,s=0;for((n=t.indexOf(sr))>-1&&(t=t.replace(sr,"")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charAt(i)==ar;i++);if(i==(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)==ar;)o--;for(n-=i,e=[],r=0;i<=o;i++,r++)e[r]=+t.charAt(i)}return n>or&&(e=e.splice(0,or-1),s=n-1,n=1),{d:e,e:s,i:n}}(u),r,e.minFrac,e.maxFrac);var c=o.d,h=o.i,d=o.e,p=[];for(a=c.reduce(function(t,e){return t&&!e},!0);h<0;)c.unshift(0),h++;h>0?p=c.splice(h,c.length):(p=c,c=[0]);var f=[];for(c.length>=e.lgSize&&f.unshift(c.splice(-e.lgSize,c.length).join(""));c.length>e.gSize;)f.unshift(c.splice(-e.gSize,c.length).join(""));c.length&&f.unshift(c.join("")),l=f.join(n),p.length&&(l+=i+p.join("")),d&&(l+="e+"+d)}return t<0&&!a?e.negPre+l+e.negSuf:e.posPre+l+e.posSuf}function hr(t,e,n,i){var r="";for((t<0||i&&t<=0)&&(i?t=1-t:(t=-t,r="-")),t=""+t;t.length<e;)t=ar+t;return n&&(t=t.substr(t.length-e)),r+t}function dr(t,e,n,i,r){return n=n||0,function(o){var s=o["get"+t]();return(n>0||s>-n)&&(s+=n),0===s&&-12==n&&(s=12),hr(s,e,i,r)}}function pr(t,e,n){return function(i,r){var o=i["get"+t]();return r[s((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function fr(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function mr(t){return function(e){var n=fr(e.getFullYear()),i=+function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}(e)-+n;return hr(1+Math.round(i/6048e5),t)}}function gr(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}ur.$inject=["$locale"],lr.$inject=["$locale"];var vr={yyyy:dr("FullYear",4,0,!1,!0),yy:dr("FullYear",2,0,!0,!0),y:dr("FullYear",1,0,!1,!0),MMMM:pr("Month"),MMM:pr("Month",!0),MM:dr("Month",2,1),M:dr("Month",1,1),LLLL:pr("Month",!1,!0),dd:dr("Date",2),d:dr("Date",1),HH:dr("Hours",2),H:dr("Hours",1),hh:dr("Hours",2,-12),h:dr("Hours",1,-12),mm:dr("Minutes",2),m:dr("Minutes",1),ss:dr("Seconds",2),s:dr("Seconds",1),sss:dr("Milliseconds",3),EEEE:pr("Day"),EEE:pr("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var i=-1*n,r=i>=0?"+":"";return r+=hr(Math[i>0?"floor":"ceil"](i/60),2)+hr(Math.abs(i%60),2)},ww:mr(2),w:mr(1),G:gr,GG:gr,GGG:gr,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},yr=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,_r=/^\-?\d+$/;function br(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var o,s,a="",u=[];if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,j(n)&&(n=_r.test(n)?L(n):function(t){var n;if(n=t.match(e)){var i=new Date(0),r=0,o=0,s=n[8]?i.setUTCFullYear:i.setFullYear,a=n[8]?i.setUTCHours:i.setHours;n[9]&&(r=L(n[9]+n[10]),o=L(n[9]+n[11])),s.call(i,L(n[1]),L(n[2])-1,L(n[3]));var u=L(n[4]||0)-r,l=L(n[5]||0)-o,c=L(n[6]||0),h=Math.round(1e3*parseFloat("0."+(n[7]||0)));return a.call(i,u,l,c,h),i}return t}(n)),F(n)&&(n=new Date(n)),!q(n)||!isFinite(n.getTime()))return n;for(;i;)(s=yr.exec(i))?i=(u=rt(u,s,1)).pop():(u.push(i),i=null);var l=n.getTimezoneOffset();return r&&(l=ht(r,l),n=dt(n,r,!0)),b(u,function(e){o=vr[e],a+=o?o(n,t.DATETIME_FORMATS,l):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function wr(){return function(t,e){return N(e)&&(e=2),ut(t,e)}}br.$inject=["$locale"];var xr=A(o),$r=A(s);function kr(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):L(e),isNaN(e)?t:(F(t)&&(t=t.toString()),_(t)?(n=(n=!n||isNaN(n)?0:L(n))<0?Math.max(0,t.length+n):n,e>=0?Er(t,n,n+e):0===n?Er(t,e,t.length):Er(t,Math.max(0,n+e),n)):t)}}function Er(t,e,n){return j(t)?t.slice(e,n):h.call(t,e,n)}function Cr(t){return function(r,o,s,a){if(null==r)return r;if(!_(r))throw e("orderBy")("notarray","Expected array but received: {0}",r);B(o)||(o=[o]),0===o.length&&(o=["+"]);var u=function(e){return e.map(function(e){var n=1,i=M;if(U(e))i=e;else if(j(e)&&("+"!=e.charAt(0)&&"-"!=e.charAt(0)||(n="-"==e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(i=t(e)).constant)){var r=i();i=function(t){return t[r]}}return{get:i,descending:n}})}(o),l=s?-1:1,c=U(a)?a:i,h=Array.prototype.map.call(r,function(t,e){return{value:t,tieBreaker:{value:e,type:"number",index:e},predicateValues:u.map(function(i){return function(t,e){var i=typeof t;null===t?(i="string",t="null"):"object"===i&&(t=function(t){if(U(t.valueOf)&&n(t=t.valueOf()))return t;if(P(t)&&n(t=t.toString()))return t;return t}(t));return{value:t,type:i,index:e}}(i.get(t),e)})}});return h.sort(function(t,e){for(var n=0,i=u.length;n<i;n++){var r=c(t.predicateValues[n],e.predicateValues[n]);if(r)return r*u[n].descending*l}return c(t.tieBreaker,e.tieBreaker)*l}),r=h.map(function(t){return t.value})};function n(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function i(t,e){var n=0,i=t.type,r=e.type;if(i===r){var o=t.value,s=e.value;"string"===i?(o=o.toLowerCase(),s=s.toLowerCase()):"object"===i&&(I(o)&&(o=t.index),I(s)&&(s=e.index)),o!==s&&(n=o<s?-1:1)}else n=i<r?-1:1;return n}}function Tr(t){return U(t)&&(t={link:t}),t.restrict=t.restrict||"AC",A(t)}Cr.$inject=["$parse"];var Lr=A({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===f.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Sr={};b(xe,function(t,e){if("multiple"!=t){var n=an("ng-"+e),i=r;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[n]&&r(t,0,i)}),Sr[n]=function(){return{restrict:"A",priority:100,link:i}}}function r(t,i,r){t.$watch(r[n],function(t){r.$set(e,!!t)})}}),b(ke,function(t,e){Sr[e]=function(){return{priority:100,link:function(t,i,r){if("ngPattern"===e&&"/"==r.ngPattern.charAt(0)){var o=r.ngPattern.match(n);if(o)return void r.$set("ngPattern",new RegExp(o[1],o[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),b(["src","srcset","href"],function(t){var e=an("ng-"+t);Sr[e]=function(){return{priority:99,link:function(n,i,r){var o=t,s=t;"href"===t&&"[object SVGAnimatedString]"===f.call(i.prop("href"))&&(s="xlinkHref",r.$attr[s]="xlink:href",o=null),r.$observe(e,function(e){e?(r.$set(s,e),a&&o&&i.prop(o,r[s])):"href"===t&&r.$set(s,null)})}}}});var Dr={$addControl:D,$$renameControl:function(t,e){t.$name=e},$removeControl:D,$setValidity:D,$setDirty:D,$setPristine:D,$setSubmitted:D},Mr="ng-submitted";function Ar(t,e,n,i,r){var o=this,s=[];o.$error={},o.$$success={},o.$pending=void 0,o.$name=r(e.name||e.ngForm||"")(n),o.$dirty=!1,o.$pristine=!0,o.$valid=!0,o.$invalid=!1,o.$submitted=!1,o.$$parentForm=Dr,o.$rollbackViewValue=function(){b(s,function(t){t.$rollbackViewValue()})},o.$commitViewValue=function(){b(s,function(t){t.$commitViewValue()})},o.$addControl=function(t){St(t.$name,"input"),s.push(t),t.$name&&(o[t.$name]=t),t.$$parentForm=o},o.$$renameControl=function(t,e){var n=t.$name;o[n]===t&&delete o[n],o[e]=t,t.$name=e},o.$removeControl=function(t){t.$name&&o[t.$name]===t&&delete o[t.$name],b(o.$pending,function(e,n){o.$setValidity(n,null,t)}),b(o.$error,function(e,n){o.$setValidity(n,null,t)}),b(o.$$success,function(e,n){o.$setValidity(n,null,t)}),Q(s,t),t.$$parentForm=Dr},Mo({ctrl:this,$element:t,set:function(t,e,n){var i=t[e];i?-1===i.indexOf(n)&&i.push(n):t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(Q(i,n),0===i.length&&delete t[e])},$animate:i}),o.$setDirty=function(){i.removeClass(t,$o),i.addClass(t,ko),o.$dirty=!0,o.$pristine=!1,o.$$parentForm.$setDirty()},o.$setPristine=function(){i.setClass(t,$o,ko+" "+Mr),o.$dirty=!1,o.$pristine=!0,o.$submitted=!1,b(s,function(t){t.$setPristine()})},o.$setUntouched=function(){b(s,function(t){t.$setUntouched()})},o.$setSubmitted=function(){i.addClass(t,Mr),o.$submitted=!0,o.$$parentForm.$setSubmitted()}}Ar.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Pr=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Ar,compile:function(n,r){n.addClass($o).addClass(wo);var o=r.name?"name":!(!t||!r.ngForm)&&"ngForm";return{pre:function(t,n,r,s){var a=s[0];if(!("action"in r)){var u=function(e){t.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),e.preventDefault()};zt(n[0],"submit",u),n.on("$destroy",function(){e(function(){Vt(n[0],"submit",u)},0,!1)})}(s[1]||a.$$parentForm).$addControl(a);var l=o?i(a.$name):D;o&&(l(t,a),r.$observe(o,function(e){a.$name!==e&&(l(t,void 0),a.$$parentForm.$$renameControl(a,e),(l=i(a.$name))(t,a))})),n.on("$destroy",function(){a.$$parentForm.$removeControl(a),l(t,void 0),C(a,Dr)})}}}};function i(t){return""===t?n('this[""]').assign:n(t).assign||D}}]},Nr=Pr(),Or=Pr(!0),Ir=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Rr=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,jr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Fr=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,qr=/^(\d{4,})-(\d{2})-(\d{2})$/,Br=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ur=/^(\d{4,})-W(\d\d)$/,zr=/^(\d{4,})-(\d\d)$/,Vr=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Hr="keydown wheel mousedown",Wr=At();b("date,datetime-local,month,time,week".split(","),function(t){Wr[t]=!0});var Zr={text:function(t,e,n,i,r,o){Yr(t,e,n,i,r,o),Gr(i)},date:Kr("date",qr,Xr(qr,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Kr("datetimelocal",Br,Xr(Br,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Kr("time",Vr,Xr(Vr,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Kr("week",Ur,function(t,e){if(q(t))return t;if(j(t)){Ur.lastIndex=0;var n=Ur.exec(t);if(n){var i=+n[1],r=+n[2],o=0,s=0,a=0,u=0,l=fr(i),c=7*(r-1);return e&&(o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),u=e.getMilliseconds()),new Date(i,0,l.getDate()+c,o,s,a,u)}}return NaN},"yyyy-Www"),month:Kr("month",zr,Xr(zr,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,i,r,o){if(Jr(t,e,n,i),Yr(t,e,n,i,r,o),i.$$parserName="number",i.$parsers.push(function(t){return i.$isEmpty(t)?null:Fr.test(t)?parseFloat(t):void 0}),i.$formatters.push(function(t){if(!i.$isEmpty(t)){if(!F(t))throw Co("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}),O(n.min)||n.ngMin){var s;i.$validators.min=function(t){return i.$isEmpty(t)||N(s)||t>=s},n.$observe("min",function(t){O(t)&&!F(t)&&(t=parseFloat(t)),s=F(t)&&!isNaN(t)?t:void 0,i.$validate()})}if(O(n.max)||n.ngMax){var a;i.$validators.max=function(t){return i.$isEmpty(t)||N(a)||t<=a},n.$observe("max",function(t){O(t)&&!F(t)&&(t=parseFloat(t)),a=F(t)&&!isNaN(t)?t:void 0,i.$validate()})}},url:function(t,e,n,i,r,o){Yr(t,e,n,i,r,o),Gr(i),i.$$parserName="url",i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||Rr.test(n)}},email:function(t,e,n,i,r,o){Yr(t,e,n,i,r,o),Gr(i),i.$$parserName="email",i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||jr.test(n)}},radio:function(t,e,n,i){N(n.name)&&e.attr("name",$());e.on("click",function(t){e[0].checked&&i.$setViewValue(n.value,t&&t.type)}),i.$render=function(){var t=n.value;e[0].checked=t==i.$viewValue},n.$observe("value",i.$render)},checkbox:function(t,e,n,i,r,o,s,a){var u=Qr(a,t,"ngTrueValue",n.ngTrueValue,!0),l=Qr(a,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){i.$setViewValue(e[0].checked,t&&t.type)}),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return!1===t},i.$formatters.push(function(t){return et(t,u)}),i.$parsers.push(function(t){return t?u:l})},hidden:D,button:D,submit:D,reset:D,file:D};function Gr(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function Yr(t,e,n,r,s,a){var u,l=o(e[0].type);if(!s.android){var c=!1;e.on("compositionstart",function(){c=!0}),e.on("compositionend",function(){c=!1,h()})}var h=function(t){if(u&&(a.defer.cancel(u),u=null),!c){var i=e.val(),o=t&&t.type;"password"===l||n.ngTrim&&"false"===n.ngTrim||(i=Y(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,o)}};if(s.hasEvent("input"))e.on("input",h);else{var d=function(t,e,n){u||(u=a.defer(function(){u=null,e&&e.value===n||h(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||d(t,this,this.value)}),s.hasEvent("paste")&&e.on("paste cut",d)}e.on("change",h),Wr[l]&&r.$$hasNativeValidators&&l===n.type&&e.on(Hr,function(t){if(!u){var e=this[i],n=e.badInput,r=e.typeMismatch;u=a.defer(function(){u=null,e.badInput===n&&e.typeMismatch===r||h(t)})}}),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function Xr(t,e){return function(n,i){var r,o;if(q(n))return n;if(j(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Ir.test(n))return new Date(n);if(t.lastIndex=0,r=t.exec(n))return r.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},b(r,function(t,n){n<e.length&&(o[e[n]]=+t)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function Kr(t,e,n,i){return function(r,o,s,a,u,l,c){Jr(r,o,s,a),Yr(0,o,s,a,u,l);var h,d,p,f=a&&a.$options&&a.$options.timezone;(a.$$parserName=t,a.$parsers.push(function(t){if(a.$isEmpty(t))return null;if(e.test(t)){var i=n(t,h);return f&&(i=dt(i,f)),i}}),a.$formatters.push(function(t){if(t&&!q(t))throw Co("datefmt","Expected `{0}` to be a date",t);return m(t)?((h=t)&&f&&(h=dt(h,f,!0)),c("date")(t,i,f)):(h=null,"")}),O(s.min)||s.ngMin)&&(a.$validators.min=function(t){return!m(t)||N(d)||n(t)>=d},s.$observe("min",function(t){d=g(t),a.$validate()}));(O(s.max)||s.ngMax)&&(a.$validators.max=function(t){return!m(t)||N(p)||n(t)<=p},s.$observe("max",function(t){p=g(t),a.$validate()}));function m(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function g(t){return O(t)&&!q(t)?n(t)||void 0:t}}}function Jr(t,e,n,r){var o=e[0];(r.$$hasNativeValidators=I(o.validity))&&r.$parsers.push(function(t){var n=e.prop(i)||{};return n.badInput||n.typeMismatch?void 0:t})}function Qr(t,e,n,i,r){var o;if(O(i)){if(!(o=t(i)).constant)throw Co("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(e)}return r}var to=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,s,a,u){u[0]&&(Zr[o(a.type)]||Zr.text)(r,s,a,u[0],e,t,n,i)}}}}],eo=/^(true|false|\d+)$/,no=function(){return{restrict:"A",priority:100,compile:function(t,e){return eo.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},io=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,i){t.$$addBindingInfo(n,i.ngBind),n=n[0],e.$watch(i.ngBind,function(t){n.textContent=N(t)?"":t})}}}}],ro=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,i,r){var o=t(i.attr(r.$attr.ngBindTemplate));e.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",function(t){i.textContent=N(t)?"":t})}}}}],oo=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(i,r){var o=e(r.ngBindHtml),s=e(r.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(i),function(e,i,r){n.$$addBindingInfo(i,r.ngBindHtml),e.$watch(s,function(){var n=o(e);i.html(t.getTrustedHtml(n)||"")})}}}}],so=A({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function ao(t,e){return t="ngClass"+t,["$animate",function(n){return{restrict:"AC",link:function(o,s,a){var u;function l(t){var e=c(t,1);a.$addClass(e)}function c(t,e){var n=s.data("$classCounts")||At(),i=[];return b(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&i.push(t))}),s.data("$classCounts",n),i.join(" ")}function h(t){if(!0===e||(1&o.$index)===e){var a=r(t||[]);if(u){if(!et(t,u)){!function(t,e){var r=i(e,t),o=i(t,e);r=c(r,1),o=c(o,-1),r&&r.length&&n.addClass(s,r),o&&o.length&&n.removeClass(s,o)}(r(u),a)}}else l(a)}u=B(t)?t.map(function(t){return jt(t)}):jt(t)}o.$watch(a[t],h,!0),a.$observe("class",function(e){h(o.$eval(a[t]))}),"ngClass"!==t&&o.$watch("$index",function(n,i){var s=1&n;if(s!==(1&i)){var u=r(o.$eval(a[t]));s===e?l(u):function(t){var e=c(t,-1);a.$removeClass(e)}(u)}})}};function i(t,e){var n=[];t:for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r==e[o])continue t;n.push(r)}return n}function r(t){var e=[];return B(t)?(b(t,function(t){e=e.concat(r(t))}),e):j(t)?t.split(" "):I(t)?(b(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e):t}}]}var uo=ao("",!0),lo=ao("Odd",0),co=ao("Even",1),ho=Tr({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),po=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],fo={},mo={blur:!0,focus:!0};b("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=an("ng-"+t);fo[e]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var s=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var r=function(){s(e,{$event:n})};mo[t]&&i.$$phase?e.$evalAsync(r):e.$apply(r)})}}}}]});var go=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,s){var a,u,l;n.$watch(r.ngIf,function(n){n?u||s(function(n,o){u=o,n[n.length++]=e.$$createComment("end ngIf",r.ngIf),a={clone:n},t.enter(n,i.parent(),i)}):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),a&&(l=Mt(a.clone),t.leave(l).then(function(){l=null}),a=null))})}}}],vo=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:v.noop,compile:function(i,r){var o=r.ngInclude||r.src,s=r.onload||"",a=r.autoscroll;return function(i,r,u,l,c){var h,d,p,f=0,m=function(){d&&(d.remove(),d=null),h&&(h.$destroy(),h=null),p&&(n.leave(p).then(function(){d=null}),d=p,p=null)};i.$watch(o,function(o){var u=function(){!O(a)||a&&!i.$eval(a)||e()},d=++f;o?(t(o,!0).then(function(t){if(!i.$$destroyed&&d===f){var e=i.$new();l.template=t;var a=c(e,function(t){m(),n.enter(t,null,r).then(u)});p=a,(h=e).$emit("$includeContentLoaded",o),i.$eval(s)}},function(){i.$$destroyed||d===f&&(m(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(m(),l.template=null)})}}}}],yo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){if(f.call(i[0]).match(/SVG/))return i.empty(),void e(ie(o.template,t.document).childNodes)(n,function(t){i.append(t)},{futureParentElement:i});i.html(o.template),e(i.contents())(n)}}}],_o=Tr({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),bo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,i){var r=e.attr(n.$attr.ngList)||", ",o="false"!==n.ngTrim,s=o?Y(r):r;i.$parsers.push(function(t){if(!N(t)){var e=[];return t&&b(t.split(s),function(t){t&&e.push(o?Y(t):t)}),e}}),i.$formatters.push(function(t){if(B(t))return t.join(r)}),i.$isEmpty=function(t){return!t||!t.length}}}},wo="ng-valid",xo="ng-invalid",$o="ng-pristine",ko="ng-dirty",Eo="ng-pending",Co=e("ngModel"),To=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,n,i,r,o,s,a,u,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(t),this.$$parentForm=Dr;var c,h=r(n.ngModel),d=h.assign,p=h,f=d,m=null,g=this;this.$$setOptions=function(t){if(g.$options=t,t&&t.getterSetter){var e=r(n.ngModel+"()"),o=r(n.ngModel+"($$$p)");p=function(t){var n=h(t);return U(n)&&(n=e(t)),n},f=function(t,e){U(h(t))?o(t,{$$$p:e}):d(t,e)}}else if(!h.assign)throw Co("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,pt(i))},this.$render=D,this.$isEmpty=function(t){return N(t)||""===t||null===t||t!=t},this.$$updateEmptyClasses=function(t){g.$isEmpty(t)?(o.removeClass(i,"ng-not-empty"),o.addClass(i,"ng-empty")):(o.removeClass(i,"ng-empty"),o.addClass(i,"ng-not-empty"))};var v=0;Mo({ctrl:this,$element:i,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},$animate:o}),this.$setPristine=function(){g.$dirty=!1,g.$pristine=!0,o.removeClass(i,ko),o.addClass(i,$o)},this.$setDirty=function(){g.$dirty=!0,g.$pristine=!1,o.removeClass(i,$o),o.addClass(i,ko),g.$$parentForm.$setDirty()},this.$setUntouched=function(){g.$touched=!1,g.$untouched=!0,o.setClass(i,"ng-untouched","ng-touched")},this.$setTouched=function(){g.$touched=!0,g.$untouched=!1,o.setClass(i,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){s.cancel(m),g.$viewValue=g.$$lastCommittedViewValue,g.$render()},this.$validate=function(){if(!F(g.$modelValue)||!isNaN(g.$modelValue)){var t=g.$$lastCommittedViewValue,e=g.$$rawModelValue,n=g.$valid,i=g.$modelValue,r=g.$options&&g.$options.allowInvalid;g.$$runValidators(e,t,function(t){r||n===t||(g.$modelValue=t?e:void 0,g.$modelValue!==i&&g.$$writeModelToScope())})}},this.$$runValidators=function(t,e,n){var i=++v;function r(t,e){i===v&&g.$setValidity(t,e)}function o(t){i===v&&n(t)}!function(){var t=g.$$parserName||"parse";if(!N(c))return c||(b(g.$validators,function(t,e){r(e,null)}),b(g.$asyncValidators,function(t,e){r(e,null)})),r(t,c),c;r(t,null);return!0}()?o(!1):function(){var n=!0;if(b(g.$validators,function(i,o){var s=i(t,e);n=n&&s,r(o,s)}),!n)return b(g.$asyncValidators,function(t,e){r(e,null)}),!1;return!0}()?function(){var n=[],i=!0;b(g.$asyncValidators,function(o,s){var a=o(t,e);if(!Z(a))throw Co("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);r(s,void 0),n.push(a.then(function(){r(s,!0)},function(){i=!1,r(s,!1)}))}),n.length?u.all(n).then(function(){o(i)},D):o(!0)}():o(!1)},this.$commitViewValue=function(){var t=g.$viewValue;s.cancel(m),(g.$$lastCommittedViewValue!==t||""===t&&g.$$hasNativeValidators)&&(g.$$updateEmptyClasses(t),g.$$lastCommittedViewValue=t,g.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var e=g.$$lastCommittedViewValue;if(c=!N(e)||void 0)for(var n=0;n<g.$parsers.length;n++)if(N(e=g.$parsers[n](e))){c=!1;break}F(g.$modelValue)&&isNaN(g.$modelValue)&&(g.$modelValue=p(t));var i=g.$modelValue,r=g.$options&&g.$options.allowInvalid;function o(){g.$modelValue!==i&&g.$$writeModelToScope()}g.$$rawModelValue=e,r&&(g.$modelValue=e,o()),g.$$runValidators(e,g.$$lastCommittedViewValue,function(t){r||(g.$modelValue=t?e:void 0,o())})},this.$$writeModelToScope=function(){f(t,g.$modelValue),b(g.$viewChangeListeners,function(t){try{t()}catch(t){e(t)}})},this.$setViewValue=function(t,e){g.$viewValue=t,g.$options&&!g.$options.updateOnDefault||g.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n,i=0,r=g.$options;r&&O(r.debounce)&&(F(n=r.debounce)?i=n:F(n[e])?i=n[e]:F(n.default)&&(i=n.default)),s.cancel(m),i?m=s(function(){g.$commitViewValue()},i):a.$$phase?g.$commitViewValue():t.$apply(function(){g.$commitViewValue()})},t.$watch(function(){var e=p(t);if(e!==g.$modelValue&&(g.$modelValue==g.$modelValue||e==e)){g.$modelValue=g.$$rawModelValue=e,c=void 0;for(var n=g.$formatters,i=n.length,r=e;i--;)r=n[i](r);g.$viewValue!==r&&(g.$$updateEmptyClasses(r),g.$viewValue=g.$$lastCommittedViewValue=r,g.$render(),g.$$runValidators(e,r,D))}return e})}],Lo=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:To,priority:1,compile:function(e){return e.addClass($o).addClass("ng-untouched").addClass(wo),{pre:function(t,e,n,i){var r=i[0],o=i[1]||r.$$parentForm;r.$$setOptions(i[2]&&i[2].$options),o.$addControl(r),n.$observe("name",function(t){r.$name!==t&&r.$$parentForm.$$renameControl(r,t)}),t.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(e,n,i,r){var o=r[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],So=/(\s+|^)default(\s+|$)/,Do=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var n=this;this.$options=tt(t.$eval(e.ngModelOptions)),O(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Y(this.$options.updateOn.replace(So,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}};function Mo(t){var e=t.ctrl,n=t.$element,i={},r=t.set,o=t.unset,s=t.$animate;function a(t,e){e&&!i[t]?(s.addClass(n,t),i[t]=!0):!e&&i[t]&&(s.removeClass(n,t),i[t]=!1)}function u(t,e){t=t?"-"+Et(t,"-"):"",a(wo+t,!0===e),a(xo+t,!1===e)}i[xo]=!(i[wo]=n.hasClass(wo)),e.$setValidity=function(t,n,i){N(n)?function(t,n,i){e[t]||(e[t]={});r(e[t],n,i)}("$pending",t,i):function(t,n,i){e[t]&&o(e[t],n,i);Ao(e[t])&&(e[t]=void 0)}("$pending",t,i);W(n)?n?(o(e.$error,t,i),r(e.$$success,t,i)):(r(e.$error,t,i),o(e.$$success,t,i)):(o(e.$error,t,i),o(e.$$success,t,i));e.$pending?(a(Eo,!0),e.$valid=e.$invalid=void 0,u("",null)):(a(Eo,!1),e.$valid=Ao(e.$error),e.$invalid=!e.$valid,u("",e.$valid));var s;s=e.$pending&&e.$pending[t]?void 0:!e.$error[t]&&(!!e.$$success[t]||null);u(t,s),e.$$parentForm.$setValidity(t,s,e)}}function Ao(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Po=Tr({terminal:!0,priority:1e3}),No=e("ngOptions"),Oo=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Io=["$compile","$document","$parse",function(e,n,i){var r=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,i){i[0].registerOption=D},post:function(t,s,a,l){for(var c,h=l[0],d=l[1],p=a.multiple,f=0,m=s.children(),g=m.length;f<g;f++)if(""===m[f].value){c=m.eq(f);break}var y,w=!!c,x=u(r.cloneNode(!1));x.val("?");var $=function(t,e,n){var r=t.match(Oo);if(!r)throw No("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,pt(e));var o=r[5]||r[7],s=r[6],a=/ as /.test(r[0])&&r[1],u=r[9],l=i(r[2]?r[1]:o),c=a&&i(a)||l,h=u&&i(u),d=u?function(t,e){return h(n,e)}:function(t){return Se(t)},p=function(t,e){return d(t,w(t,e))},f=i(r[2]||r[1]),m=i(r[3]||""),g=i(r[4]||""),y=i(r[8]),b={},w=s?function(t,e){return b[s]=e,b[o]=t,b}:function(t){return b[o]=t,b};function x(t,e,n,i,r){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=r}function $(t){var e;if(!s&&_(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:u,getTrackByValue:p,getWatchables:i(y,function(t){for(var e=[],i=$(t=t||[]),o=i.length,s=0;s<o;s++){var a=t===i?s:i[s],u=t[a],l=w(u,a),c=d(u,l);if(e.push(c),r[2]||r[1]){var h=f(n,l);e.push(h)}if(r[4]){var p=g(n,l);e.push(p)}}return e}),getOptions:function(){for(var t=[],e={},i=y(n)||[],r=$(i),o=r.length,s=0;s<o;s++){var a=i===r?s:r[s],l=i[a],h=w(l,a),_=c(n,h),b=d(_,h),k=new x(b,_,f(n,h),m(n,h),g(n,h));t.push(k),e[b]=k}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[p(t)]},getViewValueFromOption:function(t){return u?v.copy(t.viewValue):t.viewValue}}}}}(a.ngOptions,s,t),k=n[0].createDocumentFragment(),E=function(){w||c.remove()},C=function(){x.remove()};function T(t,e){var n=r.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),t.value!==e.value&&(e.value=t.selectValue)}(t,n)}function L(){var t=y&&h.readValue();if(y)for(var e=y.items.length-1;e>=0;e--){var n=y.items[e];O(n.group)?be(n.element.parentNode):be(n.element)}y=$.getOptions();var i={};if(w&&s.prepend(c),y.items.forEach(function(t){var e;O(t.group)?((e=i[t.group])||(e=o.cloneNode(!1),k.appendChild(e),e.label=null===t.group?"null":t.group,i[t.group]=e),T(t,e)):T(t,k)}),s[0].appendChild(k),d.$render(),!d.$isEmpty(t)){var r=h.readValue();($.trackBy||p?et(t,r):t===r)||(d.$setViewValue(r),d.$render())}}p?(d.$isEmpty=function(t){return!t||0===t.length},h.writeValue=function(t){y.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=y.getOptionFromViewValue(t);e&&(e.element.selected=!0)})},h.readValue=function(){var t=[];return b(s.val()||[],function(e){var n=y.selectValueMap[e];n&&!n.disabled&&t.push(y.getViewValueFromOption(n))}),t},$.trackBy&&t.$watchCollection(function(){if(B(d.$viewValue))return d.$viewValue.map(function(t){return $.getTrackByValue(t)})},function(){d.$render()})):(h.writeValue=function(t){var e=y.getOptionFromViewValue(t);e?(s[0].value!==e.selectValue&&(C(),E(),s[0].value=e.selectValue,e.element.selected=!0),e.element.setAttribute("selected","selected")):null===t||w?(C(),w||s.prepend(c),s.val(""),c.prop("selected",!0),c.attr("selected",!0)):(E(),s.prepend(x),s.val("?"),x.prop("selected",!0),x.attr("selected",!0))},h.readValue=function(){var t=y.selectValueMap[s.val()];return t&&!t.disabled?(E(),C(),y.getViewValueFromOption(t)):null},$.trackBy&&t.$watch(function(){return $.getTrackByValue(d.$viewValue)},function(){d.$render()})),w?(c.remove(),e(c)(t),c.removeClass("ng-scope")):c=u(r.cloneNode(!1)),s.empty(),L(),t.$watchCollection($.getWatchables,L)}}}}],Ro=["$locale","$interpolate","$log",function(t,e,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(s,a,u){var l,c=u.count,h=u.$attr.when&&a.attr(u.$attr.when),d=u.offset||0,p=s.$eval(h)||{},f={},m=e.startSymbol(),g=e.endSymbol(),y=m+c+"-"+d+g,_=v.noop;function w(t){a.text(t||"")}b(u,function(t,e){var n=r.exec(e);if(n){var i=(n[1]?"-":"")+o(n[2]);p[i]=a.attr(u.$attr[e])}}),b(p,function(t,n){f[n]=e(t.replace(i,y))}),s.$watch(c,function(e){var i=parseFloat(e),r=isNaN(i);if(r||i in p||(i=t.pluralCat(i-d)),i!==l&&!(r&&F(l)&&isNaN(l))){_();var o=f[i];N(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+h),_=D,w()):_=s.$watch(o,w),l=i}})}}}],jo=["$parse","$animate","$compile",function(t,n,i){var o=e("ngRepeat"),s=function(t,e,n,i,r,o,s){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},a=function(t){return t.clone[0]},u=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,l){var c=l.ngRepeat,h=i.$$createComment("end ngRepeat",c),d=c.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!d)throw o("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",c);var p=d[1],f=d[2],m=d[3],g=d[4];if(!(d=p.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))throw o("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",p);var v,y,w,x,$=d[3]||d[1],k=d[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw o("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m);var E={$id:Se};return g?v=t(g):(w=function(t,e){return Se(e)},x=function(t){return t}),function(t,e,i,l,d){v&&(y=function(e,n,i){return k&&(E[k]=e),E[$]=n,E.$index=i,v(t,E)});var p=At();t.$watchCollection(f,function(i){var l,f,g,v,E,C,T,L,S,D,M,A,P=e[0],N=At();if(m&&(t[m]=i),_(i))S=i,L=y||w;else for(var O in L=y||x,S=[],i)r.call(i,O)&&"$"!==O.charAt(0)&&S.push(O);for(v=S.length,M=new Array(v),l=0;l<v;l++)if(E=i===S?l:S[l],C=i[E],T=L(E,C,l),p[T])D=p[T],delete p[T],N[T]=D,M[l]=D;else{if(N[T])throw b(M,function(t){t&&t.scope&&(p[t.id]=t)}),o("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",c,T,C);M[l]={id:T,scope:void 0,clone:void 0},N[T]=!0}for(var I in p){if(A=Mt((D=p[I]).clone),n.leave(A),A[0].parentNode)for(l=0,f=A.length;l<f;l++)A[l].$$NG_REMOVED=!0;D.scope.$destroy()}for(l=0;l<v;l++)if(E=i===S?l:S[l],C=i[E],(D=M[l]).scope){g=P;do{g=g.nextSibling}while(g&&g.$$NG_REMOVED);a(D)!=g&&n.move(Mt(D.clone),null,P),P=u(D),s(D.scope,l,$,C,k,E,v)}else d(function(t,e){D.scope=e;var i=h.cloneNode(!1);t[t.length++]=i,n.enter(t,null,P),P=i,D.clone=t,N[D.id]=D,s(D.scope,l,$,C,k,E,v)});p=N})}}}}],Fo=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],qo=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Bo=Tr(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&b(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),Uo=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,o){var s=r.ngSwitch||r.on,a=[],u=[],l=[],c=[],h=function(t,e){return function(){t.splice(e,1)}};n.$watch(s,function(n){var i,r;for(i=0,r=l.length;i<r;++i)t.cancel(l[i]);for(l.length=0,i=0,r=c.length;i<r;++i){var s=Mt(u[i].clone);c[i].$destroy(),(l[i]=t.leave(s)).then(h(l,i))}u.length=0,c.length=0,(a=o.cases["!"+n]||o.cases["?"])&&b(a,function(n){n.transclude(function(i,r){c.push(r);var o=n.element;i[i.length++]=e.$$createComment("end ngSwitchWhen");var s={clone:i};u.push(s),t.enter(i,o.parent(),o)})})})}}}],zo=Tr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:e})}}),Vo=Tr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),Ho=e("ngTransclude"),Wo=["$compile",function(t){return{restrict:"EAC",terminal:!0,compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,i,r,o){if(!o)throw Ho("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",pt(e));i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude="");var s=i.ngTransclude||i.ngTranscludeSlot;function a(){n(t,function(t){e.append(t)})}o(function(t,n){t.length?e.append(t):(a(),n.$destroy())},null,s),s&&!o.isSlotFilled(s)&&a()}}}}],Zo=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"==n.type){var i=n.id,r=e[0].text;t.put(i,r)}}}}],Go={$setViewValue:D,$render:D};var Yo=["$element","$scope",function(e,n){var i=this,r=new De;i.ngModelCtrl=Go,i.unknownOption=u(t.document.createElement("option")),i.renderUnknownOption=function(t){var n="? "+Se(t)+" ?";i.unknownOption.val(n),e.prepend(i.unknownOption),e.val(n)},n.$on("$destroy",function(){i.renderUnknownOption=D}),i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.readValue=function(){return i.removeUnknownOption(),e.val()},i.writeValue=function(t){i.hasOption(t)?(i.removeUnknownOption(),e.val(t),""===t&&i.emptyOption.prop("selected",!0)):null==t&&i.emptyOption?(i.removeUnknownOption(),e.val("")):i.renderUnknownOption(t)},i.addOption=function(t,e){if(e[0].nodeType!==Ot){St(t,'"option value"'),""===t&&(i.emptyOption=e);var n=r.get(t)||0;r.put(t,n+1),i.ngModelCtrl.$render(),function(t){t[0].hasAttribute("selected")&&(t[0].selected=!0)}(e)}},i.removeOption=function(t){var e=r.get(t);e&&(1===e?(r.remove(t),""===t&&(i.emptyOption=void 0)):r.put(t,e-1))},i.hasOption=function(t){return!!r.get(t)},i.registerOption=function(t,e,n,r,o){var s;r?n.$observe("value",function(t){O(s)&&i.removeOption(s),s=t,i.addOption(t,e)}):o?t.$watch(o,function(t,r){n.$set("value",t),r!==t&&i.removeOption(r),i.addOption(t,e)}):i.addOption(n.value,e);e.on("$destroy",function(){i.removeOption(n.value),i.ngModelCtrl.$render()})}}],Xo=function(){return{restrict:"E",require:["select","?ngModel"],controller:Yo,priority:1,link:{pre:function(t,e,n,i){var r=i[1];if(!r)return;var o=i[0];if(o.ngModelCtrl=r,e.on("change",function(){t.$apply(function(){r.$setViewValue(o.readValue())})}),n.multiple){o.readValue=function(){var t=[];return b(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},o.writeValue=function(t){var n=new De(t);b(e.find("option"),function(t){t.selected=O(n.get(t.value))})};var s,a=NaN;t.$watch(function(){a!==r.$viewValue||et(s,r.$viewValue)||(s=jt(r.$viewValue),r.$render()),a=r.$viewValue}),r.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,i){var r=i[1];if(!r)return;var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}}},Ko=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){if(O(n.value))var i=t(n.value,!0);else{var r=t(e.text(),!0);r||n.$set("value",e.text())}return function(t,e,n){var o=e.parent(),s=o.data("$selectController")||o.parent().data("$selectController");s&&s.registerOption(t,e,n,i,r)}}}}],Jo=A({restrict:"E",terminal:!1}),Qo=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){i&&(n.required=!0,i.$validators.required=function(t,e){return!n.required||!i.$isEmpty(e)},n.$observe("required",function(){i.$validate()}))}}},ts=function(){return{restrict:"A",require:"?ngModel",link:function(t,n,i,r){if(r){var o,s=i.ngPattern||i.pattern;i.$observe("pattern",function(t){if(j(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw e("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,pt(n));o=t||void 0,r.$validate()}),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||N(o)||o.test(e)}}}}},es=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=-1;n.$observe("maxlength",function(t){var e=L(t);r=isNaN(e)?-1:e,i.$validate()}),i.$validators.maxlength=function(t,e){return r<0||i.$isEmpty(e)||e.length<=r}}}}},ns=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=0;n.$observe("minlength",function(t){r=L(t)||0,i.$validate()}),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=r}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load angular more than once."):(!function(){var e;if(!Ct){var n=it();(l=N(n)?t.jQuery:n?t[n]:void 0)&&l.fn.on?(u=l,C(l.fn,{scope:we.scope,isolateScope:we.isolateScope,controller:we.controller,injector:we.injector,inheritedData:we.inheritedData}),e=l.cleanData,l.cleanData=function(t){for(var n,i,r=0;null!=(i=t[r]);r++)(n=l._data(i,"events"))&&n.$destroy&&l(i).triggerHandler("$destroy");e(t)}):u=se,v.element=u,Ct=!0}}(),function(n){C(n,{bootstrap:wt,copy:tt,extend:C,merge:T,equals:et,element:u,forEach:b,injector:qe,noop:D,bind:st,toJson:ut,fromJson:lt,identity:M,isUndefined:N,isDefined:O,isString:j,isFunction:U,isObject:I,isNumber:F,isElement:K,isArray:B,version:qt,isDate:q,lowercase:o,uppercase:s,callbacks:{$$counter:0},getTestability:$t,$$minErr:e,$$csp:nt,reloadWithDebugInfo:xt}),(c=function(t){var n=e("$injector"),i=e("ng");function r(t,e,n){return t[e]||(t[e]=n())}var o=r(t,"angular",Object);return o.$$minErr=o.$$minErr||e,r(o,"module",function(){var t={};return function(e,o,s){return function(t,e){if("hasOwnProperty"===t)throw i("badname","hasOwnProperty is not a valid {0} name",e)}(e,"module"),o&&t.hasOwnProperty(e)&&(t[e]=null),r(t,e,function(){if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",e);var t=[],i=[],r=[],a=l("$injector","invoke","push",i),u={_invokeQueue:t,_configBlocks:i,_runBlocks:r,requires:o,name:e,provider:c("$provide","provider"),factory:c("$provide","factory"),service:c("$provide","service"),value:l("$provide","value"),constant:l("$provide","constant","unshift"),decorator:c("$provide","decorator"),animation:c("$animateProvider","register"),filter:c("$filterProvider","register"),controller:c("$controllerProvider","register"),directive:c("$compileProvider","directive"),component:c("$compileProvider","component"),config:a,run:function(t){return r.push(t),this}};return s&&a(s),u;function l(e,n,i,r){return r||(r=t),function(){return r[i||"push"]([e,n,arguments]),u}}function c(n,i){return function(r,o){return o&&U(o)&&(o.$$moduleName=e),t.push([n,i,arguments]),u}}})}})}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Ri}),t.provider("$compile",rn).directive({a:Lr,input:to,textarea:to,form:Nr,script:Zo,select:Xo,style:Jo,option:Ko,ngBind:io,ngBindHtml:oo,ngBindTemplate:ro,ngClass:uo,ngClassEven:co,ngClassOdd:lo,ngCloak:ho,ngController:po,ngForm:Or,ngHide:qo,ngIf:go,ngInclude:vo,ngInit:_o,ngNonBindable:Po,ngPluralize:Ro,ngRepeat:jo,ngShow:Fo,ngStyle:Bo,ngSwitch:Uo,ngSwitchWhen:zo,ngSwitchDefault:Vo,ngOptions:Io,ngTransclude:Wo,ngModel:Lo,ngList:bo,ngChange:so,pattern:ts,ngPattern:ts,required:Qo,ngRequired:Qo,minlength:ns,ngMinlength:ns,maxlength:es,ngMaxlength:es,ngValue:no,ngModelOptions:Do}).directive({ngInclude:yo}).directive(Sr).directive(fo),t.provider({$anchorScroll:Be,$animate:Ge,$animateCss:Ke,$$animateJs:We,$$animateQueue:Ze,$$AnimateRunner:Xe,$$animateAsyncRun:Ye,$browser:Je,$cacheFactory:Qe,$controller:pn,$document:fn,$exceptionHandler:mn,$filter:er,$$forceReflow:gn,$interpolate:In,$interval:Rn,$http:An,$httpParamSerializer:En,$httpParamSerializerJQLike:Cn,$httpBackend:Nn,$xhrFactory:Pn,$jsonpCallbacks:jn,$location:ei,$log:ni,$parse:Mi,$rootScope:Ii,$q:Ai,$$q:Pi,$sce:Ui,$sceDelegate:Bi,$sniffer:zi,$templateCache:tn,$templateRequest:Hi,$$testability:Wi,$timeout:Zi,$window:Ji,$$rAF:Oi,$$jqLite:Le,$$HashMap:Me,$$cookieReader:tr})}])}(v),v.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-Â¤",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,i){var r=0|t,o=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var i=Math.pow(10,n);return{v:n,f:(t*i|0)%i}}(t,i);return 1==r&&0==o.v?e:n}})}]),u(t.document).ready(function(){bt(t.document,wt)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(t,e,n){n(141),t.exports="vAccordion"},function(t,e){
/**
 * vAccordion - AngularJS multi-level accordion component
 * @version v1.6.0
 * @link http://lukaszwatroba.github.io/v-accordion
 * @author Åukasz WÄtroba <l@lukaszwatroba.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t){"use strict";function e(e){return{restrict:"E",transclude:!0,controller:n,scope:{control:"=?",expandCb:"&?onexpand",collapseCb:"&?oncollapse",id:"@?"},link:{pre:function(e,n,i){e.allowMultiple=t.isDefined(i.multiple)&&(""===i.multiple||"true"===i.multiple)},post:function(n,i,r,o,s){if(s(n.$parent.$new(),function(t,e){e.$accordion=n.internalControl,n.id&&(e.$accordion.id=n.id),i.append(t)}),r.$set("role","tablist"),n.allowMultiple&&r.$set("aria-multiselectable","true"),t.isDefined(n.control)){t.forEach(["toggle","expand","collapse","expandAll","collapseAll","hasExpandedPane"],function(t){if(n.control[t])throw new Error("The `"+t+"` method can not be overwritten")});var a=t.extend({},n.internalControl,n.control);n.control=n.internalControl=a}else n.control=n.internalControl;e(function(){var e=t.isDefined(o.getAccordionId())?o.getAccordionId()+":onReady":"vAccordion:onReady";n.$emit(e)},0)}}}}function n(e){var n=this,i=!1;e.panes=[],e.expandCb=t.isFunction(e.expandCb)?e.expandCb:t.noop,e.collapseCb=t.isFunction(e.collapseCb)?e.collapseCb:t.noop,n.hasExpandedPane=function(){for(var t=!1,n=0,i=e.panes.length;n<i;n++){if(e.panes[n].isExpanded){t=!0;break}}return t},n.getPaneByIndex=function(n){var i;return t.forEach(e.panes,function(e){e.$parent&&t.isDefined(e.$parent.$index)&&e.$parent.$index===n&&(i=e)}),i||e.panes[n]},n.getPaneIndex=function(n){var i;return t.forEach(e.panes,function(e){e.$parent&&t.isDefined(e.$parent.$index)&&e===n&&(i=e.$parent.$index)}),t.isDefined(i)?i:e.panes.indexOf(n)},n.getPaneById=function(n){var i;return t.forEach(e.panes,function(t){t.id&&t.id===n&&(i=t)}),i},n.getPaneId=function(t){return t.id},n.getAccordionId=function(){return e.id},n.disable=function(){i=!0},n.enable=function(){i=!1},n.addPane=function(t){if(!e.allowMultiple&&n.hasExpandedPane()&&t.isExpanded)throw new Error("The `multiple` attribute can't be found");e.panes.push(t),t.isExpanded&&e.expandCb({index:n.getPaneIndex(t),id:t.id,pane:t})},n.focusNext=function(){for(var t=e.panes.length,n=0;n<t;n++){if(e.panes[n].isFocused){var i=n+1;i>e.panes.length-1&&(i=0),e.panes[i].paneElement.find("v-pane-header")[0].focus();break}}},n.focusPrevious=function(){for(var t=e.panes.length,n=0;n<t;n++){if(e.panes[n].isFocused){var i=n-1;i<0&&(i=e.panes.length-1),e.panes[i].paneElement.find("v-pane-header")[0].focus();break}}},n.toggle=function(t){!i&&t&&(e.allowMultiple||n.collapseAll(t),t.isExpanded=!t.isExpanded,t.isExpanded?e.expandCb({index:n.getPaneIndex(t),id:t.id,pane:t}):e.collapseCb({index:n.getPaneIndex(t),id:t.id,pane:t}))},n.expand=function(t){!i&&t&&(e.allowMultiple||n.collapseAll(t),t.isExpanded||(t.isExpanded=!0,e.expandCb({index:n.getPaneIndex(t),id:t.id,pane:t})))},n.collapse=function(t){!i&&t&&t.isExpanded&&(t.isExpanded=!1,e.collapseCb({index:n.getPaneIndex(t),id:t.id,pane:t}))},n.expandAll=function(){if(!i){if(!e.allowMultiple)throw new Error("The `multiple` attribute can't be found");t.forEach(e.panes,function(t){n.expand(t)})}},n.collapseAll=function(r){i||t.forEach(e.panes,function(t){t!==r&&n.collapse(t)})},e.internalControl={toggle:function(e){t.isString(e)?n.toggle(n.getPaneById(e)):n.toggle(n.getPaneByIndex(e))},expand:function(e){t.isString(e)?n.expand(n.getPaneById(e)):n.expand(n.getPaneByIndex(e))},collapse:function(e){t.isString(e)?n.collapse(n.getPaneById(e)):n.collapse(n.getPaneByIndex(e))},expandAll:n.expandAll,collapseAll:n.collapseAll,hasExpandedPane:n.hasExpandedPane}}function i(e,n,i){return{restrict:"E",require:"^vAccordion",transclude:!0,controller:r,scope:{isExpanded:"=?expanded",isDisabled:"=?ngDisabled",id:"@?"},link:function(e,r,o,s,a){a(e.$parent.$new(),function(t,n){n.$pane=e.internalControl,e.id&&(n.$pane.id=e.id),r.append(t)}),t.isDefined(e.isExpanded)||(e.isExpanded=t.isDefined(o.expanded)&&""===o.expanded),t.isDefined(o.disabled)&&(e.isDisabled=!0);var u=i.states,l=r.find("v-pane-header"),c=r.find("v-pane-content"),h=c.find("div"),d=s.getAccordionId();if(!l[0])throw new Error("The `v-pane-header` directive can't be found");if(!c[0])throw new Error("The `v-pane-content` directive can't be found");function p(n){n=t.isDefined(d)?d+":"+n:"vAccordion:"+n,e.$emit(n)}e.paneElement=r,e.paneContentElement=c,e.paneInnerElement=h,e.accordionCtrl=s,s.addPane(e),e.$evalAsync(function(){e.isExpanded?(r.addClass(u.expanded),c.css("max-height","none").attr("aria-hidden","false"),l.attr({"aria-selected":"true","aria-expanded":"true"})):(c.css("max-height","0px").attr("aria-hidden","true"),l.attr({"aria-selected":"false","aria-expanded":"false"}))}),e.$watch("isExpanded",function(t,e){if(t===e)return!0;t?(s.disable(),c.attr("aria-hidden","false"),l.attr({"aria-selected":"true","aria-expanded":"true"}),p("onExpand"),n.addClass(r,u.expanded).then(function(){s.enable(),p("onExpandAnimationEnd")})):(s.disable(),c.attr("aria-hidden","true"),l.attr({"aria-selected":"false","aria-expanded":"false"}),p("onCollapse"),n.removeClass(r,u.expanded).then(function(){s.enable(),p("onCollapseAnimationEnd")}))})}}}function r(t){this.isExpanded=function(){return t.isExpanded},this.toggle=function(){t.isAnimating||t.isDisabled||t.accordionCtrl.toggle(t)},this.expand=function(){t.isAnimating||t.isDisabled||t.accordionCtrl.expand(t)},this.collapse=function(){t.isAnimating||t.isDisabled||t.accordionCtrl.collapse(t)},this.focusPane=function(){t.isFocused=!0},this.blurPane=function(){t.isFocused=!1},t.internalControl={toggle:this.toggle,expand:this.expand,collapse:this.collapse,isExpanded:this.isExpanded}}t.module("vAccordion.config",[]).constant("accordionConfig",{states:{expanded:"is-expanded"},expandAnimationDuration:.5}).animation(".is-expanded",["$animateCss","accordionConfig",function(e,n){return{addClass:function(i,r,o){var s=t.element(i[0].querySelector("v-pane-content")),a=t.element(s[0].querySelector("div"))[0].offsetHeight;return e(s,{easing:"ease",from:{maxHeight:"0px"},to:{maxHeight:a+"px"},duration:n.expandAnimationDuration}).start().done(function(){s.css("max-height","none"),o()}),function(t){t&&s.css("max-height","none")}},removeClass:function(i,r,o){var s=t.element(i[0].querySelector("v-pane-content")),a=t.element(s[0].querySelector("div"))[0].offsetHeight;return e(s,{easing:"ease",from:{maxHeight:a+"px"},to:{maxHeight:"0px"},duration:n.expandAnimationDuration}).start().done(o),function(t){t&&s.css("max-height","0px")}}}}]),t.module("vAccordion.directives",[]),t.module("vAccordion",["vAccordion.config","vAccordion.directives"]),t.module("vAccordion.directives").directive("vAccordion",e),e.$inject=["$timeout"],n.$inject=["$scope"],t.module("vAccordion.directives").directive("vPane",i),i.$inject=["$timeout","$animate","accordionConfig"],r.$inject=["$scope"],t.module("vAccordion.directives").directive("vPaneContent",function(){return{restrict:"E",require:"^vPane",transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(t,e,n){n.$set("role","tabpanel"),n.$set("aria-hidden","true")}}}),t.module("vAccordion.directives").directive("vPaneHeader",function(){return{restrict:"E",require:["^vPane","^vAccordion"],transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(e,n,i,r){i.$set("role","tab"),i.$set("tabindex","0");var o=r[0],s=r[1],a=t.isDefined(i.inactive);function u(){if(a)return!1;e.$apply(function(){o.toggle()})}function l(t){32===t.keyCode||13===t.keyCode?(e.$apply(function(){o.toggle()}),t.preventDefault()):39===t.keyCode||40===t.keyCode?(e.$apply(function(){s.focusNext()}),t.preventDefault()):37!==t.keyCode&&38!==t.keyCode||(e.$apply(function(){s.focusPrevious()}),t.preventDefault())}n[0].onfocus=function(){o.focusPane()},n[0].onblur=function(){o.blurPane()},n.bind("click",u),n.bind("keydown",l),e.$on("$destroy",function(){n.unbind("click",u),n.unbind("keydown",l),n[0].onfocus=null,n[0].onblur=null})}}})}(angular)},,,,function(t,e,n){"use strict";var i=n(14);function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==r&&p(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){i(function(){var i;try{i=e(n)}catch(e){return o.reject(t,e)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)})}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var s=f(function(){e(r,i)});"error"===s.status&&i(s.value)}function f(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}t.exports=l,l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(r);this.state!==u?h(n,this.state===a?t:e,this.outcome):this.queue.push(new c(n,t,e));return n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=f(d,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)p(t,i);else{t.state=a,t.outcome=e;for(var r=-1,s=t.queue.length;++r<s;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},l.resolve=function(t){if(t instanceof this)return t;return o.resolve(new this(r),t)},l.reject=function(t){var e=new this(r);return o.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);var s=new Array(n),a=0,u=-1,l=new this(r);for(;++u<n;)c(t[u],u);return l;function c(t,r){e.resolve(t).then(function(t){s[r]=t,++a!==n||i||(i=!0,o.resolve(l,s))},function(t){i||(i=!0,o.reject(l,t))})}},l.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);var s=-1,a=new this(r);for(;++s<n;)u(t[s]);return a;function u(t){e.resolve(t).then(function(t){i||(i=!0,o.resolve(a,t))},function(t){i||(i=!0,o.reject(a,t))})}}},function(t,e,n){"use strict";t.exports=function(t){return function(){var e=arguments.length;if(e){for(var n=[],i=-1;++i<e;)n[i]=arguments[i];return t.call(this,n)}return t.call(this,[])}}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,s,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(o(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(r(n))for(a=Array.prototype.slice.call(arguments,1),s=(l=n.slice()).length,u=0;u<s;u++)l[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var s;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var n,o,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,o=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var i=n(150),r=n(151),o=r;o.v1=i,o.v4=r,t.exports=o},function(t,e,n){var i,r,o=n(46),s=n(47),a=0,u=0;t.exports=function(t,e,n){var l=e&&n||0,c=e||[],h=(t=t||{}).node||i,d=void 0!==t.clockseq?t.clockseq:r;if(null==h||null==d){var p=o();null==h&&(h=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=r=16383&(p[6]<<8|p[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),m=void 0!==t.nsecs?t.nsecs:u+1,g=f-a+(m-u)/1e4;if(g<0&&void 0===t.clockseq&&(d=d+1&16383),(g<0||f>a)&&void 0===t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,u=m,r=d;var v=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;c[l++]=v>>>24&255,c[l++]=v>>>16&255,c[l++]=v>>>8&255,c[l++]=255&v;var y=f/4294967296*1e4&268435455;c[l++]=y>>>8&255,c[l++]=255&y,c[l++]=y>>>24&15|16,c[l++]=y>>>16&255,c[l++]=d>>>8|128,c[l++]=255&d;for(var _=0;_<6;++_)c[l+_]=h[_];return e||s(c)}},function(t,e,n){var i=n(46),r=n(47);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[o+a]=s[a];return e||r(s)}},function(t,e,n){(function(i){function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG),t}(e=t.exports=n(154)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++r)}),t.splice(o,0,i)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())}).call(this,n(153))},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,l=[],c=!1,h=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=a(d);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||c||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){function i(t){var n;function i(){if(i.enabled){var t=i,r=+new Date,o=r-(n||r);t.diff=o,t.prev=n,t.curr=r,n=r;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;u++;var r=e.formatters[i];if("function"==typeof r){var o=s[u];n=r.call(t,o),s.splice(u,1),u--}return n}),e.formatArgs.call(t,s),(i.log||e.log||console.log.bind(console)).apply(t,s)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=r,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var o=e.instances[n];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(155),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e){var n=1e3,i=60*n,r=60*i,o=24*r,s=365.25*o;function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===u&&!1===isNaN(t))return e.long?function(t){return a(t,o,"day")||a(t,r,"hour")||a(t,i,"minute")||a(t,n,"second")||t+" ms"}(t):function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=r)return Math.round(t/r)+"h";if(t>=i)return Math.round(t/i)+"m";if(t>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){t.exports=function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],i=t[1],r=t[2],o=t[3];n+=(i&r|~i&o)+e[0]-680876936|0,o+=((n=(n<<7|n>>>25)+i|0)&i|~n&r)+e[1]-389564586|0,r+=((o=(o<<12|o>>>20)+n|0)&n|~o&i)+e[2]+606105819|0,i+=((r=(r<<17|r>>>15)+o|0)&o|~r&n)+e[3]-1044525330|0,n+=((i=(i<<22|i>>>10)+r|0)&r|~i&o)+e[4]-176418897|0,o+=((n=(n<<7|n>>>25)+i|0)&i|~n&r)+e[5]+1200080426|0,r+=((o=(o<<12|o>>>20)+n|0)&n|~o&i)+e[6]-1473231341|0,i+=((r=(r<<17|r>>>15)+o|0)&o|~r&n)+e[7]-45705983|0,n+=((i=(i<<22|i>>>10)+r|0)&r|~i&o)+e[8]+1770035416|0,o+=((n=(n<<7|n>>>25)+i|0)&i|~n&r)+e[9]-1958414417|0,r+=((o=(o<<12|o>>>20)+n|0)&n|~o&i)+e[10]-42063|0,i+=((r=(r<<17|r>>>15)+o|0)&o|~r&n)+e[11]-1990404162|0,n+=((i=(i<<22|i>>>10)+r|0)&r|~i&o)+e[12]+1804603682|0,o+=((n=(n<<7|n>>>25)+i|0)&i|~n&r)+e[13]-40341101|0,r+=((o=(o<<12|o>>>20)+n|0)&n|~o&i)+e[14]-1502002290|0,i+=((r=(r<<17|r>>>15)+o|0)&o|~r&n)+e[15]+1236535329|0,n+=((i=(i<<22|i>>>10)+r|0)&o|r&~o)+e[1]-165796510|0,o+=((n=(n<<5|n>>>27)+i|0)&r|i&~r)+e[6]-1069501632|0,r+=((o=(o<<9|o>>>23)+n|0)&i|n&~i)+e[11]+643717713|0,i+=((r=(r<<14|r>>>18)+o|0)&n|o&~n)+e[0]-373897302|0,n+=((i=(i<<20|i>>>12)+r|0)&o|r&~o)+e[5]-701558691|0,o+=((n=(n<<5|n>>>27)+i|0)&r|i&~r)+e[10]+38016083|0,r+=((o=(o<<9|o>>>23)+n|0)&i|n&~i)+e[15]-660478335|0,i+=((r=(r<<14|r>>>18)+o|0)&n|o&~n)+e[4]-405537848|0,n+=((i=(i<<20|i>>>12)+r|0)&o|r&~o)+e[9]+568446438|0,o+=((n=(n<<5|n>>>27)+i|0)&r|i&~r)+e[14]-1019803690|0,r+=((o=(o<<9|o>>>23)+n|0)&i|n&~i)+e[3]-187363961|0,i+=((r=(r<<14|r>>>18)+o|0)&n|o&~n)+e[8]+1163531501|0,n+=((i=(i<<20|i>>>12)+r|0)&o|r&~o)+e[13]-1444681467|0,o+=((n=(n<<5|n>>>27)+i|0)&r|i&~r)+e[2]-51403784|0,r+=((o=(o<<9|o>>>23)+n|0)&i|n&~i)+e[7]+1735328473|0,i+=((r=(r<<14|r>>>18)+o|0)&n|o&~n)+e[12]-1926607734|0,n+=((i=(i<<20|i>>>12)+r|0)^r^o)+e[5]-378558|0,o+=((n=(n<<4|n>>>28)+i|0)^i^r)+e[8]-2022574463|0,r+=((o=(o<<11|o>>>21)+n|0)^n^i)+e[11]+1839030562|0,i+=((r=(r<<16|r>>>16)+o|0)^o^n)+e[14]-35309556|0,n+=((i=(i<<23|i>>>9)+r|0)^r^o)+e[1]-1530992060|0,o+=((n=(n<<4|n>>>28)+i|0)^i^r)+e[4]+1272893353|0,r+=((o=(o<<11|o>>>21)+n|0)^n^i)+e[7]-155497632|0,i+=((r=(r<<16|r>>>16)+o|0)^o^n)+e[10]-1094730640|0,n+=((i=(i<<23|i>>>9)+r|0)^r^o)+e[13]+681279174|0,o+=((n=(n<<4|n>>>28)+i|0)^i^r)+e[0]-358537222|0,r+=((o=(o<<11|o>>>21)+n|0)^n^i)+e[3]-722521979|0,i+=((r=(r<<16|r>>>16)+o|0)^o^n)+e[6]+76029189|0,n+=((i=(i<<23|i>>>9)+r|0)^r^o)+e[9]-640364487|0,o+=((n=(n<<4|n>>>28)+i|0)^i^r)+e[12]-421815835|0,r+=((o=(o<<11|o>>>21)+n|0)^n^i)+e[15]+530742520|0,i+=((r=(r<<16|r>>>16)+o|0)^o^n)+e[2]-995338651|0,n+=(r^((i=(i<<23|i>>>9)+r|0)|~o))+e[0]-198630844|0,o+=(i^((n=(n<<6|n>>>26)+i|0)|~r))+e[7]+1126891415|0,r+=(n^((o=(o<<10|o>>>22)+n|0)|~i))+e[14]-1416354905|0,i+=(o^((r=(r<<15|r>>>17)+o|0)|~n))+e[5]-57434055|0,n+=(r^((i=(i<<21|i>>>11)+r|0)|~o))+e[12]+1700485571|0,o+=(i^((n=(n<<6|n>>>26)+i|0)|~r))+e[3]-1894986606|0,r+=(n^((o=(o<<10|o>>>22)+n|0)|~i))+e[10]-1051523|0,i+=(o^((r=(r<<15|r>>>17)+o|0)|~n))+e[1]-2054922799|0,n+=(r^((i=(i<<21|i>>>11)+r|0)|~o))+e[8]+1873313359|0,o+=(i^((n=(n<<6|n>>>26)+i|0)|~r))+e[15]-30611744|0,r+=(n^((o=(o<<10|o>>>22)+n|0)|~i))+e[6]-1560198380|0,i+=(o^((r=(r<<15|r>>>17)+o|0)|~n))+e[13]+1309151649|0,n+=(r^((i=(i<<21|i>>>11)+r|0)|~o))+e[4]-145523070|0,o+=(i^((n=(n<<6|n>>>26)+i|0)|~r))+e[11]-1120210379|0,r+=(n^((o=(o<<10|o>>>22)+n|0)|~i))+e[2]+718787259|0,i=((i+=(o^((r=(r<<15|r>>>17)+o|0)|~n))+e[9]-343485551|0)<<21|i>>>11)+r|0,t[0]=n+t[0]|0,t[1]=i+t[1]|0,t[2]=r+t[2]|0,t[3]=o+t[3]|0}function i(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function o(t){var e,r,o,s,a,u,l=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=l;e+=64)n(c,i(t.substring(e-64,e)));for(t=t.substring(e-64),r=t.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(n(c,o),e=0;e<16;e+=1)o[e]=0;return s=(s=8*l).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,o[14]=a,o[15]=u,n(c,o),c}function s(t){var n,i="";for(n=0;n<4;n+=1)i+=e[t>>8*n+4&15]+e[t>>8*n&15];return i}function a(t){var e;for(e=0;e<t.length;e+=1)t[e]=s(t[e]);return t.join("")}function u(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function l(t){var e,n=[],i=t.length;for(e=0;e<i-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function c(){this.reset()}return a(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,i){var r,o,s,a,u=this.byteLength,l=e(n,u),c=u;return i!==t&&(c=e(i,u)),l>c?new ArrayBuffer(0):(r=c-l,o=new ArrayBuffer(r),s=new Uint8Array(o),a=new Uint8Array(this,l,r),s.set(a),o)}}(),c.prototype.append=function(t){return this.appendBinary(u(t)),this},c.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,r=this._buff.length;for(e=64;e<=r;e+=64)n(this._hash,i(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},c.prototype.end=function(t){var e,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r;e+=1)o[e>>2]|=i.charCodeAt(e)<<(e%4<<3);return this._finish(o,r),n=a(this._hash),t&&(n=l(n)),this.reset(),n},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},c.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(t,e){var i,r,o,s=e;if(t[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,t),s=0;s<16;s+=1)t[s]=0;i=(i=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(i[2],16),o=parseInt(i[1],16)||0,t[14]=r,t[15]=o,n(this._hash,t)},c.hash=function(t,e){return c.hashBinary(u(t),e)},c.hashBinary=function(t,e){var n=a(o(t));return e?l(n):n},c.ArrayBuffer=function(){this.reset()},c.ArrayBuffer.prototype.append=function(t){var e,i=function(t,e,n){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t)),i.set(new Uint8Array(e),t.byteLength),n?i:i.buffer}(this._buff.buffer,t,!0),o=i.length;for(this._length+=t.byteLength,e=64;e<=o;e+=64)n(this._hash,r(i.subarray(e-64,e)));return this._buff=e-64<o?new Uint8Array(i.buffer.slice(e-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(t){var e,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r;e+=1)o[e>>2]|=i[e]<<(e%4<<3);return this._finish(o,r),n=a(this._hash),t&&(n=l(n)),this.reset(),n},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var t=c.prototype.getState.call(this);return t.buff=function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}(t.buff),t},c.ArrayBuffer.prototype.setState=function(t){return t.buff=function(t,e){var n,i=t.length,r=new ArrayBuffer(i),o=new Uint8Array(r);for(n=0;n<i;n+=1)o[n]=t.charCodeAt(n);return e?o:r}(t.buff,!0),c.prototype.setState.call(this,t)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(t,e){var i=a(function(t){var e,i,o,s,a,u,l=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=l;e+=64)n(c,r(t.subarray(e-64,e)));for(t=e-64<l?t.subarray(e-64):new Uint8Array(0),i=t.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<i;e+=1)o[e>>2]|=t[e]<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(n(c,o),e=0;e<16;e+=1)o[e]=0;return s=(s=8*l).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,o[14]=a,o[15]=u,n(c,o),c}(new Uint8Array(t)));return e?l(i):i},c}()},function(t,e,n){"use strict";function i(t,e,n){var i=n[n.length-1];t===i.element&&(n.pop(),i=n[n.length-1]);var r=i.element,o=i.index;if(Array.isArray(r))r.push(t);else if(o===e.length-2){r[e.pop()]=t}else e.push(t)}e.stringify=function(t){var e=[];e.push({obj:t});for(var n,i,r,o,s,a,u,l,c,h,d="";n=e.pop();)if(i=n.obj,d+=n.prefix||"",r=n.val||"")d+=r;else if("object"!=typeof i)d+=void 0===i?null:JSON.stringify(i);else if(null===i)d+="null";else if(Array.isArray(i)){for(e.push({val:"]"}),o=i.length-1;o>=0;o--)s=0===o?"":",",e.push({obj:i[o],prefix:s});e.push({val:"["})}else{for(u in a=[],i)i.hasOwnProperty(u)&&a.push(u);for(e.push({val:"}"}),o=a.length-1;o>=0;o--)c=i[l=a[o]],h=o>0?",":"",h+=JSON.stringify(l)+":",e.push({obj:c,prefix:h});e.push({val:"{"})}return d},e.parse=function(t){for(var e,n,r,o,s,a,u,l,c,h=[],d=[],p=0;;)if("}"!==(e=t[p++])&&"]"!==e&&void 0!==e)switch(e){case" ":case"\t":case"\n":case":":case",":break;case"n":p+=3,i(null,h,d);break;case"t":p+=3,i(!0,h,d);break;case"f":p+=4,i(!1,h,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",p--;;){if(r=t[p++],!/[\d\.\-e\+]/.test(r)){p--;break}n+=r}i(parseFloat(n),h,d);break;case'"':for(o="",s=void 0,a=0;'"'!==(u=t[p++])||"\\"===s&&a%2==1;)o+=u,"\\"===(s=u)?a++:a=0;i(JSON.parse('"'+o+'"'),h,d);break;case"[":l={element:[],index:h.length},h.push(l.element),d.push(l);break;case"{":c={element:{},index:h.length},h.push(c.element),d.push(c);break;default:throw new Error("unexpectedly reached end of input: "+e)}else{if(1===h.length)return h.pop();i(h.pop(),h,d)}}},,,,function(t,e,n){"use strict";
/*!
 * Image Compressor v1.1.1
 * https://github.com/xkeshi/image-compressor
 *
 * Copyright (c) 2017-2018 Xkeshi
 * Released under the MIT license
 *
 * Date: 2018-02-28T02:34:44.169Z
 */var i=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t){!function(e){var n=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,i=e.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),r=i&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),o=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,s=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,a=(i||o)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(t){var e,n,a,u,l,c,h,d,p;if(!(e=t.match(s)))throw new Error("invalid data URI");for(n=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),a=!!e[4],u=t.slice(e[0].length),l=a?atob(u):decodeURIComponent(u),c=new ArrayBuffer(l.length),h=new Uint8Array(c),d=0;d<l.length;d+=1)h[d]=l.charCodeAt(d);return i?new Blob([r?h:c],{type:n}):((p=new o).append(c),p.getBlob(n))};e.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(t,e,i){var r=this;setTimeout(function(){i&&n.toDataURL&&a?t(a(r.toDataURL(e,i))):t(r.mozGetAsFile("blob",e))})}:n.toDataURL&&a&&(n.toBlob=function(t,e,n){var i=this;setTimeout(function(){t(a(i.toDataURL(e,n)))})})),t.exports?t.exports=a:e.dataURLtoBlob=a}(window)}),r=Object.prototype.toString,o={checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,quality:.8,mimeType:"auto",convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},s=/^image\/.+$/;function a(t){return s.test(t)}var u=String.fromCharCode;var l=window.btoa;function c(t){var e=new DataView(t),n=void 0,i=void 0,r=void 0,o=void 0;if(255===e.getUint8(0)&&216===e.getUint8(1))for(var s=e.byteLength,a=2;a<s;){if(255===e.getUint8(a)&&225===e.getUint8(a+1)){r=a;break}a+=1}if(r){var l=r+10;if("Exif"===function(t,e,n){var i="",r=void 0;for(n+=e,r=e;r<n;r+=1)i+=u(t.getUint8(r));return i}(e,r+4,4)){var c=e.getUint16(l);if(((i=18761===c)||19789===c)&&42===e.getUint16(l+2,i)){var h=e.getUint32(l+4,i);h>=8&&(o=l+h)}}}if(o){var d=e.getUint16(o,i),p=void 0,f=void 0;for(f=0;f<d;f+=1)if(p=o+12*f+2,274===e.getUint16(p,i)){p+=8,n=e.getUint16(p,i),e.setUint16(p,1,i);break}}return n}var h=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},f=window,m=f.ArrayBuffer,g=f.FileReader,v=window.URL||window.webkitURL,y=/\.\w+$/,_=function(){function t(e,n){h(this,t),this.result=null,e&&this.compress(e,n)}return d(t,[{key:"compress",value:function(t,e){var n=this,s=new Image;return e=p({},o,e),m||(e.checkOrientation=!1),new Promise(function(n,i){if(function(t){return t instanceof Blob||"[object Blob]"===r.call(t)}(t)){var o=t.type;if(a(o))if(v||g){if(v&&!e.checkOrientation)n(v.createObjectURL(t));else if(g){var s=new g,h=e.checkOrientation&&"image/jpeg"===o;s.onload=function(t){var e=t.target.result;n(h?p({url:function(t,e){var n=new Uint8Array(t),i=n.length,r="",o=void 0;for(o=0;o<i;o+=1)r+=u(n[o]);return"data:"+e+";base64,"+l(r)}(e,o)},function(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:i}}(c(e))):{url:e})},s.onabort=i,s.onerror=i,h?s.readAsArrayBuffer(t):s.readAsDataURL(t)}}else i(new Error("The current browser does not support image compression."));else i(new Error("The first argument must be an image File or Blob object."))}else i(new Error("The first argument must be a File or Blob object."))}).then(function(e){return new Promise(function(n,i){s.onload=function(){return n(p({},e,{naturalWidth:s.naturalWidth,naturalHeight:s.naturalHeight}))},s.onabort=i,s.onerror=i,s.alt=t.name,s.src=e.url})}).then(function(r){var o=r.naturalWidth,u=r.naturalHeight,l=r.rotate,c=void 0===l?0:l,h=r.scaleX,d=void 0===h?1:h,p=r.scaleY,f=void 0===p?1:p;return new Promise(function(r){var l=document.createElement("canvas"),h=l.getContext("2d"),p=o/u,m=Math.max(e.maxWidth,0)||1/0,g=Math.max(e.maxHeight,0)||1/0,v=Math.max(e.minWidth,0)||0,y=Math.max(e.minHeight,0)||0,_=o,b=u;if(m<1/0&&g<1/0?g*p>m?g=m/p:m=g*p:m<1/0?g=m/p:g<1/0&&(m=g*p),v>0&&y>0?y*p>v?y=v/p:v=y*p:v>0?y=v/p:y>0&&(v=y*p),e.width>0)b=(_=e.width)/p;else if(e.height>0){_=(b=e.height)*p}var w=-(_=Math.min(Math.max(_,v),m))/2,x=-(b=Math.min(Math.max(b,y),g))/2,$=_,k=b;if(Math.abs(c)%180==90){var E={width:b,height:_};_=E.width,b=E.height}l.width=_,l.height=b,a(e.mimeType)||(e.mimeType=t.type);var C="transparent";t.size>e.convertSize&&"image/png"===e.mimeType&&(C="#fff",e.mimeType="image/jpeg"),h.fillStyle=C,h.fillRect(0,0,_,b),h.save(),h.translate(_/2,b/2),h.rotate(c*Math.PI/180),h.scale(d,f),e.beforeDraw&&e.beforeDraw.call(n,h,l),h.drawImage(s,Math.floor(w),Math.floor(x),Math.floor($),Math.floor(k)),e.drew&&e.drew.call(n,h,l),h.restore();var T=function(t){r({naturalWidth:o,naturalHeight:u,result:t})};l.toBlob?l.toBlob(T,e.mimeType,e.quality):T(i(l.toDataURL(e.mimeType,e.quality)))})}).then(function(i){var r=i.naturalWidth,o=i.naturalHeight,u=i.result;if(v&&v.revokeObjectURL(s.src),u)if(u.size>t.size&&e.mimeType===t.type&&!(e.width>r||e.height>o||e.minWidth>r||e.minHeight>o))u=t;else{var l=new Date;u.lastModified=l.getTime(),u.lastModifiedDate=l,u.name=t.name,u.name&&u.type!==t.type&&(u.name=u.name.replace(y,function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=a(t)?t.substr(6):"";return"jpeg"===n&&(n="jpg"),n&&e&&(n="."+n),n}(u.type)))}else u=t;return n.result=u,e.success&&e.success.call(n,u),Promise.resolve(u)}).catch(function(t){if(!e.error)throw t;e.error.call(n,t)})}}]),t}();t.exports=_}]]);