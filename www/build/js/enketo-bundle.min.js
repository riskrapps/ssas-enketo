!function(){function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}return t}()({1:[function(t,e,n){!function(t){"use strict";function e(t,e){return e=e||Error,function(){var n,i,r=2,o=arguments,s=o[0],a="["+(t?t+":":"")+s+"] ",u=o[1];for(a+=u.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1),n=e+r;return n<o.length?yt(o[n]):t}),a+="\nhttp://errors.angularjs.org/1.5.8/"+(t?t+"/":"")+s,i=r,n="?";i<o.length;i++,n="&")a+=n+"p"+(i-r)+"="+encodeURIComponent(yt(o[i]));return new e(a)}}function n(t){if(null==t||C(t))return!1;if(Yi(t)||w(t)||Ri&&t instanceof Ri)return!0;var e="length"in Object(t)&&t.length;return x(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function i(t,e,r){var o,s;if(t)if($(t))for(o in t)"prototype"==o||"length"==o||"name"==o||t.hasOwnProperty&&!t.hasOwnProperty(o)||e.call(r,t[o],o,t);else if(Yi(t)||n(t)){var a="object"!=typeof t;for(o=0,s=t.length;o<s;o++)(a||o in t)&&e.call(r,t[o],o,t)}else if(t.forEach&&t.forEach!==i)t.forEach(e,r,t);else if(b(t))for(o in t)e.call(r,t[o],o,t);else if("function"==typeof t.hasOwnProperty)for(o in t)t.hasOwnProperty(o)&&e.call(r,t[o],o,t);else for(o in t)Ai.call(t,o)&&e.call(r,t[o],o,t);return t}function r(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function o(t){return function(e,n){t(n,e)}}function s(){return++Gi}function a(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function u(t,e,n){for(var i=t.$$hashKey,r=0,o=e.length;r<o;++r){var s=e[r];if(_(s)||$(s))for(var l=Object.keys(s),c=0,h=l.length;c<h;c++){var d=l[c],p=s[d];n&&_(p)?k(p)?t[d]=new Date(p.valueOf()):E(p)?t[d]=new RegExp(p):p.nodeName?t[d]=p.cloneNode(!0):O(p)?t[d]=p.clone():(_(t[d])||(t[d]=Yi(p)?[]:{}),u(t[d],[p],!0)):t[d]=p}}return a(t,i),t}function l(t){return u(t,Bi.call(arguments,1),!1)}function c(t){return u(t,Bi.call(arguments,1),!0)}function h(t){return parseInt(t,10)}function d(t,e){return l(Object.create(t),e)}function p(){}function f(t){return t}function m(t){return function(){return t}}function g(t){return $(t.toString)&&t.toString!==Vi}function v(t){return"undefined"==typeof t}function y(t){return"undefined"!=typeof t}function _(t){return null!==t&&"object"==typeof t}function b(t){return null!==t&&"object"==typeof t&&!Hi(t)}function w(t){return"string"==typeof t}function x(t){return"number"==typeof t}function k(t){return"[object Date]"===Vi.call(t)}function $(t){return"function"==typeof t}function E(t){return"[object RegExp]"===Vi.call(t)}function C(t){return t&&t.window===t}function T(t){return t&&t.$evalAsync&&t.$watch}function L(t){return"[object File]"===Vi.call(t)}function S(t){return"[object FormData]"===Vi.call(t)}function D(t){return"[object Blob]"===Vi.call(t)}function M(t){return"boolean"==typeof t}function A(t){return t&&$(t.then)}function N(t){return t&&x(t.length)&&Xi.test(Vi.call(t))}function P(t){return"[object ArrayBuffer]"===Vi.call(t)}function O(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function I(t){var e,n={},i=t.split(",");for(e=0;e<i.length;e++)n[i[e]]=!0;return n}function j(t){return Ni(t.nodeName||t[0]&&t[0].nodeName)}function R(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function q(t,e){function n(t,e){var n,i=e.$$hashKey;if(Yi(t))for(var o=0,s=t.length;o<s;o++)e.push(r(t[o]));else if(b(t))for(n in t)e[n]=r(t[n]);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(e[n]=r(t[n]));else for(n in t)Ai.call(t,n)&&(e[n]=r(t[n]));return a(e,i),e}function r(t){if(!_(t))return t;var e=s.indexOf(t);if(e!==-1)return u[e];if(C(t)||T(t))throw Wi("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var i=!1,r=o(t);return void 0===r&&(r=Yi(t)?[]:Object.create(Hi(t)),i=!0),s.push(t),u.push(r),i?n(t,r):r}function o(t){switch(Vi.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(r(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if($(t.cloneNode))return t.cloneNode(!0)}var s=[],u=[];if(e){if(N(e)||P(e))throw Wi("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw Wi("cpi","Can't copy! Source and destination are identical.");return Yi(e)?e.length=0:i(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),s.push(t),u.push(e),n(t,e)}return r(t)}function F(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var n,i,r,o=typeof t,s=typeof e;if(o==s&&"object"==o){if(!Yi(t)){if(k(t))return!!k(e)&&F(t.getTime(),e.getTime());if(E(t))return!!E(e)&&t.toString()==e.toString();if(T(t)||T(e)||C(t)||C(e)||Yi(e)||k(e)||E(e))return!1;r=ft();for(i in t)if("$"!==i.charAt(0)&&!$(t[i])){if(!F(t[i],e[i]))return!1;r[i]=!0}for(i in e)if(!(i in r)&&"$"!==i.charAt(0)&&y(e[i])&&!$(e[i]))return!1;return!0}if(!Yi(e))return!1;if((n=t.length)==e.length){for(i=0;i<n;i++)if(!F(t[i],e[i]))return!1;return!0}}return!1}function B(t,e,n){return t.concat(Bi.call(e,n))}function U(t,e){return Bi.call(t,e||0)}function z(t,e){var n=arguments.length>2?U(arguments,2):[];return!$(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,B(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function V(e,n){var i=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=void 0:C(n)?i="$WINDOW":n&&t.document===n?i="$DOCUMENT":T(n)&&(i="$SCOPE"),i}function H(t,e){if(!v(t))return x(e)||(e=e?2:null),JSON.stringify(t,V,e)}function W(t){return w(t)?JSON.parse(t):t}function Z(t,e){t=t.replace(er,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function G(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Y(t,e,n){n=n?-1:1;var i=t.getTimezoneOffset(),r=Z(e,i);return G(t,n*(r-i))}function X(t){t=Ri(t).clone();try{t.empty()}catch(e){}var n=Ri("<div>").append(t).html();try{return t[0].nodeType===ar?Ni(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+Ni(e)})}catch(e){return Ni(n)}}function K(t){try{return decodeURIComponent(t)}catch(e){}}function J(t){var e={};return i((t||"").split("&"),function(t){var n,i,r;t&&(i=t=t.replace(/\+/g,"%20"),n=t.indexOf("="),n!==-1&&(i=t.substring(0,n),r=t.substring(n+1)),i=K(i),y(i)&&(r=!y(r)||K(r),Ai.call(e,i)?Yi(e[i])?e[i].push(r):e[i]=[e[i],r]:e[i]=r))}),e}function Q(t){var e=[];return i(t,function(t,n){Yi(t)?i(t,function(t){e.push(et(n,!0)+(t===!0?"":"="+et(t,!0)))}):e.push(et(n,!0)+(t===!0?"":"="+et(t,!0)))}),e.length?e.join("&"):""}function tt(t){return et(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function et(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function nt(t,e){var n,i,r=nr.length;for(i=0;i<r;++i)if(n=nr[i]+e,w(n=t.getAttribute(n)))return n;return null}function it(t,e){var n,r,o={};i(nr,function(e){var i=e+"app";!n&&t.hasAttribute&&t.hasAttribute(i)&&(n=t,r=t.getAttribute(i))}),i(nr,function(e){var i,o=e+"app";!n&&(i=t.querySelector("["+o.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(o))}),n&&(o.strictDi=null!==nt(n,"strict-di"),e(n,r?[r]:[],o))}function rt(e,n,r){_(r)||(r={});var o={strictDi:!1};r=l(o,r);var s=function(){if(e=Ri(e),e.injector()){var i=e[0]===t.document?"document":X(e);throw Wi("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=ie(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),o},a=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return t&&a.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(a,"")),t&&!u.test(t.name)?s():(t.name=t.name.replace(u,""),Zi.resumeBootstrap=function(t){return i(t,function(t){n.push(t)}),s()},void($(Zi.resumeDeferredBootstrap)&&Zi.resumeDeferredBootstrap()))}function ot(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function st(t){var e=Zi.element(t).injector();if(!e)throw Wi("test","no injector found for element argument to getTestability");return e.get("$$testability")}function at(t,e){return e=e||"_",t.replace(ir,function(t,n){return(n?e:"")+t.toLowerCase()})}function ut(){var e;if(!rr){var n=tr();qi=v(n)?t.jQuery:n?t[n]:void 0,qi&&qi.fn.on?(Ri=qi,l(qi.fn,{scope:Cr.scope,isolateScope:Cr.isolateScope,controller:Cr.controller,injector:Cr.injector,inheritedData:Cr.inheritedData}),e=qi.cleanData,qi.cleanData=function(t){for(var n,i,r=0;null!=(i=t[r]);r++)n=qi._data(i,"events"),n&&n.$destroy&&qi(i).triggerHandler("$destroy");e(t)}):Ri=St,Zi.element=Ri,rr=!0}}function lt(t,e,n){if(!t)throw Wi("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function ct(t,e,n){return n&&Yi(t)&&(t=t[t.length-1]),lt($(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function ht(t,e){if("hasOwnProperty"===t)throw Wi("badname","hasOwnProperty is not a valid {0} name",e)}function dt(t,e,n){if(!e)return t;for(var i,r=e.split("."),o=t,s=r.length,a=0;a<s;a++)i=r[a],t&&(t=(o=t)[i]);return!n&&$(t)?z(o,t):t}function pt(t){for(var e,n=t[0],i=t[t.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(e||t[r]!==n)&&(e||(e=Ri(Bi.call(t,0,r))),e.push(n));return e||t}function ft(){return Object.create(null)}function mt(t){function n(t,e,n){return t[e]||(t[e]=n())}var i=e("$injector"),r=e("ng"),o=n(t,"angular",Object);return o.$$minErr=o.$$minErr||e,n(o,"module",function(){var t={};return function(e,o,s){var a=function(t,e){if("hasOwnProperty"===t)throw r("badname","hasOwnProperty is not a valid {0} name",e)};return a(e,"module"),o&&t.hasOwnProperty(e)&&(t[e]=null),n(t,e,function(){function t(t,e,n,i){return i||(i=r),function(){return i[n||"push"]([t,e,arguments]),c}}function n(t,n){return function(i,o){return o&&$(o)&&(o.$$moduleName=e),r.push([t,n,arguments]),c}}if(!o)throw i("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",e);var r=[],a=[],u=[],l=t("$injector","invoke","push",a),c={_invokeQueue:r,_configBlocks:a,_runBlocks:u,requires:o,name:e,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:n("$provide","decorator"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),component:n("$compileProvider","component"),config:l,run:function(t){return u.push(t),this}};return s&&l(s),c})}})}function gt(t,e){if(Yi(t)){e=e||[];for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}else if(_(t)){e=e||{};for(var r in t)"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r])}return e||t}function vt(t){var e=[];return JSON.stringify(t,function(t,n){if(n=V(t,n),_(n)){if(e.indexOf(n)>=0)return"...";e.push(n)}return n})}function yt(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):v(t)?"undefined":"string"!=typeof t?vt(t):t}function _t(n){l(n,{bootstrap:rt,copy:q,extend:l,merge:c,equals:F,element:Ri,forEach:i,injector:ie,noop:p,bind:z,toJson:H,fromJson:W,identity:f,isUndefined:v,isDefined:y,isString:w,isFunction:$,isObject:_,isNumber:x,isElement:O,isArray:Yi,version:hr,isDate:k,lowercase:Ni,uppercase:Pi,callbacks:{$$counter:0},getTestability:st,$$minErr:e,$$csp:Qi,reloadWithDebugInfo:ot}),(Fi=mt(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:En}),t.provider("$compile",fe).directive({a:Oo,input:ts,textarea:ts,form:Fo,script:Ys,select:Js,style:ta,option:Qs,ngBind:is,ngBindHtml:os,ngBindTemplate:rs,ngClass:as,ngClassEven:ls,ngClassOdd:us,ngCloak:cs,ngController:hs,ngForm:Bo,ngHide:Us,ngIf:fs,ngInclude:ms,ngInit:vs,ngNonBindable:Ns,ngPluralize:js,ngRepeat:Rs,ngShow:Bs,ngStyle:zs,ngSwitch:Vs,ngSwitchWhen:Hs,ngSwitchDefault:Ws,ngOptions:Is,ngTransclude:Gs,ngModel:Ds,ngList:ys,ngChange:ss,pattern:na,ngPattern:na,required:ea,ngRequired:ea,minlength:ra,ngMinlength:ra,maxlength:ia,ngMaxlength:ia,ngValue:ns,ngModelOptions:As}).directive({ngInclude:gs}).directive(Io).directive(ds),t.provider({$anchorScroll:re,$animate:Ur,$animateCss:Hr,$$animateJs:Fr,$$animateQueue:Br,$$AnimateRunner:Vr,$$animateAsyncRun:zr,$browser:ce,$cacheFactory:he,$controller:be,$document:we,$exceptionHandler:xe,$filter:qn,$$forceReflow:Kr,$interpolate:Ie,$interval:je,$http:Ae,$httpParamSerializer:$e,$httpParamSerializerJQLike:Ee,$httpBackend:Pe,$xhrFactory:Ne,$jsonpCallbacks:so,$location:Je,$log:Qe,$parse:_n,$rootScope:$n,$q:bn,$$q:wn,$sce:Sn,$sceDelegate:Ln,$sniffer:Dn,$templateCache:de,$templateRequest:Mn,$$testability:An,$timeout:Nn,$window:In,$$rAF:kn,$$jqLite:Xt,$$HashMap:Dr,$$cookieReader:Rn})}])}function bt(){return++pr}function wt(t){return t.replace(gr,function(t,e,n,i){return i?n.toUpperCase():n}).replace(vr,"Moz$1")}function xt(t){return!wr.test(t)}function kt(t){var e=t.nodeType;return e===or||!e||e===lr}function $t(t){for(var e in dr[t.ng339])return!0;return!1}function Et(t){for(var e=0,n=t.length;e<n;e++)Nt(t[e])}function Ct(t,e){var n,r,o,s,a=e.createDocumentFragment(),u=[];if(xt(t))u.push(e.createTextNode(t));else{for(n=a.appendChild(e.createElement("div")),r=(xr.exec(t)||["",""])[1].toLowerCase(),o=$r[r]||$r._default,n.innerHTML=o[1]+t.replace(kr,"<$1></$2>")+o[2],s=o[0];s--;)n=n.lastChild;u=B(u,n.childNodes),n=a.firstChild,n.textContent=""}return a.textContent="",a.innerHTML="",i(u,function(t){a.appendChild(t)}),a}function Tt(e,n){n=n||t.document;var i;return(i=br.exec(e))?[n.createElement(i[1])]:(i=Ct(e,n))?i.childNodes:[]}function Lt(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}function St(t){if(t instanceof St)return t;var e;if(w(t)&&(t=Ki(t),e=!0),!(this instanceof St)){if(e&&"<"!=t.charAt(0))throw _r("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new St(t)}e?qt(this,Tt(t)):qt(this,t)}function Dt(t){return t.cloneNode(!0)}function Mt(t,e){if(e||Nt(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),i=0,r=n.length;i<r;i++)Nt(n[i])}function At(t,e,n,r){if(y(r))throw _r("offargs","jqLite#off() does not support the `selector` argument");var o=Pt(t),s=o&&o.events,a=o&&o.handle;if(a)if(e){var u=function(e){var i=s[e];y(n)&&R(i||[],n),y(n)&&i&&i.length>0||(mr(t,e,a),delete s[e])};i(e.split(" "),function(t){u(t),yr[t]&&u(yr[t])})}else for(e in s)"$destroy"!==e&&mr(t,e,a),delete s[e]}function Nt(t,e){var n=t.ng339,i=n&&dr[n];if(i){if(e)return void delete i.data[e];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),At(t)),delete dr[n],t.ng339=void 0}}function Pt(t,e){var n=t.ng339,i=n&&dr[n];return e&&!i&&(t.ng339=n=bt(),i=dr[n]={events:{},data:{},handle:void 0}),i}function Ot(t,e,n){if(kt(t)){var i=y(n),r=!i&&e&&!_(e),o=!e,s=Pt(t,!r),a=s&&s.data;if(i)a[e]=n;else{if(o)return a;if(r)return a&&a[e];l(a,e)}}}function It(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function jt(t,e){e&&t.setAttribute&&i(e.split(" "),function(e){t.setAttribute("class",Ki((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Ki(e)+" "," ")))})}function Rt(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");i(e.split(" "),function(t){t=Ki(t),n.indexOf(" "+t+" ")===-1&&(n+=t+" ")}),t.setAttribute("class",Ki(n))}}function qt(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;i<n;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function Ft(t,e){return Bt(t,"$"+(e||"ngController")+"Controller")}function Bt(t,e,n){t.nodeType==lr&&(t=t.documentElement);for(var i=Yi(e)?e:[e];t;){for(var r=0,o=i.length;r<o;r++)if(y(n=Ri.data(t,i[r])))return n;t=t.parentNode||t.nodeType===cr&&t.host}}function Ut(t){for(Mt(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function zt(t,e){e||Mt(t);var n=t.parentNode;n&&n.removeChild(t)}function Vt(e,n){n=n||t,"complete"===n.document.readyState?n.setTimeout(e):Ri(n).on("load",e)}function Ht(t,e){var n=Tr[e.toLowerCase()];return n&&Lr[j(t)]&&n}function Wt(t){return Sr[t]}function Zt(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type],o=r?r.length:0;if(o){if(v(n.immediatePropagationStopped)){var s=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),s&&s.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0};var a=r.specialHandlerWrapper||Gt;o>1&&(r=gt(r));for(var u=0;u<o;u++)n.isImmediatePropagationStopped()||a(t,n,r[u])}};return n.elem=t,n}function Gt(t,e,n){n.call(t,e)}function Yt(t,e,n){var i=e.relatedTarget;i&&(i===t||Er.call(t,i))||n.call(t,e)}function Xt(){this.$get=function(){return l(St,{hasClass:function(t,e){return t.attr&&(t=t[0]),It(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Rt(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),jt(t,e)}})}}function Kt(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return n="function"==i||"object"==i&&null!==t?t.$$hashKey=i+":"+(e||s)():i+":"+t}function Jt(t,e){if(e){var n=0;this.nextUid=function(){return++n}}i(t,this.put,this)}function Qt(t){return Function.prototype.toString.call(t)+" "}function te(t){var e=Qt(t).replace(Or,""),n=e.match(Mr)||e.match(Ar);return n}function ee(t){var e=te(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function ne(t,e,n){var r,o,s;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw w(n)&&n||(n=t.name||ee(t)),Ir("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);o=te(t),i(o[1].split(Nr),function(t){t.replace(Pr,function(t,e,n){r.push(n)})})}t.$inject=r}}else Yi(t)?(s=t.length-1,ct(t[s],"fn"),r=t.slice(0,s)):ct(t,"fn",!0);return r}function ie(t,e){function n(t){return function(e,n){return _(e)?void i(e,o(t)):t(e,n)}}function r(t,e){if(ht(t,"service"),($(e)||Yi(e))&&(e=k.instantiate(e)),!e.$get)throw Ir("pget","Provider '{0}' must define $get factory method.",t);return x[t+g]=e}function s(t,e){return function(){var n=T.invoke(e,this);if(v(n))throw Ir("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function a(t,e,n){return r(t,{$get:n!==!1?s(t,e):e})}function u(t,e){return a(t,["$injector",function(t){return t.instantiate(e)}])}function l(t,e){return a(t,m(e),!1)}function c(t,e){ht(t,"constant"),x[t]=e,E[t]=e}function h(t,e){var n=k.get(t+g),i=n.$get;n.$get=function(){var t=T.invoke(i,n);return T.invoke(e,null,{$delegate:t})}}function d(t){lt(v(t)||Yi(t),"modulesToLoad","not an array");var e,n=[];return i(t,function(t){function i(t){var e,n;for(e=0,n=t.length;e<n;e++){var i=t[e],r=k.get(i[0]);r[i[1]].apply(r,i[2])}}if(!b.get(t)){b.put(t,!0);try{w(t)?(e=Fi(t),n=n.concat(d(e.requires)).concat(e._runBlocks),i(e._invokeQueue),i(e._configBlocks)):$(t)?n.push(k.invoke(t)):Yi(t)?n.push(k.invoke(t)):ct(t,"module")}catch(r){throw Yi(t)&&(t=t[t.length-1]),r.message&&r.stack&&r.stack.indexOf(r.message)==-1&&(r=r.message+"\n"+r.stack),Ir("modulerr","Failed to instantiate module {0} due to:\n{1}",t,r.stack||r.message||r)}}}),n}function p(t,n){function i(e,i){if(t.hasOwnProperty(e)){if(t[e]===f)throw Ir("cdep","Circular dependency found: {0}",e+" <- "+y.join(" <- "));return t[e]}try{return y.unshift(e),t[e]=f,t[e]=n(e,i)}catch(r){throw t[e]===f&&delete t[e],r}finally{y.shift()}}function r(t,n,r){for(var o=[],s=ie.$$annotate(t,e,r),a=0,u=s.length;a<u;a++){var l=s[a];if("string"!=typeof l)throw Ir("itkn","Incorrect injection token! Expected service name as string, got {0}",l);o.push(n&&n.hasOwnProperty(l)?n[l]:i(l,r))}return o}function o(t){return!(ji<=11)&&("function"==typeof t&&/^(?:class\b|constructor\()/.test(Qt(t)))}function s(t,e,n,i){"string"==typeof n&&(i=n,n=null);var s=r(t,n,i);return Yi(t)&&(t=t[t.length-1]),o(t)?(s.unshift(null),new(Function.prototype.bind.apply(t,s))):t.apply(e,s)}function a(t,e,n){var i=Yi(t)?t[t.length-1]:t,o=r(t,e,n);return o.unshift(null),new(Function.prototype.bind.apply(i,o))}return{invoke:s,instantiate:a,get:i,annotate:ie.$$annotate,has:function(e){return x.hasOwnProperty(e+g)||t.hasOwnProperty(e)}}}e=e===!0;var f={},g="Provider",y=[],b=new Jt([],(!0)),x={$provide:{provider:n(r),factory:n(a),service:n(u),value:n(l),constant:n(c),decorator:h}},k=x.$injector=p(x,function(t,e){throw Zi.isString(e)&&y.push(e),Ir("unpr","Unknown provider: {0}",y.join(" <- "))}),E={},C=p(E,function(t,e){var n=k.get(t+g,e);return T.invoke(n.$get,n,void 0,t)}),T=C;x["$injector"+g]={$get:m(C)};var L=d(t);return T=C.get("$injector"),T.strictDi=e,i(L,function(t){t&&T.invoke(t)}),T}function re(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,i){function r(t){var e=null;return Array.prototype.some.call(t,function(t){if("a"===j(t))return e=t,!0}),e}function o(){var t=a.yOffset;if($(t))t=t();else if(O(t)){var n=t[0],i=e.getComputedStyle(n);t="fixed"!==i.position?0:n.getBoundingClientRect().bottom}else x(t)||(t=0);return t}function s(t){if(t){t.scrollIntoView();var n=o();if(n){var i=t.getBoundingClientRect().top;e.scrollBy(0,i-n)}}else e.scrollTo(0,0)}function a(t){t=w(t)?t:n.hash();var e;t?(e=u.getElementById(t))?s(e):(e=r(u.getElementsByName(t)))?s(e):"top"===t&&s(null):s(null)}var u=e.document;return t&&i.$watch(function(){return n.hash()},function(t,e){t===e&&""===t||Vt(function(){i.$evalAsync(a)})}),a}]}function oe(t,e){return t||e?t?e?(Yi(t)&&(t=t.join(" ")),Yi(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function se(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Rr)return n}}function ae(t){w(t)&&(t=t.split(" "));var e=ft();return i(t,function(t){t.length&&(e[t]=!0)}),e}function ue(t){return _(t)?t:{}}function le(t,e,n,r){function o(t){try{t.apply(null,U(arguments,1))}finally{if(y--,0===y)for(;_.length;)try{_.pop()()}catch(e){n.error(e)}}}function s(t){var e=t.indexOf("#");return e===-1?"":t.substr(e)}function a(){$=null,u(),l()}function u(){b=E(),b=v(b)?null:b,F(b,L)&&(b=L),L=b}function l(){x===c.url()&&w===b||(x=c.url(),w=b,i(C,function(t){t(c.url(),b)}))}var c=this,h=t.location,d=t.history,f=t.setTimeout,m=t.clearTimeout,g={};c.isMock=!1;var y=0,_=[];c.$$completeOutstandingRequest=o,c.$$incOutstandingRequestCount=function(){y++},c.notifyWhenNoOutstandingRequests=function(t){0===y?t():_.push(t)};var b,w,x=h.href,k=e.find("base"),$=null,E=r.history?function(){try{return d.state}catch(t){}}:p;u(),w=b,c.url=function(e,n,i){if(v(i)&&(i=null),h!==t.location&&(h=t.location),d!==t.history&&(d=t.history),e){var o=w===i;if(x===e&&(!r.history||o))return c;var a=x&&ze(x)===ze(e);return x=e,w=i,!r.history||a&&o?(a||($=e),n?h.replace(e):a?h.hash=s(e):h.href=e,h.href!==e&&($=e)):(d[n?"replaceState":"pushState"](i,"",e),u(),w=b),$&&($=e),c}return $||h.href.replace(/%27/g,"'")},c.state=function(){return b};var C=[],T=!1,L=null;c.onUrlChange=function(e){return T||(r.history&&Ri(t).on("popstate",a),Ri(t).on("hashchange",a),T=!0),C.push(e),e},c.$$applicationDestroyed=function(){Ri(t).off("hashchange popstate",a)},c.$$checkUrlChange=l,c.baseHref=function(){var t=k.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""},c.defer=function(t,e){var n;return y++,n=f(function(){delete g[n],o(t)},e||0),g[n]=!0,n},c.defer.cancel=function(t){return!!g[t]&&(delete g[t],m(t),o(p),!0)}}function ce(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new le(t,i,e,n)}]}function he(){this.$get=function(){function t(t,i){function r(t){t!=d&&(p?p==t&&(p=t.n):p=t,o(t.n,t.p),o(t,d),d=t,d.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in n)throw e("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var s=0,a=l({},i,{id:t}),u=ft(),c=i&&i.capacity||Number.MAX_VALUE,h=ft(),d=null,p=null;return n[t]={put:function(t,e){if(!v(e)){if(c<Number.MAX_VALUE){var n=h[t]||(h[t]={key:t});r(n)}return t in u||s++,u[t]=e,s>c&&this.remove(p.key),e}},get:function(t){if(c<Number.MAX_VALUE){var e=h[t];if(!e)return;r(e)}return u[t]},remove:function(t){if(c<Number.MAX_VALUE){var e=h[t];if(!e)return;e==d&&(d=e.p),e==p&&(p=e.n),o(e.n,e.p),delete h[t]}t in u&&(delete u[t],s--)},removeAll:function(){u=ft(),s=0,h=ft(),d=p=null},destroy:function(){u=null,a=null,h=null,delete n[t]},info:function(){return l({},a,{size:s})}}}var n={};return t.info=function(){var t={};return i(n,function(e,n){t[n]=e.info()}),t},t.get=function(t){return n[t]},t}}function de(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function pe(){}function fe(e,n){function r(t,e,n){var r=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,o=ft();return i(t,function(t,i){if(t in C)return void(o[i]=C[t]);var s=t.match(r);if(!s)throw Wr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,i,t,n?"controller bindings definition":"isolate scope definition");o[i]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||i},s[4]&&(C[t]=o[i])}),o}function s(t,e){var n={isolateScope:null,bindToController:null};if(_(t.scope)&&(t.bindToController===!0?(n.bindToController=r(t.scope,e,!0),n.isolateScope={}):n.isolateScope=r(t.scope,e,!1)),_(t.bindToController)&&(n.bindToController=r(t.bindToController,e,!0)),_(n.bindToController)){var i=t.controller,o=t.controllerAs;if(!i)throw Wr("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);if(!_e(i,o))throw Wr("noident","Cannot bind to controller without identifier for directive '{0}'.",e)}return n}function a(t){var e=t.charAt(0);if(!e||e!==Ni(e))throw Wr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw Wr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}function u(t){var e=t.require||t.controller&&t.name;return!Yi(e)&&_(e)&&i(e,function(t,n){var i=t.match(k),r=t.substring(i[0].length);r||(e[n]=i[0]+n)}),e}var c={},h="Directive",g=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,b=/(([\w\-]+)(?:\:([^;]+))?;?)/,x=I("ngSrc,ngSrcset,src,srcset"),k=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,E=/^(on[a-z]+|formaction)$/,C=ft();this.directive=function D(t,n){return ht(t,"directive"),w(t)?(a(t),lt(n,"directiveFactory"),c.hasOwnProperty(t)||(c[t]=[],e.factory(t+h,["$injector","$exceptionHandler",function(e,n){var r=[];return i(c[t],function(i,o){try{var s=e.invoke(i);$(s)?s={compile:m(s)}:!s.compile&&s.link&&(s.compile=m(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||t,s.require=u(s),s.restrict=s.restrict||"EA",s.$$moduleName=i.$$moduleName,r.push(s)}catch(a){n(a)}}),r}])),c[t].push(n)):i(t,o(D)),this},this.component=function(t,e){function n(t){function n(e){return $(e)||Yi(e)?function(n,i){return t.invoke(e,this,{$element:n,$attrs:i})}:e}var o=e.template||e.templateUrl?e.template:"",s={controller:r,controllerAs:_e(e.controller)||e.controllerAs||"$ctrl",template:n(o),templateUrl:n(e.templateUrl),transclude:e.transclude,scope:{},bindToController:e.bindings||{},restrict:"E",require:e.require};return i(e,function(t,e){"$"===e.charAt(0)&&(s[e]=t)}),s}var r=e.controller||function(){};return i(e,function(t,e){"$"===e.charAt(0)&&(n[e]=t,$(r)&&(r[e]=t))}),n.$inject=["$injector"],this.directive(t,n)},this.aHrefSanitizationWhitelist=function(t){return y(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return y(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var L=!0;this.debugInfoEnabled=function(t){return y(t)?(L=t,this):L};var S=10;this.onChangesTtl=function(t){return arguments.length?(S=t,this):S},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,r,o,a,u,m,C,D,A){function N(){try{if(!--kt)throw _t=void 0,Wr("infchng","{0} $onChanges() iterations reached. Aborting!\n",S);m.$apply(function(){for(var t=[],e=0,n=_t.length;e<n;++e)try{_t[e]()}catch(i){t.push(i)}if(_t=void 0,t.length)throw t})}finally{kt++}}function P(t,e){if(e){var n,i,r,o=Object.keys(e);for(n=0,i=o.length;n<i;n++)r=o[n],this[r]=e[r]}else this.$attr={};this.$$element=t}function O(t,e,n){wt.innerHTML="<span "+e+">";var i=wt.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,t.attributes.setNamedItem(r)}function I(t,e){try{t.addClass(e)}catch(n){}}function q(e,n,i,r,o){e instanceof Ri||(e=Ri(e));for(var s=/\S+/,a=0,u=e.length;a<u;a++){var l=e[a];l.nodeType===ar&&l.nodeValue.match(s)&&Lt(l,e[a]=t.document.createElement("span"))}var c=V(e,n,e,i,r,o);q.$$addScopeClass(e);var h=null;return function(t,n,i){lt(t,"scope"),o&&o.needsNewScope&&(t=t.$parent.$new()),i=i||{};var r=i.parentBoundTranscludeFn,s=i.transcludeControllers,a=i.futureParentElement;r&&r.$$boundTransclude&&(r=r.$$boundTransclude),h||(h=B(a));var u;if(u="html"!==h?Ri(ht(h,Ri("<div>").append(e).html())):n?Cr.clone.call(e):e,s)for(var l in s)u.data("$"+l+"Controller",s[l].instance);return q.$$addScopeInfo(u,t),n&&n(u,t),c&&c(t,u,u,r),u}}function B(t){var e=t&&t[0];return e&&"foreignobject"!==j(e)&&Vi.call(e).match(/SVG/)?"svg":"html"}function V(t,e,n,i,r,o){function s(t,n,i,r){var o,s,a,u,l,c,h,d,m;if(p){var g=n.length;for(m=new Array(g),l=0;l<f.length;l+=3)h=f[l],m[h]=n[h]}else m=n;for(l=0,c=f.length;l<c;)a=m[f[l++]],o=f[l++],s=f[l++],o?(o.scope?(u=t.$new(),q.$$addScopeInfo(Ri(a),u)):u=t,d=o.transcludeOnThisElement?H(t,o.transclude,r):!o.templateOnThisElement&&r?r:!r&&e?H(t,e):null,o(s,u,a,i,d)):s&&s(t,a.childNodes,void 0,r)}for(var a,u,l,c,h,d,p,f=[],m=0;m<t.length;m++)a=new P,u=W(t[m],[],a,0===m?i:void 0,r),l=u.length?J(u,t[m],a,e,n,null,[],[],o):null,l&&l.scope&&q.$$addScopeClass(a.$$element),h=l&&l.terminal||!(c=t[m].childNodes)||!c.length?null:V(c,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:e),(l||h)&&(f.push(m,l,h),d=!0,p=p||l),o=null;return d?s:null}function H(t,e,n){function i(i,r,o,s,a){return i||(i=t.$new(!1,a),i.$$transcluded=!0),e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:s})}var r=i.$$slots=ft();for(var o in e.$$slots)e.$$slots[o]?r[o]=H(t,e.$$slots[o],n):r[o]=null;return i}function W(t,e,n,i,r){var o,s,a=t.nodeType,u=n.$attr;switch(a){case or:nt(e,ge(j(t)),"E",i,r);for(var l,c,h,d,p,f,m=t.attributes,g=0,v=m&&m.length;g<v;g++){var y=!1,x=!1;l=m[g],c=l.name,p=Ki(l.value),d=ge(c),(f=Tt.test(d))&&(c=c.replace(Gr,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var k=d.match(St);k&&it(k[1])&&(y=c,x=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),h=ge(c.toLowerCase()),u[h]=c,!f&&n.hasOwnProperty(h)||(n[h]=p,Ht(t,h)&&(n[h]=!0)),pt(t,e,p,h,f),
nt(e,h,"A",i,r,y,x)}if(s=t.className,_(s)&&(s=s.animVal),w(s)&&""!==s)for(;o=b.exec(s);)h=ge(o[2]),nt(e,h,"C",i,r)&&(n[h]=Ki(o[3])),s=s.substr(o.index+o[0].length);break;case ar:if(11===ji)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===ar;)t.nodeValue=t.nodeValue+t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);ct(e,t.nodeValue);break;case ur:Z(t,e,n,i,r)}return e.sort(st),e}function Z(t,e,n,i,r){try{var o=g.exec(t.nodeValue);if(o){var s=ge(o[1]);nt(e,s,"M",i,r)&&(n[s]=Ki(o[2]))}}catch(a){}}function G(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t)throw Wr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType==or&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),i.push(t),t=t.nextSibling}while(r>0)}else i.push(t);return Ri(i)}function Y(t,e,n){return function(i,r,o,s,a){return r=G(r[0],e,n),t(i,r,o,s,a)}}function K(t,e,n,i,r,o){var s;return t?q(e,n,i,r,o):function(){return s||(s=q(e,n,i,r,o),e=n=o=null),s.apply(this,arguments)}}function J(t,e,n,o,s,a,u,c,h){function d(t,e,n,i){t&&(n&&(t=Y(t,n,i)),t.require=f.require,t.directiveName=m,(E===f||f.$$isolateScope)&&(t=gt(t,{isolateScope:!0})),u.push(t)),e&&(n&&(e=Y(e,n,i)),e.require=f.require,e.directiveName=m,(E===f||f.$$isolateScope)&&(e=gt(e,{isolateScope:!0})),c.push(e))}function p(t,o,s,a,h){function d(t,e,n,i){var r;if(T(t)||(i=n,n=e,e=t,t=void 0),M&&(r=b),n||(n=M?L.parent():L),!i)return h(t,e,r,n,R);var o=h.$$slots[i];if(o)return o(t,e,r,n,R);if(v(o))throw Wr("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,X(L))}var p,f,m,g,y,b,w,L,S,D;e===s?(S=n,L=n.$$element):(L=Ri(s),S=new P(L,n)),y=o,E?g=o.$new(!0):x&&(y=o.$parent),h&&(w=d,w.$$boundTransclude=h,w.isSlotFilled=function(t){return!!h.$$slots[t]}),k&&(b=tt(L,S,w,k,g,o,E)),E&&(q.$$addScopeInfo(L,g,!0,!(C&&(C===E||C===E.$$originalDirective))),q.$$addScopeClass(L,!0),g.$$isolateBindings=E.$$isolateBindings,D=yt(o,S,g,g.$$isolateBindings,E),D.removeWatches&&g.$on("$destroy",D.removeWatches));for(var A in b){var N=k[A],O=b[A],I=N.$$bindings.bindToController;O.identifier&&I?O.bindingInfo=yt(y,S,O.instance,I,N):O.bindingInfo={};var j=O();j!==O.instance&&(O.instance=j,L.data("$"+N.name+"Controller",j),O.bindingInfo.removeWatches&&O.bindingInfo.removeWatches(),O.bindingInfo=yt(y,S,O.instance,I,N))}for(i(k,function(t,e){var n=t.require;t.bindToController&&!Yi(n)&&_(n)&&l(b[e].instance,Q(e,n,L,b))}),i(b,function(t){var e=t.instance;if($(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(n){r(n)}if($(e.$onInit))try{e.$onInit()}catch(n){r(n)}$(e.$doCheck)&&(y.$watch(function(){e.$doCheck()}),e.$doCheck()),$(e.$onDestroy)&&y.$on("$destroy",function(){e.$onDestroy()})}),p=0,f=u.length;p<f;p++)m=u[p],vt(m,m.isolateScope?g:o,L,S,m.require&&Q(m.directiveName,m.require,L,b),w);var R=o;for(E&&(E.template||null===E.templateUrl)&&(R=g),t&&t(R,s.childNodes,void 0,h),p=c.length-1;p>=0;p--)m=c[p],vt(m,m.isolateScope?g:o,L,S,m.require&&Q(m.directiveName,m.require,L,b),w);i(b,function(t){var e=t.instance;$(e.$postLink)&&e.$postLink()})}h=h||{};for(var f,m,g,y,b,w=-Number.MAX_VALUE,x=h.newScopeDirective,k=h.controllerDirectives,E=h.newIsolateScopeDirective,C=h.templateDirective,L=h.nonTlbTranscludeDirective,S=!1,D=!1,M=h.hasElementTranscludeDirective,A=n.$$element=Ri(e),N=a,O=o,I=!1,R=!1,F=0,B=t.length;F<B;F++){f=t[F];var V=f.$$start,H=f.$$end;if(V&&(A=G(e,V,H)),g=void 0,w>f.priority)break;if((b=f.scope)&&(f.templateUrl||(_(b)?(ut("new/isolated scope",E||x,f,A),E=f):ut("new/isolated scope",E,f,A)),x=x||f),m=f.name,!I&&(f.replace&&(f.templateUrl||f.template)||f.transclude&&!f.$$tlb)){for(var Z,J=F+1;Z=t[J++];)if(Z.transclude&&!Z.$$tlb||Z.replace&&(Z.templateUrl||Z.template)){R=!0;break}I=!0}if(!f.templateUrl&&f.controller&&(b=f.controller,k=k||ft(),ut("'"+m+"' controller",k[m],f,A),k[m]=f),b=f.transclude)if(S=!0,f.$$tlb||(ut("transclusion",L,f,A),L=f),"element"==b)M=!0,w=f.priority,g=A,A=n.$$element=Ri(q.$$createComment(m,n[m])),e=A[0],mt(s,U(g),e),g[0].$$parentNode=g[0].parentNode,O=K(R,g,o,w,N&&N.name,{nonTlbTranscludeDirective:L});else{var nt=ft();if(g=Ri(Dt(e)).contents(),_(b)){g=[];var it=ft(),st=ft();i(b,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,it[t]=e,nt[e]=null,st[e]=n}),i(A.contents(),function(t){var e=it[ge(j(t))];e?(st[e]=!0,nt[e]=nt[e]||[],nt[e].push(t)):g.push(t)}),i(st,function(t,e){if(!t)throw Wr("reqslot","Required transclusion slot `{0}` was not filled.",e)});for(var at in nt)nt[at]&&(nt[at]=K(R,nt[at],o))}A.empty(),O=K(R,g,o,void 0,void 0,{needsNewScope:f.$$isolateScope||f.$$newScope}),O.$$slots=nt}if(f.template)if(D=!0,ut("template",C,f,A),C=f,b=$(f.template)?f.template(A,n):f.template,b=Ct(b),f.replace){if(N=f,g=xt(b)?[]:ye(ht(f.templateNamespace,Ki(b))),e=g[0],1!=g.length||e.nodeType!==or)throw Wr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m,"");mt(s,A,e);var lt={$attr:{}},ct=W(e,[],lt),dt=t.splice(F+1,t.length-(F+1));(E||x)&&et(ct,E,x),t=t.concat(ct).concat(dt),rt(n,lt),B=t.length}else A.html(b);if(f.templateUrl)D=!0,ut("template",C,f,A),C=f,f.replace&&(N=f),p=ot(t.splice(F,t.length-F),A,n,s,S&&O,u,c,{controllerDirectives:k,newScopeDirective:x!==f&&x,newIsolateScopeDirective:E,templateDirective:C,nonTlbTranscludeDirective:L}),B=t.length;else if(f.compile)try{y=f.compile(A,n,O);var pt=f.$$originalDirective||f;$(y)?d(null,z(pt,y),V,H):y&&d(z(pt,y.pre),z(pt,y.post),V,H)}catch(_t){r(_t,X(A))}f.terminal&&(p.terminal=!0,w=Math.max(w,f.priority))}return p.scope=x&&x.scope===!0,p.transcludeOnThisElement=S,p.templateOnThisElement=D,p.transclude=O,h.hasElementTranscludeDirective=M,p}function Q(t,e,n,r){var o;if(w(e)){var s=e.match(k),a=e.substring(s[0].length),u=s[1]||s[3],l="?"===s[2];if("^^"===u?n=n.parent():(o=r&&r[a],o=o&&o.instance),!o){var c="$"+a+"Controller";o=u?n.inheritedData(c):n.data(c)}if(!o&&!l)throw Wr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(Yi(e)){o=[];for(var h=0,d=e.length;h<d;h++)o[h]=Q(t,e[h],n,r)}else _(e)&&(o={},i(e,function(e,i){o[i]=Q(t,e,n,r)}));return o||null}function tt(t,e,n,i,r,o,s){var a=ft();for(var l in i){var c=i[l],h={$scope:c===s||c.$$isolateScope?r:o,$element:t,$attrs:e,$transclude:n},d=c.controller;"@"==d&&(d=e[c.name]);var p=u(d,h,!0,c.controllerAs);a[c.name]=p,t.data("$"+c.name+"Controller",p.instance)}return a}function et(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i]=d(t[i],{$$isolateScope:e,$$newScope:n})}function nt(t,n,i,o,a,u,l){if(n===a)return null;var p=null;if(c.hasOwnProperty(n))for(var f,m=e.get(n+h),g=0,y=m.length;g<y;g++)try{if(f=m[g],(v(o)||o>f.priority)&&f.restrict.indexOf(i)!=-1){if(u&&(f=d(f,{$$start:u,$$end:l})),!f.$$bindings){var b=f.$$bindings=s(f,f.name);_(b.isolateScope)&&(f.$$isolateBindings=b.isolateScope)}t.push(f),p=f}}catch(w){r(w)}return p}function it(t){if(c.hasOwnProperty(t))for(var n,i=e.get(t+h),r=0,o=i.length;r<o;r++)if(n=i[r],n.multiElement)return!0;return!1}function rt(t,e){var n=e.$attr,r=t.$attr;t.$$element;i(t,function(i,r){"$"!=r.charAt(0)&&(e[r]&&e[r]!==i&&(i+=("style"===r?";":" ")+e[r]),t.$set(r,i,!0,n[r]))}),i(e,function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function ot(t,e,n,r,s,a,u,l){var c,h,p=[],f=e[0],m=t.shift(),g=d(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),v=$(m.templateUrl)?m.templateUrl(e,n):m.templateUrl,y=m.templateNamespace;return e.empty(),o(v).then(function(o){var d,b,w,x;if(o=Ct(o),m.replace){if(w=xt(o)?[]:ye(ht(y,Ki(o))),d=w[0],1!=w.length||d.nodeType!==or)throw Wr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,v);b={$attr:{}},mt(r,e,d);var k=W(d,[],b);_(m.scope)&&et(k,!0),t=k.concat(t),rt(n,b)}else d=f,e.html(o);for(t.unshift(g),c=J(t,d,n,s,e,m,a,u,l),i(r,function(t,n){t==d&&(r[n]=e[0])}),h=V(e[0].childNodes,s);p.length;){var $=p.shift(),E=p.shift(),C=p.shift(),T=p.shift(),L=e[0];if(!$.$$destroyed){if(E!==f){var S=E.className;l.hasElementTranscludeDirective&&m.replace||(L=Dt(d)),mt(C,Ri(E),L),I(Ri(L),S)}x=c.transcludeOnThisElement?H($,c.transclude,T):T,c(h,$,L,r,x)}}p=null}),function(t,e,n,i,r){var o=r;e.$$destroyed||(p?p.push(e,n,i,o):(c.transcludeOnThisElement&&(o=H(e,c.transclude,r)),c(h,e,n,i,o)))}}function st(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function ut(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e)throw Wr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,X(i))}function ct(t,e){var i=n(e,!0);i&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&q.$$addBindingClass(e),function(t,e){var r=e.parent();n||q.$$addBindingClass(r),q.$$addBindingInfo(r,i.expressions),t.$watch(i,function(t){e[0].nodeValue=t})}}})}function ht(e,n){switch(e=Ni(e||"html")){case"svg":case"math":var i=t.document.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function dt(t,e){if("srcdoc"==e)return C.HTML;var n=j(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?C.RESOURCE_URL:void 0}function pt(t,e,i,r,o){var s=dt(t,r);o=x[r]||o;var a=n(i,!0,s,o);if(a){if("multiple"===r&&"select"===j(t))throw Wr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",X(t));e.push({priority:100,compile:function(){return{pre:function(t,e,u){var l=u.$$observers||(u.$$observers=ft());if(E.test(r))throw Wr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=u[r];c!==i&&(a=c&&n(c,!0,s,o),i=c),a&&(u[r]=a(t),(l[r]||(l[r]=[])).$$inter=!0,(u.$$observers&&u.$$observers[r].$$scope||t).$watch(a,function(t,e){"class"===r&&t!=e?u.$updateClass(t,e):u.$set(r,t)}))}}}})}}function mt(e,n,i){var r,o,s=n[0],a=n.length,u=s.parentNode;if(e)for(r=0,o=e.length;r<o;r++)if(e[r]==s){e[r++]=i;for(var l=r,c=l+a-1,h=e.length;l<h;l++,c++)c<h?e[l]=e[c]:delete e[l];e.length-=a-1,e.context===s&&(e.context=i);break}u&&u.replaceChild(i,s);var d=t.document.createDocumentFragment();for(r=0;r<a;r++)d.appendChild(n[r]);for(Ri.hasData(s)&&(Ri.data(i,Ri.data(s)),Ri(s).off("$destroy")),Ri.cleanData(d.querySelectorAll("*")),r=1;r<a;r++)delete n[r];n[0]=i,n.length=1}function gt(t,e){return l(function(){return t.apply(null,arguments)},t,e)}function vt(t,e,n,i,o,s){try{t(e,n,i,o,s)}catch(a){r(a,X(n))}}function yt(t,e,r,o,s){function u(e,n,i){$(r.$onChanges)&&n!==i&&(_t||(t.$$postDigest(N),_t=[]),c||(c={},_t.push(l)),c[e]&&(i=c[e].previousValue),c[e]=new me(i,n))}function l(){r.$onChanges(c),c=void 0}var c,h=[],d={};return i(o,function(i,o){var l,c,f,m,g,v=i.attrName,y=i.optional,_=i.mode;switch(_){case"@":y||Ai.call(e,v)||(r[o]=e[v]=void 0),e.$observe(v,function(t){if(w(t)||M(t)){var e=r[o];u(o,t,e),r[o]=t}}),e.$$observers[v].$$scope=t,l=e[v],w(l)?r[o]=n(l)(t):M(l)&&(r[o]=l),d[o]=new me(Zr,r[o]);break;case"=":if(!Ai.call(e,v)){if(y)break;e[v]=void 0}if(y&&!e[v])break;c=a(e[v]),m=c.literal?F:function(t,e){return t===e||t!==t&&e!==e},f=c.assign||function(){throw l=r[o]=c(t),Wr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[v],v,s.name)},l=r[o]=c(t);var b=function(e){return m(e,r[o])||(m(e,l)?f(t,e=r[o]):r[o]=e),l=e};b.$stateful=!0,g=i.collection?t.$watchCollection(e[v],b):t.$watch(a(e[v],b),null,c.literal),h.push(g);break;case"<":if(!Ai.call(e,v)){if(y)break;e[v]=void 0}if(y&&!e[v])break;c=a(e[v]);var x=r[o]=c(t);d[o]=new me(Zr,r[o]),g=t.$watch(c,function(t,e){if(e===t){if(e===x)return;e=x}u(o,t,e),r[o]=t},c.literal),h.push(g);break;case"&":if(c=e.hasOwnProperty(v)?a(e[v]):p,c===p&&y)break;r[o]=function(e){return c(t,e)}}}),{initialChanges:d,removeWatches:h.length&&function(){for(var t=0,e=h.length;t<e;++t)h[t]()}}}var _t,bt=/^\w/,wt=t.document.createElement("div"),kt=S;P.prototype={$normalize:ge,$addClass:function(t){t&&t.length>0&&D.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&D.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=ve(t,e);n&&n.length&&D.addClass(this.$$element,n);var i=ve(e,t);i&&i.length&&D.removeClass(this.$$element,i)},$set:function(t,e,n,o){var s,a=this.$$element[0],u=Ht(a,t),l=Wt(t),c=t;if(u?(this.$$element.prop(t,e),o=u):l&&(this[l]=e,c=l),this[t]=e,o?this.$attr[t]=o:(o=this.$attr[t],o||(this.$attr[t]=o=at(t,"-"))),s=j(this.$$element),"a"===s&&("href"===t||"xlinkHref"===t)||"img"===s&&"src"===t)this[t]=e=A(e,"src"===t);else if("img"===s&&"srcset"===t&&y(e)){for(var h="",d=Ki(e),p=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,f=/\s/.test(d)?p:/(,)/,m=d.split(f),g=Math.floor(m.length/2),_=0;_<g;_++){var b=2*_;h+=A(Ki(m[b]),!0),h+=" "+Ki(m[b+1])}var w=Ki(m[2*_]).split(/\s/);h+=A(Ki(w[0]),!0),2===w.length&&(h+=" "+Ki(w[1])),this[t]=e=h}n!==!1&&(null===e||v(e)?this.$$element.removeAttr(o):bt.test(o)?this.$$element.attr(o,e):O(this.$$element[0],o,e));var x=this.$$observers;x&&i(x[c],function(t){try{t(e)}catch(n){r(n)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=ft()),r=i[t]||(i[t]=[]);return r.push(e),m.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(t)||v(n[t])||e(n[t])}),function(){R(r,e)}}};var $t=n.startSymbol(),Et=n.endSymbol(),Ct="{{"==$t&&"}}"==Et?f:function(t){return t.replace(/\{\{/g,$t).replace(/}}/g,Et)},Tt=/^ngAttr[A-Z]/,St=/^(.+)Start$/;return q.$$addBindingInfo=L?function(t,e){var n=t.data("$binding")||[];Yi(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:p,q.$$addBindingClass=L?function(t){I(t,"ng-binding")}:p,q.$$addScopeInfo=L?function(t,e,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(r,e)}:p,q.$$addScopeClass=L?function(t,e){I(t,e?"ng-isolate-scope":"ng-scope")}:p,q.$$createComment=function(e,n){var i="";return L&&(i=" "+(e||"")+": ",n&&(i+=n+" ")),t.document.createComment(i)},q}]}function me(t,e){this.previousValue=t,this.currentValue=e}function ge(t){return wt(t.replace(Gr,""))}function ve(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var o=0;o<i.length;o++){for(var s=i[o],a=0;a<r.length;a++)if(s==r[a])continue t;n+=(n.length>0?" ":"")+s}return n}function ye(t){t=Ri(t);var e=t.length;if(e<=1)return t;for(;e--;){var n=t[e];n.nodeType===ur&&Ui.call(t,e,1)}return t}function _e(t,e){if(e&&w(e))return e;if(w(t)){var n=Xr.exec(t);if(n)return n[3]}}function be(){var t={},n=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){ht(e,"controller"),_(e)?l(t,e):t[e]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(i,r){function o(t,n,i,r){if(!t||!_(t.$scope))throw e("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,n);t.$scope[n]=i}return function(e,s,a,u){var c,h,d,p;if(a=a===!0,u&&w(u)&&(p=u),w(e)){if(h=e.match(Xr),!h)throw Yr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",e);d=h[1],p=p||h[3],e=t.hasOwnProperty(d)?t[d]:dt(s.$scope,d,!0)||(n?dt(r,d,!0):void 0),ct(e,d,!0)}if(a){var f=(Yi(e)?e[e.length-1]:e).prototype;c=Object.create(f||null),p&&o(s,p,c,d||e.name);var m;return m=l(function(){var t=i.invoke(e,c,s,d);return t!==c&&(_(t)||$(t))&&(c=t,p&&o(s,p,c,d||e.name)),c},{instance:c,identifier:p})}return c=i.instantiate(e,s,d),p&&o(s,p,c,d||e.name),c}}]}function we(){this.$get=["$window",function(t){return Ri(t.document)}]}function xe(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function ke(t){return _(t)?k(t)?t.toISOString():H(t):t}function $e(){this.$get=function(){return function(t){if(!t)return"";var e=[];return r(t,function(t,n){null===t||v(t)||(Yi(t)?i(t,function(t){e.push(et(n)+"="+et(ke(t)))}):e.push(et(n)+"="+et(ke(t))))}),e.join("&")}}}function Ee(){this.$get=function(){return function(t){function e(t,o,s){null===t||v(t)||(Yi(t)?i(t,function(t,n){e(t,o+"["+(_(t)?n:"")+"]")}):_(t)&&!k(t)?r(t,function(t,n){e(t,o+(s?"":"[")+n+(s?"":"]"))}):n.push(et(o)+"="+et(ke(t))))}if(!t)return"";var n=[];return e(t,"",!0),n.join("&")}}}function Ce(t,e){if(w(t)){var n=t.replace(no,"").trim();if(n){var i=e("Content-Type");(i&&0===i.indexOf(Jr)||Te(n))&&(t=W(n))}}return t}function Te(t){var e=t.match(to);return e&&eo[e[0]].test(t)}function Le(t){function e(t,e){t&&(r[t]=r[t]?r[t]+", "+e:e)}var n,r=ft();return w(t)?i(t.split("\n"),function(t){n=t.indexOf(":"),e(Ni(Ki(t.substr(0,n))),Ki(t.substr(n+1)))}):_(t)&&i(t,function(t,n){e(Ni(n),Ki(t))}),r}function Se(t){var e;return function(n){if(e||(e=Le(t)),n){var i=e[Ni(n)];return void 0===i&&(i=null),i}return e}}function De(t,e,n,r){return $(r)?r(t,e,n):(i(r,function(i){t=i(t,e,n)}),t)}function Me(t){return 200<=t&&t<300}function Ae(){var t=this.defaults={transformResponse:[Ce],transformRequest:[function(t){return!_(t)||L(t)||D(t)||S(t)?t:H(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:gt(Qr),put:gt(Qr),patch:gt(Qr)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},n=!1;this.useApplyAsync=function(t){return y(t)?(n=!!t,this):n};var r=!0;this.useLegacyPromiseExtensions=function(t){return y(t)?(r=!!t,this):r};var o=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(s,a,u,c,h,d){function p(n){function o(t,e){for(var n=0,i=e.length;n<i;){var r=e[n++],o=e[n++];t=t.then(r,o)}return e.length=0,t}function s(t,e){var n,r={};return i(t,function(t,i){$(t)?(n=t(e),null!=n&&(r[i]=n)):r[i]=t}),r}function a(e){var n,i,r,o=t.headers,a=l({},e.headers);o=l({},o.common,o[Ni(e.method)]);t:for(n in o){i=Ni(n);for(r in a)if(Ni(r)===i)continue t;a[n]=o[n]}return s(a,gt(e))}function u(e){var n=e.headers,r=De(e.data,Se(n),void 0,e.transformRequest);return v(r)&&i(n,function(t,e){"content-type"===Ni(e)&&delete n[e]}),v(e.withCredentials)&&!v(t.withCredentials)&&(e.withCredentials=t.withCredentials),g(e,r).then(c,c)}function c(t){var e=l({},t);return e.data=De(t.data,t.headers,t.status,p.transformResponse),Me(t.status)?e:h.reject(e)}if(!_(n))throw e("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!w(n.url))throw e("$http")("badreq","Http request configuration url must be a string.  Received: {0}",n.url);var p=l({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},n);p.headers=a(n),p.method=Pi(p.method),p.paramSerializer=w(p.paramSerializer)?d.get(p.paramSerializer):p.paramSerializer;var f=[],m=[],y=h.when(p);return i(k,function(t){(t.request||t.requestError)&&f.unshift(t.request,t.requestError),(t.response||t.responseError)&&m.push(t.response,t.responseError)}),y=o(y,f),y=y.then(u),y=o(y,m),r?(y.success=function(t){return ct(t,"fn"),y.then(function(e){t(e.data,e.status,e.headers,p)}),y},y.error=function(t){return ct(t,"fn"),y.then(null,function(e){t(e.data,e.status,e.headers,p)}),y}):(y.success=ro("success"),y.error=ro("error")),y}function f(t){i(arguments,function(t){p[t]=function(e,n){return p(l({},n||{},{method:t,url:e}))}})}function m(t){i(arguments,function(t){p[t]=function(e,n,i){return p(l({},i||{},{method:t,url:e,data:n}))}})}function g(e,r){function o(t){if(t){var e={};return i(t,function(t,i){e[i]=function(e){function i(){t(e)}n?c.$applyAsync(i):c.$$phase?i():c.$apply(i)}}),e}}function u(t,e,i,r){function o(){l(e,t,i,r)}m&&(Me(t)?m.put(E,[t,e,Le(i),r]):m.remove(E)),n?c.$applyAsync(o):(o(),c.$$phase||c.$apply())}function l(t,n,i,r){n=n>=-1?n:0,(Me(n)?w.resolve:w.reject)({data:t,status:n,headers:Se(i),config:e,statusText:r})}function d(t){l(t.data,t.status,gt(t.headers()),t.statusText)}function f(){var t=p.pendingRequests.indexOf(e);t!==-1&&p.pendingRequests.splice(t,1)}var m,g,w=h.defer(),k=w.promise,$=e.headers,E=b(e.url,e.paramSerializer(e.params));if(p.pendingRequests.push(e),k.then(f,f),!e.cache&&!t.cache||e.cache===!1||"GET"!==e.method&&"JSONP"!==e.method||(m=_(e.cache)?e.cache:_(t.cache)?t.cache:x),m&&(g=m.get(E),y(g)?A(g)?g.then(d,d):Yi(g)?l(g[1],g[0],gt(g[2]),g[3]):l(g,200,{},"OK"):m.put(E,k)),v(g)){var C=On(e.url)?a()[e.xsrfCookieName||t.xsrfCookieName]:void 0;C&&($[e.xsrfHeaderName||t.xsrfHeaderName]=C),s(e.method,E,r,u,$,e.timeout,e.withCredentials,e.responseType,o(e.eventHandlers),o(e.uploadEventHandlers))}return k}function b(t,e){return e.length>0&&(t+=(t.indexOf("?")==-1?"?":"&")+e),t}var x=u("$http");t.paramSerializer=w(t.paramSerializer)?d.get(t.paramSerializer):t.paramSerializer;var k=[];return i(o,function(t){k.unshift(w(t)?d.get(t):d.invoke(t))}),p.pendingRequests=[],f("get","delete","head","jsonp"),m("post","put","patch"),p.defaults=t,p}]}function Ne(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Pe(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,i){return Oe(t,i,t.defer,e,n[0])}]}function Oe(t,e,n,r,o){function s(t,e,n){t=t.replace("JSON_CALLBACK",e);var i=o.createElement("script"),s=null;return i.type="text/javascript",i.src=t,i.async=!0,s=function(t){mr(i,"load",s),mr(i,"error",s),o.body.removeChild(i),i=null;var a=-1,u="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),u=t.type,a="error"===t.type?404:200),n&&n(a,u)},fr(i,"load",s),fr(i,"error",s),o.body.appendChild(i),s}return function(o,a,u,l,c,h,d,f,m,g){function _(){x&&x(),k&&k.abort()}function b(e,i,r,o,s){y(C)&&n.cancel(C),x=k=null,e(i,r,o,s),t.$$completeOutstandingRequest(p)}if(t.$$incOutstandingRequestCount(),a=a||t.url(),"jsonp"===Ni(o))var w=r.createCallback(a),x=s(a,w,function(t,e){var n=200===t&&r.getResponse(w);b(l,t,n,"",e),r.removeCallback(w)});else{var k=e(o,a);k.open(o,a,!0),i(c,function(t,e){y(t)&&k.setRequestHeader(e,t)}),k.onload=function(){var t=k.statusText||"",e="response"in k?k.response:k.responseText,n=1223===k.status?204:k.status;0===n&&(n=e?200:"file"==Pn(a).protocol?404:0),b(l,n,e,k.getAllResponseHeaders(),t)};var $=function(){b(l,-1,null,null,"")};if(k.onerror=$,k.onabort=$,i(m,function(t,e){k.addEventListener(e,t)}),i(g,function(t,e){k.upload.addEventListener(e,t)}),d&&(k.withCredentials=!0),f)try{k.responseType=f}catch(E){if("json"!==f)throw E}k.send(v(u)?null:u)}if(h>0)var C=n(_,h);else A(h)&&h.then(_)}}function Ie(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){function o(t){return"\\\\\\"+t}function s(n){return n.replace(p,t).replace(f,e)}function a(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=H(t)}return t}function u(t,e,n,i){var r;return r=t.$watch(function(t){return r(),i(t)},e,n)}function c(o,c,p,f){function g(t){try{return t=A(t),f&&!y(t)?t:a(t)}catch(e){i(oo.interr(o,e))}}if(!o.length||o.indexOf(t)===-1){var _;if(!c){var b=s(o);_=m(b),_.exp=o,_.expressions=[],_.$$watchDelegate=u}return _}f=!!f;for(var w,x,k,E=0,C=[],T=[],L=o.length,S=[],D=[];E<L;){if((w=o.indexOf(t,E))==-1||(x=o.indexOf(e,w+h))==-1){E!==L&&S.push(s(o.substring(E)));break}E!==w&&S.push(s(o.substring(E,w))),k=o.substring(w+h,x),C.push(k),T.push(n(k,g)),E=x+d,D.push(S.length),S.push("")}if(p&&S.length>1&&oo.throwNoconcat(o),!c||C.length){var M=function(t){for(var e=0,n=C.length;e<n;e++){if(f&&v(t[e]))return;S[D[e]]=t[e]}return S.join("")},A=function(t){return p?r.getTrusted(p,t):r.valueOf(t)};return l(function(t){var e=0,n=C.length,r=new Array(n);try{for(;e<n;e++)r[e]=T[e](t);return M(r)}catch(s){i(oo.interr(o,s))}},{exp:o,expressions:C,$$watchDelegate:function(t,e){var n;return t.$watchGroup(T,function(i,r){var o=M(i);$(e)&&e.call(this,o,i!==r?n:o,t),n=o})}})}}var h=t.length,d=e.length,p=new RegExp(t.replace(/./g,o),"g"),f=new RegExp(e.replace(/./g,o),"g");return c.startSymbol=function(){return t},c.endSymbol=function(){return e},c}]}function je(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,i,r){function o(o,a,u,l){function c(){h?o.apply(null,d):o(m)}var h=arguments.length>4,d=h?U(arguments,4):[],p=e.setInterval,f=e.clearInterval,m=0,g=y(l)&&!l,v=(g?i:n).defer(),_=v.promise;return u=y(u)?u:0,_.$$intervalId=p(function(){g?r.defer(c):t.$evalAsync(c),v.notify(m++),u>0&&m>=u&&(v.resolve(m),f(_.$$intervalId),delete s[_.$$intervalId]),g||t.$apply()},a),s[_.$$intervalId]=v,_}var s={};return o.cancel=function(t){return!!(t&&t.$$intervalId in s)&&(s[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete s[t.$$intervalId],!0)},o}]}function Re(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=tt(e[n]);return e.join("/")}function qe(t,e){var n=Pn(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=h(n.port)||uo[n.protocol]||null}function Fe(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var i=Pn(t);e.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),e.$$search=J(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Be(t,e){return 0===t.lastIndexOf(e,0)}function Ue(t,e){if(Be(e,t))return e.substr(t.length)}function ze(t){var e=t.indexOf("#");return e==-1?t:t.substr(0,e)}function Ve(t){return t.replace(/(#.+)|#$/,"$1")}function He(t){return t.substr(0,ze(t).lastIndexOf("/")+1)}function We(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}function Ze(t,e,n){this.$$html5=!0,n=n||"",qe(t,this),this.$$parse=function(t){var n=Ue(e,t);if(!w(n))throw lo("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);Fe(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=Q(this.$$search),n=this.$$hash?"#"+tt(this.$$hash):"";this.$$url=Re(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,s,a;return y(o=Ue(t,i))?(s=o,a=y(o=Ue(n,o))?e+(Ue("/",o)||o):t+s):y(o=Ue(e,i))?a=e+o:e==i+"/"&&(a=e),a&&this.$$parse(a),!!a}}function Ge(t,e,n){qe(t,this),this.$$parse=function(i){function r(t,e,n){var i,r=/^\/[A-Z]:(\/.*)/;return Be(e,n)&&(e=e.replace(n,"")),r.exec(e)?t:(i=r.exec(t),i?i[1]:t)}var o,s=Ue(t,i)||Ue(e,i);v(s)||"#"!==s.charAt(0)?this.$$html5?o=s:(o="",v(s)&&(t=i,this.replace())):(o=Ue(n,s),v(o)&&(o=s)),Fe(o,this),this.$$path=r(this.$$path,o,t),this.$$compose()},this.$$compose=function(){var e=Q(this.$$search),i=this.$$hash?"#"+tt(this.$$hash):"";this.$$url=Re(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return ze(t)==ze(e)&&(this.$$parse(e),!0)}}function Ye(t,e,n){this.$$html5=!0,Ge.apply(this,arguments),this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,s;return t==ze(i)?o=i:(s=Ue(e,i))?o=t+n+s:e===i+"/"&&(o=e),o&&this.$$parse(o),!!o},this.$$compose=function(){var e=Q(this.$$search),i=this.$$hash?"#"+tt(this.$$hash):"";this.$$url=Re(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+n+this.$$url}}function Xe(t){return function(){return this[t]}}function Ke(t,e){return function(n){return v(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function Je(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return y(e)?(t=e,this):t},this.html5Mode=function(t){return M(t)?(e.enabled=t,this):_(t)?(M(t.enabled)&&(e.enabled=t.enabled),M(t.requireBase)&&(e.requireBase=t.requireBase),M(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,s){function a(t,e,n){var r=l.url(),o=l.$$state;try{i.url(t,e,n),l.$$state=i.state()}catch(s){throw l.url(r),l.$$state=o,s}}function u(t,e){n.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}var l,c,h,d=i.baseHref(),p=i.url();if(e.enabled){if(!d&&e.requireBase)throw lo("nobase","$location in HTML5 mode requires a <base> tag to be present!");h=We(p)+(d||"/"),c=r.history?Ze:Ye}else h=ze(p),c=Ge;var f=He(h);l=new c(h,f,"#"+t),l.$$parseLinkUrl(p,p),l.$$state=i.state();var m=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var r=Ri(t.target);"a"!==j(r[0]);)if(r[0]===o[0]||!(r=r.parent())[0])return;var a=r.prop("href"),u=r.attr("href")||r.attr("xlink:href");_(a)&&"[object SVGAnimatedString]"===a.toString()&&(a=Pn(a.animVal).href),m.test(a)||!a||r.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(a,u)&&(t.preventDefault(),l.absUrl()!=i.url()&&(n.$apply(),s.angular["ff-684208-preventDefault"]=!0))}}),Ve(l.absUrl())!=Ve(p)&&i.url(l.absUrl(),!0);var g=!0;return i.onUrlChange(function(t,e){return v(Ue(f,t))?void(s.location.href=t):(n.$evalAsync(function(){var i,r=l.absUrl(),o=l.$$state;t=Ve(t),l.$$parse(t),l.$$state=e,i=n.$broadcast("$locationChangeStart",t,r,e,o).defaultPrevented,l.absUrl()===t&&(i?(l.$$parse(r),l.$$state=o,a(r,!1,o)):(g=!1,u(r,o)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var t=Ve(i.url()),e=Ve(l.absUrl()),o=i.state(),s=l.$$replace,c=t!==e||l.$$html5&&r.history&&o!==l.$$state;(g||c)&&(g=!1,n.$evalAsync(function(){var e=l.absUrl(),i=n.$broadcast("$locationChangeStart",e,t,l.$$state,o).defaultPrevented;l.absUrl()===e&&(i?(l.$$parse(t),l.$$state=o):(c&&a(e,s,o===l.$$state?null:l.$$state),u(t,o)))})),l.$$replace=!1}),l}]}function Qe(){var t=!0,e=this;this.debugEnabled=function(e){return y(e)?(t=e,this):t},this.$get=["$window",function(n){function r(t){return t instanceof Error&&(t.stack?t=t.message&&t.stack.indexOf(t.message)===-1?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function o(t){var e=n.console||{},o=e[t]||e.log||p,s=!1;try{s=!!o.apply}catch(a){}return s?function(){var t=[];return i(arguments,function(e){t.push(r(e))}),o.apply(e,t)}:function(t,e){o(t,null==e?"":e)}}return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:function(){var n=o("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function tn(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw ho("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function en(t){return t+""}function nn(t,e){if(t){if(t.constructor===t)throw ho("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw ho("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw ho("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw ho("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}function rn(t,e){if(t){if(t.constructor===t)throw ho("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===po||t===fo||t===mo)throw ho("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function on(t,e){if(t&&(t===(0).constructor||t===(!1).constructor||t==="".constructor||t==={}.constructor||t===[].constructor||t===Function.constructor))throw ho("isecaf","Assigning to a constructor is disallowed! Expression: {0}",e)}function sn(t,e){return"undefined"!=typeof t?t:e}function an(t,e){return"undefined"==typeof t?e:"undefined"==typeof e?t:t+e}function un(t,e){var n=t(e);return!n.$stateful}function ln(t,e){var n,r;switch(t.type){case _o.Program:n=!0,i(t.body,function(t){ln(t.expression,e),n=n&&t.expression.constant}),t.constant=n;break;case _o.Literal:t.constant=!0,t.toWatch=[];break;case _o.UnaryExpression:ln(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case _o.BinaryExpression:ln(t.left,e),ln(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case _o.LogicalExpression:ln(t.left,e),ln(t.right,e),
t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case _o.ConditionalExpression:ln(t.test,e),ln(t.alternate,e),ln(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case _o.Identifier:t.constant=!1,t.toWatch=[t];break;case _o.MemberExpression:ln(t.object,e),t.computed&&ln(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case _o.CallExpression:n=!!t.filter&&un(e,t.callee.name),r=[],i(t.arguments,function(t){ln(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=t.filter&&un(e,t.callee.name)?r:[t];break;case _o.AssignmentExpression:ln(t.left,e),ln(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case _o.ArrayExpression:n=!0,r=[],i(t.elements,function(t){ln(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=r;break;case _o.ObjectExpression:n=!0,r=[],i(t.properties,function(t){ln(t.value,e),n=n&&t.value.constant&&!t.computed,t.value.constant||r.push.apply(r,t.value.toWatch)}),t.constant=n,t.toWatch=r;break;case _o.ThisExpression:t.constant=!1,t.toWatch=[];break;case _o.LocalsExpression:t.constant=!1,t.toWatch=[]}}function cn(t){if(1==t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function hn(t){return t.type===_o.Identifier||t.type===_o.MemberExpression}function dn(t){if(1===t.body.length&&hn(t.body[0].expression))return{type:_o.AssignmentExpression,left:t.body[0].expression,right:{type:_o.NGValueParameter},operator:"="}}function pn(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===_o.Literal||t.body[0].expression.type===_o.ArrayExpression||t.body[0].expression.type===_o.ObjectExpression)}function fn(t){return t.constant}function mn(t,e){this.astBuilder=t,this.$filter=e}function gn(t,e){this.astBuilder=t,this.$filter=e}function vn(t){return"constructor"==t}function yn(t){return $(t.valueOf)?t.valueOf():wo.call(t)}function _n(){var t,e,n=ft(),r=ft(),o={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(t,e){o[t]=e},this.setIdentifierFns=function(n,i){return t=n,e=i,this},this.$get=["$filter",function(s){function a(t,e,i){var o,a,l;switch(i=i||b,typeof t){case"string":t=t.trim(),l=t;var g=i?r:n;if(o=g[l],!o){":"===t.charAt(0)&&":"===t.charAt(1)&&(a=!0,t=t.substring(2));var y=i?_:v,w=new yo(y),x=new bo(w,s,y);o=x.parse(t),o.constant?o.$$watchDelegate=f:a?o.$$watchDelegate=o.literal?d:h:o.inputs&&(o.$$watchDelegate=c),i&&(o=u(o)),g[l]=o}return m(o,e);case"function":return m(t,e);default:return m(p,e)}}function u(t){function e(e,n,i,r){var o=b;b=!0;try{return t(e,n,i,r)}finally{b=o}}if(!t)return t;e.$$watchDelegate=t.$$watchDelegate,e.assign=u(t.assign),e.constant=t.constant,e.literal=t.literal;for(var n=0;t.inputs&&n<t.inputs.length;++n)t.inputs[n]=u(t.inputs[n]);return e.inputs=t.inputs,e}function l(t,e){return null==t||null==e?t===e:("object"!=typeof t||(t=yn(t),"object"!=typeof t))&&(t===e||t!==t&&e!==e)}function c(t,e,n,i,r){var o,s=i.inputs;if(1===s.length){var a=l;return s=s[0],t.$watch(function(t){var e=s(t);return l(e,a)||(o=i(t,void 0,void 0,[e]),a=e&&yn(e)),o},e,n,r)}for(var u=[],c=[],h=0,d=s.length;h<d;h++)u[h]=l,c[h]=null;return t.$watch(function(t){for(var e=!1,n=0,r=s.length;n<r;n++){var a=s[n](t);(e||(e=!l(a,u[n])))&&(c[n]=a,u[n]=a&&yn(a))}return e&&(o=i(t,void 0,void 0,c)),o},e,n,r)}function h(t,e,n,i){var r,o;return r=t.$watch(function(t){return i(t)},function(t,n,i){o=t,$(e)&&e.apply(this,arguments),y(t)&&i.$$postDigest(function(){y(o)&&r()})},n)}function d(t,e,n,r){function o(t){var e=!0;return i(t,function(t){y(t)||(e=!1)}),e}var s,a;return s=t.$watch(function(t){return r(t)},function(t,n,i){a=t,$(e)&&e.call(this,t,n,i),o(t)&&i.$$postDigest(function(){o(a)&&s()})},n)}function f(t,e,n,i){var r;return r=t.$watch(function(t){return r(),i(t)},e,n)}function m(t,e){if(!e)return t;var n=t.$$watchDelegate,i=!1,r=n!==d&&n!==h,o=r?function(n,r,o,s){var a=i&&s?s[0]:t(n,r,o,s);return e(a,n,r)}:function(n,i,r,o){var s=t(n,i,r,o),a=e(s,n,i);return y(s)?a:s};return t.$$watchDelegate&&t.$$watchDelegate!==c?o.$$watchDelegate=t.$$watchDelegate:e.$stateful||(o.$$watchDelegate=c,i=!t.inputs,o.inputs=t.inputs?t.inputs:[t]),o}var g=Qi().noUnsafeEval,v={csp:g,expensiveChecks:!1,literals:q(o),isIdentifierStart:$(t)&&t,isIdentifierContinue:$(e)&&e},_={csp:g,expensiveChecks:!0,literals:q(o),isIdentifierStart:$(t)&&t,isIdentifierContinue:$(e)&&e},b=!1;return a.$$runningExpensiveChecks=function(){return b},a}]}function bn(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return xn(function(e){t.$evalAsync(e)},e)}]}function wn(){this.$get=["$browser","$exceptionHandler",function(t,e){return xn(function(e){t.defer(e)},e)}]}function xn(t,n){function r(){this.$$state={status:0}}function o(t,e){return function(n){e.call(t,n)}}function s(t){var e,i,r;r=t.pending,t.processScheduled=!1,t.pending=void 0;for(var o=0,s=r.length;o<s;++o){i=r[o][0],e=r[o][t.status];try{$(e)?i.resolve(e(t.value)):1===t.status?i.resolve(t.value):i.reject(t.value)}catch(a){i.reject(a),n(a)}}}function a(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){s(e)}))}function u(){this.promise=new r}function c(t){var e=new u,n=0,r=Yi(t)?[]:{};return i(t,function(t,i){n++,y(t).then(function(t){r.hasOwnProperty(i)||(r[i]=t,--n||e.resolve(r))},function(t){r.hasOwnProperty(i)||e.reject(t)})}),0===n&&e.resolve(r),e.promise}function h(t){var e=p();return i(t,function(t){y(t).then(e.resolve,e.reject)}),e.promise}var d=e("$q",TypeError),p=function(){var t=new u;return t.resolve=o(t,t.resolve),t.reject=o(t,t.reject),t.notify=o(t,t.notify),t};l(r.prototype,{then:function(t,e,n){if(v(t)&&v(e)&&v(n))return this;var i=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),this.$$state.status>0&&a(this.$$state),i.promise},"catch":function(t){return this.then(null,t)},"finally":function(t,e){return this.then(function(e){return g(e,!0,t)},function(e){return g(e,!1,t)},e)}}),l(u.prototype,{resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(d("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){function e(t){u||(u=!0,s.$$resolve(t))}function i(t){u||(u=!0,s.$$reject(t))}var r,s=this,u=!1;try{(_(t)||$(t))&&(r=t&&t.then),$(r)?(this.promise.$$state.status=-1,r.call(t,e,i,o(this,this.notify))):(this.promise.$$state.value=t,this.promise.$$state.status=1,a(this.promise.$$state))}catch(l){i(l),n(l)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,a(this.promise.$$state)},notify:function(e){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&t(function(){for(var t,r,o=0,s=i.length;o<s;o++){r=i[o][0],t=i[o][3];try{r.notify($(t)?t(e):e)}catch(a){n(a)}}})}});var f=function(t){var e=new u;return e.reject(t),e.promise},m=function(t,e){var n=new u;return e?n.resolve(t):n.reject(t),n.promise},g=function(t,e,n){var i=null;try{$(n)&&(i=n())}catch(r){return m(r,!1)}return A(i)?i.then(function(){return m(t,e)},function(t){return m(t,!1)}):m(t,e)},y=function(t,e,n,i){var r=new u;return r.resolve(t),r.promise.then(e,n,i)},b=y,w=function(t){function e(t){i.resolve(t)}function n(t){i.reject(t)}if(!$(t))throw d("norslvr","Expected resolverFn, got '{0}'",t);var i=new u;return t(e,n),i.promise};return w.prototype=r.prototype,w.defer=p,w.reject=f,w.when=y,w.resolve=b,w.all=c,w.race=h,w}function kn(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(t){var e=n(t);return function(){i(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=r,o}]}function $n(){function t(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=s(),this.$$ChildScope=null}return e.prototype=t,e}var r=10,o=e("$rootScope"),a=null,u=null;this.digestTtl=function(t){return arguments.length&&(r=t),r},this.$get=["$exceptionHandler","$parse","$browser",function(e,l,c){function h(t){t.currentScope.$$destroyed=!0}function d(t){9===ji&&(t.$$childHead&&d(t.$$childHead),t.$$nextSibling&&d(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function f(){this.$id=s(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function m(t){if(E.$$phase)throw o("inprog","{0} already in progress",E.$$phase);E.$$phase=t}function g(){E.$$phase=null}function y(t,e){do t.$$watchersCount+=e;while(t=t.$parent)}function b(t,e,n){do t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n];while(t=t.$parent)}function w(){}function x(){for(;L.length;)try{L.shift()()}catch(t){e(t)}u=null}function k(){null===u&&(u=c.defer(function(){E.$apply(x)}))}f.prototype={constructor:f,$new:function(e,n){var i;return n=n||this,e?(i=new f,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=t(this)),i=new this.$$ChildScope),i.$parent=n,i.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=i,n.$$childTail=i):n.$$childHead=n.$$childTail=i,(e||n!=this)&&i.$on("$destroy",h),i},$watch:function(t,e,n,i){var r=l(t);if(r.$$watchDelegate)return r.$$watchDelegate(this,e,n,r,t);var o=this,s=o.$$watchers,u={fn:e,last:w,get:r,exp:i||t,eq:!!n};return a=null,$(e)||(u.fn=p),s||(s=o.$$watchers=[]),s.unshift(u),y(this,1),function(){R(s,u)>=0&&y(o,-1),a=null}},$watchGroup:function(t,e){function n(){u=!1,l?(l=!1,e(o,o,a)):e(o,r,a)}var r=new Array(t.length),o=new Array(t.length),s=[],a=this,u=!1,l=!0;if(!t.length){var c=!0;return a.$evalAsync(function(){c&&e(o,o,a)}),function(){c=!1}}return 1===t.length?this.$watch(t[0],function(t,n,i){o[0]=t,r[0]=n,e(o,t===n?o:r,i)}):(i(t,function(t,e){var i=a.$watch(t,function(t,i){o[e]=t,r[e]=i,u||(u=!0,a.$evalAsync(n))});s.push(i)}),function(){for(;s.length;)s.shift()()})},$watchCollection:function(t,e){function i(t){o=t;var e,i,r,a,u;if(!v(o)){if(_(o))if(n(o)){s!==p&&(s=p,g=s.length=0,h++),e=o.length,g!==e&&(h++,s.length=g=e);for(var l=0;l<e;l++)u=s[l],a=o[l],r=u!==u&&a!==a,r||u===a||(h++,s[l]=a)}else{s!==f&&(s=f={},g=0,h++),e=0;for(i in o)Ai.call(o,i)&&(e++,a=o[i],u=s[i],i in s?(r=u!==u&&a!==a,r||u===a||(h++,s[i]=a)):(g++,s[i]=a,h++));if(g>e){h++;for(i in s)Ai.call(o,i)||(g--,delete s[i])}}else s!==o&&(s=o,h++);return h}}function r(){if(m?(m=!1,e(o,o,u)):e(o,a,u),c)if(_(o))if(n(o)){a=new Array(o.length);for(var t=0;t<o.length;t++)a[t]=o[t]}else{a={};for(var i in o)Ai.call(o,i)&&(a[i]=o[i])}else a=o}i.$stateful=!0;var o,s,a,u=this,c=e.length>1,h=0,d=l(t,i),p=[],f={},m=!0,g=0;return this.$watch(d,r)},$digest:function(){var t,n,i,s,l,h,d,p,f,v,y,_,b=r,k=this,L=[];m("$digest"),c.$$checkUrlChange(),this===E&&null!==u&&(c.defer.cancel(u),x()),a=null;do{p=!1,v=k;for(var D=0;D<C.length;D++){try{_=C[D],_.scope.$eval(_.expression,_.locals)}catch(M){e(M)}a=null}C.length=0;t:do{if(h=v.$$watchers)for(d=h.length;d--;)try{if(t=h[d])if(l=t.get,(n=l(v))===(i=t.last)||(t.eq?F(n,i):"number"==typeof n&&"number"==typeof i&&isNaN(n)&&isNaN(i))){if(t===a){p=!1;break t}}else p=!0,a=t,t.last=t.eq?q(n,null):n,s=t.fn,s(n,i===w?n:i,v),b<5&&(y=4-b,L[y]||(L[y]=[]),L[y].push({msg:$(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,newVal:n,oldVal:i}))}catch(M){e(M)}if(!(f=v.$$watchersCount&&v.$$childHead||v!==k&&v.$$nextSibling))for(;v!==k&&!(f=v.$$nextSibling);)v=v.$parent}while(v=f);if((p||C.length)&&!b--)throw g(),o("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",r,L)}while(p||C.length);for(g();S<T.length;)try{T[S++]()}catch(M){e(M)}T.length=S=0},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===E&&c.$$applicationDestroyed(),y(this,-this.$$watchersCount);for(var e in this.$$listenerCount)b(this,this.$$listenerCount[e],e);t&&t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=p,this.$on=this.$watch=this.$watchGroup=function(){return p},this.$$listeners={},this.$$nextSibling=null,d(this)}},$eval:function(t,e){return l(t)(this,e)},$evalAsync:function(t,e){E.$$phase||C.length||c.defer(function(){C.length&&E.$digest()}),C.push({scope:this,expression:l(t),locals:e})},$$postDigest:function(t){T.push(t)},$apply:function(t){try{m("$apply");try{return this.$eval(t)}finally{g()}}catch(n){e(n)}finally{try{E.$digest()}catch(n){throw e(n),n}}},$applyAsync:function(t){function e(){n.$eval(t)}var n=this;t&&L.push(e),t=l(t),k()},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var i=this;do i.$$listenerCount[t]||(i.$$listenerCount[t]=0),i.$$listenerCount[t]++;while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);i!==-1&&(n[i]=null,b(r,1,t))}},$emit:function(t,n){var i,r,o,s=[],a=this,u=!1,l={name:t,targetScope:a,stopPropagation:function(){u=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=B([l],arguments,1);do{for(i=a.$$listeners[t]||s,l.currentScope=a,r=0,o=i.length;r<o;r++)if(i[r])try{i[r].apply(null,c)}catch(h){e(h)}else i.splice(r,1),r--,o--;if(u)return l.currentScope=null,l;a=a.$parent}while(a);return l.currentScope=null,l},$broadcast:function(t,n){var i=this,r=i,o=i,s={name:t,targetScope:i,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1};if(!i.$$listenerCount[t])return s;for(var a,u,l,c=B([s],arguments,1);r=o;){for(s.currentScope=r,a=r.$$listeners[t]||[],u=0,l=a.length;u<l;u++)if(a[u])try{a[u].apply(null,c)}catch(h){e(h)}else a.splice(u,1),u--,l--;if(!(o=r.$$listenerCount[t]&&r.$$childHead||r!==i&&r.$$nextSibling))for(;r!==i&&!(o=r.$$nextSibling);)r=r.$parent}return s.currentScope=null,s}};var E=new f,C=E.$$asyncQueue=[],T=E.$$postDigestQueue=[],L=E.$$applyAsyncQueue=[],S=0;return E}]}function En(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return y(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return y(t)?(e=t,this):e},this.$get=function(){return function(n,i){var r,o=i?e:t;return r=Pn(n).href,""===r||r.match(o)?n:"unsafe:"+r}}}function Cn(t){if("self"===t)return t;if(w(t)){if(t.indexOf("***")>-1)throw xo("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=Ji(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(E(t))return new RegExp("^"+t.source+"$");throw xo("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Tn(t){var e=[];return y(t)&&i(t,function(t){e.push(Cn(t))}),e}function Ln(){this.SCE_CONTEXTS=ko;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Tn(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=Tn(t)),e},this.$get=["$injector",function(n){function i(t,e){return"self"===t?On(e):!!t.exec(e.href)}function r(n){var r,o,s=Pn(n.toString()),a=!1;for(r=0,o=t.length;r<o;r++)if(i(t[r],s)){a=!0;break}if(a)for(r=0,o=e.length;r<o;r++)if(i(e[r],s)){a=!1;break}return a}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}function s(t,e){var n=h.hasOwnProperty(t)?h[t]:null;if(!n)throw xo("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||v(e)||""===e)return e;if("string"!=typeof e)throw xo("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)}function a(t){return t instanceof c?t.$$unwrapTrustedValue():t}function u(t,e){if(null===e||v(e)||""===e)return e;var n=h.hasOwnProperty(t)?h[t]:null;if(n&&e instanceof n)return e.$$unwrapTrustedValue();if(t===ko.RESOURCE_URL){if(r(e))return e;throw xo("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===ko.HTML)return l(e);throw xo("unsafe","Attempting to use an unsafe value in a safe context.")}var l=function(t){throw xo("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(l=n.get("$sanitize"));var c=o(),h={};return h[ko.HTML]=o(c),h[ko.CSS]=o(c),h[ko.URL]=o(c),h[ko.JS]=o(c),h[ko.RESOURCE_URL]=o(h[ko.URL]),{trustAs:s,getTrusted:u,valueOf:a}}]}function Sn(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&ji<8)throw xo("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=gt(ko);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=f),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var o=r.parseAs,s=r.getTrusted,a=r.trustAs;return i(ko,function(t,e){var n=Ni(e);r[wt("parse_as_"+n)]=function(e){return o(t,e)},r[wt("get_trusted_"+n)]=function(e){return s(t,e)},r[wt("trust_as_"+n)]=function(e){return a(t,e)}}),r}]}function Dn(){this.$get=["$window","$document",function(t,e){var n,i,r={},o=t.chrome&&t.chrome.app&&t.chrome.app.runtime,s=!o&&t.history&&t.history.pushState,a=h((/android (\d+)/.exec(Ni((t.navigator||{}).userAgent))||[])[1]),u=/Boxee/i.test((t.navigator||{}).userAgent),l=e[0]||{},c=/^(Moz|webkit|ms)(?=[A-Z])/,d=l.body&&l.body.style,p=!1,f=!1;if(d){for(var m in d)if(i=c.exec(m)){n=i[0],n=n[0].toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in d&&"webkit"),p=!!("transition"in d||n+"Transition"in d),f=!!("animation"in d||n+"Animation"in d),!a||p&&f||(p=w(d.webkitTransition),f=w(d.webkitAnimation))}return{history:!(!s||a<4||u),hasEvent:function(t){if("input"===t&&ji<=11)return!1;if(v(r[t])){var e=l.createElement("div");r[t]="on"+t in e}return r[t]},csp:Qi(),vendorPrefix:n,transitions:p,animations:f,android:a}}]}function Mn(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$templateCache","$http","$q","$sce",function(e,n,i,r){function o(s,a){function u(t){if(!a)throw $o("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText);return i.reject(t)}o.totalPendingRequests++,w(s)&&!v(e.get(s))||(s=r.getTrustedResourceUrl(s));var c=n.defaults&&n.defaults.transformResponse;return Yi(c)?c=c.filter(function(t){return t!==Ce}):c===Ce&&(c=null),n.get(s,l({cache:e,transformResponse:c},t))["finally"](function(){o.totalPendingRequests--}).then(function(t){return e.put(s,t.data),t.data},u)}return o.totalPendingRequests=0,o}]}function An(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={};return r.findBindings=function(t,e,n){var r=t.getElementsByClassName("ng-binding"),o=[];return i(r,function(t){var r=Zi.element(t).data("$binding");r&&i(r,function(i){if(n){var r=new RegExp("(^|\\s)"+Ji(e)+"(\\s|\\||$)");r.test(i)&&o.push(t)}else i.indexOf(e)!=-1&&o.push(t)})}),o},r.findModels=function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o=n?"=":"*=",s="["+i[r]+"model"+o+'"'+e+'"]',a=t.querySelectorAll(s);if(a.length)return a}},r.getLocation=function(){return n.url()},r.setLocation=function(e){e!==n.url()&&(n.url(e),t.$digest())},r.whenStable=function(t){e.notifyWhenNoOutstandingRequests(t)},r}]}function Nn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){function o(o,a,u){$(o)||(u=a,a=o,o=p);var l,c=U(arguments,3),h=y(u)&&!u,d=(h?i:n).defer(),f=d.promise;return l=e.defer(function(){try{d.resolve(o.apply(null,c))}catch(e){d.reject(e),r(e)}finally{delete s[f.$$timeoutId]}h||t.$apply()},a),f.$$timeoutId=l,s[l]=d,f}var s={};return o.cancel=function(t){return!!(t&&t.$$timeoutId in s)&&(s[t.$$timeoutId].reject("canceled"),delete s[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},o}]}function Pn(t){var e=t;return ji&&(Eo.setAttribute("href",e),e=Eo.href),Eo.setAttribute("href",e),{href:Eo.href,protocol:Eo.protocol?Eo.protocol.replace(/:$/,""):"",host:Eo.host,search:Eo.search?Eo.search.replace(/^\?/,""):"",hash:Eo.hash?Eo.hash.replace(/^#/,""):"",hostname:Eo.hostname,port:Eo.port,pathname:"/"===Eo.pathname.charAt(0)?Eo.pathname:"/"+Eo.pathname}}function On(t){var e=w(t)?Pn(t):t;return e.protocol===Co.protocol&&e.host===Co.host}function In(){this.$get=m(t)}function jn(t){function e(t){try{return decodeURIComponent(t)}catch(e){return t}}var n=t[0]||{},i={},r="";return function(){var t,o,s,a,u,l=n.cookie||"";if(l!==r)for(r=l,t=r.split("; "),i={},s=0;s<t.length;s++)o=t[s],a=o.indexOf("="),a>0&&(u=e(o.substring(0,a)),v(i[u])&&(i[u]=e(o.substring(a+1))));return i}}function Rn(){this.$get=jn}function qn(t){function e(r,o){if(_(r)){var s={};return i(r,function(t,n){s[n]=e(n,t)}),s}return t.factory(r+n,o)}var n="Filter";this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+n)}}],e("currency",Vn),e("date",oi),e("filter",Fn),e("json",si),e("limitTo",ai),e("lowercase",No),e("number",Hn),e("orderBy",li),e("uppercase",Po)}function Fn(){return function(t,i,r,o){if(!n(t)){if(null==t)return t;throw e("filter")("notarray","Expected array but received: {0}",t)}o=o||"$";var s,a,u=zn(i);switch(u){case"function":s=i;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":s=Bn(i,r,o,a);break;default:return t}return Array.prototype.filter.call(t,s)}}function Bn(t,e,n,i){var r,o=_(t)&&n in t;return e===!0?e=F:$(e)||(e=function(t,e){return!v(t)&&(null===t||null===e?t===e:!(_(e)||_(t)&&!g(t))&&(t=Ni(""+t),e=Ni(""+e),t.indexOf(e)!==-1))}),r=function(r){return o&&!_(r)?Un(r,t[n],e,n,!1):Un(r,t,e,n,i)}}function Un(t,e,n,i,r,o){var s=zn(t),a=zn(e);if("string"===a&&"!"===e.charAt(0))return!Un(t,e.substring(1),n,i,r);if(Yi(t))return t.some(function(t){return Un(t,e,n,i,r)});switch(s){case"object":var u;if(r){for(u in t)if("$"!==u.charAt(0)&&Un(t[u],e,n,i,!0))return!0;return!o&&Un(t,e,n,i,!1)}if("object"===a){for(u in e){var l=e[u];if(!$(l)&&!v(l)){var c=u===i,h=c?t:t[u];if(!Un(h,l,n,i,c,c))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function zn(t){return null===t?"null":typeof t}function Vn(t){var e=t.NUMBER_FORMATS;return function(t,n,i){return v(n)&&(n=e.CURRENCY_SYM),v(i)&&(i=e.PATTERNS[1].maxFrac),null==t?t:Gn(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function Hn(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:Gn(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Wn(t){var e,n,i,r,o,s=0;for((n=t.indexOf(Lo))>-1&&(t=t.replace(Lo,"")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charAt(i)==So;i++);if(i==(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)==So;)o--;for(n-=i,e=[],r=0;i<=o;i++,r++)e[r]=+t.charAt(i)}return n>To&&(e=e.splice(0,To-1),s=n-1,n=1),{d:e,e:s,i:n}}function Zn(t,e,n,i){var r=t.d,o=r.length-t.i;e=v(e)?Math.min(Math.max(n,o),i):+e;var s=e+t.i,a=r[s];if(s>0){r.splice(Math.max(t.i,s));for(var u=s;u<r.length;u++)r[u]=0}else{o=Math.max(0,o),t.i=1,r.length=Math.max(1,s=e+1),r[0]=0;for(var l=1;l<s;l++)r[l]=0}if(a>=5)if(s-1<0){for(var c=0;c>s;c--)r.unshift(0),t.i++;r.unshift(1),t.i++}else r[s-1]++;for(;o<Math.max(0,e);o++)r.push(0);var h=r.reduceRight(function(t,e,n,i){return e+=t,i[n]=e%10,Math.floor(e/10)},0);h&&(r.unshift(h),t.i++)}function Gn(t,e,n,i,r){if(!w(t)&&!x(t)||isNaN(t))return"";var o,s=!isFinite(t),a=!1,u=Math.abs(t)+"",l="";if(s)l="∞";else{o=Wn(u),Zn(o,r,e.minFrac,e.maxFrac);var c=o.d,h=o.i,d=o.e,p=[];for(a=c.reduce(function(t,e){return t&&!e},!0);h<0;)c.unshift(0),h++;h>0?p=c.splice(h,c.length):(p=c,c=[0]);var f=[];for(c.length>=e.lgSize&&f.unshift(c.splice(-e.lgSize,c.length).join(""));c.length>e.gSize;)f.unshift(c.splice(-e.gSize,c.length).join(""));c.length&&f.unshift(c.join("")),l=f.join(n),p.length&&(l+=i+p.join("")),d&&(l+="e+"+d)}return t<0&&!a?e.negPre+l+e.negSuf:e.posPre+l+e.posSuf}function Yn(t,e,n,i){var r="";for((t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,r="-")),t=""+t;t.length<e;)t=So+t;return n&&(t=t.substr(t.length-e)),r+t}function Xn(t,e,n,i,r){return n=n||0,function(o){var s=o["get"+t]();return(n>0||s>-n)&&(s+=n),0===s&&n==-12&&(s=12),Yn(s,e,i,r)}}function Kn(t,e,n){return function(i,r){var o=i["get"+t](),s=(n?"STANDALONE":"")+(e?"SHORT":""),a=Pi(s+t);return r[a][o]}}function Jn(t,e,n){var i=-1*n,r=i>=0?"+":"";return r+=Yn(Math[i>0?"floor":"ceil"](i/60),2)+Yn(Math.abs(i%60),2)}function Qn(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function ti(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function ei(t){return function(e){var n=Qn(e.getFullYear()),i=ti(e),r=+i-+n,o=1+Math.round(r/6048e5);return Yn(o,t)}}function ni(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]}function ii(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}function ri(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}function oi(t){function e(t){var e;if(e=t.match(n)){var i=new Date(0),r=0,o=0,s=e[8]?i.setUTCFullYear:i.setFullYear,a=e[8]?i.setUTCHours:i.setHours;e[9]&&(r=h(e[9]+e[10]),o=h(e[9]+e[11])),s.call(i,h(e[1]),h(e[2])-1,h(e[3]));var u=h(e[4]||0)-r,l=h(e[5]||0)-o,c=h(e[6]||0),d=Math.round(1e3*parseFloat("0."+(e[7]||0)));return a.call(i,u,l,c,d),i}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,o){var s,a,u="",l=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,w(n)&&(n=Ao.test(n)?h(n):e(n)),x(n)&&(n=new Date(n)),!k(n)||!isFinite(n.getTime()))return n;for(;r;)a=Mo.exec(r),a?(l=B(l,a,1),r=l.pop()):(l.push(r),r=null);var c=n.getTimezoneOffset();return o&&(c=Z(o,c),n=Y(n,o,!0)),i(l,function(e){s=Do[e],u+=s?s(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function si(){return function(t,e){return v(e)&&(e=2),H(t,e)}}function ai(){return function(t,e,i){return e=Math.abs(Number(e))===1/0?Number(e):h(e),isNaN(e)?t:(x(t)&&(t=t.toString()),n(t)?(i=!i||isNaN(i)?0:h(i),i=i<0?Math.max(0,t.length+i):i,e>=0?ui(t,i,i+e):0===i?ui(t,e,t.length):ui(t,Math.max(0,i+e),i)):t)}}function ui(t,e,n){return w(t)?t.slice(e,n):Bi.call(t,e,n)}function li(t){function i(e){return e.map(function(e){var n=1,i=f;if($(e))i=e;else if(w(e)&&("+"!=e.charAt(0)&&"-"!=e.charAt(0)||(n="-"==e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(i=t(e),i.constant))){var r=i();i=function(t){return t[r]}}return{get:i,descending:n}})}function r(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function o(t){return $(t.valueOf)&&(t=t.valueOf(),r(t))?t:g(t)&&(t=t.toString(),r(t))?t:t}function s(t,e){var n=typeof t;return null===t?(n="string",t="null"):"object"===n&&(t=o(t)),{value:t,type:n,index:e}}function a(t,e){var n=0,i=t.type,r=e.type;if(i===r){var o=t.value,s=e.value;"string"===i?(o=o.toLowerCase(),s=s.toLowerCase()):"object"===i&&(_(o)&&(o=t.index),_(s)&&(s=e.index)),o!==s&&(n=o<s?-1:1)}else n=i<r?-1:1;return n}return function(t,r,o,u){function l(t,e){return{value:t,tieBreaker:{value:e,type:"number",index:e},predicateValues:h.map(function(n){return s(n.get(t),e)})}}function c(t,e){for(var n=0,i=h.length;n<i;n++){var r=p(t.predicateValues[n],e.predicateValues[n]);if(r)return r*h[n].descending*d}return p(t.tieBreaker,e.tieBreaker)*d}if(null==t)return t;if(!n(t))throw e("orderBy")("notarray","Expected array but received: {0}",t);Yi(r)||(r=[r]),0===r.length&&(r=["+"]);var h=i(r),d=o?-1:1,p=$(u)?u:a,f=Array.prototype.map.call(t,l);return f.sort(c),t=f.map(function(t){return t.value})}}function ci(t){return $(t)&&(t={link:t}),t.restrict=t.restrict||"AC",m(t)}function hi(t,e){t.$name=e}function di(t,e,n,r,o){var s=this,a=[];s.$error={},s.$$success={},s.$pending=void 0,s.$name=o(e.name||e.ngForm||"")(n),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,s.$$parentForm=jo,s.$rollbackViewValue=function(){i(a,function(t){t.$rollbackViewValue()})},s.$commitViewValue=function(){i(a,function(t){t.$commitViewValue()})},s.$addControl=function(t){ht(t.$name,"input"),a.push(t),t.$name&&(s[t.$name]=t),t.$$parentForm=s},s.$$renameControl=function(t,e){var n=t.$name;s[n]===t&&delete s[n],s[e]=t,t.$name=e},s.$removeControl=function(t){t.$name&&s[t.$name]===t&&delete s[t.$name],i(s.$pending,function(e,n){s.$setValidity(n,null,t)}),i(s.$error,function(e,n){s.$setValidity(n,null,t)}),i(s.$$success,function(e,n){s.$setValidity(n,null,t)}),R(a,t),t.$$parentForm=jo},Ti({ctrl:this,$element:t,set:function(t,e,n){var i=t[e];if(i){var r=i.indexOf(n);r===-1&&i.push(n)}else t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(R(i,n),0===i.length&&delete t[e])},$animate:r}),s.$setDirty=function(){r.removeClass(t,ws),r.addClass(t,xs),s.$dirty=!0,s.$pristine=!1,s.$$parentForm.$setDirty()},s.$setPristine=function(){r.setClass(t,ws,xs+" "+Ro),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,i(a,function(t){t.$setPristine()})},s.$setUntouched=function(){i(a,function(t){t.$setUntouched()})},s.$setSubmitted=function(){r.addClass(t,Ro),s.$submitted=!0,s.$$parentForm.$setSubmitted()}}function pi(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function fi(t,e,n,i,r,o){mi(t,e,n,i,r,o),pi(i)}function mi(t,e,n,i,r,o){var s=Ni(e[0].type);if(!r.android){var a=!1;e.on("compositionstart",function(){a=!0}),e.on("compositionend",function(){a=!1,l()})}var u,l=function(t){if(u&&(o.defer.cancel(u),u=null),!a){var r=e.val(),l=t&&t.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(r=Ki(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,l)}};if(r.hasEvent("input"))e.on("input",l);else{var c=function(t,e,n){u||(u=o.defer(function(){u=null,e&&e.value===n||l(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||c(t,this,this.value)}),r.hasEvent("paste")&&e.on("paste cut",c)}e.on("change",l),Jo[s]&&i.$$hasNativeValidators&&s===n.type&&e.on(Ko,function(t){if(!u){var e=this[Mi],n=e.badInput,i=e.typeMismatch;u=o.defer(function(){u=null,e.badInput===n&&e.typeMismatch===i||l(t)})}}),i.$render=function(){var t=i.$isEmpty(i.$viewValue)?"":i.$viewValue;e.val()!==t&&e.val(t)}}function gi(t,e){if(k(t))return t;if(w(t)){Go.lastIndex=0;var n=Go.exec(t);if(n){var i=+n[1],r=+n[2],o=0,s=0,a=0,u=0,l=Qn(i),c=7*(r-1);return e&&(o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),u=e.getMilliseconds()),new Date(i,0,l.getDate()+c,o,s,a,u)}}return NaN}function vi(t,e){return function(n,r){var o,s;if(k(n))return n;if(w(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Uo.test(n))return new Date(n);if(t.lastIndex=0,o=t.exec(n))return o.shift(),s=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},i(o,function(t,n){n<e.length&&(s[e[n]]=+t)}),new Date(s.yyyy,s.MM-1,s.dd,s.HH,s.mm,s.ss||0,1e3*s.sss||0)}return NaN}}function yi(t,e,n,i){return function(r,o,s,a,u,l,c){function h(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function d(t){return y(t)&&!k(t)?n(t)||void 0:t;
}_i(r,o,s,a),mi(r,o,s,a,u,l);var p,f=a&&a.$options&&a.$options.timezone;if(a.$$parserName=t,a.$parsers.push(function(t){if(a.$isEmpty(t))return null;if(e.test(t)){var i=n(t,p);return f&&(i=Y(i,f)),i}}),a.$formatters.push(function(t){if(t&&!k(t))throw Ls("datefmt","Expected `{0}` to be a date",t);return h(t)?(p=t,p&&f&&(p=Y(p,f,!0)),c("date")(t,i,f)):(p=null,"")}),y(s.min)||s.ngMin){var m;a.$validators.min=function(t){return!h(t)||v(m)||n(t)>=m},s.$observe("min",function(t){m=d(t),a.$validate()})}if(y(s.max)||s.ngMax){var g;a.$validators.max=function(t){return!h(t)||v(g)||n(t)<=g},s.$observe("max",function(t){g=d(t),a.$validate()})}}}function _i(t,e,n,i){var r=e[0],o=i.$$hasNativeValidators=_(r.validity);o&&i.$parsers.push(function(t){var n=e.prop(Mi)||{};return n.badInput||n.typeMismatch?void 0:t})}function bi(t,e,n,i,r,o){if(_i(t,e,n,i),mi(t,e,n,i,r,o),i.$$parserName="number",i.$parsers.push(function(t){return i.$isEmpty(t)?null:Ho.test(t)?parseFloat(t):void 0}),i.$formatters.push(function(t){if(!i.$isEmpty(t)){if(!x(t))throw Ls("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}),y(n.min)||n.ngMin){var s;i.$validators.min=function(t){return i.$isEmpty(t)||v(s)||t>=s},n.$observe("min",function(t){y(t)&&!x(t)&&(t=parseFloat(t)),s=x(t)&&!isNaN(t)?t:void 0,i.$validate()})}if(y(n.max)||n.ngMax){var a;i.$validators.max=function(t){return i.$isEmpty(t)||v(a)||t<=a},n.$observe("max",function(t){y(t)&&!x(t)&&(t=parseFloat(t)),a=x(t)&&!isNaN(t)?t:void 0,i.$validate()})}}function wi(t,e,n,i,r,o){mi(t,e,n,i,r,o),pi(i),i.$$parserName="url",i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||zo.test(n)}}function xi(t,e,n,i,r,o){mi(t,e,n,i,r,o),pi(i),i.$$parserName="email",i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||Vo.test(n)}}function ki(t,e,n,i){v(n.name)&&e.attr("name",s());var r=function(t){e[0].checked&&i.$setViewValue(n.value,t&&t.type)};e.on("click",r),i.$render=function(){var t=n.value;e[0].checked=t==i.$viewValue},n.$observe("value",i.$render)}function $i(t,e,n,i,r){var o;if(y(i)){if(o=t(i),!o.constant)throw Ls("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(e)}return r}function Ei(t,e,n,i,r,o,s,a){var u=$i(a,t,"ngTrueValue",n.ngTrueValue,!0),l=$i(a,t,"ngFalseValue",n.ngFalseValue,!1),c=function(t){i.$setViewValue(e[0].checked,t&&t.type)};e.on("click",c),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return t===!1},i.$formatters.push(function(t){return F(t,u)}),i.$parsers.push(function(t){return t?u:l})}function Ci(t,e){return t="ngClass"+t,["$animate",function(n){function r(t,e){var n=[];t:for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r==e[o])continue t;n.push(r)}return n}function o(t){var e=[];return Yi(t)?(i(t,function(t){e=e.concat(o(t))}),e):w(t)?t.split(" "):_(t)?(i(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e):t}return{restrict:"AC",link:function(s,a,u){function l(t){var e=h(t,1);u.$addClass(e)}function c(t){var e=h(t,-1);u.$removeClass(e)}function h(t,e){var n=a.data("$classCounts")||ft(),r=[];return i(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&r.push(t))}),a.data("$classCounts",n),r.join(" ")}function d(t,e){var i=r(e,t),o=r(t,e);i=h(i,1),o=h(o,-1),i&&i.length&&n.addClass(a,i),o&&o.length&&n.removeClass(a,o)}function p(t){if(e===!0||(1&s.$index)===e){var n=o(t||[]);if(f){if(!F(t,f)){var i=o(f);d(i,n)}}else l(n)}f=Yi(t)?t.map(function(t){return gt(t)}):gt(t)}var f;s.$watch(u[t],p,!0),u.$observe("class",function(e){p(s.$eval(u[t]))}),"ngClass"!==t&&s.$watch("$index",function(n,i){var r=1&n;if(r!==(1&i)){var a=o(s.$eval(u[t]));r===e?l(a):c(a)}})}}}]}function Ti(t){function e(t,e,a){v(e)?n("$pending",t,a):i("$pending",t,a),M(e)?e?(c(s.$error,t,a),l(s.$$success,t,a)):(l(s.$error,t,a),c(s.$$success,t,a)):(c(s.$error,t,a),c(s.$$success,t,a)),s.$pending?(r(Es,!0),s.$valid=s.$invalid=void 0,o("",null)):(r(Es,!1),s.$valid=Li(s.$error),s.$invalid=!s.$valid,o("",s.$valid));var u;u=s.$pending&&s.$pending[t]?void 0:!s.$error[t]&&(!!s.$$success[t]||null),o(t,u),s.$$parentForm.$setValidity(t,u,s)}function n(t,e,n){s[t]||(s[t]={}),l(s[t],e,n)}function i(t,e,n){s[t]&&c(s[t],e,n),Li(s[t])&&(s[t]=void 0)}function r(t,e){e&&!u[t]?(h.addClass(a,t),u[t]=!0):!e&&u[t]&&(h.removeClass(a,t),u[t]=!1)}function o(t,e){t=t?"-"+at(t,"-"):"",r(_s+t,e===!0),r(bs+t,e===!1)}var s=t.ctrl,a=t.$element,u={},l=t.set,c=t.unset,h=t.$animate;u[bs]=!(u[_s]=a.hasClass(_s)),s.$setValidity=e}function Li(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function Si(t){t[0].hasAttribute("selected")&&(t[0].selected=!0)}var Di=/^\/(.+)\/([a-z]*)$/,Mi="validity",Ai=Object.prototype.hasOwnProperty,Ni=function(t){return w(t)?t.toLowerCase():t},Pi=function(t){return w(t)?t.toUpperCase():t},Oi=function(t){return w(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},Ii=function(t){return w(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(t.charCodeAt(0)&-33)}):t};"i"!=="I".toLowerCase()&&(Ni=Oi,Pi=Ii);var ji,Ri,qi,Fi,Bi=[].slice,Ui=[].splice,zi=[].push,Vi=Object.prototype.toString,Hi=Object.getPrototypeOf,Wi=e("ng"),Zi=t.angular||(t.angular={}),Gi=0;ji=t.document.documentMode,p.$inject=[],f.$inject=[];var Yi=Array.isArray,Xi=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,Ki=function(t){return w(t)?t.trim():t},Ji=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Qi=function(){function e(){try{return new Function(""),!1}catch(t){return!0}}if(!y(Qi.rules)){var n=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(n){var i=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");Qi.rules={noUnsafeEval:!i||i.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!i||i.indexOf("no-inline-style")!==-1}}else Qi.rules={noUnsafeEval:e(),noInlineStyle:!1}}return Qi.rules},tr=function(){if(y(tr.name_))return tr.name_;var e,n,i,r,o=nr.length;for(n=0;n<o;++n)if(i=nr[n],e=t.document.querySelector("["+i.replace(":","\\:")+"jq]")){r=e.getAttribute(i+"jq");break}return tr.name_=r},er=/:/g,nr=["ng-","data-ng-","ng:","x-ng-"],ir=/[A-Z]/g,rr=!1,or=1,sr=2,ar=3,ur=8,lr=9,cr=11,hr={full:"1.5.8",major:1,minor:5,dot:8,codeName:"arbitrary-fallbacks"};St.expando="ng339";var dr=St.cache={},pr=1,fr=function(t,e,n){t.addEventListener(e,n,!1)},mr=function(t,e,n){t.removeEventListener(e,n,!1)};St._data=function(t){return this.cache[t[this.expando]]||{}};var gr=/([\:\-\_]+(.))/g,vr=/^moz([A-Z])/,yr={mouseleave:"mouseout",mouseenter:"mouseover"},_r=e("jqLite"),br=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,wr=/<|&#?\w+;/,xr=/<([\w:-]+)/,kr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,$r={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$r.optgroup=$r.option,$r.tbody=$r.tfoot=$r.colgroup=$r.caption=$r.thead,$r.th=$r.td;var Er=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))},Cr=St.prototype={ready:function(e){function n(){i||(i=!0,e())}var i=!1;"complete"===t.document.readyState?t.setTimeout(n):(this.on("DOMContentLoaded",n),St(t).on("load",n))},toString:function(){var t=[];return i(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return Ri(t>=0?this[t]:this[this.length+t])},length:0,push:zi,sort:[].sort,splice:[].splice},Tr={};i("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Tr[Ni(t)]=t});var Lr={};i("input,select,option,textarea,button,form,details".split(","),function(t){Lr[t]=!0});var Sr={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};i({data:Ot,removeData:Nt,hasData:$t,cleanData:Et},function(t,e){St[e]=t}),i({data:Ot,inheritedData:Bt,scope:function(t){return Ri.data(t,"$scope")||Bt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return Ri.data(t,"$isolateScope")||Ri.data(t,"$isolateScopeNoTemplate")},controller:Ft,injector:function(t){return Bt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:It,css:function(t,e,n){return e=wt(e),y(n)?void(t.style[e]=n):t.style[e]},attr:function(t,e,n){var i=t.nodeType;if(i!==ar&&i!==sr&&i!==ur){var r=Ni(e);if(Tr[r]){if(!y(n))return t[e]||(t.attributes.getNamedItem(e)||p).specified?r:void 0;n?(t[e]=!0,t.setAttribute(e,r)):(t[e]=!1,t.removeAttribute(r))}else if(y(n))t.setAttribute(e,n);else if(t.getAttribute){var o=t.getAttribute(e,2);return null===o?void 0:o}}},prop:function(t,e,n){return y(n)?void(t[e]=n):t[e]},text:function(){function t(t,e){if(v(e)){var n=t.nodeType;return n===or||n===ar?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(v(e)){if(t.multiple&&"select"===j(t)){var n=[];return i(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){return v(e)?t.innerHTML:(Mt(t,!0),void(t.innerHTML=e))},empty:Ut},function(t,e){St.prototype[e]=function(e,n){var i,r,o=this.length;if(t!==Ut&&v(2==t.length&&t!==It&&t!==Ft?e:n)){if(_(e)){for(i=0;i<o;i++)if(t===Ot)t(this[i],e);else for(r in e)t(this[i],r,e[r]);return this}for(var s=t.$dv,a=v(s)?Math.min(o,1):o,u=0;u<a;u++){var l=t(this[u],e,n);s=s?s+l:l}return s}for(i=0;i<o;i++)t(this[i],e,n);return this}}),i({removeData:Nt,on:function(t,e,n,i){if(y(i))throw _r("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(kt(t)){var r=Pt(t,!0),o=r.events,s=r.handle;s||(s=r.handle=Zt(t,o));for(var a=e.indexOf(" ")>=0?e.split(" "):[e],u=a.length,l=function(e,i,r){var a=o[e];a||(a=o[e]=[],a.specialHandlerWrapper=i,"$destroy"===e||r||fr(t,e,s)),a.push(n)};u--;)e=a[u],yr[e]?(l(yr[e],Yt),l(e,void 0,!0)):l(e)}},off:At,one:function(t,e,n){t=Ri(t),t.on(e,function i(){t.off(e,n),t.off(e,i)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;Mt(t),i(new St(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return i(t.childNodes,function(t){t.nodeType===or&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===or||n===cr){e=new St(e);for(var i=0,r=e.length;i<r;i++){var o=e[i];t.appendChild(o)}}},prepend:function(t,e){if(t.nodeType===or){var n=t.firstChild;i(new St(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){Lt(t,Ri(e).eq(0).clone()[0])},remove:zt,detach:function(t){zt(t,!0)},after:function(t,e){var n=t,i=t.parentNode;e=new St(e);for(var r=0,o=e.length;r<o;r++){var s=e[r];i.insertBefore(s,n.nextSibling),n=s}},addClass:Rt,removeClass:jt,toggleClass:function(t,e,n){e&&i(e.split(" "),function(e){var i=n;v(i)&&(i=!It(t,e)),(i?Rt:jt)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==cr?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:Dt,triggerHandler:function(t,e,n){var r,o,s,a=e.type||e,u=Pt(t),c=u&&u.events,h=c&&c[a];h&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:p,type:a,target:t},e.type&&(r=l(r,e)),o=gt(h),s=n?[r].concat(n):[r],i(o,function(e){r.isImmediatePropagationStopped()||e.apply(t,s)}))}},function(t,e){St.prototype[e]=function(e,n,i){for(var r,o=0,s=this.length;o<s;o++)v(r)?(r=t(this[o],e,n,i),y(r)&&(r=Ri(r))):qt(r,t(this[o],e,n,i));return y(r)?r:this},St.prototype.bind=St.prototype.on,St.prototype.unbind=St.prototype.off}),Jt.prototype={put:function(t,e){this[Kt(t,this.nextUid)]=e},get:function(t){return this[Kt(t,this.nextUid)]},remove:function(t){var e=this[t=Kt(t,this.nextUid)];return delete this[t],e}};var Dr=[function(){this.$get=[function(){return Jt}]}],Mr=/^([^\(]+?)=>/,Ar=/^[^\(]*\(\s*([^\)]*)\)/m,Nr=/,/,Pr=/^\s*(_?)(\S+?)\1\s*$/,Or=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ir=e("$injector");ie.$$annotate=ne;var jr=e("$animate"),Rr=1,qr="ng-animate",Fr=function(){this.$get=p},Br=function(){var t=new Jt,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function o(t,e,n){var r=!1;return e&&(e=w(e)?e.split(" "):Yi(e)?e:[],i(e,function(e){e&&(r=!0,t[e]=n)})),r}function s(){i(e,function(e){var n=t.get(e);if(n){var r=ae(e.attr("class")),o="",s="";i(n,function(t,e){var n=!!r[e];t!==n&&(t?o+=(o.length?" ":"")+e:s+=(s.length?" ":"")+e)}),i(e,function(t){o&&Rt(t,o),s&&jt(t,s)}),t.remove(e)}}),e.length=0}function a(n,i,a){var u=t.get(n)||{},l=o(u,i,!0),c=o(u,a,!1);(l||c)&&(t.put(n,u),e.push(n),1===e.length&&r.$$postDigest(s))}return{enabled:p,on:p,off:p,pin:p,push:function(t,e,i,r){r&&r(),i=i||{},i.from&&t.css(i.from),i.to&&t.css(i.to),(i.addClass||i.removeClass)&&a(t,i.addClass,i.removeClass);var o=new n;return o.complete(),o}}}]},Ur=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw jr("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";e.$$registeredAnimations[n.substr(1)]=r,t.factory(r,i)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter)){var e=new RegExp("(\\s+|\\/)"+qr+"(\\s+|\\/)");if(e.test(this.$$classNameFilter.toString()))throw jr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',qr)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var i=se(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,i,r,o){return i=i&&Ri(i),r=r&&Ri(r),i=i||r.parent(),e(n,i,r),t.push(n,"enter",ue(o))},move:function(n,i,r,o){return i=i&&Ri(i),r=r&&Ri(r),i=i||r.parent(),e(n,i,r),t.push(n,"move",ue(o))},leave:function(e,n){return t.push(e,"leave",ue(n),function(){e.remove()})},addClass:function(e,n,i){return i=ue(i),i.addClass=oe(i.addclass,n),t.push(e,"addClass",i)},removeClass:function(e,n,i){return i=ue(i),i.removeClass=oe(i.removeClass,n),t.push(e,"removeClass",i)},setClass:function(e,n,i,r){return r=ue(r),r.addClass=oe(r.addClass,n),r.removeClass=oe(r.removeClass,i),t.push(e,"setClass",r)},animate:function(e,n,i,r,o){return o=ue(o),o.from=o.from?l(o.from,n):n,o.to=o.to?l(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=oe(o.tempClasses,r),t.push(e,"animate",o)}}}]}],zr=function(){this.$get=["$$rAF",function(t){function e(e){n.push(e),n.length>1||t(function(){for(var t=0;t<n.length;t++)n[t]();n=[]})}var n=[];return function(){var t=!1;return e(function(){t=!0}),function(n){t?n():e(n)}}}]},Vr=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(t,e,n,r,o){function s(t){this.setHost(t);var e=n(),i=function(t){o(t,0,!1)};this._doneCallbacks=[],this._tick=function(t){var n=r[0];n&&n.hidden?i(t):e(t)},this._state=0}var a=0,u=1,l=2;return s.chain=function(t,e){function n(){return i===t.length?void e(!0):void t[i](function(t){return t===!1?void e(!1):(i++,void n())})}var i=0;n()},s.all=function(t,e){function n(n){o=o&&n,++r===t.length&&e(o)}var r=0,o=!0;i(t,function(t){t.done(n)})},s.prototype={setHost:function(t){this.host=t||{}},done:function(t){this._state===l?t():this._doneCallbacks.push(t)},progress:p,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){e===!1?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},"catch":function(t){return this.getPromise()["catch"](t)},"finally":function(t){return this.getPromise()["finally"](t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;e._state===a&&(e._state=u,e._tick(function(){e._resolve(t)}))},_resolve:function(t){this._state!==l&&(i(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=l)}},s}]},Hr=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,i){function r(){return t(function(){o(),a||u.complete(),a=!0}),u}function o(){s.addClass&&(e.addClass(s.addClass),s.addClass=null),s.removeClass&&(e.removeClass(s.removeClass),s.removeClass=null),s.to&&(e.css(s.to),s.to=null)}var s=i||{};s.$$prepared||(s=q(s)),s.cleanupStyles&&(s.from=s.to=null),s.from&&(e.css(s.from),s.from=null);var a,u=new n;return{start:r,end:r}}}]},Wr=e("$compile"),Zr=new pe;fe.$inject=["$provide","$$sanitizeUriProvider"],me.prototype.isFirstChange=function(){return this.previousValue===Zr};var Gr=/^((?:x|data)[\:\-_])/i,Yr=e("$controller"),Xr=/^(\S+)(\s+as\s+([\w$]+))?$/,Kr=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof Ri&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Jr="application/json",Qr={"Content-Type":Jr+";charset=utf-8"},to=/^\[|^\{(?!\{)/,eo={"[":/]$/,"{":/}$/},no=/^\)\]\}',?\n/,io=e("$http"),ro=function(t){return function(){throw io("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",t)}},oo=Zi.$interpolateMinErr=e("$interpolate");oo.throwNoconcat=function(t){throw oo("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},oo.interr=function(t,e){return oo("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var so=function(){this.$get=["$window",function(t){function e(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}var n=t.angular.callbacks,i={};return{createCallback:function(t){var r="_"+(n.$$counter++).toString(36),o="angular.callbacks."+r,s=e(r);return i[o]=n[r]=s,o},wasCalled:function(t){return i[t].called},getResponse:function(t){return i[t].data},removeCallback:function(t){var e=i[t];delete n[e.id],delete i[t]}}}]},ao=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,uo={http:80,https:443,ftp:21},lo=e("$location"),co={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Xe("$$absUrl"),url:function(t){if(v(t))return this.$$url;var e=ao.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:Xe("$$protocol"),host:Xe("$$host"),port:Xe("$$port"),path:Ke("$$path",function(t){return t=null!==t?t.toString():"","/"==t.charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(w(t)||x(t))t=t.toString(),this.$$search=J(t);else{if(!_(t))throw lo("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");t=q(t,{}),i(t,function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:v(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:Ke("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};i([Ye,Ge,Ze],function(t){t.prototype=Object.create(co),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Ze||!this.$$html5)throw lo("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=v(e)?null:e,this}});var ho=e("$parse"),po=Function.prototype.call,fo=Function.prototype.apply,mo=Function.prototype.bind,go=ft();i("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){go[t]=!0});var vo={n:"\n",f:"\f",r:"\r",t:"\t",v:"\x0B","'":"'",'"':'"'},yo=function(t){this.options=t};yo.prototype={constructor:yo,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=go[e],o=go[n],s=go[i];if(r||o||s){var a=s?i:o?n:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return e.indexOf(t)!==-1},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\x0B"===t||" "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=y(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw ho("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=Ni(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{var a=vo[o];n+=a||o}r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var _o=function(t,e){this.lexer=t,this.options=e};_o.Program="Program",_o.ExpressionStatement="ExpressionStatement",_o.AssignmentExpression="AssignmentExpression",_o.ConditionalExpression="ConditionalExpression",_o.LogicalExpression="LogicalExpression",_o.BinaryExpression="BinaryExpression",_o.UnaryExpression="UnaryExpression",_o.CallExpression="CallExpression",_o.MemberExpression="MemberExpression",_o.Identifier="Identifier",_o.Literal="Literal",_o.ArrayExpression="ArrayExpression",_o.Property="Property",_o.ObjectExpression="ObjectExpression",_o.ThisExpression="ThisExpression",_o.LocalsExpression="LocalsExpression",_o.NGValueParameter="NGValueParameter",_o.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:_o.Program,body:t}},expressionStatement:function(){return{type:_o.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t,e=this.expression();t=this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();return this.expect("=")&&(t={type:_o.AssignmentExpression,left:t,right:this.assignment(),operator:"="}),t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:_o.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:_o.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:_o.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:_o.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:_o.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:_o.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:_o.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:_o.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=q(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:_o.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)"("===e.text?(t={type:_o.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:_o.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:_o.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:_o.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do t.push(this.filterChain());while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:_o.Identifier,name:t.text}},constant:function(){return{type:_o.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:_o.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:_o.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:_o.ObjectExpression,properties:e}},throwError:function(t,e){throw ho("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw ho("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw ho("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===n||s===i||s===r||!e&&!n&&!i&&!r)return o}return!1},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{"this":{type:_o.ThisExpression},$locals:{type:_o.LocalsExpression}}},mn.prototype={compile:function(t,e){var n=this,r=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},ln(r,n.$filter);var o,s="";if(this.stage="assign",o=dn(r)){this.state.computing="assign";var a=this.nextId();this.recurse(o,a),this.return_(a),s="fn.assign="+this.generateFunction("assign","s,v,l")}var u=cn(r.body);n.stage="inputs",i(u,function(t,e){var i="fn"+e;n.state[i]={vars:[],body:[],own:{}},n.state.computing=i;var r=n.nextId();n.recurse(t,r),n.return_(r),n.state.inputs.push(i),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(r);var l='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+s+this.watchFns()+"return fn;",c=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",l)(this.$filter,tn,nn,rn,en,on,sn,an,t);return this.state=this.stage=void 0,c.literal=pn(r),c.constant=fn(r),c},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return i(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return i(this.state.filters,function(n,i){t.push(n+"=$filter("+e.escape(i)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,o,s){var a,u,l,c,h,d=this;if(r=r||p,!s&&y(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,o,!0));switch(t.type){case _o.Program:i(t.body,function(e,n){d.recurse(e.expression,void 0,void 0,function(t){u=t}),n!==t.body.length-1?d.current().body.push(u,";"):d.return_(u)});break;case _o.Literal:c=this.escape(t.value),this.assign(e,c),r(c);break;case _o.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){u=t}),c=t.operator+"("+this.ifDefined(u,0)+")",this.assign(e,c),r(c);break;case _o.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){u=t}),c="+"===t.operator?this.plus(a,u):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(u,0):"("+a+")"+t.operator+"("+u+")",this.assign(e,c),r(c);break;case _o.LogicalExpression:e=e||this.nextId(),
d.recurse(t.left,e),d.if_("&&"===t.operator?e:d.not(e),d.lazyRecurse(t.right,e)),r(e);break;case _o.ConditionalExpression:e=e||this.nextId(),d.recurse(t.test,e),d.if_(e,d.lazyRecurse(t.alternate,e),d.lazyRecurse(t.consequent,e)),r(e);break;case _o.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),tn(t.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",t.name)),function(){d.if_("inputs"===d.stage||"s",function(){o&&1!==o&&d.if_(d.not(d.nonComputedMember("s",t.name)),d.lazyAssign(d.nonComputedMember("s",t.name),"{}")),d.assign(e,d.nonComputedMember("s",t.name))})},e&&d.lazyAssign(e,d.nonComputedMember("l",t.name))),(d.state.expensiveChecks||vn(t.name))&&d.addEnsureSafeObject(e),r(e);break;case _o.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),d.recurse(t.object,a,void 0,function(){d.if_(d.notNull(a),function(){o&&1!==o&&d.addEnsureSafeAssignContext(a),t.computed?(u=d.nextId(),d.recurse(t.property,u),d.getStringValue(u),d.addEnsureSafeMemberName(u),o&&1!==o&&d.if_(d.not(d.computedMember(a,u)),d.lazyAssign(d.computedMember(a,u),"{}")),c=d.ensureSafeObject(d.computedMember(a,u)),d.assign(e,c),n&&(n.computed=!0,n.name=u)):(tn(t.property.name),o&&1!==o&&d.if_(d.not(d.nonComputedMember(a,t.property.name)),d.lazyAssign(d.nonComputedMember(a,t.property.name),"{}")),c=d.nonComputedMember(a,t.property.name),(d.state.expensiveChecks||vn(t.property.name))&&(c=d.ensureSafeObject(c)),d.assign(e,c),n&&(n.computed=!1,n.name=t.property.name))},function(){d.assign(e,"undefined")}),r(e)},!!o);break;case _o.CallExpression:e=e||this.nextId(),t.filter?(u=d.filter(t.callee.name),l=[],i(t.arguments,function(t){var e=d.nextId();d.recurse(t,e),l.push(e)}),c=u+"("+l.join(",")+")",d.assign(e,c),r(e)):(u=d.nextId(),a={},l=[],d.recurse(t.callee,u,a,function(){d.if_(d.notNull(u),function(){d.addEnsureSafeFunction(u),i(t.arguments,function(t){d.recurse(t,d.nextId(),void 0,function(t){l.push(d.ensureSafeObject(t))})}),a.name?(d.state.expensiveChecks||d.addEnsureSafeObject(a.context),c=d.member(a.context,a.name,a.computed)+"("+l.join(",")+")"):c=u+"("+l.join(",")+")",c=d.ensureSafeObject(c),d.assign(e,c)},function(){d.assign(e,"undefined")}),r(e)}));break;case _o.AssignmentExpression:if(u=this.nextId(),a={},!hn(t.left))throw ho("lval","Trying to assign a value to a non l-value");this.recurse(t.left,void 0,a,function(){d.if_(d.notNull(a.context),function(){d.recurse(t.right,u),d.addEnsureSafeObject(d.member(a.context,a.name,a.computed)),d.addEnsureSafeAssignContext(a.context),c=d.member(a.context,a.name,a.computed)+t.operator+u,d.assign(e,c),r(e||c)})},1);break;case _o.ArrayExpression:l=[],i(t.elements,function(t){d.recurse(t,d.nextId(),void 0,function(t){l.push(t)})}),c="["+l.join(",")+"]",this.assign(e,c),r(c);break;case _o.ObjectExpression:l=[],h=!1,i(t.properties,function(t){t.computed&&(h=!0)}),h?(e=e||this.nextId(),this.assign(e,"{}"),i(t.properties,function(t){t.computed?(a=d.nextId(),d.recurse(t.key,a)):a=t.key.type===_o.Identifier?t.key.name:""+t.key.value,u=d.nextId(),d.recurse(t.value,u),d.assign(d.member(e,a,t.computed),u)})):(i(t.properties,function(e){d.recurse(e.value,t.constant?void 0:d.nextId(),void 0,function(t){l.push(d.escape(e.key.type===_o.Identifier?e.key.name:""+e.key.value)+":"+t)})}),c="{"+l.join(",")+"}",this.assign(e,c)),r(e||c);break;case _o.ThisExpression:this.assign(e,"s"),r("s");break;case _o.LocalsExpression:this.assign(e,"l"),r("l");break;case _o.NGValueParameter:this.assign(e,"v"),r("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(t===!0)e();else{var i=this.current().body;i.push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){var n=/[$_a-zA-Z][$_a-zA-Z0-9]*/,i=/[^$_a-zA-Z0-9]/g;return n.test(e)?t+"."+e:t+'["'+e.replace(i,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},addEnsureSafeAssignContext:function(t){this.current().body.push(this.ensureSafeAssignContext(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},ensureSafeAssignContext:function(t){return"ensureSafeAssignContext("+t+",text)"},lazyRecurse:function(t,e,n,i,r,o){var s=this;return function(){s.recurse(t,e,n,i,r,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(w(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(x(t))return t.toString();if(t===!0)return"true";if(t===!1)return"false";if(null===t)return"null";if("undefined"==typeof t)return"undefined";throw ho("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},gn.prototype={compile:function(t,e){var n=this,r=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,ln(r,n.$filter);var o,s;(o=dn(r))&&(s=this.recurse(o));var a,u=cn(r.body);u&&(a=[],i(u,function(t,e){var i=n.recurse(t);t.input=i,a.push(i),t.watchId=e}));var l=[];i(r.body,function(t){l.push(n.recurse(t.expression))});var c=0===r.body.length?p:1===r.body.length?l[0]:function(t,e){var n;return i(l,function(i){n=i(t,e)}),n};return s&&(c.assign=function(t,e,n){return s(t,n,e)}),a&&(c.inputs=a),c.literal=pn(r),c.constant=fn(r),c},recurse:function(t,e,n){var r,o,s,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case _o.Literal:return this.value(t.value,e);case _o.UnaryExpression:return o=this.recurse(t.argument),this["unary"+t.operator](o,e);case _o.BinaryExpression:return r=this.recurse(t.left),o=this.recurse(t.right),this["binary"+t.operator](r,o,e);case _o.LogicalExpression:return r=this.recurse(t.left),o=this.recurse(t.right),this["binary"+t.operator](r,o,e);case _o.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case _o.Identifier:return tn(t.name,a.expression),a.identifier(t.name,a.expensiveChecks||vn(t.name),e,n,a.expression);case _o.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(tn(t.property.name,a.expression),o=t.property.name),t.computed&&(o=this.recurse(t.property)),t.computed?this.computedMember(r,o,e,n,a.expression):this.nonComputedMember(r,o,a.expensiveChecks,e,n,a.expression);case _o.CallExpression:return s=[],i(t.arguments,function(t){s.push(a.recurse(t))}),t.filter&&(o=this.$filter(t.callee.name)),t.filter||(o=this.recurse(t.callee,!0)),t.filter?function(t,n,i,r){for(var a=[],u=0;u<s.length;++u)a.push(s[u](t,n,i,r));var l=o.apply(void 0,a,r);return e?{context:void 0,name:void 0,value:l}:l}:function(t,n,i,r){var u,l=o(t,n,i,r);if(null!=l.value){nn(l.context,a.expression),rn(l.value,a.expression);for(var c=[],h=0;h<s.length;++h)c.push(nn(s[h](t,n,i,r),a.expression));u=nn(l.value.apply(l.context,c),a.expression)}return e?{value:u}:u};case _o.AssignmentExpression:return r=this.recurse(t.left,!0,1),o=this.recurse(t.right),function(t,n,i,s){var u=r(t,n,i,s),l=o(t,n,i,s);return nn(u.value,a.expression),on(u.context),u.context[u.name]=l,e?{value:l}:l};case _o.ArrayExpression:return s=[],i(t.elements,function(t){s.push(a.recurse(t))}),function(t,n,i,r){for(var o=[],a=0;a<s.length;++a)o.push(s[a](t,n,i,r));return e?{value:o}:o};case _o.ObjectExpression:return s=[],i(t.properties,function(t){t.computed?s.push({key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}):s.push({key:t.key.type===_o.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})}),function(t,n,i,r){for(var o={},a=0;a<s.length;++a)s[a].computed?o[s[a].key(t,n,i,r)]=s[a].value(t,n,i,r):o[s[a].key]=s[a].value(t,n,i,r);return e?{value:o}:o};case _o.ThisExpression:return function(t){return e?{value:t}:t};case _o.LocalsExpression:return function(t,n){return e?{value:n}:n};case _o.NGValueParameter:return function(t,n,i){return e?{value:i}:i}}},"unary+":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=y(s)?+s:0,e?{value:s}:s}},"unary-":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=y(s)?-s:0,e?{value:s}:s}},"unary!":function(t,e){return function(n,i,r,o){var s=!t(n,i,r,o);return e?{value:s}:s}},"binary+":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s),u=e(i,r,o,s),l=an(a,u);return n?{value:l}:l}},"binary-":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s),u=e(i,r,o,s),l=(y(a)?a:0)-(y(u)?u:0);return n?{value:l}:l}},"binary*":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)*e(i,r,o,s);return n?{value:a}:a}},"binary/":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)/e(i,r,o,s);return n?{value:a}:a}},"binary%":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)%e(i,r,o,s);return n?{value:a}:a}},"binary===":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)===e(i,r,o,s);return n?{value:a}:a}},"binary!==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!==e(i,r,o,s);return n?{value:a}:a}},"binary==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)==e(i,r,o,s);return n?{value:a}:a}},"binary!=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!=e(i,r,o,s);return n?{value:a}:a}},"binary<":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<e(i,r,o,s);return n?{value:a}:a}},"binary>":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>e(i,r,o,s);return n?{value:a}:a}},"binary<=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<=e(i,r,o,s);return n?{value:a}:a}},"binary>=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>=e(i,r,o,s);return n?{value:a}:a}},"binary&&":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)&&e(i,r,o,s);return n?{value:a}:a}},"binary||":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)||e(i,r,o,s);return n?{value:a}:a}},"ternary?:":function(t,e,n,i){return function(r,o,s,a){var u=t(r,o,s,a)?e(r,o,s,a):n(r,o,s,a);return i?{value:u}:u}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n,i,r){return function(o,s,a,u){var l=s&&t in s?s:o;i&&1!==i&&l&&!l[t]&&(l[t]={});var c=l?l[t]:void 0;return e&&nn(c,r),n?{context:l,name:t,value:c}:c}},computedMember:function(t,e,n,i,r){return function(o,s,a,u){var l,c,h=t(o,s,a,u);return null!=h&&(l=e(o,s,a,u),l=en(l),tn(l,r),i&&1!==i&&(on(h),h&&!h[l]&&(h[l]={})),c=h[l],nn(c,r)),n?{context:h,name:l,value:c}:c}},nonComputedMember:function(t,e,n,i,r,o){return function(s,a,u,l){var c=t(s,a,u,l);r&&1!==r&&(on(c),c&&!c[e]&&(c[e]={}));var h=null!=c?c[e]:void 0;return(n||vn(e))&&nn(h,o),i?{context:c,name:e,value:h}:h}},inputs:function(t,e){return function(n,i,r,o){return o?o[e]:t(n,i,r)}}};var bo=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new _o(t,n),this.astCompiler=n.csp?new gn(this.ast,e):new mn(this.ast,e)};bo.prototype={constructor:bo,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var wo=Object.prototype.valueOf,xo=e("$sce"),ko={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$o=e("$compile"),Eo=t.document.createElement("a"),Co=Pn(t.location.href);jn.$inject=["$document"],qn.$inject=["$provide"];var To=22,Lo=".",So="0";Vn.$inject=["$locale"],Hn.$inject=["$locale"];var Do={yyyy:Xn("FullYear",4,0,!1,!0),yy:Xn("FullYear",2,0,!0,!0),y:Xn("FullYear",1,0,!1,!0),MMMM:Kn("Month"),MMM:Kn("Month",!0),MM:Xn("Month",2,1),M:Xn("Month",1,1),LLLL:Kn("Month",!1,!0),dd:Xn("Date",2),d:Xn("Date",1),HH:Xn("Hours",2),H:Xn("Hours",1),hh:Xn("Hours",2,-12),h:Xn("Hours",1,-12),mm:Xn("Minutes",2),m:Xn("Minutes",1),ss:Xn("Seconds",2),s:Xn("Seconds",1),sss:Xn("Milliseconds",3),EEEE:Kn("Day"),EEE:Kn("Day",!0),a:ni,Z:Jn,ww:ei(2),w:ei(1),G:ii,GG:ii,GGG:ii,GGGG:ri},Mo=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Ao=/^\-?\d+$/;oi.$inject=["$locale"];var No=m(Ni),Po=m(Pi);li.$inject=["$parse"];var Oo=m({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Vi.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Io={};i(Tr,function(t,e){function n(t,n,r){t.$watch(r[i],function(t){r.$set(e,!!t)})}if("multiple"!=t){var i=ge("ng-"+e),r=n;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[i]&&n(t,e,r)}),Io[i]=function(){return{restrict:"A",priority:100,link:r}}}}),i(Sr,function(t,e){Io[e]=function(){return{priority:100,link:function(t,n,i){if("ngPattern"===e&&"/"==i.ngPattern.charAt(0)){var r=i.ngPattern.match(Di);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}t.$watch(i[e],function(t){i.$set(e,t)})}}}}),i(["src","srcset","href"],function(t){var e=ge("ng-"+t);Io[e]=function(){return{priority:99,link:function(n,i,r){var o=t,s=t;"href"===t&&"[object SVGAnimatedString]"===Vi.call(i.prop("href"))&&(s="xlinkHref",r.$attr[s]="xlink:href",o=null),r.$observe(e,function(e){return e?(r.$set(s,e),void(ji&&o&&i.prop(o,r[s]))):void("href"===t&&r.$set(s,null))})}}}});var jo={$addControl:p,$$renameControl:hi,$removeControl:p,$setValidity:p,$setDirty:p,$setPristine:p,$setSubmitted:p},Ro="ng-submitted";di.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var qo=function(t){return["$timeout","$parse",function(e,n){function i(t){return""===t?n('this[""]').assign:n(t).assign||p}var r={name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:di,compile:function(n,r){n.addClass(ws).addClass(_s);var o=r.name?"name":!(!t||!r.ngForm)&&"ngForm";return{pre:function(t,n,r,s){var a=s[0];if(!("action"in r)){var u=function(e){t.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),e.preventDefault()};fr(n[0],"submit",u),n.on("$destroy",function(){e(function(){mr(n[0],"submit",u)},0,!1)})}var c=s[1]||a.$$parentForm;c.$addControl(a);var h=o?i(a.$name):p;o&&(h(t,a),r.$observe(o,function(e){a.$name!==e&&(h(t,void 0),a.$$parentForm.$$renameControl(a,e),(h=i(a.$name))(t,a))})),n.on("$destroy",function(){a.$$parentForm.$removeControl(a),h(t,void 0),l(a,jo)})}}}};return r}]},Fo=qo(),Bo=qo(!0),Uo=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,zo=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Vo=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Ho=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Wo=/^(\d{4,})-(\d{2})-(\d{2})$/,Zo=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Go=/^(\d{4,})-W(\d\d)$/,Yo=/^(\d{4,})-(\d\d)$/,Xo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ko="keydown wheel mousedown",Jo=ft();i("date,datetime-local,month,time,week".split(","),function(t){Jo[t]=!0});var Qo={text:fi,date:yi("date",Wo,vi(Wo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":yi("datetimelocal",Zo,vi(Zo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:yi("time",Xo,vi(Xo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:yi("week",Go,gi,"yyyy-Www"),month:yi("month",Yo,vi(Yo,["yyyy","MM"]),"yyyy-MM"),number:bi,url:wi,email:xi,radio:ki,checkbox:Ei,hidden:p,button:p,submit:p,reset:p,file:p},ts=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,s,a){a[0]&&(Qo[Ni(s.type)]||Qo.text)(r,o,s,a[0],e,t,n,i)}}}}],es=/^(true|false|\d+)$/,ns=function(){return{restrict:"A",priority:100,compile:function(t,e){return es.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},is=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,i){t.$$addBindingInfo(n,i.ngBind),n=n[0],e.$watch(i.ngBind,function(t){n.textContent=v(t)?"":t})}}}}],rs=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,i,r){var o=t(i.attr(r.$attr.ngBindTemplate));e.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",function(t){i.textContent=v(t)?"":t})}}}}],os=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(i,r){var o=e(r.ngBindHtml),s=e(r.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(i),function(e,i,r){n.$$addBindingInfo(i,r.ngBindHtml),e.$watch(s,function(){var n=o(e);i.html(t.getTrustedHtml(n)||"")})}}}}],ss=m({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),as=Ci("",!0),us=Ci("Odd",0),ls=Ci("Even",1),cs=ci({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),hs=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ds={},ps={blur:!0,focus:!0};i("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=ge("ng-"+t);ds[e]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var s=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var r=function(){s(e,{$event:n})};ps[t]&&i.$$phase?e.$evalAsync(r):e.$apply(r)})}}}}]});var fs=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,s){var a,u,l;n.$watch(r.ngIf,function(n){n?u||s(function(n,o){u=o,n[n.length++]=e.$$createComment("end ngIf",r.ngIf),a={clone:n},t.enter(n,i.parent(),i)}):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),a&&(l=pt(a.clone),t.leave(l).then(function(){l=null}),a=null))})}}}],ms=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Zi.noop,compile:function(i,r){var o=r.ngInclude||r.src,s=r.onload||"",a=r.autoscroll;return function(i,r,u,l,c){var h,d,p,f=0,m=function(){d&&(d.remove(),d=null),h&&(h.$destroy(),h=null),p&&(n.leave(p).then(function(){d=null}),d=p,p=null)};i.$watch(o,function(o){var u=function(){!y(a)||a&&!i.$eval(a)||e()},d=++f;o?(t(o,!0).then(function(t){if(!i.$$destroyed&&d===f){var e=i.$new();l.template=t;var a=c(e,function(t){m(),n.enter(t,null,r).then(u)});h=e,p=a,h.$emit("$includeContentLoaded",o),i.$eval(s)}},function(){i.$$destroyed||d===f&&(m(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(m(),l.template=null)})}}}}],gs=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){return Vi.call(i[0]).match(/SVG/)?(i.empty(),void e(Ct(o.template,t.document).childNodes)(n,function(t){i.append(t)},{futureParentElement:i})):(i.html(o.template),void e(i.contents())(n))}}}],vs=ci({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),ys=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var o=e.attr(n.$attr.ngList)||", ",s="false"!==n.ngTrim,a=s?Ki(o):o,u=function(t){if(!v(t)){var e=[];return t&&i(t.split(a),function(t){t&&e.push(s?Ki(t):t)}),e}};r.$parsers.push(u),r.$formatters.push(function(t){if(Yi(t))return t.join(o)}),r.$isEmpty=function(t){return!t||!t.length}}}},_s="ng-valid",bs="ng-invalid",ws="ng-pristine",xs="ng-dirty",ks="ng-untouched",$s="ng-touched",Es="ng-pending",Cs="ng-empty",Ts="ng-not-empty",Ls=e("ngModel"),Ss=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,n,r,o,s,a,u,l,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(t),this.$$parentForm=jo;var h,d=o(n.ngModel),f=d.assign,m=d,g=f,_=null,b=this;this.$$setOptions=function(t){if(b.$options=t,t&&t.getterSetter){var e=o(n.ngModel+"()"),i=o(n.ngModel+"($$$p)");m=function(t){var n=d(t);return $(n)&&(n=e(t)),n},g=function(t,e){$(d(t))?i(t,{$$$p:e}):f(t,e)}}else if(!d.assign)throw Ls("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,X(r))},this.$render=p,this.$isEmpty=function(t){return v(t)||""===t||null===t||t!==t},this.$$updateEmptyClasses=function(t){b.$isEmpty(t)?(s.removeClass(r,Ts),s.addClass(r,Cs)):(s.removeClass(r,Cs),s.addClass(r,Ts))};var w=0;Ti({ctrl:this,$element:r,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},$animate:s}),this.$setPristine=function(){b.$dirty=!1,b.$pristine=!0,s.removeClass(r,xs),s.addClass(r,ws)},this.$setDirty=function(){b.$dirty=!0,b.$pristine=!1,s.removeClass(r,ws),s.addClass(r,xs),b.$$parentForm.$setDirty()},this.$setUntouched=function(){b.$touched=!1,b.$untouched=!0,s.setClass(r,ks,$s)},this.$setTouched=function(){b.$touched=!0,b.$untouched=!1,s.setClass(r,$s,ks)},this.$rollbackViewValue=function(){a.cancel(_),b.$viewValue=b.$$lastCommittedViewValue,b.$render()},this.$validate=function(){if(!x(b.$modelValue)||!isNaN(b.$modelValue)){var t=b.$$lastCommittedViewValue,e=b.$$rawModelValue,n=b.$valid,i=b.$modelValue,r=b.$options&&b.$options.allowInvalid;b.$$runValidators(e,t,function(t){r||n===t||(b.$modelValue=t?e:void 0,b.$modelValue!==i&&b.$$writeModelToScope())})}},this.$$runValidators=function(t,e,n){function r(){var t=b.$$parserName||"parse";return v(h)?(a(t,null),!0):(h||(i(b.$validators,function(t,e){a(e,null)}),i(b.$asyncValidators,function(t,e){a(e,null)})),a(t,h),h)}function o(){var n=!0;return i(b.$validators,function(i,r){var o=i(t,e);n=n&&o,a(r,o)}),!!n||(i(b.$asyncValidators,function(t,e){a(e,null)}),!1)}function s(){var n=[],r=!0;i(b.$asyncValidators,function(i,o){var s=i(t,e);if(!A(s))throw Ls("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",s);a(o,void 0),n.push(s.then(function(){a(o,!0)},function(){r=!1,a(o,!1)}))}),n.length?l.all(n).then(function(){u(r)},p):u(!0)}function a(t,e){c===w&&b.$setValidity(t,e)}function u(t){c===w&&n(t)}w++;var c=w;return r()&&o()?void s():void u(!1)},this.$commitViewValue=function(){var t=b.$viewValue;a.cancel(_),(b.$$lastCommittedViewValue!==t||""===t&&b.$$hasNativeValidators)&&(b.$$updateEmptyClasses(t),b.$$lastCommittedViewValue=t,b.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function e(){b.$modelValue!==o&&b.$$writeModelToScope()}var n=b.$$lastCommittedViewValue,i=n;if(h=!v(i)||void 0)for(var r=0;r<b.$parsers.length;r++)if(i=b.$parsers[r](i),v(i)){h=!1;break}x(b.$modelValue)&&isNaN(b.$modelValue)&&(b.$modelValue=m(t));var o=b.$modelValue,s=b.$options&&b.$options.allowInvalid;b.$$rawModelValue=i,s&&(b.$modelValue=i,e()),b.$$runValidators(i,b.$$lastCommittedViewValue,function(t){s||(b.$modelValue=t?i:void 0,e())})},this.$$writeModelToScope=function(){g(t,b.$modelValue),i(b.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}})},this.$setViewValue=function(t,e){b.$viewValue=t,b.$options&&!b.$options.updateOnDefault||b.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n,i=0,r=b.$options;r&&y(r.debounce)&&(n=r.debounce,x(n)?i=n:x(n[e])?i=n[e]:x(n["default"])&&(i=n["default"])),a.cancel(_),i?_=a(function(){b.$commitViewValue()},i):u.$$phase?b.$commitViewValue():t.$apply(function(){b.$commitViewValue()})},t.$watch(function(){var e=m(t);if(e!==b.$modelValue&&(b.$modelValue===b.$modelValue||e===e)){b.$modelValue=b.$$rawModelValue=e,h=void 0;for(var n=b.$formatters,i=n.length,r=e;i--;)r=n[i](r);b.$viewValue!==r&&(b.$$updateEmptyClasses(r),b.$viewValue=b.$$lastCommittedViewValue=r,b.$render(),b.$$runValidators(e,r,p))}return e})}],Ds=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ss,priority:1,compile:function(e){return e.addClass(ws).addClass(ks).addClass(_s),{pre:function(t,e,n,i){var r=i[0],o=i[1]||r.$$parentForm;r.$$setOptions(i[2]&&i[2].$options),o.$addControl(r),n.$observe("name",function(t){r.$name!==t&&r.$$parentForm.$$renameControl(r,t)}),t.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(e,n,i,r){var o=r[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],Ms=/(\s+|^)default(\s+|$)/,As=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var n=this;this.$options=q(t.$eval(e.ngModelOptions)),y(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Ki(this.$options.updateOn.replace(Ms,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Ns=ci({terminal:!0,priority:1e3}),Ps=e("ngOptions"),Os=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Is=["$compile","$document","$parse",function(e,r,o){function s(t,e,i){function r(t,e,n,i,r){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=r}function s(t){var e;if(!l&&n(t))e=t;else{e=[];for(var i in t)t.hasOwnProperty(i)&&"$"!==i.charAt(0)&&e.push(i)}return e}var a=t.match(Os);if(!a)throw Ps("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,X(e));var u=a[5]||a[7],l=a[6],c=/ as /.test(a[0])&&a[1],h=a[9],d=o(a[2]?a[1]:u),p=c&&o(c),f=p||d,m=h&&o(h),g=h?function(t,e){return m(i,e)}:function(t){return Kt(t)},v=function(t,e){return g(t,k(t,e))},y=o(a[2]||a[1]),_=o(a[3]||""),b=o(a[4]||""),w=o(a[8]),x={},k=l?function(t,e){return x[l]=e,x[u]=t,x}:function(t){return x[u]=t,x};return{trackBy:h,getTrackByValue:v,getWatchables:o(w,function(t){var e=[];t=t||[];for(var n=s(t),r=n.length,o=0;o<r;o++){var u=t===n?o:n[o],l=t[u],c=k(l,u),h=g(l,c);if(e.push(h),a[2]||a[1]){var d=y(i,c);e.push(d)}if(a[4]){var p=b(i,c);e.push(p)}}return e}),getOptions:function(){for(var t=[],e={},n=w(i)||[],o=s(n),a=o.length,u=0;u<a;u++){var l=n===o?u:o[u],c=n[l],d=k(c,l),p=f(i,d),m=g(p,d),x=y(i,d),$=_(i,d),E=b(i,d),C=new r(m,p,x,$,E);t.push(C),e[m]=C}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[v(t)]},getViewValueFromOption:function(t){return h?Zi.copy(t.viewValue):t.viewValue}}}}}function a(t,n,o,a){function c(t,e){var n=u.cloneNode(!1);e.appendChild(n),h(t,n)}function h(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),t.value!==e.value&&(e.value=t.selectValue)}function d(){var t=k&&f.readValue();if(k)for(var e=k.items.length-1;e>=0;e--){var i=k.items[e];zt(y(i.group)?i.element.parentNode:i.element)}k=$.getOptions();var r={};if(w&&n.prepend(p),k.items.forEach(function(t){var e;y(t.group)?(e=r[t.group],e||(e=l.cloneNode(!1),E.appendChild(e),e.label=null===t.group?"null":t.group,r[t.group]=e),c(t,e)):c(t,E)}),n[0].appendChild(E),m.$render(),!m.$isEmpty(t)){var o=f.readValue(),s=$.trackBy||g;(s?F(t,o):t===o)||(m.$setViewValue(o),m.$render())}}for(var p,f=a[0],m=a[1],g=o.multiple,v=0,_=n.children(),b=_.length;v<b;v++)if(""===_[v].value){p=_.eq(v);break}var w=!!p,x=Ri(u.cloneNode(!1));x.val("?");var k,$=s(o.ngOptions,n,t),E=r[0].createDocumentFragment(),C=function(){w||n.prepend(p),n.val(""),p.prop("selected",!0),p.attr("selected",!0)},T=function(){w||p.remove()},L=function(){n.prepend(x),n.val("?"),x.prop("selected",!0),x.attr("selected",!0)},S=function(){x.remove()};g?(m.$isEmpty=function(t){return!t||0===t.length},f.writeValue=function(t){k.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=k.getOptionFromViewValue(t);e&&(e.element.selected=!0)})},f.readValue=function(){var t=n.val()||[],e=[];return i(t,function(t){var n=k.selectValueMap[t];n&&!n.disabled&&e.push(k.getViewValueFromOption(n))}),e},$.trackBy&&t.$watchCollection(function(){if(Yi(m.$viewValue))return m.$viewValue.map(function(t){return $.getTrackByValue(t)})},function(){m.$render()})):(f.writeValue=function(t){var e=k.getOptionFromViewValue(t);e?(n[0].value!==e.selectValue&&(S(),T(),n[0].value=e.selectValue,e.element.selected=!0),e.element.setAttribute("selected","selected")):null===t||w?(S(),C()):(T(),L())},f.readValue=function(){var t=k.selectValueMap[n.val()];return t&&!t.disabled?(T(),S(),k.getViewValueFromOption(t)):null},$.trackBy&&t.$watch(function(){return $.getTrackByValue(m.$viewValue)},function(){m.$render()})),w?(p.remove(),e(p)(t),p.removeClass("ng-scope")):p=Ri(u.cloneNode(!1)),n.empty(),d(),t.$watchCollection($.getWatchables,d)}var u=t.document.createElement("option"),l=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,i){i[0].registerOption=p},post:a}}}],js=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(s,a,u){function l(t){a.text(t||"")}var c,h=u.count,d=u.$attr.when&&a.attr(u.$attr.when),f=u.offset||0,m=s.$eval(d)||{},g={},y=e.startSymbol(),_=e.endSymbol(),b=y+h+"-"+f+_,w=Zi.noop;i(u,function(t,e){var n=o.exec(e);if(n){var i=(n[1]?"-":"")+Ni(n[2]);m[i]=a.attr(u.$attr[e])}}),i(m,function(t,n){g[n]=e(t.replace(r,b))}),s.$watch(h,function(e){var i=parseFloat(e),r=isNaN(i);if(r||i in m||(i=t.pluralCat(i-f)),i!==c&&!(r&&x(c)&&isNaN(c))){w();var o=g[i];v(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+d),w=p,l()):w=s.$watch(o,l),c=i}})}}}],Rs=["$parse","$animate","$compile",function(t,r,o){var s="$$NG_REMOVED",a=e("ngRepeat"),u=function(t,e,n,i,r,o,s){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&e))},l=function(t){return t.clone[0]},c=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,h){var d=h.ngRepeat,p=o.$$createComment("end ngRepeat",d),f=d.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!f)throw a("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",d);var m=f[1],g=f[2],v=f[3],y=f[4];if(f=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!f)throw a("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var _=f[3]||f[1],b=f[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw a("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);
var w,x,k,$,E={$id:Kt};return y?w=t(y):(k=function(t,e){return Kt(e)},$=function(t){return t}),function(t,e,o,h,f){w&&(x=function(e,n,i){return b&&(E[b]=e),E[_]=n,E.$index=i,w(t,E)});var m=ft();t.$watchCollection(g,function(o){var h,g,y,w,E,C,T,L,S,D,M,A,N=e[0],P=ft();if(v&&(t[v]=o),n(o))S=o,L=x||k;else{L=x||$,S=[];for(var O in o)Ai.call(o,O)&&"$"!==O.charAt(0)&&S.push(O)}for(w=S.length,M=new Array(w),h=0;h<w;h++)if(E=o===S?h:S[h],C=o[E],T=L(E,C,h),m[T])D=m[T],delete m[T],P[T]=D,M[h]=D;else{if(P[T])throw i(M,function(t){t&&t.scope&&(m[t.id]=t)}),a("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",d,T,C);M[h]={id:T,scope:void 0,clone:void 0},P[T]=!0}for(var I in m){if(D=m[I],A=pt(D.clone),r.leave(A),A[0].parentNode)for(h=0,g=A.length;h<g;h++)A[h][s]=!0;D.scope.$destroy()}for(h=0;h<w;h++)if(E=o===S?h:S[h],C=o[E],D=M[h],D.scope){y=N;do y=y.nextSibling;while(y&&y[s]);l(D)!=y&&r.move(pt(D.clone),null,N),N=c(D),u(D.scope,h,_,C,b,E,w)}else f(function(t,e){D.scope=e;var n=p.cloneNode(!1);t[t.length++]=n,r.enter(t,null,N),N=n,D.clone=t,P[D.id]=D,u(D.scope,h,_,C,b,E,w)});m=P})}}}}],qs="ng-hide",Fs="ng-hide-animate",Bs=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngShow,function(e){t[e?"removeClass":"addClass"](n,qs,{tempClasses:Fs})})}}}],Us=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngHide,function(e){t[e?"addClass":"removeClass"](n,qs,{tempClasses:Fs})})}}}],zs=ci(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&i(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),Vs=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,o,s){var a=o.ngSwitch||o.on,u=[],l=[],c=[],h=[],d=function(t,e){return function(){t.splice(e,1)}};n.$watch(a,function(n){var r,o;for(r=0,o=c.length;r<o;++r)t.cancel(c[r]);for(c.length=0,r=0,o=h.length;r<o;++r){var a=pt(l[r].clone);h[r].$destroy();var p=c[r]=t.leave(a);p.then(d(c,r))}l.length=0,h.length=0,(u=s.cases["!"+n]||s.cases["?"])&&i(u,function(n){n.transclude(function(i,r){h.push(r);var o=n.element;i[i.length++]=e.$$createComment("end ngSwitchWhen");var s={clone:i};l.push(s),t.enter(i,o.parent(),o)})})})}}}],Hs=ci({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:e})}}),Ws=ci({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),Zs=e("ngTransclude"),Gs=["$compile",function(t){return{restrict:"EAC",terminal:!0,compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,i,r,o){function s(t,n){t.length?e.append(t):(a(),n.$destroy())}function a(){n(t,function(t){e.append(t)})}if(!o)throw Zs("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",X(e));i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude="");var u=i.ngTransclude||i.ngTranscludeSlot;o(s,null,u),u&&!o.isSlotFilled(u)&&a()}}}}],Ys=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"==n.type){var i=n.id,r=e[0].text;t.put(i,r)}}}}],Xs={$setViewValue:p,$render:p},Ks=["$element","$scope",function(e,n){var i=this,r=new Jt;i.ngModelCtrl=Xs,i.unknownOption=Ri(t.document.createElement("option")),i.renderUnknownOption=function(t){var n="? "+Kt(t)+" ?";i.unknownOption.val(n),e.prepend(i.unknownOption),e.val(n)},n.$on("$destroy",function(){i.renderUnknownOption=p}),i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.readValue=function(){return i.removeUnknownOption(),e.val()},i.writeValue=function(t){i.hasOption(t)?(i.removeUnknownOption(),e.val(t),""===t&&i.emptyOption.prop("selected",!0)):null==t&&i.emptyOption?(i.removeUnknownOption(),e.val("")):i.renderUnknownOption(t)},i.addOption=function(t,e){if(e[0].nodeType!==ur){ht(t,'"option value"'),""===t&&(i.emptyOption=e);var n=r.get(t)||0;r.put(t,n+1),i.ngModelCtrl.$render(),Si(e)}},i.removeOption=function(t){var e=r.get(t);e&&(1===e?(r.remove(t),""===t&&(i.emptyOption=void 0)):r.put(t,e-1))},i.hasOption=function(t){return!!r.get(t)},i.registerOption=function(t,e,n,r,o){if(r){var s;n.$observe("value",function(t){y(s)&&i.removeOption(s),s=t,i.addOption(t,e)})}else o?t.$watch(o,function(t,r){n.$set("value",t),r!==t&&i.removeOption(r),i.addOption(t,e)}):i.addOption(n.value,e);e.on("$destroy",function(){i.removeOption(n.value),i.ngModelCtrl.$render()})}}],Js=function(){function t(t,e,n,r){var o=r[1];if(o){var s=r[0];if(s.ngModelCtrl=o,e.on("change",function(){t.$apply(function(){o.$setViewValue(s.readValue())})}),n.multiple){s.readValue=function(){var t=[];return i(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},s.writeValue=function(t){var n=new Jt(t);i(e.find("option"),function(t){t.selected=y(n.get(t.value))})};var a,u=NaN;t.$watch(function(){u!==o.$viewValue||F(a,o.$viewValue)||(a=gt(o.$viewValue),o.$render()),u=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}}}function e(t,e,n,i){var r=i[1];if(r){var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:Ks,priority:1,link:{pre:t,post:e}}},Qs=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){if(y(n.value))var i=t(n.value,!0);else{var r=t(e.text(),!0);r||n.$set("value",e.text())}return function(t,e,n){var o="$selectController",s=e.parent(),a=s.data(o)||s.parent().data(o);a&&a.registerOption(t,e,n,i,r)}}}}],ta=m({restrict:"E",terminal:!1}),ea=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){i&&(n.required=!0,i.$validators.required=function(t,e){return!n.required||!i.$isEmpty(e)},n.$observe("required",function(){i.$validate()}))}}},na=function(){return{restrict:"A",require:"?ngModel",link:function(t,n,i,r){if(r){var o,s=i.ngPattern||i.pattern;i.$observe("pattern",function(t){if(w(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw e("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,X(n));o=t||void 0,r.$validate()}),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||v(o)||o.test(e)}}}}},ia=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=-1;n.$observe("maxlength",function(t){var e=h(t);r=isNaN(e)?-1:e,i.$validate()}),i.$validators.maxlength=function(t,e){return r<0||i.$isEmpty(e)||e.length<=r}}}}},ra=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=0;n.$observe("minlength",function(t){r=h(t)||0,i.$validate()}),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=r}}}}};return t.angular.bootstrap?void(t.console&&console.log("WARNING: Tried to load angular more than once.")):(ut(),_t(Zi),Zi.module("ngLocale",[],["$provide",function(t){function e(t){t+="";var e=t.indexOf(".");return e==-1?0:t.length-e-1}function n(t,n){var i=n;void 0===i&&(i=Math.min(e(t),3));var r=Math.pow(10,i),o=(t*r|0)%r;return{v:i,f:o}}var i={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,e){var r=0|t,o=n(t,e);return 1==r&&0==o.v?i.ONE:i.OTHER}})}]),void Ri(t.document).ready(function(){it(t.document,rt)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},{}],2:[function(t,e,n){t("./angular"),e.exports=angular},{"./angular":1}],3:[function(t,e,n){"use strict";function i(t){return function(){var e=arguments.length;if(e){for(var n=[],i=-1;++i<e;)n[i]=arguments[i];return t.call(this,n)}return t.call(this,[])}}e.exports=i},{}],4:[function(t,e,n){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof n?t("jquery"):jQuery)}(function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function r(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function o(n,i){return function(){return i!==e&&t.fn.datepicker.deprecated(i),this[n].apply(this,arguments)}}function s(t){return t&&!isNaN(t.getTime())}function a(e,n){function i(t,e){return e.toLowerCase()}var r,o=t(e).data(),s={},a=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var u in o)n.test(u)&&(r=u.replace(a,i),s[r]=o[u]);return s}function u(e){var n={};if(g[e]||(e=e.split("-")[0],g[e])){var i=g[e];return t.each(m,function(t,e){e in i&&(n[e]=i[e])}),n}}var l=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;n<i;n++)if(0<=this[n].valueOf()-e&&this[n].valueOf()-e<864e5)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new l;return t.replace(this),t}};return function(){var n=[];return n.push.apply(n,arguments),t.extend(n,e),n}}(),c=function(e,n){t.data(e,"datepicker",this),this._process_options(n),this.dates=new l,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=t(v.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(t,e){return Number(e)+1}),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};c.prototype={constructor:c,_resolveViewName:function(e){return t.each(v.viewModes,function(n,i){if(e===n||t.inArray(e,i.names)!==-1)return e=n,!1}),e},_resolveDaysOfWeek:function(e){return t.isArray(e)||(e=e.split(/[,\s]*/)),t.map(e,Number)},_check_template:function(n){try{if(n===e||""===n)return!1;if((n.match(/[<>]/g)||[]).length<=0)return!0;var i=t(n);return i.length>0}catch(r){return!1}},_process_options:function(e){this._o=t.extend({},this._o,e);var r=this.o=t.extend({},this._o),o=r.language;g[o]||(o=o.split("-")[0],g[o]||(o=f.language)),r.language=o,r.startView=this._resolveViewName(r.startView),r.minViewMode=this._resolveViewName(r.minViewMode),r.maxViewMode=this._resolveViewName(r.maxViewMode),r.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,r.startView)),r.multidate!==!0&&(r.multidate=Number(r.multidate)||!1,r.multidate!==!1&&(r.multidate=Math.max(0,r.multidate))),r.multidateSeparator=String(r.multidateSeparator),r.weekStart%=7,r.weekEnd=(r.weekStart+6)%7;var s=v.parseFormat(r.format);r.startDate!==-(1/0)&&(r.startDate?r.startDate instanceof Date?r.startDate=this._local_to_utc(this._zero_time(r.startDate)):r.startDate=v.parseDate(r.startDate,s,r.language,r.assumeNearbyYear):r.startDate=-(1/0)),r.endDate!==1/0&&(r.endDate?r.endDate instanceof Date?r.endDate=this._local_to_utc(this._zero_time(r.endDate)):r.endDate=v.parseDate(r.endDate,s,r.language,r.assumeNearbyYear):r.endDate=1/0),r.daysOfWeekDisabled=this._resolveDaysOfWeek(r.daysOfWeekDisabled||[]),r.daysOfWeekHighlighted=this._resolveDaysOfWeek(r.daysOfWeekHighlighted||[]),r.datesDisabled=r.datesDisabled||[],t.isArray(r.datesDisabled)||(r.datesDisabled=r.datesDisabled.split(",")),r.datesDisabled=t.map(r.datesDisabled,function(t){return v.parseDate(t,s,r.language,r.assumeNearbyYear)});var a=String(r.orientation).toLowerCase().split(/\s+/g),u=r.orientation.toLowerCase();if(a=t.grep(a,function(t){return/^auto|left|right|top|bottom$/.test(t)}),r.orientation={x:"auto",y:"auto"},u&&"auto"!==u)if(1===a.length)switch(a[0]){case"top":case"bottom":r.orientation.y=a[0];break;case"left":case"right":r.orientation.x=a[0]}else u=t.grep(a,function(t){return/^left|right$/.test(t)}),r.orientation.x=u[0]||"auto",u=t.grep(a,function(t){return/^top|bottom$/.test(t)}),r.orientation.y=u[0]||"auto";else;if(r.defaultViewDate instanceof Date||"string"==typeof r.defaultViewDate)r.defaultViewDate=v.parseDate(r.defaultViewDate,s,r.language,r.assumeNearbyYear);else if(r.defaultViewDate){var l=r.defaultViewDate.year||(new Date).getFullYear(),c=r.defaultViewDate.month||0,h=r.defaultViewDate.day||1;r.defaultViewDate=n(l,c,h)}else r.defaultViewDate=i()},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(i=e,r=t[o][1]):3===t[o].length&&(i=t[o][1],r=t[o][2]),n.on(r,i)},_unapplyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(r=e,i=t[o][1]):3===t[o].length&&(r=t[o][1],i=t[o][2]),n.off(i,r)},_buildEvents:function(){var e={keyup:t.proxy(function(e){t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:t.proxy(this.keydown,this),paste:t.proxy(this.paste,this)};this.o.showOnFocus===!0&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.inputField.length?this._events=[[this.inputField,e],[this.component,{click:t.proxy(this.show,this)}]]:this._events=[[this.element,{click:t.proxy(this.show,this),keydown:t.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":t.proxy(function(t){this.update(t.date)},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[this.picker,".prev, .next",{click:t.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:t.proxy(this.dayCellClick,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),r=this._utc_to_local(i);this.element.trigger({type:e,date:r,viewMode:this.viewMode,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return v.formatDate(n,e,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&this.o.enableOnReadonly===!1))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var n;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&t.inArray("text/plain",e.originalEvent.clipboardData.types)!==-1)n=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),e.preventDefault()},_utc_to_local:function(t){if(!t)return t;var e=new Date(t.getTime()+6e4*t.getTimezoneOffset());return e.getTimezoneOffset()!==t.getTimezoneOffset()&&(e=new Date(t.getTime()+6e4*e.getTimezoneOffset())),e},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&n(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return t!==e?new Date(t):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,t.map(e,this._utc_to_local)),this},setDate:o("setDates"),setUTCDate:o("setUTCDates"),remove:o("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var t=this.getFormattedDate();return this.inputField.val(t),this},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return v.formatDate(t,n,i)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){return this._process_options({datesDisabled:t}),this.update(),this},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,r=t(this.o.container),o=r.width(),s="body"===this.o.container?t(document).scrollTop():r.scrollTop(),a=r.offset(),u=[0];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!==e&&0!==Number(e)&&u.push(Number(e))});var l=Math.max.apply(Math,u)+this.o.zIndexOffset,c=this.component?this.component.parent().offset():this.element.offset(),h=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=c.left-a.left,f=c.top-a.top;"body"!==this.o.container&&(f+=s),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(p-=e-d)):c.left<0?(this.picker.addClass("datepicker-orient-left"),p-=c.left-i):p+e>o?(this.picker.addClass("datepicker-orient-right"),p+=d-e):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var m,g=this.o.orientation.y;if("auto"===g&&(m=-s+f-n,g=m<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+g),"top"===g?f-=n+parseInt(this.picker.css("padding-top")):f+=h,this.o.rtl){var v=o-(p+d);this.picker.css({top:f,right:v,zIndex:l})}else this.picker.css({top:f,left:p,zIndex:l});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),n=[],i=!1;return arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)},this)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy(function(t){return v.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),n=t.grep(n,t.proxy(function(t){return!this.dateWithinRange(t)||!t},this),!0),this.dates.replace(n),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),i?(this.setValue(),this.element.change()):this.dates.length&&String(e)!==String(this.dates)&&i&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&e.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var e=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(n+='<th class="cw">&#160;</th>');e<this.o.weekStart+7;)n+='<th class="dow',t.inArray(e,this.o.daysOfWeekDisabled)!==-1&&(n+=" disabled"),n+='">'+g[this.o.language].daysMin[e++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)}},fillMonths:function(){for(var t,e=this._utc_to_local(this.viewDate),n="",i=0;i<12;i++)t=e&&e.getMonth()===i?" focused":"",n+='<span class="month'+t+'">'+g[this.o.language].monthsShort[i]+"</span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var n=[],o=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),a=i();return e.getUTCFullYear()<o||e.getUTCFullYear()===o&&e.getUTCMonth()<s?n.push("old"):(e.getUTCFullYear()>o||e.getUTCFullYear()===o&&e.getUTCMonth()>s)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&r(e,a)&&n.push("today"),this.dates.contains(e)!==-1&&n.push("active"),this.dateWithinRange(e)||n.push("disabled"),this.dateIsDisabled(e)&&n.push("disabled","disabled-date"),t.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)!==-1&&n.push("highlighted"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),t.inArray(e.valueOf(),this.range)!==-1&&n.push("selected"),e.valueOf()===this.range[0]&&n.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,i,r,o,s,a,u){for(var l,c,h,d="",p=r/10,f=this.picker.find(n),m=Math.floor(o/r)*r,g=m+9*p,v=Math.floor(this.viewDate.getFullYear()/p)*p,y=t.map(this.dates,function(t){return Math.floor(t.getUTCFullYear()/p)*p}),_=m-p;_<=g+p;_+=p)l=[i],c=null,_===m-p?l.push("old"):_===g+p&&l.push("new"),t.inArray(_,y)!==-1&&l.push("active"),(_<s||_>a)&&l.push("disabled"),_===v&&l.push("focused"),u!==t.noop&&(h=u(new Date(_,0,1)),h===e?h={}:"boolean"==typeof h?h={enabled:h}:"string"==typeof h&&(h={classes:h}),h.enabled===!1&&l.push("disabled"),h.classes&&(l=l.concat(h.classes.split(/\s+/))),h.tooltip&&(c=h.tooltip)),d+='<span class="'+l.join(" ")+'"'+(c?' title="'+c+'"':"")+">"+_+"</span>";f.find(".datepicker-switch").text(m+"-"+g),f.find("td").html(d)},fill:function(){var i,r,o=new Date(this.viewDate),s=o.getUTCFullYear(),a=o.getUTCMonth(),u=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),l=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,d=g[this.o.language].today||g.en.today||"",p=g[this.o.language].clear||g.en.clear||"",f=g[this.o.language].titleFormat||g.en.titleFormat;if(!isNaN(s)&&!isNaN(a)){this.picker.find(".datepicker-days .datepicker-switch").text(v.formatDate(o,f,this.o.language)),this.picker.find("tfoot .today").text(d).css("display",this.o.todayBtn===!0||"linked"===this.o.todayBtn?"table-cell":"none"),this.picker.find("tfoot .clear").text(p).css("display",this.o.clearBtn===!0?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var m=n(s,a,0),y=m.getUTCDate();m.setUTCDate(y-(m.getUTCDay()-this.o.weekStart+7)%7);var _=new Date(m);m.getUTCFullYear()<100&&_.setUTCFullYear(m.getUTCFullYear()),_.setUTCDate(_.getUTCDate()+42),_=_.valueOf();for(var b,w,x=[];m.valueOf()<_;){if(b=m.getUTCDay(),b===this.o.weekStart&&(x.push("<tr>"),this.o.calendarWeeks)){var k=new Date(+m+(this.o.weekStart-b-7)%7*864e5),$=new Date(Number(k)+(11-k.getUTCDay())%7*864e5),E=new Date(Number(E=n($.getUTCFullYear(),0,1))+(11-E.getUTCDay())%7*864e5),C=($-E)/864e5/7+1;x.push('<td class="cw">'+C+"</td>")}w=this.getClassNames(m),w.push("day");var T=m.getUTCDate();this.o.beforeShowDay!==t.noop&&(r=this.o.beforeShowDay(this._utc_to_local(m)),r===e?r={}:"boolean"==typeof r?r={enabled:r}:"string"==typeof r&&(r={classes:r}),r.enabled===!1&&w.push("disabled"),r.classes&&(w=w.concat(r.classes.split(/\s+/))),r.tooltip&&(i=r.tooltip),r.content&&(T=r.content)),w=t.isFunction(t.uniqueSort)?t.uniqueSort(w):t.unique(w),x.push('<td class="'+w.join(" ")+'"'+(i?' title="'+i+'"':"")+' data-date="'+m.getTime().toString()+'">'+T+"</td>"),i=null,b===this.o.weekEnd&&x.push("</tr>"),m.setUTCDate(m.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(x.join(""));var L=g[this.o.language].monthsTitle||g.en.monthsTitle||"Months",S=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?L:s).end().find("tbody span").removeClass("active");if(t.each(this.dates,function(t,e){e.getUTCFullYear()===s&&S.eq(e.getUTCMonth()).addClass("active")}),(s<u||s>c)&&S.addClass("disabled"),s===u&&S.slice(0,l).addClass("disabled"),s===c&&S.slice(h+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var D=this;t.each(S,function(n,i){var r=new Date(s,n,1),o=D.o.beforeShowMonth(r);o===e?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),o.enabled!==!1||t(i).hasClass("disabled")||t(i).addClass("disabled"),o.classes&&t(i).addClass(o.classes),o.tooltip&&t(i).prop("title",o.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,s,u,c,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,s,u,c,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,s,u,c,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var t,e,n=new Date(this.viewDate),i=n.getUTCFullYear(),r=n.getUTCMonth(),o=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),s=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),a=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,u=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,l=1;switch(this.viewMode){case 4:l*=10;case 3:l*=10;case 2:l*=10;case 1:t=Math.floor(i/l)*l<o,e=Math.floor(i/l)*l+l>a;break;case 0:t=i<=o&&r<s,e=i>=a&&r>u}this.picker.find(".prev").toggleClass("disabled",t),this.picker.find(".next").toggleClass("disabled",e)}},click:function(e){e.preventDefault(),e.stopPropagation();var r,o,s,a;r=t(e.target),r.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),r.hasClass("today")&&!r.hasClass("day")&&(this.setViewMode(0),this._setDate(i(),"linked"===this.o.todayBtn?null:"view")),r.hasClass("clear")&&this.clearDates(),r.hasClass("disabled")||(r.hasClass("month")||r.hasClass("year")||r.hasClass("decade")||r.hasClass("century"))&&(this.viewDate.setUTCDate(1),o=1,1===this.viewMode?(a=r.parent().find("span").index(r),s=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(a)):(a=0,s=Number(r.text()),this.viewDate.setUTCFullYear(s)),this._trigger(v.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(n(s,a,o)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(e){var n=t(e.currentTarget),i=n.data("date"),r=new Date(i);this.o.updateViewDate&&(r.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),r.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(r)},navArrowsClick:function(e){var n=t(e.currentTarget),i=n.hasClass("prev")?-1:1;0!==this.viewMode&&(i*=12*v.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,i),this._trigger(v.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),e!==-1?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):this.o.multidate===!1?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),(!e&&this.o.updateViewDate||"view"===e)&&(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var n=new Date(t);return n.setUTCDate(t.getUTCDate()+e),n},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!s(t))return this.o.defaultViewDate;if(!e)return t;var n,i,r=new Date(t.valueOf()),o=r.getUTCDate(),a=r.getUTCMonth(),u=Math.abs(e);if(e=e>0?1:-1,1===u)i=e===-1?function(){return r.getUTCMonth()===a;
}:function(){return r.getUTCMonth()!==n},n=a+e,r.setUTCMonth(n),n=(n+12)%12;else{for(var l=0;l<u;l++)r=this.moveMonth(r,e);n=r.getUTCMonth(),r.setUTCDate(o),i=function(){return n!==r.getUTCMonth()}}for(;i();)r.setUTCDate(--o),r.setUTCMonth(n);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,n){do{if(t=this[n](t,e),!this.dateWithinRange(t))return!1;n="moveDay"}while(this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(e){return t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)!==-1},dateIsDisabled:function(e){return this.weekOfDateIsDisabled(e)||t.grep(this.o.datesDisabled,function(t){return r(e,t)}).length>0},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(!this.picker.is(":visible"))return void(40!==t.keyCode&&27!==t.keyCode||(this.show(),t.stopPropagation()));var e,n,i=!1,r=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault(),t.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1,0===this.viewMode?t.ctrlKey?(n=this.moveAvailableDate(r,e,"moveYear"),n&&this._trigger("changeYear",this.viewDate)):t.shiftKey?(n=this.moveAvailableDate(r,e,"moveMonth"),n&&this._trigger("changeMonth",this.viewDate)):37===t.keyCode||39===t.keyCode?n=this.moveAvailableDate(r,e,"moveDay"):this.weekOfDateIsDisabled(r)||(n=this.moveAvailableDate(r,e,"moveWeek")):1===this.viewMode?(38!==t.keyCode&&40!==t.keyCode||(e=4*e),n=this.moveAvailableDate(r,e,"moveMonth")):2===this.viewMode&&(38!==t.keyCode&&40!==t.keyCode||(e=4*e),n=this.moveAvailableDate(r,e,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 13:if(!this.o.forceParse)break;r=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(r),i=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),t.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}i&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))},setViewMode:function(t){this.viewMode=t,this.picker.children("div").hide().filter(".datepicker-"+v.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var h=function(e,n){t.data(e,"datepicker",this),this.element=t(e),this.inputs=t.map(n.inputs,function(t){return t.jquery?t[0]:t}),delete n.inputs,this.keepEmptyValues=n.keepEmptyValues,delete n.keepEmptyValues,p.call(t(this.inputs),n).on("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t.data(e,"datepicker")}),this.updateDates()};h.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,n){n.setRange(e)})},clearDates:function(){t.each(this.pickers,function(t,e){e.clearDates()})},dateUpdated:function(n){if(!this.updating){this.updating=!0;var i=t.data(n.target,"datepicker");if(i!==e){var r=i.getUTCDate(),o=this.keepEmptyValues,s=t.inArray(n.target,this.inputs),a=s-1,u=s+1,l=this.inputs.length;if(s!==-1){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e!==i&&o||e.setUTCDate(r)}),r<this.dates[a])for(;a>=0&&r<this.dates[a];)this.pickers[a--].setUTCDate(r);else if(r>this.dates[u])for(;u<l&&r>this.dates[u];)this.pickers[u++].setUTCDate(r);this.updateDates(),delete this.updating}}}},destroy:function(){t.map(this.pickers,function(t){t.destroy()}),t(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:o("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var d=t.fn.datepicker,p=function(n){var i=Array.apply(null,arguments);i.shift();var r;if(this.each(function(){var e=t(this),o=e.data("datepicker"),s="object"==typeof n&&n;if(!o){var l=a(this,"date"),d=t.extend({},f,l,s),p=u(d.language),m=t.extend({},f,p,l,s);e.hasClass("input-daterange")||m.inputs?(t.extend(m,{inputs:m.inputs||e.find("input").toArray()}),o=new h(this,m)):o=new c(this,m),e.data("datepicker",o)}"string"==typeof n&&"function"==typeof o[n]&&(r=o[n].apply(o,i))}),r===e||r instanceof c||r instanceof h)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return r};t.fn.datepicker=p;var f=t.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,beforeShowYear:t.noop,beforeShowDecade:t.noop,beforeShowCentury:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},m=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=c;var g=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},v={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(n,r,o,s){function a(t,e){return e===!0&&(e=10),t<100&&(t+=2e3,t>(new Date).getFullYear()+e&&(t-=100)),t}function u(){var t=this.slice(0,l[p].length),e=l[p].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(!n)return e;if(n instanceof Date)return n;if("string"==typeof r&&(r=v.parseFormat(r)),r.toValue)return r.toValue(n,r,o);var l,h,d,p,f,m={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},y={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(n in y&&(n=y[n]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(n)){for(l=n.match(/([\-+]\d+)([dmwy])/gi),n=new Date,p=0;p<l.length;p++)h=l[p].match(/([\-+]\d+)([dmwy])/i),d=Number(h[1]),f=m[h[2].toLowerCase()],n=c.prototype[f](n,d);return c.prototype._zero_utc_time(n)}l=n&&n.match(this.nonpunctuation)||[];var _,b,w={},x=["yyyy","yy","M","MM","m","mm","d","dd"],k={yyyy:function(t,e){return t.setUTCFullYear(s?a(e,s):e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};k.yy=k.yyyy,k.M=k.MM=k.mm=k.m,k.dd=k.d,n=i();var $=r.parts.slice();if(l.length!==$.length&&($=t($).filter(function(e,n){return t.inArray(n,x)!==-1}).toArray()),l.length===$.length){var E;for(p=0,E=$.length;p<E;p++){if(_=parseInt(l[p],10),h=$[p],isNaN(_))switch(h){case"MM":b=t(g[o].months).filter(u),_=t.inArray(b[0],g[o].months)+1;break;case"M":b=t(g[o].monthsShort).filter(u),_=t.inArray(b[0],g[o].monthsShort)+1}w[h]=_}var C,T;for(p=0;p<x.length;p++)T=x[p],T in w&&!isNaN(w[T])&&(C=new Date(n),k[T](C,w[T]),isNaN(C)||(n=C))}return n},formatDate:function(e,n,i){if(!e)return"";if("string"==typeof n&&(n=v.parseFormat(n)),n.toDisplay)return n.toDisplay(e,n,i);var r={d:e.getUTCDate(),D:g[i].daysShort[e.getUTCDay()],DD:g[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:g[i].monthsShort[e.getUTCMonth()],MM:g[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,e=[];for(var o=t.extend([],n.separators),s=0,a=n.parts.length;s<=a;s++)o.length&&e.push(o.shift()),e.push(r[n.parts[s]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+f.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+f.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=v,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=d,this},t.fn.datepicker.version="1.8.0",t.fn.datepicker.deprecated=function(t){var e=window.console;e&&e.warn&&e.warn("DEPRECATED: "+t)},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),p.call(n,"show"))}),t(function(){p.call(t('[data-provide="datepicker-inline"]'))})})},{jquery:72}],5:[function(t,e,n){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof n?t("jquery"):jQuery)}(function(t,e){function n(e,n){if(a[e]){var r=i(this),o=a[e].apply(r,n);return"undefined"==typeof o?t(this):o}throw new Error("method '"+e+"()' does not exist for slider.")}function i(e){var n=t(e).data("slider");if(n&&n instanceof s)return n;throw new Error(o.callingContextNotSliderInstance)}function r(e){var n=t(this);return n.each(function(){var n=t(this),i=n.data("slider"),r="object"==typeof e&&e;i&&!r&&(r={},t.each(t.fn.slider.defaults,function(t){r[t]=i[t]})),n.data("slider",new s(this,t.extend({},t.fn.slider.defaults,r)))}),n}var o={formatInvalidInputErrorMsg:function(t){return"Invalid input value '"+t+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},s=function(n,i){var r=this.element=t(n).hide(),o=t(n)[0].style.width,s=!1,a=this.element.next(".widget");switch(a.hasClass("slider")===!0?(s=!0,this.widget=a):this.widget=t('<div class="widget"><div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div></div></div>').insertAfter(this.element),this.picker=this.widget.find(".slider"),this.id=this.element.data("slider-id")||i.id,this.id&&(this.widget[0].id=this.id),("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&(this.touchCapable=!0),s===!0&&(this.widget.removeClass("slider-horizontal"),this.widget.removeClass("slider-vertical")),this.orientation=this.element.data("slider-orientation")||i.orientation,this.orientation){case"vertical":this.widget.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight";break;default:this.widget.addClass("slider-horizontal").css("width",o),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"}var u=this;switch(t.each(["min","max","step","precision","value","reversed","handle"],function(t,e){"undefined"!=typeof r.data("slider-"+e)?u[e]=r.data("slider-"+e):"undefined"!=typeof i[e]?u[e]=i[e]:"undefined"!=typeof r.prop(e)?u[e]=r.prop(e):u[e]=0}),this.value instanceof Array?s&&!this.range?this.value=this.value[0]:this.range=!0:this.range&&(this.value=[this.value,this.max]),this.selection=this.element.data("slider-selection")||i.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style,s===!0&&(this.handle1.removeClass("round triangle"),this.handle2.removeClass("round triangle hide")),this.handle){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=i.formater,this.setValue(this.value),this.handle1.on({keydown:t.proxy(this.keydown,this,0)}),this.handle2.on({keydown:t.proxy(this.keydown,this,1)}),this.touchCapable&&this.picker.on({touchstart:t.proxy(this.mousedown,this)}),this.picker.on({mousedown:t.proxy(this.mousedown,this)}),this.enabled=i.enabled&&(this.element.data("slider-enabled")===e||this.element.data("slider-enabled")===!0),this.enabled?this.enable():this.disable(),this.natural_arrow_keys=this.element.data("slider-natural_arrow_keys")||i.natural_arrow_keys};s.prototype={constructor:s,over:!1,inDrag:!1,layout:function(){var t;t=this.reversed?[100-this.percentage[0],this.percentage[1]]:[this.percentage[0],this.percentage[1]],this.handle1Stype[this.stylePos]=t[0]+"%",this.handle2Stype[this.stylePos]=t[1]+"%","vertical"===this.orientation?(this.selectionElStyle.top=Math.min(t[0],t[1])+"%",this.selectionElStyle.height=Math.abs(t[0]-t[1])+"%"):(this.selectionElStyle.left=Math.min(t[0],t[1])+"%",this.selectionElStyle.width=Math.abs(t[0]-t[1])+"%")},mousedown:function(e){if(!this.isEnabled())return!1;this.touchCapable&&"touchstart"===e.type&&(e=e.originalEvent),this.triggerFocusOnHandle(),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var n=this.getPercentage(e);if(this.range){var i=Math.abs(this.percentage[0]-n),r=Math.abs(this.percentage[1]-n);this.dragged=i<r?0:1}else this.dragged=0;this.percentage[this.dragged]=this.reversed?100-n:n,this.layout(),this.touchCapable&&t(document).on({touchmove:t.proxy(this.mousemove,this),touchend:t.proxy(this.mouseup,this)}),t(document).on({mousemove:t.proxy(this.mousemove,this),mouseup:t.proxy(this.mouseup,this)}),this.inDrag=!0;var o=this.calculateValue();return this.element.trigger({type:"slideStart",value:o}).data("value",o).prop("value",o),this.setValue(o),!0},triggerFocusOnHandle:function(t){0===t&&this.handle1.focus(),1===t&&this.handle2.focus()},keydown:function(t,e){if(!this.isEnabled())return!1;var n;switch(e.which){case 37:case 40:n=-1;break;case 39:case 38:n=1}if(n){this.natural_arrow_keys&&("vertical"===this.orientation&&!this.reversed||"horizontal"===this.orientation&&this.reversed)&&(n*=-1);var i=n*this.percentage[2],r=this.percentage[t]+i;r>100?r=100:r<0&&(r=0),this.dragged=t,this.adjustPercentageForRangeSliders(r),this.percentage[this.dragged]=r,this.layout();var o=this.calculateValue();return this.element.trigger({type:"slideStart",value:o}).data("value",o).prop("value",o),this.setValue(o,!0),this.element.trigger({type:"slideStop",value:o}).data("value",o).prop("value",o),!1}},mousemove:function(t){if(!this.isEnabled())return!1;this.touchCapable&&"touchmove"===t.type&&(t=t.originalEvent);var e=this.getPercentage(t);this.adjustPercentageForRangeSliders(e),this.percentage[this.dragged]=this.reversed?100-e:e,this.layout();var n=this.calculateValue();return this.setValue(n,!0),!1},adjustPercentageForRangeSliders:function(t){this.range&&(0===this.dragged&&this.percentage[1]<t?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>t&&(this.percentage[1]=this.percentage[0],this.dragged=0))},mouseup:function(){if(!this.isEnabled())return!1;this.touchCapable&&t(document).off({touchmove:this.mousemove,touchend:this.mouseup}),t(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1;var e=this.calculateValue();return this.layout(),this.element.data("value",e).prop("value",e).trigger({type:"slideStop",value:e}),!1},calculateValue:function(){var t;return this.range?(t=[this.min,this.max],0!==this.percentage[0]&&(t[0]=Math.max(this.min,this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step),t[0]=this.applyPrecision(t[0])),100!==this.percentage[1]&&(t[1]=Math.min(this.max,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step),t[1]=this.applyPrecision(t[1])),this.value=t):(t=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,t<this.min?t=this.min:t>this.max&&(t=this.max),t=parseFloat(t),t=this.applyPrecision(t),this.value=[t,this.value[1]]),t},applyPrecision:function(t){var e=this.precision||this.getNumDigitsAfterDecimalPlace(this.step);return this.applyToFixedAndParseFloat(t,e)},getNumDigitsAfterDecimalPlace:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},applyToFixedAndParseFloat:function(t,e){var n=t.toFixed(e);return parseFloat(n)},getPercentage:function(t){!this.touchCapable||"touchstart"!==t.type&&"touchmove"!==t.type||(t=t.touches[0]);var e=100*(t[this.mousePos]-this.offset[this.stylePos])/this.size;return e=Math.round(e/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,e))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(t,e){if(t||(t=0),this.value=this.validateInputValue(t),this.range?(this.value[0]=this.applyPrecision(this.value[0]),this.value[1]=this.applyPrecision(this.value[1]),this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=this.applyPrecision(this.value),this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"===this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.diff>0?this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff]:this.percentage=[0,0,100],this.layout(),e===!0){var n=this.range?this.value:this.value[0];this.element.trigger({type:"slide",value:n}).data("value",n).prop("value",n)}},validateInputValue:function(e){if("number"==typeof e)return e;if(e instanceof Array)return t.each(e,function(t,e){if("number"!=typeof e)throw new Error(o.formatInvalidInputErrorMsg(e))}),e;throw new Error(o.formatInvalidInputErrorMsg(e))},destroy:function(){this.handle1.off(),this.handle2.off(),this.element.off().show(),this.picker.off().remove(),t(this.element).removeData("slider")},disable:function(){this.enabled=!1,this.handle1.removeAttr("tabindex"),this.handle2.removeAttr("tabindex"),this.picker.addClass("slider-disabled"),this.element.trigger("slideDisabled")},enable:function(){this.enabled=!0,this.handle1.attr("tabindex",0),this.handle2.attr("tabindex",0),this.picker.removeClass("slider-disabled"),this.element.trigger("slideEnabled")},toggle:function(){this.enabled?this.disable():this.enable()},isEnabled:function(){return this.enabled},setAttribute:function(t,e){this[t]=e},getAttribute:function(t){return this[t]}};var a={getValue:s.prototype.getValue,setValue:s.prototype.setValue,setAttribute:s.prototype.setAttribute,getAttribute:s.prototype.getAttribute,destroy:s.prototype.destroy,disable:s.prototype.disable,enable:s.prototype.enable,toggle:s.prototype.toggle,isEnabled:s.prototype.isEnabled};t.fn.slider=function(t){if("string"==typeof t&&"refresh"!==t){var e=Array.prototype.slice.call(arguments,1);return n.call(this,t,e)}return r.call(this,t)},t.fn.slider.defaults={min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",natural_arrow_keys:!1,handle:"round",reversed:!1,enabled:!0,formater:function(t){return t}},t.fn.slider.Constructor=s})},{jquery:72}],6:[function(t,e,n){e.exports={maps:[{tiles:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],name:"streets",attribution:'© <a href="http://openstreetmap.org">OpenStreetMap</a> | <a href="www.openstreetmap.org/copyright">Terms</a>'},{tiles:"GOOGLE_SATELLITE",name:"satellite"}],googleApiKey:"",repeatOrdinals:!1,validateContinuously:!1,validatePage:!0,swipePage:!0,arcGis:{jsUrl:"",cssUrl:"",webMapId:"",hasZ:!0,basemaps:["streets"]}}},{}],7:[function(t,e,n){"use strict";function i(){}function r(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,t!==i&&u(this,t)}function o(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function s(t,e,n){f(function(){var i;try{i=e(n)}catch(r){return m.reject(t,r)}i===t?m.reject(t,new TypeError("Cannot resolve promise with itself")):m.resolve(t,i)})}function a(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function u(t,e){function n(e){o||(o=!0,m.reject(t,e))}function i(e){o||(o=!0,m.resolve(t,e))}function r(){e(i,n)}var o=!1,s=l(r);"error"===s.status&&n(s.value)}function l(t,e){var n={};try{n.value=t(e),n.status="success"}catch(i){n.status="error",n.value=i}return n}function c(t){return t instanceof this?t:m.resolve(new this(i),t)}function h(t){var e=new this(i);return m.reject(e,t)}function d(t){function e(t,e){function i(t){s[e]=t,++a!==r||o||(o=!0,m.resolve(l,s))}n.resolve(t).then(i,function(t){o||(o=!0,m.reject(l,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,o=!1;if(!r)return this.resolve([]);for(var s=new Array(r),a=0,u=-1,l=new this(i);++u<r;)e(t[u],u);return l}function p(t){function e(t){n.resolve(t).then(function(t){o||(o=!0,m.resolve(a,t))},function(t){o||(o=!0,m.reject(a,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,o=!1;if(!r)return this.resolve([]);for(var s=-1,a=new this(i);++s<r;)e(t[s]);return a}var f=t("immediate"),m={},g=["REJECTED"],v=["FULFILLED"],y=["PENDING"];e.exports=r,r.prototype["finally"]=function(t){function e(e){function n(){return e}return i.resolve(t()).then(n)}function n(e){function n(){throw e}return i.resolve(t()).then(n)}if("function"!=typeof t)return this;var i=this.constructor;return this.then(e,n)},r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){if("function"!=typeof t&&this.state===v||"function"!=typeof e&&this.state===g)return this;var n=new this.constructor(i);if(this.state!==y){var r=this.state===v?t:e;s(n,r,this.outcome)}else this.queue.push(new o(n,t,e));return n},o.prototype.callFulfilled=function(t){m.resolve(this.promise,t)},o.prototype.otherCallFulfilled=function(t){s(this.promise,this.onFulfilled,t)},o.prototype.callRejected=function(t){m.reject(this.promise,t)},o.prototype.otherCallRejected=function(t){s(this.promise,this.onRejected,t)},m.resolve=function(t,e){var n=l(a,e);if("error"===n.status)return m.reject(t,n.value);var i=n.value;if(i)u(t,i);else{t.state=v,t.outcome=e;for(var r=-1,o=t.queue.length;++r<o;)t.queue[r].callFulfilled(e)}return t},m.reject=function(t,e){t.state=g,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},r.resolve=c,r.reject=h,r.all=d,r.race=p},{immediate:69}],8:[function(t,e,n){"use strict";function i(t){this.message=t||"unknown",this.name="FormLogicError",this.stack=(new Error).stack}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,e.exports=i},{}],9:[function(t,e,n){(function(n){"use strict";var i=t("mergexml/mergexml"),r=t("./utils"),o=t("jquery"),s=t("lie"),a=t("./Form-logic-error"),u=t("enketo/config"),l=t("./types"),c="repeat:/",h=/instance\(\s*(["'])((?:(?!\1)[A-z0-9.\-_]+))\1\s*\)/g,d=/(decimal-date-time\(|pow\(|indexed-repeat\(|format-date\(|coalesce\(|join\(|max\(|min\(|random\(|substr\(|int\(|uuid\(|regex\(|now\(|today\(|date\(|if\(|boolean-from-string\(|checklist\(|selected\(|selected-at\(|round\(|area\(|position\([^)])/,p="http://openrosa.org/xforms",f="http://openrosa.org/javarosa",m="http://enketo.org/xforms";t("./extend");var g,v;g=function(t,e){"string"==typeof t&&(t={modelStr:t}),t.external=t.external||[],t.submitted="undefined"==typeof t.submitted||t.submitted,e=e||{},e.full="undefined"==typeof e.full||e.full,this.$events=o("<div/>"),this.convertedExpressions={},this.templates={},this.loadErrors=[],this.data=t,this.options=e,this.namespaces={}},g.prototype={get version(){return this.evaluate("/node()/@version","string",null,null,!0)},get instanceID(){return this.getMetaNode("instanceID").getVal()[0]},get deprecatedID(){return this.getMetaNode("deprecatedID").getVal()[0]||""},get instanceName(){return this.getMetaNode("instanceName").getVal()[0]}},g.prototype.init=function(){var t,e,i,r,s=this;this.data.modelStr=this.data.modelStr.replace(/\s(xmlns=("|')[^\s>]+("|'))/g," data-$1"),this.options.full||(this.data.modelStr=this.data.modelStr.replace(/^(<model\s*><instance((?!<instance).)+<\/instance\s*>\s*)(<instance.+<\/instance\s*>)*/,"$1"));try{t="model",this.xml=o.parseXML(this.data.modelStr),this.data.external.forEach(function(a){for(t='instance "'+a.id+'"'||"instance unknown",i=s.getSecondaryInstance(a.id),r=i.childNodes,e=r.length-1;e>=0;e--)i.removeChild(r[e]);var u;"string"==typeof a.xml||a.xmlStr?(console.deprecate("External instance provided as string","provide external instance as XML Document"),u=o.parseXML(a.xml||a.xmlStr).firstChild):a.xml instanceof XMLDocument&&(u=n.navigator.userAgent.indexOf("Trident/")>=0?s.importNode(a.xml.documentElement,!0):s.xml.adoptNode(a.xml.documentElement,!0)),u&&i.appendChild(u)}),this.createSession("__session",this.data.session)}catch(a){console.error("parseXML error"),this.loadErrors.push("Error trying to parse XML "+t+". "+a.message)}if(this.xml){try{this.$=o(this.xml),this.hasInstance=!!this.xml.querySelector("model > instance"),this.rootElement=this.xml.querySelector("instance > *")||this.xml.documentElement,this.setNamespaces(),this.getMetaNode("instanceID").get().get(0)||s.loadErrors.push("Invalid primary instance. Missing instanceID node."),this.$.find("model > instance[src]:empty").each(function(t,e){s.loadErrors.push('External instance "'+o(e).attr("id")+'" is empty.')}),this.trimValues(),this.extractTemplates()}catch(a){console.error(a),this.loadErrors.push(a.name+": "+a.message)}try{t="record",this.data.instanceStr&&this.mergeXml(this.data.instanceStr),this.setInstanceIdAndDeprecatedId()}catch(a){console.error(a),this.loadErrors.push("Error trying to parse XML "+t+". "+a.message)}}return this.loadErrors},g.prototype.createSession=function(t,e){var n,i,s=this.xml.querySelector("model"),a=["deviceid","username","email","phonenumber","simserial","subscriberid"];s&&(e="object"==typeof e?e:{},n=s.querySelector('instance[id="'+t+'"]'),n||(n=o.parseXML('<instance id="'+t+'"/>').documentElement,this.xml.adoptNode(n),s.appendChild(n)),a.forEach(function(t){e[t]=e[t]||r.readCookie("__enketo_meta_"+t)||t+" not found"}),i=o.parseXML("<session><context>"+a.map(function(t){return"<"+t+">"+e[t]+"</"+t+">"}).join("")+"</context></session>").documentElement,this.xml.adoptNode(i),n.appendChild(i))},g.prototype.getSecondaryInstance=function(t){var e;return[].slice.call(this.xml.querySelectorAll("model > instance")).some(function(n){var i=n.getAttribute("id");return i===t&&(e=n,!0)}),e},g.prototype.node=function(t,e,n){return new v(t,e,n,this)},g.prototype.importNode=function(t,e){var n,i;switch(t.nodeType){case document.ELEMENT_NODE:var r=document.createElementNS(t.namespaceURI,t.nodeName);if(t.attributes&&t.attributes.length>0)for(n=0,i=t.attributes.length;n<i;n++){var o=t.attributes[n];o.namespaceURI?r.setAttributeNS(o.namespaceURI,o.nodeName,t.getAttributeNS(o.namespaceURI,o.localName)):r.setAttribute(o.nodeName,t.getAttribute(o.nodeName))}if(e&&t.childNodes&&t.childNodes.length>0)for(n=0,i=t.childNodes.length;n<i;n++)r.appendChild(this.importNode(t.childNodes[n],e));return r;case document.TEXT_NODE:case document.CDATA_SECTION_NODE:case document.COMMENT_NODE:return document.createTextNode(t.nodeValue)}},g.prototype.mergeXml=function(t){var e,r,s,a,u,l,c,h,d=this;if(t){if(s=this.xml.querySelector("instance"),a=this.xml.querySelector("instance > *"),!a)throw new Error("Model is corrupt. It does not contain a childnode of instance");t=t.replace(/\s(xmlns=("|')[^\s>]+("|'))/g,""),t=t.replace(/<!--[^>]*-->/g,""),c=o.parseXML(t),h=o(c),l=c.querySelectorAll("[*|template]");for(var p=0;p<l.length;p++)o(l[p]).remove();if(h.find("*").each(function(){var t,e,n,i=this,r=0;try{t=d.getXPath(i,"instance",!1),("undefined"!=typeof d.templates[t]||d.getRepeatIndex(i)>0)&&(e=d.getXPath(i,"instance",!0),d.evaluate(e,"node",null,null,!0)||(n=e.match(/([^[]+)\[(\d+)\]\//g),n&&n.length>0&&(r=n[n.length-1].match(/\[(\d+)\]/)[1]-1),d.addRepeat(t,r,!0)))}catch(o){console.log("Ignored error:",o)}}),h.find("*").filter(function(){var t=this,e=t.textContent;return 0===t.childNodes.length&&0===e.trim().length}).each(function(){var t=d.getXPath(this,"instance",!0),e=d.node(t,0).get()[0];e&&(0===o(e).children().length?e.textContent="":d.evaluate(".//*[not(*)]","nodes",t,0,!0).forEach(function(t){t.textContent=""}))}),r=new i({join:!1}),e=(new XMLSerializer).serializeToString(a),t=(new XMLSerializer).serializeToString(c),r.AddSource(e),r.AddSource(t),r.error.code)throw new Error(r.error.text);u=o.parseXML(r.Get(1)),this.xml.querySelector("instance").removeChild(a),a=n.navigator.userAgent.indexOf("Trident/")>=0?this.importNode(u.documentElement,!0):this.xml.adoptNode(u.documentElement,!0),s.appendChild(a),this.rootElement=a}},g.prototype.getXPath=function(t,e,n){var i,r=[],o="",s=t.nodeName,a=t.parentNode,u=a.nodeName;for(e=e||"#document",n=n||!1,n&&(i=this.getRepeatIndex(t),i>0&&(o="["+(i+1)+"]")),r.push(s+o);a&&u!==e&&"#document"!==u;)n&&(i=this.getRepeatIndex(a),o=i>0?"["+(i+1)+"]":""),r.push(u+o),a=a.parentNode,u=a.nodeName;return"/"+r.reverse().join("/")},g.prototype.getRepeatIndex=function(t){for(var e=0,n=t.nodeName,i=t.previousSibling;i;)i.nodeName&&i.nodeName===n&&e++,i=i.previousSibling;return e},g.prototype.trimValues=function(){this.node(null,null,{noEmpty:!0}).get().each(function(){this.textContent=this.textContent.trim()})},g.prototype.setInstanceIdAndDeprecatedId=function(){var t,e,n,i,r;t=this.getMetaNode("instanceID"),e=t.get().get(0),r=t.getVal()[0],this.data.instanceStr&&this.data.submitted&&(n=this.getMetaNode("deprecatedID").get().get(0),e.textContent="",n||(n=o.parseXML("<deprecatedID/>").documentElement,
this.xml.adoptNode(n),i=this.xml.querySelector("* > meta"),i.appendChild(n))),t.getVal()[0]||t.setVal(this.evaluate('concat("uuid:", uuid())',"string")),n&&this.getMetaNode("deprecatedID").setVal(r)},g.prototype.bindJsEvaluator=t("./xpath-evaluator-binding"),g.prototype.getMetaNode=function(t){var e=this.getNamespacePrefix(p),n=this.node("/*/"+e+":meta/"+e+":"+t);return 0===n.get().length&&(n=this.node("/*/meta/"+t)),n},g.prototype.getRepeatCommentText=function(t){return t=t.trim(),c+t},g.prototype.getRepeatCommentEl=function(t,e){var n='//comment()[self::comment()="'+this.getRepeatCommentText(t)+'"]';return this.evaluate(n,"nodes",null,null,!0)[e]},g.prototype.addRepeat=function(t,e,n){var i,r,s,a,u=this;this.templates[t]||this.extractFakeTemplates([t]),a=this.templates[t],s=this.getRepeatSeries(t,e),i=o(s.length?s[s.length-1]:this.getRepeatCommentEl(t,e)),n||s.forEach(function(t){u.addOrdinalAttribute(t,s[0])}),a&&1===i.length?(r=o(a).clone().insertAfter(i),this.removeOrdinalAttributes(r[0]),n||this.addOrdinalAttribute(r[0],s[0]),n&&r.find("*").filter(function(){return 0===o(this).children().length}).text("")):console.error("Could not find template node and/or node to insert the clone after")},g.prototype.addOrdinalAttribute=function(t,e){var n,i,r=this.getNamespacePrefix(m);e=e||t,u.repeatOrdinals!==!0||t.getAttributeNS(m,"ordinal")||(n=e.getAttributeNS(m,"last-used-ordinal")||0,i=Number(n)+1,e.setAttributeNS(m,r+":last-used-ordinal",i),t.setAttributeNS(m,r+":ordinal",i))},g.prototype.removeOrdinalAttributes=function(t){if(u.repeatOrdinals===!0){var e=Array.prototype.slice.call(t.querySelectorAll("[*|ordinal]"));e.push(t);for(var n=0;n<e.length;n++)e[n].removeAttributeNS(m,"last-used-ordinal"),e[n].removeAttributeNS(m,"ordinal")}},g.prototype.getRepeatSeries=function(t,e){var n,i,r,o=this.getRepeatCommentEl(t,e),s=[];if(o)for(n=o.textContent.substr(c.length).split("/"),i=n[n.length-1],r=o.nextSibling;r;)r.nodeName&&r.nodeName===i&&s.push(r),r=r.nextSibling;return s},g.prototype.hasPreviousSiblingElementSameName=function(t){var e=!1,n=t.nodeName;for(t=t.previousSibling;t;){if(t.nodeName&&t.nodeName===n){e=!0;break}t=t.previousSibling}return e},g.prototype.hasPreviousCommentSiblingWithContent=function(t,e){var n=!1;for(t=t.previousSibling;t;){if(t.nodeType===Node.COMMENT_NODE&&t.textContent===e){n=!0;break}t=t.previousSibling}return n},g.prototype.determineIndex=function(t){var e,n,i,r=this;return 1===t.length?(e=t.prop("nodeName"),n=this.getXPath(t.get(0),"instance"),i=this.$.find(e.replace(/\./g,"\\.")).filter(function(){return n===r.getXPath(this,"instance")}),1===i.length?null:i.index(t)):(console.error("no node, or multiple nodes, provided to determineIndex function"),-1)},g.prototype.extractTemplates=function(){var t=this;this.getTemplateNodes().reverse().forEach(function(e){var n=t.getXPath(e,"instance");t.addTemplate(n,e),o(e).remove()})},g.prototype.extractFakeTemplates=function(t){var e,n=this;t.forEach(function(t){e=n.evaluate(t,"node",null,null,!0),e&&n.addTemplate(t,e,!0)})},g.prototype.addRepeatComments=function(t){var e=this.getRepeatCommentText(t),n=this;this.evaluate(t,"nodes",null,null,!0).forEach(function(t){n.hasPreviousSiblingElementSameName(t)||n.hasPreviousCommentSiblingWithContent(t,e)||o(t).before(document.createComment(e))})},g.prototype.addTemplate=function(t,e,n){var i;this.addRepeatComments(t),this.templates[t]||(i=o(e).clone().removeAttr("template").removeAttr("jr:template"),n&&i.find("*").filter(function(){return 0===o(this).children().length}).text(""),this.templates[t]=i[0])},g.prototype.getTemplateNodes=function(){var t=this.getNamespacePrefix(f);return this.evaluate("/model/instance[1]/*//*[@template] | /model/instance[1]/*//*[@"+t+":template]","nodes",null,null,!1)},g.prototype.getStr=function(){var t=(new XMLSerializer).serializeToString(this.xml.querySelector("instance > *")||this.xml.documentElement,"text/xml");return t=t.replace(/\s(data-)(xmlns=("|')[^\s>]+("|'))/g," $2"),t=t.replace(new RegExp("<!--"+c+"\\/[^>]+-->","g"),""),navigator.userAgent.indexOf("Trident/")===-1&&(t=this.removeDuplicateEnketoNsDeclarations(t)),t},g.prototype.removeDuplicateEnketoNsDeclarations=function(t){var e=0,n=new RegExp("( xmlns:"+this.getNamespacePrefix(m)+'="'+m+'")',"g");return t.replace(n,function(t){return e++,e>1?"":t})},g.prototype.makeBugCompliant=function(t,e,n){var i,r,o,s,a,u,l,c;for(s=this.node(e,n).get(),c=s.parents().add(s),i=c.length-1;i>=0;i--)a=c.eq(i),u=a.prop("nodeName").replace(/\./g,"\\."),l=a.siblings(u).not("[template]"),"instance"!==u.toLowerCase()&&"model"!==u.toLowerCase()&&l.length>0&&(r=this.getXPath(a.get(0),"instance"),o=l.add(a).index(a),t=t.replace(new RegExp(r+"/","g"),r+"["+(o+1)+"]/"));return t},g.prototype.setNamespaces=function(){var t,e=this.hasInstance?"/model/instance":"",n=this.evaluate(e+"/*","nodes",null,null,!0),i=this;n.forEach(function(e){if(e.hasAttributes())for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n];0===r.name.indexOf("xmlns:")&&(i.namespaces[r.name.substring(6)]=r.value)}[["orx",p,!1],["jr",f,!1],["enk",m,u.repeatOrdinals===!0]].forEach(function(n){i.getNamespacePrefix(n[1])||(t=i.namespaces[n[0]]?"__"+n[0]:n[0],i.namespaces[t]=n[1],n[2]&&e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+t,n[1]))})})},g.prototype.getNamespacePrefix=function(t){var e;for(var n in this.namespaces)if(this.namespaces.hasOwnProperty(n)&&this.namespaces[n]===t){e=n;break}return e},g.prototype.getNsResolver=function(){var t="undefined"==typeof this.namespaces?{}:this.namespaces;return{lookupNamespaceURI:function(e){return t[e]||null}}},g.prototype.shiftRoot=function(t){var e=/"([^"]*)(")|'([^']*)(')/g;return this.hasInstance&&(t=t.replace(e,function(t,e,n,i,r){var o="undefined"!=typeof e?encodeURIComponent(e):encodeURIComponent(i),s=n||r;return s+o+s}),t=t.replace(/^(\/(?!model\/)[^\/][^\/\s,"']*\/)/g,"/model/instance[1]$1"),t=t.replace(/([^a-zA-Z0-9.\])\/*_-])(\/(?!model\/)[^\/][^\/\s,"']*\/)/g,"$1/model/instance[1]$2"),t=t.replace(e,function(t,e,n,i,r){var o="undefined"!=typeof e?decodeURIComponent(e):decodeURIComponent(i),s=n||r;return s+o+s})),t},g.prototype.replaceInstanceFn=function(t){var e,n=this;return t.replace(h,function(t,i,r){if(e='/model/instance[@id="'+r+'"]',n.evaluate(e,"nodes",null,null,!0).length)return e;throw new a('instance "'+r+'" does not exist in model')})},g.prototype.replaceCurrentFn=function(t,e){return t=t.replace("current()/.",e+"/."),t=t.replace("current()/","/")},g.prototype.replaceIndexedRepeatFn=function(t,e,n){var i=this,o=r.parseFunctionFromExpression(t,"indexed-repeat");return o.forEach(function(r){var o,s,u,l=r[1];if(l.length%2!==1)throw new a("indexed repeat with incorrect number of parameters found: "+r[0]);for(s=l[0],o=l.length-1;o>1;o-=2)u=isNaN(l[o])?i.evaluate(l[o],"number",e,n,!0):l[o],s=s.replace(l[o-1],l[o-1]+"[position() = "+u+"]");t=t.replace(r[0],s)}),t},g.prototype.replaceVersionFn=function(t){var e,n=this,i=r.parseFunctionFromExpression(t,"version");return i.forEach(function(i){e=e||n.evaluate("/node()/@version","string",null,0,!0),t=t.replace(i[0],'"'+e+'"')}),t},g.prototype.replacePullDataFn=function(t,e,n){var i,r=this,o=this.convertPullDataFn(t,e,n);for(var s in o)o.hasOwnProperty(s)&&(i=r.evaluate(o[s],"string",e,n,!0),t=t.replace(s,'"'+i+'"'));return t},g.prototype.convertPullDataFn=function(t,e,n){var i=this,o=r.parseFunctionFromExpression(t,"pulldata"),s={};return o.length?(o.forEach(function(t){var o,u,l=t[1];if(4!==l.length)throw new a("pulldata with incorrect number of parameters found: "+t[0]);l[1]=r.stripQuotes(l[1]),l[2]=r.stripQuotes(l[2]),o=i.evaluate(l[3],"string",e,n,!0),o=""===o||isNaN(o)?"'"+o+"'":o,u="instance("+l[0]+")/root/item["+l[2]+" = "+o+"]/"+l[1],s[t[0]]=u}),s):s},g.prototype.evaluate=function(t,e,n,i,r){var o,s,u,l,c,h,p,f,m,g,v,y;v=t,r=r||!1,e=e||"any",i=i||0,u=this.xml,m=null,n?(p=this.node(n).get(),m=p.length,s=p.eq(i)[0]):s=this.rootElement,g=[t,n,i,m].join("|"),t=this.replaceIndexedRepeatFn(t,n,i),t=this.replacePullDataFn(t,n,i),y=v===t,this.convertedExpressions[g]?t=this.convertedExpressions[g]:(t=t.trim(),t=this.replaceInstanceFn(t),t=this.replaceVersionFn(t),t=this.replaceCurrentFn(t,this.getXPath(s,"instance",!0)),t=this.shiftRoot(t),m&&m>1&&(t=this.makeBugCompliant(t,n,i)),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&quot;/g,'"'),y&&(this.convertedExpressions[g]=t)),c={0:["any","ANY_TYPE"],1:["number","NUMBER_TYPE","numberValue"],2:["string","STRING_TYPE","stringValue"],3:["boolean","BOOLEAN_TYPE","booleanValue"],7:["nodes","ORDERED_NODE_SNAPSHOT_TYPE"],9:["node","FIRST_ORDERED_NODE_TYPE","singleNodeValue"]};for(l in c)if(c.hasOwnProperty(l)){if(l=Number(l),c[l][0]===e)break;l=0}if(r&&"undefined"!=typeof u.evaluate&&!d.test(t))try{h=u.evaluate(t,s,this.getNsResolver(),l,null)}catch(_){console.log("%cWell native XPath evaluation did not work... No worries, worth a shot, the expression probably contained unknown OpenRosa functions or errors:","color:orange",t)}if(!h)try{"undefined"==typeof u.jsEvaluate&&this.bindJsEvaluator(),h=u.jsEvaluate(t,s,this.getNsResolver(),l,null)}catch(_){throw new a("Could not evaluate: "+t+", message: "+_.message)}if(h){if(0===l){for(l in c)if(c.hasOwnProperty(l)&&(l=Number(l),l===Number(h.resultType)&&l>0&&l<4)){f=h[c[l][2]];break}console.error("Expression: "+t+" did not return any boolean, string or number value as expected")}else if(7===l)for(f=[],o=0;o<h.snapshotLength;o++)f.push(h.snapshotItem(o));else f=h[c[l][2]];return f}},v=function(t,e,n,i){var r=i.hasInstance?"/model/instance[1]//*":"//*";this.model=i,this.originalSelector=t,this.selector="string"==typeof t&&t.length>0?t:r,n="undefined"!=typeof n&&null!==n?n:{},this.filter=n,this.filter.onlyLeaf="undefined"!=typeof n.onlyLeaf&&n.onlyLeaf,this.filter.noEmpty="undefined"!=typeof n.noEmpty&&n.noEmpty,this.index=e},v.prototype.get=function(){var t,e;return this.nodes||(this.nodes=this.model.evaluate(this.selector,"nodes",null,null,!0)),t=this.filter.noEmpty===!0?o(this.nodes).filter(function(){var t=o(this);return e=t.text(),0===t.children().length&&e.trim().length>0}):this.filter.onlyLeaf===!0?o(this.nodes).filter(function(){return 0===o(this).children().length}):o(this.nodes),"undefined"!=typeof this.index&&null!==this.index?t.eq(this.index):t},v.prototype.setIndex=function(t){this.index=t},v.prototype.setVal=function(t,e,n,i,r){var s,a,l,c,h;return a=this.getVal()[0],l="undefined"!=typeof t&&null!==t?Array.isArray(t)?t.join(" "):t.toString():"",l=this.convert(l,n),s=this.get(),1===s.length&&l.toString().trim()!==a.toString().trim()?(s.text(l.toString()),c=this.getClosestRepeat(),c.nodes=[s.prop("nodeName")],h=this.model.getUpdateEventData(s.get(0),n),c=h?o.extend({},c,h):c,this.model.$events.trigger("dataupdate",c),u.validateContinuously&&r!==!0&&this.validate(e,i,n),"binary"===n&&(l.length>0?s.attr("type","file"):s.removeAttr("type")),c):s.length>1?(console.error("nodeset.setVal expected nodeset with one node, but received multiple"),null):0===s.length?(console.log("Data node: "+this.selector+" with null-based index: "+this.index+" not found. Ignored."),null):null},v.prototype.getVal=function(){var t=[];return this.get().each(function(){t.push(o(this).text())}),t},v.prototype.getClosestRepeat=function(){for(var t=this.get().get(0),e=t.nodeName;!("instance"===e||t.nextSibling&&t.nextSibling.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e);)t=t.parentNode,e=t.nodeName;return"instance"===e?{}:{repeatPath:this.model.getXPath(t,"instance"),repeatIndex:this.model.determineIndex(o(t))}},v.prototype.remove=function(){var t,e,n,i,r,o;if(t=this.get(),t.length>0){for(e=t.prop("nodeName"),n=this.model.getXPath(t.get(0),"instance"),i=this.model.determineIndex(t),r=this.model.getRemovalEventData(t.get(0)),this.model.templates[n]||this.model.extractFakeTemplates([n]),o=t.get(0).nextSibling,t.remove(),this.nodes=null,this.model.$events.trigger("dataupdate",{nodes:null,repeatPath:n,repeatIndex:i});o&&o.nodeName==e;)o=o.nextSibling,this.model.$events.trigger("dataupdate",{nodes:null,repeatPath:n,repeatIndex:i++});this.model.$events.trigger("removed",r)}else console.error("could not find node "+this.selector+" with index "+this.index+" to remove ")},v.prototype.convert=function(t,e){return""===t.toString()?t:"undefined"!=typeof e&&null!==e&&"undefined"!=typeof l[e.toLowerCase()]&&"undefined"!=typeof l[e.toLowerCase()].convert?l[e.toLowerCase()].convert(t):t},v.prototype.validate=function(t,e,n){var i=this,r={};return this.validateRequired(e).then(function(e){return r.requiredValid=e,e===!1?null:i.validateConstraintAndType(t,n)}).then(function(t){return r.constraintValid=t,r})},v.prototype.validateConstraintAndType=function(t,e){var n,i=this;return e&&"undefined"!=typeof l[e.toLowerCase()]||(e="string"),t||"string"!==e&&"select"!==e&&"select1"!==e&&"binary"!==e?(n=i.getVal()[0],""===n.toString()?s.resolve(!0):s.resolve().then(function(){return l[e.toLowerCase()].validate(n)}).then(function(e){var n=!("undefined"!=typeof t&&null!==t&&t.length>0)||i.model.evaluate(t,"boolean",i.originalSelector,i.index);return e&&n})):s.resolve(!0)},v.prototype.isRequired=function(t){return!(!t||"false()"===t.trim())&&("true()"===t.trim()||this.model.evaluate(t,"boolean",this.originalSelector,this.index))},v.prototype.validateRequired=function(t){var e=this;return!t||this.getVal()[0]?s.resolve(!0):s.resolve().then(function(){return!e.isRequired(t)})},g.prototype.getUpdateEventData=function(){},g.prototype.getRemovalEventData=function(){},g.prototype.types=l,e.exports=g,g.prototype.getVersion=function(){return console.warn("FormModel.getVersion() is deprecated, use model.version"),this.version},g.prototype.get=function(){return console.warn("model.get() is deprecated, use model.$"),this.$||null},g.prototype.getXML=function(){return console.warn("model.getXML() is deprecated, use model.xml"),this.xml||null},g.prototype.getInstanceID=function(){return console.warn("model.getInstanceID() is deprecated, use model.instanceID"),this.instanceID},g.prototype.getDeprecatedID=function(){return console.warn("model.getDeprecatedID() is deprecated, use model.deprecatedID"),this.deprecatedID},g.prototype.getInstanceName=function(){return console.warn("model.getInstanceName() is deprecated, use model.instanceName"),this.instanceName}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Form-logic-error":8,"./extend":15,"./types":32,"./utils":33,"./xpath-evaluator-binding":36,"enketo/config":6,jquery:72,lie:7,"mergexml/mergexml":78}],10:[function(t,e,n){"use strict";function i(t,e,n){var i=o(t);this.$nonRepeats={},this.$all={},this.options="object"!=typeof n?{}:n,"undefined"==typeof this.options.clearIrrelevantImmediately&&(this.options.clearIrrelevantImmediately=!0),this.view={$:i,html:i[0],$clone:i.clone()},this.model=new r(e),this.repeatsPresent=this.view.$.find(".or-repeat").length>0,this.widgetsInitialized=!1,this.pageNavigationBlocked=!1}var r=t("./Form-model"),o=t("jquery"),s=t("lie"),a=t("./utils"),u=t("enketo/translator").t,l=t("enketo/config"),c=t("./input"),h=t("./repeat"),d=t("./page"),p=t("./branch"),f=t("./itemset"),m=t("./progress"),g=t("./widgets-controller"),v=t("./language"),y=t("./preload"),_=t("./output"),b=t("./calculation"),w=t("./mask");t("./plugins"),t("./extend"),i.prototype={evaluationCascadeAdditions:[],get evaluationCascade(){return[this.calc.update.bind(this.calc),this.repeats.countUpdate.bind(this.repeats),this.branch.update.bind(this.branch),this.output.update.bind(this.output),this.itemset.update.bind(this.itemset),this.validationUpdate].concat(this.evaluationCascadeAdditions)},get recordName(){return this.view.$.attr("name")},set recordName(t){this.view.$.attr("name",t)},get editStatus(){return!!this.view.$.data("edited")},set editStatus(t){t&&t!==this.view.$.data("edited")&&this.view.$.trigger("edited.enketo"),this.view.$.data("edited",t)},get surveyName(){return this.view.$.find("#form-title").text()},get instanceID(){return this.model.instanceID},get deprecatedID(){return this.model.deprecatedID},get instanceName(){return this.model.instanceName},get version(){return this.model.version},get encryptionKey(){return this.view.$.data("base64rsapublickey")},get action(){return this.view.$.attr("action")},get method(){return this.view.$.attr("method")}},i.prototype.addModule=function(t){return Object.create(t,{form:{value:this}})},i.prototype.init=function(){var t=[],e=this;if(t=t.concat(this.model.init()),"undefined"==typeof this.model||!(this.model instanceof r))return t.push("Form could not be initialized without a model."),t;this.model.$events.on("dataupdate",function(t,n){e.view.$.trigger("dataupdate.enketo",n)}),this.model.$events.on("removed",function(t,n){e.view.$.trigger("removed.enketo",n)}),this.pages=this.addModule(d),this.langs=this.addModule(v),this.progress=this.addModule(m),this.widgets=this.addModule(g),this.preloads=this.addModule(y),this.branch=this.addModule(p),this.repeats=this.addModule(h),this.input=this.addModule(c),this.output=this.addModule(_),this.itemset=this.addModule(f),this.calc=this.addModule(b),this.mask=this.addModule(w);try{return this.preloads.init(),this.view.$.data({instanceID:this.model.instanceID}),this.grosslyViolateStandardComplianceByIgnoringCertainCalcs(),this.calc.update(),this.langs.init(),this.pages.init(),this.repeats.init(),this.itemset.update(),this.setAllVals(),this.options.input=this.input,this.options.pathToAbsolute=this.pathToAbsolute.bind(this),this.options.evaluate=this.model.evaluate.bind(this.model),this.options.formClasses=a.toArray(this.view.html.classList),this.widgetsInitialized=this.widgets.init(null,this.options),this.branch.update(),this.output.update(),this.setEventHandlers(),this.calc.update(),this.pages.init(),this.mask.init(),this.editStatus=!1,this.options.printRelevantOnly!==!1&&this.view.$.addClass("print-relevant-only"),setTimeout(function(){e.progress.update()},0),t}catch(n){console.error(n),t.push(n.name+": "+n.message)}return document.querySelector("body").scrollIntoView(),console.debug("loadErrors",t),t},i.prototype.goTo=function(t){var e=[];return this.goToTarget(this.getGoToTarget(t))||e.push(u("alert.gotonotfound.msg",{path:location.hash.substring(1)})),e},i.prototype.getDataStr=function(t){return t="object"!=typeof t||null===t?{}:t,t.irrelevant===!1?this.getDataStrWithoutIrrelevantNodes():this.model.getStr()},i.prototype.resetView=function(){o("#form-languages").remove(),this.view.$.replaceWith(this.view.$clone)},i.prototype.replaceChoiceNameFn=function(t,e,n,i,r){var s,a,u,l="",c=t.match(new RegExp("jr:choice-name\\(([^,]+),\\s*(?:\"([^\"]*)\"|'([^']*)')\\s*\\)"));return c?(s=this.model.evaluate(c[1],e,n,i,r),a=(c[2]||c[3]||"").trim(),u=this.view.$.find('[name="'+a+'"]'),u.length>0&&"select"===u.prop("nodeName").toLowerCase()?l=u.find('[value="'+s+'"]').text():u.length>0&&"input"===u.prop("nodeName").toLowerCase()&&(l=u.filter(function(){return o(this).attr("value")===s}).siblings(".option-label.active").text()),t.replace(c[0],'"'+l+'"')):t},i.prototype.setAllVals=function(t,e){var n=this,i=t&&t.attr("name")?t.attr("name"):null;e="undefined"!=typeof e?e:null,this.model.node(i,e).get().find("*").filter(function(){var t=o(this);return 0===t.children().length&&t.text()}).each(function(){try{var t=o(this),e=t.text(),i=n.model.getXPath(t.get(0),"instance"),r=n.model.node(i).get().index(this),s=n.input.setVal(i,r,e);o(s).closest(".question").removeClass("note")}catch(a){throw console.error(a),new Error("Could not load input field value with name: "+i+" and value: "+e)}})},i.prototype.getRelatedNodes=function(t,e,n){var i,r,s=null,a=[],u=this;n=n||{},e=e||"",this.$nonRepeats[t]||(r=this.view.$.find(":not(.or-repeat-info)["+t+"]").filter(function(){return 0===o(this).closest(".or-repeat").length}),this.$nonRepeats[t]=this.filterRadioCheckSiblings(r)),"undefined"!=typeof n.repeatPath&&n.repeatIndex>=0&&(r=this.view.$.find('.or-repeat[name="'+n.repeatPath+'"]').eq(n.repeatIndex).find("["+t+"]"),s=this.filterRadioCheckSiblings(r)),!this.$all[t]||n.repeatPath&&!n.cloned?this.$all[t]=this.filterRadioCheckSiblings(this.view.$.find("["+t+"]")):n.cloned&&s&&(this.$all[t]=this.$all[t].add(s)),i=s?this.$nonRepeats[t].add(s):this.$all[t],n.nodes&&0!==n.nodes.length?(n.nodes.forEach(function(n){a=a.concat(u.getQuerySelectorsForLogic(e,t,n))}),a=a.concat(u.getQuerySelectorsForLogic(e,t,"*"))):a=a.concat([e]);var l=a.join(", ");return i=l?i.filter(l):i},i.prototype.filterRadioCheckSiblings=function(t){var e=[];return t.filter(function(){var t="radio"===this.type||"checkbox"===this.type?o(this.parentNode).parent(".option-wrapper")[0]:null;if(t){if(e.indexOf(t)!==-1)return!1;e.push(t)}return!0})},i.prototype.getQuerySelectorsForLogic=function(t,e,n){return[t+"["+e+'*="/'+n+' "]',t+"["+e+'*="/'+n+')"]',t+"["+e+'*="/'+n+',"]',t+"["+e+'$="/'+n+'"]',t+"["+e+'*="/'+n+']"]']},i.prototype.getDataStrWithoutIrrelevantNodes=function(){var t=this,e=new r(this.model.getStr());return e.init(),this.getRelatedNodes("data-relevant").reverse().each(function(){var n,i=o(this),r=t.input.getRelevant(i),s=t.input.getIndex(i),a=t.input.getName(i);n=i.children('.or-repeat-info[data-name="'+a+'"]').length&&!i.children('.or-repeat[name="'+a+'"]').length?null:a,n&&!t.model.evaluate(r,"boolean",n,s)&&e.node(n,s).remove()}),e.getStr()},i.prototype.grosslyViolateStandardComplianceByIgnoringCertainCalcs=function(){var t=this.view.$.find('[name$="instanceID"][data-calculate]');t.length>0&&t.removeAttr("data-calculate")},i.prototype.validationUpdate=function(t){var e,n,i=this;l.validateContinuously===!0&&(n=t||{},t.cloned&&(n={nodes:t.repeatPath.split("/").reverse().slice(0,1)}),e=this.getRelatedNodes("data-constraint","",n).add(this.getRelatedNodes("data-required","",n)),e.each(function(){i.validateInput(o(this))}))},i.prototype.setEventHandlers=function(){var t=this;this.view.$.attr("onsubmit","return false;"),this.view.$.on("change.file","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(){var e,n=o(this),i={path:t.input.getName(n),inputType:t.input.getInputType(n),xmlType:t.input.getXmlType(n),enabled:t.input.isEnabled(n),constraint:t.input.getConstraint(n),val:t.input.getVal(n),required:t.input.getRequired(n),index:t.input.getIndex(n)};i.enabled&&"hidden"!==i.inputType&&i.required&&(e=i.required),i.val.length>0&&"file"===i.inputType&&n[0].files[0]&&n[0].files[0].size>0&&(i.val=a.getFilename(n[0].files[0],n[0].dataset.filenamePostfix)),i.val.length>0&&"drawing"===i.inputType&&(i.val=a.getFilename({name:i.val},n[0].dataset.filenamePostfix)),t.model.node(i.path,i.index).setVal(i.val,i.constraint,i.xmlType,e,!0),t.validateInput(n).then(function(t){n.trigger("valuechange.enketo",t)})}),this.view.$.on("focus fakefocus","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(e){t.progress.update(e.target)}),this.model.$events.on("dataupdate",function(e,n){t.evaluationCascade.forEach(function(e){e.call(t,n)}),t.editStatus=!0}),this.view.$.on("addrepeat",function(e,n){var i=o(e.target),r={repeatPath:i.attr("name"),repeatIndex:n,cloned:!0};t.setAllVals(i,n),t.evaluationCascade.forEach(function(e){e.call(t,r)}),t.progress.update()}),this.view.$.on("removerepeat",function(){t.progress.update()}),this.view.$.on("changelanguage",function(){t.output.update()}),this.view.$.find(".or-group > h4").on("click",function(){o(this).closest(".or-group").toggleClass("or-appearance-compact")})},i.prototype.setValid=function(t,e){var n=e?"invalid-"+e:"invalid-constraint invalid-required invalid-relevant";this.input.getWrapNodes(t).removeClass(n)},i.prototype.setInvalid=function(t,e){e=e||"constraint",l.validatePage===!1&&this.isValid(t)&&this.blockPageNavigation(),this.input.getWrapNodes(t).addClass("invalid-"+e)},i.prototype.blockPageNavigation=function(){var t=this;this.pageNavigationBlocked=!0,window.clearTimeout(this.blockPageNavigationTimeout),this.blockPageNavigationTimeout=window.setTimeout(function(){t.pageNavigationBlocked=!1},600)},i.prototype.isValid=function(t){var e;return t?(e=this.input.getWrapNodes(t),!e.hasClass("invalid-required")&&!e.hasClass("invalid-constraint")&&!e.hasClass("invalid-relevant")):0===this.view.$.find(".invalid-required, .invalid-constraint, .invalid-relevant").length},i.prototype.clearIrrelevant=function(){this.branch.update(null,!0)},i.prototype.validateAll=function(){var t=this;return this.options.clearIrrelevantImmediately===!1&&this.clearIrrelevant(),this.validateContent(this.view.$).then(function(e){return t.view.$.trigger("validationcomplete.enketo"),e})},i.prototype.validate=i.prototype.validateAll,i.prototype.validateContent=function(t){var e,n=this;t.find("fieldset:disabled input, fieldset:disabled select, fieldset:disabled textarea, input:disabled, select:disabled, textarea:disabled").each(function(){n.setValid(o(this))});var i=t.find(".question").addBack(".question").map(function(){var t=o(this).find("input:not(.ignore):not(:disabled), select:not(.ignore):not(:disabled), textarea:not(.ignore):not(:disabled)");return 0===t.length?s.resolve():n.validateInput(t.eq(0))}).toArray();return s.all(i).then(function(){return e=t.find(".invalid-required, .invalid-constraint, .invalid-relevant").addBack(".invalid-required, .invalid-constraint, .invalid-relevant").eq(0),e.length>0&&n.goToTarget(e[0]),0===e.length})["catch"](function(){return!1})},i.prototype.pathToAbsolute=function(t,e){var n;return 0===t.indexOf("/")?t:(n=this.model.evaluate(t,"node",e,0,!0),this.model.getXPath(n,"instance",!1))},i.prototype.validateInput=function(t){var e,n=this,i={path:this.input.getName(t),inputType:this.input.getInputType(t),xmlType:this.input.getXmlType(t),enabled:this.input.isEnabled(t),constraint:this.input.getConstraint(t),calculation:this.input.getCalculation(t),required:this.input.getRequired(t),readonly:this.input.getReadonly(t),val:this.input.getVal(t)};return!i.readonly||i.val||i.required||i.constraint||i.calculation?(i.enabled&&"hidden"!==i.inputType?(i.ind=this.input.getIndex(t),e=this.model.node(i.path,i.ind).validate(i.constraint,i.required,i.xmlType)):e=s.resolve({requiredValid:!0,constraintValid:!0}),e.then(function(e){var r=!1,o=e.requiredValid!==!1&&e.constraintValid!==!1;return"hidden"!==i.inputType&&(i.$q=n.input.getWrapNodes(t),i.$required=i.$q.find(".required"),r=i.$q.hasClass("invalid-required")||i.$q.hasClass("invalid-constraint"),e.requiredValid===!1?(n.setValid(t,"constraint"),n.setInvalid(t,"required"),i.$required.removeClass("hide")):(n.updateRequiredVisibility(i),e.constraintValid===!1?(n.setValid(t,"required"),n.setInvalid(t,"constraint")):(n.setValid(t,"constraint"),n.setValid(t,"required")))),o||r||t.trigger("invalidated.enketo"),o})["catch"](function(e){throw console.error("validation error",e),n.setInvalid(t,"constraint"),e})):s.resolve()},i.prototype.updateRequiredVisibility=function(t){t.required&&t.$required.toggleClass("hide",!this.model.node(t.path,t.ind).isRequired(t.required))},i.prototype.getGoToTarget=function(t){var e,n,i,r,s="",a=/([^[]+)\[(\d+)\]([^[]*$)?/g;if(t&&(n=this.model.node(t).get().get(0))){if(t=this.model.getXPath(n,"instance",!0),i=this.view.html.querySelector('[name="'+t+'"]'),!i)for(r=this.view.html;null!==(e=a.exec(t))&&r;)s+=e[1],r=r.querySelectorAll('[name="'+s+'"], [data-name="'+s+'"]')[e[2]],r&&e[3]&&(s+=e[3],r=r.querySelector('[name="'+s+'"],[data-name="'+s+'"]')),i=r;return i?this.input.getWrapNodes(o(i)).get(0):i}},i.prototype.goToTarget=function(t){return t&&(this.pages.active&&this.pages.flipToPageContaining(o(t)),o(t).closest(".or-branch.disabled").length&&o(t).trigger("gotohidden.enketo"),t.scrollIntoView(),o(t.querySelector("input:not(.ignore), textarea:not(.ignore), select:not(.ignore)")).trigger("focus").trigger("applyfocus")),!!t},i.getRequiredTransformerVersion=function(){return console.deprecate("Form.getRequiredTransformerVersion()","Form.requiredTransformerVersion"),i.requiredTransformerVersion},i.requiredTransformerVersion="1.27.0",e.exports=i,i.prototype.getInstanceID=function(){return console.deprecate("form.getInstanceID()","form.instanceID"),this.instanceID},i.prototype.getDeprecatedID=function(){return console.deprecate("form.getDeprecatedID()","form.deprecatedID"),this.deprecatedID},i.prototype.getInstanceName=function(){return console.deprecate("form.getModel()","form.instanceName"),this.instanceName},i.prototype.getVersion=function(){return console.deprecate("form.getVersion()","form.version"),this.version},i.prototype.getEncryptionKey=function(){return console.deprecate("form.getEncryptionKey()","form.encryptionKey"),this.encryptionKey},i.prototype.getAction=function(){return console.deprecate("form.getAction()","form.action"),this.action},i.prototype.getMethod=function(){return console.deprecate("form.getMethod()","form.method "),this.method},i.prototype.getModel=function(){return console.deprecate("form.getModel()","form.model"),this.model},i.prototype.getView=function(){return console.deprecate("form.getView()","form.view"),this.view},i.prototype.getRecordName=function(){return console.deprecate("form.getRecordName()","form.recordName"),this.recordName},i.prototype.setRecordName=function(t){console.deprecate("form.setRecordName()",'form.recordName="val"'),this.recordName=t},i.prototype.setEditStatus=function(t){console.deprecate("form.setEditStatus()",'form.editStatus="val"'),this.editStatus=t},i.prototype.getEditStatus=function(){return console.deprecate("form.getEditStatus()","form.editStatus"),this.editStatus},i.prototype.getSurveyName=function(){return console.deprecate("form.getSurveyName()","form.editStatus"),this.surveyName}},{"./Form-model":9,"./branch":12,"./calculation":13,"./extend":15,"./input":19,"./itemset":20,"./language":21,"./mask":22,"./output":23,"./page":24,"./plugins":25,"./preload":26,"./progress":27,"./repeat":28,"./utils":33,"./widgets-controller":34,"enketo/config":6,"enketo/translator":17,jquery:72,lie:7}],11:[function(t,e,n){"use strict";var i=t("jquery"),r=function(t,e,n){this.element=t,this.options=e||{},this.namespace=this.namespace||"somewidget",this.event=n||null};r.prototype={destroy:function(t){i(t).removeData(this.namespace).off("."+this.namespace).show().next(".widget").remove()},disable:function(t){i(t).next(".widget").addClass("readonly")},enable:function(t){t.readOnly||i(t).next(".widget").removeClass("readonly")},update:function(){},resetButtonHtml:'<button type="button" class="btn-icon-only btn-reset" aria-label="reset"><i class="icon icon-refresh"> </i></button>',downloadButtonHtml:'<a class="btn-icon-only btn-download" aria-label="download" download href=""><i class="icon icon-download"> </i></a>'},e.exports=r},{jquery:72}],12:[function(t,e,n){"use strict";var i=t("jquery");e.exports={update:function(t,e){var n;if(!this.form)throw new Error("Branch module not correctly instantiated with form property.");n=this.form.getRelatedNodes("data-relevant","",t),this.updateNodes(n,e)},updateNodes:function(t,e){var n,r,o,s,a,u,l,c={},h=[],d=!1,p=this;l=!!(this.form.repeatsPresent&&this.form.view.$.find(".or-repeat.clone").length>0),t.each(function(){var t,f,m,g,v=i(this);if(i.inArray(v.attr("name"),h)===-1){if(r=v.closest(".or-branch"),n={},u=null,n.relevant=p.form.input.getRelevant(v),n.path=p.form.input.getName(v),1!==r.length)return void(0===v.parentsUntil(".or","#or-calculated-items").length&&console.error("could not find branch node for ",i(this)));m=n.path.split("/"),m.length>3&&(g=m.splice(0,m.length-1).join("/"),f=p.form.view.$.find('.or-group[name="'+g+'"],.or-group-data[name="'+g+'"]').filter(function(){var t=i(this);return t.children(".or-repeat").length>0||0===t.children(".or-repeat-info").length}),0===f.length)||(s=l&&r.parentsUntil(".or",".or-repeat").length>0,a=l&&r.parentsUntil(".or",".or-repeat.clone").length>0,t=v.children('.or-repeat-info[data-name="'+n.path+'"]').length&&!v.children('.or-repeat[name="'+n.path+'"]').length?null:n.path,n.ind=t&&a?p.form.input.getIndex(v):0,
n.relevant.indexOf("..")===-1&&(u=s?n.relevant+"__"+n.path.substring(0,n.path.lastIndexOf("/"))+"__"+n.ind:n.relevant),u&&"undefined"!=typeof c[u]?o=c[u]:(o=p.evaluate(n.relevant,t,n.ind),c[u]=o),s||h.push(i(this).attr("name")),p.process(r,n.path,o,e)===!0&&(d=!0))}}),d&&this.form.view.$.trigger("changebranch")},evaluate:function(t,e,n){var i=this.form.model.evaluate(t,"boolean",e,n);return i},process:function(t,e,n,i){return n===!0?this.enable(t,e):this.disable(t,e,i)},selfRelevant:function(t){return!t.hasClass("disabled")&&!t.hasClass("pre-init")},enable:function(t,e){var n=!1;return this.selfRelevant(t)||(n=!0,t.removeClass("disabled pre-init"),this.form.calc.update({relevantPath:e}),this.form.widgets.enable(t),this.activate(t)),n},disable:function(t,e,n){var i=t.hasClass("pre-init"),r=!1;return(i||this.selfRelevant(t)||n)&&(r=!0,i?t.removeClass("pre-init"):(this.form.options.clearIrrelevantImmediately||n)&&this.clear(t,e),this.deactivate(t)),r},clear:function(t,e){t.clearInputs("change","inputupdate.enketo"),t.is(".or-group, .or-group-data")&&this.form.calc.update({relevantPath:e})},setDisabledProperty:function(t,e){var n=t.prop("nodeName").toLowerCase();"label"===n?t.children("input, select, textarea").prop("disabled",e):"fieldset"===n||"section"===n?t.prop("disabled",e):t.find("fieldset, input, select, textarea").prop("disabled",e)},activate:function(t){this.setDisabledProperty(t,!1)},deactivate:function(t){t.addClass("disabled"),this.form.widgets.disable(t),this.setDisabledProperty(t,!0)}}},{jquery:72}],13:[function(t,e,n){"use strict";var i=t("jquery");e.exports={update:function(t,e){var n,r=this;if(e=e||"",!this.form)throw new Error("Calculation module not correctly instantiated with form property.");t=t||{},n=t.relevantPath?this.form.getRelatedNodes("data-calculate",'[name^="'+t.relevantPath+'/"]'+e).add(this.form.getRelatedNodes("data-calculate",'[name="'+t.relevantPath+'"]'+e)).add(this.form.getRelatedNodes("data-calculate",'[data-name="'+t.relevantPath+'"]'+e)):this.form.getRelatedNodes("data-calculate",e,t),n.each(function(){function e(t){var e=l.split("/"),s=e.splice(0,e.length-1).join("/"),a=r.form.view.$.find('.or-group[name="'+s+'"],.or-group-data[name="'+s+'"]').eq(t).parents(".or-group, .or-group-data").addBack();g=a.length?a.filter("[data-relevant]").reverse().get().map(function(t){var e=i(t),n=r.form.input.getName(e);return{context:n,index:r.form.view.$.find('.or-group[name="'+n+'"], .or-group-data[name="'+n+'"]').index(e),expr:r.form.input.getRelevant(e)}}).concat([{context:l,index:t,expr:m}]).every(function(t){return!t.expr||r.form.model.evaluate(t.expr,"boolean",t.context,t.index)}):!m||r.form.model.evaluate(m,"boolean",l,t),d=r.form.replaceChoiceNameFn(h,"string",l,t),n=g&&d?r.form.model.evaluate(d,"string",l,t):"",o.setIndex(t),o.setVal(n,f,p),r.form.input.setVal(l,t,o.getVal()[0])}var n,o,s,a,u,l,c,h,d,p,f,m,g,v;v=i(this),l=r.form.input.getName(v),c=l.lastIndexOf("/")!==-1?l.substring(l.lastIndexOf("/")+1):l,h=r.form.input.getCalculation(v),p=r.form.input.getXmlType(v),f=r.form.input.getConstraint(v),m=r.form.input.getRelevant(v),o=r.form.model.node(l),s=o.get(),s.length>1&&t.repeatPath&&l.indexOf(t.repeatPath)!==-1?(a=r.form.model.node(t.repeatPath,t.repeatIndex).get().find(c),u=i(s).index(a),e(u)):1===s.length?(u=0,e(u)):s.each(function(t){e(t)})})}}},{jquery:72}],14:[function(t,e,n){function i(t){o(s).remove(),o(a).each(function(){var e=r(o(this)),n={relatedTarget:this};e.hasClass("open")&&(e.trigger(t=o.Event("hide.bs.dropdown",n)),t.isDefaultPrevented()||e.removeClass("open").trigger("hidden.bs.dropdown",n))})}function r(t){var e=t.attr("data-target");e||(e=t.attr("href"),e=e&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n=e&&o(e);return n&&n.length?n:t.parent()}var o=t("jquery"),s=".dropdown-backdrop",a="[data-toggle=dropdown]",u=function(t){o(t).on("click.bs.dropdown",this.toggle)};u.prototype.toggle=function(t){var e=o(this);if(!e.is(".disabled, :disabled")){var n=r(e),s=n.hasClass("open");if(i(),!s){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&o('<div class="dropdown-backdrop"/>').insertAfter(o(this)).on("click",i);var a={relatedTarget:this};if(n.trigger(t=o.Event("show.bs.dropdown",a)),t.isDefaultPrevented())return;n.toggleClass("open").trigger("shown.bs.dropdown",a),e.focus()}return!1}},u.prototype.keydown=function(t){if(/^(38|40|27)$/.test(t.keyCode)){var e=o(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=r(e),i=n.hasClass("open");if(!i||i&&27===t.keyCode)return 27===t.which&&n.find(a).focus(),e.click();var s=" li:not(.divider):visible a",u=n.find("[role=menu]"+s+", [role=listbox]"+s);if(u.length){var l=u.index(u.filter(":focus"));38===t.keyCode&&l>0&&l--,40===t.keyCode&&l<u.length-1&&l++,~l||(l=0),u.eq(l).focus()}}}};var l=o.fn.dropdown;o.fn.dropdown=function(t){return this.each(function(){var e=o(this),n=e.data("bs.dropdown");n||e.data("bs.dropdown",new u(this)),"string"==typeof t&&n[t].call(e)})},o.fn.dropdown.Constructor=u,o.fn.dropdown.noConflict=function(){return o.fn.dropdown=l,this},o(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,u.prototype.toggle).on("keydown.bs.dropdown.data-api",a+", [role=menu], [role=listbox]",u.prototype.keydown)},{jquery:72}],15:[function(t,e,n){"use strict";t("enketo-xpathjs/src/date-extensions"),String.prototype.pad=function(t){for(var e=this;e.length<t;)e="0"+e;return e},"undefined"==typeof console.deprecate&&(console.deprecate=function(t,e){console.warn(t+" is deprecated. Use "+e+" instead.")})},{"enketo-xpathjs/src/date-extensions":63}],16:[function(t,e,n){"use strict";function i(t){return window.alert(t),s.resolve()}function r(t){return new s(function(e,n){window.confirm(t)?e():n()})}function o(t,e){return new s(function(n,i){var r=window.prompt(t,e);r?n(r):i()})}var s=t("lie");e.exports={alert:i,confirm:r,prompt:o}},{lie:7}],17:[function(t,e,n){"use strict";function i(t,e){var n="",i=r;return t.split(".").forEach(function(t){i=i?i[t]:"",n=i}),e=e||{},n=n.replace(/__([^_]+)__/,function(t,n){return e[n]})}var r={constraint:{invalid:"Value not allowed",required:"This field is required"},"esri-geopicker":{"coordinate-mgrs":"MGRS coordinate",decimal:"decimal",degrees:"degrees, minutes, seconds","latitude-degrees":"latitude (d° m’ s” N)","longitude-degrees":"longitude (d° m’ s” W)",mgrs:"MGRS",notavailable:"Not Available",utm:"UTM","utm-easting":"easting (m)","utm-hemisphere":"hemisphere","utm-north":"North","utm-northing":"northing (m)","utm-south":"South","utm-zone":"zone"},filepicker:{placeholder:"Click here to upload file. (< __maxSize__)",notFound:"File __existing__ could not be found (leave unchanged if already submitted and you want to preserve it).",waitingForPermissions:"Waiting for user permissions.",resetWarning:"This will remove the __item__. Are you sure you want to do this?",toolargeerror:"File too large (> __maxSize__)",file:"file"},drawwidget:{drawing:"drawing",signature:"signature",annotation:"file and drawing"},form:{required:"required"},geopicker:{accuracy:"accuracy (m)",altitude:"altitude (m)",closepolygon:"close polygon",kmlcoords:"KML coordinates",kmlpaste:"paste KML coordinates here",latitude:"latitude (x.y °)",longitude:"longitude (x.y °)",points:"points",searchPlaceholder:"search for place or address",removePoint:"This will completely remove the current geopoint from the list of geopoints and cannot be undone. Are you sure you want to do this?"},selectpicker:{noneselected:"none selected",numberselected:"__number__ selected"},imagemap:{svgNotFound:"SVG image could not be found"},widget:{comment:{update:"Update"}},alert:{gotonotfound:{msg:"Failed to find question '__path__' in form. Is it a valid path?"}}};e.exports={t:i}},{}],18:[function(t,e,n){"use strict";var i=t("lie"),r=t("jquery"),o=t("./utils"),s={},a=t("enketo/translator").t;s.init=function(){return i.resolve(!0)},s.isWaitingForPermissions=function(){return!1},s.getFileUrl=function(t){return new i(function(e,n){var i;t?"string"==typeof t?n("no!"):"object"==typeof t?s.isTooLarge(t)?(i=new Error(a("filepicker.toolargeerror",{maxSize:s.getMaxSizeReadable()})),n(i)):e(URL.createObjectURL(t)):n(new Error("Unknown error occurred")):e(null)})},s.getObjectUrl=function(t){return s.getFileUrl(t).then(function(t){return/https?:\/\//.test(t)?s.urlToBlob(t).then(URL.createObjectURL):t})},s.urlToBlob=function(t){var e=new XMLHttpRequest;return new i(function(n){e.open("GET",t),e.responseType="blob",e.onload=function(){n(e.response)},e.send()})},s.getCurrentFiles=function(){var t=[];return r("form.or").find('input[type="file"]:not(.ignore), input[type="text"][data-drawing="true"]').each(function(){var e,n=null,i=null;"file"===this.type?n=this.files[0]:this.value&&(i=r(this).closest(".question")[0].querySelector(".draw-widget canvas"),i&&(n=o.dataUriToBlobSync(i.toDataURL()),n.name=this.value)),n&&n.name&&(e=o.getFilename(n,this.dataset.filenamePostfix),n=new Blob([n],{type:n.type}),n.name=e,t.push(n))}),t},s.isTooLarge=function(){return!1},s.getMaxSizeReadable=function(){return"5MB"},e.exports=s},{"./utils":33,"enketo/translator":17,jquery:72,lie:7}],19:[function(t,e,n){"use strict";e.exports={getWrapNodes:function(t){var e=this.getInputType(t.eq(0));return"fieldset"===e?t:t.closest(".question, .calculation")},getProps:function(t){return 1!==t.length?console.error("getProps(): no input node provided or multiple"):{path:this.getName(t),ind:this.getIndex(t),inputType:this.getInputType(t),xmlType:this.getXmlType(t),constraint:this.getConstraint(t),calculation:this.getCalculation(t),relevant:this.getRelevant(t),readonly:this.getReadonly(t),val:this.getVal(t),required:this.getRequired(t),enabled:this.isEnabled(t),multiple:this.isMultiple(t)}},getInputType:function(t){var e;return 1!==t.length?"":(e=t.prop("nodeName").toLowerCase(),"input"===e?t.data("drawing")?"drawing":t.attr("type").length>0?t.attr("type").toLowerCase():console.error("<input> node has no type"):"select"===e?"select":"textarea"===e?"textarea":"fieldset"===e||"section"===e?"fieldset":console.error("unexpected input node type provided"))},getConstraint:function(t){return t.attr("data-constraint")},getRequired:function(t){if(0===t.parentsUntil(".or",".or-appearance-label").length)return t.attr("data-required")},getRelevant:function(t){return t.attr("data-relevant")},getReadonly:function(t){return t.is("[readonly]")},getCalculation:function(t){return t.attr("data-calculate")},getXmlType:function(t){return 1!==t.length?console.error("getXMLType(): no input node provided or multiple"):t.attr("data-type-xml")},getName:function(t){var e;return 1!==t.length?console.error("getName(): no input node provided or multiple"):(e=t.attr("data-name")||t.attr("name"),e||console.error("input node has no name"))},getIndex:function(t){var e,n,i,r;return 1!==t.length?console.error("getIndex(): no input node provided or multiple"):(e=this.getInputType(t),n=this.getName(t),i=this.getWrapNodes(t),r="radio"===e&&n!==t.attr("name")?this.getWrapNodes(this.form.view.$.find('[data-name="'+n+'"]')):"fieldset"===e&&t.hasClass("or-repeat")?this.getWrapNodes(this.form.view.$.find('.or-repeat[name="'+n+'"]')):"fieldset"===e&&t.hasClass("or-group")?this.getWrapNodes(this.form.view.$.find('.or-group[name="'+n+'"]')):this.getWrapNodes(this.form.view.$.find('[name="'+n+'"]')),r.index(i))},isMultiple:function(t){return"checkbox"===this.getInputType(t)||void 0!==t.attr("multiple")},isEnabled:function(t){return!(t.prop("disabled")||t.parentsUntil(".or",".disabled").length>0)},getVal:function(t){var e,n,i=[];return 1!==t.length?console.error("getVal(): no inputNode provided or multiple"):(e=this.getInputType(t),n=this.getName(t),"radio"===e?this.getWrapNodes(t).find("input:checked").val()||"":"checkbox"===e?(this.getWrapNodes(t).find('input[name="'+n+'"]:checked').each(function(){i.push(this.value)}),i):t.val()||"")},setVal:function(t,e,n){var i,r,o,s,a;if(e=e||0,"radio"===this.getInputType(this.form.view.$.find('[data-name="'+t+'"]').eq(0)))r="radio",i=this.getWrapNodes(this.form.view.$.find('[data-name="'+t+'"]')).eq(e).find('[data-name="'+t+'"]');else{if(i=this.getWrapNodes(this.form.view.$.find('[name="'+t+'"]')).eq(e).find('[name="'+t+'"]'),r=this.getInputType(i.eq(0)),"file"===r)return i.eq(0).attr("data-loaded-file-name",n),!1;"date"!==r&&"datetime"!==r||(n=this.form.model.node(t,e).convert(n,r)),"time"===r&&/(\+|-)/.test(n)&&(a=(new Date).toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}).replace(/\u200E/g,"")+" "+n.replace(/(\d\d:\d\d:\d\d)(\.\d{1,3})(\s?((\+|-)\d\d))(:)?(\d\d)?/,"$1 GMT$3$7"),s=new Date(a),"Invalid Date"!==s.toString()?n=s.getHours().toString().pad(2)+":"+s.getMinutes().toString().pad(2):console.error("could not parse time:",n))}return this.isMultiple(i.eq(0))===!0?n=n.split(" "):"radio"===r&&(n=[n]),i.length&&(o=this.getVal(i.eq(0)),void 0!==o&&o.toString()===n.toString()||(i.val(n),i.eq(0).trigger("inputupdate.enketo"))),i[0]},validate:function(t){return this.form.validateInput(t)}}},{}],20:[function(t,e,n){"use strict";var i=t("jquery"),r=t("./utils");e.exports={update:function(t){var e,n,o,s,a=this,u={};if(!this.form)throw new Error("Output module not correctly instantiated with form property.");s=this.form.getRelatedNodes("data-items-path",".itemset-template",t),e=!!(this.form.repeatsPresent&&this.form.view.$.find(".or-repeat.clone").length>0),s.each(function(){var t,s,l=this,c=i(this),h={};if(!c.parentsUntil(".or",".or-branch").parentsUntil(".or",".disabled").length){var d={},p=c.data(),f=c.prop("nodeName").toLowerCase(),m=c.parent("select, datalist");"label"===f?(t=c.children("input").eq(0),[].slice.call(t[0].attributes).forEach(function(t){h[t.name]=t.value})):"select"===m.prop("nodeName").toLowerCase()?t=m:"datalist"===m.prop("nodeName").toLowerCase()&&(t=m.siblings("input:not(.widget)"));var g=c.closest("label, select, datalist").siblings(".itemset-labels"),v=c.attr("data-items-path"),y=g.attr("data-label-type"),_=g.attr("data-label-ref"),b=r.parseFunctionFromExpression(_,"translate");b.length&&(_=b[0][1][0],y="langs");var w=g.attr("data-value-ref"),x=a.form.input.getName(t);n=!!(e&&t.parentsUntil(".or",".or-repeat").length>0),o=!!(e&&t.parentsUntil(".or",".or-repeat.clone").length>0);var k=o?a.form.input.getIndex(t):0;if("undefined"!=typeof u[v])s=u[v];else{var $=!0;s=i(a.form.model.evaluate(v,"nodes",x,k,$)),n||(u[v]=s)}if(d.length=s.length,d.text=s.text(),d.length!==p.length||d.text!==p.text){c.data(d);var E=c.closest(".question");E.find(f).not(c).remove();var C=E.find(".or-option-translations").empty()[0],T=document.createDocumentFragment(),L=document.createDocumentFragment(),S=[];s.each(function(){var t=this,e=a.getNodesFromItem(_,t);if(e&&e.length)switch(y){case"itext":S=g.find('[data-itext-id="'+e[0].textContent+'"]').get().map(function(t){return{language:t.getAttribute("lang"),label:t.textContent,active:t.classList.contains("active")}});break;case"langs":S=S.map(function(t){var e=t.getAttribute("lang"),n=e===a.form.langs.getCurrentLang();return{language:e,label:t.textContent,active:n}});break;default:S=[{language:"",label:e&&e.length?e[0].textContent:"error",active:!0}]}else S=[{language:"",label:"error",active:!0}];var n=a.getNodeFromItem(w,t).textContent;if("label"===f)T.appendChild(a.createInput(h,S,n));else if("option"===f){var i="";S.length>1?S.forEach(function(t){t.active&&(i=t.label),L.appendChild(a.createOptionTranslation(t.language,t.label,n,!!t.active))}):i=S[0].label,T.appendChild(a.createOption(i,n))}}),l.parentNode.appendChild(T),C&&C.appendChild(L);var D=a.form.model.node(x,k).getVal()[0];""!==D&&(a.form.input.setVal(x,k,D),t.trigger("change")),m.length>0&&t.trigger("changeoption")}}})},getNodesFromItem:function(t,e,n){if(!t||!e)throw new Error("Error: could not query instance item, no expression and/or context provided");var i=n?9:7,r="undefined"!=typeof this.form.model.xml.evaluate?"evaluate":"jsEvaluate",o=this.form.model.xml[r](t,e,this.form.model.getNsResolver(),i,null),s=[];if(n)s.push(o.singleNodeValue);else for(var a=0;a<o.snapshotLength;a++)s.push(o.snapshotItem(a));return s},getNodeFromItem:function(t,e){var n=this.getNodesFromItem(t,e,!0);return n.length?n[0]:null},createOption:function(t,e){var n=document.createElement("option");return n.textContent=t,n.value=e,n},createOptionTranslation:function(t,e,n,i){var r=document.createElement("span");return r.textContent=e,r.classList.add("option-label"),i&&r.classList.add("active"),r.lang=t,r.dataset.optionValue=n,r},createInput:function(t,e,n){var i=this,r=document.createElement("label"),o=document.createElement("input");return Object.getOwnPropertyNames(t).forEach(function(e){o.setAttribute(e,t[e])}),o.value=n,r.appendChild(o),e.forEach(function(t){r.appendChild(i.createOptionTranslation(t.language,t.label,n,t.active))}),r}}},{"./utils":33,jquery:72}],21:[function(t,e,n){"use strict";var i=t("jquery");e.exports={init:function(){var t,e=this,n=i(".form-language-selector");if(!this.form)throw new Error("Language module not correctly instantiated with form property.");this.$formLanguages=this.form.view.$.find("#form-languages"),this.currentLang=this.$formLanguages.attr("data-default-lang")||this.$formLanguages.find("option").eq(0).attr("value"),t=this.$formLanguages.find('[value="'+this.currentLang+'"]').attr("data-dir")||"ltr",this.$formLanguages.detach().appendTo(n).val(this.currentLang),this.form.view.$.attr("dir",t),this.$formLanguages.find("option").length<2||(n.removeClass("hide"),this.$formLanguages.change(function(t){t.preventDefault(),e.currentLang=i(this).val(),e.setAll(e.currentLang)}))},getCurrentLang:function(){return this.currentLang},getCurrentLangDesc:function(){return this.$formLanguages.find('[value="'+this.currentLang+'"]').text()},setAll:function(t){var e=this,n=this.$formLanguages.find('[value="'+t+'"]').attr("data-dir")||"ltr";this.form.view.$.attr("dir",n).find("[lang]").removeClass("active").filter('[lang="'+t+'"], [lang=""]').filter(function(){var t=i(this);return!t.hasClass("or-form-short")||t.hasClass("or-form-short")&&0===t.siblings(".or-form-long").length}).addClass("active"),window.enketoFormLocale=t,this.form.view.$.find("select, datalist").each(function(){e.setSelect(i(this))}),this.form.view.$.trigger("changelanguage")},setSelect:function(t){var e,n,r;t.children("option").not('[value=""], [data-value=""]').each(function(){var t=i(this);n=t.text(),e=t.attr("value")||t[0].dataset.value,r=t.closest(".question").find(".or-option-translations").children('.active[data-option-value="'+e+'"]').text().trim(),r="undefined"!=typeof r&&r.length>0?r:n,t.text(r)})}}},{jquery:72}],22:[function(t,e,n){"use strict";function i(){r('[data-type-xml="int"]',/^(-?[0-9]+$)/,"-0123456789"),r('[data-type-xml="decimal"]',/^(-?[0-9]+[.,]?[0-9]*$)/,"-0123456789.,")}function r(t,e,n){a(t).on("keydown",function(t){return!(!o(t)&&!s(t)&&n.indexOf(t.key)===-1)}).on("paste",function(t){var n=u.getPasteData(t);return!(!n||!e.test(n.trim()))||(a(this).val("").trigger("change"),!1)}).on("blur",function(){"undefined"!=typeof this.validity&&"undefined"!=typeof this.validity.badInput&&this.validity.badInput?this.value="":"undefined"==typeof this.validity.badInput&&this.value&&!e.test(this.value.trim())&&(this.value="")})}function o(t){return t.key.length>1&&"Spacebar"!==t.key}function s(t){return l.indexOf(t.key)!==-1&&(t.metaKey||t.ctrlKey)}var a=t("jquery"),u=t("./utils"),l="xvc";e.exports={init:i}},{"./utils":33,jquery:72}],23:[function(t,e,n){"use strict";var i=t("jquery");e.exports={update:function(t){var e,n,r,o,s,a,u,l,c,h={},d="",p=this;if(!this.form)throw new Error("Output module not correctly instantiated with form property.");c=this.form.getRelatedNodes("data-value",".or-output",t),n=this.form.repeatsPresent&&this.form.view.$.find(".or-repeat.clone").length>0,c.each(function(){a=i(this),a.closest(".or-branch").parent().closest(".disabled").length||(e=a.attr("data-value"),s=a.closest(".question, .note, .or-group"),s.is(".or-group")||(s=s.find("[name]").eq(0)),u=p.form.input.getName(s),s.children('.or-repeat-info[data-name="'+u+'"]').length&&!s.children('.or-repeat[name="'+u+'"]').length&&(u=null),r=n&&a.parentsUntil(".or",".or-repeat").length>0,o=r&&a.parentsUntil(".or",".or-repeat.clone").length>0,l=o&&u?p.form.input.getIndex(s):0,"undefined"!=typeof h[e]?d=h[e]:(d=p.form.model.evaluate(e,"string",u,l,!0),r||(h[e]=d)),a.text()!==d&&a.text(d))})}}},{jquery:72}],24:[function(t,e,n){"use strict";var i=t("jquery"),r=t("lie"),o=t("enketo/config");t("jquery-touchswipe"),e.exports={active:!1,$current:[],$activePages:i(),init:function(){if(!this.form)throw new Error("Repeats module not correclty instantiated with form property.");if(this.form.view.$.hasClass("pages")){var t=this.form.view.$.find(' .question:not([role="comment"]), .or-appearance-field-list').add(".or-repeat.or-appearance-field-list + .or-repeat-info").filter(function(){return 0===i(this).parent().closest(".or-appearance-field-list").length}).attr("role","page");(t.length>0||t.eq(0).hasClass("or-repeat"))&&(this.$formFooter=i(".form-footer"),this.$btnFirst=this.$formFooter.find(".first-page"),this.$btnPrev=this.$formFooter.find(".previous-page"),this.$btnNext=this.$formFooter.find(".next-page"),this.$btnLast=this.$formFooter.find(".last-page"),this.updateAllActive(t),this.toggleButtons(0),this.setButtonHandlers(),this.setRepeatHandlers(),this.setBranchHandlers(),this.setSwipeHandlers(),this.active=!0,this.flipToFirst())}},setButtonHandlers:function(){var t=this;this.$btnFirst.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t.flipToFirst(),!1}),this.$btnPrev.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t.prev(),!1}),this.$btnNext.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t.next(),!1}),this.$btnLast.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t.flipToLast(),!1})},setSwipeHandlers:function(){if(o.swipePage!==!1){var t=this,e=i(".main");e.swipe("destroy"),e.swipe({allowPageScroll:"vertical",threshold:250,preventDefaultEvents:!1,swipeLeft:function(){t.$btnNext.click()},swipeRight:function(){t.$btnPrev.click()},swipeStatus:function(e,n){"start"===n&&t.getCurrent().find(":focus").blur()}})}},setRepeatHandlers:function(){var t=this;this.form.view.$.off("addrepeat.pagemode").on("addrepeat.pagemode",function(e,n,r){t.updateAllActive(),i(e.target).removeClass("current contains-current").find(".current").removeClass("current"),r||t.flipToPageContaining(i(e.target))}).off("removerepeat.pagemode").on("removerepeat.pagemode",function(e){if(0===t.$current.closest("html").length){t.updateAllActive();var n=i(e.target).prev();0===n.length&&(n=i(e.target)),t.flipToPageContaining(n)}})},setBranchHandlers:function(){var t=this;this.form.view.$.off("changebranch.pagemode").on("changebranch.pagemode",function(){t.updateAllActive(),t.toggleButtons()})},getCurrent:function(){return this.$current},updateAllActive:function(t){t=t||i('.or [role="page"]'),this.$activePages=t.filter(function(){var t=i(this);return 0===t.closest(".disabled").length&&(t.is(".question")||t.find(".question:not(.disabled)").length>0||t.is(".or-repeat-info")&&0===t.siblings(".or-repeat").length)})},getAllActive:function(){return this.$activePages},getPrev:function(t){return this.$activePages[t-1]},getNext:function(t){return this.$activePages[t+1]},getCurrentIndex:function(){return this.$activePages.index(this.$current)},next:function(){var t,e,n=this;return t=this.getCurrentIndex(),e=o.validatePage===!1?r.resolve(!0):this.form.validateContent(this.$current),e.then(function(e){var i,r;return!!e&&(i=n.getNext(t),!i||(r=t+1,n.flipTo(i,r),r))})},prev:function(){var t,e;e=this.getCurrentIndex(),t=this.getPrev(e),t&&this.flipTo(t,e-1)},setToCurrent:function(t){var e=i(t);e.addClass("current hidden"),this.$current=e.removeClass("hidden").parentsUntil(".or",".or-group, .or-group-data, .or-repeat").addClass("contains-current").end()},flipTo:function(t,e){this.$current.length>0&&1===this.$current.closest("html").length?this.$current[0]!==t&&(this.$current.removeClass("current fade-out").parentsUntil(".or",".or-group, .or-group-data, .or-repeat").removeClass("contains-current"),this.setToCurrent(t),this.focusOnFirstQuestion(t),this.toggleButtons(e),i(t).trigger("pageflip.enketo")):(this.setToCurrent(t),this.focusOnFirstQuestion(t),this.toggleButtons(e),i(t).trigger("pageflip.enketo"))},flipToFirst:function(){this.flipTo(this.$activePages[0])},flipToLast:function(){this.flipTo(this.$activePages.last()[0])},flipToPageContaining:function(t){var e;e=t.closest('[role="page"]'),e=0===e.length?t.find('[role="page"]'):e,e.length&&this.flipTo(e[0])},focusOnFirstQuestion:function(t){i(t).find(".question:not(.disabled)").addBack(".question:not(.disabled)").filter(function(){return 0===i(this).parentsUntil(".or",".disabled").length}).eq(0).find("input, select, textarea").eq(0).trigger("fakefocus"),t.scrollIntoView()},toggleButtons:function(t){var e=t||this.getCurrentIndex(),n=this.getNext(e),i=this.getPrev(e);this.$btnNext.add(this.$btnLast).toggleClass("disabled",!n),this.$btnPrev.add(this.$btnFirst).toggleClass("disabled",!i),this.$formFooter.toggleClass("end",!n)}}},{"enketo/config":6,jquery:72,"jquery-touchswipe":71,lie:7}],25:[function(t,e,n){"use strict";var i=t("jquery");i.fn.clearInputs=function(t,e){return t=t||"edit",e=e||"",this.each(function(){i(this).find(".file-preview").remove(),i(this).find("input, select, textarea").not(".ignore").each(function(){var n,r=i(this),o=r.attr("type");switch("SELECT"===r.prop("nodeName").toUpperCase()&&(o="select"),"TEXTAREA"===r.prop("nodeName").toUpperCase()&&(o="textarea"),o){case"file":n=this.dataset.loadedFileName,delete this.dataset.loadedFileName;case"date":case"datetime":case"time":case"number":case"search":case"color":case"range":case"url":case"email":case"password":case"text":case"tel":case"hidden":case"textarea":(""!==r.val()||n)&&r.val("").trigger(t).trigger(e);break;case"radio":case"checkbox":r.prop("checked")&&(r.prop("checked",!1),r.trigger(t).trigger(e));break;case"select":r[0].selectedIndex>0&&(r[0].selectedIndex=0,r.trigger(t).trigger(e));break;default:console.error("Unrecognized input type found when trying to reset",this)}})})},i.fn.reverse=[].reverse},{jquery:72}],26:[function(t,e,n){"use strict";var i=t("jquery");e.exports={init:function(){var t,e,n,r,o,s,a,u=this;if(!this.form)throw new Error("Preload module not correctly instantiated with form property.");this.form.view.$.find("input[data-preload], select[data-preload], textarea[data-preload]").each(function(){a=i(this),s=u.form.input.getProps(a),t=a.attr("data-preload").toLowerCase(),e=a.attr("data-preload-params").toLowerCase(),"undefined"!=typeof u[t]?(o=u.form.model.node(s.path,s.index),o.get().length&&(n=o.getVal()[0],r=u[t]({param:e,curVal:n,dataNode:o}),o.setVal(r,null,s.xmlType))):console.log('Preload "'+t+'" not supported. May or may not be a big deal.')})},timestamp:function(t){var e,n=this;return"start"===t.param?t.curVal.length>0?t.curVal:this.form.model.evaluate("now()","string"):"end"===t.param?(this.form.view.$.on("beforesave",function(){e=n.form.model.evaluate("now()","string"),t.dataNode.setVal(e,null,"datetime")}),this.form.model.evaluate("now()","string")):"error - unknown timestamp parameter"},date:function(t){var e,n,i,r;return 0===t.curVal.length?(e=new Date(this.form.model.evaluate("today()","string")),n=e.getFullYear().toString().pad(4),i=(e.getMonth()+1).toString().pad(2),r=e.getDate().toString().pad(2),n+"-"+i+"-"+r):t.curVal},property:function(t){var e;return 0===t.curVal.length?(e=this.form.model.node('instance("__session")/session/context/'+t.param),e.get().length?e.getVal()[0]:"no "+t.param+" property in enketo"):t.curVal},context:function(t){return 0===t.curVal.length?"application"===t.param?"enketo":t.param+" not supported in enketo":t.curVal},patient:function(t){return 0===t.curVal.length?"patient preload item not supported in enketo":t.curVal},user:function(t){return 0===t.curVal.length?"user preload item not supported in enketo yet":t.curVal},uid:function(t){return 0===t.curVal.length?this.form.model.evaluate('concat("uuid:", uuid())',"string"):t.curVal}}},{jquery:72}],27:[function(t,e,n){"use strict";var i=t("jquery");e.exports={status:0,lastChanged:null,$all:null,updateTotal:function(){this.$all=this.form.view.$.find(".question").not(".disabled, .or-appearance-comment, .or-appearance-dn").filter(function(){return 0===i(this).parentsUntil(".or",".disabled").length})},update:function(t){var e;this.$all&&t||this.updateTotal(),this.lastChanged=t||this.lastChanged,e=Math.round(100*(this.$all.index(i(this.lastChanged).closest(".question"))+1)/this.$all.length),e>0&&e!==this.status&&(this.status=e,this.form.view.$.trigger("progressupdate.enketo",e))},get:function(){return this.status}}},{jquery:72}],28:[function(t,e,n){"use strict";var i=t("jquery"),r=t("enketo/config"),o=r.repeatOrdinals===!0;e.exports={init:function(){var t,e=this;if(!this.form)throw new Error("Repeat module not correctly instantiated with form property.");t=this.form.view.$.find(".or-repeat-info"),this.templates={},t.siblings(".or-repeat").filter(function(){return this.firstChild&&3===this.firstChild.nodeType&&(this.firstChild.textContent=""),!!this.querySelector(".question")}).prepend('<span class="repeat-number"></span>'),t.filter("*:not([data-repeat-fixed]):not([data-repeat-count])").append('<button type="button" class="btn btn-default add-repeat-btn"><i class="icon icon-plus"> </i></button>').siblings(".or-repeat").append('<div class="repeat-buttons"><button type="button" '+(o?" disabled ":" ")+'class="btn btn-default remove"><i class="icon icon-minus"> </i></button></div>'),this.form.model.extractFakeTemplates(t.map(function(){return this.dataset.name}).get()),t.siblings(".or-repeat").reverse().each(function(){var t=i(this).remove(),n=t.attr("name");e.templates[n]=t[0]}),t.filter("*:not([data-repeat-count])").reverse().each(function(){i(this).closest(".or-repeat").length||e.updateDefaultFirstRepeatInstance(null,this)}).each(e.updateViewInstancesFromModel.bind(this)),this.form.view.$.on("click","button.add-repeat-btn:enabled",function(){return e.add(i(this).closest(".or-repeat-info")[0]),!1}),this.form.view.$.on("click","button.remove:enabled",function(){return e.remove(i(this).closest(".or-repeat")),!1}),this.countUpdate()},updateViewInstancesFromModel:function(t,e){var n=this,r=i(e),o=e.dataset.name,s=this.form.view.$.find('.or-repeat-info[data-name="'+o+'"]').index(e),a=this.form.model.getRepeatSeries(o,s),u=r.siblings(".or-repeat");return a.length>u.length&&(this.add(e,a.length-u.length),r.siblings(".or-repeat").find(".or-repeat-info:not([data-repeat-count])").each(function(){n.updateViewInstancesFromModel(null,this)})),a.length},updateDefaultFirstRepeatInstance:function(t,e){var n,r,o=this,s=i(e),a=e.dataset.name;o.form.model.data.instanceStr||this.templates[a].classList.contains("or-appearance-minimal")||(n=this.form.view.$.find('.or-repeat-info[data-name="'+a+'"]').index(e),r=this.form.model.getRepeatSeries(a,n),0===r.length&&this.add(e),s.siblings(".or-repeat").find(".or-repeat-info:not([data-repeat-count])").each(o.updateDefaultFirstRepeatInstance.bind(o)))},updateRepeatInstancesFromCount:function(t,e){var n,r,s,a,u,l,c,h=this,d=i(e),p=e.dataset.repeatCount||"";if(p){if(l=e.dataset.name,c=this.form.view.$.find('.or-repeat-info[data-name="'+l+'"]').index(e),r=this.form.model.evaluate(p,"nodes",null,null,!0),r.length&&r[c]?s=Number(r[c].textContent):console.error("Unexpectedly, could not obtain repeat count node"),s=isNaN(s)?0:s,a=d.siblings('.or-repeat[name="'+l+'"]').length,u=s-a,u>0)h.add(e,u);else if(u<0)for(u=Math.abs(u)>=a?-a+(o?1:0):u;u<0;u++)n=d.siblings(".or-repeat").last(),this.remove(n,0);d.siblings(".or-repeat").children(".or-group, .or-group-data").children(".or-repeat-info[data-repeat-count]").each(h.updateRepeatInstancesFromCount.bind(h));
}},countUpdate:function(t){var e;t=t||{},e=this.form.getRelatedNodes("data-repeat-count",".or-repeat-info",t),e.each(this.updateRepeatInstancesFromCount.bind(this))},add:function(t,e){var n,r,o,s,a,u,l,c=this,h=i(t),d=!!e;if(e=e||1,!t)return console.error("Nothing to clone"),!1;for(a=t.dataset.name,n=h.siblings(".or-repeat"),r=i(this.templates[a]).clone(),s=this.form.view.$.find('.or-repeat-info[data-name="'+a+'"]').index(t),l=this.form.model.getRepeatSeries(a,s).length,u=0;u<e;u++)r.find(".option-wrapper").each(this.fixRadioNames),r.insertBefore(t),r.prev(".or-repeat").length&&r.addClass("clone"),n=n.add(r),n.length>l&&(this.form.model.addRepeat(a,s),l++),o=o||this.form.view.$.find('.or-repeat[name="'+a+'"]').index(r),r.trigger("addrepeat",[o,d]),this.form.widgetsInitialized?this.form.widgets.init(r):c.form.calc.update({repeatPath:a,repeatIndex:o}),r.find(".or-repeat-info:not([data-repeat-count])").each(this.updateDefaultFirstRepeatInstance.bind(this)),r=i(this.templates[a]).clone(),o++;return this.numberRepeats(t),this.toggleButtons(t),!0},remove:function(t,e){var n=this,i=t.next(".or-repeat, .or-repeat-info"),r=t.attr("name"),o=this.form.view.$.find('.or-repeat[name="'+r+'"]').index(t),s=t.siblings(".or-repeat-info")[0];e="undefined"!=typeof e?e:600,t.hide(e,function(){t.remove(),n.numberRepeats(s),n.toggleButtons(s),i.trigger("removerepeat"),n.form.model.node(r,o).remove()})},fixRadioNames:function(t,e){i(e).find('input[type="radio"]').attr("name",Math.floor(1e7*Math.random()+1))},toggleButtons:function(t){i(t).siblings(".or-repeat").children(".repeat-buttons").find("button.remove").prop("disabled",!1).first().prop("disabled",o)},numberRepeats:function(t){i(t).siblings(".or-repeat").each(function(t,e){i(e).children(".repeat-number").text(t+1)})}}},{"enketo/config":6,jquery:72}],29:[function(t,e,n){"use strict";var i=navigator.userAgent;e.exports={os:{get ios(){return/iPad|iPhone|iPod/i.test(i)},get android(){return/android/i.test(i)}}}},{}],30:[function(t,e,n){"use strict";var i=t("./sniffer").os,r={},o=!1;["date","datetime","time","month"].forEach(function(t){var e=document.createElement("input");e.setAttribute("type",t),r[t]="text"!==e.type}),(i.ios||i.android)&&(o=!0,document.documentElement.classList.add("touch")),e.exports={get inputtypes(){return console.deprecate("support.inputtypes","support.inputTypes"),r},get inputTypes(){return r},get touch(){return o},set touch(t){o=t}}},{"./sniffer":29}],31:[function(t,e,n){"use strict";function i(t,e,n){this.message=t,this.translationKey=e,this.translationOptions=n}i.prototype=Object.create(Error.prototype),i.prototype.name="TranslatedError",e.exports=i},{}],32:[function(t,e,n){"use strict";var i=t("./utils"),r={string:{validate:function(){return!0}},select:{validate:function(){return!0}},select1:{validate:function(){return!0}},decimal:{convert:function(t){var e=Number(t);return isNaN(e)||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY?"":e},validate:function(t){var e=Number(t);return!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY}},"int":{convert:function(t){var e=Number(t);return isNaN(e)||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY?"":e>=0?Math.floor(e):-Math.floor(Math.abs(e))},validate:function(t){var e=Number(t);return!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY&&Math.round(e)===e&&e.toString()===t.toString()}},date:{validate:function(t){var e=/([0-9]{4})-([0-9]{2})-([0-9]{2})/,n=e.exec(t);if(n&&4===n.length){var i=Number(n[1]),r=Number(n[2])-1,o=Number(n[3]),s=new Date(i,r,o);return s.getFullYear()===i&&s.getMonth()===r&&s.getDate()===o}return!1},convert:function(t){var e;return e=i.isNumber(t)?new Date(24*t*60*60*1e3):this.validate(t)?new Date(t):"Invalid Date","Invalid Date"===e.toString()?"":e.getUTCFullYear().toString().pad(4)+"-"+(e.getUTCMonth()+1).toString().pad(2)+"-"+e.getUTCDate().toString().pad(2)}},datetime:{validate:function(t){var e=t.split("T");return 2===e.length&&(r.date.validate(e[0])&&r.time.validate(e[1],!1))},convert:function(t){var e="Invalid Date",n=t.split("T");if(i.isNumber(t))e=new Date(24*t*60*60*1e3);else if(/[0-9]T[0-9]/.test(t)&&2===n.length){var o=r.date.convert(n[0]),s=r.time.convert(n[1],!1);if(o&&s)return o+"T"+s}return"Invalid Date"!==e.toString()?e.toISOLocalString():""}},time:{validate:function(t,e){var n=t.match(/^(\d\d):(\d\d):(\d\d)\.\d\d\d(\+|-)(\d\d):(\d\d)$/);return e="boolean"!=typeof e||e,n||e||(n=t.match(/^(\d\d):(\d\d):(\d\d)(\+|-)(\d\d):(\d\d)$/)),!!n&&(n[1]<24&&n[1]>=0&&n[2]<60&&n[2]>=0&&n[3]<60&&n[3]>=0&&n[5]<24&&n[5]>=0&&n[6]<60&&n[6]>=0)},convert:function(t,e){var n,i,r,o,s,a,u={},l=/^[0-9]{1,2}:[0-9]{1,2}(:[0-9.]*)?/;if(e="boolean"!=typeof e||e,!l.test(t)){if(n=new Date(t),"Invalid Date"===n.toString())return"";t=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+"."+n.getMilliseconds()+n.getTimezoneOffsetAsTime()}return i=t.toString().split(/(\+|-|Z)/),i.length<1?"":(r=i[0].split(":"),s=i[2]?[i[1]].concat(i[2].split(":")):"Z"===i[1]?["+","00","00"]:[],u.hours=r[0].pad(2),u.minutes=r[1].pad(2),o=r[2]?r[2].split("."):["00"],u.seconds=o[0],u.milliseconds=o[1]||(e?"000":void 0),a=0===s.length?(new Date).getTimezoneOffsetAsTime():s[0]+s[1].pad(2)+":"+(s[2]?s[2].pad(2):"00"),t=u.hours+":"+u.minutes+":"+u.seconds+(u.milliseconds?"."+u.milliseconds:"")+a,this.validate(t,e)?t:"")}},barcode:{validate:function(){return!0}},geopoint:{validate:function(t){var e=t.toString().trim().split(" ");return""!==e[0]&&e[0]>=-90&&e[0]<=90&&""!==e[1]&&e[1]>=-360&&e[1]<=360&&("undefined"==typeof e[2]||!isNaN(e[2]))&&("undefined"==typeof e[3]||!isNaN(e[3])&&e[3]>=0)},convert:function(t){return t.toString().trim()}},geotrace:{validate:function(t){var e=t.toString().split(";");return e.length>=2&&e.every(function(t){return r.geopoint.validate(t)})},convert:function(t){return t.toString().trim()}},geoshape:{validate:function(t){var e=t.toString().split(";");return e.length>=4&&e[0]===e[e.length-1]&&e.every(function(t){return r.geopoint.validate(t)})},convert:function(t){return t.toString().trim()}},binary:{validate:function(){return!0}}};e.exports=r},{"./utils":33}],33:[function(t,e,n){"use strict";function i(t,e){var n,i,r,o,s,a,u=new RegExp(e+"\\s*\\(","g"),l=[];if(!t||!e)return l;for(;null!==(i=u.exec(t));){for(r=1,a=[],o=i.index,s=u.lastIndex,n=s-1;0!==r&&n<t.length;)n++,"("===t[n]?r++:")"===t[n]?r--:","===t[n]&&1===r&&(a.push(t.substring(s,n).trim()),s=n+1);s<n&&a.push(t.substring(s,n).trim()),l.push([t.substring(o,n+1),a])}return l}function r(t){return/^".+"$/.test(t)||/^'.+'$/.test(t)?t.substring(1,t.length-1):t}function o(t,e){var n;return"object"==typeof t&&null!==t&&t.name?(e=e||"",n=t.name.split("."),n.length>1?n[n.length-2]+=e:1===n.length&&(n[0]+=e),n.join(".")):""}function s(t){for(var e=[],n=t.length>>>0;n--;)e[n]=t[n];return e}function a(t){return!isNaN(parseFloat(t))&&isFinite(t)}function u(t){var e,n,i;if(h)return h[t];for(e=document.cookie.split("; "),h={},i=e.length-1;i>=0;i--)n=e[i].split("="),n[1]=decodeURIComponent(n[1]),"s:"===n[1].substr(0,2)&&(n[1]=n[1].slice(2),n[1]=n[1].slice(0,n[1].lastIndexOf("."))),h[n[0]]=decodeURIComponent(n[1]);return h[t]}function l(t){var e,n,i,r;e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),r=new Uint8Array(i);for(var o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return new Blob([r],{type:n})}function c(t){var e=t.originalEvent.clipboardData||window.clipboardData;return e?e.getData("text"):null}var h;e.exports={parseFunctionFromExpression:i,stripQuotes:r,getFilename:o,toArray:s,isNumber:a,readCookie:u,dataUriToBlobSync:l,getPasteData:c}},{}],34:[function(t,e,n){"use strict";var i,r,o,s,a,u,l,c,h,d,p=t("jquery"),f=t("enketo/widgets").filter(function(t){return t.selector});o=function(t,e){if(!this.form)throw new Error("Widgets module not correctly instantiated with form property.");return r=this.form.view.$,t=t||r,i=i||e,f.forEach(function(e){l(e,t)}),!0},s=function(t){for(var e,n,i=0;i<f.length;i++)e=f[i],e.name&&(n=u(t,e.selector),n[e.name]("enable"))},a=function(t){for(var e,n,i=0;i<f.length;i++)e=f[i],e.name&&(n=u(t,e.selector),n[e.name]("disable"))},u=function(t,e){return e?"form"===e?r:t.is(".question")?t.find("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)").filter(e):t.find(e):p()},l=function(t,e){var n;return t.options=t.options||{},t.name?(t.helpersRequired&&t.helpersRequired.length>0&&(t.options.helpers={},t.helpersRequired.forEach(function(e){t.options.helpers[e]=i[e]})),n=u(e,t.selector),void(n.length&&(n[t.name](t.options),c(t,n),h(t,n),d(t,n)))):console.error("widget doesn't have a name")},c=function(t,e){e.length>0&&r.on("changelanguage",function(){e[t.name]("update")})},h=function(t,e){e.length>0&&t.list&&e.on("changeoption",function(){p(this)[t.name]("update")})},d=function(t,e){var n=e.prop("nodeName").toLowerCase();e.length>0&&("input"===n||"select"===n||"textarea"===n)&&e.on("inputupdate.enketo",function(){p(this)[t.name]("update")})},e.exports={init:o,enable:s,disable:a}},{"enketo/widgets":35,jquery:72}],35:[function(t,e,n){"use strict";e.exports=[t("../widget/note/notewidget"),t("../widget/select-desktop/selectpicker"),t("../widget/select-mobile/selectpicker"),t("../widget/select-autocomplete/autocomplete"),t("../widget/geo/geopicker"),t("../widget/textarea/textarea"),t("../widget/table/tablewidget"),t("../widget/radio/radiopicker"),t("../widget/date/datepicker-extended"),t("../widget/date-native/datepicker-native"),t("../widget/date-mobile/datepicker-mobile"),t("../widget/time/timepicker-extended"),t("../widget/datetime/datetimepicker-extended"),t("../widget/compact/compactpicker"),t("../widget/file/filepicker"),t("../widget/draw/draw-widget"),t("../widget/select-likert/likertitem"),t("../widget/horizontal-choices/horizontalchoices"),t("../widget/analog-scale/analog-scalepicker"),t("../widget/big-image/image-viewer"),t("../widget/comment/commentwidget"),t("../widget/image-map/image-map"),t("../widget/range/range-widget")]},{"../widget/analog-scale/analog-scalepicker":37,"../widget/big-image/image-viewer":38,"../widget/comment/commentwidget":39,"../widget/compact/compactpicker":40,"../widget/date-mobile/datepicker-mobile":41,"../widget/date-native/datepicker-native":42,"../widget/date/datepicker-extended":43,"../widget/datetime/datetimepicker-extended":44,"../widget/draw/draw-widget":45,"../widget/file/filepicker":46,"../widget/geo/geopicker":47,"../widget/horizontal-choices/horizontalchoices":48,"../widget/image-map/image-map":49,"../widget/note/notewidget":50,"../widget/radio/radiopicker":51,"../widget/range/range-widget":52,"../widget/select-autocomplete/autocomplete":53,"../widget/select-desktop/selectpicker":55,"../widget/select-likert/likertitem":56,"../widget/select-mobile/selectpicker":57,"../widget/table/tablewidget":58,"../widget/textarea/textarea":59,"../widget/time/timepicker-extended":60}],36:[function(t,e,n){var i=t("enketo-xpathjs");e.exports=function(t){var e=new i.XPathEvaluator;"function"==typeof t&&t(i),i.bindDomLevel3XPath(this.xml,{window:{JsXPathException:!0,JsXPathExpression:!0,JsXPathNSResolver:!0,JsXPathResult:!0,JsXPathNamespace:!0},document:{jsCreateExpression:function(){return e.createExpression.apply(e,arguments)},jsCreateNSResolver:function(){return e.createNSResolver.apply(e,arguments)},jsEvaluate:function(){return e.evaluate.apply(e,arguments)}}})}},{"enketo-xpathjs":64}],37:[function(t,e,n){"use strict";function i(t,e){this.namespace=s,r.call(this,t,e),this._init()}var r=t("../../js/Widget"),o=t("jquery"),s="analogscalepicker",a=t("../../js/support");t("bootstrap-slider-basic"),i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t=o(this.element).closest(".question").addClass("or-analog-scale-initialized"),e=o(this.element),n=Number(this.element.value)||-1;this.props=this._getProps(t),e.slider({reversed:"vertical"===this.props.orientation,min:0,max:100,orientation:this.props.orientation,step:this.props.step,value:n,enabled:!this.props.readonly}),this.$widget=e.next(".widget"),this.$slider=this.$widget.find(".slider"),this.$labelContent=o('<div class="label-content widget" />').prependTo(t),this.$originalLabels=t.find(".question-label, .or-hint, .or-required-msg, .or-constraint-msg"),this.$labelContent.append(this.$originalLabels),this._renderResetButton(),this._renderLabels(),this._renderScale(),this._setChangeListener(),this._setResizeListener(),e.trigger("programmaticChange"+this.namespace)},i.prototype._getProps=function(t){var e=t.attr("class").split(" ").map(function(t){return t.substring(14)}),n=this.element.attributes["data-type-xml"].value;return{touch:a.touch,readonly:this.element.readOnly,step:"decimal"===n?.1:1,orientation:e.indexOf("horizontal")!==-1?"horizontal":"vertical"}},i.prototype._renderLabels=function(){var t=this.$labelContent.find(".question-label.active"),e=t.html().split(/\|/).map(function(t){return t.trim()});this.$mainLabel=this.$mainLabel||o('<span class="question-label widget active" />').insertAfter(t),this.$mainLabel.empty().append(e[0]),this.$maxLabel=this.$maxLabel||o('<div class="max-label" />').prependTo(this.$widget),this.$maxLabel.empty().append(e[1]),this.$minLabel=this.$minLabel||o('<div class="min-label" />').appendTo(this.$widget),this.$minLabel.empty().append(e[2]),e[3]?(this.$showValue=this.$showValue||o('<div class="widget show-value" />').appendTo(this.$labelContent),this.$showValue.empty().append('<div class="show-value__box">'+e[3]+'<span class="show-value__value">'+this.element.value+"</span></div>")):this.$showValue&&(this.$showValue.remove(),this.$showValue=void 0)},i.prototype._renderScale=function(){var t,e=o('<div class="scale"></div>');if("vertical"===this.props.orientation)for(t=100;t>=0;t-=10)e.append(this._getNumberHtml(t));else for(t=0;t<=100;t+=10)e.append(this._getNumberHtml(t));this.$slider.prepend(e)},i.prototype._getNumberHtml=function(t){return'<div class="scale__number"><div class="scale__ticks"></div><div class="scale__value">'+t+"</div></div>"},i.prototype._renderResetButton=function(){var t=this;this.$resetBtn=o(this.resetButtonHtml).appendTo(this.$widget).on("click",function(){return o(t.element).slider("setValue",0,!1),o(t.element).val("").trigger("programmaticChange"+t.namespace),!1}).prop("disabled",t.props.readonly)},i.prototype._updateCurrentValueShown=function(){this.$showValue&&this.$showValue.find(".show-value__value").text(this.element.value)},i.prototype._setChangeListener=function(){var t=this;o(this.element).on("slideStop."+this.namespace+" programmaticChange"+this.namespace,function(){var e=""===this.value;o(this).trigger("change"),t.$resetBtn.prop("disabled",e||t.props.readonly),t.$slider.toggleClass("slider--empty",e),t._updateCurrentValueShown()})},i.prototype._setResizeListener=function(){var t=o(this.element).closest(".question");t.hasClass("or-appearance-horizontal")||t.on("pageflip.enketo",this._stretchHeight)},i.prototype._stretchHeight=function(){var t=o(this).closest(".question").css("min-height","auto"),e=t.outerHeight(),n=t.closest(".or"),i=n.offset().top+n.height()-(t.offset().top+e)-10;i&&t.css("min-height",e+i+"px")},i.prototype.disable=function(){var t=""!==this.element.value?Number(this.element.value):0;o(this.element).slider("disable").slider("setValue",t,!1)},i.prototype.enable=function(){o(this.element).slider("enable")},i.prototype.update=function(){var t=this,e=""!==this.element.value?Number(this.element.value):0,n=o(this.element),i=n.slider("getValue");e!==i&&o(this.element).slider("setValue",e,!1).trigger("programmaticChange"+t.namespace),this._renderLabels()},o.fn[s]=function(t,e){return this.each(function(){var n=o(this),r=o(this).data(s);t=t||{},r||"object"!=typeof t?r&&"string"==typeof t&&r[t](this):n.data(s,new i(this,t,e))})},e.exports={name:s,selector:'.or-appearance-analog-scale input[type="number"]'}},{"../../js/Widget":11,"../../js/support":30,"bootstrap-slider-basic":5,jquery:72}],38:[function(t,e,n){"use strict";function i(t,e){this.namespace=s,r.call(this,t,e),this._init()}var r=t("../../js/Widget"),o=t("jquery"),s="imageViewer";i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){o(this.element).on("click",function(){var t=o(this),e=t.attr("href"),n=t.find("img"),i=n.attr("src");return t.attr("href",i),n.attr("src",e),t.toggleClass("open"),!1})},o.fn[s]=function(t,e){return t=t||{},this.each(function(){var n=o(this),r=n.data(s);r||"object"!=typeof t?r&&"string"==typeof t&&r[t](this):n.data(s,new i(this,t,e))})},e.exports={name:s,selector:"a.or-big-image"}},{"../../js/Widget":11,jquery:72}],39:[function(t,e,n){"use strict";function i(t,e){this.namespace=s,r.call(this,t,e),this._init()}var r=t("../../js/Widget"),o=t("jquery"),s="comment",a=t("enketo/translator").t;i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){this.$linkedQuestion=this._getLinkedQuestion(this.element),this.$commentQuestion=o(this.element).closest(".question"),1===this.$linkedQuestion.length&&(this.$commentQuestion.addClass("hide").attr("role","comment"),this.$commentButton=o('<a class="btn-icon-only btn-comment aria-label="comment" type="button" href="#"><i class="icon"> </i></a>'),this._setCommentButtonState(this.element.value),this.$linkedQuestion.find(".question-label").last().after(this.$commentButton),this._setCommentButtonHandler(),this._setValidationHandler(),this._setFocusHandler())},i.prototype._getLinkedQuestion=function(t){var e=o(t),n=this.options.helpers.input.getName(e),i=t.dataset["for"].trim(),r=this.options.helpers.pathToAbsolute(i,n),s=o(t).closest("form.or, .or-repeat");return this.options.helpers.input.getWrapNodes(s.find('[name="'+r+'"], [data-name="'+r+'"]')).eq(0)},i.prototype._commentHasError=function(){return this.$commentQuestion.hasClass("invalid-required")||this.$commentQuestion.hasClass("invalid-constraint")},i.prototype._setCommentButtonState=function(t,e){t="string"==typeof t?t.trim():t,this.$commentButton.toggleClass("empty",!t),this.$commentButton.toggleClass("invalid",!!e)},i.prototype._setCommentButtonHandler=function(){var t=this;this.$commentButton.click(function(){return t._isCommentModalShown(t.$linkedQuestion)?t._hideCommentModal(t.$linkedQuestion):t._showCommentModal(),!1})},i.prototype._setValidationHandler=function(){var t=this;o("form.or").on("validationcomplete.enketo",function(){var e=t._commentHasError(),n=t.element.value;t._setCommentButtonState(n,e)})},i.prototype._setFocusHandler=function(){var t=this;o(this.element).on("applyfocus",function(){t.$commentButton.is(":visible")?t.$commentButton.click():console.log("The linked question is not visible. Cannot apply focus to "+t.element.getAttribute("name"))})},i.prototype._isCommentModalShown=function(t){return 1===t.find(".or-comment-widget").length},i.prototype._showCommentModal=function(){var t,e,n,i,r=this,s=o(this.element).closest(".question").clone(!1),u=a("widget.comment.update")||"Update",l=o('<button class="btn btn-primary or-comment-widget__content__btn-update" type="button">'+u+"</button>"),c=o('<button class="btn-icon-only or-comment-widget__content__btn-close-x" type="button">&times;</button>');n=s.removeClass("hide").find("input, textarea").addClass("ignore").removeAttr("name data-for data-type-xml").removeData(),i=o('<div class="or-comment-widget__overlay"></div>'),e=o('<div class="or-comment-widget__content"></div>').append(s).append(c).append(l),t=o('<section class="widget or-comment-widget"></section>').append(i).append(e),this.$linkedQuestion.find(".or-comment-widget").remove().end().prepend(t).before(i.clone(!1)),n.focus(),t.get(0).scrollIntoView(!1),l.on("click",function(){var t,e=n.val();return o(r.element).val(e).trigger("change"),t=r._commentHasError(),r._setCommentButtonState(e,t),r._hideCommentModal(r.$linkedQuestion),r.options.helpers.input.validate(o(r.$linkedQuestion.get(0).querySelector("input, select, textarea"))),!1}),c.add(i).on("click",function(){return r._hideCommentModal(r.$linkedQuestion),!1})},i.prototype._hideCommentModal=function(t){t.find(".or-comment-widget").remove().end().prev(".or-comment-widget__overlay").remove()},o.fn[s]=function(t,e){return t=t||{},this.each(function(){var n=o(this),r=n.data(s);r||"object"!=typeof t?r&&"string"==typeof t&&r[t](this):n.data(s,new i(this,t,e))})},e.exports={name:s,selector:'.or-appearance-comment input[type="text"][data-for], .or-appearance-comment textarea[data-for]',helpersRequired:["input","pathToAbsolute"]}},{"../../js/Widget":11,"enketo/translator":17,jquery:72}],40:[function(t,e,n){"use strict";function i(t,e){this.namespace=s,o.call(this,t,e),this._init()}var r=t("jquery"),o=t("../../js/Widget"),s="compactpicker";i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype._init=function(){r(this.element).find(".option-label").each(function(){var t=r(this);t.siblings("img, video, audio").length>0&&t.css("display","none")})},r.fn[s]=function(t,e){return t=t||{},this.each(function(){var n=r(this),o=n.data(s);o||"object"!=typeof t?o&&"string"==typeof t&&o[t](this):n.data(s,new i(this,t,e))})},e.exports={name:"compactpicker",selector:'.or-appearance-compact, .or-appearance-quickcompact, [class*="or-appearance-compact-"]'}},{"../../js/Widget":11,jquery:72}],41:[function(t,e,n){"use strict";function i(t,e){this.namespace=s,r.call(this,t,e),this._init()}var r=t("../../js/Widget"),o=t("jquery"),s="datepickerMobile",a=t("../../js/support");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t=o(this.element),e=this.element.value;if(a.inputTypes.month){var n=o('<input class="ignore widget datepicker-mobile" type="month"/>');t.addClass("hide"),n.val(e?e.substring(0,e.lastIndexOf("-")):"").insertAfter(t).on("change",function(){var e=this.value?this.value+"-01":"";t.val(e).trigger("change")})}},o.fn[s]=function(t,e){return t=t||{},this.each(function(){var n=o(this),r=n.data("datepickerExtended"),u=n.data(s);r||"object"!=typeof t||u||!a.touch||n.data(s,new i(this,t,e))})},e.exports={name:s,selector:'.or-appearance-month-year input[type="date"]'}},{"../../js/Widget":11,"../../js/support":30,jquery:72}],42:[function(t,e,n){"use strict";function i(t,e){this.namespace=s,r.call(this,t,e),this._init()}var r=t("../../js/Widget"),o=t("jquery"),s="datepickerNative",a=t("../../js/support");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){this.element.type="text",this.element.classList.add("mask-date")},o.fn[s]=function(t,e){return t=t||{},this.each(function(){var n=o(this),r=n.data("datepickerExtended"),u=n.data(s);r||"object"!=typeof t||u||a.touch||n.data(s,new i(this,t,e))})},e.exports={name:s,selector:'input[type="date"]'}},{"../../js/Widget":11,"../../js/support":30,jquery:72}],43:[function(t,e,n){"use strict";function i(t,e){this.namespace=l,r.call(this,t,e),this._init()}var r=t("../../js/Widget"),o=t("../../js/support"),s=t("jquery"),a=t("../../js/types"),u=t("../../js/utils");t("bootstrap-datepicker"),t("../../js/dropdown.jquery");var l="datepickerExtended";i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t=s(this.element).parent("label");this.settings=t.hasClass("or-appearance-year")?{format:"yyyy",startView:"decade",minViewMode:"years"}:t.hasClass("or-appearance-month-year")?{format:"yyyy-mm",startView:"year",minViewMode:"months"}:{format:"yyyy-mm-dd",startView:"month",minViewMode:"days"},this.$fakeDateI=this._createFakeDateInput(this.settings.format),this._setChangeHandler(this.$fakeDateI),this._setFocusHandler(this.$fakeDateI),this._setResetHandler(this.$fakeDateI),this.$fakeDateI.datepicker({format:this.settings.format,autoclose:!0,todayHighlight:!0,startView:this.settings.startView,minViewMode:this.settings.minViewMode,forceParse:!1})},i.prototype._createFakeDateInput=function(t){var e=s(this.element),n=s('<div class="widget date"><input class="ignore input-small" type="text" value="'+e.val()+'" placeholder="'+t+'" />'+this.resetButtonHtml+"</div>"),i=n.find("input");return e.hide().after(n),i},i.prototype._setChangeHandler=function(t){var e=s(this.element),n=this.settings;t.on("change paste",function(i){var r="",o="paste"===i.type?u.getPasteData(i):t.val(),s="";return o.length>0&&(u.isNumber(o)&&"yyyy"!==n.format?r="":(o="yyyy-mm"===n.format?o+"-01":"yyyy"===n.format?o+"-01-01":o,r=a.date.convert(o))),""!==r&&e.val()===r||("paste"===i.type&&i.stopImmediatePropagation(),e.val(r).trigger("change").blur()),s="yyyy-mm"===n.format?r.substring(0,r.lastIndexOf("-")):"yyyy"===n.format?r.substring(0,r.indexOf("-")):r,t.val(s).datepicker("update"),!1})},i.prototype._setResetHandler=function(t){var e=this;t.next(".btn-reset").on("click",function(){s(e.element).val()&&t.val("").datepicker("update")})},i.prototype._setFocusHandler=function(t){var e=this;t.on("focus",function(){s(e.element).trigger("fakefocus")}),s(this.element).on("applyfocus",function(){t.focus()})},i.prototype.update=function(){this.$fakeDateI.val(this.element.value).datepicker("update")},s.fn[l]=function(t,e){return t=t||{},this.each(function(){var n=s(this),r=n.data(l),a=/GT-P31[0-9]{2}.+AppleWebKit\/534\.30/;r||"object"!=typeof t||o.touch&&o.inputTypes.date&&!a.test(navigator.userAgent)?r&&"string"==typeof t&&r[t](this):n.data(l,new i(this,t,e))})},e.exports={name:l,selector:'input[type="date"]:not([readonly])'}},{"../../js/Widget":11,"../../js/dropdown.jquery":14,"../../js/support":30,"../../js/types":32,"../../js/utils":33,"bootstrap-datepicker":4,jquery:72}],44:[function(t,e,n){"use strict";function i(t,e){this.namespace=u,r.call(this,t,e),this._init()}var r=t("../../js/Widget"),o=t("../../js/support"),s=t("jquery"),a=t("../../js/types"),u="datetimepickerExtended";t("../../js/extend"),t("bootstrap-datepicker"),t("../time/timepicker"),t("../../js/dropdown.jquery"),i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){function t(){if(e.$fakeDateI.val().length>0&&e.$fakeTimeI.val().length>3){var t=e.$fakeDateI.val().split("-"),i=e.$fakeTimeI.val().split(":");n.val(new Date(t[0],t[1]-1,t[2],i[0],i[1]).toISOLocalString()).trigger("change")}else n.val("").trigger("change")}var e=this,n=s(this.element),i=n.val().length>0?new Date(n.val()).toISOLocalString():"",r=i.split("T"),o=r[0],u=r[1]&&r[1].length>4?r[1].substring(0,5):"";this.$fakeDateI=this._createFakeDateInput(o),this.$fakeTimeI=this._createFakeTimeInput(u),n.hide().after('<div class="datetimepicker widget" />'),n.siblings(".datetimepicker").append(this.$fakeDateI.closest(".date")).append(this.$fakeTimeI.closest(".timepicker")),this.$fakeDateI.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0,forceParse:!1}),this.$fakeTimeI.timepicker({defaultTime:u.length>0&&"value",showMeridian:!1}).closest(".widget").find("input").addClass("ignore"),this._setFocusHandler(this.$fakeDateI.add(this.$fakeTimeI)),this.$fakeDateI.on("change changeDate",function(){return a.date.validate(this.value)||e.$fakeDateI.val("").datepicker("update"),t(),!1}),this.$fakeTimeI.on("change",function(){return t(),!1}),this.$fakeTimeI.next(".btn-reset").on("click",function(){var t=n.val()?"change":"";(t||e.$fakeDateI.val()||e.$fakeTimeI.val())&&(e.$fakeDateI.val("").trigger(t).datepicker("update"),e.$fakeTimeI.val("").trigger(t))})},i.prototype._createFakeDateInput=function(t){var e=s('<div class="date"><input class="ignore" type="text" value="'+t+'" placeholder="yyyy-mm-dd"/></div>'),n=e.find("input");return n},i.prototype._createFakeTimeInput=function(t){var e=s('<div class="timepicker"><input class="ignore timepicker-default" type="text" value="'+t+'" placeholder="hh:mm"/>'+this.resetButtonHtml+"</div>"),n=e.find("input");return n},i.prototype.update=function(){var t=s(this.element),e=t.val().length>0?new Date(t.val()).toISOLocalString():"",n=e.split("T"),i=n[0],r=n[1]&&n[1].length>4?n[1].substring(0,5):"";this.$fakeDateI.val(i),this.$fakeTimeI.val(r)},i.prototype._setFocusHandler=function(t){var e=this;t.on("focus",function(){s(e.element).trigger("fakefocus")}),s(this.element).on("applyfocus",function(){t.eq(0).focus()})},s.fn[u]=function(t,e){return t=t||{},this.each(function(){var n=s(this),r=n.data(u),a=/GT-P31[0-9]{2}.+AppleWebKit\/534\.30/;r||"object"!=typeof t||o.touch&&o.inputTypes.datetime&&!a.test(navigator.userAgent)?r&&"string"==typeof t&&r[t](this):n.data(u,new i(this,t,e))})},e.exports={name:u,selector:'input[type="datetime"]:not([readonly])'}},{"../../js/Widget":11,"../../js/dropdown.jquery":14,"../../js/extend":15,"../../js/support":30,"../../js/types":32,"../time/timepicker":61,"bootstrap-datepicker":4,jquery:72}],45:[function(t,e,n){"use strict";function i(t,e){this.namespace=s,r.call(this,t,e),this._init()}var r=t("../../js/Widget"),o=t("jquery"),s="drawWidget",a=t("../../js/support"),u=t("enketo/file-manager"),l=t("signature_pad"),c=t("enketo/translator").t,h=t("enketo/dialog"),d=t("../../js/utils"),p=t("lie");l.prototype.fromObjectURL=function(t,e){var n=new Image;e=e||{};var i=e.ratio||window.devicePixelRatio||1,r=e.width||this._canvas.width/i,o=e.height||this._canvas.height/i,s=this;return this._reset(),new p(function(e){n.src=t,n.onload=function(){var i,a,u=n.width,l=n.height,c=r/u,h=o/l;if(c<1||h<1){var d=Math.min(c,h);i=(r-u*d)/2,a=(o-l*d)/2,s._ctx.drawImage(n,0,0,u,l,i,a,u*d,l*d)}else i=(r-u)/2,a=(o-l)/2,s._ctx.drawImage(n,i,a,u,l);e(t)},s._isEmpty=!1})},l.prototype.updateData=function(t){var e=this;this._fromData(t,function(t,n){e._drawCurve(t,n.start,n.end)},function(t){e._drawDot(t)}),this._data=t},i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t,e=this,n=this.element.dataset.loadedFileName;this.element.type="text",this.element.dataset.drawing=!0,this.props=this._getProps(this.element),this.$widget=this._getMarkup(),t=this.$widget[0].querySelector(".draw-widget__body__canvas"),o(this.element).after(this.$widget).closest(".question").addClass("or-"+this.props.type+"-initialized"),this._handleResize(t),this._resizeCanvas(t),this.props.load&&this._handleFiles(n),this.initialize=u.init().then(function(){return e.pad=new l(t,{onEnd:e._updateValue.bind(e),penColor:e.props.colors[0]||"black"}),e.pad.off(),!n||(e.element.value=n,e._loadFileIntoPad(n).then(e._updateDownloadLink.bind(e)))}),this.disable(),this.initialize.then(function(){e.$widget.find(".btn-reset").on("click",e._reset.bind(e)).end().find(".draw-widget__colorpicker").on("click",".current",function(){o(this).parent().toggleClass("reveal")}).on("click","[data-color]:not(.current)",function(){o(this).siblings().removeClass("current").end().addClass("current").parent().removeClass("reveal"),e.pad.penColor=this.dataset.color}).end().find(".draw-widget__undo").on("click",function(){var t=e.pad.toData();e.pad.clear();var n=e.$widget[0].querySelector("input[type=file]"),i=n&&n.files[0]?n.files[0]:e.element.dataset.loadedFileName;e._loadFileIntoPad(i).then(function(){e.pad.updateData(t.slice(0,-1)),e._updateValue(),e.pad.penColor=e.$widget.find(".draw-widget__colorpicker .current")[0].dataset.color})}).end().find(".show-canvas-btn").on("click",function(){return e.$widget.addClass("full-screen"),e._resizeCanvas(t),e.enable(),!1}).end().find(".hide-canvas-btn").on("click",function(){return e.$widget.removeClass("full-screen"),e.pad.off(),e._resizeCanvas(t),!1}).click(),o(t).on("canvasreload."+e.namespace,function(){e.cache&&e.pad.fromObjectURL(e.cache)}),e.enable()})["catch"](function(t){e._showFeedback(t.message)}),o(this.element).on("applyfocus",function(){t.focus()}).closest('[role="page"]').on("pageflip.enketo",function(){e._resizeCanvas(t)})},i.prototype._getProps=function(t){var e=o(t).closest(".question"),n=e.hasClass("or-appearance-draw")?"drawing":e.hasClass("or-appearance-signature")?"signature":"annotation";return{readonly:t.readOnly,type:n,filename:n+".png",load:e.hasClass("or-appearance-annotate"),colors:e.hasClass("or-appearance-signature")?[]:["black","lightblue","blue","red","orange","cyan","yellow","lightgreen","green","pink","purple","lightgray","darkgray"],
touch:a.touch,accept:t.getAttribute("accept"),capture:t.getAttribute("capture")}},i.prototype._handleFiles=function(t){this._updatePlaceholder(),this.$widget.closest("form.or").on("updateMaxSize",this._updatePlaceholder.bind(this));var e=this,n=this.$widget.find("input[type=file]"),i=this.$widget.find(".fake-file-input");this._showFileName(t),n.on("click."+this.namespace,function(t){if(e.props.readonly||"propagate"!==t.namespace)return e.$fakeInput.focus(),t.stopImmediatePropagation(),!1}).on("change."+this.namespace,function(){var t=this.files[0];t?u.isTooLarge(t)?e._showFeedback(c("filepicker.toolargeerror",{maxSize:u.getMaxSizeReadable()})):(e.pad.clear(),e._loadFileIntoPad(this.files[0]).then(function(){e._updateValue.call(e),e._showFileName(t.name),e.enable()})):e._showFileName(null)}),i.on("click."+this.namespace,function(t){return e.props.readonly||n[0].value||i[0].value?(o(this).focus(),t.stopImmediatePropagation(),!1):(t.preventDefault(),void n.trigger("click.propagate"))}).on("change."+this.namespace,function(){return!1})},i.prototype._showFileName=function(t){this.$widget.find(".fake-file-input").val(t).prop("readonly",!!t)},i.prototype._updatePlaceholder=function(){this.$widget.find(".fake-file-input").attr("placeholder",c("filepicker.placeholder",{maxSize:u.getMaxSizeReadable()||"?MB"}))},i.prototype._getMarkup=function(){var t=this.props.load?'<input type="file" class="ignore draw-widget__load"'+(null!==this.props.capture?' capture="'+this.props.capture+'"':"")+' accept="'+this.props.accept+'"/><div class="widget file-picker"><input class="ignore fake-file-input"/><div class="file-feedback"></div></div>':"",e=this.props.touch?'<button type="button" class="show-canvas-btn btn btn-default">Draw/Sign</button><button type="button" class="hide-canvas-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button>':"",n=o('<div class="widget draw-widget"><div class="draw-widget__body">'+e+t+'<canvas class="draw-widget__body__canvas noSwipe disabled" tabindex="0"></canvas><div class="draw-widget__colorpicker"></div>'+("signature"===this.props.type?"":'<button class="btn-icon-only draw-widget__undo" aria-label="undo" type=button><i class="icon icon-undo"> </i></button>')+'</div><div class="draw-widget__footer">'+this.resetButtonHtml+this.downloadButtonHtml+'<div class="draw-widget__feedback"></div></div></div>'),i=n.find(".draw-widget__colorpicker");return this.props.colors.forEach(function(t,e){var n=0===e?" current":"";i.append('<div class="'+n+'"data-color="'+t+'" style="background: '+t+';" />')}),n},i.prototype._updateValue=function(){var t=new Date,e="-"+t.getHours()+"_"+t.getMinutes()+"_"+t.getSeconds();this.cache=this.pad.toDataURL(),this.element.dataset.filenamePostfix=e,o(this.element).val(this.props.filename).trigger("change"),this._updateDownloadLink(this.cache)},i.prototype._reset=function(){var t=this;if(this.element.value){var e=c("signature"===this.props.type?"drawwidget.signature":"drawing"===this.props.type?"drawwidget.drawing":"drawwidget.annotation");h.confirm(c("filepicker.resetWarning",{item:e})).then(function(){t.pad.clear(),t.cache=null,delete t.element.dataset.loadedFileName,t.element.dataset.filenamePostfix="",o(t.element).val("").trigger("change"),t.$widget.find("input[type=file]").val("").trigger("change"),t._updateDownloadLink(""),t.disable(),t.enable()})}},i.prototype._loadFileIntoPad=function(t){var e=this;return t?u.getObjectUrl(t).then(e.pad.fromObjectURL.bind(e.pad)).then(function(t){return e.cache=t,t})["catch"](function(){e._showFeedback("File could not be loaded (leave unchanged if already submitted and you want to preserve it).","error")}):p.resolve("")},i.prototype._showFeedback=function(t){t=t||"",this.$widget.find(".draw-widget__feedback").text(t)},i.prototype._updateDownloadLink=function(t){t&&0===t.indexOf("data:")&&(t=URL.createObjectURL(d.dataUriToBlobSync(t))),this.$widget.find(".btn-download").attr({href:t||"",download:t?d.getFilename({name:this.element.value},this.element.dataset.filenamePostfix):""})},i.prototype._handleResize=function(t){var e=this;o(window).on("resize",function(){e._resizeCanvas(t)})},i.prototype._resizeCanvas=function(t){var e=Math.max(window.devicePixelRatio||1,1);t.width=t.offsetWidth*e,t.height=t.offsetHeight*e,t.getContext("2d").scale(e,e),o(t).trigger("canvasreload."+this.namespace)},i.prototype.disable=function(){var t=this,e=this.$widget.find(".draw-widget__body__canvas")[0];this.initialize.then(function(){t.pad.off(),e.classList.add("disabled"),t.$widget.find(".btn-reset").prop("disabled",!0)})},i.prototype.enable=function(){var t=this,e=this.$widget.find(".draw-widget__body__canvas")[0],n=this.props.touch&&!this.$widget.is(".full-screen"),i=this.props.load&&!this.element.value;this.initialize.then(function(){t.props.readonly||i||n||(t.pad.on(),e.classList.remove("disabled"),t.$widget.find(".btn-reset").prop("disabled",!1)),t._resizeCanvas(e)})},i.prototype.update=function(t){""===t.value&&this._reset()},o.fn[s]=function(t,e){return t=t||{},this.each(function(){var n=o(this),r=n.data(s);r||"object"!=typeof t||n.data(s,new i(this,t,e)),r&&"string"==typeof t&&r[t](this)})},e.exports={name:s,selector:'.or-appearance-draw input[data-type-xml="binary"][accept^="image"], .or-appearance-signature input[data-type-xml="binary"][accept^="image"], .or-appearance-annotate input[data-type-xml="binary"][accept^="image"]'}},{"../../js/Widget":11,"../../js/support":30,"../../js/utils":33,"enketo/dialog":16,"enketo/file-manager":18,"enketo/translator":17,jquery:72,lie:7,signature_pad:85}],46:[function(t,e,n){"use strict";function i(t,e,n){n&&(n.stopPropagation(),n.preventDefault()),this.namespace=u,o.call(this,t,e),this._init()}var r=t("jquery"),o=t("../../js/Widget"),s=t("enketo/file-manager"),a=t("../../js/utils"),u="filepicker",l=t("enketo/translator").t,c=t("../../js/translated-error"),h=t("enketo/dialog");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t=r(this.element),e=t.attr("data-loaded-file-name"),n=this;this.props=this._getProps(),t.prop("disabled",!0).addClass("hide").parent().addClass("with-media clearfix"),this.$widget=r('<div class="widget file-picker"><input class="ignore fake-file-input"/>'+(this.props.readonly?"":this.resetButtonHtml)+this.downloadButtonHtml+'<div class="file-feedback"></div><div class="file-preview"></div></div>').insertAfter(t),this.$feedback=this.$widget.find(".file-feedback"),this.$preview=this.$widget.find(".file-preview"),this.$fakeInput=this.$widget.find(".fake-file-input"),this.$downloadLink=this.$widget.find(".btn-download"),this.$widget.find(".btn-reset").on("click",function(){(t.val()||n.$fakeInput.val())&&h.confirm(l("filepicker.resetWarning",{item:l("filepicker.file")})).then(function(){t.val("").trigger("change")})}).end(),n._focusListener(),this._showFileName(e),s.isWaitingForPermissions()&&this._showFeedback(l("filepicker.waitingForPermissions"),"warning"),this._updatePlaceholder(),t.closest("form.or").on("updateMaxSize",this._updatePlaceholder.bind(this)),s.init().then(function(){n._showFeedback(),n._changeListener(),t.prop("disabled",!1),e&&s.getFileUrl(e).then(function(t){n._showPreview(t,n.props.mediaType),n._updateDownloadLink(t,e)})["catch"](function(){n._showFeedback(l("filepicker.notFound",{existing:e}),"error")})})["catch"](function(t){n._showFeedback(t,"error")})},i.prototype._getProps=function(){return{mediaType:this.element.getAttribute("accept"),readonly:this.element.readOnly}},i.prototype._updatePlaceholder=function(){this.$fakeInput.attr("placeholder",l("filepicker.placeholder",{maxSize:s.getMaxSizeReadable()||"?MB"}))},i.prototype._changeListener=function(){var t=this;r(this.element).on("click",function(e){if(t.props.readonly||"propagate"!==e.namespace)return t.$fakeInput.focus(),e.stopImmediatePropagation(),!1}).on("change.propagate."+this.namespace,function(e){var n,i,o,u=r(this),l=u.attr("data-loaded-file-name"),c=new Date;return"propagate"===e.namespace?(u.trigger("change.file"),!1):(e.stopImmediatePropagation(),n=this.files[0],o="-"+c.getHours()+"_"+c.getMinutes()+"_"+c.getSeconds(),this.dataset.filenamePostfix=o,i=a.getFilename(n,o),void s.getFileUrl(n,i).then(function(e){t._showPreview(e,t.props.mediaType),t._showFeedback(),t._showFileName(i),l&&l!==i&&u.removeAttr("data-loaded-file-name"),t._updateDownloadLink(e,i),u.trigger("change.propagate")})["catch"](function(e){u.val("").trigger("change.propagate"),t._showFileName(""),t._showPreview(null),t._showFeedback(e,"error"),t._updateDownloadLink("","")}))}),this.$fakeInput.on("click",function(e){return t.props.readonly||t.element.value||t.$fakeInput[0].value?(r(this).focus(),e.stopImmediatePropagation(),!1):(e.preventDefault(),void r(t.element).trigger("click.propagate"))}).on("change",function(){return!1})},i.prototype._focusListener=function(){var t=this;this.$fakeInput.on("focus",function(){r(t.element).trigger("fakefocus")}),r(this.element).on("applyfocus",function(){t.$fakeInput.focus()})},i.prototype._showFileName=function(t){this.$fakeInput.val(t).prop("readonly",!!t)},i.prototype._showFeedback=function(t,e){var n=t instanceof c?l(t.translationKey,t.translationOptions):t instanceof Error?t.message:t||"";e=e||"",this.$feedback.text(n).attr("class","file-feedback "+e)},i.prototype._showPreview=function(t,e){var n;switch(this.$widget.find(".file-preview").empty(),e){case"image/*":n=r("<img />");break;case"audio/*":n=r('<audio controls="controls"/>');break;case"video/*":n=r('<video controls="controls"/>');break;default:n=r("")}t&&this.$preview.append(n.attr("src",t))},i.prototype._updateDownloadLink=function(t,e){this.$downloadLink.attr({href:t||"",download:e||""})},r.fn[u]=function(t,e){return t=t||{},this.each(function(){var n=r(this),o=n.data(u);o||"object"!=typeof t?o&&"string"==typeof t&&o[t](this):n.data(u,new i(this,t,e))})},e.exports={name:u,selector:'.question:not(.or-appearance-draw):not(.or-appearance-signature):not(.or-appearance-annotate) input[type="file"]'}},{"../../js/Widget":11,"../../js/translated-error":31,"../../js/utils":33,"enketo/dialog":16,"enketo/file-manager":18,"enketo/translator":17,jquery:72}],47:[function(t,e,n){"use strict";function i(t,e){this.namespace=f,s.call(this,t,e),this._init()}var r,o=t("jquery"),s=t("../../js/Widget"),a=t("enketo/config"),u=t("leaflet"),l=t("lie"),c=t("enketo/translator").t,h=t("../../js/support"),d=t("../../js/types"),p=t("enketo/dialog"),f="geopicker",m=15,g=a&&a.maps&&a.maps.length>0?a.maps:[{name:"streets",maxzoom:24,tiles:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],attribution:'© <a href="http://openstreetmap.org">OpenStreetMap</a> | <a href="www.openstreetmap.org/copyright">Terms</a>'}],v="https://maps.googleapis.com/maps/api/geocode/json?address={address}&sensor=true&key={api_key}",y=a.googleApiKey||a.google_api_key,_=u.divIcon({iconSize:24,className:"enketo-geopoint-marker"}),b=u.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker"}),w=u.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker-active"});t("leaflet-draw"),t("leaflet.gridlayer.googlemutant"),i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t=o(this.element).val().trim(),e=this;this.$form=o(this.element).closest("form.or"),this.$question=o(this.element).closest(".question"),this.mapId=Math.round(1e7*Math.random()),this.props=this._getProps(),this._addDomElements(),this.currentIndex=0,this.points=[],t&&o(this.element).val().trim().split(";").forEach(function(t,n){e.points[n]=t.trim().split(" "),e.points[n].forEach(function(t,e,n){n[e]=Number(t)})}),this.$widget.find('[name="lat"], [name="long"], [name="alt"], [name="acc"]').on("change change.bymap change.bysearch",function(t){var n=e.$lat.val()?Number(e.$lat.val()):"",i=e.$lng.val()?Number(e.$lng.val()):"",r=e.$alt.val()?Number(e.$alt.val()):"",o=e.$acc.val()?Number(e.$acc.val()):"",s={lat:n,lng:i};t.stopImmediatePropagation(),"bymap"!==t.namespace&&"bysearch"!==t.namespace&&e.polyline&&!e.containsEmptyPoints(e.points,e.currentIndex)&&e.updatedPolylineWouldIntersect(s,e.currentIndex)?(e._showIntersectError(),e._updateInputs(e.points[e.currentIndex],"nochange")):(e._editPoint([n,i,r,o]),"bysearch"!==t.namespace&&e.$search&&e.$search.val(""))}),this.$kmlInput.on("change",function(t){var n=e.$points.find(".addpoint"),i=o(this).prev(".paste-progress").removeClass("hide"),r=t.target.value,s=e._convertKmlCoordinatesToLeafletCoordinates(r);t.target.value="",setTimeout(function(){s.forEach(function(t,i){e._updateInputs(t),i<s.length-1&&n.click()}),i.remove(),e._switchInputType("points")},10)}),this.$widget.find(".toggle-input-type-btn").on("click",function(){var t=e.$inputGroup.hasClass("kml-input-mode")?"points":"kml";return e._switchInputType(t),!1}),o(this.element).on("change",function(){e.$kmlInput.prop("disabled",!!this.value)}).on("applyfocus",function(){e.$widget[0].querySelector("input").focus()}),this.$points.on("click",".point",function(){return e._setCurrent(e.$points.find(".point").index(o(this))),e._switchInputType("points"),!1}),this.$points.find(".addpoint").on("click",function(){return e._addPoint(),!1}),this.$widget.find(".close-chain-btn").on("click",function(){return e._closePolygon(),!1}),this.$widget.find(".btn-remove").on("click",function(){e.points.length<2?e._updateInputs([]):p.confirm(c("geopicker.removePoint")).then(function(){e._removePoint()})}),this.$map.find(".show-map-btn").on("click",function(){return e.$widget.find(".search-bar").removeClass("hide-search"),e.$widget.addClass("full-screen"),e._updateMap(),!1}),this.$form.on("pageflip.enketo.map"+this.mapId,function(t){e.map&&o.contains(t.target,e.element)&&(e.map.invalidateSize(),e.$form.off("pageflip.enketo.map"+e.mapId))}),this.props.wide&&this.$widget.addClass("wide"),this.$widget.toggleClass("hide-input",this.$question.hasClass("or-appearance-hide-input")).find(".toggle-input-visibility-btn").on("click",function(){e.$widget.toggleClass("hide-input"),o(this).toggleClass("open",e.$widget.hasClass("hide-input")),e.map&&e.map.invalidateSize(!1)}).toggleClass("open",e.$widget.hasClass("hide-input")),this.$widget.find(".hide-map-btn").on("click",function(){return e.$widget.find(".search-bar").addClass("hide-search"),e.$widget.removeClass("full-screen").find(".map-canvas").removeClass("leaflet-container").find(".leaflet-google-layer").remove(),e.map&&(e.map.remove(),e.map=null,e.polygon=null,e.polyline=null),!1}),this.$widget.on("focus","input",function(){o(e.element).trigger("fakefocus")}),this.props.search&&this._enableSearch(),this.props.detect&&this._enableDetection(),this.props.readonly&&this.disable(this.element),t?this.points.forEach(function(){e._addPointBtn()}):this._addPoint(),t?(this._updateMap(),this._setCurrent(this.currentIndex)):(this._updateMap([0,0],1),this.props.detect&&navigator.geolocation.getCurrentPosition(function(t){e._updateMap([t.coords.latitude,t.coords.longitude],m)}))},i.prototype._switchInputType=function(t){"kml"===t?this.$inputGroup.addClass("kml-input-mode"):"points"===t&&this.$inputGroup.removeClass("kml-input-mode")},i.prototype._getProps=function(){var t=[],e=h.touch!==!0||h.touch===!0&&o(this.element).closest(".or-appearance-maps").length>0;return e&&(t=o(this.element).closest(".question").attr("class").split(" ").filter(function(t){return"or-appearance-maps"!==t&&/or-appearance-/.test(t)}),t.forEach(function(e,n){t[n]=e.substring(14)})),{detect:!!navigator.geolocation,map:e,search:e,appearances:t,type:this.element.attributes["data-type-xml"].value,touch:h.touch,wide:this.$question.width()/this.$question.closest("form.or").width()>.8,readonly:this.element.readOnly}},i.prototype._addPointBtn=function(){this.$points.find(".addpoint").before('<a href="#" class="point" aria-label="point"> </a>')},i.prototype._addDomElements=function(){var t='<div class="map-canvas-wrapper"><div class=map-canvas id="map'+this.mapId+'"></div></div>',e='<div class="points"><button type="button" class="addpoint">+</button></div>',n=c("geopicker.kmlpaste"),i=c("geopicker.kmlcoords"),r=c("geopicker.points"),s='<a href="#" class="toggle-input-type-btn"><span class="kml-input">KML</span><span class="points-input">'+r+'</span></a><label class="geo kml">'+i+'<progress class="paste-progress hide"></progress><textarea class="ignore" name="kml" placeholder="'+n+'"></textarea><span class="disabled-msg">remove all points to enable</span></label>',a=c("geopicker.closepolygon"),u='<button type="button" class="close-chain-btn btn btn-default btn-xs">'+a+"</button>",l='<button type="button" class="show-map-btn btn btn-default">Map</button>',h=c("geopicker.latitude"),d=c("geopicker.longitude"),p=c("geopicker.altitude"),f=c("geopicker.accuracy"),m=c("geopicker.searchPlaceholder");if(this.$widget=o('<div class="geopicker widget"><div class="search-bar hide-search no-map no-detect"><button type="button" class="hide-map-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button><button name="geodetect" type="button" class="btn btn-default" title="detect current location" data-placement="top"><span class="icon icon-crosshairs"> </span></button><div class="input-group"><input class="geo ignore" name="search" type="text" placeholder="'+m+'" disabled="disabled"/><button type="button" class="btn btn-default search-btn"><i class="icon icon-search"> </i></button></div></div><div class="geo-inputs"><label class="geo lat">'+h+'<input class="ignore" name="lat" type="number" step="0.000001" min="-90" max="90"/></label><label class="geo long">'+d+'<input class="ignore" name="long" type="number" step="0.000001" min="-180" max="180"/></label><label class="geo alt">'+p+'<input class="ignore" name="alt" type="number" step="0.1" /></label><label class="geo acc">'+f+'<input class="ignore" name="acc" type="number" step="0.1" /></label><button type="button" class="btn-icon-only btn-remove" aria-label="remove"><span class="icon icon-trash"> </span></button></div></div>'),this.props.detect&&(this.$widget.find(".search-bar").removeClass("no-detect"),this.$detect=this.$widget.find('button[name="geodetect"]')),this.$search=this.$widget.find('[name="search"]'),this.$inputGroup=this.$widget.find(".geo-inputs"),this.props.map?(this.$widget.find(".search-bar").removeClass("no-map").after(t),this.$map=this.$widget.find(".map-canvas"),this.$map.parent().append('<button type="button" class="toggle-input-visibility-btn" aria-label="toggle input"> </button>')):this.$map=o(),this.props.touch&&this.props.map&&this.$map.append(l),this.props.touch||this.$widget.find(".search-bar").removeClass("hide-search"),"geopoint"!==this.props.type){this.$points=o(e),this.$widget.prepend(this.$points),"geoshape"===this.props.type&&this.$inputGroup.append(u);var g=o(s);this.$kmlInput=g.find('[name="kml"]'),this.$inputGroup.prepend(g)}else this.$points=o(),this.$kmlInput=o();this.$lat=this.$widget.find('[name="lat"]'),this.$lng=this.$widget.find('[name="long"]'),this.$alt=this.$widget.find('[name="alt"]'),this.$acc=this.$widget.find('[name="acc"]'),o(this.element).hide().after(this.$widget).parent().addClass("clearfix")},i.prototype._updateValue=function(){var t=o(this.element).val(),e="",n=this;return this._markAsValid(),this.points.forEach(function(t,i,r){var o,s="number"==typeof t[0]?t[0]:"number"==typeof t.lat?t.lat:null,a="number"==typeof t[1]?t[1]:"number"==typeof t.lng?t.lng:null,u="number"==typeof t[2]?t[2]:0,l="number"==typeof t[3]?t[3]:0;o=s&&a?s+" "+a+" "+u+" "+l:"",n._isValidGeopoint(o)||""===o&&i===r.length-1||n._markAsInvalid(i),""!==o||i!==r.length-1?(e+=o,i!==r.length-1&&(e+=";")):e=e.substring(0,e.lastIndexOf(";"))}),t!==e&&(o(this.element).val(e).trigger("change"),!0)},i.prototype._isValidGeopoint=function(t){return!!t&&d.geopoint.validate(t)},i.prototype._isValidLatLngList=function(t){var e=this;return t.every(function(t,n,i){return e._isValidLatLng(t)||""===t.join()&&n===i.length-1})},i.prototype._cleanLatLng=function(t){return Array.isArray(t)?[t[0],t[1]]:t},i.prototype._isValidLatLng=function(t){var e="number"==typeof t[0]?t[0]:"number"==typeof t.lat?t.lat:null,n="number"==typeof t[1]?t[1]:"number"==typeof t.lng?t.lng:null;return d.geopoint.validate([e,n].join(" "))},i.prototype._markAsInvalid=function(t){this.$points.find(".point").eq(t).addClass("has-error")},i.prototype._markAsValid=function(){this.$points.find(".point").removeClass("has-error")},i.prototype._setCurrent=function(t){this.currentIndex=t,this.$points.find(".point").removeClass("active").eq(t).addClass("active"),this._updateInputs(this.points[t],""),!this.map||this.props.touch&&!this._inFullScreenMode()||this._updateMarkers()},i.prototype._enableDetection=function(){var t=this,e={enableHighAccuracy:!0,maximumAge:0};this.$detect.click(function(n){return n.preventDefault(),navigator.geolocation.getCurrentPosition(function(e){var n={lat:Math.round(1e6*e.coords.latitude)/1e6,lng:Math.round(1e6*e.coords.longitude)/1e6};t.polyline&&t.updatedPolylineWouldIntersect(n,t.currentIndex)?t._showIntersectError():(t._updateInputs([n.lat,n.lng,e.coords.altitude,e.coords.accuracy]),t.currentIndex===t.points.length-1&&"geopoint"!==t.props.type&&t._addPoint())},function(){console.error("error occurred trying to obtain position")},e),!1})},i.prototype._enableSearch=function(){var t=this;v=y?v.replace("{api_key}",y):v.replace("&key={api_key}",""),this.$search.prop("disabled",!1).on("change",function(e){var n=o(this).val();e.stopImmediatePropagation(),n&&(n=n.split(/\s+/).join("+"),o.get(v.replace("{address}",n),function(e){var i;e.results&&e.results.length>0&&e.results[0].geometry&&e.results[0].geometry.location?(i=e.results[0].geometry.location,t._updateMap([i.lat,i.lng],m),t.$search.closest(".input-group").removeClass("has-error")):(t.$search.closest(".input-group").addClass("has-error"),console.log('Location "'+n+'" not found'))},"json").fail(function(){t.$search.closest(".input-group").addClass("has-error"),console.log("Error. Geocoding service may not be available or app is offline")}).always(function(){}))})},i.prototype._dynamicMapAvailable=function(){return!!this.map},i.prototype._inFullScreenMode=function(){return this.$widget.hasClass("full-screen")},i.prototype._updateMap=function(t,e){var n=this;this.props.map&&(e||(e=this.map?this.map.getZoom()||m:m),t&&(this.lastLatLng=t,this.lastZoom=e),this.props.touch&&!this._inFullScreenMode()||(this.map?n._updateDynamicMapView(t,e):this._addDynamicMap().then(function(){n._updateDynamicMapView(t,e)})))},i.prototype._addDynamicMap=function(){var t=this;return this._getLayers().then(function(e){var n={layers:t._getDefaultLayer(e)};t.map=u.map("map"+t.mapId,n).on("click",function(e){var n,i;return!t.props.readonly&&(n=e.latlng,i=t.$lat.val()&&t.$lng.val()?t.points.length:t.currentIndex,n.lat=Math.round(1e6*n.lat)/1e6,n.lng=Math.round(1e6*n.lng)/1e6,void("geopoint"!==t.props.type&&!t.containsEmptyPoints(t.points,i)&&t.updatedPolylineWouldIntersect(n,i)?t._showIntersectError():t.$lat.val()&&t.$lng.val()&&"geopoint"!==t.props.type?t.$lat.val()&&t.$lng.val()&&(t._addPoint(),t._updateInputs(n,"change.bymap")):t._updateInputs(n,"change.bymap")))}),t.map.attributionControl.setPrefix(""),e.length>1&&u.control.layers(t._getBaseLayers(e),null).addTo(t.map),t.$widget.find(".leaflet-control-layers-toggle").append('<span class="icon icon-globe"></span>'),t.map.on("baselayerchange",function(){t.$widget.find(".leaflet-control-container input").addClass("ignore no-unselect").next("span").addClass("option-label")})})},i.prototype._updateDynamicMapView=function(t,e){t?this.map.setView(t,e||m):(this._updatePolyline(),this._updateMarkers(),1===this.points.length&&""===this.points[0].toString()&&(this.lastLatLng?this.map.setView(this.lastLatLng,this.lastZoom||m):this.map.setView(u.latLng(0,0),e||m)))},i.prototype._showIntersectError=function(){p.alert("Borders cannot intersect!")},i.prototype._getLayers=function(){var t=this,e=[];return g.forEach(function(n,i){"string"==typeof n.tiles&&/^GOOGLE_(SATELLITE|ROADMAP|HYBRID|TERRAIN)/.test(n.tiles)?e.push(t._getGoogleTileLayer(n,i)):n.tiles?e.push(t._getLeafletTileLayer(n,i)):console.error("Configuration error for map tiles. Not a valid tile layer: ",n)}),l.all(e)},i.prototype._getLeafletTileLayer=function(t,e){var n,i=this._getTileOptions(t,e);return t.tileIndex=void 0===t.tileIndex?Math.round(100*Math.random())%t.tiles.length:t.tileIndex,n=t.tiles[t.tileIndex],l.resolve(u.tileLayer(n,i))},i.prototype._getGoogleTileLayer=function(t,e){var n=this._getTileOptions(t,e);return n.type=t.tiles.substring(7).toLowerCase(),this._loadGoogleMapsScript().then(function(){return u.gridLayer.googleMutant(n)})},i.prototype._getTileOptions=function(t,e){var n=t.name||"map-"+(e+1);return{id:t.id||n,maxZoom:t.maxzoom||18,minZoom:t.minzoom||0,name:n,attribution:t.attribution||""}},i.prototype._loadGoogleMapsScript=function(){return r||(r=new l(function(t){var e,n;window.gmapsLoaded=function(){delete window.gmapsLoaded,t()},e=y?"&key="+y:"",n="https://maps.google.com/maps/api/js?v=3.exp"+e+"&libraries=places&callback=gmapsLoaded",o.getScript(n)})),r},i.prototype._getDefaultLayer=function(t){var e,n=this;return t.reverse().some(function(t){return e=t,n.props.appearances.some(function(e){return e===t.options.name})}),e},i.prototype._getBaseLayers=function(t){var e={};return t.forEach(function(t){e[t.options.name]=t}),e},i.prototype._updateMarkers=function(){var t=[],e=[],n=this;this.markerLayer&&this.markerLayer.clearLayers(),this.points.length<2&&""===this.points[0].join()||(this.points.forEach(function(i,r){var o="geopoint"===n.props.type?_:r===n.currentIndex?w:b;n._isValidLatLng(i)?(t.push(n._cleanLatLng(i)),e.push(u.marker(n._cleanLatLng(i),{icon:o,clickable:!n.props.readonly,draggable:!n.props.readonly,alt:r,opacity:.9}).on("click",function(t){0===t.target.options.alt&&"geoshape"===n.props.type?n._closePolygon():n._setCurrent(t.target.options.alt)}).on("dragend",function(t){var e=t.target.getLatLng(),i=t.target.options.alt;e.lat=Math.round(1e6*e.lat)/1e6,e.lng=Math.round(1e6*e.lng)/1e6,n.polyline&&n.updatedPolylineWouldIntersect(e,i)?(n._showIntersectError(),n._updateMarkers()):(n._setCurrent(i),n._updateInputs(e,"change.bymap"),n._updateMap())}))):console.debug("this latLng was not considered valid",i)}),e.length>0&&(this.markerLayer=u.layerGroup(e).addTo(this.map),1!==this.points.length&&this._isValidLatLngList(this.points)||this.map.setView(t[0],this.lastZoom||m)))},i.prototype._updatePolyline=function(){var t,e=this;if("geopoint"!==this.props.type){if(this.points.length<2||!this._isValidLatLngList(this.points))return this.map&&(this.polyline&&this.map.removeLayer(this.polyline),this.polygon&&this.map.removeLayer(this.polygon)),this.polyline=null,void(this.polygon=null);"geoshape"===this.props.type&&this._updatePolygon(),t=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1),t=t.map(function(t){return e._cleanLatLng(t)}),this.polyline?this.polyline.setLatLngs(t):(this.polyline=u.polyline(t,{color:"red"}),this.map.addLayer(this.polyline)),setTimeout(function(){e.map.fitBounds(e.polyline.getBounds())},0)}},i.prototype._updatePolygon=function(){var t,e=this;"geopoint"!==this.props.type&&"geotrace"!==this.props.type&&(t=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1),t=t.map(function(t){return e._cleanLatLng(t)}),this.polygon?this.polygon.setLatLngs(t):(this.polygon=u.polygon(t,{color:"red",stroke:!1}),this.map.addLayer(this.polygon)),this._updateArea(t))},i.prototype._updateArea=function(t){var e,n;if(t.length>2){var i=t.map(function(t){return{lat:t[0],lng:t[1]}});e=u.GeometryUtil.geodesicArea(i),n=u.GeometryUtil.readableArea(e,!0),u.popup({className:"enketo-area-popup"}).setLatLng(this.polygon.getBounds().getCenter()).setContent(n).openOn(this.map)}else this.map.closePopup()},i.prototype._addPoint=function(){this._addPointBtn(),this.points.push([]),this._setCurrent(this.points.length-1),this._updateValue()},i.prototype._editPoint=function(t){var e;return this.points[this.currentIndex]=t,e=this._updateValue(),e&&this._updateMap(),e},i.prototype._removePoint=function(){var t=this.currentIndex;this.points.splice(this.currentIndex,1),this._updateValue(),this.$points.find(".point").eq(this.currentIndex).remove(),"undefined"==typeof this.points[this.currentIndex]&&(t=this.currentIndex-1),this._setCurrent(t),this._updateMap()},i.prototype._closePolygon=function(){var t=this.points[this.points.length-1];if(!(this.points.length<3||3===this.points.length&&!this._isValidLatLng(this.points[2])||JSON.stringify(this.points[0])===JSON.stringify(t)))return this._isValidLatLng(t)?(console.log("current last point is valid, so will create a new one to use to close"),this._addPoint()):(console.log("current last point is not a valid point, so will use this as closing point"),this.currentIndex=this.points.length-1),this.polyline&&!this.containsEmptyPoints(this.points,this.points.length)&&this.updatedPolylineWouldIntersect(this.points[0],this.currentIndex)?this._showIntersectError():void this._updateInputs(this.points[0])},i.prototype._updateInputs=function(t,e){var n=t[0]||t.lat||"",i=t[1]||t.lng||"",r=t[2]||t.alt||"",o=t[3]||t.acc||"";e="undefined"!=typeof e?e:"change",this.$lat.val(n||""),this.$lng.val(i||""),this.$alt.val(r||""),this.$acc.val(o||"").trigger(e)},i.prototype._convertKmlCoordinatesToLeafletCoordinates=function(t){var e=[],n=/<\s?coordinates>(([^<]|\n)*)<\/\s?coordinates\s?>/,i=n.test(t);return t=i?t.match(n)[1]:t,t.trim().split(/\s+/).forEach(function(t){var n=[];t.split(",").forEach(function(t,e){var i=Number(t);0===e?n[1]=i:1===e?n[0]=i:2===e&&(n[2]=i)}),e.push(n)}),e},i.prototype.updatedPolylineWouldIntersect=function(t,e){var n,i,r,s=[],a=this;return!(this.points<3)&&(o.extend(!0,s,this.points),s[e]=[t[0]||t.lat,t[1]||t.lng],n=""!==s[s.length-1].join("")?s:s.slice(0,s.length-1),n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]&&(n=n.slice(0,n.length-1)),n=n.map(function(t){return a._cleanLatLng(t)}),i=u.polyline(n,{color:"white"}),this.map.addLayer(i),r=i.intersects(),this.map.removeLayer(i),r)},i.prototype.containsEmptyPoints=function(t,e){return t.some(function(t,n){return!(n===e||t[0]&&t[1])})},i.prototype.disable=function(t){o(t).next(".widget").addClass("readonly").find("input, select, textarea").prop("disabled",!0).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!0)},i.prototype.enable=function(t){o(t).next(".widget").removeClass("readonly").find("input, select, textarea").prop("disabled",!1).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!1),this.map&&this.map.invalidateSize()},i.prototype.update=function(t){this.destroy(t),o(t).data(f,new i(t,this.options,this.event))},o.fn[f]=function(t,e){return this.each(function(){try{var n=o(this),r=o(this).data(f);t=t||{},r||"object"!=typeof t?r&&"string"==typeof t&&r[t](this):n.data(f,new i(this,t,e))}catch(s){console.log("Failed to initialise geopicker for "+this+": "+s)}})},e.exports={name:f,selector:'input[data-type-xml="geopoint"], input[data-type-xml="geotrace"], input[data-type-xml="geoshape"]'}},{"../../js/Widget":11,"../../js/support":30,"../../js/types":32,"enketo/config":6,"enketo/dialog":16,"enketo/translator":17,jquery:72,leaflet:75,"leaflet-draw":73,"leaflet.gridlayer.googlemutant":74,lie:7}],48:[function(t,e,n){"use strict";function i(t,e){this.namespace=s,o.call(this,t,e),this._init()}var r=t("jquery"),o=t("../../js/Widget"),s="horizontalChoices";i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype._init=function(){r(this.element).find(".option-wrapper").each(function(){for(var t=3,e=r(this),n=t-e.find("label").length%t;n<t&&n>0;)e.append('<label class="filler"></label>'),n--;r(this).closest(".question").addClass("or-horizontal-initialized")})},r.fn[s]=function(t,e){return t=t||{},this.each(function(){var n=r(this),o=n.data(s);o||"object"!=typeof t?o&&"string"==typeof t&&o[t](this):n.data(s,new i(this,t,e));
})},e.exports={name:s,selector:".or-appearance-horizontal"}},{"../../js/Widget":11,jquery:72}],49:[function(t,e,n){"use strict";function i(t,e){this.namespace=s,r.call(this,t,e),this.options=e,this._init()}var r=t("../../js/Widget"),o=t("jquery"),s="imageMap",a=t("enketo/translator").t;i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t=this,e=this.element.querySelector("img");return this.$inputs=o(this.element).find("input"),this.props=this._getProps(),this.element.classList.add("or-image-map-initialized"),e?void(e.getAttribute("src")?this._addMarkup(e).then(this._addFunctionality.bind(this)):o(e).on("load",function(){t._addMarkup(e).then(t._addFunctionality.bind(t))})):this._showSvgNotFoundError()},i.prototype._addFunctionality=function(t){this.$svg=t.find("svg"),this.$tooltip=t.find(".image-map__ui__tooltip"),this.props.readonly&&this.disable(),this._setSvgClickHandler(),this._setChangeHandler(),this._setHoverHandler(),this._updateImage()},i.prototype._getProps=function(){return{readonly:this.$inputs[0].readOnly}},i.prototype._addMarkup=function(t){var e=this,n=t.getAttribute("src");return o.get(n).then(function(t){var n,i,r,s;if(e._isSvgDoc(t)){n=e._removeUnmatchedIds(o(t.querySelector("svg"))),i=o('<div class="widget image-map"/>').append('<div class="image-map__ui"><span class="image-map__ui__tooltip"></span></div>').append(n),o(e.element).find("img").remove(),o(e.element).find(".option-wrapper").before(i);var a={};try{a=n[0].getBBox()}catch(u){console.error("Could not obtain Boundary Box of SVG element",u)}return r=a.width||n.attr("width"),s=a.height||n.attr("height"),n.attr("viewBox",[0,0,parseInt(r,10),parseInt(s,10)].join(" ")),i}throw"Image is not an SVG doc"})["catch"](this._showSvgNotFoundError.bind(e))},i.prototype._showSvgNotFoundError=function(){o(this.element).find(".option-wrapper").before('<div class="widget image-map"><div class="image-map__error">'+a("imagemap.svgNotFound")+"</div></div>")},i.prototype._removeUnmatchedIds=function(t){var e=this;return t.find("path[id], g[id]").each(function(){e._getInput(this.id)||this.removeAttribute("id")}),t},i.prototype._getInput=function(t){return this.element.querySelector('input[value="'+t+'"]')},i.prototype._setSvgClickHandler=function(){var t=this;this.$svg.not("[or-readonly]").on("click","path[id], g[id]",function(e){var n=e.target.id||o(e.target).closest("g[id]")[0].id,i=t._getInput(n);i&&o(i).prop("checked",!i.checked).trigger("change")})},i.prototype._setChangeHandler=function(){this.$inputs.on("change inputupdate.enketo",this._updateImage.bind(this))},i.prototype._setHoverHandler=function(){var t=this;this.$svg.on("mouseenter","path[id], g[id]",function(e){var n=e.target.id||o(e.target).closest("g[id]")[0].id,i=o(t._getInput(n)).siblings(".option-label.active").text();t.$tooltip.text(i)}).on("mouseleave","path[id], g[id]",function(){t.$tooltip.text("")})},i.prototype._isSvgDoc=function(t){return"object"==typeof t&&t.querySelector("svg")},i.prototype._updateImage=function(){var t=this,e=this.options.helpers.input.getVal(this.$inputs.eq(0));this.$svg.find("path[or-selected], g[or-selected]").removeAttr("or-selected"),"string"==typeof e&&(e=[e]),e.forEach(function(e){e&&t.$svg.find("path#"+e+",g#"+e).attr("or-selected","")})},i.prototype.disable=function(){this.$svg.attr("or-readonly","")},i.prototype.enable=function(){this.props.readonly||this.$svg.removeAttr("or-readonly")},o.fn[s]=function(t,e){return t=t||{},this.each(function(){var n=o(this),r=n.data(s);r||"object"!=typeof t?r&&"string"==typeof t&&r[t](this):n.data(s,new i(this,t,e))})},e.exports={name:s,selector:".simple-select.or-appearance-image-map",helpersRequired:["input"]}},{"../../js/Widget":11,"enketo/translator":17,jquery:72}],50:[function(t,e,n){"use strict";var i="notewidget";e.exports={name:i}},{}],51:[function(t,e,n){"use strict";function i(t,e){this.namespace=s,r.call(this,t,e),this._init()}var r=t("../../js/Widget"),o=t("jquery");t("../../js/plugins");var s="radiopicker";i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){this._setDelegatedHandlers()},i.prototype._setDelegatedHandlers=function(){var t=o(this.element);t.on("click",'input[type="radio"]:not([readonly]):checked',function(){o(this).parent("label").siblings().removeAttr("data-checked").end().attr("data-checked","true")}).on("click",'input[type="checkbox"]:not([readonly])',function(){this.checked?this.parentNode.dataset.checked="true":delete this.parentNode.dataset.checked}).on("change","[data-checked] > input:not(:checked)",function(){delete this.parentNode.dataset.checked}).on("click",'input[type="checkbox"][readonly],input[type="radio"][readonly]',function(t){return t.stopImmediatePropagation(),!1}).on("change",'input[type="checkbox"][readonly],input[type="radio"][readonly]',function(t){var e="undefined"==typeof t.originalEvent;return e||(t.stopImmediatePropagation(),this.checked&&"true"!==this.parentNode.dataset.checked&&(this.checked=!1)),e}).on("click",'[data-checked]>input[type="radio"]:not(.no-unselect)',function(){o(this).prop("checked",!1).trigger("change").parent().removeAttr("data-checked")}),t.find('input[type="radio"]:checked, input[type="checkbox"]:checked').parent("label").attr("data-checked","true")},o.fn[s]=function(t,e){var n=o(this),r=n.data(s);return t=t||{},r||"object"!=typeof t?r&&"string"==typeof t&&r[t](this):n.data(s,new i(n[0],t,e)),this},e.exports={name:s,selector:"form"}},{"../../js/Widget":11,"../../js/plugins":25,jquery:72}],52:[function(t,e,n){"use strict";function i(t,e){this.namespace=r,s.call(this,t,e),this._init()}var r="rangewidget",o=t("jquery"),s=t("../../js/Widget"),a=t("../../js/utils");i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t=this,e=this._getProps(),n=o('<div class="widget range-widget"><div class="range-widget__wrap"><div class="range-widget__current"/><div class="range-widget__bg"/><div class="range-widget__ticks"/><div class="range-widget__scale"><span class="range-widget__scale__start"/>'+this._stepsBetweenHtml(e)+this.resetButtonHtml+'<span class="range-widget__scale__end"/></div><div class="range-widget__bulb"><div class="range-widget__bulb__inner"/><div class="range-widget__bulb__mercury"/></div></div><input type="range" class="ignore empty" min="'+e.min+'" max="'+e.max+'" step="'+e.step+'"/></div>');n.find(".range-widget__scale__start").text(e.min),n.find(".range-widget__scale__end").text(e.max),this.$number=o(this.element),this.$range=n.find("input"),this.$current=n.find(".range-widget__current"),this.$number.after(n).on("applyfocus",function(){t.$range.focus()}).addClass("hide"),e.readonly&&this.disable(),this.$range.on("change",function(){console.log("cahnging text of ",t.$current,this.value),t.$current.text(this.value),t.$number.val(this.value).trigger("change"),t._updateMercury((this.value-this.min)/(e.max-e.min))}).on("focus",function(){t.$number.trigger("fakefocus")}),n.find("input.empty").on("click",function(){t.$range.removeClass("empty").change()}),n.find(".btn-reset").on("click",this._reset.bind(this)),this.update()},i.prototype._getProps=function(){var t=a.isNumber(this.element.getAttribute("min"))?this.element.getAttribute("min"):0,e=a.isNumber(this.element.getAttribute("max"))?this.element.getAttribute("max"):10,n=a.isNumber(this.element.getAttribute("step"))?this.element.getAttribute("step"):1,i=o(this.element).closest(".question"),r=i.hasClass("or-appearance-distress");return{min:Number(t),max:Number(e),step:Number(n),readonly:this.element.readOnly,vertical:i.hasClass("or-appearance-vertical")||r,distress:r}},i.prototype._updateMercury=function(t){var e=o(this.element).next(".widget"),n=e.find(".range-widget__ticks").height(),i=e.find(".range-widget__bulb").height();e.find(".range-widget__bulb__mercury").css("height",t*n+.5*i+"px")},i.prototype._stepsBetweenHtml=function(t){var e="";if(t.distress){var n=(t.max-t.min)/t.step;if(n<=10&&(t.max-t.min)%t.step===0)for(var i=t.min+t.step;i<t.max;i+=t.step)e+='<span class="range-widget__scale__between">'+i+"</span>"}return e},i.prototype._reset=function(){this.$range.val("").addClass("empty"),this.$current.text("-"),this.$number.val("").trigger("change"),this._updateMercury(-1)},i.prototype.disable=function(){o(this.element).next(".widget").find("input, button").prop("disabled",!0)},i.prototype.enable=function(){this.props.readonly||o(this.element).next(".widget").find("input, button").prop("disabled",!1)},i.prototype.update=function(){var t=this.element.value;a.isNumber(t)?o(this.element).next(".widget").find("input").val(t).trigger("change").removeClass("empty"):this._reset()},o.fn[r]=function(t,e){return t=t||{},this.each(function(){var n=o(this),s=n.data(r);s||"object"!=typeof t?s&&"string"==typeof t&&s[t](this):n.data(r,new i(this,t,e))})},e.exports={name:r,selector:'.or-appearance-distress input[type="number"], .question > input[type="number"][min][max][step]'}},{"../../js/Widget":11,"../../js/utils":33,jquery:72}],53:[function(t,e,n){"use strict";function i(t,e,n){this.namespace=s,o.call(this,t,e),n&&(n.stopPropagation(),n.preventDefault()),this._init()}var r=t("jquery"),o=t("../../js/Widget"),s="autocomplete",a=!("list"in document.createElement("input")&&"options"in document.createElement("datalist")&&"undefined"!=typeof window.HTMLDataListElement);t("./jquery.relevant-dropdown"),i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t=r(this.element),e=t.attr("list");this.props=this._getProps(),this.$options=t.closest(".question").find("datalist#"+e+" > option"),this.$options.each(function(t,e){var n=e.getAttribute("value");e.classList.contains("itemset-template")||void 0===n||null===n||(e.dataset.value=n,e.setAttribute("value",e.textContent),e.textContent="")}),this.$fakeInput=r('<input type="text" class="ignore widget autocomplete" list="'+e+'" />'),this.props.readonly&&this.$fakeInput.attr("readonly","readonly"),this.props.disabled&&this.$fakeInput.attr("disabled","disabled"),t.hide().after(this.$fakeInput),a&&(console.debug("Polyfill required"),this.$fakeInput.relevantDropdown()),this._setFakeInputListener(),this._setFocusListener(),this._showCurrentLabel()},i.prototype._getProps=function(){return{readonly:this.element.readOnly,disabled:this.element.disabled}},i.prototype._showCurrentLabel=function(){var t=this.element.value,e=this._findLabel(t);this.$fakeInput.val(e),t&&!e&&this.$fakeInput.trigger("input")},i.prototype._setFakeInputListener=function(){var t=this;this.$fakeInput.on("input."+this.namespace,function(e){var n=e.target,i=n.value,o=t._findValue(i)||"";t.element.value!==o&&r(t.element).val(o).trigger("change"),r(n).toggleClass("notfound",i&&!o)})},i.prototype._findValue=function(t){var e="";return t?(this.$options.each(function(n,i){if(i.value===t)return e=i.getAttribute("data-value"),!1}),e):""},i.prototype._findLabel=function(t){var e="";return t?(this.$options.each(function(n,i){if(i.dataset.value===t)return e=i.value,!1}),e):""},i.prototype._setFocusListener=function(){var t=this;this.$fakeInput.on("focus",function(){return r(t.element).trigger("fakefocus"),!0}),r(this.element).on("applyfocus",function(){r(t.$fakeInput).focus()})},i.prototype.disable=function(){this.$fakeInput.find("li").addClass("disabled")},i.prototype.enable=function(){this.$fakeInput.find("li").removeClass("disabled")},i.prototype.update=function(){r(this.element).siblings(".widget").remove(),this._init()},r.fn[s]=function(t,e){return t=t||{},this.each(function(){var n=r(this),o=n.data(s);o||"object"!=typeof t?o&&"string"==typeof t&&o[t](this):n.data(s,o=new i(this,t,e))})},e.exports={name:s,list:!0,selector:"input[list]"}},{"../../js/Widget":11,"./jquery.relevant-dropdown":54,jquery:72}],54:[function(t,e,n){function i(t,e,n){this.namespace=o,this.element=t,this.options=r.extend({fadeOutSpeed:"normal",change:null},e),n&&(n.stopPropagation(),n.preventDefault()),this._init()}var r=t("jquery"),o="relevantDropdown";r.expr[":"].RD_contains=r.expr.createPseudo(function(t){return function(e){return r(e).text().toUpperCase().indexOf(t.toUpperCase())>=0}}),i.prototype._init=function(){var t=r(this.element);this.listId=t.attr("list"),this.$fakeDatalist=r("<ul />",{"class":"datalist widget",id:this.listId}).appendTo(t.parent()),this._updateFakeDatalist(),this._setEventListeners()},i.prototype._updateFakeDatalist=function(){var t=r("#"+this.listId),e=document.createDocumentFragment();this.$fakeDatalist.empty(),t.find("option").each(function(){tempItem=r("<li />",{text:r(this).val()})[0],e.appendChild(tempItem)}),this.$fakeDatalist.append(e),this.$fakeDatalistItems=this.$fakeDatalist.find("li")},i.prototype._setEventListeners=function(){var t,e=this,n=r(this.element),i=0;n.on("focus",function(){e.$fakeDatalist.scrollTop(0),i=0}).on("blur",function(){setTimeout(function(){e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),e.$fakeDatalistItems.removeClass("active")},500)}).on("keyup",function(i){t=n.position(),e.$fakeDatalist.show().css({top:t.top+r(this).outerHeight(),left:t.left,width:n.outerWidth()}),e.$fakeDatalistItems.hide(),e.$fakeDatalist.find('li:RD_contains("'+n.val()+'")').show()}),this.$fakeDatalist.on("mouseenter","li",function(){r(this).addClass("active").siblings().removeClass("active")}).on("mouseleave","li",function(){r(this).removeClass("active")}),r(window).resize(function(){t=n.position(),e.$fakeDatalist.css({top:t.top+r(this).outerHeight(),left:t.left,width:n.outerWidth()})}),n.on("keydown",function(t){var r=e.$fakeDatalist.find("li.active"),o=e.$fakeDatalist.outerHeight(),s=e.$fakeDatalistItems.outerHeight();if(38==t.keyCode&&r.length&&(prevAll=r.prevAll("li:visible"),prevAll.length>0&&(r.removeClass("active"),prevAll.eq(0).addClass("active")),prevAll.length&&prevAll.position().top<0&&i>0&&e.$fakeDatalist.scrollTop(i-=s)),40==t.keyCode)if(r.length){var a=r.nextAll("li:visible");a.length>0&&(r.removeClass("active"),a.eq(0).addClass("active")),a.length&&a.position().top+s>=o&&e.$fakeDatalist.stop().animate({scrollTop:i+=s},200)}else e.$fakeDatalistItems.removeClass("active"),e.$fakeDatalist.find("li:visible:first").addClass("active");13!=t.keyCode&&9!=t.keyCode||(r.length&&n.val(r.text()).trigger("input"),e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),e.$fakeDatalistItems.removeClass("active")),13!=t.keyCode&&38!=t.keyCode&&40!=t.keyCode&&(e.$fakeDatalistItems.removeClass("active"),e.$fakeDatalist.find("li:visible:first").addClass("active"),e.$fakeDatalist.scrollTop(0),i=0)}),this.$fakeDatalist.on("click","li",function(){var t=r("li.active");t.length&&n.val(r(this).text()).trigger("input"),e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),e.$fakeDatalistItems.removeClass("active")})},i.prototype.update=function(){this._updateFakeDatalist()},r.fn[o]=function(t,e){return t=t||{},this.each(function(){var n=r(this),s=n.data(o);s||"object"!=typeof t?s&&"string"==typeof t&&s[t](this):n.data(o,s=new i(this,t,e))})}},{jquery:72}],55:[function(t,e,n){"use strict";function i(t,e,n){this.namespace=u,o.call(this,t,e),n&&(n.stopPropagation(),n.preventDefault()),this.$picker=null,this.noneSelectedText=a("selectpicker.noneselected"),this.multiple="undefined"!=typeof r(t).attr("multiple")&&r(t).attr("multiple")!==!1,this._init()}var r=t("jquery"),o=t("../../js/Widget"),s=t("../../js/support"),a=t("enketo/translator").t,u="desktopSelectpicker";t("../../js/dropdown.jquery"),i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t=this._getTemplate(),e=r(this.element);this.readonly=!!e.attr("readonly"),e.css("display","none"),t=this._createLi(t),this.$picker=t.insertAfter(e),this.$picker.find("> a").addClass(this.selectClass),this._clickListener(),this._focusListener()},i.prototype._getTemplate=function(){var t='<div class="btn-group bootstrap-select widget clearfix"><button type="button" class="btn btn-default dropdown-toggle clearfix" data-toggle="dropdown"><span class="selected">__SELECTED_OPTIONS</span><span class="caret"></span></button><ul class="dropdown-menu" role="menu">__ADD_LI</ul></div>';return t},i.prototype._createLi=function(t){var e,n,i=[],o="",s=this.multiple?'type="checkbox"':'type="radio" name="'+1e5*Math.random()+'"',a=this.readonly?' readonly="readonly"':"",u=this.readonly?' disabled="disabled"':"",l=this.readonly?' class="disabled"':"";if(r(this.element).find("option").each(function(){i.push({label:r(this).text(),selected:r(this).is(":selected"),value:r(this).attr("value")})}),i.length>0){t=t.replace("__SELECTED_OPTIONS",this._createSelectedStr());for(var c=0;c<i.length;c++)i[c].value&&(e=i[c].selected?' checked="checked"':"",n=i[c].selected?'class="active"':"",o+="<li "+l+n+'><a class="option-wrapper" tabindex="-1" href="#"><label><input class="ignore" '+s+e+a+u+' value="'+i[c].value+'" /><span class="option-label">'+i[c].label+"</span></label></a></li>")}return t=t.replace("__ADD_LI",o),r(t)},i.prototype._createSelectedStr=function(){var t=[],e=r(this.element);return e.find("option:selected").each(function(){r(this).attr("value").length>0&&t.push(r(this).text())}),0===t.length?this.noneSelectedText:1===t.length?t[0]:a("selectpicker.numberselected",{number:t.length})},i.prototype._clickListener=function(){var t=this;this.$picker.on("click","li:not(.disabled)",function(e){var n=r(this),i=n.find("input"),o=r(t.element),s=o.find('option[value="'+i.val()+'"]'),a=s.is(":selected");"input"!==e.target.nodeName.toLowerCase()&&e.preventDefault(),t.multiple?e.stopPropagation():(t.$picker.find("li").removeClass("active"),s.siblings("option").prop("selected",!1),t.$picker.find("input").prop("checked",!1)),a?(n.removeClass("active"),i.prop("checked",!1),s.prop("selected",!1)):(n.addClass("active"),i.prop("checked",!0),s.prop("selected",!0)),t.$picker.find(".selected").html(t._createSelectedStr()),o.trigger("change")}).on("keydown","li:not(.disabled)",function(t){if(/(13|32)/.test(t.keyCode.toString(10))){/(32)/.test(t.keyCode.toString(10))||t.preventDefault();var e=r(":focus");e.click(),e.focus(),t.preventDefault()}}).on("click","li.disabled",function(t){return t.stopPropagation(),!1})},i.prototype._focusListener=function(){var t=this;r(this.element).on("applyfocus",function(){t.$picker.find(".dropdown-toggle").focus()}),this.$picker.on("shown.bs.dropdown",function(){return r(t.element).trigger("fakefocus"),!0})},i.prototype.disable=function(){this.$picker.find("li").addClass("disabled")},i.prototype.enable=function(){this.readonly||this.$picker.find("li").removeClass("disabled")},i.prototype.update=function(){this.$picker.remove(),this._init()},r.fn[u]=function(t,e){return t=t||{},this.each(function(){var n=r(this),o=n.data(u);o||"object"!=typeof t||s.touch?o&&"string"==typeof t&&o[t](this):n.data(u,o=new i(this,t,e))})},e.exports={name:u,list:!0,selector:"select:not(#form-languages)"}},{"../../js/Widget":11,"../../js/dropdown.jquery":14,"../../js/support":30,"enketo/translator":17,jquery:72}],56:[function(t,e,n){"use strict";e.exports={name:"likertitem"}},{}],57:[function(t,e,n){"use strict";function i(t,e){this.namespace=a,o.call(this,t,e),this._init()}var r=t("jquery"),o=t("../../js/Widget"),s=t("../../js/support"),a="mobileSelectpicker";i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t=this;r(this.element).on("change."+a,function(){return t._showSelectedValues(),!0}),this._showSelectedValues()},i.prototype._showSelectedValues=function(){var t,e=[],n='<span class="widget mobileselect"></span>',i=r(this.element),o=i.next(".widget").length>0?i.next(".widget"):r(n).insertAfter(i),s=r.isArray(i.val())?i.val():[i.val()];for(t=0;t<s.length;t++)e.push(r(this).find('option[value="'+s[t]+'"]').text());o.text(s.join(", "))},i.prototype.update=function(){this._showSelectedValues()},r.fn[a]=function(t,e){return t=t||{},this.each(function(){var n=r(this),o=n.data(a);!o&&"object"==typeof t&&s.touch&&n.data(a,new i(this,t,e)),o&&"string"==typeof t&&o[t](this)})},e.exports={name:a,selector:"select[multiple]"}},{"../../js/Widget":11,"../../js/support":30,jquery:72}],58:[function(t,e,n){"use strict";e.exports={name:"tablewidget"}},{}],59:[function(t,e,n){"use strict";function i(t,e){this.namespace=s,r.call(this,t,e),this._init()}var r=t("../../js/Widget"),o=t("jquery"),s="textareaWidget";i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){this._setDelegatedHandlers()},i.prototype._setDelegatedHandlers=function(){var t=o(this.element),e=t[0].querySelector("textarea"),n=e?e.clientHeight:20;t.on("input","textarea",function(){this.scrollHeight>this.clientHeight&&this.scrollHeight>n&&(this.style["min-height"]=this.scrollHeight+"px")})},o.fn[s]=function(t,e){var n=o(this),r=n.data(s);return t=t||{},r||"object"!=typeof t?r&&"string"==typeof t&&r[t](this):n.data(s,new i(n[0],t,e)),this},e.exports={name:s,selector:"form"}},{"../../js/Widget":11,jquery:72}],60:[function(t,e,n){"use strict";function i(t,e){this.namespace=a,r.call(this,t,e),this._init()}var r=t("../../js/Widget"),o=t("../../js/support"),s=t("jquery");t("./timepicker"),t("../../js/dropdown.jquery");var a="timepickerExtended";i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype._init=function(){var t=s(this.element),e=s(this.element).val(),n=s('<div class="widget timepicker"><input class="ignore timepicker-default" type="text" value="'+e+'" placeholder="hh:mm" />'+this.resetButtonHtml+"</div>"),i=n.find(".btn-reset"),r=n.find("input");t.hide().after(n),r.timepicker({defaultTime:e.length>0&&e,showMeridian:!1}).val(e).closest(".widget").find("input").addClass("ignore"),r.on("change",function(){return t.val(this.value).trigger("change"),!1}),i.on("click",function(){var e=t.val()?"change":"";(e||r.val())&&r.val("").trigger(e)}),r.on("focus",function(){t.trigger("fakefocus")}),s(this.element).on("applyfocus",function(){r.focus()})},s.fn[a]=function(t,e){return t=t||{},this.each(function(){var n=s(this),r=n.data(a);r||"object"!=typeof t||o.touch&&o.inputTypes.time?r&&"string"==typeof t&&r[t](this):n.data(a,new i(this,t,e))})},e.exports={name:a,selector:'input[type="time"]:not([readonly])'}},{"../../js/Widget":11,"../../js/dropdown.jquery":14,"../../js/support":30,"./timepicker":61,jquery:72}],61:[function(t,e,n){!function(t,e,n){"use strict";var i=function(e,n){this.widget="",this.$element=t(e),this.defaultTime=n.defaultTime,this.disableFocus=n.disableFocus,this.disableMousewheel=n.disableMousewheel,this.isOpen=n.isOpen,this.minuteStep=n.minuteStep,this.orientation=n.orientation,this.secondStep=n.secondStep,this.snapToStep=n.snapToStep,this.showInputs=n.showInputs,this.showMeridian=n.showMeridian,this.showSeconds=n.showSeconds,this.template=n.template,this.appendWidgetTo=n.appendWidgetTo,this.showWidgetOnAddonClick=n.showWidgetOnAddonClick,this.icons=n.icons,this.maxHours=n.maxHours,this.explicitMode=n.explicitMode,this.handleDocumentClick=function(t){var e=t.data.scope;e.$element.parent().find(t.target).length||e.$widget.is(t.target)||e.$widget.find(t.target).length||e.hideWidget()},this._init()};i.prototype={constructor:i,_init:function(){var e=this;this.showWidgetOnAddonClick&&this.$element.parent().hasClass("input-group")&&this.$element.parent().hasClass("timepicker")?(this.$element.parent(".input-group.timepicker").find(".input-group-addon").on({"click.timepicker":t.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":t.proxy(this.highlightUnit,this),"click.timepicker":t.proxy(this.highlightUnit,this),"keydown.timepicker":t.proxy(this.elementKeydown,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)})):this.template?this.$element.on({"focus.timepicker":t.proxy(this.showWidget,this),"click.timepicker":t.proxy(this.showWidget,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)}):this.$element.on({"focus.timepicker":t.proxy(this.highlightUnit,this),"click.timepicker":t.proxy(this.highlightUnit,this),"keydown.timepicker":t.proxy(this.elementKeydown,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)}),this.template!==!1?this.$widget=t(this.getTemplate()).on("click",t.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){t(this).on({"click.timepicker":function(){t(this).select()},"keydown.timepicker":t.proxy(e.widgetKeydown,e),"keyup.timepicker":t.proxy(e.widgetKeyup,e)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=null,this.updateFromElementVal()},clear:function(){this.hour="",this.minute="",this.second="",this.meridian="",this.$element.val("")},decrementHour:function(){if(""===this.hour&&(this.hour=this.getCurrentHour(),this.incrementHour()),this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour<=0?this.hour=this.maxHours-1:this.hour--},decrementMinute:function(t){var e;""===this.minute&&(this.minute=this.getCurrentMinute(),this.incrementMinute()),e=t?this.minute-t:this.minute-this.minuteStep,e<0?(this.decrementHour(),this.minute=e+60):this.minute=e},decrementSecond:function(){var t=this.second-this.secondStep;t<0?(this.decrementMinute(!0),this.second=t+60):this.second=t},elementKeydown:function(t){switch(t.which){case 9:if(t.shiftKey){if("hour"===this.highlightedUnit){this.hideWidget();break}this.highlightPrevUnit()}else{if(this.showMeridian&&"meridian"===this.highlightedUnit||this.showSeconds&&"second"===this.highlightedUnit||!this.showMeridian&&!this.showSeconds&&"minute"===this.highlightedUnit){this.hideWidget();break}this.highlightNextUnit()}t.preventDefault(),this.updateFromElementVal();break;case 27:this.updateFromElementVal();break;case 37:t.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(t.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update();break;case 39:t.preventDefault(),this.highlightNextUnit(),this.updateFromElementVal();break;case 40:switch(t.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update()}},getCursorPosition:function(){var t=this.$element.get(0);if("selectionStart"in t)return t.selectionStart;if(n.selection){t.focus();var e=n.selection.createRange(),i=n.selection.createRange().text.length;return e.moveStart("character",-t.value.length),e.text.length-i}},getTemplate:function(){var t,e,n,i,r,o;switch(this.showInputs?(e='<input type="text" class="timepicker-hour" maxlength="2"/>',n='<input type="text" class="timepicker-minute" maxlength="2"/>',i='<input type="text" class="timepicker-second" maxlength="2"/>',r='<input type="text" class="timepicker-meridian" maxlength="2"/>'):(e='<span class="timepicker-hour"></span>',n='<span class="timepicker-minute"></span>',i='<span class="timepicker-second"></span>',r='<span class="timepicker-meridian"></span>'),o='<table><tr><td><a href="#" data-action="incrementHour"><span class="'+this.icons.up+'"></span></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><span class="'+this.icons.up+'"></span></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><span class="'+this.icons.up+'"></span></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><span class="'+this.icons.up+'"></span></a></td>':"")+"</tr><tr><td>"+e+'</td> <td class="separator">:</td><td>'+n+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+i+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+r+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><span class="'+this.icons.down+'"></span></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><span class="'+this.icons.down+'"></span></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><span class="'+this.icons.down+'"></span></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><span class="'+this.icons.down+'"></span></a></td>':"")+"</tr></table>",this.template){case"dropdown":t='<div class="timepicker-widget dropdown-menu">'+o+"</div>"}return t},getTime:function(){return""===this.hour?"":(1===this.hour.toString().length?"0"+this.hour:this.hour)+":"+(1===this.minute.toString().length?"0"+this.minute:this.minute)+(this.showSeconds?":"+(1===this.second.toString().length?"0"+this.second:this.second):"")+(this.showMeridian?" "+this.meridian:"")},hideWidget:function(){this.isOpen!==!1&&(this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.$widget.removeClass("open"),t(n).off("mousedown.timepicker, touchend.timepicker",this.handleDocumentClick),this.isOpen=!1,this.$widget.detach())},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="hour",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(0,1):t.setSelectionRange(0,2)},0)},highlightMinute:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="minute",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(2,4):t.setSelectionRange(3,5)},0)},highlightSecond:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="second",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(5,7):t.setSelectionRange(6,8)},0)},highlightMeridian:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="meridian",t.setSelectionRange&&(this.showSeconds?setTimeout(function(){e.hour<10?t.setSelectionRange(8,10):t.setSelectionRange(9,11)},0):setTimeout(function(){e.hour<10?t.setSelectionRange(5,7):t.setSelectionRange(6,8)},0))},getCurrentHour:function(){var t=(new Date).getHours();return this.showMeridian?t%12:t},getCurrentMinute:function(){return(new Date).getMinutes()},incrementHour:function(){if(""===this.hour&&(this.hour=this.getCurrentHour(),this.decrementHour()),this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}return this.hour===this.maxHours-1?void(this.hour=0):void this.hour++;
},incrementMinute:function(t){var e;""===this.minute&&(this.minute=this.getCurrentMinute(),this.decrementMinute()),e=t?this.minute+t:this.minute+this.minuteStep-this.minute%this.minuteStep,e>59?(this.incrementHour(),this.minute=e-60):this.minute=e},incrementSecond:function(){var t=this.second+this.secondStep-this.second%this.secondStep;t>59?(this.incrementMinute(!0),this.second=t-60):this.second=t},mousewheel:function(e){if(!this.disableMousewheel){e.preventDefault(),e.stopPropagation();var n=e.originalEvent.wheelDelta||-e.originalEvent.detail,i=null;switch("mousewheel"===e.type?i=e.originalEvent.wheelDelta*-1:"DOMMouseScroll"===e.type&&(i=40*e.originalEvent.detail),i&&(e.preventDefault(),t(this).scrollTop(i+t(this).scrollTop())),this.highlightedUnit){case"minute":n>0?this.incrementMinute():this.decrementMinute(),this.highlightMinute();break;case"second":n>0?this.incrementSecond():this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break;default:n>0?this.incrementHour():this.decrementHour(),this.highlightHour()}return!1}},changeToNearestStep:function(t,e){return t%e===0?t:Math.round(t%e/e)?(t+(e-t%e))%60:t-t%e},place:function(){if(!this.isInline){var n=this.$widget.outerWidth(),i=this.$widget.outerHeight(),r=10,o=t(e).width(),s=t(e).height(),a=t(e).scrollTop(),u=parseInt(this.$element.parents().filter(function(){return"auto"!==t(this).css("z-index")}).first().css("z-index"),10)+10,l=this.component?this.component.parent().offset():this.$element.offset(),c=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1),d=l.left,p=l.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),"auto"!==this.orientation.x?(this.$widget.addClass("timepicker-orient-"+this.orientation.x),"right"===this.orientation.x&&(d-=n-h)):(this.$widget.addClass("timepicker-orient-left"),l.left<0?d-=l.left-r:l.left+n>o&&(d=o-n-r));var f,m,g=this.orientation.y;"auto"===g&&(f=-a+l.top-i,m=a+s-(l.top+c+i),g=Math.max(f,m)===m?"top":"bottom"),this.$widget.addClass("timepicker-orient-"+g),"top"===g?p+=c:p-=i+parseInt(this.$widget.css("padding-top"),10),this.$widget.css({top:p,left:d,zIndex:u})}},remove:function(){t("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(t){if(this.$element.val())this.updateFromElementVal();else if("current"===t){var e=new Date,n=e.getHours(),i=e.getMinutes(),r=e.getSeconds(),o="AM";0!==r&&(r=Math.ceil(e.getSeconds()/this.secondStep)*this.secondStep,60===r&&(i+=1,r=0)),0!==i&&(i=Math.ceil(e.getMinutes()/this.minuteStep)*this.minuteStep,60===i&&(n+=1,i=0)),this.showMeridian&&(0===n?n=12:n>=12?(n>12&&(n-=12),o="PM"):o="AM"),this.hour=n,this.minute=i,this.second=r,this.meridian=o,this.update()}else t===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(t)},setTime:function(t,e){if(!t)return void this.clear();var n,i,r,o,s,a;if("object"==typeof t&&t.getMonth)r=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),this.showMeridian&&(a="AM",r>12&&(a="PM",r%=12),12===r&&(a="PM"));else{if(n=(/a/i.test(t)?1:0)+(/p/i.test(t)?2:0),n>2)return void this.clear();if(i=t.replace(/[^0-9:]/g,"").split(":"),r=i[0]?i[0].toString():i.toString(),this.explicitMode&&r.length>2&&r.length%2!==0)return void this.clear();o=i[1]?i[1].toString():"",s=i[2]?i[2].toString():"",r.length>4&&(s=r.slice(-2),r=r.slice(0,-2)),r.length>2&&(o=r.slice(-2),r=r.slice(0,-2)),o.length>2&&(s=o.slice(-2),o=o.slice(0,-2)),r=parseInt(r,10),o=parseInt(o,10),s=parseInt(s,10),isNaN(r)&&(r=0),isNaN(o)&&(o=0),isNaN(s)&&(s=0),s>59&&(s=59),o>59&&(o=59),r>=this.maxHours&&(r=this.maxHours-1),this.showMeridian?(r>12&&(n=2,r-=12),n||(n=1),0===r&&(r=12),a=1===n?"AM":"PM"):r<12&&2===n?r+=12:r>=this.maxHours?r=this.maxHours-1:(r<0||12===r&&1===n)&&(r=0)}this.hour=r,this.snapToStep?(this.minute=this.changeToNearestStep(o,this.minuteStep),this.second=this.changeToNearestStep(s,this.secondStep)):(this.minute=o,this.second=s),this.meridian=a,this.update(e)},showWidget:function(){this.isOpen||this.$element.is(":disabled")||(this.setTime(this.$element.val()),this.updateWidget(),this.$widget.appendTo(this.appendWidgetTo),t(n).on("mousedown.timepicker, touchend.timepicker",{scope:this},this.handleDocumentClick),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.place(),this.disableFocus&&this.$element.blur(),""===this.hour&&this.defaultTime&&this.setDefaultTime(this.defaultTime),this.isOpen===!1&&this.$widget.addClass("open"),this.isOpen=!0)},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM"},update:function(t){this.updateElement(),t||this.updateWidget(),this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){this.setTime(this.$element.val())},updateWidget:function(){if(this.$widget!==!1){var t=this.hour,e=1===this.minute.toString().length?"0"+this.minute:this.minute,n=1===this.second.toString().length?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.timepicker-hour").val(t),this.$widget.find("input.timepicker-minute").val(e),this.showSeconds&&this.$widget.find("input.timepicker-second").val(n),this.showMeridian&&this.$widget.find("input.timepicker-meridian").val(this.meridian)):(this.$widget.find("span.timepicker-hour").text(t),this.$widget.find("span.timepicker-minute").text(e),this.showSeconds&&this.$widget.find("span.timepicker-second").text(n),this.showMeridian&&this.$widget.find("span.timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(this.$widget!==!1){var t=this.$widget.find("input.timepicker-hour").val()+":"+this.$widget.find("input.timepicker-minute").val()+(this.showSeconds?":"+this.$widget.find("input.timepicker-second").val():"")+(this.showMeridian?this.$widget.find("input.timepicker-meridian").val():"");this.setTime(t,!0)}},widgetClick:function(e){e.stopPropagation(),e.preventDefault();var n=t(e.target),i=n.closest("a").data("action");i&&this[i](),this.update(),n.is("input")&&n.get(0).setSelectionRange(0,2)},widgetKeydown:function(e){var n=t(e.target),i=n.attr("class").replace("timepicker-","");switch(e.which){case 9:if(e.shiftKey){if("hour"===i)return this.hideWidget()}else if(this.showMeridian&&"meridian"===i||this.showSeconds&&"second"===i||!this.showMeridian&&!this.showSeconds&&"minute"===i)return this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(e.preventDefault(),i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),n.get(0).setSelectionRange(0,2);break;case 40:switch(e.preventDefault(),i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),n.get(0).setSelectionRange(0,2)}},widgetKeyup:function(t){(65===t.which||77===t.which||80===t.which||46===t.which||8===t.which||t.which>=48&&t.which<=57||t.which>=96&&t.which<=105)&&this.updateFromWidgetInputs()}},t.fn.timepicker=function(e){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var r=t(this),o=r.data("timepicker"),s="object"==typeof e&&e;o||r.data("timepicker",o=new i(this,t.extend({},t.fn.timepicker.defaults,s,t(this).data()))),"string"==typeof e&&o[e].apply(o,n)})},t.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,disableMousewheel:!1,isOpen:!1,minuteStep:15,orientation:{x:"auto",y:"auto"},secondStep:15,snapToStep:!1,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:!0,icons:{up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},maxHours:24,explicitMode:!1},t.fn.timepicker.Constructor=i,t(n).on("focus.timepicker.data-api click.timepicker.data-api",'[data-provide="timepicker"]',function(e){var n=t(this);n.data("timepicker")||(e.preventDefault(),n.timepicker())})}(t("jquery"),window,document)},{jquery:72}],62:[function(t,e,n){e.exports=function(){"use strict";function t(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function e(t,n,i,r){this.message=t,this.expected=n,this.found=i,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function n(t){function n(e){var n,i,r=ci[e];if(r)return r;for(n=e-1;!ci[n];)n--;for(r=ci[n],r={line:r.line,column:r.column,seenCR:r.seenCR};n<e;)i=t.charAt(n),"\n"===i?(r.seenCR||r.line++,r.column=1,r.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(r.line++,r.column=1,r.seenCR=!0):(r.column++,r.seenCR=!1),n++;return ci[e]=r,r}function i(t,e){var i=n(t),r=n(e);return{start:{offset:t,line:i.line,column:i.column},end:{offset:e,line:r.line,column:r.column}}}function r(t){ui<hi||(ui>hi&&(hi=ui,di=[]),di.push(t))}function o(t,n,i,r){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function s(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}var i,r,o,s=new Array(t.length);for(o=0;o<t.length;o++)s[o]=t[o].description;return i=t.length>1?s.slice(0,-1).join(", ")+" or "+s[t.length-1]:s[0],r=e?'"'+n(e)+'"':"end of input","Expected "+i+" but "+r+" found."}return null!==n&&o(n),new e(null!==t?t:s(n,i),n,i,r)}function s(){var t,e,n,i;return t=ui,e=F(),e!==X?(n=y(),n!==X?(i=F(),i!==X?(li=t,e=Q(n),t=e):(ui=t,t=X)):(ui=t,t=X)):(ui=t,t=X),t}function a(){var t;return t=l(),t===X&&(t=u()),t}function u(){var e,n,i,o,s;return e=m(),e===X&&(e=ui,47===t.charCodeAt(ui)?(n=tt,ui++):(n=X,0===pi&&r(et)),n!==X?(i=ui,o=F(),o!==X?(s=l(),s!==X?(o=[o,s],i=o):(ui=i,i=X)):(ui=i,i=X),i===X&&(i=null),i!==X?(li=e,n=nt(i),e=n):(ui=e,e=X)):(ui=e,e=X)),e}function l(){var e,n,i,o,s,a,u,l;if(e=ui,n=c(),n!==X){for(i=[],o=ui,s=F(),s!==X?(t.substr(ui,2)===it?(a=it,ui+=2):(a=X,0===pi&&r(rt)),a===X&&(47===t.charCodeAt(ui)?(a=tt,ui++):(a=X,0===pi&&r(et))),a!==X?(u=F(),u!==X?(l=c(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);o!==X;)i.push(o),o=ui,s=F(),s!==X?(t.substr(ui,2)===it?(a=it,ui+=2):(a=X,0===pi&&r(rt)),a===X&&(47===t.charCodeAt(ui)?(a=tt,ui++):(a=X,0===pi&&r(et))),a!==X?(u=F(),u!==X?(l=c(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);i!==X?(li=e,n=ot(n,i),e=n):(ui=e,e=X)}else ui=e,e=X;return e}function c(){var t,e,n,i,r,o,s,a;if(t=ui,e=h(),e!==X)if(n=F(),n!==X)if(i=p(),i!==X){for(r=[],o=ui,s=F(),s!==X?(a=f(),a!==X?(s=[s,a],o=s):(ui=o,o=X)):(ui=o,o=X);o!==X;)r.push(o),o=ui,s=F(),s!==X?(a=f(),a!==X?(s=[s,a],o=s):(ui=o,o=X)):(ui=o,o=X);r!==X?(li=t,e=st(e,i,r),t=e):(ui=t,t=X)}else ui=t,t=X;else ui=t,t=X;else ui=t,t=X;return t===X&&(t=g()),t}function h(){var e,n,i,o;return e=ui,n=d(),n!==X?(i=F(),i!==X?(t.substr(ui,2)===at?(o=at,ui+=2):(o=X,0===pi&&r(ut)),o!==X?(li=e,n=lt(n),e=n):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X),e===X&&(e=ui,n=v(),n!==X&&(li=e,n=ct(n)),e=n),e}function d(){var e;return t.substr(ui,16)===ht?(e=ht,ui+=16):(e=X,0===pi&&r(dt)),e===X&&(t.substr(ui,8)===pt?(e=pt,ui+=8):(e=X,0===pi&&r(ft)),e===X&&(t.substr(ui,9)===mt?(e=mt,ui+=9):(e=X,0===pi&&r(gt)),e===X&&(t.substr(ui,5)===vt?(e=vt,ui+=5):(e=X,0===pi&&r(yt)),e===X&&(t.substr(ui,18)===_t?(e=_t,ui+=18):(e=X,0===pi&&r(bt)),e===X&&(t.substr(ui,10)===wt?(e=wt,ui+=10):(e=X,0===pi&&r(xt)),e===X&&(t.substr(ui,17)===kt?(e=kt,ui+=17):(e=X,0===pi&&r($t)),e===X&&(t.substr(ui,9)===Et?(e=Et,ui+=9):(e=X,0===pi&&r(Ct)),e===X&&(t.substr(ui,9)===Tt?(e=Tt,ui+=9):(e=X,0===pi&&r(Lt)),e===X&&(t.substr(ui,6)===St?(e=St,ui+=6):(e=X,0===pi&&r(Dt)),e===X&&(t.substr(ui,17)===Mt?(e=Mt,ui+=17):(e=X,0===pi&&r(At)),e===X&&(t.substr(ui,9)===Nt?(e=Nt,ui+=9):(e=X,0===pi&&r(Pt)),e===X&&(t.substr(ui,4)===Ot?(e=Ot,ui+=4):(e=X,0===pi&&r(It)))))))))))))),e}function p(){var e,n,i,o,s,a,u,l;return e=ui,n=R(),n!==X?(i=F(),i!==X?(40===t.charCodeAt(ui)?(o=jt,ui++):(o=X,0===pi&&r(Rt)),o!==X?(s=F(),s!==X?(41===t.charCodeAt(ui)?(a=qt,ui++):(a=X,0===pi&&r(Ft)),a!==X?(li=e,n=Bt(n),e=n):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X),e===X&&(e=ui,t.substr(ui,22)===Ut?(n=Ut,ui+=22):(n=X,0===pi&&r(zt)),n!==X?(i=F(),i!==X?(40===t.charCodeAt(ui)?(o=jt,ui++):(o=X,0===pi&&r(Rt)),o!==X?(s=F(),s!==X?(a=M(),a!==X?(u=F(),u!==X?(41===t.charCodeAt(ui)?(l=qt,ui++):(l=X,0===pi&&r(Ft)),l!==X?(li=e,n=Vt(n,a),e=n):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X),e===X&&(e=ui,n=j(),n!==X&&(li=e,n=Ht(n)),e=n)),e}function f(){var e,n,i,o,s,a;return e=ui,91===t.charCodeAt(ui)?(n=Wt,ui++):(n=X,0===pi&&r(Zt)),n!==X?(i=F(),i!==X?(o=y(),o!==X?(s=F(),s!==X?(93===t.charCodeAt(ui)?(a=Gt,ui++):(a=X,0===pi&&r(Yt)),a!==X?(li=e,n=Xt(o),e=n):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X),e}function m(){var e,n,i,o;return e=ui,t.substr(ui,2)===it?(n=it,ui+=2):(n=X,0===pi&&r(rt)),n!==X?(i=F(),i!==X?(o=l(),o!==X?(li=e,n=Kt(o),e=n):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X),e}function g(){var e,n;return e=ui,t.substr(ui,2)===Jt?(n=Jt,ui+=2):(n=X,0===pi&&r(Qt)),n===X&&(46===t.charCodeAt(ui)?(n=te,ui++):(n=X,0===pi&&r(ee))),n!==X&&(li=e,n=ne(n)),e=n}function v(){var e,n;return e=ui,64===t.charCodeAt(ui)?(n=ie,ui++):(n=X,0===pi&&r(re)),n===X&&(n=null),n!==X&&(li=e,n=oe(n)),e=n}function y(){var t,e;return t=ui,e=$(),e!==X&&(li=t,e=Xt(e)),t=e}function _(){var e,n,i,o,s,a;return e=ui,n=I(),n!==X&&(li=e,n=se(n)),e=n,e===X&&(e=ui,40===t.charCodeAt(ui)?(n=jt,ui++):(n=X,0===pi&&r(Rt)),n!==X?(i=F(),i!==X?(o=y(),o!==X?(s=F(),s!==X?(41===t.charCodeAt(ui)?(a=qt,ui++):(a=X,0===pi&&r(Ft)),a!==X?(li=e,n=Xt(o),e=n):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X),e===X&&(e=ui,n=M(),n!==X&&(li=e,n=ae(n)),e=n,e===X&&(e=ui,n=A(),n!==X&&(li=e,n=ue(n)),e=n,e===X&&(e=b())))),e}function b(){var e,n,i,o,s,a,u,l,c,h,d,p,f;if(e=ui,n=O(),n!==X)if(i=F(),i!==X)if(40===t.charCodeAt(ui)?(o=jt,ui++):(o=X,0===pi&&r(Rt)),o!==X){if(s=ui,a=F(),a!==X)if(u=y(),u!==X){for(l=[],c=ui,h=F(),h!==X?(44===t.charCodeAt(ui)?(d=le,ui++):(d=X,0===pi&&r(ce)),d!==X?(p=F(),p!==X?(f=y(),f!==X?(h=[h,d,p,f],c=h):(ui=c,c=X)):(ui=c,c=X)):(ui=c,c=X)):(ui=c,c=X);c!==X;)l.push(c),c=ui,h=F(),h!==X?(44===t.charCodeAt(ui)?(d=le,ui++):(d=X,0===pi&&r(ce)),d!==X?(p=F(),p!==X?(f=y(),f!==X?(h=[h,d,p,f],c=h):(ui=c,c=X)):(ui=c,c=X)):(ui=c,c=X)):(ui=c,c=X);l!==X?(a=[a,u,l],s=a):(ui=s,s=X)}else ui=s,s=X;else ui=s,s=X;s===X&&(s=null),s!==X?(a=F(),a!==X?(41===t.charCodeAt(ui)?(u=qt,ui++):(u=X,0===pi&&r(Ft)),u!==X?(li=e,n=he(n,s),e=n):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)}else ui=e,e=X;else ui=e,e=X;else ui=e,e=X;return e}function w(){var e,n,i,o,s,a,u,l;if(e=ui,n=x(),n!==X){for(i=[],o=ui,s=F(),s!==X?(124===t.charCodeAt(ui)?(a=de,ui++):(a=X,0===pi&&r(pe)),a!==X?(u=F(),u!==X?(l=x(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);o!==X;)i.push(o),o=ui,s=F(),s!==X?(124===t.charCodeAt(ui)?(a=de,ui++):(a=X,0===pi&&r(pe)),a!==X?(u=F(),u!==X?(l=x(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);i!==X?(li=e,n=fe(n,i),e=n):(ui=e,e=X)}else ui=e,e=X;return e}function x(){var e,n,i,o,s,u,c;return e=ui,n=k(),n!==X?(i=ui,o=F(),o!==X?(t.substr(ui,2)===it?(s=it,ui+=2):(s=X,0===pi&&r(rt)),s===X&&(47===t.charCodeAt(ui)?(s=tt,ui++):(s=X,0===pi&&r(et))),s!==X?(u=F(),u!==X?(c=l(),c!==X?(o=[o,s,u,c],i=o):(ui=i,i=X)):(ui=i,i=X)):(ui=i,i=X)):(ui=i,i=X),i===X&&(i=null),i!==X?(li=e,n=me(n,i),e=n):(ui=e,e=X)):(ui=e,e=X),e===X&&(e=ui,n=a(),n!==X&&(li=e,n=ge(n)),e=n),e}function k(){var t,e,n,i,r,o;if(t=ui,e=_(),e!==X){for(n=[],i=ui,r=F(),r!==X?(o=f(),o!==X?(r=[r,o],i=r):(ui=i,i=X)):(ui=i,i=X);i!==X;)n.push(i),i=ui,r=F(),r!==X?(o=f(),o!==X?(r=[r,o],i=r):(ui=i,i=X)):(ui=i,i=X);n!==X?(li=t,e=ve(e,n),t=e):(ui=t,t=X)}else ui=t,t=X;return t}function $(){var e,n,i,o,s,a,u,l;if(e=ui,n=E(),n!==X){for(i=[],o=ui,s=F(),s!==X?(t.substr(ui,2)===ye?(a=ye,ui+=2):(a=X,0===pi&&r(_e)),a!==X?(u=F(),u!==X?(l=E(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);o!==X;)i.push(o),o=ui,s=F(),s!==X?(t.substr(ui,2)===ye?(a=ye,ui+=2):(a=X,0===pi&&r(_e)),a!==X?(u=F(),u!==X?(l=E(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);i!==X?(li=e,n=fe(n,i),e=n):(ui=e,e=X)}else ui=e,e=X;return e}function E(){var e,n,i,o,s,a,u,l;if(e=ui,n=C(),n!==X){for(i=[],o=ui,s=F(),s!==X?(t.substr(ui,3)===be?(a=be,ui+=3):(a=X,0===pi&&r(we)),a!==X?(u=F(),u!==X?(l=C(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);o!==X;)i.push(o),o=ui,s=F(),s!==X?(t.substr(ui,3)===be?(a=be,ui+=3):(a=X,0===pi&&r(we)),a!==X?(u=F(),u!==X?(l=C(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);i!==X?(li=e,n=fe(n,i),e=n):(ui=e,e=X)}else ui=e,e=X;return e}function C(){var e,n,i,o,s,a,u,l;if(e=ui,n=T(),n!==X){for(i=[],o=ui,s=F(),s!==X?(61===t.charCodeAt(ui)?(a=xe,ui++):(a=X,0===pi&&r(ke)),a===X&&(t.substr(ui,2)===$e?(a=$e,ui+=2):(a=X,0===pi&&r(Ee))),a!==X?(u=F(),u!==X?(l=T(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);o!==X;)i.push(o),o=ui,s=F(),s!==X?(61===t.charCodeAt(ui)?(a=xe,ui++):(a=X,0===pi&&r(ke)),a===X&&(t.substr(ui,2)===$e?(a=$e,ui+=2):(a=X,0===pi&&r(Ee))),a!==X?(u=F(),u!==X?(l=T(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);i!==X?(li=e,n=fe(n,i),e=n):(ui=e,e=X)}else ui=e,e=X;return e}function T(){var e,n,i,o,s,a,u,l;if(e=ui,n=L(),n!==X){for(i=[],o=ui,s=F(),s!==X?(t.substr(ui,2)===Ce?(a=Ce,ui+=2):(a=X,0===pi&&r(Te)),a===X&&(60===t.charCodeAt(ui)?(a=Le,ui++):(a=X,0===pi&&r(Se)),a===X&&(t.substr(ui,2)===De?(a=De,ui+=2):(a=X,0===pi&&r(Me)),a===X&&(62===t.charCodeAt(ui)?(a=Ae,ui++):(a=X,0===pi&&r(Ne))))),a!==X?(u=F(),u!==X?(l=L(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);o!==X;)i.push(o),o=ui,s=F(),s!==X?(t.substr(ui,2)===Ce?(a=Ce,ui+=2):(a=X,0===pi&&r(Te)),a===X&&(60===t.charCodeAt(ui)?(a=Le,ui++):(a=X,0===pi&&r(Se)),a===X&&(t.substr(ui,2)===De?(a=De,ui+=2):(a=X,0===pi&&r(Me)),a===X&&(62===t.charCodeAt(ui)?(a=Ae,ui++):(a=X,0===pi&&r(Ne))))),a!==X?(u=F(),u!==X?(l=L(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);i!==X?(li=e,n=fe(n,i),e=n):(ui=e,e=X)}else ui=e,e=X;return e}function L(){var e,n,i,o,s,a,u,l;if(e=ui,n=S(),n!==X){for(i=[],o=ui,s=F(),s!==X?(43===t.charCodeAt(ui)?(a=Pe,ui++):(a=X,0===pi&&r(Oe)),a===X&&(45===t.charCodeAt(ui)?(a=Ie,ui++):(a=X,0===pi&&r(je))),a!==X?(u=F(),u!==X?(l=S(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);o!==X;)i.push(o),o=ui,s=F(),s!==X?(43===t.charCodeAt(ui)?(a=Pe,ui++):(a=X,0===pi&&r(Oe)),a===X&&(45===t.charCodeAt(ui)?(a=Ie,ui++):(a=X,0===pi&&r(je))),a!==X?(u=F(),u!==X?(l=S(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);i!==X?(li=e,n=fe(n,i),e=n):(ui=e,e=X)}else ui=e,e=X;return e}function S(){var e,n,i,o,s,a,u,l;if(e=ui,n=D(),n!==X){for(i=[],o=ui,s=F(),s!==X?(a=P(),a===X&&(t.substr(ui,3)===Re?(a=Re,ui+=3):(a=X,0===pi&&r(qe)),a===X&&(t.substr(ui,3)===Fe?(a=Fe,ui+=3):(a=X,0===pi&&r(Be)))),a!==X?(u=F(),u!==X?(l=D(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);o!==X;)i.push(o),o=ui,s=F(),s!==X?(a=P(),a===X&&(t.substr(ui,3)===Re?(a=Re,ui+=3):(a=X,0===pi&&r(qe)),a===X&&(t.substr(ui,3)===Fe?(a=Fe,ui+=3):(a=X,0===pi&&r(Be)))),a!==X?(u=F(),u!==X?(l=D(),l!==X?(s=[s,a,u,l],o=s):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X)):(ui=o,o=X);i!==X?(li=e,n=fe(n,i),e=n):(ui=e,e=X)}else ui=e,e=X;return e}function D(){var e,n,i,o;return e=ui,n=w(),n!==X&&(li=e,n=Xt(n)),e=n,e===X&&(e=ui,45===t.charCodeAt(ui)?(n=Ie,ui++):(n=X,0===pi&&r(je)),n!==X?(i=F(),i!==X?(o=D(),o!==X?(li=e,n=Ue(o),e=n):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X)),e}function M(){var e,n,i,o;if(e=ui,34===t.charCodeAt(ui)?(n=ze,ui++):(n=X,0===pi&&r(Ve)),n!==X){for(i=[],He.test(t.charAt(ui))?(o=t.charAt(ui),ui++):(o=X,0===pi&&r(We));o!==X;)i.push(o),He.test(t.charAt(ui))?(o=t.charAt(ui),ui++):(o=X,0===pi&&r(We));i!==X?(34===t.charCodeAt(ui)?(o=ze,ui++):(o=X,0===pi&&r(Ve)),o!==X?(li=e,n=Ze(i),e=n):(ui=e,e=X)):(ui=e,e=X)}else ui=e,e=X;if(e===X)if(e=ui,39===t.charCodeAt(ui)?(n=Ge,ui++):(n=X,0===pi&&r(Ye)),n!==X){for(i=[],Xe.test(t.charAt(ui))?(o=t.charAt(ui),ui++):(o=X,0===pi&&r(Ke));o!==X;)i.push(o),Xe.test(t.charAt(ui))?(o=t.charAt(ui),ui++):(o=X,0===pi&&r(Ke));i!==X?(39===t.charCodeAt(ui)?(o=Ge,ui++):(o=X,0===pi&&r(Ye)),o!==X?(li=e,n=Ze(i),e=n):(ui=e,e=X)):(ui=e,e=X)}else ui=e,e=X;return e}function A(){var e,n,i,o,s;return e=ui,n=N(),n!==X?(i=ui,46===t.charCodeAt(ui)?(o=te,ui++):(o=X,0===pi&&r(ee)),o!==X?(s=N(),s===X&&(s=null),s!==X?(o=[o,s],i=o):(ui=i,i=X)):(ui=i,i=X),i===X&&(i=null),i!==X?(li=e,n=Je(n,i),e=n):(ui=e,e=X)):(ui=e,e=X),e===X&&(e=ui,46===t.charCodeAt(ui)?(n=te,ui++):(n=X,0===pi&&r(ee)),n!==X?(i=N(),i!==X?(li=e,n=Qe(i),e=n):(ui=e,e=X)):(ui=e,e=X)),e}function N(){var e,n,i;if(e=ui,n=[],tn.test(t.charAt(ui))?(i=t.charAt(ui),ui++):(i=X,0===pi&&r(en)),i!==X)for(;i!==X;)n.push(i),tn.test(t.charAt(ui))?(i=t.charAt(ui),ui++):(i=X,0===pi&&r(en));else n=X;return n!==X&&(li=e,n=nn(n)),e=n}function P(){var e;return 42===t.charCodeAt(ui)?(e=rn,ui++):(e=X,0===pi&&r(on)),e}function O(){var t,e,n;return t=ui,e=B(),e!==X?(li=ui,n=sn(e),n=n?void 0:X,n!==X?(li=t,e=an(e),t=e):(ui=t,t=X)):(ui=t,t=X),t}function I(){var e,n,i;return e=ui,36===t.charCodeAt(ui)?(n=un,ui++):(n=X,0===pi&&r(ln)),n!==X?(i=B(),i!==X?(li=e,n=cn(i),e=n):(ui=e,e=X)):(ui=e,e=X),e}function j(){var e,n,i,o;return e=ui,42===t.charCodeAt(ui)?(n=rn,ui++):(n=X,0===pi&&r(on)),n!==X&&(li=e,n=hn()),e=n,e===X&&(e=ui,n=V(),n!==X?(58===t.charCodeAt(ui)?(i=dn,ui++):(i=X,0===pi&&r(pn)),i!==X?(42===t.charCodeAt(ui)?(o=rn,ui++):(o=X,0===pi&&r(on)),o!==X?(li=e,n=fn(n),e=n):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X),e===X&&(e=ui,n=B(),n!==X&&(li=e,n=mn(n)),e=n)),e}function R(){var e;return t.substr(ui,7)===gn?(e=gn,ui+=7):(e=X,0===pi&&r(vn)),e===X&&(t.substr(ui,4)===yn?(e=yn,ui+=4):(e=X,0===pi&&r(_n)),e===X&&(t.substr(ui,22)===Ut?(e=Ut,ui+=22):(e=X,0===pi&&r(zt)),e===X&&(t.substr(ui,4)===bn?(e=bn,ui+=4):(e=X,0===pi&&r(wn))))),e}function q(){var e,n;if(e=[],xn.test(t.charAt(ui))?(n=t.charAt(ui),ui++):(n=X,0===pi&&r(kn)),n!==X)for(;n!==X;)e.push(n),xn.test(t.charAt(ui))?(n=t.charAt(ui),ui++):(n=X,0===pi&&r(kn));else e=X;return e}function F(){var t;return t=q(),t===X&&(t=null),t}function B(){var t,e;return t=ui,e=U(),e===X&&(e=z()),e!==X&&(li=t,e=$n(e)),t=e}function U(){var e,n,i,o;return e=ui,n=V(),n!==X?(58===t.charCodeAt(ui)?(i=dn,ui++):(i=X,0===pi&&r(pn)),i!==X?(o=V(),o!==X?(li=e,n=En(n,o),e=n):(ui=e,e=X)):(ui=e,e=X)):(ui=e,e=X),e}function z(){var t,e;return t=ui,e=V(),e!==X&&(li=t,e=Cn(e)),t=e}function V(){var t;return t=Z()}function H(){var e;return Tn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(Ln)),e===X&&(95===t.charCodeAt(ui)?(e=Sn,ui++):(e=X,0===pi&&r(Dn)),e===X&&(Mn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(An)),e===X&&(Nn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(Pn)),e===X&&(On.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(In)),e===X&&(jn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(Rn)),e===X&&(qn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(Fn)),e===X&&(Bn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(Un)),e===X&&(zn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(Vn)),e===X&&(Hn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(Wn)),e===X&&(Zn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(Gn)),e===X&&(Yn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(Xn)),e===X&&(Kn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(Jn)),e===X&&(Qn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(ti))))))))))))))),e}function W(){var e;return e=H(),e===X&&(45===t.charCodeAt(ui)?(e=Ie,ui++):(e=X,0===pi&&r(je)),e===X&&(46===t.charCodeAt(ui)?(e=te,ui++):(e=X,0===pi&&r(ee)),e===X&&(tn.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(en)),e===X&&(ei.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(ni)),e===X&&(ii.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(ri)),e===X&&(oi.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=X,0===pi&&r(si)))))))),e}function Z(){var t,e,n,i;if(t=ui,e=H(),e!==X){for(n=[],i=W();i!==X;)n.push(i),i=W();n!==X?(li=t,e=ai(e,n),t=e):(ui=t,t=X)}else ui=t,t=X;return t}var G,Y=arguments.length>1?arguments[1]:{},X={},K={XPath:s},J=s,Q=function(t){return{tree:t,nsPrefixes:vi}},tt="/",et={type:"literal",value:"/",description:'"/"'},nt=function(t){return{type:"/",args:[null,t?t[1]:null]}},it="//",rt={type:"literal",value:"//",description:'"//"'},ot=function(t,e){var n;for(n=0;n<e.length;n++)t=bi(e[n][1],t,e[n][3]);return t},st=function(t,e,n){return gi({type:"step",args:[t,e]},t,n,1)},at="::",ut={type:"literal",value:"::",description:'"::"'},lt=function(t){return t},ct=function(t){return t.length?t:"child"},ht="ancestor-or-self",dt={type:"literal",value:"ancestor-or-self",description:'"ancestor-or-self"'},pt="ancestor",ft={type:"literal",value:"ancestor",description:'"ancestor"'},mt="attribute",gt={type:"literal",value:"attribute",description:'"attribute"'},vt="child",yt={type:"literal",value:"child",description:'"child"'},_t="descendant-or-self",bt={type:"literal",value:"descendant-or-self",description:'"descendant-or-self"'},wt="descendant",xt={type:"literal",value:"descendant",description:'"descendant"'},kt="following-sibling",$t={type:"literal",value:"following-sibling",description:'"following-sibling"'},Et="following",Ct={type:"literal",value:"following",description:'"following"'},Tt="namespace",Lt={type:"literal",value:"namespace",description:'"namespace"'},St="parent",Dt={type:"literal",value:"parent",description:'"parent"'},Mt="preceding-sibling",At={type:"literal",value:"preceding-sibling",description:'"preceding-sibling"'},Nt="preceding",Pt={type:"literal",value:"preceding",description:'"preceding"'},Ot="self",It={type:"literal",value:"self",description:'"self"'},jt="(",Rt={type:"literal",value:"(",description:'"("'},qt=")",Ft={type:"literal",value:")",description:'")"'},Bt=function(t){return{type:"nodeType",args:[t,[]]}},Ut="processing-instruction",zt={type:"literal",value:"processing-instruction",description:'"processing-instruction"'},Vt=function(t,e){return{type:"nodeType",args:[t,[e]]}},Ht=function(t){return t},Wt="[",Zt={type:"literal",value:"[",description:'"["'},Gt="]",Yt={type:"literal",value:"]",description:'"]"'},Xt=function(t){return t},Kt=function(t){return bi("//",null,t)},Jt="..",Qt={type:"literal",value:"..",description:'".."'},te=".",ee={type:"literal",value:".",description:'"."'},ne=function(t){var e={type:"step",args:["self",{type:"nodeType",args:["node",[]]}]};return".."==t&&(e.args[0]="parent"),e},ie="@",re={type:"literal",value:"@",description:'"@"'},oe=function(t){return t?"attribute":""},se=function(t){return t},ae=function(t){return t},ue=function(t){return t},le=",",ce={type:"literal",value:",",description:'","'},he=function(t,e){var n,i=[];if(e)for(i.push(e[1]),n=0;n<e[2].length;n++)i.push(e[2][n][3]);return{type:"function",args:[t,i]}},de="|",pe={type:"literal",value:"|",description:'"|"'},fe=function(t,e){return mi(t,e,1,3)},me=function(t,e){return e?bi(e[1],t,e[3]):t},ge=function(t){return t},ve=function(t,e){return gi(t,"child",e,1)},ye="or",_e={type:"literal",value:"or",description:'"or"'},be="and",we={type:"literal",value:"and",description:'"and"'},xe="=",ke={type:"literal",value:"=",description:'"="'},$e="!=",Ee={type:"literal",value:"!=",description:'"!="'},Ce="<=",Te={type:"literal",value:"<=",description:'"<="'},Le="<",Se={type:"literal",value:"<",description:'"<"'},De=">=",Me={type:"literal",value:">=",description:'">="'},Ae=">",Ne={type:"literal",value:">",description:'">"'},Pe="+",Oe={type:"literal",value:"+",description:'"+"'},Ie="-",je={type:"literal",value:"-",description:'"-"'},Re="div",qe={type:"literal",value:"div",description:'"div"'},Fe="mod",Be={type:"literal",value:"mod",description:'"mod"'},Ue=function(t){return{type:"*",args:[{type:"number",args:[-1]},t]}},ze='"',Ve={type:"literal",value:'"',description:'"\\""'},He=/^[^"]/,We={type:"class",value:'[^"]',description:'[^"]'},Ze=function(t){return{type:"string",args:[t.join("")]}},Ge="'",Ye={type:"literal",value:"'",description:'"\'"'},Xe=/^[^']/,Ke={type:"class",value:"[^']",description:"[^']"},Je=function(t,e){return{type:"number",args:[e?parseFloat(t+"."+e[1]):parseInt(t)]}},Qe=function(t){return{type:"number",args:[parseFloat("."+t)]}},tn=/^[0-9]/,en={type:"class",value:"[0-9]",description:"[0-9]"},nn=function(t){return t.join("")},rn="*",on={type:"literal",value:"*",description:'"*"'},sn=function(t){var e;if(null===fi.args[0])for(e=0;e<_i.length;e++)if(fi.args[1]==_i[e])return!1;return!0},an=function(t){return""===t.args[0]?t={type:t.type,args:[null,t.args[1]]}:yi(t.args[0]),t},un="$",ln={type:"literal",value:"$",description:'"$"'},cn=function(t){return yi(t.args[0]),{type:"$",args:[t]}},hn=function(){return{type:"name",args:[null,null]}},dn=":",pn={type:"literal",value:":",description:'":"'},fn=function(t){return yi(t),{type:"name",args:[t,null]}},mn=function(t){return yi(t.args[0]),t},gn="comment",vn={type:"literal",value:"comment",description:'"comment"'},yn="text",_n={type:"literal",value:"text",description:'"text"'},bn="node",wn={type:"literal",value:"node",description:'"node"'},xn=/^[ \t\r\n]/,kn={type:"class",value:"[\\u0020\\u0009\\u000D\\u000A]",description:"[\\u0020\\u0009\\u000D\\u000A]"},$n=function(t){return fi=t,t},En=function(t,e){return{type:"name",args:[t,e]}},Cn=function(t){return{type:"name",args:[null,t]}},Tn=/^[A-Z]/,Ln={type:"class",value:"[A-Z]",description:"[A-Z]"},Sn="_",Dn={type:"literal",value:"_",description:'"_"'},Mn=/^[a-z]/,An={type:"class",value:"[a-z]",description:"[a-z]"},Nn=/^[\xC0-\xD6]/,Pn={type:"class",value:"[\\u00C0-\\u00D6]",description:"[\\u00C0-\\u00D6]"},On=/^[\xD8-\xF6]/,In={type:"class",value:"[\\u00D8-\\u00F6]",description:"[\\u00D8-\\u00F6]"},jn=/^[\xF8-\u02FF]/,Rn={type:"class",value:"[\\u00F8-\\u02FF]",description:"[\\u00F8-\\u02FF]"},qn=/^[\u0370-\u037D]/,Fn={type:"class",value:"[\\u0370-\\u037D]",description:"[\\u0370-\\u037D]"},Bn=/^[\u037F-\u1FFF]/,Un={type:"class",value:"[\\u037F-\\u1FFF]",description:"[\\u037F-\\u1FFF]"},zn=/^[\u200C-\u200D]/,Vn={type:"class",value:"[\\u200C-\\u200D]",description:"[\\u200C-\\u200D]"},Hn=/^[\u2070-\u218F]/,Wn={type:"class",value:"[\\u2070-\\u218F]",description:"[\\u2070-\\u218F]"},Zn=/^[\u2C00-\u2FEF]/,Gn={type:"class",value:"[\\u2C00-\\u2FEF]",description:"[\\u2C00-\\u2FEF]"},Yn=/^[\u3001-\uD7FF]/,Xn={type:"class",value:"[\\u3001-\\uD7FF]",description:"[\\u3001-\\uD7FF]"},Kn=/^[\uF900-\uFDCF]/,Jn={type:"class",value:"[\\uF900-\\uFDCF]",description:"[\\uF900-\\uFDCF]"},Qn=/^[\uFDF0-\uFFFD]/,ti={type:"class",value:"[\\uFDF0-\\uFFFD]",description:"[\\uFDF0-\\uFFFD]"},ei=/^[\xB7]/,ni={type:"class",value:"[\\u00B7]",description:"[\\u00B7]"},ii=/^[\u0300-\u036F]/,ri={type:"class",value:"[\\u0300-\\u036F]",description:"[\\u0300-\\u036F]"},oi=/^[\u203F-\u2040]/,si={type:"class",value:"[\\u203F-\\u2040]",description:"[\\u203F-\\u2040]"},ai=function(t,e){return t+e.join("")},ui=0,li=0,ci=[{line:1,column:1,seenCR:!1}],hi=0,di=[],pi=0;if("startRule"in Y){if(!(Y.startRule in K))throw new Error("Can't start parsing from rule \""+Y.startRule+'".');
J=K[Y.startRule]}var fi,mi=function(t,e,n,i){var r,o,s={type:"",args:[]};for(s.args.push(t),r=0;r<e.length;r++){switch(typeof n){case"string":s.type=n;break;case"object":for(s.type=e[r][n[0]],o=1;o<n.length;o++)s.type=s.type[n[o]];break;default:s.type=e[r][n]}s.args.push("undefined"==typeof i?e[r]:e[r][i]),s={type:"",args:[s]}}return s.args[0]},gi=function(t,e,n,i){var r,o=[];if(n.length<1)return t;for(r=0;r<n.length;r++)o.push(n[r][i]);return{type:"predicate",args:[e,t,o]}},vi=[],yi=function(t){var e,n=!1;if(null!==t){for(e=0;e<vi.length;e++)if(vi[e]===t){n=!0;break}n||vi.push(t)}},_i=["comment","text","processing-instruction","node"],bi=function(t,e,n){return"/"==t?{type:"/",args:[e,n]}:{type:"/",args:[{type:"/",args:[e,{type:"step",args:["descendant-or-self",{type:"nodeType",args:["node",[]]}]}]},n]}};if(G=J(),G!==X&&ui===t.length)return G;throw G!==X&&ui<t.length&&r({type:"end",description:"end of input"}),o(null,di,hi<t.length?t.charAt(hi):null,hi<t.length?i(hi,hi+1):i(hi,hi))}return t(e,Error),{SyntaxError:e,parse:n}}()},{}],63:[function(t,e,n){Date.prototype.toISOLocalString=function(){return"Invalid Date"===this.toString()?this.toString():new Date(this.getTime()-60*this.getTimezoneOffset()*1e3).toISOString().replace("Z",this.getTimezoneOffsetAsTime())},Date.prototype.getTimezoneOffsetAsTime=function(){var t,e,n,i,r=function(t){return t<10?"0"+t:t};return"Invalid Date"===this.toString()?this.toString():(t=this.getTimezoneOffset(),i=t<0?"+":"-",e=r(Math.abs(Math.floor(t/60))),n=r(Math.abs(Math.floor(t%60))),i+e+":"+n)}},{}],64:[function(t,e,n){var i=t("../dist/parser"),r=t("./shuffle"),o=t("./geo");t("./date-extensions"),e.exports=function(){var t,e,n,s,a,u,l,c,h,d,p,f,m,g,y,_,b,x=[],k="http://www.w3.org/XML/1998/namespace",$="http://www.w3.org/2000/xmlns/",E="http://www.w3.org/1999/xhtml",C=function(t){return t.ownerDocument},T=function(t){var e=[],n=function(t,e){var n,i,r=[];for(i=0;i<t.length;i++)n=t.item(i),!1!==W(n.nodeType,e)&&r.push(n);return r};switch(t.nodeType){case 1:e=n(t.childNodes,supportedChildNodeTypes=[1,3,4,7,8]);break;case 9:e=n(t.childNodes,supportedChildNodeTypes=[1,7,8]);break;case 2:case 3:case 4:case 7:case 8:case 13:break;default:throw new Error("Internal Error: nodeChildren - unsupported node type: "+t.nodeType)}return e},L=function(t){var e,n,i=[];for(e=T(t),n=0;n<e.length;n++)i.push(e[n]),i.push.apply(i,L(e[n]));return i},S=function(t){var e;switch(t.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:return t.parentNode;case 2:return t.ownerElement?t.ownerElement:e=U(t.ownerDocument,!0,function(e,n){if(n===t)return!0});case 13:return t.ownerElement;default:throw new Error("Internal Error: nodeParent - node type not supported: "+t.type)}},D=function(t){for(var e,n=[];e=S(t);)n.push(e),t=e;return n},M=function(t){return N(t,"nextSibling")},A=function(t){return N(t,"previousSibling")},N=function(t,e){for(var n,i=[];n=t[e];){switch(n.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:i.push(n)}t=n}return i},P=function(t){var e,n,i,r,o=[];for(e=D(t),e.unshift(t),n=0;n<e.length;n++)for(i=M(e[n]),r=0;r<i.length;r++)o.push(i[r]),o.push.apply(o,L(i[r]));return o},O=function(t){var e,n,i,r,o=[];for(e=D(t),e.unshift(t),n=0;n<e.length;n++)for(i=A(e[n]),r=0;r<i.length;r++)o.push.apply(o,L(i[r]).reverse()),o.push(i[r]);return o},C=function(t){switch(t.nodeType){case 9:return t;default:return t.ownerDocument}},I=function(t){var e,n=[];if(1===t.nodeType)for(e=0;e<t.attributes.length;e++)t.attributes[e].specified&&n.push(t.attributes[e]);return n.length>1&&n[0].compareDocumentPosition&&n.sort(function(t,e){var n=t.compareDocumentPosition(e);return 2==(2&n)?1:4==(4&n)?-1:0}),n},j=function(t){var e,n=I(t),i=[];for(e=0;e<n.length;e++)!1===F(n[e])&&i.push(n[e]);return i},R=function(t,e){var n,i,r,o,s=e||[];if(1===t.nodeType){if(t.ownerDocument.documentElement===t&&"object"==typeof t.ownerDocument.namespaces)for(i=t.ownerDocument.namespaces.length-1;i>=0;i--)o=t.ownerDocument.namespaces.item(i),q.call(this,s,o.name,o.urn,t);for(n=I(t),i=n.length-1;i>=0;i--)!1!==(r=F(n[i]))&&(1!==r.length?q.call(this,s,r[1],n[i].nodeValue,t):q.call(this,s,"",n[i].nodeValue,t));if(R.call(this,t.parentNode,s),void 0===e&&(q.call(this,s,"xml",k,t),s[0]&&""===s[0].prefix&&""===s[0].namespaceURI&&s.shift()),void 0===e)for(i=0;i<s.length;i++)s[i].ownerElement!==t&&(s[i]=J(s[i].prefix,s[i].nodeValue,t))}return s},q=function(t,e,n,i){var r,o;for(this.opts["case-sensitive"]||(e=e.toLowerCase()),r=0;r<t.length;r++)if(t[r].prefix===e)return!1;return o=J(e,n,i),""===e&&null!==n?t.unshift(o):t.push(o),!0},F=function(t){var e=t.nodeName.split(":");return"xmlns"===e[0]&&e},B=function(t,e){var n,i,r,o,s,a;if(1===t.nodeType)for(r=e?[e]:j(t),o=R.call(this,t),n=0;n<r.length;n++){for(a=r[n].nodeName.split(":"),1===a.length&&(a[1]=a[0],a[0]=""),s=null,i=0;i<o.length;i++)if(o[i].prefix===a[0]){s=o[i].namespaceURI;break}if(null===s&&(s=""),this.opts["unique-ids"][s]===a[1])return r[n]}return null},U=function(t,e,n){var i,r,o,s,a=[];for(o=t.getElementsByTagName("*"),i=0;i<o.length;i++)if(s=o.item(i),1==s.nodeType)for(r=0;r<s.attributes.length;r++)if(s.attributes[r].specified&&n(s,s.attributes[r])===!0){if(e)return s;a.push(s);break}return e?null:a},z=function(t){var e,n,i,r;switch(t.nodeType){case 1:for("undefined"==typeof t.scopeName||document.addEventListener?(e=t.nodeName.split(":"),r=1==e.length?{prefix:"",name:e[0]}:{prefix:e[0],name:e[1]}):r={prefix:"HTML"==t.scopeName?"":t.scopeName,name:t.nodeName},this.opts["case-sensitive"]||(r.prefix=r.prefix.toLowerCase(),r.name=r.name.toLowerCase()),n=R.call(this,t),i=0;i<n.length;i++)if(n[i].prefix===r.prefix)return r.ns=n[i].namespaceURI,r;if(""===r.prefix)return r.ns=null,r;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+r.prefix+'" on element: '+t.nodeName);case 2:if(e=t.nodeName.split(":"),1==e.length)return{prefix:"",ns:null,name:e[0]};for(r={prefix:e[0],name:e[1]},this.opts["case-sensitive"]||(r.prefix=r.prefix.toLowerCase(),r.name=r.name.toLowerCase()),n=R.call(this,S(t)),i=0;i<n.length;i++)if(n[i].prefix===r.prefix)return r.ns=n[i].namespaceURI,r;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+r.prefix+'" on attribute: '+t.nodeName);case 13:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?t.prefix.toLowerCase():t.prefix};case 7:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?t.target.toLowerCase():t.target};default:return!1}},V=function(t){var e,n,i="";switch(t.nodeType){case 9:case 1:for(n=c(new p(t,1,1,{},{},{}),{type:"step",args:["descendant",{type:"nodeType",args:["text",[]]}]}),n.sortDocumentOrder(),e=0;e<n.value.length;e++)i+=n.value[e].data;return i;case 2:return t.nodeValue;case 13:return t.namespaceURI;case 7:case 8:case 3:case 4:return t.data;default:throw new Error("Internal Error: nodeStringValue does not support node type: "+t.nodeType)}},H=function(t,e,n){var i=new Error(n);return i.name=e,i.code=t,i},W=function(t,e){for(var n=e.length;n--;)if(e[n]===t)return n;return!1},Z=function(t,e,n,i){var r,o,s,a,u;if(t instanceof _)if(e instanceof _){for(a=e.stringValues(),s=t.stringValues(),r=0;r<s.length;r++)for(o=0;o<a.length;o++)if(u=Z(s[r],a[o],n,i),u.toBoolean())return u}else if(e instanceof y){for(s=t.stringValues(),r=0;r<s.length;r++)if(u=Z(new y(s[r].toNumber()),e,n,i),u.toBoolean())return u}else if(e instanceof DateType||e instanceof g&&e.isDateString()){for(e instanceof g&&(e=new DateType(e)),s=t.stringValues(),r=0;r<s.length;r++)if(u=Z(new DateType(s[r].toDate()),e,n,i),u.toBoolean())return u}else{if(!(e instanceof g))return Z(new m(t.toBoolean()),e,n,i);for(s=t.stringValues(),r=0;r<s.length;r++)if(u=Z(s[r],e,n,i),u.toBoolean())return u}else if(e instanceof _)if(t instanceof y){for(a=e.stringValues(),r=0;r<a.length;r++)if(u=Z(t,new y(a[r].toNumber()),n,i),u.toBoolean())return u}else if(t instanceof DateType||t instanceof g&&t.isDateString()){for(t instanceof g&&(t=new DateType(t)),a=e.stringValues(),r=0;r<a.length;r++)if(u=Z(t,new DateType(a[r].toDate()),n,i),u.toBoolean())return u}else{if(!(t instanceof g))return Z(t,new m(e.toBoolean()),n,i);for(a=e.stringValues(),r=0;r<a.length;r++)if(u=Z(t,a[r],n,i),u.toBoolean())return u}else switch(n){case"=":case"!=":return new m(t instanceof m||e instanceof m?i(t.toBoolean(),e.toBoolean()):t instanceof y||e instanceof y?i(t.toNumber(),e.toNumber()):i(t.toString(),e.toString()));default:return new m(i(t.toNumber(),e.toNumber()))}return new m((!1))},G=function(t){switch(t.nodeType){case 2:case 3:case 4:case 7:case 8:return S(t);case 1:case 9:return t;case 13:default:throw new Error("Internal Error: getComparableNode - Node type not supported: "+t.nodeType)}},Y=function(t,e){var n,i,r;if(13==t.nodeType&&13==e.nodeType&&t.ownerElement==e.ownerElement){if(t===e)return 0;for(i=R.call(b,t.ownerElement),r=0;r<i.length;r++){if(i[r]===t){n=4;break}if(i[r]===e){n=2;break}}}else 13==t.nodeType&&(t=t.ownerElement),13==e.nodeType&&(e=e.ownerElement),n=X(t,e);return n},X=function(t,e){var n,i,r,o,s,a=function(t,e,n,i,r,o,s,a,u){return 0===r||(r&o)===o?a+o:(r&s)===s?u:r};if(t.compareDocumentPosition)return t.compareDocumentPosition(e);if(t===e)return 0;if(n=G(t),i=G(e),9===n.nodeType)if(9===i.nodeType){if(n!==i)return 1;r=0}else{if(n!==i.ownerDocument)return 1;r=20}else if(9===i.nodeType){if(i!==n.ownerDocument)return 1;r=10}else{if(n.ownerDocument!==i.ownerDocument)return 1;if(!n.contains||"undefined"==typeof n.sourceIndex||!i.contains||"undefined"==typeof i.sourceIndex)throw new Error('Cannot compare elements. Neither "compareDocumentPosition" nor "contains" available.');r=(n!=i&&n.contains(i)&&16)+(n!=i&&i.contains(n)&&8)+(n.sourceIndex>=0&&i.sourceIndex>=0?(n.sourceIndex<i.sourceIndex&&4)+(n.sourceIndex>i.sourceIndex&&2):1)+0}if(t===n&&e===i)return r;if(t===n)return a(t,n,e,i,r,16,8,4,2);if(e===i)return a(e,i,t,n,r,8,16,2,4);if(16===(16&r))return 4;if(8===(8&r))return 2;if(0===r){for(o=0;o<n.attributes.length;o++)if(s=n.attributes[o],s.specified){if(s===e)return 2;if(s===t)return 4}throw new Error("Internal Error: compareDocumentPosition failed to sort attributes.")}return r},K=function(t){if(!t)throw H(9,"NOT_SUPPORTED_ERR","Context node was not supplied.");if(9!=t.nodeType&&1!=t.nodeType&&2!=t.nodeType&&3!=t.nodeType&&4!=t.nodeType&&8!=t.nodeType&&7!=t.nodeType&&13!=t.nodeType)throw H(9,"NOT_SUPPORTED_ERR","The supplied node type is not supported. (nodeType: "+t.nodeType+")");if(2==t.nodeType&&!t.specified)throw H(9,"NOT_SUPPORTED_ERR","The supplied node is a non-specified attribute node. Only specified attribute nodes are supported.")},J=function(t,e,n){var i,r;for(i=0;i<x.length;i++)if(r=x[i],r.prefix===t&&r.nodeValue===e&&r.ownerElement===n)return r;return r=new u(t,e,n),x.push(r),r};return f=function(t,e,n){this.value=t,this.type=e,this.supports=n},f.prototype={value:null,type:null,supports:[],toBoolean:function(){throw new Error('Unable to convert "'+this.type+'" to "boolean".')},toString:function(){throw new Error('Unable to convert "'+this.type+'" to "string".')},toNumber:function(){throw new Error('Unable to convert "'+this.type+'" to "number".')},toNodeSet:function(){throw new Error('Unable to convert "'+this.type+'" to "node-set".')},toDate:function(){throw new Error('Unable to convert "'+this.type+'" to "date".')},canConvertTo:function(t){return!1!==W(t,this.supports)}},m=function(t){f.call(this,t,"boolean",["boolean","string","number","date"])},m.prototype=new f,m.constructor=m,m.prototype.toBoolean=function(){return this.value},m.prototype.toString=function(){return this.value===!0?"true":"false"},m.prototype.toNumber=function(){return this.value?1:0},m.prototype.toDate=function(){return null},_=function(t,e){f.call(this,t,"node-set",["boolean","string","number","node-set","date"]),this.docOrder=e||"unsorted"},_.prototype=new f,_.constructor=_,_.prototype.toBoolean=function(){return this.value.length>0},_.prototype.toString=function(){return this.value.length<1?"":(this.sortDocumentOrder(),V(this.value[0]))},_.prototype.toNumber=function(){return new g(this.toString()).toNumber()},_.prototype.toNodeSet=function(){return this.value},_.prototype.toDate=function(){return new g(this.toString()).toDate()},_.prototype.sortDocumentOrder=function(){switch(this.docOrder){case"document-order":break;case"reverse-document-order":this.value.reverse();break;default:this.value.sort(function(t,e){var n=Y(t,e);if(4==(4&n))return-1;if(2==(2&n))return 1;throw new Error("NodeSetType.sortDocumentOrder - unexpected compare result: "+n)})}this.docOrder="document-order"},_.prototype.sortReverseDocumentOrder=function(){switch(this.docOrder){case"document-order":this.value.reverse();break;case"reverse-document-order":break;default:this.sortDocumentOrder(),this.value.reverse()}this.docOrder="reverse-document-order"},_.prototype.append=function(t){var e,n=0,i=0;if(!t instanceof _)throw new Error("NodeSetType can be passed into NodeSetType.append method");for(this.sortDocumentOrder(),t.sortDocumentOrder();n<this.value.length&&i<t.value.length;)if(e=Y(this.value[n],t.value[i]),0==e)i++;else if(4==(4&e))n++;else{if(2!=(2&e))throw new Error("Internal Error: NodeSetType.append - unable to sort nodes. (result: "+e+")");this.value.splice(n,0,t.value[i]),n++,i++}for(;i<t.value.length;i++)this.value.push(t.value[i]);this.docOrder="document-order"},_.prototype.stringValues=function(){var t,e,n=[];for(t=0;t<this.value.length;t++)e=new g(V(this.value[t])),e.isDateString()&&(e=new DateType(e.value)),n.push(e);return n},g=function(t){f.call(this,t,"string",["boolean","string","number","date"])},g.prototype=new f,g.constructor=g,g.prototype.toBoolean=function(){return this.value.length>0},g.prototype.toString=function(){return this.value},g.prototype.toNumber=function(){var t;return this.isDateString(this.value)?new DateType(this.value).toNumber():(t=this.value.match(/^[ \t\r\n]*(-?[0-9]+(?:[.][0-9]*)?)[ \t\r\n]*$/),null!==t?parseFloat(t[1]):(t=this.value.match(/^[ \t\r\n]*(-?[.][0-9]+)[ \t\r\n]*$/),null!==t?parseFloat(t[1]):Number.NaN))},g.prototype.toDate=function(){return new Date(this.value)},g.prototype.isDateString=function(){return!!isNaN(this.value)&&(!isNaN(Date.parse(this.value))&&!!/('|")?[0-9]{4}(-|\/)[0-9]{2}(-|\/)[0-9]{2}('|")?/.test(this.value))},y=function(t){f.call(this,t,"number",["boolean","string","number","date"])},y.prototype=new f,y.constructor=y,y.prototype.toBoolean=function(){return 0!==this.value&&!isNaN(this.value)},y.prototype.toString=function(){return this.value.toString()},y.prototype.toNumber=function(){return this.value},y.prototype.toDate=function(){return new Date(864e5*this.value)},DateType=function(t){f.call(this,t,"date",["date","string","number","boolean"])},DateType.prototype=new f,DateType.constructor=DateType,DateType.prototype.toDate=function(){return new Date(this.value)},DateType.prototype.toString=function(){return new Date(this.value).toISOLocalString()},DateType.prototype.toNumber=function(){return new Date(this.value).getTime()/864e5},DateType.prototype.toBoolean=function(){return!isNaN(new Date(this.value).getTime())},t=function(e,n){var i;switch(this.code=e,this.code){case t.INVALID_EXPRESSION_ERR:this.name="INVALID_EXPRESSION_ERR";break;case t.TYPE_ERR:this.name="TYPE_ERR";break;default:throw i=new Error("Unsupported XPathException code: "+this.code),i.name="XPathExceptionInternalError",i}this.message=n||""},t.prototype.toString=function(){return'XPathException: "'+this.message+'", code: "'+this.code+'", name: "'+this.name+'"'},t.INVALID_EXPRESSION_ERR=51,t.TYPE_ERR=52,e=function(t){var e,n,i;for(e in t){i=!1;for(n in this.opts)if(e===n){this.opts[e]=t[e],i=!0;break}if(!i)throw new Error("Unsupported option: "+e)}this.opts["unique-ids"][k]="id",this.opts["unique-ids"][E]="id"},e.prototype={opts:{"unique-ids":{},"case-sensitive":!1},createExpression:function(e,r){var o,s,a,u,l={};try{o=i.parse(e)}catch(c){throw s="The expression is not a legal expression.",s+=c instanceof i.SyntaxError?" (line: "+c.line+", character: "+c.column+")":" ("+c.message+")",new t(t.INVALID_EXPRESSION_ERR,s)}if(o.nsPrefixes.length>0){if("object"!=typeof r||"undefined"==typeof r.lookupNamespaceURI)throw new t(t.INVALID_EXPRESSION_ERR,"No namespace resolver provided or lookupNamespaceURI function not supported.");for(a=0;a<o.nsPrefixes.length;a++)if(u=o.nsPrefixes[a],l[u]=r.lookupNamespaceURI(u),null===l[u])throw H(14,"NAMESPACE_ERR",'Undefined namespace prefix "'+u+'" in the context of the given resolver.')}return new n(o,l,this.opts)},createNSResolver:function(t){return new s(t)},evaluate:function(t,e,n,i,r){var t=this.createExpression(t,n);return t.evaluate(e,i,r)}},n=function(t,e,n){this.parsedExpression=t,this.namespaceMapping=e,this.opts=n||{}},n.prototype={parsedExpression:null,namespaceMapping:null,opts:{},evaluate:function(t,e,n){var i;return b=this,K(t),i=new p(t,1,1,{},d,this.namespaceMapping,this.opts),a.factory(i,e,c(i,this.parsedExpression.tree))}},p=function(t,e,n,i,r,o,s){this.node=t,this.pos=e,this.size=n,this.vars=i,this.fns=r,this.nsMap=o,this.opts=s||{}},p.prototype={node:null,pos:null,size:null,vars:null,fns:null,nsMap:null,opts:null,clone:function(t,e,n){return new p(t||this.node,"undefined"!=typeof e?e:this.pos,"undefined"!=typeof n?n:this.size,this.vars,this.fns,this.nsMap,this.opts)}},s=function(t){K(t),this.node=t},s.prototype={node:null,lookupNamespaceURI:function(t){var e,n,i,r=this.node;switch(t){case"xml":return k;case"xmlns":return $;default:switch(this.node.nodeType){case 9:r=r.documentElement;break;case 1:break;default:r=S(r)}if(null!=r&&1==r.nodeType){if(""==t){if(n=r.getAttribute("xmlns"),null!==n)return n}else{if(r.ownerDocument.documentElement===r&&"object"==typeof r.ownerDocument.namespaces)for(e=0;e<r.ownerDocument.namespaces.length;e++)if(n=r.ownerDocument.namespaces.item(e),n.name==t)return n.urn;for(e=0;e<r.attributes.length;e++)if(r.attributes[e].specified&&"xmlns:"+t==r.attributes[e].nodeName)return r.attributes[e].nodeValue}if(r.ownerDocument.documentElement!==r&&r.parentNode)return i=this.node,this.node=r.parentNode,n=this.lookupNamespaceURI(t),this.node=i,n}return null}}},h={"/":function(t,e){var n,i,r,o,s;if(null===t)i=new _([C(this.node)],"document-order");else if(i=c(this,t),!i instanceof _)throw new Error("Left side of path separator (/) must be of node-set type. (type: "+i.type+")");if(null===e)o=i;else for(o=new _([],"document-order"),n=0;n<i.value.length;n++){if(s=this.clone(i.value[n]),r=c(s,e),!r instanceof _)throw new Error("Right side of path separator (/) must be of node-set type. (type: "+r.type+")");o.append(r)}return o},step:function(t,e){var n,i,r,o,s,a,u;switch(t){case"child":n=new _(T(this.node),"document-order");break;case"descendant":n=new _(L(this.node),"document-order");break;case"parent":r=S(this.node),n=new _(r?[r]:[],"document-order");break;case"ancestor":n=new _(D(this.node),"reverse-document-order");break;case"following-sibling":n=new _(M(this.node),"document-order");break;case"preceding-sibling":n=new _(A(this.node),"reverse-document-order");break;case"following":n=new _(P(this.node),"document-order");break;case"preceding":n=new _(O(this.node),"reverse-document-order");break;case"attribute":n=new _(j(this.node),"document-order");break;case"namespace":n=new _(R.call(this,this.node),"document-order");break;case"self":n=new _([this.node],"document-order");break;case"descendant-or-self":o=L(this.node),o.unshift(this.node),n=new _(o,"document-order");break;case"ancestor-or-self":o=D(this.node),o.unshift(this.node),n=new _(o,"reverse-document-order");break;default:throw new Error("Axis type not supported: "+t)}switch(e.type){case"nodeType":if("node"==e.args[0])break;for(i=n.value.length-1;i>=0;i--)switch(e.args[0]){case"text":3!=n.value[i].nodeType&&4!=n.value[i].nodeType&&n.value.splice(i,1);break;case"comment":8!=n.value[i].nodeType&&n.value.splice(i,1);break;case"processing-instruction":(7!=n.value[i].nodeType||e.args[1].length>0&&c(this,e.args[1][0])!=n.value[i].nodeName)&&n.value.splice(i,1)}break;case"name":switch(s=c(this,e),t){case"attribute":a=2;break;case"namespace":a=13;break;default:a=1}for(i=n.value.length-1;i>=0;i--)n.value[i].nodeType==a?null===s.ns&&null===s.name||(u=z.call(this,n.value[i]),u!==!1&&u.ns===s.ns?null!==s.name&&u.name.toLowerCase()!=s.name.toLowerCase()&&n.value.splice(i,1):n.value.splice(i,1)):n.value.splice(i,1);break;default:throw new Error("NodeTest type not supported in step: "+e.type)}return n},predicate:function(t,e,n){var i,r,o,s,a,u;if(i=c(this,e),!i instanceof _)throw new Error('Expected "node-set", got: '+i.type);switch(t){case"ancestor":case"ancestor-or-self":case"preceding":case"preceding-sibling":i.sortReverseDocumentOrder();break;default:i.sortDocumentOrder()}for(s=0;s<n.length;s++)for(r=0,a=1,u=i.value.length;r<i.value.length;a++){if(o=c(this.clone(i.value[r],a,u),n[s]),o instanceof y){if(o.value!=a){i.value.splice(r,1);continue}}else if(!o.toBoolean()){i.value.splice(r,1);continue}r++}return i},"function":function(t,e){var n,i,r,o,s=[],a=function(t){return(null!==t.ns?"{"+t.ns+"}":"{}")+t.name},u=function(t){var e,n,i=[];for(e=0;e<t.length;e++)n=void 0===t[e].t?"object":t[e].t,t[e].r!==!1?t[e].rep===!0&&(n+="+"):n+=t[e].rep===!0?"*":"?",i.push(n);return"("+i.join(", ")+")"},l=0,h=[];if(n=c(this,t),null===n.ns&&(n.ns=""),!this.fns[n.ns]||!this.fns[n.ns][n.name])throw new Error('Function "'+a(n)+'" does not exist.');for(i=this.fns[n.ns][n.name],i.args||(i.args=[]),r=0,l=0;r<i.args.length;l++,r++){if(void 0===e[l]){if(i.args[r].r!==!1)throw new Error('Function "'+a(n)+'" expects '+u(i.args)+".")}else h.push(void 0===i.args[r].t?"object":i.args[r].t);if(i.args[r].rep===!0){for(;l<e.length;l++)h.push(void 0===i.args[r].t?"object":i.args[r].t);break}}if(h.length<e.length)throw new Error('Function "'+a(n)+'" expects '+u(i.args)+".");for(r=0;r<e.length;r++){if(o=c(this,e[r]),"object"!==h[r]&&!o.canConvertTo(h[r]))throw new Error('Function "'+a(n)+'" expects '+u(i.args)+'.Cannot convert "'+o.type+'" to "'+h[r]+'".');s.push(o)}if(result=i.fn.apply(this,s),!result instanceof f)throw new Error('Function "'+a(n)+'" did not return a value that inherits from BaseType.');if("object"!==i.ret&&!result.canConvertTo(i.ret))throw new Error('Function "'+a(n)+'" return "'+result.type+'" type that cannot be converted to "'+i.ret+'".');return result},"|":function(t,e){if(t=c(this,t),e=c(this,e),"undefined"==typeof t||"undefined"==typeof e||!t instanceof _||!e instanceof _)throw new Error('Unable to perform union on non-"node-set" types.');return t.append(e),t},or:function(t,e){return new m(c(this,t).toBoolean()?!0:c(this,e).toBoolean())},and:function(t,e){return new m(c(this,t).toBoolean()?c(this,e).toBoolean():!1)},"=":function(t,e){return Z.call(this,c(this,t),c(this,e),"=",function(t,e){return t==e})},"!=":function(t,e){return Z.call(this,c(this,t),c(this,e),"!=",function(t,e){return t!=e})},"<=":function(t,e){return Z.call(this,c(this,t),c(this,e),"<=",function(t,e){return t<=e})},"<":function(t,e){return Z.call(this,c(this,t),c(this,e),"<",function(t,e){return t<e})},">=":function(t,e){return Z.call(this,c(this,t),c(this,e),">=",function(t,e){return t>=e})},">":function(t,e){return Z.call(this,c(this,t),c(this,e),">",function(t,e){return t>e})},"+":function(t,e){return new y(c(this,t).toNumber()+c(this,e).toNumber())},"-":function(t,e){return new y(c(this,t).toNumber()-c(this,e).toNumber())},div:function(t,e){return new y(c(this,t).toNumber()/c(this,e).toNumber())},mod:function(t,e){return new y(c(this,t).toNumber()%c(this,e).toNumber())},"*":function(t,e){return new y(c(this,t).toNumber()*c(this,e).toNumber())},string:function(t){return new g(t)},number:function(t){return new y(t)},$:function(t){throw new Error("TODO: Not implemented.16")},name:function(t,e){var n=null;if(null!==t&&(n=this.nsMap[t],!n))throw new Error('Namespace prefix "'+t+'" is not mapped to a namespace.');return{ns:n,name:e}}},d={"":{last:{fn:function(){return new y(this.size)},ret:"number"},count:{fn:function(t){return new y(t.toNodeSet().length)},args:[{t:"node-set"}],ret:"number"},id:{fn:function(t){var e,n,i,r=this,o=[],s=[],a=function(t){var e,n=t.split(/[\u0020\u0009\u000D\u000A]+/);for(e=n.length-1;e>=0;e--)0==n[e].length&&n.splice(e,1);return n};if(t instanceof _)for(e=0;e<t.value.length;e++)o.push.apply(o,a(V(t.value[e])));else t=t.toString(),o=a(t);for(e=o.length-1;e>=0;e--)for(n=e-1;n>=0;n--)if(o[e]==o[n]&&e!=n){o.splice(e,1);break}for(e=0;e<o.length;e++)i=C(this.node).getElementById(o[e]),i&&B.call(this,i)?s.push(i):U(C(this.node),!0,function(t,n){var i=B.call(r,t,n);if(i&&i.nodeValue==o[e])return s.push(t),!0});return new _(s)},args:[{}],ret:"node-set"},"local-name":{fn:function(t){var e,n="";return 0==arguments.length&&(t=new _([this.node])),t.toNodeSet().length>0&&(t.sortDocumentOrder(),e=z.call(this,t.value[0]),e!==!1&&(n=e.name)),new g(n)},args:[{t:"node-set",r:!1}],ret:"string"},"namespace-uri":{fn:function(t){var e,n="";return 0==arguments.length&&(t=new _([this.node])),t.toNodeSet().length>0&&(t.sortDocumentOrder(),e=z.call(this,t.value[0]),e!==!1&&null!==e.ns&&(n=e.ns)),new g(n)},args:[{t:"node-set",r:!1}],ret:"string"},name:{fn:function(t){var e,n="";return 0==arguments.length&&(t=new _([this.node])),t.toNodeSet().length>0&&(t.sortDocumentOrder(),e=z.call(this,t.value[0]),e!==!1&&(n=e.prefix&&e.prefix.length>0?e.prefix+":"+e.name:e.name)),new g(n)},args:[{t:"node-set",r:!1}],ret:"string"},string:{fn:function(t){return 0==arguments.length&&(t=new _([this.node],"document-order")),new g(t.toString())},args:[{t:"object",r:!1}],ret:"string"},"starts-with":{fn:function(t,e){return new m(t.toString().substr(0,(e=e.toString()).length)==e)},args:[{t:"string"},{t:"string"}],ret:"string"},contains:{fn:function(t,e){return new m(t.toString().indexOf(e=e.toString())!=-1)},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-before":{fn:function(t,e){return t=t.toString(),e=t.indexOf(e.toString()),new g(e==-1?"":t.substr(0,e))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-after":{fn:function(t,e){var n;return t=t.toString(),e=e.toString(),n=t.indexOf(e),new g(n==-1?"":t.substr(n+e.length))},args:[{t:"string"},{t:"string"}],ret:"string"},substring:{fn:function(t,e,n){return t=t.toString(),e=Math.round(e.toNumber())-1,new g(isNaN(e)?"":2==arguments.length?t.substring(e<0?0:e):t.substring(e<0?0:e,e+Math.round(n.toNumber())))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},"string-length":{fn:function(t){return t=0==arguments.length?V(this.node):t.toString(),new y(t.length)},args:[{t:"string",r:!1}],ret:"number"},"normalize-space":{fn:function(t){return t=0==arguments.length?V(this.node):t.toString(),new g(t.replace(/^[\u0020\u0009\u000D\u000A]+/,"").replace(/[\u0020\u0009\u000D\u000A]+$/,"").replace(/[\u0020\u0009\u000D\u000A]+/g," "))},args:[{t:"string",r:!1}],ret:"string"},translate:{fn:function(t,e,n){var i,r,o,s="";for(t=t.toString(),e=e.toString(),n=n.toString(),i=0;i<t.length;i++)((r=e.indexOf(o=t.charAt(i)))==-1||(o=n.charAt(r)))&&(s+=o);return new g(s)},args:[{t:"string"},{t:"string"},{t:"string"}],ret:"string"},"boolean":{fn:function(t){return new m(t.toBoolean())},args:[{r:!0}],ret:"boolean"},not:{fn:function(t){return new m((!t.toBoolean()))},args:[{t:"boolean"}],ret:"boolean"},"true":{fn:function(){return new m((!0))},ret:"boolean"},"false":{fn:function(){return new m((!1))},ret:"boolean"},lang:{fn:function(t){for(var e,n,i,r,o,s,a,u=this.node,l=t.toString().toLowerCase().split("-");9!=u.nodeType;u=S(u))for(e=j(u),o=0;o<e.length;o++)if(n=e[o].nodeName.split(":"),1===n.length&&(n[1]=n[0],n[0]=""),"lang"==n[1]){if(i=e[o].nodeValue.toLowerCase().split("-"),i.length<l.length)continue;for(a=!0,s=0;s<l.length;s++)if(l[s]!=i[s]){a=!1;break}if(a)for(r=R.call(this,u),s=0;s<r.length;s++)if(r[s].prefix==n[0]&&r[s].nodeValue==k)return new m((!0))}return new m((!1))},args:[{t:"string"}],ret:"boolean"},number:{fn:function(t){return 0==arguments.length&&(t=new _([this.node],"document-order")),new y(t.toNumber())},args:[{t:"object",r:!1}],ret:"number"},sum:{fn:function(t){var e,n=0;for(t=t.toNodeSet(),e=0;e<t.length;e++)n+=new g(V(t[e])).toNumber();return new y(n)},args:[{t:"node-set"}],ret:"number"},floor:{fn:function(t){return new y(Math.floor(t))},args:[{t:"number"}],ret:"number"},ceiling:{fn:function(t){return new y(Math.ceil(t))},args:[{t:"number"}],ret:"number"},"count-non-empty":{fn:function(t){var e,n=0;for(t=t.toNodeSet(),e=0;e<t.length;e++)new g(V(t[e])).toString().length>0&&n++;return new y(n)},args:[{t:"node-set"}],ret:"number"},position:{fn:function(t){if(t){var e,n,i;if(t=t.toNodeSet(),1===t.length){for(e=t[0],i=1,n=e.tagName;e.previousElementSibling&&e.previousElementSibling.tagName===n;)e=e.previousElementSibling,i++;return new y(i)}throw new Error("nodeset provided to position() contained multiple nodes")}return new y(this.pos)},args:[{t:"node-set",r:!1}],ret:"number"},concat:{fn:function(t){var e,n,i="";for(e=0;e<arguments.length;e++)n=arguments[e]instanceof _?arguments[e].stringValues().join(""):arguments[e].toString(),i+=n;return new g(i)},args:[{t:"object",r:!1,rep:!0}],ret:"string"},round:{fn:function(t,e){return e=Math.round(e)||0,new y(Math.round(t*Math.pow(10,e))/Math.pow(10,e))},args:[{t:"number"},{t:"number",r:!1}],ret:"number"},selected:{fn:function(t,e){var n;return e=e.toString().trim(),n=t.toString(),new m((" "+n+" ").indexOf(" "+e+" ")!=-1)},args:[{t:"object"},{t:"string"}],ret:"boolean"},"selected-at":{fn:function(t,e){var n,i,r;return e=Math.round(e.toNumber()),n=t.toString(),i=n.split(" "),r=e>=0&&e<i.length?i[e]:"",new g(r)},args:[{t:"object"},{t:"number"}],ret:"string"},"count-selected":{fn:function(t){var e=[];return t=t.toNodeSet(),t.length>0?(e=V(t[0]).trim().split(" "),new y(1==e.length&&""===e[0]?0:e.length)):new y(0)},args:[{t:"node-set"}],ret:"number"},checklist:{fn:function(t,e,n){var i,r,o=0;for(t=t.toNumber(),e=e.toNumber(),i=2;i<arguments.length;i++)if(arguments[i]instanceof _)for(r=0;r<arguments[i].stringValues().length;r++)arguments[i].stringValues()[r].toBoolean()===!0&&o++;else arguments[i].toBoolean()===!0&&o++;return new m((t<0||o>=t)&&(e<0||o<=e))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"weighted-checklist":{fn:function(t,e,n,i){var r,o=[],s=[],a=0;for(t=t.toNumber(),e=e.toNumber(),r=2;r<arguments.length;r+=2)v=arguments[r],w=arguments[r+1],v&&w&&(v instanceof _?o=o.concat(v.stringValues()):o.push(v),w instanceof _?s=s.concat(w.stringValues()):s.push(w));for(r=0;r<o.length;r++)o[r].toBoolean()===!0&&(a+=s[r].toNumber());return new m((t<0||a>=t)&&(e<0||a<=e))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"boolean-from-string":{fn:function(t){return new m("true"===t.toString().toLowerCase()||"1"===String(t))},args:[{t:"string"}],ret:"boolean"},"if":{fn:function(t,e,n){return t.toBoolean()?e:n},args:[{t:"object"},{t:"object"},{t:"object"}],ret:"object"},date:{fn:function(t){return new DateType(t.toDate())},args:[{t:"object"}],ret:"string"},"date-time":{fn:function(t){return new DateType(t.toDate())},args:[{t:"object"}],ret:"string"},"decimal-date-time":{fn:function(t){var e,n=864e5,i=1e3,r=t.toDate();return e="Invalid Date"!==r.toString()?Math.round(r.getTime()*i/n)/i:Number.NaN,new y(e)},args:[{t:"object"}],ret:"number"},"decimal-time":{fn:function(t){var e,n=t.toString().match(/^(\d\d):(\d\d):(\d\d)(\.\d\d?\d?)?(\+|-)(\d\d):(\d\d)$/),i=(new Error("Invalid time format provided."),1e3);if(n&&n[1]<24&&n[1]>=0&&n[2]<60&&n[2]>=0&&n[3]<60&&n[3]>=0&&n[6]<24&&n[6]>=0&&n[7]<60&&n[7]>=0){var r=function(t){return t<10?"0"+t:t},o=new Date,s=new Date(o.getFullYear()+"-"+r(o.getMonth()+1)+"-"+r(o.getDate())+"T"+t);e="Invalid Date"===s.toString()?Number.NaN:Math.round((s.getSeconds()/3600+s.getMinutes()/60+s.getHours())*i/24)/i}else e=Number.NaN;return new y(e)},args:[{t:"string"}],ret:"number"},today:{fn:function(){var t=new Date;return new DateType(new Date(t.getFullYear(),t.getMonth(),t.getDate()));
},ret:"string"},now:{fn:function(){return new DateType(new Date)},ret:"string"},regex:{fn:function(t,e){var n,i;return n=t.toString(),i=new RegExp(e),new m(i.test(n))},args:[{t:"object"},{t:"string"}],ret:"boolean"},uuid:{fn:function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)});return new g(t)},ret:"string"},"int":{fn:function(t){return new y(t.toNumber()>=0?Math.floor(t.toNumber()):-Math.floor(Math.abs(t.toNumber())))},args:[{t:"string"}],ret:"number"},substr:{fn:function(t,e,n){return t=t.toString(),length=t.length,e=Math.round(e.toNumber()),n=n?Math.round(n.toNumber()):length,new g(isNaN(e)?"":t.substring(e<0?length+e:e,n<0?length+n:n))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},random:{fn:function(){return new y(Math.random().toFixed(15))},ret:"number"},min:{fn:function(t,e){var n,i,r,o,s;for(n=0;n<arguments.length;n++)if(arguments[n]instanceof _){for(s=arguments[n].toNodeSet(),i=0;i<s.length;i++)o=new g(V(s[i])),o&&(r="undefined"!=typeof r?Math.min(r,o.toNumber()):o.toNumber());0===s.length&&(r=NaN)}else o=new g(arguments[n].toString()),o&&(r="undefined"!=typeof r?Math.min(r,o.toNumber()):o.toNumber());return new y(r)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},max:{fn:function(t,e){var n,i,r,o,s;for(n=0;n<arguments.length;n++)if(arguments[n]instanceof _){for(s=arguments[n].toNodeSet(),i=0;i<s.length;i++)o=new g(V(s[i])),o&&(r="undefined"!=typeof r?Math.max(r,o.toNumber()):o.toNumber());0===s.length&&(r=NaN)}else o=new g(arguments[n].toString()),o&&(r="undefined"!=typeof r?Math.max(r,o.toNumber()):o.toNumber());return new y(r)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},join:{fn:function(t,e){var n,i=[];for(n=1;n<arguments.length;n++)arguments[n]instanceof _?i=i.concat(arguments[n].stringValues()):i.push(arguments[n].toString());for(value=i[0]||"",n=1;n<i.length;n++)value+=t.toString()+i[n];return new g(value)},args:[{t:"string"},{t:"object",r:!1,rep:!0}],ret:"string"},coalesce:{fn:function(t,e){return t.toString().length>0?t:e},args:[{t:"object"},{t:"object"}],ret:"string"},"format-date":{fn:function(t,e){var n,t=new DateType(t),i=t.toDate(),r=e.toString(),o=function(t,e){var i=t.toString(),r=e-i.length;for(n=0;n<r;n++)i="0"+i;return i},s=window?window.enketoFormLocale:void 0;if(!t.toBoolean())return new g(i.toString());props={Y:i.getFullYear(),y:i.getFullYear().toString().substring(2,4),m:o(i.getMonth()+1,2),n:i.getMonth()+1,b:i.toLocaleDateString(s,{month:"short"}),d:o(i.getDate(),2),e:i.getDate(),H:o(i.getHours(),2),h:i.getHours(),M:o(i.getMinutes(),2),S:o(i.getSeconds(),2),3:o(i.getMilliseconds(),3),a:i.toLocaleDateString(s,{weekday:"short"})};for(prop in props)r=r.replace("%"+prop,props[prop]);return new g(r)},args:[{t:"date"},{t:"string"}],ret:"string"},pow:{fn:function(t,e){return new y(Math.pow(t,e))},args:[{t:"number"},{t:"number"}],ret:"number"},sin:{fn:function(t){return new y(Math.sin(t))},args:[{t:"number"}],ret:"number"},cos:{fn:function(t){return new y(Math.cos(t))},args:[{t:"number"}],ret:"number"},tan:{fn:function(t){return new y(Math.tan(t))},args:[{t:"number"}],ret:"number"},acos:{fn:function(t){return new y(Math.acos(t))},args:[{t:"number"}],ret:"number"},asin:{fn:function(t){return new y(Math.asin(t))},args:[{t:"number"}],ret:"number"},atan:{fn:function(t){return new y(Math.atan(t))},args:[{t:"number"}],ret:"number"},atan2:{fn:function(t,e){return new y(Math.atan2(t,e))},args:[{t:"number"},{t:"number"}],ret:"number"},log10:{fn:function(t){return new y("undefined"!=typeof Math.log10?Math.log10(t):Math.log(t)/Math.LN10)},args:[{t:"number"}],ret:"number"},log:{fn:function(t){return new y(Math.log(t))},args:[{t:"number"}],ret:"number"},pi:{fn:function(){return new y(Math.PI)},args:[],ret:"number"},exp:{fn:function(t){return new y(Math.exp(t))},args:[{t:"number"}],ret:"number"},exp10:{fn:function(t){return new y(Math.pow(10,t))},args:[{t:"number"}],ret:"number"},sqrt:{fn:function(t){return new y(Math.sqrt(t))},args:[{t:"number"}],ret:"number"},once:{fn:function(t){var e=V(this.node),n=t.toString();return n="NaN"===n?"":n,new g(""!==e?e:n)},args:[{t:"string"}],ret:"string"},area:{fn:function(t){var e=[];return t instanceof _&&t.value.length>1?t.value.forEach(function(t){e.push(V(t))}):t instanceof _?e=V(t.value[0]).split(";"):t instanceof g&&(e=t.value.split(";")),new y(o.area(e))},args:[{t:"string"}],ret:"number"},distance:{fn:function(t){var e=[];return t instanceof _&&t.value.length>1?t.value.forEach(function(t){e.push(V(t))}):t instanceof _?e=V(t.value[0]).split(";"):t instanceof g&&(e=t.value.split(";")),new y(o.distance(e))},args:[{t:"string"}],ret:"number"},"ends-with":{fn:function(t,e){return new m(t.toString().substr(t.toString().length-e.toString().length)===e.toString())},args:[{t:"string"},{t:"string"}],ret:"string"},abs:{fn:function(t){return new y(Math.abs(t))},args:[{t:"number"}],ret:"number"},randomize:{fn:function(t,e){var n=e?e.toNumber():void 0;return new _(r(t.toNodeSet(),n),"document-order")},args:[{t:"node-set"},{t:"number",r:!1}],ret:"node-set"}}},d[""]["format-date-time"]=d[""]["format-date"],c=function(t,e){if("function"!=typeof h[e.type])throw new Error("Internal Error: Expression type does not exist: "+e.type);return h[e.type].apply(t,e.args)},a=function(e,n,i){switch(n){case a.NUMBER_TYPE:this.resultType=a.NUMBER_TYPE,this.numberValue=i.toNumber();break;case a.STRING_TYPE:this.resultType=a.STRING_TYPE,this.stringValue=i.toString();break;case a.BOOLEAN_TYPE:this.resultType=a.BOOLEAN_TYPE,this.booleanValue=i.toBoolean();break;case a.UNORDERED_NODE_ITERATOR_TYPE:case a.ORDERED_NODE_ITERATOR_TYPE:case a.UNORDERED_NODE_SNAPSHOT_TYPE:case a.ORDERED_NODE_SNAPSHOT_TYPE:case a.ANY_UNORDERED_NODE_TYPE:case a.FIRST_ORDERED_NODE_TYPE:if(!i instanceof _)throw new Error('Expected result of type "node-set", got: "'+i.type+'"');switch(this.resultType=n,n){case a.UNORDERED_NODE_ITERATOR_TYPE:case a.UNORDERED_NODE_SNAPSHOT_TYPE:this._value=i.toNodeSet(),this.snapshotLength=this._value.length;break;case a.ORDERED_NODE_ITERATOR_TYPE:case a.ORDERED_NODE_SNAPSHOT_TYPE:i.sortDocumentOrder(),this._value=i.toNodeSet(),this.snapshotLength=this._value.length;break;case a.ANY_UNORDERED_NODE_TYPE:i=i.toNodeSet(),this.singleNodeValue=i.length?i[0]:null;break;case a.FIRST_ORDERED_NODE_TYPE:i.sortDocumentOrder(),i=i.toNodeSet(),this.singleNodeValue=i.length?i[0]:null;break;default:throw new t(t.TYPE_ERR,"XPath result type not supported. (type: "+n+")")}break;default:throw new t(t.TYPE_ERR,"XPath result type not supported. (type: "+n+")")}},a.factory=function(e,n,i){var r;if(n!==a.ANY_TYPE)return new a(e,n,i);if(i instanceof _)r=new a(e,a.UNORDERED_NODE_ITERATOR_TYPE,i);else if(i instanceof y)r=new a(e,a.NUMBER_TYPE,i);else if(i instanceof m)r=new a(e,a.BOOLEAN_TYPE,i);else{if(!(i instanceof g))throw new t(t.TYPE_ERR,"Internal Error: Unsupported value type: "+typeof i);r=new a(e,a.STRING_TYPE,i)}return r},a.prototype={resultType:null,numberValue:null,stringValue:null,booleanValue:null,singleNodeValue:null,invalidIteratorState:null,snapshotLength:null,_iteratorIndex:0,iterateNext:function(){if(this.resultType!=a.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=a.ORDERED_NODE_ITERATOR_TYPE)throw new t(t.TYPE_ERR,"iterateNext() method may only be used with results of type UNORDERED_NODE_ITERATOR_TYPE or ORDERED_NODE_ITERATOR_TYPE");return this._iteratorIndex<this._value.length?this._value[this._iteratorIndex++]:null},snapshotItem:function(e){if(this.resultType!=a.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=a.ORDERED_NODE_SNAPSHOT_TYPE)throw new t(t.TYPE_ERR,"snapshotItem() method may only be used with results of type UNORDERED_NODE_SNAPSHOT_TYPE or ORDERED_NODE_SNAPSHOT_TYPE");return this._value[e]}},a.ANY_TYPE=0,a.NUMBER_TYPE=1,a.STRING_TYPE=2,a.BOOLEAN_TYPE=3,a.UNORDERED_NODE_ITERATOR_TYPE=4,a.ORDERED_NODE_ITERATOR_TYPE=5,a.UNORDERED_NODE_SNAPSHOT_TYPE=6,a.ORDERED_NODE_SNAPSHOT_TYPE=7,a.ANY_UNORDERED_NODE_TYPE=8,a.FIRST_ORDERED_NODE_TYPE=9,u=function(t,e,n){if(1!=n.nodeType)throw new Error("Internal Error: XPathNamespace owner element must be an Element node.");this.ownerElement=n,this.ownerDocument=n.ownerDocument,this.nodeName="#namespace",this.prefix=t,this.localName=t,this.nodeType=u.XPATH_NAMESPACE_NODE,this.namespaceURI=e,this.nodeValue=e},u.XPATH_NAMESPACE_NODE=13,l={XPathException:t,XPathEvaluator:e,XPathNSResolver:s,XPathExpression:n,XPathResult:a,XPathNamespace:u,customXPathFunction:{type:{StringType:g,NumberType:y,NodeSetType:_,BooleanType:m},add:function(t,e){d[""][t]=e},remove:function(t){delete d[""][t]}},getCurrentDomLevel3XPathBindings:function(){return{window:{XPathException:window.XPathException,XPathExpression:window.XPathExpression,XPathNSResolver:window.XPathNSResolver,XPathResult:window.XPathResult,XPathNamespace:window.XPathNamespace},document:{createExpression:document.createExpression,createNSResolver:document.createNSResolver,evaluate:document.evaluate}}},createDomLevel3XPathBindings:function(i){var r=new e(i);return{window:{XPathException:t,XPathExpression:n,XPathNSResolver:s,XPathResult:a,XPathNamespace:u},document:{createExpression:function(){return r.createExpression.apply(r,arguments)},createNSResolver:function(){return r.createNSResolver.apply(r,arguments)},evaluate:function(){return r.evaluate.apply(r,arguments)}}}},bindDomLevel3XPath:function(t,e){var n,i=e||l.createDomLevel3XPathBindings(),r=l.getCurrentDomLevel3XPathBindings(),t=t||document;for(n in i.window)window[n]=i.window[n];for(n in i.document)t[n]=i.document[n];return r}}}()},{"../dist/parser":62,"./date-extensions":63,"./geo":65,"./shuffle":66}],65:[function(t,e,n){function i(t){return t.map(function(t){return t.trim().split(" ")})}function r(t){return t.every(function(t){return""!==t[0]&&t[0]>=-90&&t[0]<=90&&""!==t[1]&&t[1]>=-180&&t[1]<=180&&("undefined"==typeof t[2]||!isNaN(t[2]))&&("undefined"==typeof t[3]||!isNaN(t[3])&&t[3]>=0)})}function o(t){var e=i(t);if(!r(e))return Number.NaN;var n=e.length,o=0;if(n>2){for(var s=0;s<n;s++){var c={lat:e[s][0],lng:e[s][1]},h={lat:e[(s+1)%n][0],lng:e[(s+1)%n][1]};o+=(h.lng-c.lng)*l*(2+Math.sin(c.lat*l)+Math.sin(h.lat*l))}o=o*a*a/2}return Math.abs(Math.round(o*u))/u}function s(t){var e=i(t);if(!r(e))return Number.NaN;var n=e.length,o=0;if(n>1)for(var s=1;s<n;s++){var c={lat:e[s-1][0],lng:e[s-1][1]},h={lat:e[s][0],lng:e[s][1]},d=c.lat*l,p=h.lat*l,f=(h.lat-c.lat)*l,m=(h.lng-c.lng)*l,g=Math.sin(f/2)*Math.sin(f/2)+Math.cos(d)*Math.cos(p)*Math.sin(m/2)*Math.sin(m/2),v=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g));o+=a*v}return Math.abs(Math.round(o*u))/u}var a=6378100,u=100,l=Math.PI/180;e.exports={area:o,distance:s}},{}],66:[function(t,e,n){function i(t,e){var n,i=[];if("undefined"!=typeof e){if(!Number.isInteger(e))throw new Error("Invalid seed argument. Integer required.");var o=new r(e);n=o.nextFloat.bind(o)}else n=Math.random;for(var s=0;s<t.length;++s){var a=Math.floor(n()*(s+1));a!==s&&(i[s]=i[a]),i[a]=t[s]}return i}function r(t){this._seed=t%o,this._seed<=0&&(this._seed+=o-1)}var o=2147483647,s=16807;Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.prototype.next=function(){return this._seed=this._seed*s%o},r.prototype.nextFloat=function(){return(this.next()-1)/(o-1)},e.exports=i},{}],67:[function(t,e,n){function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=b(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function r(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function o(t,e,n){if(e)t.call(n);else for(var i=t.length,r=m(t,i),o=0;o<i;++o)r[o].call(n)}function s(t,e,n,i){if(e)t.call(n,i);else for(var r=t.length,o=m(t,r),s=0;s<r;++s)o[s].call(n,i)}function a(t,e,n,i,r){if(e)t.call(n,i,r);else for(var o=t.length,s=m(t,o),a=0;a<o;++a)s[a].call(n,i,r)}function u(t,e,n,i,r,o){if(e)t.call(n,i,r,o);else for(var s=t.length,a=m(t,s),u=0;u<s;++u)a[u].call(n,i,r,o)}function l(t,e,n,i){if(e)t.apply(n,i);else for(var r=t.length,o=m(t,r),s=0;s<r;++s)o[s].apply(n,i)}function c(t,e,n,i){var o,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(s=t._events,s?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]):(s=t._events=b(null),t._eventsCount=0),a){if("function"==typeof a?a=s[e]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),!a.warned&&(o=r(t),o&&o>0&&a.length>o)){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=s[e]=n,++t._eventsCount;return t}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function d(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=x.call(h,i);return r.listener=n,i.wrapFn=r,r}function p(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function f(t,e){for(var n=e,i=n+1,r=t.length;i<r;n+=1,i+=1)t[n]=t[i];t.pop()}function m(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function g(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function v(t){var e=function(){};return e.prototype=t,new e}function y(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n}function _(t){var e=this;return function(){return e.apply(t,arguments)}}var b=Object.create||v,w=Object.keys||y,x=Function.prototype.bind||_;e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0;var k,$=10;try{var E={};Object.defineProperty&&Object.defineProperty(E,"x",{value:0}),k=0===E.x}catch(C){k=!1}k?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return $},set:function(t){if("number"!=typeof t||t<0||t!==t)throw new TypeError('"defaultMaxListeners" must be a positive number');$=t}}):i.defaultMaxListeners=$,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return r(this)},i.prototype.emit=function(t){var e,n,i,r,c,h,d="error"===t;if(h=this._events)d=d&&null==h.error;else if(!d)return!1;if(d){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var p=new Error('Unhandled "error" event. ('+e+")");throw p.context=e,p}if(n=h[t],!n)return!1;var f="function"==typeof n;switch(i=arguments.length){case 1:o(n,f,this);break;case 2:s(n,f,this,arguments[1]);break;case 3:a(n,f,this,arguments[1],arguments[2]);break;case 4:u(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),c=1;c<i;c++)r[c-1]=arguments[c];l(n,f,this,r)}return!0},i.prototype.addListener=function(t,e){return c(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return c(this,t,e,!0)},i.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,d(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,d(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,i,r,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(n=i[t],!n)return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=b(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():f(n,r),1===n.length&&(i[t]=n[0]),i.removeListener&&this.emit("removeListener",t,s||e)}return this},i.prototype.removeAllListeners=function(t){var e,n,i;if(n=this._events,!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=b(null),this._eventsCount=0):n[t]&&(0===--this._eventsCount?this._events=b(null):delete n[t]),this;if(0===arguments.length){var r,o=w(n);for(i=0;i<o.length;++i)r=o[i],"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=b(null),this._eventsCount=0,this}if(e=n[t],"function"==typeof e)this.removeListener(t,e);else if(e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},i.prototype.listeners=function(t){var e,n,i=this._events;return i?(e=i[t],n=e?"function"==typeof e?[e.listener||e]:g(e):[]):n=[],n},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],68:[function(t,e,n){"use strict";function i(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t){return f.test(t)}function o(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=r(t)?t.substr(6):"";return"jpeg"===n&&(n="jpg"),n&&e&&(n="."+n),n}function s(t,e,n){var i="",r=void 0;for(n+=e,r=e;r<n;r+=1)i+=m(t.getUint8(r));return i}function a(t,e){var n=new Uint8Array(t),i=n.length,r="",o=void 0;for(o=0;o<i;o+=1)r+=m(n[o]);return"data:"+e+";base64,"+v(r)}function u(t){var e=new DataView(t),n=void 0,i=void 0,r=void 0,o=void 0;if(255===e.getUint8(0)&&216===e.getUint8(1))for(var a=e.byteLength,u=2;u<a;){if(255===e.getUint8(u)&&225===e.getUint8(u+1)){r=u;break}u+=1}if(r){var l=r+4,c=r+10;if("Exif"===s(e,l,4)){var h=e.getUint16(c);if(i=18761===h,(i||19789===h)&&42===e.getUint16(c+2,i)){var d=e.getUint32(c+4,i);d>=8&&(o=c+d)}}}if(o){var p=e.getUint16(o,i),f=void 0,m=void 0;for(m=0;m<p;m+=1)if(f=o+12*m+2,274===e.getUint16(f,i)){f+=8,n=e.getUint16(f,i),e.setUint16(f,1,i);break}}return n}function l(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:i}}var c=i(function(t){!function(e){var n=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,i=e.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),r=i&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),o=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,s=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,a=(i||o)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(t){var e,n,a,u,l,c,h,d,p;if(e=t.match(s),!e)throw new Error("invalid data URI");for(n=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),a=!!e[4],u=t.slice(e[0].length),l=a?atob(u):decodeURIComponent(u),c=new ArrayBuffer(l.length),h=new Uint8Array(c),d=0;d<l.length;d+=1)h[d]=l.charCodeAt(d);return i?new Blob([r?h:c],{type:n}):(p=new o,p.append(c),p.getBlob(n))};e.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(t,e,i){var r=this;setTimeout(function(){t(i&&n.toDataURL&&a?a(r.toDataURL(e,i)):r.mozGetAsFile("blob",e))})}:n.toDataURL&&a&&(n.toBlob=function(t,e,n){var i=this;setTimeout(function(){t(a(i.toDataURL(e,n)))})})),t.exports?t.exports=a:e.dataURLtoBlob=a}(window)}),h=Object.prototype.toString,d=function(t){return t instanceof Blob||"[object Blob]"===h.call(t)},p={checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,quality:.8,mimeType:"auto",convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},f=/^image\/.+$/,m=String.fromCharCode,g=window,v=g.btoa,y=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},w=window,x=w.ArrayBuffer,k=w.FileReader,$=window.URL||window.webkitURL,E=/\.\w+$/,C=function(){function t(e,n){y(this,t),this.result=null,e&&this.compress(e,n)}return _(t,[{key:"compress",value:function(t,e){var n=this,i=new Image;return e=b({},p,e),x||(e.checkOrientation=!1),new Promise(function(n,i){if(!d(t))return void i(new Error("The first argument must be a File or Blob object."));var o=t.type;if(!r(o))return void i(new Error("The first argument must be an image File or Blob object."));if(!$&&!k)return void i(new Error("The current browser does not support image compression."));if($&&!e.checkOrientation)n($.createObjectURL(t));else if(k){var s=new k,c=e.checkOrientation&&"image/jpeg"===o;s.onload=function(t){var e=t.target,i=e.result;n(c?b({url:a(i,o)},l(u(i))):{url:i})},s.onabort=i,s.onerror=i,c?s.readAsArrayBuffer(t):s.readAsDataURL(t)}}).then(function(e){return new Promise(function(n,r){i.onload=function(){return n(b({},e,{naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight}))},i.onabort=r,i.onerror=r,i.alt=t.name,i.src=e.url})}).then(function(o){var s=o.naturalWidth,a=o.naturalHeight,u=o.rotate,l=void 0===u?0:u,h=o.scaleX,d=void 0===h?1:h,p=o.scaleY,f=void 0===p?1:p;return new Promise(function(o){var u=document.createElement("canvas"),h=u.getContext("2d"),p=s/a,m=Math.max(e.maxWidth,0)||1/0,g=Math.max(e.maxHeight,0)||1/0,v=Math.max(e.minWidth,0)||0,y=Math.max(e.minHeight,0)||0,_=s,b=a;if(m<1/0&&g<1/0?g*p>m?g=m/p:m=g*p:m<1/0?g=m/p:g<1/0&&(m=g*p),v>0&&y>0?y*p>v?y=v/p:v=y*p:v>0?y=v/p:y>0&&(v=y*p),e.width>0){var w=e;_=w.width,b=_/p}else if(e.height>0){var x=e;b=x.height,_=b*p}_=Math.min(Math.max(_,v),m),b=Math.min(Math.max(b,y),g);var k=-_/2,$=-b/2,E=_,C=b;if(Math.abs(l)%180===90){var T={width:b,height:_};_=T.width,b=T.height}u.width=_,u.height=b,r(e.mimeType)||(e.mimeType=t.type);var L="transparent";t.size>e.convertSize&&"image/png"===e.mimeType&&(L="#fff",e.mimeType="image/jpeg"),h.fillStyle=L,h.fillRect(0,0,_,b),h.save(),h.translate(_/2,b/2),h.rotate(l*Math.PI/180),h.scale(d,f),e.beforeDraw&&e.beforeDraw.call(n,h,u),h.drawImage(i,Math.floor(k),Math.floor($),Math.floor(E),Math.floor(C)),e.drew&&e.drew.call(n,h,u),h.restore();var S=function(t){o({naturalWidth:s,naturalHeight:a,result:t})};u.toBlob?u.toBlob(S,e.mimeType,e.quality):S(c(u.toDataURL(e.mimeType,e.quality)))})}).then(function(r){var s=r.naturalWidth,a=r.naturalHeight,u=r.result;if($&&$.revokeObjectURL(i.src),u)if(u.size>t.size&&e.mimeType===t.type&&!(e.width>s||e.height>a||e.minWidth>s||e.minHeight>a))u=t;else{var l=new Date;u.lastModified=l.getTime(),u.lastModifiedDate=l,u.name=t.name,u.name&&u.type!==t.type&&(u.name=u.name.replace(E,o(u.type)))}else u=t;return n.result=u,e.success&&e.success.call(n,u),Promise.resolve(u)})["catch"](function(t){if(!e.error)throw t;e.error.call(n,t)})}}]),t}();e.exports=C},{}],69:[function(t,e,n){(function(t){"use strict";function n(){c=!0;for(var t,e,n=h.length;n;){for(e=h,h=[],t=-1;++t<n;)e[t]();n=h.length}c=!1}function i(t){1!==h.push(t)||c||r()}var r,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var s=0,a=new o(n),u=t.document.createTextNode("");a.observe(u,{characterData:!0}),r=function(){u.data=s=++s%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var l=new t.MessageChannel;l.port1.onmessage=n,r=function(){l.port2.postMessage(0)}}var c,h=[];e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],70:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],71:[function(t,e,n){!function(n){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],n):n("undefined"!=typeof e&&e.exports?t("jquery"):jQuery)}(function(t){"use strict";function e(e){return!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll=c),void 0!==e.click&&void 0===e.tap&&(e.tap=e.click),e||(e={}),e=t.extend({},t.fn.swipe.defaults,e),this.each(function(){var i=t(this),r=i.data(L);r||(r=new n(this,e),i.data(L,r))})}function n(e,n){function i(e){if(!(lt()||t(e.target).closest(n.excludedElements,Ht).length>0)){var i=e.originalEvent?e.originalEvent:e;if(!i.pointerType||"mouse"!=i.pointerType||0!=n.fallbackToMouseEvents){var r,o=i.touches,s=o?o[0]:i;return Wt=w,o?Zt=o.length:n.preventDefaultEvents!==!1&&e.preventDefault(),Ot=0,It=null,jt=null,zt=null,Rt=0,qt=0,Ft=0,Bt=1,Ut=0,Vt=gt(),at(),ht(0,s),!o||Zt===n.fingers||n.fingers===_||z()?(Yt=Et(),2==Zt&&(ht(1,o[1]),qt=Ft=_t(Gt[0].start,Gt[1].start)),(n.swipeStatus||n.pinchStatus)&&(r=O(i,Wt))):r=!1,r===!1?(Wt=$,O(i,Wt),r):(n.hold&&(ee=setTimeout(t.proxy(function(){Ht.trigger("hold",[i.target]),n.hold&&(r=n.hold.call(Ht,i,i.target))},this),n.longTapThreshold)),ct(!0),null)}}}function S(t){var e=t.originalEvent?t.originalEvent:t;if(Wt!==k&&Wt!==$&&!ut()){var i,r=e.touches,o=r?r[0]:e,s=dt(o);if(Xt=Et(),r&&(Zt=r.length),n.hold&&clearTimeout(ee),Wt=x,2==Zt&&(0==qt?(ht(1,r[1]),qt=Ft=_t(Gt[0].start,Gt[1].start)):(dt(r[1]),Ft=_t(Gt[0].end,Gt[1].end),zt=wt(Gt[0].end,Gt[1].end)),Bt=bt(qt,Ft),Ut=Math.abs(qt-Ft)),Zt===n.fingers||n.fingers===_||!r||z()){if(It=$t(s.start,s.end),jt=$t(s.last,s.end),B(t,jt),Ot=xt(s.start,s.end),Rt=yt(),ft(It,Ot),i=O(e,Wt),!n.triggerOnTouchEnd||n.triggerOnTouchLeave){var a=!0;if(n.triggerOnTouchLeave){var u=Ct(this);a=Tt(s.end,u)}!n.triggerOnTouchEnd&&a?Wt=P(x):n.triggerOnTouchLeave&&!a&&(Wt=P(k)),Wt!=$&&Wt!=k||O(e,Wt)}}else Wt=$,O(e,Wt);i===!1&&(Wt=$,O(e,Wt))}}function D(t){var e=t.originalEvent?t.originalEvent:t,i=e.touches;if(i){if(i.length&&!ut())return st(e),!0;if(i.length&&ut())return!0}return ut()&&(Zt=Jt),Xt=Et(),Rt=yt(),R()||!j()?(Wt=$,O(e,Wt)):n.triggerOnTouchEnd||n.triggerOnTouchEnd===!1&&Wt===x?(n.preventDefaultEvents!==!1&&t.cancelable!==!1&&t.preventDefault(),Wt=k,O(e,Wt)):!n.triggerOnTouchEnd&&X()?(Wt=k,I(e,Wt,f)):Wt===x&&(Wt=$,O(e,Wt)),ct(!1),null}function M(){Zt=0,Xt=0,Yt=0,qt=0,Ft=0,Bt=1,at(),ct(!1)}function A(t){var e=t.originalEvent?t.originalEvent:t;n.triggerOnTouchLeave&&(Wt=P(k),O(e,Wt))}function N(){Ht.unbind(Dt,i),Ht.unbind(Pt,M),Ht.unbind(Mt,S),Ht.unbind(At,D),Nt&&Ht.unbind(Nt,A),ct(!1)}function P(t){var e=t,i=F(),r=j(),o=R();return!i||o?e=$:!r||t!=x||n.triggerOnTouchEnd&&!n.triggerOnTouchLeave?!r&&t==k&&n.triggerOnTouchLeave&&(e=$):e=k,e}function O(t,e){var n,i=t.touches;return(Z()||W())&&(n=I(t,e,d)),(V()||z())&&n!==!1&&(n=I(t,e,p)),rt()&&n!==!1?n=I(t,e,m):ot()&&n!==!1?n=I(t,e,g):it()&&n!==!1&&(n=I(t,e,f)),e===$&&M(t),e===k&&(i?i.length||M(t):M(t)),n}function I(e,i,c){var h;if(c==d){if(Ht.trigger("swipeStatus",[i,It||null,Ot||0,Rt||0,Zt,Gt,jt]),n.swipeStatus&&(h=n.swipeStatus.call(Ht,e,i,It||null,Ot||0,Rt||0,Zt,Gt,jt),h===!1))return!1;if(i==k&&H()){if(clearTimeout(te),clearTimeout(ee),Ht.trigger("swipe",[It,Ot,Rt,Zt,Gt,jt]),n.swipe&&(h=n.swipe.call(Ht,e,It,Ot,Rt,Zt,Gt,jt),h===!1))return!1;switch(It){case r:Ht.trigger("swipeLeft",[It,Ot,Rt,Zt,Gt,jt]),n.swipeLeft&&(h=n.swipeLeft.call(Ht,e,It,Ot,Rt,Zt,Gt,jt));break;case o:Ht.trigger("swipeRight",[It,Ot,Rt,Zt,Gt,jt]),n.swipeRight&&(h=n.swipeRight.call(Ht,e,It,Ot,Rt,Zt,Gt,jt));break;case s:Ht.trigger("swipeUp",[It,Ot,Rt,Zt,Gt,jt]),n.swipeUp&&(h=n.swipeUp.call(Ht,e,It,Ot,Rt,Zt,Gt,jt));break;case a:Ht.trigger("swipeDown",[It,Ot,Rt,Zt,Gt,jt]),n.swipeDown&&(h=n.swipeDown.call(Ht,e,It,Ot,Rt,Zt,Gt,jt))}}}if(c==p){if(Ht.trigger("pinchStatus",[i,zt||null,Ut||0,Rt||0,Zt,Bt,Gt]),n.pinchStatus&&(h=n.pinchStatus.call(Ht,e,i,zt||null,Ut||0,Rt||0,Zt,Bt,Gt),h===!1))return!1;if(i==k&&U())switch(zt){case u:Ht.trigger("pinchIn",[zt||null,Ut||0,Rt||0,Zt,Bt,Gt]),n.pinchIn&&(h=n.pinchIn.call(Ht,e,zt||null,Ut||0,Rt||0,Zt,Bt,Gt));break;case l:Ht.trigger("pinchOut",[zt||null,Ut||0,Rt||0,Zt,Bt,Gt]),n.pinchOut&&(h=n.pinchOut.call(Ht,e,zt||null,Ut||0,Rt||0,Zt,Bt,Gt))}}return c==f?i!==$&&i!==k||(clearTimeout(te),clearTimeout(ee),K()&&!tt()?(Qt=Et(),te=setTimeout(t.proxy(function(){Qt=null,Ht.trigger("tap",[e.target]),n.tap&&(h=n.tap.call(Ht,e,e.target))},this),n.doubleTapThreshold)):(Qt=null,Ht.trigger("tap",[e.target]),n.tap&&(h=n.tap.call(Ht,e,e.target)))):c==m?i!==$&&i!==k||(clearTimeout(te),clearTimeout(ee),Qt=null,Ht.trigger("doubletap",[e.target]),n.doubleTap&&(h=n.doubleTap.call(Ht,e,e.target))):c==g&&(i!==$&&i!==k||(clearTimeout(te),Qt=null,Ht.trigger("longtap",[e.target]),n.longTap&&(h=n.longTap.call(Ht,e,e.target)))),h}function j(){var t=!0;return null!==n.threshold&&(t=Ot>=n.threshold),t}function R(){var t=!1;return null!==n.cancelThreshold&&null!==It&&(t=mt(It)-Ot>=n.cancelThreshold),t}function q(){return null===n.pinchThreshold||Ut>=n.pinchThreshold}function F(){var t;return t=!(n.maxTimeThreshold&&Rt>=n.maxTimeThreshold)}function B(t,e){if(n.preventDefaultEvents!==!1)if(n.allowPageScroll===c)t.preventDefault();else{var i=n.allowPageScroll===h;switch(e){case r:(n.swipeLeft&&i||!i&&n.allowPageScroll!=v)&&t.preventDefault();break;case o:(n.swipeRight&&i||!i&&n.allowPageScroll!=v)&&t.preventDefault();break;case s:(n.swipeUp&&i||!i&&n.allowPageScroll!=y)&&t.preventDefault();break;case a:(n.swipeDown&&i||!i&&n.allowPageScroll!=y)&&t.preventDefault();break;case c:}}}function U(){var t=G(),e=Y(),n=q();return t&&e&&n}function z(){return!!(n.pinchStatus||n.pinchIn||n.pinchOut)}function V(){return!(!U()||!z())}function H(){var t=F(),e=j(),n=G(),i=Y(),r=R(),o=!r&&i&&n&&e&&t;return o}function W(){return!!(n.swipe||n.swipeStatus||n.swipeLeft||n.swipeRight||n.swipeUp||n.swipeDown)}function Z(){return!(!H()||!W())}function G(){return Zt===n.fingers||n.fingers===_||!E}function Y(){return 0!==Gt[0].end.x}function X(){return!!n.tap}function K(){return!!n.doubleTap}function J(){return!!n.longTap}function Q(){if(null==Qt)return!1;var t=Et();return K()&&t-Qt<=n.doubleTapThreshold}function tt(){return Q()}function et(){return(1===Zt||!E)&&(isNaN(Ot)||Ot<n.threshold)}function nt(){return Rt>n.longTapThreshold&&Ot<b}function it(){return!(!et()||!X())}function rt(){return!(!Q()||!K())}function ot(){return!(!nt()||!J())}function st(t){Kt=Et(),Jt=t.touches.length+1}function at(){Kt=0,Jt=0}function ut(){var t=!1;if(Kt){var e=Et()-Kt;e<=n.fingerReleaseThreshold&&(t=!0)}return t}function lt(){return!(Ht.data(L+"_intouch")!==!0)}function ct(t){Ht&&(t===!0?(Ht.bind(Mt,S),Ht.bind(At,D),Nt&&Ht.bind(Nt,A)):(Ht.unbind(Mt,S,!1),Ht.unbind(At,D,!1),Nt&&Ht.unbind(Nt,A,!1)),Ht.data(L+"_intouch",t===!0))}function ht(t,e){var n={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return n.start.x=n.last.x=n.end.x=e.pageX||e.clientX,n.start.y=n.last.y=n.end.y=e.pageY||e.clientY,Gt[t]=n,n}function dt(t){var e=void 0!==t.identifier?t.identifier:0,n=pt(e);return null===n&&(n=ht(e,t)),n.last.x=n.end.x,n.last.y=n.end.y,n.end.x=t.pageX||t.clientX,n.end.y=t.pageY||t.clientY,n}function pt(t){return Gt[t]||null}function ft(t,e){t!=c&&(e=Math.max(e,mt(t)),Vt[t].distance=e);
}function mt(t){if(Vt[t])return Vt[t].distance}function gt(){var t={};return t[r]=vt(r),t[o]=vt(o),t[s]=vt(s),t[a]=vt(a),t}function vt(t){return{direction:t,distance:0}}function yt(){return Xt-Yt}function _t(t,e){var n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return Math.round(Math.sqrt(n*n+i*i))}function bt(t,e){var n=e/t*1;return n.toFixed(2)}function wt(){return Bt<1?l:u}function xt(t,e){return Math.round(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))}function kt(t,e){var n=t.x-e.x,i=e.y-t.y,r=Math.atan2(i,n),o=Math.round(180*r/Math.PI);return o<0&&(o=360-Math.abs(o)),o}function $t(t,e){if(Lt(t,e))return c;var n=kt(t,e);return n<=45&&n>=0?r:n<=360&&n>=315?r:n>=135&&n<=225?o:n>45&&n<135?a:s}function Et(){var t=new Date;return t.getTime()}function Ct(e){e=t(e);var n=e.offset(),i={left:n.left,right:n.left+e.outerWidth(),top:n.top,bottom:n.top+e.outerHeight()};return i}function Tt(t,e){return t.x>e.left&&t.x<e.right&&t.y>e.top&&t.y<e.bottom}function Lt(t,e){return t.x==e.x&&t.y==e.y}var n=t.extend({},n),St=E||T||!n.fallbackToMouseEvents,Dt=St?T?C?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Mt=St?T?C?"MSPointerMove":"pointermove":"touchmove":"mousemove",At=St?T?C?"MSPointerUp":"pointerup":"touchend":"mouseup",Nt=St?T?"mouseleave":null:"mouseleave",Pt=T?C?"MSPointerCancel":"pointercancel":"touchcancel",Ot=0,It=null,jt=null,Rt=0,qt=0,Ft=0,Bt=1,Ut=0,zt=0,Vt=null,Ht=t(e),Wt="start",Zt=0,Gt={},Yt=0,Xt=0,Kt=0,Jt=0,Qt=0,te=null,ee=null;try{Ht.bind(Dt,i),Ht.bind(Pt,M)}catch(ne){t.error("events not supported "+Dt+","+Pt+" on jQuery.swipe")}this.enable=function(){return this.disable(),Ht.bind(Dt,i),Ht.bind(Pt,M),Ht},this.disable=function(){return N(),Ht},this.destroy=function(){N(),Ht.data(L,null),Ht=null},this.option=function(e,i){if("object"==typeof e)n=t.extend(n,e);else if(void 0!==n[e]){if(void 0===i)return n[e];n[e]=i}else{if(!e)return n;t.error("Option "+e+" does not exist on jQuery.swipe.options")}return null}}var i="1.6.18",r="left",o="right",s="up",a="down",u="in",l="out",c="none",h="auto",d="swipe",p="pinch",f="tap",m="doubletap",g="longtap",v="horizontal",y="vertical",_="all",b=10,w="start",x="move",k="end",$="cancel",E="ontouchstart"in window,C=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!E,T=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!E,L="TouchSwipe",S={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0};t.fn.swipe=function(n){var i=t(this),r=i.data(L);if(r&&"string"==typeof n){if(r[n])return r[n].apply(r,Array.prototype.slice.call(arguments,1));t.error("Method "+n+" does not exist on jQuery.swipe")}else if(r&&"object"==typeof n)r.option.apply(r,arguments);else if(!(r||"object"!=typeof n&&n))return e.apply(this,arguments);return i},t.fn.swipe.version=i,t.fn.swipe.defaults=S,t.fn.swipe.phases={PHASE_START:w,PHASE_MOVE:x,PHASE_END:k,PHASE_CANCEL:$},t.fn.swipe.directions={LEFT:r,RIGHT:o,UP:s,DOWN:a,IN:u,OUT:l},t.fn.swipe.pageScroll={NONE:c,HORIZONTAL:v,VERTICAL:y,AUTO:h},t.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:_}})},{jquery:72}],72:[function(t,e,n){!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function n(t,e,n){e=e||st;var i,r=e.createElement("script");if(r.text=t,n)for(i in bt)n[i]&&(r[i]=n[i]);e.head.appendChild(r).parentNode.removeChild(r)}function i(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?dt[pt.call(t)]||"object":typeof t}function r(t){var e=!!t&&"length"in t&&t.length,n=i(t);return!yt(t)&&!_t(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function o(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function s(t,e,n){return yt(e)?xt.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?xt.grep(t,function(t){return t===e!==n}):"string"!=typeof e?xt.grep(t,function(t){return ht.call(e,t)>-1!==n}):xt.filter(e,t,n)}function a(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function u(t){var e={};return xt.each(t.match(Pt)||[],function(t,n){e[n]=!0}),e}function l(t){return t}function c(t){throw t}function h(t,e,n,i){var r;try{t&&yt(r=t.promise)?r.call(t).done(e).fail(n):t&&yt(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}function d(){st.removeEventListener("DOMContentLoaded",d),t.removeEventListener("load",d),xt.ready()}function p(t,e){return e.toUpperCase()}function f(t){return t.replace(Rt,"ms-").replace(qt,p)}function m(){this.expando=xt.expando+m.uid++}function g(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:zt.test(t)?JSON.parse(t):t)}function v(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Vt,"-$&").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n=g(n)}catch(r){}Ut.set(t,e,n)}else n=void 0;return n}function y(t,e,n,i){var r,o,s=20,a=i?function(){return i.cur()}:function(){return xt.css(t,e,"")},u=a(),l=n&&n[3]||(xt.cssNumber[e]?"":"px"),c=(xt.cssNumber[e]||"px"!==l&&+u)&&Wt.exec(xt.css(t,e));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;s--;)xt.style(t,e,c+l),(1-o)*(1-(o=a()/u||.5))<=0&&(s=0),c/=o;c=2*c,xt.style(t,e,c+l),n=n||[]}return n&&(c=+c||+u||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=r)),r}function _(t){var e,n=t.ownerDocument,i=t.nodeName,r=Xt[i];return r?r:(e=n.body.appendChild(n.createElement(i)),r=xt.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),Xt[i]=r,r)}function b(t,e){for(var n,i,r=[],o=0,s=t.length;o<s;o++)i=t[o],i.style&&(n=i.style.display,e?("none"===n&&(r[o]=Bt.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&Gt(i)&&(r[o]=_(i))):"none"!==n&&(r[o]="none",Bt.set(i,"display",n)));for(o=0;o<s;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}function w(t,e){var n;return n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&o(t,e)?xt.merge([t],n):n}function x(t,e){for(var n=0,i=t.length;n<i;n++)Bt.set(t[n],"globalEval",!e||Bt.get(e[n],"globalEval"))}function k(t,e,n,r,o){for(var s,a,u,l,c,h,d=e.createDocumentFragment(),p=[],f=0,m=t.length;f<m;f++)if(s=t[f],s||0===s)if("object"===i(s))xt.merge(p,s.nodeType?[s]:s);else if(ee.test(s)){for(a=a||d.appendChild(e.createElement("div")),u=(Jt.exec(s)||["",""])[1].toLowerCase(),l=te[u]||te._default,a.innerHTML=l[1]+xt.htmlPrefilter(s)+l[2],h=l[0];h--;)a=a.lastChild;xt.merge(p,a.childNodes),a=d.firstChild,a.textContent=""}else p.push(e.createTextNode(s));for(d.textContent="",f=0;s=p[f++];)if(r&&xt.inArray(s,r)>-1)o&&o.push(s);else if(c=xt.contains(s.ownerDocument,s),a=w(d.appendChild(s),"script"),c&&x(a),n)for(h=0;s=a[h++];)Qt.test(s.type||"")&&n.push(s);return d}function $(){return!0}function E(){return!1}function C(){try{return st.activeElement}catch(t){}}function T(t,e,n,i,r,o){var s,a;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(a in e)T(t,a,n,i,e[a],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=E;else if(!r)return t;return 1===o&&(s=r,r=function(t){return xt().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=xt.guid++)),t.each(function(){xt.event.add(this,e,r,i,n)})}function L(t,e){return o(t,"table")&&o(11!==e.nodeType?e:e.firstChild,"tr")?xt(t).children("tbody")[0]||t:t}function S(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function D(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function M(t,e){var n,i,r,o,s,a,u,l;if(1===e.nodeType){if(Bt.hasData(t)&&(o=Bt.access(t),s=Bt.set(e,o),l=o.events)){delete s.handle,s.events={};for(r in l)for(n=0,i=l[r].length;n<i;n++)xt.event.add(e,r,l[r][n])}Ut.hasData(t)&&(a=Ut.access(t),u=xt.extend({},a),Ut.set(e,u))}}function A(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Kt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function N(t,e,i,r){e=lt.apply([],e);var o,s,a,u,l,c,h=0,d=t.length,p=d-1,f=e[0],m=yt(f);if(m||d>1&&"string"==typeof f&&!vt.checkClone&&ue.test(f))return t.each(function(n){var o=t.eq(n);m&&(e[0]=f.call(this,n,o.html())),N(o,e,i,r)});if(d&&(o=k(e,t[0].ownerDocument,!1,t,r),s=o.firstChild,1===o.childNodes.length&&(o=s),s||r)){for(a=xt.map(w(o,"script"),S),u=a.length;h<d;h++)l=o,h!==p&&(l=xt.clone(l,!0,!0),u&&xt.merge(a,w(l,"script"))),i.call(t[h],l,h);if(u)for(c=a[a.length-1].ownerDocument,xt.map(a,D),h=0;h<u;h++)l=a[h],Qt.test(l.type||"")&&!Bt.access(l,"globalEval")&&xt.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?xt._evalUrl&&xt._evalUrl(l.src):n(l.textContent.replace(le,""),c,l))}return t}function P(t,e,n){for(var i,r=e?xt.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||xt.cleanData(w(i)),i.parentNode&&(n&&xt.contains(i.ownerDocument,i)&&x(w(i,"script")),i.parentNode.removeChild(i));return t}function O(t,e,n){var i,r,o,s,a=t.style;return n=n||he(t),n&&(s=n.getPropertyValue(e)||n[e],""!==s||xt.contains(t.ownerDocument,t)||(s=xt.style(t,e)),!vt.pixelBoxStyles()&&ce.test(s)&&de.test(e)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function I(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function j(t){if(t in ye)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ve.length;n--;)if(t=ve[n]+e,t in ye)return t}function R(t){var e=xt.cssProps[t];return e||(e=xt.cssProps[t]=j(t)||t),e}function q(t,e,n){var i=Wt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function F(t,e,n,i,r,o){var s="width"===e?1:0,a=0,u=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=xt.css(t,n+Zt[s],!0,r)),i?("content"===n&&(u-=xt.css(t,"padding"+Zt[s],!0,r)),"margin"!==n&&(u-=xt.css(t,"border"+Zt[s]+"Width",!0,r))):(u+=xt.css(t,"padding"+Zt[s],!0,r),"padding"!==n?u+=xt.css(t,"border"+Zt[s]+"Width",!0,r):a+=xt.css(t,"border"+Zt[s]+"Width",!0,r));return!i&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-a-.5))),u}function B(t,e,n){var i=he(t),r=O(t,e,i),o="border-box"===xt.css(t,"boxSizing",!1,i),s=o;if(ce.test(r)){if(!n)return r;r="auto"}return s=s&&(vt.boxSizingReliable()||r===t.style[e]),("auto"===r||!parseFloat(r)&&"inline"===xt.css(t,"display",!1,i))&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),r=parseFloat(r)||0,r+F(t,e,n||(o?"border":"content"),s,i,r)+"px"}function U(t,e,n,i,r){return new U.prototype.init(t,e,n,i,r)}function z(){be&&(st.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(z):t.setTimeout(z,xt.fx.interval),xt.fx.tick())}function V(){return t.setTimeout(function(){_e=void 0}),_e=Date.now()}function H(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)n=Zt[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function W(t,e,n){for(var i,r=(Y.tweeners[e]||[]).concat(Y.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,e,t))return i}function Z(t,e,n){var i,r,o,s,a,u,l,c,h="width"in e||"height"in e,d=this,p={},f=t.style,m=t.nodeType&&Gt(t),g=Bt.get(t,"fxshow");n.queue||(s=xt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,xt.queue(t,"fx").length||s.empty.fire()})}));for(i in e)if(r=e[i],we.test(r)){if(delete e[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||xt.style(t,i)}if(u=!xt.isEmptyObject(e),u||!xt.isEmptyObject(p)){h&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],l=g&&g.display,null==l&&(l=Bt.get(t,"display")),c=xt.css(t,"display"),"none"===c&&(l?c=l:(b([t],!0),l=t.style.display||l,c=xt.css(t,"display"),b([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===xt.css(t,"float")&&(u||(d.done(function(){f.display=l}),null==l&&(c=f.display,l="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),u=!1;for(i in p)u||(g?"hidden"in g&&(m=g.hidden):g=Bt.access(t,"fxshow",{display:l}),o&&(g.hidden=!m),m&&b([t],!0),d.done(function(){m||b([t]),Bt.remove(t,"fxshow");for(i in p)xt.style(t,i,p[i])})),u=W(m?g[i]:0,i,d),i in g||(g[i]=u.start,m&&(u.end=u.start,u.start=0))}}function G(t,e){var n,i,r,o,s;for(n in t)if(i=f(n),r=e[i],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),s=xt.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function Y(t,e,n){var i,r,o=0,s=Y.prefilters.length,a=xt.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var e=_e||V(),n=Math.max(0,l.startTime+l.duration-e),i=n/l.duration||0,o=1-i,s=0,u=l.tweens.length;s<u;s++)l.tweens[s].run(o);return a.notifyWith(t,[l,o,n]),o<1&&u?n:(u||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:xt.extend({},e),opts:xt.extend(!0,{specialEasing:{},easing:xt.easing._default},n),originalProperties:e,originalOptions:n,startTime:_e||V(),duration:n.duration,tweens:[],createTween:function(e,n){var i=xt.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),c=l.props;for(G(c,l.opts.specialEasing);o<s;o++)if(i=Y.prefilters[o].call(l,t,c,l.opts))return yt(i.stop)&&(xt._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return xt.map(c,W,l),yt(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),xt.fx.timer(xt.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}function X(t){var e=t.match(Pt)||[];return e.join(" ")}function K(t){return t.getAttribute&&t.getAttribute("class")||""}function J(t){return Array.isArray(t)?t:"string"==typeof t?t.match(Pt)||[]:[]}function Q(t,e,n,r){var o;if(Array.isArray(e))xt.each(e,function(e,i){n||Ne.test(t)?r(t,i):Q(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==i(e))r(t,e);else for(o in e)Q(t+"["+o+"]",e[o],n,r)}function tt(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(Pt)||[];if(yt(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function et(t,e,n,i){function r(a){var u;return o[a]=!0,xt.each(t[a]||[],function(t,a){var l=a(e,n,i);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(e.dataTypes.unshift(l),r(l),!1)}),u}var o={},s=t===He;return r(e.dataTypes[0])||!o["*"]&&r("*")}function nt(t,e){var n,i,r=xt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&xt.extend(!0,t,i),t}function it(t,e,n){for(var i,r,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){u.unshift(r);break}if(u[0]in n)o=u[0];else{for(r in n){if(!u[0]||t.converters[r+" "+u[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}function rt(t,e,n,i){var r,o,s,a,u,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(r in l)if(a=r.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[r]:l[r]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}var ot=[],st=t.document,at=Object.getPrototypeOf,ut=ot.slice,lt=ot.concat,ct=ot.push,ht=ot.indexOf,dt={},pt=dt.toString,ft=dt.hasOwnProperty,mt=ft.toString,gt=mt.call(Object),vt={},yt=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},_t=function(t){return null!=t&&t===t.window},bt={type:!0,src:!0,noModule:!0},wt="3.3.1",xt=function(t,e){return new xt.fn.init(t,e)},kt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;xt.fn=xt.prototype={jquery:wt,constructor:xt,length:0,toArray:function(){return ut.call(this)},get:function(t){return null==t?ut.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=xt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return xt.each(this,t)},map:function(t){return this.pushStack(xt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(ut.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ct,sort:ot.sort,splice:ot.splice},xt.extend=xt.fn.extend=function(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||yt(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],s!==i&&(l&&i&&(xt.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,o=n&&Array.isArray(n)?n:[]):o=n&&xt.isPlainObject(n)?n:{},s[e]=xt.extend(l,o,i)):void 0!==i&&(s[e]=i));return s},xt.extend({expando:"jQuery"+(wt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==pt.call(t))&&(!(e=at(t))||(n=ft.call(e,"constructor")&&e.constructor,"function"==typeof n&&mt.call(n)===gt))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){n(t)},each:function(t,e){var n,i=0;if(r(t))for(n=t.length;i<n&&e.call(t[i],i,t[i])!==!1;i++);else for(i in t)if(e.call(t[i],i,t[i])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(kt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(r(Object(t))?xt.merge(n,"string"==typeof t?[t]:t):ct.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:ht.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],o=0,s=t.length,a=!n;o<s;o++)i=!e(t[o],o),i!==a&&r.push(t[o]);return r},map:function(t,e,n){var i,o,s=0,a=[];if(r(t))for(i=t.length;s<i;s++)o=e(t[s],s,n),null!=o&&a.push(o);else for(s in t)o=e(t[s],s,n),null!=o&&a.push(o);return lt.apply([],a)},guid:1,support:vt}),"function"==typeof Symbol&&(xt.fn[Symbol.iterator]=ot[Symbol.iterator]),xt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){dt["[object "+e+"]"]=e.toLowerCase()});var $t=function(t){function e(t,e,n,i){var r,o,s,a,u,l,c,d=e&&e.ownerDocument,f=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return n;if(!i&&((e?e.ownerDocument||e:B)!==N&&A(e),e=e||N,O)){if(11!==f&&(u=vt.exec(t)))if(r=u[1]){if(9===f){if(!(s=e.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(d&&(s=d.getElementById(r))&&q(e,s)&&s.id===r)return n.push(s),n}else{if(u[2])return J.apply(n,e.getElementsByTagName(t)),n;if((r=u[3])&&x.getElementsByClassName&&e.getElementsByClassName)return J.apply(n,e.getElementsByClassName(r)),n}if(x.qsa&&!W[t+" "]&&(!I||!I.test(t))){if(1!==f)d=e,c=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(wt,xt):e.setAttribute("id",a=F),l=C(t),o=l.length;o--;)l[o]="#"+a+" "+p(l[o]);c=l.join(","),d=yt.test(t)&&h(e.parentNode)||e}if(c)try{return J.apply(n,d.querySelectorAll(c)),n}catch(m){}finally{a===F&&e.removeAttribute("id")}}}return L(t.replace(at,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>k.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[F]=!0,t}function r(t){var e=N.createElement("fieldset");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=n.length;i--;)k.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return function(e){return"form"in e?e.parentNode&&e.disabled===!1?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&$t(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function h(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function d(){}function p(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,r=e.next,o=r||i,s=n&&"parentNode"===o,a=z++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,r);return!1}:function(e,n,u){var l,c,h,d=[U,a];if(u){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,u))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(h=e[F]||(e[F]={}),c=h[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=c[o])&&l[0]===U&&l[1]===a)return d[2]=l[2];if(c[o]=d,d[2]=t(e,n,u))return!0}return!1}}function m(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function g(t,n,i){for(var r=0,o=n.length;r<o;r++)e(t,n[r],i);return i}function v(t,e,n,i,r){for(var o,s=[],a=0,u=t.length,l=null!=e;a<u;a++)(o=t[a])&&(n&&!n(o,i,r)||(s.push(o),l&&e.push(a)));return s}function y(t,e,n,r,o,s){return r&&!r[F]&&(r=y(r)),o&&!o[F]&&(o=y(o,s)),i(function(i,s,a,u){var l,c,h,d=[],p=[],f=s.length,m=i||g(e||"*",a.nodeType?[a]:a,[]),y=!t||!i&&e?m:v(m,d,t,a,u),_=n?o||(i?t:f||r)?[]:s:y;if(n&&n(y,_,a,u),r)for(l=v(_,p),r(l,[],a,u),c=l.length;c--;)(h=l[c])&&(_[p[c]]=!(y[p[c]]=h));if(i){if(o||t){if(o){for(l=[],c=_.length;c--;)(h=_[c])&&l.push(y[c]=h);o(null,_=[],l,u)}for(c=_.length;c--;)(h=_[c])&&(l=o?tt(i,h):d[c])>-1&&(i[l]=!(s[l]=h))}}else _=v(_===s?_.splice(f,_.length):_),o?o(null,s,_,u):J.apply(s,_)})}function _(t){for(var e,n,i,r=t.length,o=k.relative[t[0].type],s=o||k.relative[" "],a=o?1:0,u=f(function(t){return t===e},s,!0),l=f(function(t){return tt(e,t)>-1},s,!0),c=[function(t,n,i){var r=!o&&(i||n!==S)||((e=n).nodeType?u(t,n,i):l(t,n,i));return e=null,r}];a<r;a++)if(n=k.relative[t[a].type])c=[f(m(c),n)];else{if(n=k.filter[t[a].type].apply(null,t[a].matches),n[F]){for(i=++a;i<r&&!k.relative[t[i].type];i++);return y(a>1&&m(c),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(at,"$1"),n,a<i&&_(t.slice(a,i)),i<r&&_(t=t.slice(i)),i<r&&p(t))}c.push(n)}return m(c)}function b(t,n){var r=n.length>0,o=t.length>0,s=function(i,s,a,u,l){var c,h,d,p=0,f="0",m=i&&[],g=[],y=S,_=i||o&&k.find.TAG("*",l),b=U+=null==y?1:Math.random()||.1,w=_.length;for(l&&(S=s===N||s||l);f!==w&&null!=(c=_[f]);f++){if(o&&c){for(h=0,s||c.ownerDocument===N||(A(c),a=!O);d=t[h++];)if(d(c,s||N,a)){u.push(c);break}l&&(U=b)}r&&((c=!d&&c)&&p--,i&&m.push(c))}if(p+=f,r&&f!==p){for(h=0;d=n[h++];)d(m,g,s,a);if(i){if(p>0)for(;f--;)m[f]||g[f]||(g[f]=X.call(u));g=v(g)}J.apply(u,g),l&&!i&&g.length>0&&p+n.length>1&&e.uniqueSort(u)}return l&&(U=b,S=y),m};return r?i(s):s}var w,x,k,$,E,C,T,L,S,D,M,A,N,P,O,I,j,R,q,F="sizzle"+1*new Date,B=t.document,U=0,z=0,V=n(),H=n(),W=n(),Z=function(t,e){return t===e&&(M=!0),0},G={}.hasOwnProperty,Y=[],X=Y.pop,K=Y.push,J=Y.push,Q=Y.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",st=new RegExp(nt+"+","g"),at=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ut=new RegExp("^"+nt+"*,"+nt+"*"),lt=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(ot),dt=new RegExp("^"+it+"$"),pt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,_t=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),bt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},wt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},kt=function(){A()},$t=f(function(t){return t.disabled===!0&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{J.apply(Y=Q.call(B.childNodes),B.childNodes),Y[B.childNodes.length].nodeType}catch(Et){J={apply:Y.length?function(t,e){K.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}x=e.support={},E=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},A=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:B;return i!==N&&9===i.nodeType&&i.documentElement?(N=i,P=N.documentElement,O=!E(N),B!==N&&(n=N.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",kt,!1):n.attachEvent&&n.attachEvent("onunload",kt)),x.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=r(function(t){return t.appendChild(N.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=gt.test(N.getElementsByClassName),x.getById=r(function(t){return P.appendChild(t).id=F,!N.getElementsByName||!N.getElementsByName(F).length}),x.getById?(k.filter.ID=function(t){var e=t.replace(_t,bt);return function(t){return t.getAttribute("id")===e}},k.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&O){var n=e.getElementById(t);return n?[n]:[]}}):(k.filter.ID=function(t){var e=t.replace(_t,bt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},k.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&O){var n,i,r,o=e.getElementById(t);if(o){if(n=o.getAttributeNode("id"),n&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if(n=o.getAttributeNode("id"),n&&n.value===t)return[o]}return[]}}),k.find.TAG=x.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},k.find.CLASS=x.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&O)return e.getElementsByClassName(t)},j=[],I=[],(x.qsa=gt.test(N.querySelectorAll))&&(r(function(t){P.appendChild(t).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+F+"-]").length||I.push("~="),t.querySelectorAll(":checked").length||I.push(":checked"),t.querySelectorAll("a#"+F+"+*").length||I.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=N.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+nt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&I.push(":enabled",":disabled"),P.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(x.matchesSelector=gt.test(R=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&r(function(t){x.disconnectedMatch=R.call(t,"*"),R.call(t,"[s!='']:x"),j.push("!=",ot)}),I=I.length&&new RegExp(I.join("|")),j=j.length&&new RegExp(j.join("|")),e=gt.test(P.compareDocumentPosition),q=e||gt.test(P.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Z=e?function(t,e){if(t===e)return M=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===N||t.ownerDocument===B&&q(B,t)?-1:e===N||e.ownerDocument===B&&q(B,e)?1:D?tt(D,t)-tt(D,e):0:4&n?-1:1)}:function(t,e){if(t===e)return M=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,a=[t],u=[e];if(!r||!o)return t===N?-1:e===N?1:r?-1:o?1:D?tt(D,t)-tt(D,e):0;if(r===o)return s(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;a[i]===u[i];)i++;return i?s(a[i],u[i]):a[i]===B?-1:u[i]===B?1:0},N):N},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==N&&A(t),n=n.replace(ct,"='$1']"),x.matchesSelector&&O&&!W[n+" "]&&(!j||!j.test(n))&&(!I||!I.test(n)))try{var i=R.call(t,n);if(i||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,N,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==N&&A(t),q(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==N&&A(t);var n=k.attrHandle[e.toLowerCase()],i=n&&G.call(k.attrHandle,e.toLowerCase())?n(t,e,!O):void 0;return void 0!==i?i:x.attributes||!O?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(wt,xt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(M=!x.detectDuplicates,D=!x.sortStable&&t.slice(0),t.sort(Z),M){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return D=null,t},$=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=$(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=$(e);return n},k=e.selectors={cacheLength:50,createPseudo:i,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0
}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,bt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,bt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,bt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=V[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&V(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(st," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,d,p,f,m=o!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!u&&!a,_=!1;if(g){if(o){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(d=g,h=d[F]||(d[F]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),l=c[t]||[],p=l[0]===U&&l[1],_=p&&l[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(_=p=0)||f.pop();)if(1===d.nodeType&&++_&&d===e){c[t]=[U,p,_];break}}else if(y&&(d=e,h=d[F]||(d[F]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),l=c[t]||[],p=l[0]===U&&l[1],_=p),_===!1)for(;(d=++p&&d&&d[m]||(_=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++_||(y&&(h=d[F]||(d[F]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),c[t]=[U,_]),d!==e)););return _-=r,_===i||_%i===0&&_/i>=0}}},PSEUDO:function(t,n){var r,o=k.pseudos[t]||k.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[F]?o(n):o.length>1?(r=[t,t,"",n],k.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),s=r.length;s--;)i=tt(t,r[s]),t[i]=!(e[i]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=T(t.replace(at,"$1"));return r[F]?i(function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(_t,bt),function(e){return(e.textContent||e.innerText||$(e)).indexOf(t)>-1}}),lang:i(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,bt).toLowerCase(),function(e){var n;do if(n=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===P},focus:function(t){return t===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:l(!1),disabled:l(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!k.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[n<0?n+e:n]}),even:c(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},k.pseudos.nth=k.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})k.pseudos[w]=u(w);return d.prototype=k.filters=k.pseudos,k.setFilters=new d,C=e.tokenize=function(t,n){var i,r,o,s,a,u,l,c=H[t+" "];if(c)return n?0:c.slice(0);for(a=t,u=[],l=k.preFilter;a;){i&&!(r=ut.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),i=!1,(r=lt.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(at," ")}),a=a.slice(i.length));for(s in k.filter)!(r=pt[s].exec(a))||l[s]&&!(r=l[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):H(t,u).slice(0)},T=e.compile=function(t,e){var n,i=[],r=[],o=W[t+" "];if(!o){for(e||(e=C(t)),n=e.length;n--;)o=_(e[n]),o[F]?i.push(o):r.push(o);o=W(t,b(r,i)),o.selector=t}return o},L=e.select=function(t,e,n,i){var r,o,s,a,u,l="function"==typeof t&&t,c=!i&&C(t=l.selector||t);if(n=n||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&9===e.nodeType&&O&&k.relative[o[1].type]){if(e=(k.find.ID(s.matches[0].replace(_t,bt),e)||[])[0],!e)return n;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=pt.needsContext.test(t)?0:o.length;r--&&(s=o[r],!k.relative[a=s.type]);)if((u=k.find[a])&&(i=u(s.matches[0].replace(_t,bt),yt.test(o[0].type)&&h(e.parentNode)||e))){if(o.splice(r,1),t=i.length&&p(o),!t)return J.apply(n,i),n;break}}return(l||T(t,c))(i,e,!O,n,!e||yt.test(t)&&h(e.parentNode)||e),n},x.sortStable=F.split("").sort(Z).join("")===F,x.detectDuplicates=!!M,A(),x.sortDetached=r(function(t){return 1&t.compareDocumentPosition(N.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var i;if(!n)return t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);xt.find=$t,xt.expr=$t.selectors,xt.expr[":"]=xt.expr.pseudos,xt.uniqueSort=xt.unique=$t.uniqueSort,xt.text=$t.getText,xt.isXMLDoc=$t.isXML,xt.contains=$t.contains,xt.escapeSelector=$t.escape;var Et=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&xt(t).is(n))break;i.push(t)}return i},Ct=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},Tt=xt.expr.match.needsContext,Lt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;xt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?xt.find.matchesSelector(i,t)?[i]:[]:xt.find.matches(t,xt.grep(e,function(t){return 1===t.nodeType}))},xt.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(xt(t).filter(function(){for(e=0;e<i;e++)if(xt.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)xt.find(t,r[e],n);return i>1?xt.uniqueSort(n):n},filter:function(t){return this.pushStack(s(this,t||[],!1))},not:function(t){return this.pushStack(s(this,t||[],!0))},is:function(t){return!!s(this,"string"==typeof t&&Tt.test(t)?xt(t):t||[],!1).length}});var St,Dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Mt=xt.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||St,"string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Dt.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof xt?e[0]:e,xt.merge(this,xt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:st,!0)),Lt.test(i[1])&&xt.isPlainObject(e))for(i in e)yt(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return r=st.getElementById(i[2]),r&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):yt(t)?void 0!==n.ready?n.ready(t):t(xt):xt.makeArray(t,this)};Mt.prototype=xt.fn,St=xt(st);var At=/^(?:parents|prev(?:Until|All))/,Nt={children:!0,contents:!0,next:!0,prev:!0};xt.fn.extend({has:function(t){var e=xt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(xt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],s="string"!=typeof t&&xt(t);if(!Tt.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&xt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?xt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?ht.call(xt(t),this[0]):ht.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(xt.uniqueSort(xt.merge(this.get(),xt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),xt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Et(t,"parentNode")},parentsUntil:function(t,e,n){return Et(t,"parentNode",n)},next:function(t){return a(t,"nextSibling")},prev:function(t){return a(t,"previousSibling")},nextAll:function(t){return Et(t,"nextSibling")},prevAll:function(t){return Et(t,"previousSibling")},nextUntil:function(t,e,n){return Et(t,"nextSibling",n)},prevUntil:function(t,e,n){return Et(t,"previousSibling",n)},siblings:function(t){return Ct((t.parentNode||{}).firstChild,t)},children:function(t){return Ct(t.firstChild)},contents:function(t){return o(t,"iframe")?t.contentDocument:(o(t,"template")&&(t=t.content||t),xt.merge([],t.childNodes))}},function(t,e){xt.fn[t]=function(n,i){var r=xt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=xt.filter(i,r)),this.length>1&&(Nt[t]||xt.uniqueSort(r),At.test(t)&&r.reverse()),this.pushStack(r)}});var Pt=/[^\x20\t\r\n\f]+/g;xt.Callbacks=function(t){t="string"==typeof t?u(t):xt.extend({},t);var e,n,r,o,s=[],a=[],l=-1,c=function(){for(o=o||t.once,r=e=!0;a.length;l=-1)for(n=a.shift();++l<s.length;)s[l].apply(n[0],n[1])===!1&&t.stopOnFalse&&(l=s.length,n=!1);t.memory||(n=!1),e=!1,o&&(s=n?[]:"")},h={add:function(){return s&&(n&&!e&&(l=s.length-1,a.push(n)),function r(e){xt.each(e,function(e,n){yt(n)?t.unique&&h.has(n)||s.push(n):n&&n.length&&"string"!==i(n)&&r(n)})}(arguments),n&&!e&&c()),this},remove:function(){return xt.each(arguments,function(t,e){for(var n;(n=xt.inArray(e,s,n))>-1;)s.splice(n,1),n<=l&&l--}),this},has:function(t){return t?xt.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return o=a=[],n||e||(s=n=""),this},locked:function(){return!!o},fireWith:function(t,n){return o||(n=n||[],n=[t,n.slice?n.slice():n],a.push(n),e||c()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!r}};return h},xt.extend({Deferred:function(e){var n=[["notify","progress",xt.Callbacks("memory"),xt.Callbacks("memory"),2],["resolve","done",xt.Callbacks("once memory"),xt.Callbacks("once memory"),0,"resolved"],["reject","fail",xt.Callbacks("once memory"),xt.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(t){return r.then(null,t)},pipe:function(){var t=arguments;return xt.Deferred(function(e){xt.each(n,function(n,i){var r=yt(t[i[4]])&&t[i[4]];o[i[1]](function(){var t=r&&r.apply(this,arguments);t&&yt(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,i,r){function o(e,n,i,r){return function(){var a=this,u=arguments,h=function(){var t,h;if(!(e<s)){if(t=i.apply(a,u),t===n.promise())throw new TypeError("Thenable self-resolution");h=t&&("object"==typeof t||"function"==typeof t)&&t.then,yt(h)?r?h.call(t,o(s,n,l,r),o(s,n,c,r)):(s++,h.call(t,o(s,n,l,r),o(s,n,c,r),o(s,n,l,n.notifyWith))):(i!==l&&(a=void 0,u=[t]),(r||n.resolveWith)(a,u))}},d=r?h:function(){try{h()}catch(t){xt.Deferred.exceptionHook&&xt.Deferred.exceptionHook(t,d.stackTrace),e+1>=s&&(i!==c&&(a=void 0,u=[t]),n.rejectWith(a,u))}};e?d():(xt.Deferred.getStackHook&&(d.stackTrace=xt.Deferred.getStackHook()),t.setTimeout(d))}}var s=0;return xt.Deferred(function(t){n[0][3].add(o(0,t,yt(r)?r:l,t.notifyWith)),n[1][3].add(o(0,t,yt(e)?e:l)),n[2][3].add(o(0,t,yt(i)?i:c))}).promise()},promise:function(t){return null!=t?xt.extend(t,r):r}},o={};return xt.each(n,function(t,e){var s=e[2],a=e[5];r[e[1]]=s.add,a&&s.add(function(){i=a},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),s.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=s.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),r=ut.call(arguments),o=xt.Deferred(),s=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?ut.call(arguments):n,--e||o.resolveWith(i,r)}};if(e<=1&&(h(t,o.done(s(n)).resolve,o.reject,!e),"pending"===o.state()||yt(r[n]&&r[n].then)))return o.then();for(;n--;)h(r[n],s(n),o.reject);return o.promise()}});var Ot=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;xt.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&Ot.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},xt.readyException=function(e){t.setTimeout(function(){throw e})};var It=xt.Deferred();xt.fn.ready=function(t){return It.then(t)["catch"](function(t){xt.readyException(t)}),this},xt.extend({isReady:!1,readyWait:1,ready:function(t){(t===!0?--xt.readyWait:xt.isReady)||(xt.isReady=!0,t!==!0&&--xt.readyWait>0||It.resolveWith(st,[xt]))}}),xt.ready.then=It.then,"complete"===st.readyState||"loading"!==st.readyState&&!st.documentElement.doScroll?t.setTimeout(xt.ready):(st.addEventListener("DOMContentLoaded",d),t.addEventListener("load",d));var jt=function(t,e,n,r,o,s,a){var u=0,l=t.length,c=null==n;if("object"===i(n)){o=!0;for(u in n)jt(t,e,u,n[u],!0,s,a)}else if(void 0!==r&&(o=!0,yt(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(xt(t),n)})),e))for(;u<l;u++)e(t[u],n,a?r:r.call(t[u],u,e(t[u],n)));return o?t:c?e.call(t):l?e(t[0],n):s},Rt=/^-ms-/,qt=/-([a-z])/g,Ft=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};m.uid=1,m.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Ft(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[f(e)]=n;else for(i in e)r[f(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][f(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){Array.isArray(e)?e=e.map(f):(e=f(e),e=e in i?[e]:e.match(Pt)||[]),n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||xt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!xt.isEmptyObject(e)}};var Bt=new m,Ut=new m,zt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Vt=/[A-Z]/g;xt.extend({hasData:function(t){return Ut.hasData(t)||Bt.hasData(t)},data:function(t,e,n){return Ut.access(t,e,n)},removeData:function(t,e){Ut.remove(t,e)},_data:function(t,e,n){return Bt.access(t,e,n)},_removeData:function(t,e){Bt.remove(t,e)}}),xt.fn.extend({data:function(t,e){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=Ut.get(o),1===o.nodeType&&!Bt.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=f(i.slice(5)),v(o,i,r[i])));Bt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Ut.set(this,t)}):jt(this,function(e){var n;if(o&&void 0===e){if(n=Ut.get(o,t),void 0!==n)return n;if(n=v(o,t),void 0!==n)return n}else this.each(function(){Ut.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Ut.remove(this,t)})}}),xt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Bt.get(t,e),n&&(!i||Array.isArray(n)?i=Bt.access(t,e,xt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=xt.queue(t,e),i=n.length,r=n.shift(),o=xt._queueHooks(t,e),s=function(){xt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Bt.get(t,n)||Bt.access(t,n,{empty:xt.Callbacks("once memory").add(function(){Bt.remove(t,[e+"queue",n])})})}}),xt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?xt.queue(this[0],t):void 0===e?this:this.each(function(){var n=xt.queue(this,t,e);xt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&xt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){xt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=xt.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=Bt.get(o[s],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var Ht=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Wt=new RegExp("^(?:([+-])=|)("+Ht+")([a-z%]*)$","i"),Zt=["Top","Right","Bottom","Left"],Gt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&xt.contains(t.ownerDocument,t)&&"none"===xt.css(t,"display")},Yt=function(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=s[o];return r},Xt={};xt.fn.extend({show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Gt(this)?xt(this).show():xt(this).hide()})}});var Kt=/^(?:checkbox|radio)$/i,Jt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Qt=/^$|^module$|\/(?:java|ecma)script/i,te={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};te.optgroup=te.option,te.tbody=te.tfoot=te.colgroup=te.caption=te.thead,te.th=te.td;var ee=/<|&#?\w+;/;!function(){var t=st.createDocumentFragment(),e=t.appendChild(st.createElement("div")),n=st.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),vt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",vt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var ne=st.documentElement,ie=/^key/,re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,oe=/^([^.]*)(?:\.(.+)|)/;xt.event={global:{},add:function(t,e,n,i,r){var o,s,a,u,l,c,h,d,p,f,m,g=Bt.get(t);if(g)for(n.handler&&(o=n,n=o.handler,r=o.selector),r&&xt.find.matchesSelector(ne,r),n.guid||(n.guid=xt.guid++),(u=g.events)||(u=g.events={}),(s=g.handle)||(s=g.handle=function(e){return"undefined"!=typeof xt&&xt.event.triggered!==e.type?xt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Pt)||[""],l=e.length;l--;)a=oe.exec(e[l])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(h=xt.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=xt.event.special[p]||{},c=xt.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&xt.expr.match.needsContext.test(r),namespace:f.join(".")},o),(d=u[p])||(d=u[p]=[],d.delegateCount=0,h.setup&&h.setup.call(t,i,f,s)!==!1||t.addEventListener&&t.addEventListener(p,s)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),xt.event.global[p]=!0)},remove:function(t,e,n,i,r){var o,s,a,u,l,c,h,d,p,f,m,g=Bt.hasData(t)&&Bt.get(t);if(g&&(u=g.events)){for(e=(e||"").match(Pt)||[""],l=e.length;l--;)if(a=oe.exec(e[l])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(h=xt.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=u[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)c=d[o],!r&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));s&&!d.length&&(h.teardown&&h.teardown.call(t,f,g.handle)!==!1||xt.removeEvent(t,p,g.handle),delete u[p])}else for(p in u)xt.event.remove(t,p+e[l],n,i,!0);xt.isEmptyObject(u)&&Bt.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,s,a=xt.event.fix(t),u=new Array(arguments.length),l=(Bt.get(this,"events")||{})[a.type]||[],c=xt.event.special[a.type]||{};for(u[0]=a,e=1;e<arguments.length;e++)u[e]=arguments[e];if(a.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,a)!==!1){for(s=xt.event.handlers.call(this,a,l),e=0;(r=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,i=((xt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,u),void 0!==i&&(a.result=i)===!1&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,r,o,s,a=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||l.disabled!==!0)){for(o=[],s={},n=0;n<u;n++)i=e[n],r=i.selector+" ",void 0===s[r]&&(s[r]=i.needsContext?xt(r,this).index(l)>-1:xt.find(r,this,null,[l]).length),s[r]&&o.push(i);o.length&&a.push({elem:l,handlers:o})}return l=this,u<e.length&&a.push({elem:l,handlers:e.slice(u)}),a},addProp:function(t,e){Object.defineProperty(xt.Event.prototype,t,{enumerable:!0,configurable:!0,get:yt(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[xt.expando]?t:new xt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==C()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===C()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&o(this,"input"))return this.click(),!1},_default:function(t){return o(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},xt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},xt.Event=function(t,e){return this instanceof xt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?$:E,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&xt.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),void(this[xt.expando]=!0)):new xt.Event(t,e)},xt.Event.prototype={constructor:xt.Event,isDefaultPrevented:E,isPropagationStopped:E,isImmediatePropagationStopped:E,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=$,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=$,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=$,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},xt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&ie.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&re.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},xt.event.addProp),xt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){xt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===i||xt.contains(i,r))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),xt.fn.extend({on:function(t,e,n,i){return T(this,t,e,n,i)},one:function(t,e,n,i){return T(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,xt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return e!==!1&&"function"!=typeof e||(n=e,e=void 0),n===!1&&(n=E),this.each(function(){xt.event.remove(this,t,n,e)})}});var se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ae=/<script|<style|<link/i,ue=/checked\s*(?:[^=]|=\s*.checked.)/i,le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;xt.extend({htmlPrefilter:function(t){return t.replace(se,"<$1></$2>")},clone:function(t,e,n){var i,r,o,s,a=t.cloneNode(!0),u=xt.contains(t.ownerDocument,t);if(!(vt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||xt.isXMLDoc(t)))for(s=w(a),o=w(t),i=0,r=o.length;i<r;i++)A(o[i],s[i]);if(e)if(n)for(o=o||w(t),s=s||w(a),i=0,r=o.length;i<r;i++)M(o[i],s[i]);else M(t,a);return s=w(a,"script"),s.length>0&&x(s,!u&&w(t,"script")),a},cleanData:function(t){for(var e,n,i,r=xt.event.special,o=0;void 0!==(n=t[o]);o++)if(Ft(n)){if(e=n[Bt.expando]){if(e.events)for(i in e.events)r[i]?xt.event.remove(n,i):xt.removeEvent(n,i,e.handle);n[Bt.expando]=void 0}n[Ut.expando]&&(n[Ut.expando]=void 0)}}}),xt.fn.extend({detach:function(t){return P(this,t,!0)},remove:function(t){return P(this,t)},text:function(t){return jt(this,function(t){return void 0===t?xt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return N(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=L(this,t);e.appendChild(t)}})},prepend:function(){return N(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=L(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return N(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return N(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(xt.cleanData(w(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return xt.clone(this,t,e)})},html:function(t){return jt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ae.test(t)&&!te[(Jt.exec(t)||["",""])[1].toLowerCase()]){t=xt.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(xt.cleanData(w(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return N(this,arguments,function(e){var n=this.parentNode;xt.inArray(this,t)<0&&(xt.cleanData(w(this)),n&&n.replaceChild(e,this))},t)}}),xt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){xt.fn[t]=function(t){for(var n,i=[],r=xt(t),o=r.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),xt(r[s])[e](n),ct.apply(i,n.get());return this.pushStack(i)}});var ce=new RegExp("^("+Ht+")(?!px)[a-z%]+$","i"),he=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},de=new RegExp(Zt.join("|"),"i");!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(u).appendChild(l);var e=t.getComputedStyle(l);i="1%"!==e.top,a=12===n(e.marginLeft),l.style.right="60%",s=36===n(e.right),r=36===n(e.width),l.style.position="absolute",o=36===l.offsetWidth||"absolute",ne.removeChild(u),l=null}}function n(t){return Math.round(parseFloat(t))}var i,r,o,s,a,u=st.createElement("div"),l=st.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",vt.clearCloneStyle="content-box"===l.style.backgroundClip,xt.extend(vt,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),o}}))}();var pe=/^(none|table(?!-c[ea]).+)/,fe=/^--/,me={position:"absolute",visibility:"hidden",display:"block"},ge={letterSpacing:"0",fontWeight:"400"},ve=["Webkit","Moz","ms"],ye=st.createElement("div").style;xt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=O(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=f(e),u=fe.test(e),l=t.style;return u||(e=R(a)),s=xt.cssHooks[e]||xt.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:l[e]:(o=typeof n,"string"===o&&(r=Wt.exec(n))&&r[1]&&(n=y(t,e,r),o="number"),null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(xt.cssNumber[a]?"":"px")),vt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(u?l.setProperty(e,n):l[e]=n)),void 0)}},css:function(t,e,n,i){var r,o,s,a=f(e),u=fe.test(e);return u||(e=R(a)),s=xt.cssHooks[e]||xt.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=O(t,e,i)),"normal"===r&&e in ge&&(r=ge[e]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),xt.each(["height","width"],function(t,e){xt.cssHooks[e]={get:function(t,n,i){if(n)return!pe.test(xt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?B(t,e,i):Yt(t,me,function(){return B(t,e,i)})},set:function(t,n,i){var r,o=he(t),s="border-box"===xt.css(t,"boxSizing",!1,o),a=i&&F(t,e,i,s,o);return s&&vt.scrollboxSize()===o.position&&(a-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-F(t,e,"border",!1,o)-.5)),a&&(r=Wt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=xt.css(t,e)),q(t,n,a)}}}),xt.cssHooks.marginLeft=I(vt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(O(t,"marginLeft"))||t.getBoundingClientRect().left-Yt(t,{
marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),xt.each({margin:"",padding:"",border:"Width"},function(t,e){xt.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+Zt[i]+e]=o[i]||o[i-2]||o[0];return r}},"margin"!==t&&(xt.cssHooks[t+e].set=q)}),xt.fn.extend({css:function(t,e){return jt(this,function(t,e,n){var i,r,o={},s=0;if(Array.isArray(e)){for(i=he(t),r=e.length;s<r;s++)o[e[s]]=xt.css(t,e[s],!1,i);return o}return void 0!==n?xt.style(t,e,n):xt.css(t,e)},t,e,arguments.length>1)}}),xt.Tween=U,U.prototype={constructor:U,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||xt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(xt.cssNumber[n]?"":"px")},cur:function(){var t=U.propHooks[this.prop];return t&&t.get?t.get(this):U.propHooks._default.get(this)},run:function(t){var e,n=U.propHooks[this.prop];return this.options.duration?this.pos=e=xt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=xt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){xt.fx.step[t.prop]?xt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[xt.cssProps[t.prop]]&&!xt.cssHooks[t.prop]?t.elem[t.prop]=t.now:xt.style(t.elem,t.prop,t.now+t.unit)}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},xt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},xt.fx=U.prototype.init,xt.fx.step={};var _e,be,we=/^(?:toggle|show|hide)$/,xe=/queueHooks$/;xt.Animation=xt.extend(Y,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return y(n.elem,t,Wt.exec(e),n),n}]},tweener:function(t,e){yt(t)?(e=t,t=["*"]):t=t.match(Pt);for(var n,i=0,r=t.length;i<r;i++)n=t[i],Y.tweeners[n]=Y.tweeners[n]||[],Y.tweeners[n].unshift(e)},prefilters:[Z],prefilter:function(t,e){e?Y.prefilters.unshift(t):Y.prefilters.push(t)}}),xt.speed=function(t,e,n){var i=t&&"object"==typeof t?xt.extend({},t):{complete:n||!n&&e||yt(t)&&t,duration:t,easing:n&&e||e&&!yt(e)&&e};return xt.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in xt.fx.speeds?i.duration=xt.fx.speeds[i.duration]:i.duration=xt.fx.speeds._default),null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){yt(i.old)&&i.old.call(this),i.queue&&xt.dequeue(this,i.queue)},i},xt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=xt.isEmptyObject(t),o=xt.speed(e,n,i),s=function(){var e=Y(this,xt.extend({},t),o);(r||Bt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=xt.timers,s=Bt.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&xe.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||xt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=Bt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=xt.timers,s=i?i.length:0;for(n.finish=!0,xt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),xt.each(["toggle","show","hide"],function(t,e){var n=xt.fn[e];xt.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(H(e,!0),t,i,r)}}),xt.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){xt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),xt.timers=[],xt.fx.tick=function(){var t,e=0,n=xt.timers;for(_e=Date.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||xt.fx.stop(),_e=void 0},xt.fx.timer=function(t){xt.timers.push(t),xt.fx.start()},xt.fx.interval=13,xt.fx.start=function(){be||(be=!0,z())},xt.fx.stop=function(){be=null},xt.fx.speeds={slow:600,fast:200,_default:400},xt.fn.delay=function(e,n){return e=xt.fx?xt.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},function(){var t=st.createElement("input"),e=st.createElement("select"),n=e.appendChild(st.createElement("option"));t.type="checkbox",vt.checkOn=""!==t.value,vt.optSelected=n.selected,t=st.createElement("input"),t.value="t",t.type="radio",vt.radioValue="t"===t.value}();var ke,$e=xt.expr.attrHandle;xt.fn.extend({attr:function(t,e){return jt(this,xt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){xt.removeAttr(this,t)})}}),xt.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?xt.prop(t,e,n):(1===o&&xt.isXMLDoc(t)||(r=xt.attrHooks[e.toLowerCase()]||(xt.expr.match.bool.test(e)?ke:void 0)),void 0!==n?null===n?void xt.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=xt.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!vt.radioValue&&"radio"===e&&o(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(Pt);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),ke={set:function(t,e,n){return e===!1?xt.removeAttr(t,n):t.setAttribute(n,n),n}},xt.each(xt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=$e[e]||xt.find.attr;$e[e]=function(t,e,i){var r,o,s=e.toLowerCase();return i||(o=$e[s],$e[s]=r,r=null!=n(t,e,i)?s:null,$e[s]=o),r}});var Ee=/^(?:input|select|textarea|button)$/i,Ce=/^(?:a|area)$/i;xt.fn.extend({prop:function(t,e){return jt(this,xt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[xt.propFix[t]||t]})}}),xt.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&xt.isXMLDoc(t)||(e=xt.propFix[e]||e,r=xt.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=xt.find.attr(t,"tabindex");return e?parseInt(e,10):Ee.test(t.nodeName)||Ce.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),vt.optSelected||(xt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),xt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){xt.propFix[this.toLowerCase()]=this}),xt.fn.extend({addClass:function(t){var e,n,i,r,o,s,a,u=0;if(yt(t))return this.each(function(e){xt(this).addClass(t.call(this,e,K(this)))});if(e=J(t),e.length)for(;n=this[u++];)if(r=K(n),i=1===n.nodeType&&" "+X(r)+" "){for(s=0;o=e[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a=X(i),r!==a&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,o,s,a,u=0;if(yt(t))return this.each(function(e){xt(this).removeClass(t.call(this,e,K(this)))});if(!arguments.length)return this.attr("class","");if(e=J(t),e.length)for(;n=this[u++];)if(r=K(n),i=1===n.nodeType&&" "+X(r)+" "){for(s=0;o=e[s++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");a=X(i),r!==a&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):yt(t)?this.each(function(n){xt(this).toggleClass(t.call(this,n,K(this),e),e)}):this.each(function(){var e,r,o,s;if(i)for(r=0,o=xt(this),s=J(t);e=s[r++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||(e=K(this),e&&Bt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":Bt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+X(K(n))+" ").indexOf(e)>-1)return!0;return!1}});var Te=/\r/g;xt.fn.extend({val:function(t){var e,n,i,r=this[0];{if(arguments.length)return i=yt(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,xt(this).val()):t,null==r?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=xt.map(r,function(t){return null==t?"":t+""})),e=xt.valHooks[this.type]||xt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=xt.valHooks[r.type]||xt.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(Te,""):null==n?"":n)}}}),xt.extend({valHooks:{option:{get:function(t){var e=xt.find.attr(t,"value");return null!=e?e:X(xt.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,a="select-one"===t.type,u=a?null:[],l=a?s+1:r.length;for(i=s<0?l:a?s:0;i<l;i++)if(n=r[i],(n.selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!o(n.parentNode,"optgroup"))){if(e=xt(n).val(),a)return e;u.push(e)}return u},set:function(t,e){for(var n,i,r=t.options,o=xt.makeArray(e),s=r.length;s--;)i=r[s],(i.selected=xt.inArray(xt.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),xt.each(["radio","checkbox"],function(){xt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=xt.inArray(xt(t).val(),e)>-1}},vt.checkOn||(xt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),vt.focusin="onfocusin"in t;var Le=/^(?:focusinfocus|focusoutblur)$/,Se=function(t){t.stopPropagation()};xt.extend(xt.event,{trigger:function(e,n,i,r){var o,s,a,u,l,c,h,d,p=[i||st],f=ft.call(e,"type")?e.type:e,m=ft.call(e,"namespace")?e.namespace.split("."):[];if(s=d=a=i=i||st,3!==i.nodeType&&8!==i.nodeType&&!Le.test(f+xt.event.triggered)&&(f.indexOf(".")>-1&&(m=f.split("."),f=m.shift(),m.sort()),l=f.indexOf(":")<0&&"on"+f,e=e[xt.expando]?e:new xt.Event(f,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:xt.makeArray(n,[e]),h=xt.event.special[f]||{},r||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!r&&!h.noBubble&&!_t(i)){for(u=h.delegateType||f,Le.test(u+f)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(i.ownerDocument||st)&&p.push(a.defaultView||a.parentWindow||t)}for(o=0;(s=p[o++])&&!e.isPropagationStopped();)d=s,e.type=o>1?u:h.bindType||f,c=(Bt.get(s,"events")||{})[e.type]&&Bt.get(s,"handle"),c&&c.apply(s,n),c=l&&s[l],c&&c.apply&&Ft(s)&&(e.result=c.apply(s,n),e.result===!1&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||h._default&&h._default.apply(p.pop(),n)!==!1||!Ft(i)||l&&yt(i[f])&&!_t(i)&&(a=i[l],a&&(i[l]=null),xt.event.triggered=f,e.isPropagationStopped()&&d.addEventListener(f,Se),i[f](),e.isPropagationStopped()&&d.removeEventListener(f,Se),xt.event.triggered=void 0,a&&(i[l]=a)),e.result}},simulate:function(t,e,n){var i=xt.extend(new xt.Event,n,{type:t,isSimulated:!0});xt.event.trigger(i,null,e)}}),xt.fn.extend({trigger:function(t,e){return this.each(function(){xt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return xt.event.trigger(t,e,n,!0)}}),vt.focusin||xt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){xt.event.simulate(e,t.target,xt.event.fix(t))};xt.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=Bt.access(i,e);r||i.addEventListener(t,n,!0),Bt.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Bt.access(i,e)-1;r?Bt.access(i,e,r):(i.removeEventListener(t,n,!0),Bt.remove(i,e))}}});var De=t.location,Me=Date.now(),Ae=/\?/;xt.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(i){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||xt.error("Invalid XML: "+e),n};var Ne=/\[\]$/,Pe=/\r?\n/g,Oe=/^(?:submit|button|image|reset|file)$/i,Ie=/^(?:input|select|textarea|keygen)/i;xt.param=function(t,e){var n,i=[],r=function(t,e){var n=yt(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!xt.isPlainObject(t))xt.each(t,function(){r(this.name,this.value)});else for(n in t)Q(n,t[n],e,r);return i.join("&")},xt.fn.extend({serialize:function(){return xt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=xt.prop(this,"elements");return t?xt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!xt(this).is(":disabled")&&Ie.test(this.nodeName)&&!Oe.test(t)&&(this.checked||!Kt.test(t))}).map(function(t,e){var n=xt(this).val();return null==n?null:Array.isArray(n)?xt.map(n,function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}}):{name:e.name,value:n.replace(Pe,"\r\n")}}).get()}});var je=/%20/g,Re=/#.*$/,qe=/([?&])_=[^&]*/,Fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Be=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ue=/^(?:GET|HEAD)$/,ze=/^\/\//,Ve={},He={},We="*/".concat("*"),Ze=st.createElement("a");Ze.href=De.href,xt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:De.href,type:"GET",isLocal:Be.test(De.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":We,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":xt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?nt(nt(t,xt.ajaxSettings),e):nt(xt.ajaxSettings,t)},ajaxPrefilter:tt(Ve),ajaxTransport:tt(He),ajax:function(e,n){function i(e,n,i,a){var l,d,p,b,w,x=n;c||(c=!0,u&&t.clearTimeout(u),r=void 0,s=a||"",k.readyState=e>0?4:0,l=e>=200&&e<300||304===e,i&&(b=it(f,k,i)),b=rt(f,b,k,l),l?(f.ifModified&&(w=k.getResponseHeader("Last-Modified"),w&&(xt.lastModified[o]=w),w=k.getResponseHeader("etag"),w&&(xt.etag[o]=w)),204===e||"HEAD"===f.type?x="nocontent":304===e?x="notmodified":(x=b.state,d=b.data,p=b.error,l=!p)):(p=x,!e&&x||(x="error",e<0&&(e=0))),k.status=e,k.statusText=(n||x)+"",l?v.resolveWith(m,[d,x,k]):v.rejectWith(m,[k,x,p]),k.statusCode(_),_=void 0,h&&g.trigger(l?"ajaxSuccess":"ajaxError",[k,f,l?d:p]),y.fireWith(m,[k,x]),h&&(g.trigger("ajaxComplete",[k,f]),--xt.active||xt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,o,s,a,u,l,c,h,d,p,f=xt.ajaxSetup({},n),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?xt(m):xt.event,v=xt.Deferred(),y=xt.Callbacks("once memory"),_=f.statusCode||{},b={},w={},x="canceled",k={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a)for(a={};e=Fe.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)k.always(t[k.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||x;return r&&r.abort(e),i(0,e),this}};if(v.promise(k),f.url=((e||f.url||De.href)+"").replace(ze,De.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Pt)||[""],null==f.crossDomain){l=st.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Ze.protocol+"//"+Ze.host!=l.protocol+"//"+l.host}catch($){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=xt.param(f.data,f.traditional)),et(Ve,f,n,k),c)return k;h=xt.event&&f.global,h&&0===xt.active++&&xt.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ue.test(f.type),o=f.url.replace(Re,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(je,"+")):(p=f.url.slice(o.length),f.data&&(f.processData||"string"==typeof f.data)&&(o+=(Ae.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(o=o.replace(qe,"$1"),p=(Ae.test(o)?"&":"?")+"_="+Me++ +p),f.url=o+p),f.ifModified&&(xt.lastModified[o]&&k.setRequestHeader("If-Modified-Since",xt.lastModified[o]),xt.etag[o]&&k.setRequestHeader("If-None-Match",xt.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+We+"; q=0.01":""):f.accepts["*"]);for(d in f.headers)k.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(f.beforeSend.call(m,k,f)===!1||c))return k.abort();if(x="abort",y.add(f.complete),k.done(f.success),k.fail(f.error),r=et(He,f,n,k)){if(k.readyState=1,h&&g.trigger("ajaxSend",[k,f]),c)return k;f.async&&f.timeout>0&&(u=t.setTimeout(function(){k.abort("timeout")},f.timeout));try{c=!1,r.send(b,i)}catch($){if(c)throw $;i(-1,$)}}else i(-1,"No Transport");return k},getJSON:function(t,e,n){return xt.get(t,e,n,"json")},getScript:function(t,e){return xt.get(t,void 0,e,"script")}}),xt.each(["get","post"],function(t,e){xt[e]=function(t,n,i,r){return yt(n)&&(r=r||i,i=n,n=void 0),xt.ajax(xt.extend({url:t,type:e,dataType:r,data:n,success:i},xt.isPlainObject(t)&&t))}}),xt._evalUrl=function(t){return xt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},xt.fn.extend({wrapAll:function(t){var e;return this[0]&&(yt(t)&&(t=t.call(this[0])),e=xt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return yt(t)?this.each(function(e){xt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=xt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=yt(t);return this.each(function(n){xt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){xt(this).replaceWith(this.childNodes)}),this}}),xt.expr.pseudos.hidden=function(t){return!xt.expr.pseudos.visible(t)},xt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},xt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var Ge={0:200,1223:204},Ye=xt.ajaxSettings.xhr();vt.cors=!!Ye&&"withCredentials"in Ye,vt.ajax=Ye=!!Ye,xt.ajaxTransport(function(e){var n,i;if(vt.cors||Ye&&!e.crossDomain)return{send:function(r,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);n=function(t){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ge[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=a.ontimeout=n("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{a.send(e.hasContent&&e.data||null)}catch(u){if(n)throw u}},abort:function(){n&&n()}}}),xt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),xt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return xt.globalEval(t),t}}}),xt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),xt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=xt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),st.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Xe=[],Ke=/(=)\?(?=&|$)|\?\?/;xt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xe.pop()||xt.expando+"_"+Me++;return this[t]=!0,t}}),xt.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,s,a=e.jsonp!==!1&&(Ke.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ke.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=yt(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ke,"$1"+r):e.jsonp!==!1&&(e.url+=(Ae.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||xt.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},i.always(function(){void 0===o?xt(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,Xe.push(r)),s&&yt(o)&&o(s[0]),s=o=void 0}),"script"}),vt.createHTMLDocument=function(){var t=st.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),xt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var i,r,o;return e||(vt.createHTMLDocument?(e=st.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=st.location.href,e.head.appendChild(i)):e=st),r=Lt.exec(t),o=!n&&[],r?[e.createElement(r[1])]:(r=k([t],e,o),o&&o.length&&xt(o).remove(),xt.merge([],r.childNodes))},xt.fn.load=function(t,e,n){var i,r,o,s=this,a=t.indexOf(" ");return a>-1&&(i=X(t.slice(a)),t=t.slice(0,a)),yt(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&xt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?xt("<div>").append(xt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},xt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){xt.fn[e]=function(t){return this.on(e,t)}}),xt.expr.pseudos.animated=function(t){return xt.grep(xt.timers,function(e){return t===e.elem}).length},xt.offset={setOffset:function(t,e,n){var i,r,o,s,a,u,l,c=xt.css(t,"position"),h=xt(t),d={};"static"===c&&(t.style.position="relative"),a=h.offset(),o=xt.css(t,"top"),u=xt.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(i=h.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(u)||0),yt(e)&&(e=e.call(t,n,xt.extend({},a))),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):h.css(d)}},xt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){xt.offset.setOffset(this,t,e)});var e,n,i=this[0];if(i)return i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===xt.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===xt.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&(r=xt(t).offset(),r.top+=xt.css(t,"borderTopWidth",!0),r.left+=xt.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-xt.css(i,"marginTop",!0),left:e.left-r.left-xt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===xt.css(t,"position");)t=t.offsetParent;return t||ne})}}),xt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;xt.fn[t]=function(i){return jt(this,function(t,i,r){var o;return _t(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r?o?o[e]:t[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r)},t,i,arguments.length)}}),xt.each(["top","left"],function(t,e){xt.cssHooks[e]=I(vt.pixelPosition,function(t,n){if(n)return n=O(t,e),ce.test(n)?xt(t).position()[e]+"px":n})}),xt.each({Height:"height",Width:"width"},function(t,e){xt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){xt.fn[i]=function(r,o){var s=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||o===!0?"margin":"border");return jt(this,function(e,n,r){var o;return _t(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?xt.css(e,n,a):xt.style(e,n,r,a)},e,s?r:void 0,s)}})}),xt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){xt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),xt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),xt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),xt.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),yt(t))return i=ut.call(arguments,2),r=function(){return t.apply(e||this,i.concat(ut.call(arguments)))},r.guid=t.guid=t.guid||xt.guid++,r},xt.holdReady=function(t){t?xt.readyWait++:xt.ready(!0)},xt.isArray=Array.isArray,xt.parseJSON=JSON.parse,xt.nodeName=o,xt.isFunction=yt,xt.isWindow=_t,xt.camelCase=f,xt.type=i,xt.now=Date.now,xt.isNumeric=function(t){var e=xt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return xt});var Je=t.jQuery,Qe=t.$;return xt.noConflict=function(e){return t.$===xt&&(t.$=Qe),e&&t.jQuery===xt&&(t.jQuery=Je),xt},e||(t.jQuery=t.$=xt),xt})},{}],73:[function(t,e,n){!function(t,e,n){function i(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}L.drawVersion="1.0.2",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e);var n=L.version.split(".");1===parseInt(n[0],10)&&parseInt(n[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({
className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,n=e.getLatLngs(),i=n.splice(-1,1)[0];this._poly.setLatLngs(n),this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(i,!1)}},addVertex:function(t){return this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?void this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(t,!0),void 0)},completeShape:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);return!this.options.allowIntersection&&e||!this._shapeIsValid()?void this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable(),void 0)},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),n=this._map.layerPointToLatLng(e);this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(e),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,n=e.clientX,i=e.clientY;this._startPoint.call(this,n,i)}},_startPoint:function(t,e){this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){var e=t.originalEvent,n=e.clientX,i=e.clientY;this._endPoint.call(this,n,i,t),this._clickHandled=null},_endPoint:function(e,n,i){if(this._mouseDownOrigin){var r=L.point(e,n).distanceTo(this._mouseDownOrigin),o=this._calculateFinishDistance(i.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(i.latlng),this._finishShape()):o<10&&L.Browser.touch?this._finishShape():Math.abs(r)<9*(t.devicePixelRatio||1)&&this.addVertex(i.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,n,i=t.originalEvent;!i.touches||!i.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=i.touches[0].clientX,n=i.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,n),this._endPoint.call(this,e,n,t),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t){var e;if(this._markers.length>0){var n;if(this.type===L.Draw.Polyline.TYPE)n=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;n=this._markers[0]}var i=this._map.latLngToContainerPoint(n.getLatLng()),r=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),o=this._map.latLngToContainerPoint(r.getLatLng());e=i.distanceTo(o)}else e=1/0;return e},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var n,i,r,o=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),s=this.options.guidelineDistance,a=this.options.maxGuideLineLength,u=o>a?o-a:s;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));u<o;u+=this.options.guidelineDistance)n=u/o,i={x:Math.floor(t.x*(1-n)+n*e.x),y:Math.floor(t.y*(1-n)+n*e.y)},r=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),r.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(r,i)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,n=this._guidesContainer.childNodes.length;e<n;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,n=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=n?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var n,i,r=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(n=r-(e?2:1),i=L.GeometryUtil.isVersion07x()?t.distanceTo(this._markers[n].getLatLng())*(this.options.factor||1):this._map.distance(t,this._markers[n].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=i*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();return t=L.GeometryUtil.isVersion07x()?n&&e&&e.distanceTo?this._measurementRunningTotal+e.distanceTo(n)*(this.options.factor||1):this._measurementRunningTotal||0:n&&e?this._measurementRunningTotal+this._map.distance(e,n)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(t=L.drawLocal.draw.handlers.polygon.tooltip.cont,e=this._getMeasurementString()):(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area,e="";return t||this.options.showLength?(this.options.showLength&&(e=L.Draw.Polyline.prototype._getMeasurementString.call(this)),t&&(e+="<br>"+L.GeometryUtil.readableArea(t,this.options.metric,this.options.precision)),e):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var n;!this.options.allowIntersection&&this.options.showArea&&(n=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(n)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),e.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),L.DomEvent.off(e,"touchend",this._onMouseUp,this),e.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).on(e,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!0},metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(t){return this._shape||this._isCurrentlyTwoClickDrawing?void(this._isCurrentlyTwoClickDrawing&&!i(t.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)):void(this._isCurrentlyTwoClickDrawing=!0)},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,n,i=L.Draw.SimpleShape.prototype._getTooltipText.call(this),r=this._shape,o=this.options.showArea;return r&&(t=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),n=o?L.GeometryUtil.readableArea(e,this.options.metric):""),{text:i.text,subtext:n}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=this._createMarker(e),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(t){return new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},_fireCreatedEvent:function(){var t=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)},_createMarker:function(t){return new L.CircleMarker(t,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){if(L.GeometryUtil.isVersion07x())var e=this._startLatLng.distanceTo(t);else var e=this._map.distance(this._startLatLng,t);this._shape?this._shape.setRadius(e):(this._shape=new L.Circle(this._startLatLng,e,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,n=t.latlng,i=this.options.showRadius,r=this.options.metric;if(this._tooltip.updatePosition(n),this._isDrawing){this._drawShape(n),e=this._shape.getRadius().toFixed(1);var o="";i&&(o=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,r,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:o})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display="")},_offsetMarker:function(t,e){var n=parseInt(t.style.marginTop,10)-e,i=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=i+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(t){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(t){t.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t){t.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t){t.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this._poly.options.poly))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t,e,n){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,n&&n.drawError&&(n.drawError=L.Util.extend({},this.options.drawError,n.drawError)),this._latlngs=e,L.setOptions(this,n)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t=this._poly,e=t._path;t instanceof L.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1)),e&&t.options.editing.className&&(t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly,e=t._path;e&&t.options.editing.className&&(t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,n,i,r=this._defaultShape();for(t=0,n=r.length;t<n;t++)i=this._createMarker(r[t],t),i.on("click",this._onMarkerClick,this),i.on("contextmenu",this._onContextMenu,this),this._markers.push(i);var o,s;for(t=0,e=n-1;t<n;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(o=this._markers[e],s=this._markers[t],this._createMiddleMarker(o,s),this._updatePrevNext(o,s))},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return n._origLatLng=t,n._index=e,n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(n),n},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t){var e=t.target,n=this._poly;if(L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),n.options.poly){var i=n._map._editTooltip;if(!n.options.poly.allowIntersection&&n.intersects()){var r=n.options.color;n.setStyle({color:this.options.drawError.color}),0!==L.version.indexOf("0.7")&&e.dragging._draggable._onUp(t),this._onMarkerClick(t),i&&i.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){n.setStyle({color:r}),i&&i.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var o=this._poly.getLatLngs();this._poly._convertLatLngs(o,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,n=t.target;this._defaultShape().length<e||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._markerGroup.removeLayer(n._middleLeft),n._middleRight&&this._markerGroup.removeLayer(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(t){var e=t.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:e,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e),i=t.target;L.extend(i._origLatLng,n),i._middleLeft&&i._middleLeft.setLatLng(this._getMiddleLatLng(i._prev,i)),i._middleRight&&i._middleRight.setLatLng(this._getMiddleLatLng(i,i._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(n){n._index>t&&(n._index+=e)})},_createMiddleMarker:function(t,e){var n,i,r,o=this._getMiddleLatLng(t,e),s=this._createMarker(o);s.setOpacity(.6),t._middleRight=e._middleLeft=s,i=function(){s.off("touchmove",i,this);var r=e._index;s._index=r,s.off("click",n,this).on("click",this._onMarkerClick,this),o.lat=s.getLatLng().lat,o.lng=s.getLatLng().lng,this._spliceLatLngs(r,0,o),this._markers.splice(r,0,s),s.setOpacity(1),this._updateIndexes(r,1),e._index++,this._updatePrevNext(t,s),this._updatePrevNext(s,e),this._poly.fire("editstart")},r=function(){s.off("dragstart",i,this),s.off("dragend",r,this),s.off("touchmove",i,this),this._createMiddleMarker(t,s),this._createMiddleMarker(s,e)},n=function(){i.call(this),r.call(this),this._fireEdit()},s.on("click",n,this).on("dragstart",i,this).on("dragend",r,this).on("touchmove",i,this),this._markerGroup.addLayer(s)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var n=this._poly._map,i=n.project(t.getLatLng()),r=n.project(e.getLatLng());return n.unproject(i._add(r)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,n=e.getLatLng();e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),"function"==typeof this._getCorners){var e=this._getCorners(),n=t.target,i=n._cornerIndex;n.setOpacity(0),this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)}this._shape.fire("editstart")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e);return t.target===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),!1},_onTouchEnd:function(t){t.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds(),e=t.getCenter();this._moveMarker=this._createMarker(e,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;e<n;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),n=t.target,i=n._cornerIndex;this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)},_onMarkerDragEnd:function(t){var e,n,i=t.target;i===this._moveMarker&&(e=this._shape.getBounds(),n=e.getCenter(),i.setLatLng(n)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),i=this._shape.getBounds(),r=i.getCenter(),o=[],s=0,a=n.length;s<a;s++)e=[n[s].lat-r.lat,n[s].lng-r.lng],o.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(o),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),
this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(t){if(this._resizeMarkers.length){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e)}this._shape.setLatLng(t),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(t);return this._map.unproject([n.x+e,n.y-e])},_resize:function(t){var e=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=e.distanceTo(t):radius=this._map.distance(e,t),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(t,e){var n={};if(void 0!==t.touches){if(!t.touches.length)return;n=t.touches[0]}else{if("touch"!==t.pointerType)return;if(n=t,!this._filterClick(t))return}var i=this._map.mouseEventToContainerPoint(n),r=this._map.mouseEventToLayerPoint(n),o=this._map.layerPointToLatLng(r);this._map.fire(e,{latlng:o,layerPoint:r,containerPoint:i,pageX:n.pageX,pageY:n.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,n=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){this._map._loaded&&this._touchEvent(t,"touchstart")},_onTouchEnd:function(t){this._map._loaded&&this._touchEvent(t,"touchend")},_onTouchCancel:function(t){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(t,e)}},_onTouchLeave:function(t){this._map._loaded&&this._touchEvent(t,"touchleave")},_onTouchMove:function(t){this._map._loaded&&this._touchEvent(t,"touchmove")},_detectIE:function(){var e=t.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e.concat(["touchcancel"]),L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)L.DomEvent.on(t,e[n],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var e=t.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],n=0,i=t.length;n<i;n++)Array.isArray(t[n])?e.push(L.LatLngUtil.cloneLatLngs(t[n])):e.push(this.cloneLatLng(t[n]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},function(){var t={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,n,i=t.length,r=0,o=Math.PI/180;if(i>2){for(var s=0;s<i;s++)e=t[s],n=t[(s+1)%i],r+=(n.lng-e.lng)*o*(2+Math.sin(e.lat*o)+Math.sin(n.lat*o));r=6378137*r*6378137/2}return Math.abs(r)},formattedNumber:function(t,e){var n=parseFloat(t).toFixed(e),i=L.drawLocal.format&&L.drawLocal.format.numeric,r=i&&i.delimiters,o=r&&r.thousands,s=r&&r.decimal;if(o||s){var a=n.split(".");n=o?a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o):a[0],s=s||".",a.length>1&&(n=n+s+a[1])}return n},readableArea:function(e,n,i){var r,o,i=L.Util.extend({},t,i);return n?(o=["ha","m"],type=typeof n,"string"===type?o=[n]:"boolean"!==type&&(o=n),r=e>=1e6&&-1!==o.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*e,i.km)+" km²":e>=1e4&&-1!==o.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*e,i.ha)+" ha":L.GeometryUtil.formattedNumber(e,i.m)+" m²"):(e/=.836127,r=e>=3097600?L.GeometryUtil.formattedNumber(e/3097600,i.mi)+" mi²":e>=4840?L.GeometryUtil.formattedNumber(e/4840,i.ac)+" acres":L.GeometryUtil.formattedNumber(e,i.yd)+" yd²"),r},readableDistance:function(e,n,i,r,o){var s,o=L.Util.extend({},t,o);switch(n?"string"==typeof n?n:"metric":i?"feet":r?"nauticalMile":"yards"){case"metric":s=e>1e3?L.GeometryUtil.formattedNumber(e/1e3,o.km)+" km":L.GeometryUtil.formattedNumber(e,o.m)+" m";break;case"feet":e*=3.28083,s=L.GeometryUtil.formattedNumber(e,o.ft)+" ft";break;case"nauticalMile":e*=.53996,s=L.GeometryUtil.formattedNumber(e/1e3,o.nm)+" nm";break;case"yards":default:e*=1.09361,s=e>1760?L.GeometryUtil.formattedNumber(e/1760,o.mi)+" miles":L.GeometryUtil.formattedNumber(e,o.yd)+" yd"}return s},isVersion07x:function(){var t=L.version.split(".");return 0===parseInt(t[0],10)&&7===parseInt(t[1],10)}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,n,i){return this._checkCounterclockwise(t,n,i)!==this._checkCounterclockwise(e,n,i)&&this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(t,e,i)},_checkCounterclockwise:function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,n,i=this._getProjectedPoints(),r=i?i.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=r-1;t>=3;t--)if(e=i[t-1],n=i[t],this._lineSegmentsIntersectsRange(e,n,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var n=this._getProjectedPoints(),i=n?n.length:0,r=n?n[i-1]:null,o=i-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(r,t,o,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),n=e?e.length:0;return n+=t||0,!e||n<=3},_lineSegmentsIntersectsRange:function(t,e,n,i){var r,o,s=this._getProjectedPoints();i=i||0;for(var a=n;a>i;a--)if(r=s[a-1],o=s[a],L.LineUtil.segmentsIntersect(t,e,r,o))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),n=0;n<e.length;n++)t.push(this._map.latLngToLayerPoint(e[n]));return t}}),L.Polygon.include({intersects:function(){var t,e,n,i,r=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=r.length,e=r[0],n=r[t-1],i=t-2,this._lineSegmentsIntersectsRange(n,e,i,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,t);var e;this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,n=L.DomUtil.create("div","leaflet-draw"),i=!1;for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&(e=this._toolbars[r].addToolbar(t))&&(i||(L.DomUtil.hasClass(e,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(e.childNodes[0],"leaflet-draw-toolbar-top"),i=!0),n.appendChild(e));return n},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var n in this._toolbars)this._toolbars[n]!==e&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null;var e=L.version.split(".");1===parseInt(e[0],10)&&parseInt(e[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,n=L.DomUtil.create("div","leaflet-draw-section"),i=0,r=this._toolbarClass||"",o=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<o.length;e++)o[e].enabled&&this._initModeHandler(o[e].handler,this._toolbarContainer,i++,r,o[e].title);if(i)return this._lastButtonIndex=--i,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),n.appendChild(this._toolbarContainer),n.appendChild(this._actionsContainer),n},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,n=this._actionButtons.length;e<n;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,n,i,r){var o=t.type;this._modes[o]={},this._modes[o].handler=t,this._modes[o].button=this._createButton({type:o,title:r,className:i+"-"+o,container:e,callback:this._modes[o].handler.enable,context:this._modes[o].handler}),this._modes[o].buttonIndex=n,this._modes[o].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container),n=L.DomUtil.create("span","sr-only",t.container);e.href="#",e.appendChild(n),t.title&&(e.title=t.title,n.innerHTML=t.title),t.text&&(e.innerHTML=t.text,n.innerHTML=t.text);var i=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"touchstart",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,i,t.callback,t.context),e},_disposeButton:function(t,e){var n=this._detectIOS()?"touchstart":"click";L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"touchstart",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,n,e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,n,i,r,o=this._actionsContainer,s=this.getActions(t),a=s.length;for(n=0,i=this._actionButtons.length;n<i;n++)this._disposeButton(this._actionButtons[n].button,this._actionButtons[n].callback);for(this._actionButtons=[];o.firstChild;)o.removeChild(o.firstChild);for(var u=0;u<a;u++)"enabled"in s[u]&&!s[u].enabled||(e=L.DomUtil.create("li","",o),r=this._createButton({title:s[u].title,text:s[u].text,container:e,callback:s[u].callback,context:s[u].context}),this._actionButtons.push({button:r,callback:s[u].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,n=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=n+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._visible=!1,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",t.text||t.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),n=this._container;return this._container&&(this._visible&&(n.style.visibility="inherit"),L.DomUtil.setPosition(n,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(t,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){L.setOptions(this,t);for(var e in this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&(void 0===t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(t){var e=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return t.removeAllLayers&&e.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),e},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=this.options.featureGroup,n=0!==e.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,n?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",n?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,n?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",n?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var n=L.version.split(".");1===parseInt(n[0],10)&&parseInt(n[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:(t instanceof L.Marker||t instanceof L.CircleMarker)&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):(t instanceof L.Marker||t instanceof L.CircleMarker)&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,n,i=t.layer||t.target||t;this._backupLayer(i),this.options.poly&&(n=L.Util.extend({},this.options.poly),i.options.poly=n),this.options.selectedPathOptions&&(e=L.Util.extend({},this.options.selectedPathOptions),e.maintainColor&&(e.color=i.options.color,e.fillColor=i.options.fillColor),i.options.original=L.extend({},i.options),i.options.editing=e),i instanceof L.Marker?(i.editing&&i.editing.enable(),i.dragging.enable(),i.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):i.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],n=this._map.mouseEventToLayerPoint(e),i=this._map.layerPointToLatLng(n);t.target.setLatLng(i)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var n=L.version.split(".");1===parseInt(n[0],10)&&parseInt(n[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(t){this._removeLayer({layer:t})},this),this.save()},_enableLayerDelete:function(t){(t.layer||t.target||t).on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document)},{}],74:[function(t,e,n){L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{minZoom:0,maxZoom:23,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._ready=!!window.google&&!!window.google.maps&&!!window.google.maps.Map,this._GAPIPromise=this._ready?Promise.resolve(window.google):new Promise(function(t,e){var n=0,i=null;i=setInterval(function(){return n>=10?(clearInterval(i),e(new Error("window.google not found after 10 attempts"))):window.google&&window.google.maps&&window.google.maps.Map?(clearInterval(i),t(window.google)):void n++},500)}),this._tileCallbacks={},this._freshTiles={},this._imagesPerTile="hybrid"===this.options.type?2:1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(t){L.GridLayer.prototype.onAdd.call(this,t),this._initMutantContainer(),this._GAPIPromise.then(function(){if(this._ready=!0,this._map=t,this._initMutant(),t.on("viewreset",this._reset,this),t.on("move",this._update,this),t.on("zoomend",this._handleZoomAnim,this),t.on("resize",this._resize,this),google.maps.event.addListenerOnce(this._mutant,"idle",function(){this._checkZoomLevels(),this._mutantIsReady=!0}.bind(this)),t._controlCorners.bottomright.style.marginBottom="20px",t._controlCorners.bottomleft.style.marginBottom="20px",this._reset(),this._update(),this._subLayers)for(var e in this._subLayers)this._subLayers[e].setMap(this._mutant)}.bind(this))},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),t._container.removeChild(this._mutantContainer),this._mutantContainer=void 0,google.maps.event.clearListeners(t,"idle"),google.maps.event.clearListeners(this._mutant,"idle"),
t.off("viewreset",this._reset,this),t.off("move",this._update,this),t.off("zoomend",this._handleZoomAnim,this),t.off("resize",this._resize,this),t._controlCorners&&(t._controlCorners.bottomright.style.marginBottom="0em",t._controlCorners.bottomleft.style.marginBottom="0em")},getAttribution:function(){return this.options.attribution},setOpacity:function(t){this.options.opacity=t,t<1&&L.DomUtil.setOpacity(this._mutantContainer,t)},setElementSize:function(t,e){t.style.width=e.x+"px",t.style.height=e.y+"px"},addGoogleLayer:function(t,e){return this._subLayers||(this._subLayers={}),this._GAPIPromise.then(function(){var n=google.maps[t],i=new n(e);return i.setMap(this._mutant),this._subLayers[t]=i,i}.bind(this))},removeGoogleLayer:function(t){var e=this._subLayers&&this._subLayers[t];e&&(e.setMap(null),delete this._subLayers[t])},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.zIndex="800",this._mutantContainer.style.pointerEvents="none",this._map.getContainer().appendChild(this._mutantContainer)),this.setOpacity(this.options.opacity),this.setElementSize(this._mutantContainer,this._map.getSize()),this._attachObserver(this._mutantContainer)},_initMutant:function(){if(this._ready&&this._mutantContainer){this._mutantCenter=new google.maps.LatLng(0,0);var t=new google.maps.Map(this._mutantContainer,{center:this._mutantCenter,zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.styles||{},backgroundColor:"transparent"});this._mutant=t,google.maps.event.addListenerOnce(t,"idle",function(){for(var t=this._mutantContainer.querySelectorAll("a"),e=0;e<t.length;e++)t[e].style.pointerEvents="auto"}.bind(this)),this.fire("spawned",{mapObject:t})}},_attachObserver:function(t){var e=new MutationObserver(this._onMutations.bind(this));e.observe(t,{childList:!0,subtree:!0})},_onMutations:function(t){for(var e=0;e<t.length;++e)for(var n=t[e],i=0;i<n.addedNodes.length;++i){var r=n.addedNodes[i];r instanceof HTMLImageElement?this._onMutatedImage(r):r instanceof HTMLElement&&(Array.prototype.forEach.call(r.querySelectorAll("img"),this._boundOnMutatedImage),Array.prototype.forEach.call(r.querySelectorAll('div[draggable=false][style*="text-align: center"]'),L.DomUtil.remove))}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(t){var e,n=t.src.match(this._roadRegexp),i=0;if(n?(e={z:n[1],x:n[2],y:n[3]},this._imagesPerTile>1&&(t.style.zIndex=1,i=1)):(n=t.src.match(this._satRegexp),n&&(e={x:n[1],y:n[2],z:n[3]}),i=0),e){var r=this._tileCoordsToKey(e);t.style.position="absolute",t.style.visibility="hidden";var o=r+"/"+i;if(this._freshTiles[o]=t,o in this._tileCallbacks&&this._tileCallbacks[o])this._tileCallbacks[o].pop()(t),this._tileCallbacks[o].length||delete this._tileCallbacks[o];else if(this._tiles[r]){var s=this._tiles[r].el,a=0===i?s.firstChild:s.firstChild.nextSibling,u=this._clone(t);s.replaceChild(u,a)}}else t.src.match(this._staticRegExp)&&(t.style.visibility="hidden")},createTile:function(t,e){var n=this._tileCoordsToKey(t),i=L.DomUtil.create("div");i.dataset.pending=this._imagesPerTile,e=e.bind(this,null,i);for(var r=0;r<this._imagesPerTile;r++){var o=n+"/"+r;if(o in this._freshTiles){var s=this._freshTiles[o];i.appendChild(this._clone(s)),i.dataset.pending--}else this._tileCallbacks[o]=this._tileCallbacks[o]||[],this._tileCallbacks[o].push(function(t){return function(n){t.appendChild(this._clone(n)),t.dataset.pending--,parseInt(t.dataset.pending)||e()}.bind(this)}.bind(this)(i))}return parseInt(i.dataset.pending)||L.Util.requestAnimFrame(e),i},_clone:function(t){var e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){var t=this._map.getZoom(),e=this._mutant.getZoom();t&&e&&(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!=this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_reset:function(){this._initContainer()},_update:function(){if(this._mutant){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e);var n=this._map.getZoom(),i=n!==Math.round(n),r=this._mutant.getZoom();i||n==r||(this._mutant.setZoom(n),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this)},_resize:function(){var t=this._map.getSize();this._mutantContainer.style.width===t.x&&this._mutantContainer.style.height===t.y||(this.setElementSize(this._mutantContainer,t),this._mutant&&google.maps.event.trigger(this._mutant,"resize"))},_handleZoomAnim:function(){if(this._mutant){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e),this._mutant.setZoom(Math.round(this._map.getZoom()))}},_removeTile:function(t){if(this._mutant)return setTimeout(this._pruneTile.bind(this,t),1e3),L.GridLayer.prototype._removeTile.call(this,t)},_pruneTile:function(t){for(var e=this._mutant.getZoom(),n=t.split(":")[2],i=this._mutant.getBounds(),r=i.getSouthWest(),o=i.getNorthEast(),s=L.latLngBounds([[r.lat(),r.lng()],[o.lat(),o.lng()]]),a=0;a<this._imagesPerTile;a++){var u=t+"/"+a;if(u in this._freshTiles){var l=this._map&&this._keyToBounds(t),c=this._map&&l.overlaps(s)&&n==e;c||delete this._freshTiles[u]}}}}),L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)}},{}],75:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(t.L={})}(this,function(t){"use strict";function e(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++){r=arguments[n];for(e in r)t[e]=r[e]}return t}function n(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}function i(t){return t._leaflet_id=t._leaflet_id||++me,t._leaflet_id}function r(t,e,n){var i,r,o,s;return s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)}}function o(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function s(){return!1}function a(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function l(t){return u(t).split(/\s+/)}function c(t,e){t.hasOwnProperty("options")||(t.options=t.options?fe(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function h(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&e.indexOf("?")!==-1?"&":"?")+i.join("&")}function d(t,e){return t.replace(ge,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}function p(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function f(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function m(t){var e=+new Date,n=Math.max(0,16-(e-_e));return _e=e+n,window.setTimeout(t,n)}function g(t,e,i){return i&&be===m?void t.call(e):be.call(window,n(t,e))}function v(t){t&&we.call(window,t)}function y(){}function _(t){if("undefined"!=typeof L&&L&&L.Mixin){t=ve(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}function b(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}function w(t,e,n){return t instanceof b?t:ve(t)?new b(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new b(t.x,t.y):new b(t,e,n)}function x(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function k(t,e){return!t||t instanceof x?t:new x(t,e)}function $(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function E(t,e){return t instanceof $?t:new $(t,e)}function C(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function T(t,e,n){return t instanceof C?t:ve(t)&&"object"!=typeof t[0]?3===t.length?new C(t[0],t[1],t[2]):2===t.length?new C(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new C(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new C(t,e,n)}function S(t,e,n,i){return ve(t)?(this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3])):(this._a=t,this._b=e,this._c=n,void(this._d=i))}function D(t,e,n,i){return new S(t,e,n,i)}function M(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function A(t,e){var n,i,r,o,s,a,u="";for(n=0,r=t.length;n<r;n++){for(s=t[n],i=0,o=s.length;i<o;i++)a=s[i],u+=(i?"L":"M")+a.x+" "+a.y;u+=e?dn?"z":"x":""}return u||"M0 0"}function N(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}function P(t,e,n,i){return"touchstart"===e?I(t,n,i):"touchmove"===e?B(t,n,i):"touchend"===e&&U(t,n,i),this}function O(t,e,n){var i=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(mn,i,!1):"touchmove"===e?t.removeEventListener(gn,i,!1):"touchend"===e&&(t.removeEventListener(vn,i,!1),t.removeEventListener(yn,i,!1)),this}function I(t,e,i){var r=n(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(_n.indexOf(t.target.tagName)<0))return;J(t)}F(t,e)});t["_leaflet_touchstart"+i]=r,t.addEventListener(mn,r,!1),wn||(document.documentElement.addEventListener(mn,j,!0),document.documentElement.addEventListener(gn,R,!0),document.documentElement.addEventListener(vn,q,!0),document.documentElement.addEventListener(yn,q,!0),wn=!0)}function j(t){bn[t.pointerId]=t,xn++}function R(t){bn[t.pointerId]&&(bn[t.pointerId]=t)}function q(t){delete bn[t.pointerId],xn--}function F(t,e){t.touches=[];for(var n in bn)t.touches.push(bn[n]);t.changedTouches=[t],e(t)}function B(t,e,n){var i=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&F(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(gn,i,!1)}function U(t,e,n){var i=function(t){F(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(vn,i,!1),t.addEventListener(yn,i,!1)}function z(t,e,n){function i(t){var e;if(sn){if(!Re||"mouse"===t.pointerType)return;e=xn}else e=t.touches.length;if(!(e>1)){var n=Date.now(),i=n-(o||n);s=t.touches?t.touches[0]:t,a=i>0&&i<=u,o=n}}function r(t){if(a&&!s.cancelBubble){if(sn){if(!Re||"mouse"===t.pointerType)return;var n,i,r={};for(i in s)n=s[i],r[i]=n&&n.bind?n.bind(s):n;s=r}s.type="dblclick",e(s),o=null}}var o,s,a=!1,u=250;return t[En+kn+n]=i,t[En+$n+n]=r,t[En+"dblclick"+n]=e,t.addEventListener(kn,i,!1),t.addEventListener($n,r,!1),t.addEventListener("dblclick",e,!1),this}function V(t,e){var n=t[En+kn+e],i=t[En+$n+e],r=t[En+"dblclick"+e];return t.removeEventListener(kn,n,!1),t.removeEventListener($n,i,!1),Re||t.removeEventListener("dblclick",r,!1),this}function H(t,e,n,i){if("object"==typeof e)for(var r in e)Z(t,r,e[r],n);else{e=l(e);for(var o=0,s=e.length;o<s;o++)Z(t,e[o],n,i)}return this}function W(t,e,n,i){if("object"==typeof e)for(var r in e)G(t,r,e[r],n);else if(e){e=l(e);for(var o=0,s=e.length;o<s;o++)G(t,e[o],n,i)}else{for(var a in t[Cn])G(t,a,t[Cn][a]);delete t[Cn]}return this}function Z(t,e,n,r){var o=e+i(n)+(r?"_"+i(r):"");if(t[Cn]&&t[Cn][o])return this;var s=function(e){return n.call(r||t,e||window.event)},a=s;sn&&0===e.indexOf("touch")?P(t,e,s,o):!an||"dblclick"!==e||!z||sn&&He?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,rt(t,e)&&a(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1)):("click"===e&&Fe&&(s=function(t){ot(t,a)}),t.addEventListener(e,s,!1)):"attachEvent"in t&&t.attachEvent("on"+e,s):z(t,s,o),t[Cn]=t[Cn]||{},t[Cn][o]=s}function G(t,e,n,r){var o=e+i(n)+(r?"_"+i(r):""),s=t[Cn]&&t[Cn][o];return s?(sn&&0===e.indexOf("touch")?O(t,e,o):!an||"dblclick"!==e||!V||sn&&He?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s):V(t,o),void(t[Cn][o]=null)):this}function Y(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,it(t),this}function X(t){return Z(t,"mousewheel",Y),this}function K(t){return H(t,"mousedown touchstart dblclick",Y),Z(t,"click",nt),this}function J(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Q(t){return J(t),Y(t),this}function tt(t,e){if(!e)return new b(t.clientX,t.clientY);var n=e.getBoundingClientRect(),i=n.width/e.offsetWidth||1,r=n.height/e.offsetHeight||1;return new b(t.clientX/i-n.left-e.clientLeft,t.clientY/r-n.top-e.clientTop)}function et(t){return Re?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Tn:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function nt(t){Ln[t.type]=!0}function it(t){var e=Ln[t.type];return Ln[t.type]=!1,e}function rt(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t}function ot(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=Se&&n-Se;return i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?void Q(t):(Se=n,void e(t))}function st(t){return"string"==typeof t?document.getElementById(t):t}function at(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ut(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function lt(t){var e=t.parentNode;e&&e.removeChild(t)}function ct(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ht(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function dt(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function pt(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=vt(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function ft(t,e){if(void 0!==t.classList)for(var n=l(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!pt(t,e)){var o=vt(t);gt(t,(o?o+" ":"")+e)}}function mt(t,e){void 0!==t.classList?t.classList.remove(e):gt(t,u((" "+vt(t)+" ").replace(" "+e+" "," ")))}function gt(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function vt(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function yt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&_t(t,e)}function _t(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(r){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}function bt(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function wt(t,e,n){var i=e||new b(0,0);t.style[Dn]=(Ke?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function xt(t,e){t._leaflet_pos=e,tn?wt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function kt(t){return t._leaflet_pos||new b(0,0)}function $t(){H(window,"dragstart",J)}function Et(){W(window,"dragstart",J)}function Ct(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Tt(),Pn=t,On=t.style.outline,t.style.outline="none",H(window,"keydown",Tt))}function Tt(){Pn&&(Pn.style.outline=On,Pn=void 0,On=void 0,W(window,"keydown",Tt))}function Lt(t,e){return new Rn(t,e)}function St(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=Pt(t,n),t=At(t,n)}function Dt(t,e,n){return Math.sqrt(qt(t,e,n,!0))}function Mt(t,e,n){return qt(t,e,n)}function At(t,e){var n=t.length,i=typeof Uint8Array!=void 0+""?Uint8Array:Array,r=new i(n);r[0]=r[n-1]=1,Nt(t,r,e,0,n-1);var o,s=[];for(o=0;o<n;o++)r[o]&&s.push(t[o]);return s}function Nt(t,e,n,i,r){var o,s,a,u=0;for(s=i+1;s<=r-1;s++)a=qt(t[s],t[i],t[r],!0),a>u&&(o=s,u=a);u>n&&(e[o]=1,Nt(t,e,n,i,o),Nt(t,e,n,o,r))}function Pt(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)Rt(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<o-1&&n.push(t[o-1]),n}function Ot(t,e,n,i,r){var o,s,a,u=i?Xn:jt(t,n),l=jt(e,n);for(Xn=l;;){if(!(u|l))return[t,e];if(u&l)return!1;o=u||l,s=It(t,e,o,n,r),a=jt(s,n),o===u?(t=s,u=a):(e=s,l=a)}}function It(t,e,n,i,r){var o,s,a=e.x-t.x,u=e.y-t.y,l=i.min,c=i.max;return 8&n?(o=t.x+a*(c.y-t.y)/u,s=c.y):4&n?(o=t.x+a*(l.y-t.y)/u,s=l.y):2&n?(o=c.x,s=t.y+u*(c.x-t.x)/a):1&n&&(o=l.x,s=t.y+u*(l.x-t.x)/a),new b(o,s,r)}function jt(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function Rt(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function qt(t,e,n,i){var r,o=e.x,s=e.y,a=n.x-o,u=n.y-s,l=a*a+u*u;return l>0&&(r=((t.x-o)*a+(t.y-s)*u)/l,r>1?(o=n.x,s=n.y):r>0&&(o+=a*r,s+=u*r)),a=t.x-o,u=t.y-s,i?a*a+u*u:new b(o,s)}function Ft(t){return!ve(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]}function Bt(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ft(t)}function Ut(t,e,n){var i,r,o,s,a,u,l,c,h,d=[1,4,2,8];for(r=0,l=t.length;r<l;r++)t[r]._code=jt(t[r],e);for(s=0;s<4;s++){for(c=d[s],i=[],r=0,l=t.length,o=l-1;r<l;o=r++)a=t[r],u=t[o],a._code&c?u._code&c||(h=It(u,a,c,e,n),h._code=jt(h,e),i.push(h)):(u._code&c&&(h=It(u,a,c,e,n),h._code=jt(h,e),i.push(h)),i.push(a));t=i}return t}function zt(t){return new mi(t)}function Vt(t,e){return new yi(t,e)}function Ht(t,e){return new bi(t,e)}function Wt(t,e,n){return new wi(t,e,n)}function Zt(t,e){return new xi(t,e)}function Gt(t,e){return new ki(t,e)}function Yt(t,e){var n,i,r,o,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Xt;if(!a&&!s)return null;switch(s.type){case"Point":return n=c(a),l?l(t,n):new yi(n);case"MultiPoint":for(r=0,o=a.length;r<o;r++)n=c(a[r]),u.push(l?l(t,n):new yi(n));return new pi(u);case"LineString":case"MultiLineString":return i=Kt(a,"LineString"===s.type?0:1,c),new xi(i,e);case"Polygon":case"MultiPolygon":return i=Kt(a,"Polygon"===s.type?1:2,c),new ki(i,e);case"GeometryCollection":for(r=0,o=s.geometries.length;r<o;r++){var h=Yt({geometry:s.geometries[r],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new pi(u);default:throw new Error("Invalid GeoJSON object.")}}function Xt(t){return new C(t[1],t[0],t[2])}function Kt(t,e,n){for(var i,r=[],o=0,s=t.length;o<s;o++)i=e?Kt(t[o],e-1,n):(n||Xt)(t[o]),r.push(i);return r}function Jt(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[a(t.lng,e),a(t.lat,e),a(t.alt,e)]:[a(t.lng,e),a(t.lat,e)]}function Qt(t,e,n,i){for(var r=[],o=0,s=t.length;o<s;o++)r.push(e?Qt(t[o],e-1,n,i):Jt(t[o],i));return!e&&n&&r.push(r[0]),r}function te(t,n){return t.feature?e({},t.feature,{geometry:n}):ee(n)}function ee(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function ne(t,e){return new $i(t,e)}function ie(t,e,n){return new Si(t,e,n)}function re(t){return new Oi(t)}function oe(t){return new Ii(t)}function se(t,e){return new ji(t,e)}function ae(t,e){return new Ri(t,e)}function ue(t){return hn?new Fi(t):null}function le(t){return dn||pn?new Vi(t):null}function ce(t,e){return new Hi(t,e)}function he(){return window.L=Qi,this}var de="1.3.1",pe=Object.freeze;Object.freeze=function(t){return t};var fe=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),me=0,ge=/\{ *([\w_-]+) *\}/g,ve=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},ye="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",_e=0,be=window.requestAnimationFrame||f("RequestAnimationFrame")||m,we=window.cancelAnimationFrame||f("CancelAnimationFrame")||f("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)},xe=(Object.freeze||Object)({freeze:pe,extend:e,create:fe,bind:n,lastId:me,stamp:i,throttle:r,wrapNum:o,falseFn:s,formatNum:a,trim:u,splitWords:l,setOptions:c,getParamString:h,template:d,isArray:ve,indexOf:p,emptyImageUrl:ye,requestFn:be,cancelFn:we,requestAnimFrame:g,cancelAnimFrame:v});y.extend=function(t){var n=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=n.__super__=this.prototype,r=fe(i);r.constructor=n,n.prototype=r;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&"__super__"!==o&&(n[o]=this[o]);return t.statics&&(e(n,t.statics),delete t.statics),t.includes&&(_(t.includes),e.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=e(fe(r.options),t.options)),e(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},n},y.include=function(t){return e(this.prototype,t),this},y.mergeOptions=function(t){return e(this.prototype.options,t),this},y.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var ke={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else{t=l(t);for(var r=0,o=t.length;r<o;r++)this._on(t[r],e,n)}return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else{t=l(t);for(var r=0,o=t.length;r<o;r++)this._off(t[r],e,n)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,s=0,a=o.length;s<a;s++)if(o[s].fn===e&&o[s].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t])){if(!e){for(r=0,o=i.length;r<o;r++)i[r].fn=s;return void delete this._events[t]}if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var a=i[r];if(a.ctx===n&&a.fn===e)return a.fn=s,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}},fire:function(t,n,i){if(!this.listens(t,i))return this;var r=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var u=o[s];u.fn.call(u.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=n(function(){this.off(t,e,i).off(t,o,i)},this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[i(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[i(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};ke.addEventListener=ke.on,ke.removeEventListener=ke.clearAllEventListeners=ke.off,ke.addOneTimeEventListener=ke.once,ke.fireEvent=ke.fire,ke.hasEventListeners=ke.listens;var $e=y.extend(ke),Ee=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};b.prototype={clone:function(){return new b(this.x,this.y)},add:function(t){return this.clone()._add(w(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(w(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new b(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new b(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ee(this.x),this.y=Ee(this.y),this},distanceTo:function(t){t=w(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=w(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=w(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},x.prototype={extend:function(t){return t=w(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new b((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new b(this.min.x,this.max.y)},getTopRight:function(){return new b(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof b?w(t):k(t),t instanceof x?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=k(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,s=r.y>=e.y&&i.y<=n.y;return o&&s},overlaps:function(t){t=k(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,s=r.y>e.y&&i.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)}},$.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof C)e=t,n=t;else{if(!(t instanceof $))return t?this.extend(T(t)||E(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new C(e.lat,e.lng),this._northEast=new C(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new $(new C(e.lat-i,e.lng-r),new C(n.lat+i,n.lng+r))},getCenter:function(){return new C((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new C(this.getNorth(),this.getWest())},getSouthEast:function(){return new C(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof C||"lat"in t?T(t):E(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof $?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=E(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,s=r.lng>=e.lng&&i.lng<=n.lng;return o&&s},overlaps:function(t){t=E(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,s=r.lng>e.lng&&i.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=E(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},C.prototype={equals:function(t,e){if(!t)return!1;t=T(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(void 0===e?1e-9:e)},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return Te.distance(this,T(t))},wrap:function(){return Te.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return E([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new C(this.lat,this.lng,this.alt)}};var Ce={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),i=this.transformation.transform(e.min,n),r=this.transformation.transform(e.max,n);return new x(i,r)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?o(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?o(t.lat,this.wrapLat,!0):t.lat,i=t.alt;return new C(n,e,i)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var o=t.getSouthWest(),s=t.getNorthEast(),a=new C(o.lat-i,o.lng-r),u=new C(s.lat-i,s.lng-r);return new $(a,u)}},Te=e({},Ce,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),a=o*o+Math.cos(i)*Math.cos(r)*s*s,u=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*u}}),Le={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new b(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new C((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new x([-t,-t],[t,t])}()};S.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new b((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Se,De,Me,Ae,Ne=e({},Te,{code:"EPSG:3857",projection:Le,transformation:function(){var t=.5/(Math.PI*Le.R);return D(t,.5,-t,.5)}()}),Pe=e({},Ne,{code:"EPSG:900913"}),Oe=document.documentElement.style,Ie="ActiveXObject"in window,je=Ie&&!document.addEventListener,Re="msLaunchUri"in navigator&&!("documentMode"in document),qe=N("webkit"),Fe=N("android"),Be=N("android 2")||N("android 3"),Ue=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ze=Fe&&N("Google")&&Ue<537&&!("AudioNode"in window),Ve=!!window.opera,He=N("chrome"),We=N("gecko")&&!qe&&!Ve&&!Ie,Ze=!He&&N("safari"),Ge=N("phantom"),Ye="OTransition"in Oe,Xe=0===navigator.platform.indexOf("Win"),Ke=Ie&&"transition"in Oe,Je="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Be,Qe="MozPerspective"in Oe,tn=!window.L_DISABLE_3D&&(Ke||Je||Qe)&&!Ye&&!Ge,en="undefined"!=typeof orientation||N("mobile"),nn=en&&qe,rn=en&&Je,on=!window.PointerEvent&&window.MSPointerEvent,sn=!(!window.PointerEvent&&!on),an=!window.L_NO_TOUCH&&(sn||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),un=en&&Ve,ln=en&&We,cn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,hn=function(){
return!!document.createElement("canvas").getContext}(),dn=!(!document.createElementNS||!M("svg").createSVGRect),pn=!dn&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(n){return!1}}(),fn=(Object.freeze||Object)({ie:Ie,ielt9:je,edge:Re,webkit:qe,android:Fe,android23:Be,androidStock:ze,opera:Ve,chrome:He,gecko:We,safari:Ze,phantom:Ge,opera12:Ye,win:Xe,ie3d:Ke,webkit3d:Je,gecko3d:Qe,any3d:tn,mobile:en,mobileWebkit:nn,mobileWebkit3d:rn,msPointer:on,pointer:sn,touch:an,mobileOpera:un,mobileGecko:ln,retina:cn,canvas:hn,svg:dn,vml:pn}),mn=on?"MSPointerDown":"pointerdown",gn=on?"MSPointerMove":"pointermove",vn=on?"MSPointerUp":"pointerup",yn=on?"MSPointerCancel":"pointercancel",_n=["INPUT","SELECT","OPTION"],bn={},wn=!1,xn=0,kn=on?"MSPointerDown":sn?"pointerdown":"touchstart",$n=on?"MSPointerUp":sn?"pointerup":"touchend",En="_leaflet_",Cn="_leaflet_events",Tn=Xe&&He?2*window.devicePixelRatio:We?window.devicePixelRatio:1,Ln={},Sn=(Object.freeze||Object)({on:H,off:W,stopPropagation:Y,disableScrollPropagation:X,disableClickPropagation:K,preventDefault:J,stop:Q,getMousePosition:tt,getWheelDelta:et,fakeStop:nt,skipped:it,isExternalTarget:rt,addListener:H,removeListener:W}),Dn=bt(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),Mn=bt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),An="webkitTransition"===Mn||"OTransition"===Mn?Mn+"End":"transitionend";if("onselectstart"in document)De=function(){H(window,"selectstart",J)},Me=function(){W(window,"selectstart",J)};else{var Nn=bt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);De=function(){if(Nn){var t=document.documentElement.style;Ae=t[Nn],t[Nn]="none"}},Me=function(){Nn&&(document.documentElement.style[Nn]=Ae,Ae=void 0)}}var Pn,On,In=(Object.freeze||Object)({TRANSFORM:Dn,TRANSITION:Mn,TRANSITION_END:An,get:st,getStyle:at,create:ut,remove:lt,empty:ct,toFront:ht,toBack:dt,hasClass:pt,addClass:ft,removeClass:mt,setClass:gt,getClass:vt,setOpacity:yt,testProp:bt,setTransform:wt,setPosition:xt,getPosition:kt,disableTextSelection:De,enableTextSelection:Me,disableImageDrag:$t,enableImageDrag:Et,preventOutline:Ct,restoreOutline:Tt}),jn=$e.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=kt(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=g(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),xt(this._el,n),this.fire("step")},_complete:function(){v(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Rn=$e.extend({options:{crs:Ne,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=c(this,e),this._initContainer(t),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(T(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=Mn&&tn&&!un&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),H(this._proxy,An,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){if(n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(T(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan));var r=this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,n),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(tn?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(tn?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=t instanceof b?t:this.latLngToContainerPoint(t),s=o.subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(s));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():E(t);var n=w(e.paddingTopLeft||e.padding||[0,0]),i=w(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if(r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r,r===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),r),a=this.project(t.getNorthEast(),r),u=this.unproject(s.add(a).divideBy(2).add(o),r);return{center:u,zoom:r}},fitBounds:function(t,e){if(t=E(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=w(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){ft(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){function i(t){var e=t?-1:1,n=t?v:m,i=v*v-m*m+e*b*b*y*y,r=2*n*b*y,o=i/r,s=Math.sqrt(o*o+1)-o,a=s<1e-9?-18:Math.log(s);return a}function r(t){return(Math.exp(t)-Math.exp(-t))/2}function o(t){return(Math.exp(t)+Math.exp(-t))/2}function s(t){return r(t)/o(t)}function a(t){return m*(o(w)/o(w+_*t))}function u(t){return m*(o(w)*s(w+_*t)-r(w))/b}function l(t){return 1-Math.pow(1-t,1.5)}function c(){var n=(Date.now()-x)/$,i=l(n)*k;n<=1?(this._flyToFrame=g(c,this),this._move(this.unproject(h.add(d.subtract(h).multiplyBy(u(i)/y)),f),this.getScaleZoom(m/a(i),f),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(n=n||{},n.animate===!1||!tn)return this.setView(t,e,n);this._stop();var h=this.project(this.getCenter()),d=this.project(t),p=this.getSize(),f=this._zoom;t=T(t),e=void 0===e?f:e;var m=Math.max(p.x,p.y),v=m*this.getZoomScale(f,e),y=d.distanceTo(h)||1,_=1.42,b=_*_,w=i(0),x=Date.now(),k=(i(1)-w)/_,$=n.duration?1e3*n.duration:1e3*k*.8;return this._moveStart(!0,n.noMoveStart),c.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=E(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,E(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=i.divideBy(2).round(),s=r.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=n(this._handleGeolocationResponse,this),r=n(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,r,t):navigator.geolocation.getCurrentPosition(i,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new C(e,n),r=i.toBounds(t.coords.accuracy),o=this._locateOptions;if(o.setView){var s=this.getBoundsZoom(r);this.setView(i,o.maxZoom?Math.min(s,o.maxZoom):s)}var a={latlng:i,bounds:r,timestamp:t.timestamp};for(var u in t.coords)"number"==typeof t.coords[u]&&(a[u]=t.coords[u]);this.fire("locationfound",a)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)lt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i=ut("div",n,e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new $(e,n)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=E(t),n=w(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),u=this.getSize().subtract(n),l=k(this.project(a,i),this.project(s,i)).getSize(),c=tn?this.options.zoomSnap:1,h=u.x/l.x,d=u.y/l.y,p=e?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(p,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new b(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new x(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(T(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(w(t),e)},layerPointToLatLng:function(t){var e=w(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(T(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(T(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(E(t))},distance:function(t,e){return this.options.crs.distance(T(t),T(e))},containerPointToLayerPoint:function(t){return w(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return w(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(w(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(T(t)))},mouseEventToContainerPoint:function(t){return tt(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=st(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");H(e,"scroll",this._onScroll,this),this._containerId=i(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&tn,ft(t,"leaflet-container"+(an?" leaflet-touch":"")+(cn?" leaflet-retina":"")+(je?" leaflet-oldie":"")+(Ze?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=at(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),xt(this._mapPane,new b(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ft(t.markerPane,"leaflet-zoom-hide"),ft(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){xt(this._mapPane,new b(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return v(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){xt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[i(this._container)]=this;var e=t?W:H;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),tn&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){v(this._resizeRequest),this._resizeRequest=g(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],o="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if(n=this._targets[i(s)],n&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(o&&!rt(s,t))break;if(r.push(n),o)break}if(s===this._container)break;s=s.parentNode}return r.length||a||o||!rt(s,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!it(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||Ct(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var r=e({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,n)),i.length)){var o=i[0];"contextmenu"===n&&o.listens(n,!0)&&J(t);var s={originalEvent:t};if("keypress"!==t.type){var a=o.getLatLng&&(!o._radius||o._radius<=10);s.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?o.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var u=0;u<i.length;u++)if(i[u].fire(n,s,!0),s.originalEvent._stopped||i[u].options.bubblingMouseEvents===!1&&p(this._mouseEvents,n)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return kt(this._mapPane)||new b(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return k([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new x(i.subtract(r),i.add(r)),s=this._getBoundsOffset(o,n,e);return s.round().equals([0,0])?t:this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new x(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=k(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max),s=this._rebound(r.x,-o.x),a=this._rebound(r.y,-o.y);return new b(s,a)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=tn?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!((e&&e.animate)!==!0&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=ut("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=Dn,n=this._proxy.style[e];wt(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();wt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lt(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(n.animate!==!0&&!this.getSize().contains(r))&&(g(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,r){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ft(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(n(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),g(function(){this._moveEnd(!0)},this))}}),qn=y.extend({options:{position:"topright"},initialize:function(t){c(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return ft(e,"leaflet-control"),n.indexOf("bottom")!==-1?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map?(lt(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Fn=function(t){return new qn(t)};Rn.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,r){var o=n+t+" "+n+r;e[t+r]=ut("div",o,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=ut("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)lt(this._controlCorners[t]);lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Bn=qn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){c(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var i in t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return qn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(i(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ft(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(ft(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):mt(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ut("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),K(e),X(e);var i=this._form=ut("form",t+"-list");n&&(this._map.on("click",this.collapse,this),Fe||H(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ut("a",t+"-toggle",e);r.href="#",r.title="Layers",an?(H(r,"click",Q),H(r,"click",this.expand,this)):H(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ut("div",t+"-base",i),this._separator=ut("div",t+"-separator",i),this._overlaysList=ut("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&i(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(n(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ct(this._baseLayersList),ct(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(i(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?(e=document.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers",r),this._layerControlInputs.push(e),e.layerId=i(t.layer),H(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var s=document.createElement("div");n.appendChild(s),s.appendChild(e),s.appendChild(o);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Un=function(t,e,n){return new Bn(t,e,n)},zn=qn.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ut("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=ut("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),K(o),H(o,"click",Q),H(o,"click",r,this),H(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";mt(this._zoomInButton,e),mt(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&ft(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&ft(this._zoomInButton,e)}});Rn.mergeOptions({zoomControl:!0}),Rn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zn,this.addControl(this.zoomControl))});var Vn=function(t){return new zn(t)},Hn=qn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ut("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ut("div",e,n)),t.imperial&&(this._iScale=ut("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(e=r/5280,
n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),Wn=function(t){return new Hn(t)},Zn=qn.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){c(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ut("div","leaflet-control-attribution"),K(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Rn.mergeOptions({attributionControl:!0}),Rn.addInitHook(function(){this.options.attributionControl&&(new Zn).addTo(this)});var Gn=function(t){return new Zn(t)};qn.Layers=Bn,qn.Zoom=zn,qn.Scale=Hn,qn.Attribution=Zn,Fn.layers=Un,Fn.zoom=Vn,Fn.scale=Wn,Fn.attribution=Gn;var Yn=y.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Yn.addTo=function(t,e){return t.addHandler(e,this),this};var Xn,Kn={Events:ke},Jn=an?"touchstart mousedown":"mousedown",Qn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ti={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ei=$e.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){c(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(H(this._dragStartTarget,Jn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ei._dragging===this&&this.finishDrag(),W(this._dragStartTarget,Jn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!pt(this._element,"leaflet-zoom-anim")&&!(ei._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(ei._dragging=this,this._preventOutline&&Ct(this._element),$t(),De(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new b(e.clientX,e.clientY),H(document,ti[t.type],this._onMove,this),H(document,Qn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new b(e.clientX,e.clientY),i=n.subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(J(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=kt(this._element).subtract(i),ft(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ft(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,v(this._animRequest),this._lastEvent=t,this._animRequest=g(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),xt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in ti)W(document,ti[t],this._onMove,this),W(document,Qn[t],this._onUp,this);Et(),Me(),this._moved&&this._moving&&(v(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ei._dragging=!1}}),ni=(Object.freeze||Object)({simplify:St,pointToSegmentDistance:Dt,closestPointOnSegment:Mt,clipSegment:Ot,_getEdgeIntersection:It,_getBitCode:jt,_sqClosestPointOnSegment:qt,isFlat:Ft,_flat:Bt}),ii=(Object.freeze||Object)({clipPolygon:Ut}),ri={project:function(t){return new b(t.lng,t.lat)},unproject:function(t){return new C(t.y,t.x)},bounds:new x([-180,-90],[180,90])},oi={R:6378137,R_MINOR:6356752.314245179,bounds:new x([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),s=o*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),o/2);return i=-n*Math.log(Math.max(a,1e-10)),new b(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),s=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(s),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=o*Math.sin(a),e=Math.pow((1-e)/(1+e),o/2),l=Math.PI/2-2*Math.atan(s*e)-a,a+=l;return new C(a*n,t.x*n/i)}},si=(Object.freeze||Object)({LonLat:ri,Mercator:oi,SphericalMercator:Le}),ai=e({},Te,{code:"EPSG:3395",projection:oi,transformation:function(){var t=.5/(Math.PI*oi.R);return D(t,.5,-t,.5)}()}),ui=e({},Te,{code:"EPSG:4326",projection:ri,transformation:D(1/180,1,-1/180,.5)}),li=e({},Ce,{projection:ri,transformation:D(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});Ce.Earth=Te,Ce.EPSG3395=ai,Ce.EPSG3857=Ne,Ce.EPSG900913=Pe,Ce.EPSG4326=ui,Ce.Simple=li;var ci=$e.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[i(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[i(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Rn.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=i(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=i(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&i(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?ve(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[i(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=i(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-(1/0),n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-(1/0)?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var hi=ci.extend({initialize:function(t,e){c(this,e),this._layers={};var n,i;if(t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return i(t)}}),di=function(t,e){return new hi(t,e)},pi=hi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),hi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),hi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new $;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),fi=function(t){return new pi(t)},mi=y.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){c(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=w(i),o=w("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return cn&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),gi=mi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return gi.imagePath||(gi.imagePath=this._detectIconPath()),(this.options.imagePath||gi.imagePath)+mi.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ut("div","leaflet-default-icon-path",document.body),e=at(t,"background-image")||at(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),vi=Yn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ei(t,t,(!0))),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ft(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=L.DomUtil.getPosition(e._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),u=k(s.min._subtract(a).add(r),s.max._subtract(a).subtract(r));if(!u.contains(o)){var l=w((Math.max(u.max.x,o.x)-u.max.x)/(s.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(s.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(s.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(s.min.y-u.min.y)).multiplyBy(i);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),L.DomUtil.setPosition(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=g(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(v(this._panRequest),this._panRequest=g(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=kt(e._icon),r=e._map.layerPointToLatLng(i);n&&xt(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){v(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),yi=ci.extend({options:{icon:new gi,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){c(this,e),this._latlng=T(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=T(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),ft(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(ft(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lt(this._shadow),this._shadow=null},_setPos:function(t){xt(this._icon,t),this._shadow&&xt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ft(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vi)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vi(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;yt(this._icon,t),this._shadow&&yt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),_i=ci.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return c(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),bi=_i.extend({options:{fill:!0,radius:10},initialize:function(t,e){c(this,e),this._latlng=T(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=T(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return _i.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new x(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),wi=bi.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),c(this,n),this._latlng=T(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new $(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:_i.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===Te.distance){var r=Math.PI/180,o=this._mRadius/Te.R/r,s=n.project([e+o,t]),a=n.project([e-o,t]),u=s.add(a).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(l*r))/(Math.cos(e*r)*Math.cos(l*r)))/r;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-n.project([l,t-c]).x,this._radiusY=u.y-s.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),xi=_i.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){c(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=qt,s=0,a=this._parts.length;s<a;s++)for(var u=this._parts[s],l=1,c=u.length;l<c;l++){e=u[l-1],n=u[l];var h=o(t,e,n,!0);h<i&&(i=h,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a=this._rings[0],u=a.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,i=0;t<u-1;t++)if(r=a[t],o=a[t+1],n=r.distanceTo(o),i+=n,i>e)return s=(i-e)/n,this._map.layerPointToLatLng([o.x-s*(o.x-r.x),o.y-s*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=T(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new $,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ft(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Ft(t),i=0,r=t.length;i<r;i++)n?(e[i]=T(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new x;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new b(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof C,s=t.length;if(o){for(r=[],i=0;i<s;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,n,i,r,o,s,a,u=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(a=this._rings[e],n=0,o=a.length;n<o-1;n++)s=Ot(a[n],a[n+1],t,n,!0),s&&(u[i]=u[i]||[],u[i].push(s[0]),s[1]===a[n+1]&&n!==o-2||(u[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=St(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,s,a,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(a=this._parts[n],i=0,s=a.length,r=s-1;i<s;r=i++)if((e||0!==i)&&Dt(t,a[r],a[i])<=u)return!0;return!1}});xi._flat=Bt;var ki=xi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a,u,l=this._rings[0],c=l.length;if(!c)return null;for(o=s=a=0,t=0,e=c-1;t<c;e=t++)n=l[t],i=l[e],r=n.y*i.x-i.y*n.x,s+=(n.x+i.x)*r,a+=(n.y+i.y)*r,o+=3*r;return u=0===o?l[0]:[s/o,a/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=xi.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof C&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){xi.prototype._setLatLngs.call(this,t),Ft(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ft(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new b(e,e);if(t=new x(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var i,r=0,o=this._rings.length;r<o;r++)i=Ut(this._rings[r],t,!0),i.length&&this._parts.push(i)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,s,a,u,l=!1;if(!this._pxBounds.contains(t))return!1;for(r=0,a=this._parts.length;r<a;r++)for(e=this._parts[r],o=0,u=e.length,s=u-1;o<u;s=o++)n=e[o],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||xi.prototype._containsPoint.call(this,t,!0)}}),$i=pi.extend({initialize:function(t,e){c(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=ve(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)i=r[e],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var s=Yt(t,o);return s?(s.feature=ee(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),Ei={toGeoJSON:function(t){return te(this,{type:"Point",coordinates:Jt(this.getLatLng(),t)})}};yi.include(Ei),wi.include(Ei),bi.include(Ei),xi.include({toGeoJSON:function(t){var e=!Ft(this._latlngs),n=Qt(this._latlngs,e?1:0,!1,t);return te(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),ki.include({toGeoJSON:function(t){var e=!Ft(this._latlngs),n=e&&!Ft(this._latlngs[0]),i=Qt(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),te(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),hi.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),te(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var o=ee(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}}),n?te(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Ci=ne,Ti=ci.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=E(e),c(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ft(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ht(this._image),this},bringToBack:function(){return this._map&&dt(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=E(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ut("img");return ft(e,"leaflet-image-layer"),this._zoomAnimated&&ft(e,"leaflet-zoom-animated"),this.options.className&&ft(e,this.options.className),e.onselectstart=s,e.onmousemove=s,e.onload=n(this.fire,this,"load"),e.onerror=n(this._overlayOnError,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t?void(this._url=e.src):(e.src=this._url,void(e.alt=this.options.alt))},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;wt(this._image,n,e)},_reset:function(){var t=this._image,e=new x(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();xt(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){yt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Li=function(t,e,n){return new Ti(t,e,n)},Si=Ti.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ut("video");if(ft(e,"leaflet-image-layer"),this._zoomAnimated&&ft(e,"leaflet-zoom-animated"),e.onselectstart=s,e.onmousemove=s,e.onloadeddata=n(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),r=[],o=0;o<i.length;o++)r.push(i[o].src);return void(this._url=i.length>0?r:[e.src])}ve(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var u=ut("source");u.src=this._url[a],e.appendChild(u)}}}),Di=ci.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){c(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&yt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&yt(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(yt(this._container,0),this._removeTimeout=setTimeout(n(lt,void 0,this._container),200)):lt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=T(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ht(this._container),this},bringToBack:function(){return this._map&&dt(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=w(this.options.offset),n=this._getAnchor();this._zoomAnimated?xt(this._container,t.add(n)):e=e.add(t).add(n);
var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),Mi=Di.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Di.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _i||this._source.on("preclick",Y))},onRemove:function(t){Di.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _i||this._source.off("preclick",Y))},getEvents:function(){var t=Di.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ut("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ut("div",t+"-content-wrapper",e);if(this._contentNode=ut("div",t+"-content",n),K(n),X(this._contentNode),H(n,"contextmenu",Y),this._tipContainer=ut("div",t+"-tip-container",e),this._tip=ut("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ut("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",H(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&i>r?(e.height=r+"px",ft(t,o)):mt(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();xt(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(at(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new b(this._containerLeft,-n-this._containerBottom);r._add(kt(this._container));var o=t.layerPointToContainerPoint(r),s=w(this.options.autoPanPadding),a=w(this.options.autoPanPaddingTopLeft||s),u=w(this.options.autoPanPaddingBottomRight||s),l=t.getSize(),c=0,h=0;o.x+i+u.x>l.x&&(c=o.x+i-l.x+u.x),o.x-c-a.x<0&&(c=o.x-a.x),o.y+n+u.y>l.y&&(h=o.y+n-l.y+u.y),o.y-h-a.y<0&&(h=o.y-a.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),Q(t)},_getAnchor:function(){return w(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ai=function(t,e){return new Mi(t,e)};Rn.mergeOptions({closePopupOnClick:!0}),Rn.include({openPopup:function(t,e,n){return t instanceof Mi||(t=new Mi(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),ci.include({bindPopup:function(t,e){return t instanceof Mi?(c(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Mi(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof ci||(e=t,t=this),t instanceof pi)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map)return Q(t),e instanceof _i?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Ni=Di.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Di.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Di.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Di.prototype.getEvents.call(this);return an&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ut("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),r=e.layerPointToContainerPoint(t),o=this.options.direction,s=n.offsetWidth,a=n.offsetHeight,u=w(this.options.offset),l=this._getAnchor();"top"===o?t=t.add(w(-s/2+u.x,-a+u.y+l.y,!0)):"bottom"===o?t=t.subtract(w(s/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(w(s/2+u.x,a/2-l.y+u.y,!0)):"right"===o||"auto"===o&&r.x<i.x?(o="right",t=t.add(w(u.x+l.x,l.y-a/2+u.y,!0))):(o="left",t=t.subtract(w(s+l.x-u.x,a/2-l.y-u.y,!0))),mt(n,"leaflet-tooltip-right"),mt(n,"leaflet-tooltip-left"),mt(n,"leaflet-tooltip-top"),mt(n,"leaflet-tooltip-bottom"),ft(n,"leaflet-tooltip-"+o),xt(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&yt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return w(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Pi=function(t,e){return new Ni(t,e)};Rn.include({openTooltip:function(t,e,n){return t instanceof Ni||(t=new Ni(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),ci.include({bindTooltip:function(t,e){return t instanceof Ni?(c(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Ni(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),an&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof ci||(e=t,t=this),t instanceof pi)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ft(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(mt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Oi=mi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var i=w(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});mi.Default=gi;var Ii=ci.extend({options:{tileSize:256,opacity:1,updateWhenIdle:en,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){c(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),lt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ht(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(dt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=r(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof b?t:new b(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-(1/0),1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!je){yt(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);yt(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(v(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this))}},_onOpaqueTile:s,_initContainer:function(){this._container||(this._container=ut("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(lt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||(i=this._levels[t]={},i.el=ut("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),s(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:s,_onRemoveLevel:s,_onCreateLevel:s,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)lt(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),s=n-1,a=new b((+r),(+o));a.z=+s;var u=this._tileCoordsToKey(a),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),s>i&&this._retainParent(r,o,s,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var s=new b(r,o);s.z=n+1;var a=this._tileCoordsToKey(s),u=this._tiles[a];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();tn?wt(t.el,r,i):xt(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new x(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),s=[],a=this.options.keepBuffer,u=new x(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new b(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)return void this._setView(t,n);for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var p=new b(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:s.push(p)}}if(s.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],m);this._level.el.appendChild(m)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return E(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n),o=e.unproject(i,t.z),s=e.unproject(r,t.z);return[o,s]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new $(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new b((+e[0]),(+e[1]));return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ze||e.el.setAttribute("src",ye),lt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ft(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=s,t.onmousemove=s,je&&this.options.opacity<1&&yt(t,this.options.opacity),Fe&&!Be&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),n(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&g(n(this._tileReady,this,t,null,o)),xt(o,i),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var r=this._tileCoordsToKey(t);i=this._tiles[r],i&&(i.loaded=+new Date,this._map._fadeAnimated?(yt(i.el,0),v(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(ft(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),je||!this._map._fadeAnimated?g(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new b(this._wrapX?o(t.x,this._wrapX):t.x,this._wrapY?o(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new x(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),ji=Ii.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=c(this,e),e.detectRetina&&cn&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),Fe||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return H(i,"load",n(this._tileOnLoad,this,e,i)),H(i,"error",n(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var n={r:cn?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return d(this._url,e(n,this.options))},_tileOnLoad:function(t,e){je?setTimeout(n(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset;return n&&(t=e-t),t+i},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=s,e.onerror=s,e.complete||(e.src=ye,lt(e),delete this._tiles[t]))}}),Ri=ji.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var r in n)r in this.options||(i[r]=n[r]);n=c(this,n);var o=n.detectRetina&&cn?2:1,s=this.getTileSize();i.width=s.x*o,i.height=s.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ji.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=k(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,s=(this._wmsVersion>=1.3&&this._crs===ui?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),a=L.TileLayer.prototype.getTileUrl.call(this,t);return a+h(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});ji.WMS=Ri,se.wms=ae;var qi=ci.extend({options:{padding:.1,tolerance:0},initialize:function(t){c(this,t),i(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ft(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=kt(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),s=this._map.project(t,e),a=s.subtract(o),u=r.multiplyBy(-n).add(i).add(r).subtract(a);tn?wt(this._container,u,n):xt(this._container,u)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new x(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Fi=qi.extend({getEvents:function(){var t=qi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");H(t,"mousemove",r(this._onMouseMove,32,this),this),H(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),H(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,lt(this._container),W(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},qi.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=cn?2:1;xt(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",cn&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){qi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[i(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||g(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new x,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,s=t._parts,a=s.length,u=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,u.beginPath(),n=0;n<a;n++){for(i=0,r=s[n].length;i<r;i++)o=s[n][i],u[i?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)e=r.layer,e.options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(nt(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(mt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,r=this._drawFirst;r;r=r.next)n=r.layer,n.options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(ft(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),Bi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Ui={_initContainer:function(){this._container=ut("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Bi("shape");ft(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Bi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[i(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;lt(e),t.removeInteractiveTarget(e),delete this._layers[i(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=Bi("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=ve(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=Bi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ht(t._container)},_bringToBack:function(t){dt(t._container)}},zi=pn?Bi:M,Vi=qi.extend({getEvents:function(){var t=qi.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,
t},_initContainer:function(){this._container=zi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=zi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lt(this._container),W(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){qi.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),xt(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=zi("path");t.options.className&&ft(e,t.options.className),t.options.interactive&&ft(e,"leaflet-interactive"),this._updateStyle(t),this._layers[i(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){lt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[i(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,A(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i=Math.max(Math.round(t._radiusY),1)||n,r="a"+n+","+i+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ht(t._path)},_bringToBack:function(t){dt(t._path)}});pn&&Vi.include(Ui),Rn.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&ue()||le()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=Vi&&le({pane:t})||Fi&&ue({pane:t}),this._paneRenderers[t]=e),e}});var Hi=ki.extend({initialize:function(t,e){ki.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=E(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});Vi.create=zi,Vi.pointsToPath=A,$i.geometryToLayer=Yt,$i.coordsToLatLng=Xt,$i.coordsToLatLngs=Kt,$i.latLngToCoords=Jt,$i.latLngsToCoords=Qt,$i.getFeature=te,$i.asFeature=ee,Rn.mergeOptions({boxZoom:!0});var Wi=Yn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){H(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){W(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(this._clearDeferredResetState(),this._resetState(),De(),$t(),this._startPoint=this._map.mouseEventToContainerPoint(t),void H(document,{contextmenu:Q,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ut("div","leaflet-zoom-box",this._container),ft(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new x(this._point,this._startPoint),n=e.getSize();xt(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(lt(this._box),mt(this._container,"leaflet-crosshair")),Me(),Et(),W(document,{contextmenu:Q,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0);var e=new $(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Rn.addInitHook("addHandler","boxZoom",Wi),Rn.mergeOptions({doubleClickZoom:!0});var Zi=Yn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});Rn.addInitHook("addHandler","doubleClickZoom",Zi),Rn.mergeOptions({dragging:!0,inertia:!Be,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Gi=Yn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ei(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ft(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=E(this._map.options.maxBounds);this._offsetLimit=k(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=r.multiplyBy(s/o),u=a.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),c=a.multiplyBy(l/u),h=l/(n.inertiaDeceleration*s),d=c.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),g(function(){e.panBy(d,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Rn.addInitHook("addHandler","dragging",Gi),Rn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Yi=Yn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),H(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),W(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){H(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){W(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=w(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Q(t)}}});Rn.addInitHook("addHandler","keyboard",Yi),Rn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Xi=Yn.extend({addHooks:function(){H(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){W(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=et(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),r),Q(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,s=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Rn.addInitHook("addHandler","scrollWheelZoom",Xi),Rn.mergeOptions({tap:!0,tapTolerance:15});var Ki=Yn.extend({addHooks:function(){H(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){W(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(J(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new b(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&ft(i,"leaflet-active"),this._holdTimeout=setTimeout(n(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),H(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),W(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&mt(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new b(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});an&&!sn&&Rn.addInitHook("addHandler","tap",Ki),Rn.mergeOptions({touchZoom:an&&!Be,bounceAtZoomLimits:!0});var Ji=Yn.extend({addHooks:function(){ft(this._map._container,"leaflet-touch-zoom"),H(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),W(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),H(document,"touchmove",this._onTouchMove,this),H(document,"touchend",this._onTouchEnd,this),J(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=i._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),v(this._animRequest);var a=n(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=g(a,this,!0),J(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,v(this._animRequest),W(document,"touchmove",this._onTouchMove),W(document,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}});Rn.addInitHook("addHandler","touchZoom",Ji),Rn.BoxZoom=Wi,Rn.DoubleClickZoom=Zi,Rn.Drag=Gi,Rn.Keyboard=Yi,Rn.ScrollWheelZoom=Xi,Rn.Tap=Ki,Rn.TouchZoom=Ji;var Qi=window.L;window.L=t,Object.freeze=pe,t.version=de,t.noConflict=he,t.Control=qn,t.control=Fn,t.Browser=fn,t.Evented=$e,t.Mixin=Kn,t.Util=xe,t.Class=y,t.Handler=Yn,t.extend=e,t.bind=n,t.stamp=i,t.setOptions=c,t.DomEvent=Sn,t.DomUtil=In,t.PosAnimation=jn,t.Draggable=ei,t.LineUtil=ni,t.PolyUtil=ii,t.Point=b,t.point=w,t.Bounds=x,t.bounds=k,t.Transformation=S,t.transformation=D,t.Projection=si,t.LatLng=C,t.latLng=T,t.LatLngBounds=$,t.latLngBounds=E,t.CRS=Ce,t.GeoJSON=$i,t.geoJSON=ne,t.geoJson=Ci,t.Layer=ci,t.LayerGroup=hi,t.layerGroup=di,t.FeatureGroup=pi,t.featureGroup=fi,t.ImageOverlay=Ti,t.imageOverlay=Li,t.VideoOverlay=Si,t.videoOverlay=ie,t.DivOverlay=Di,t.Popup=Mi,t.popup=Ai,t.Tooltip=Ni,t.tooltip=Pi,t.Icon=mi,t.icon=zt,t.DivIcon=Oi,t.divIcon=re,t.Marker=yi,t.marker=Vt,t.TileLayer=ji,t.tileLayer=se,t.GridLayer=Ii,t.gridLayer=oe,t.SVG=Vi,t.svg=le,t.Renderer=qi,t.Canvas=Fi,t.canvas=ue,t.Path=_i,t.CircleMarker=bi,t.circleMarker=Ht,t.Circle=wi,t.circle=Wt,t.Polyline=xi,t.polyline=Zt,t.Polygon=ki,t.polygon=Gt,t.Rectangle=Hi,t.rectangle=ce,t.Map=Rn,t.map=Lt})},{}],76:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7,immediate:69}],77:[function(t,e,n){(function(t){function n(t,e){return null==t?void 0:t[e]}function i(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function o(){this.__data__=bt?bt(null):{}}function s(t){return this.has(t)&&delete this.__data__[t]}function a(t){var e=this.__data__;if(bt){var n=e[t];return n===H?void 0:n}return ft.call(e,t)?e[t]:void 0}function u(t){var e=this.__data__;return bt?void 0!==e[t]:ft.call(e,t)}function l(t,e){var n=this.__data__;return n[t]=bt&&void 0===e?H:e,this}function c(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function h(){this.__data__=[]}function d(t){var e=this.__data__,n=k(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():yt.call(e,n,1),!0}function p(t){var e=this.__data__,n=k(e,t);return n<0?void 0:e[n][1]}function f(t){return k(this.__data__,t)>-1}function m(t,e){var n=this.__data__,i=k(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function g(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function v(){this.__data__={hash:new r,map:new(_t||c),string:new r}}function y(t){return L(this,t)["delete"](t)}function _(t){return L(this,t).get(t)}function b(t){return L(this,t).has(t)}function w(t,e){return L(this,t).set(t,e),this}function x(t,e,n){var i=t[e];ft.call(t,e)&&j(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function k(t,e){for(var n=t.length;n--;)if(j(t[n][0],e))return n;return-1}function $(t){if(!q(t)||N(t))return!1;var e=R(t)||i(t)?gt:it;return e.test(O(t))}function E(t,e,n,i){if(!q(t))return t;e=M(e,t)?[e]:T(e);for(var r=-1,o=e.length,s=o-1,a=t;null!=a&&++r<o;){var u=P(e[r]),l=n;if(r!=s){var c=a[u];l=i?i(c,u,a):void 0,void 0===l&&(l=q(c)?c:D(e[r+1])?[]:{})}x(a,u,l),a=a[u]}return t}function C(t){if("string"==typeof t)return t;if(B(t))return xt?xt.call(t):"";var e=t+"";return"0"==e&&1/t==-W?"-0":e}function T(t){return $t(t)?t:kt(t)}function L(t,e){var n=t.__data__;return A(e)?n["string"==typeof e?"string":"hash"]:n.map}function S(t,e){var i=n(t,e);return $(i)?i:void 0}function D(t,e){return e=null==e?Z:e,!!e&&("number"==typeof t||rt.test(t))&&t>-1&&t%1==0&&t<e}function M(t,e){if($t(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!B(t))||(J.test(t)||!K.test(t)||null!=e&&t in Object(e))}function A(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function N(t){return!!dt&&dt in t}function P(t){if("string"==typeof t||B(t))return t;var e=t+"";return"0"==e&&1/t==-W?"-0":e}function O(t){if(null!=t){try{return pt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function I(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(V);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new(I.Cache||g),n}function j(t,e){return t===e||t!==t&&e!==e}function R(t){var e=q(t)?mt.call(t):"";return e==G||e==Y}function q(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function F(t){return!!t&&"object"==typeof t}function B(t){return"symbol"==typeof t||F(t)&&mt.call(t)==X}function U(t){return null==t?"":C(t)}function z(t,e,n){return null==t?t:E(t,e,n)}var V="Expected a function",H="__lodash_hash_undefined__",W=1/0,Z=9007199254740991,G="[object Function]",Y="[object GeneratorFunction]",X="[object Symbol]",K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,Q=/^\./,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=/\\(\\)?/g,it=/^\[object .+?Constructor\]$/,rt=/^(?:0|[1-9]\d*)$/,ot="object"==typeof t&&t&&t.Object===Object&&t,st="object"==typeof self&&self&&self.Object===Object&&self,at=ot||st||Function("return this")(),ut=Array.prototype,lt=Function.prototype,ct=Object.prototype,ht=at["__core-js_shared__"],dt=function(){var t=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pt=lt.toString,ft=ct.hasOwnProperty,mt=ct.toString,gt=RegExp("^"+pt.call(ft).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=at.Symbol,yt=ut.splice,_t=S(at,"Map"),bt=S(Object,"create"),wt=vt?vt.prototype:void 0,xt=wt?wt.toString:void 0;r.prototype.clear=o,r.prototype["delete"]=s,r.prototype.get=a,r.prototype.has=u,r.prototype.set=l,c.prototype.clear=h,c.prototype["delete"]=d,c.prototype.get=p,c.prototype.has=f,c.prototype.set=m,g.prototype.clear=v,g.prototype["delete"]=y,g.prototype.get=_,g.prototype.has=b,g.prototype.set=w;var kt=I(function(t){t=U(t);var e=[];return Q.test(t)&&e.push(""),t.replace(tt,function(t,n,i,r){e.push(i?r.replace(nt,"$1"):n||t)}),e});I.Cache=g;var $t=Array.isArray;e.exports=z}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],78:[function(t,e,n){!function(t,i){"use strict";"function"==typeof define&&define.amd?define([],i):"object"==typeof n?e.exports=i():t.MergeXML=i()}(this,function(){return function(t){var e,n,i,r,o,s,a,u,l,c="_",h=1,d=3,p=8,f=7,m=this;m.Init=function(){return m.dom=null,m.nsp={},m.count=0,u[1]=!1,e>0&&(m.error={code:"",text:""}),e>0},m.AddFile=function(t){var e;return e=t&&t.target?t.target.result?m.AddSource(t.target.result):E("emf"):E("nof")},m.AddSource=function(t){var n,i;if("object"==typeof t)i=!!m.Get(1,t)&&t,i&&(1===e&&!window.DOMParser||2===e&&!i.selectSingleNode("/"))&&(i=null);else try{i=g(t)}catch(r){i=!1}if(null===i)n=E("nos");else if(i===!1)n=E("inv");else if(i===!0)m.nsp=w(m.dom.documentElement),m.count=1,n=m.dom;else if(y(i)){if(_(i,"/"),u[1]===!0){var o=m.dom.createTextNode("\r\n");m.dom.documentElement.appendChild(o)}m.count++,n=m.dom}else n=!1;return n};var g=function(t){var r,o;return 1===e?m.dom?(o=i.parseFromString(t,"text/xml"),r=!!v(o)&&o):(m.dom=i.parseFromString(t,"text/xml"),r=!!v(m.dom)):m.dom?(o=new ActiveXObject(n),o.async=!1,r=!!o.loadXML(t)&&o):(m.dom=new ActiveXObject(n),m.dom.async=!1,m.dom.setProperty("SelectionLanguage","XPath"),r=!!m.dom.loadXML(t)),r},v=function(t){return 0===t.getElementsByTagNameNS(r,"parsererror").length},y=function(t){var n=!0,i=m.dom.characterSet||m.dom.inputEncoding||m.dom.xmlEncoding,r=t.characterSet||t.inputEncoding||t.xmlEncoding;if(r!==i)n=E("enc");else if(t.documentElement.namespaceURI!==m.dom.documentElement.namespaceURI)n=E("nse");else if(t.documentElement.nodeName!==m.dom.documentElement.nodeName)if(u[0]){if(!u[1]){var o="undefined"!=typeof i?i:"UTF-8",a=m.dom.xmlVersion?m.dom.xmlVersion:"1.0",c='<?xml version="'+a+'" encoding="'+o+'"?>\r\n<'+u[0]+">\r\n</"+u[0]+">",h=g(c);if(h){var d=m.dom.documentElement.cloneNode(!0);h.documentElement.appendChild(d),d=h.createTextNode("\r\n"),h.documentElement.appendChild(d),m.dom=h,u[1]=!0}else n=E("jne"),u[1]=null}}else n=E("dif");if(n){var p=w(t.documentElement);for(var f in p)m.nsp[f]||("undefined"!=typeof m.dom.documentElement.setAttributeNS?m.dom.documentElement.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+f,p[f]):m.dom.documentElement.setAttribute("xmlns:"+f,p[f]),m.nsp[f]=p[f]);l?1===e?s=x:k():s=null}return n},_=function(t,e){for(var n=0;n<t.childNodes.length;n++){var i,r=t.childNodes[n],o=b(t.childNodes,r,e,n),s=m.Query(o);if(r.nodeType===h){var u=!0;if(null===s||s.namespaceURI!==r.namespaceURI)i=r.cloneNode(!0),s=m.Query(e),s.appendChild(i);else if($(s.getAttribute("stay"),a)!==!1&&(u=!1),u)try{for(var l=0;l<r.attributes.length;l++)r.attributes[l].namespaceURI&&"undefined"!=typeof r.setAttributeNS?s.setAttributeNS(r.attributes[l].namespaceURI,r.attributes[l].nodeName,r.attributes[l].nodeValue):s.setAttribute(r.attributes[l].nodeName,r.attributes[l].nodeValue)}catch(c){}r.hasChildNodes()&&u&&_(r,o)}else r.nodeType!==d&&r.nodeType!==p||(null===s||s.nodeType!==r.nodeType?(s=m.Query(e),i=r.nodeType===d?m.dom.createTextNode(r.nodeValue):m.dom.createComment(r.nodeValue),s.appendChild(i)):s.nodeValue=r.nodeValue)}},b=function(t,n,i,r){var o,s,a=0;if(n.nodeType===h){for(s=0;s<=r;s++)(l&&t[s].nodeType===n.nodeType&&t[s].nodeName===n.nodeName||!l&&t[s].nodeType!==f)&&a++;if(l){var u=!1,g=w(n);for(var v in g)v!==c&&(m.nsp[v]=g[v],u=2===e);u&&k(),o=n.prefix?n.prefix+":":m.nsp[c]?c+":":"",o+=n.localName?n.localName:n.baseName}else o="node()"}else if(n.nodeType===d||n.nodeType===p){for(s=0;s<=r;s++)t[s].nodeType===n.nodeType&&a++;o=n.nodeType===d?"text()":"comment()"}else o=i;return a&&(o=i+("/"===i.slice(-1)?"":"/")+o+"["+a+"]"),o},w=function(t){for(var e={},n=t.attributes,i=0;i<n.length;++i){var r=n[i].name.split(":");if("xmlns"===r[0]){var o=r[1]?r[1]:c;e[o]=n[i].value}}return e};m.Query=function(t){var n;u[1]&&(t="/"+m.dom.documentElement.nodeName+("/"===t?"":t));try{1===e?(n=o.evaluate(t,m.dom,s,XPathResult.FIRST_ORDERED_NODE_TYPE,null),n=n.singleNodeValue):n=m.dom.selectSingleNode(t)}catch(i){n=null}return n};var x=function(t){return m.nsp[t]||null},k=function(){var t="";for(var e in m.nsp)t+=" xmlns:"+e+"='"+m.nsp[e]+"'";t&&m.dom.setProperty("SelectionNamespaces",t.substr(1))},$=function(t,e){var n=!1;for(var i in e)if(e[i]===t){n=i;break}return n};m.Get=function(t,e){var n;if(t&&!e&&(e=m.dom),t)if(e)if(e.xml)n=e.xml;else try{n=(new XMLSerializer).serializeToString(e)}catch(i){n=null}else n="";else n=m.dom;if(n&&2===t){if(u[1]){var r=n.indexOf("<"+u[0]);n=n.substr(0,r)+"\r\n"+n.substr(r)}n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ |\t/g,"&nbsp;"),n=n.replace(/(\r\n|\n|\r)/g,"<br>")}return n};var E=function(t){var e={nod:"XML DOM is not supported in this browser",nox:"xPath is not supported in this browser",nos:"Incompatible source object",nof:"File not found",emf:"File is empty",inv:"Invalid XML source",enc:"Different encoding",dif:"Different root nodes",jne:"Invalid join parameter",nse:"Namespace incompatibility",und:"Undefined error"};return m.error.code=e[t]?t:"und",m.error.text=e[m.error.code],!1},C=function(){for(var t,e=!1,s=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","Microsoft.XmlDom"],a=s.length,u=0;u<a;u++)try{var l=new ActiveXObject(s[u]);if(l.async=!1,e=!0,l.loadXML("<x></x>")&&l.selectSingleNode("/"))break}catch(c){}if(e)u<a?(n=s[u],t=2):t="nox";else if(window.DOMParser)if(window.XPathEvaluator){i=new DOMParser;var c=i.parseFromString("Invalid","text/xml");r=c.getElementsByTagName("parsererror")[0].namespaceURI,o=new XPathEvaluator,t=1}else t="nox";else t="nod";return t};"object"!=typeof t&&(t={}),a="undefined"==typeof t.stay?["all"]:t.stay?"object"==typeof t.stay&&t.stay instanceof Array?t.stay:[t.stay]:[],u="undefined"==typeof t.join?["root"]:[!!t.join&&String(t.join)],l="undefined"==typeof t.updn||t.updn,e=C(),"string"==typeof e&&(m.error={},E(e),e=0),m.Init()}})},{}],79:[function(t,e,n){function i(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*h;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(t){return t>=c?Math.round(t/c)+"d":t>=l?Math.round(t/l)+"h":t>=u?Math.round(t/u)+"m":t>=a?Math.round(t/a)+"s":t+"ms"}function o(t){return s(t,c,"day")||s(t,l,"hour")||s(t,u,"minute")||s(t,a,"second")||t+" ms"}function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var a=1e3,u=60*a,l=60*u,c=24*l,h=365.25*c;e.exports=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return i(t);if("number"===n&&isNaN(t)===!1)return e["long"]?o(t):r(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],80:[function(t,e,n){(function(n){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t["default"]:t}function r(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}function o(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),i=new Uint8Array(t);return n.set(i),e}function s(t){if(t instanceof ArrayBuffer)return o(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}function a(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&xr.call(n)==kr}function u(t){var e,n,i;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,i=t.length;n<i;n++)e[n]=u(t[n]);return e}if(t instanceof Date)return t.toISOString();if(r(t))return s(t);if(!a(t))return t;e={};for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=u(t[n]);"undefined"!=typeof o&&(e[n]=o)}return e}function l(t){var e=!1;return pr(function(n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)})}function c(t){return pr(function(e){e=u(e);var n=this,i="function"==typeof e[e.length-1]&&e.pop(),r=new wr(function(i,r){var o;try{var s=l(function(t,e){t?r(t):i(e)});e.push(s),o=t.apply(n,e),o&&"function"==typeof o.then&&i(o)}catch(a){r(a)}});return i&&r.then(function(t){i(null,t)},i),r})}function h(t,e,n){if(t.constructor.listeners("debug").length){for(var i=["api",t.name,e],r=0;r<n.length-1;r++)i.push(n[r]);t.constructor.emit("debug",i);var o=n[n.length-1];n[n.length-1]=function(n,i){var r=["api",t.name,e];r=r.concat(n?["error",n]:["success",i]),t.constructor.emit("debug",r),o(n,i)}}}function d(t,e){return c(pr(function(n){if(this._closed)return wr.reject(new Error("database is closed"));if(this._destroyed)return wr.reject(new Error("database is destroyed"));var i=this;return h(i,t,n),this.taskqueue.isReady?e.apply(this,n):new wr(function(e,r){i.taskqueue.addTask(function(o){o?r(o):e(i[t].apply(i,n))})})}))}function p(t){return"$"+t}function f(t){return t.substring(1)}function m(){this._store={}}function g(t){if(this._store=new m,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}function v(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}function y(t,e){for(var n={},i=0,r=e.length;i<r;i++){
var o=e[i];o in t&&(n[o]=t[o])}return n}function _(t){return t}function b(t){return[{ok:t}]}function w(t,e,n){function i(){var t=[];d.forEach(function(e){e.docs.forEach(function(n){t.push({id:e.id,docs:[n]})})}),n(null,{results:t})}function r(){++h===c&&i()}function o(t,e,n){d[t]={id:e,docs:n},r()}function s(){if(!(f>=p.length)){var t=Math.min(f+Tr,p.length),e=p.slice(f,t);a(e,f),f+=e.length}}function a(n,i){n.forEach(function(n,r){var a=i+r,u=l.get(n),c=y(u[0],["atts_since","attachments"]);c.open_revs=u.map(function(t){return t.rev}),c.open_revs=c.open_revs.filter(_);var h=_;0===c.open_revs.length&&(delete c.open_revs,h=b),["revs","attachments","binary","ajax","latest"].forEach(function(t){t in e&&(c[t]=e[t])}),t.get(n,c,function(t,e){var i;i=t?[{error:t}]:h(e),o(a,n,i),s()})})}var u=e.docs,l=new Er;u.forEach(function(t){l.has(t.id)?l.get(t.id).push(t):l.set(t.id,[t])});var c=l.size,h=0,d=new Array(c),p=[];l.forEach(function(t,e){p.push(e)});var f=0;s()}function x(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function k(){return Cr}function $(t){x()?chrome.storage.onChanged.addListener(function(e){null!=e.db_name&&t.emit(e.dbName.newValue)}):k()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(e){t.emit(e.key)}):window.attachEvent("storage",function(e){t.emit(e.key)}))}function E(){mr.EventEmitter.call(this),this._listeners={},$(this)}function C(t){if("undefined"!=typeof console&&"function"==typeof console[t]){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function T(t,e){var n=6e5;t=parseInt(t,10)||0,e=parseInt(e,10),e!==e||e<=t?e=(t||1)<<1:e+=1,e>n&&(t=n>>1,e=n);var i=Math.random(),r=e-t;return~~(r*i+t)}function L(t){var e=0;return t||(e=2e3),T(t,e)}function S(t,e){C("info","The above "+t+" is totally normal. "+e)}function D(t,e,n){Error.call(this,n),this.status=t,this.name=e,this.message=n,this.error=!0}function M(t,e){function n(e){for(var n in t)"function"!=typeof t[n]&&(this[n]=t[n]);void 0!==e&&(this.reason=e)}return n.prototype=D.prototype,new n(e)}function A(t){if("object"!=typeof t){var e=t;t=jr,t.data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),t}function N(t,e,n){try{return!t(e,n)}catch(i){var r="Filter function threw: "+i.toString();return M(Br,r)}}function P(t){var e={},n=t.filter&&"function"==typeof t.filter;return e.query=t.query_params,function(i){i.doc||(i.doc={});var r=n&&N(t.filter,i.doc,e);if("object"==typeof r)return r;if(r)return!1;if(t.include_docs){if(!t.attachments)for(var o in i.doc._attachments)i.doc._attachments.hasOwnProperty(o)&&(i.doc._attachments[o].stub=!0)}else delete i.doc;return!0}}function O(t){for(var e=[],n=0,i=t.length;n<i;n++)e=e.concat(t[n]);return e}function I(t){var e;if(t?"string"!=typeof t?e=M(Pr):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=M(Ir)):e=M(Or),e)throw e}function j(t){return"boolean"==typeof t._remote?t._remote:"function"==typeof t.type&&(C("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===t.type())}function R(t,e){return"listenerCount"in t?t.listenerCount(e):mr.EventEmitter.listenerCount(t,e)}function q(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function F(t){var e=q(t);return e?e.join("/"):null}function B(t){for(var e=Xr.exec(t),n={},i=14;i--;){var r=Zr[i],o=e[i]||"",s=["user","password"].indexOf(r)!==-1;n[r]=s?decodeURIComponent(o):o}return n[Gr]={},n[Zr[12]].replace(Yr,function(t,e,i){e&&(n[Gr][e]=i)}),n}function U(t,e){var n=[],i=[];for(var r in e)e.hasOwnProperty(r)&&(n.push(r),i.push(e[r]));return n.push(t),Function.apply(null,n).apply(null,i)}function z(t,e,n){return new wr(function(i,r){t.get(e,function(o,s){if(o){if(404!==o.status)return r(o);s={}}var a=s._rev,u=n(s);return u?(u._id=e,u._rev=a,void i(V(t,u,n))):i({updated:!1,rev:a})})})}function V(t,e,n){return t.put(e).then(function(t){return{updated:!0,rev:t.rev}},function(i){if(409!==i.status)throw i;return z(t,e._id,n)})}function H(){return vr.v4().replace(/-/g,"").toLowerCase()}function W(t){for(var e,n,i,r,o=t.rev_tree.slice();r=o.pop();){var s=r.ids,a=s[2],u=r.pos;if(a.length)for(var l=0,c=a.length;l<c;l++)o.push({pos:u+1,ids:a[l]});else{var h=!!s[1].deleted,d=s[0];e&&!(i!==h?i:n!==u?n<u:e<d)||(e=d,n=u,i=h)}}return n+"-"+e}function Z(t,e){for(var n,i=t.slice();n=i.pop();)for(var r=n.pos,o=n.ids,s=o[2],a=e(0===s.length,r,o[0],n.ctx,o[1]),u=0,l=s.length;u<l;u++)i.push({pos:r+1,ids:s[u],ctx:a})}function G(t,e){return t.pos-e.pos}function Y(t){var e=[];Z(t,function(t,n,i,r,o){t&&e.push({rev:n+"-"+i,pos:n,opts:o})}),e.sort(G).reverse();for(var n=0,i=e.length;n<i;n++)delete e[n].pos;return e}function X(t){for(var e=W(t),n=Y(t.rev_tree),i=[],r=0,o=n.length;r<o;r++){var s=n[r];s.rev===e||s.opts.deleted||i.push(s.rev)}return i}function K(t){var e=[];return Z(t.rev_tree,function(t,n,i,r,o){"available"!==o.status||t||(e.push(n+"-"+i),o.status="missing")}),e}function J(t){for(var e,n=[],i=t.slice();e=i.pop();){var r=e.pos,o=e.ids,s=o[0],a=o[1],u=o[2],l=0===u.length,c=e.history?e.history.slice():[];c.push({id:s,opts:a}),l&&n.push({pos:r+1-c.length,ids:c});for(var h=0,d=u.length;h<d;h++)i.push({pos:r+1,ids:u[h],history:c})}return n.reverse()}function Q(t,e){return t.pos-e.pos}function tt(t,e,n){for(var i,r=0,o=t.length;r<o;)i=r+o>>>1,n(t[i],e)<0?r=i+1:o=i;return r}function et(t,e,n){var i=tt(t,e,n);t.splice(i,0,e)}function nt(t,e){for(var n,i,r=e,o=t.length;r<o;r++){var s=t[r],a=[s.id,s.opts,[]];i?(i[2].push(a),i=a):n=i=a}return n}function it(t,e){return t[0]<e[0]?-1:1}function rt(t,e){for(var n=[{tree1:t,tree2:e}],i=!1;n.length>0;){var r=n.pop(),o=r.tree1,s=r.tree2;(o[1].status||s[1].status)&&(o[1].status="available"===o[1].status||"available"===s[1].status?"available":"missing");for(var a=0;a<s[2].length;a++)if(o[2][0]){for(var u=!1,l=0;l<o[2].length;l++)o[2][l][0]===s[2][a][0]&&(n.push({tree1:o[2][l],tree2:s[2][a]}),u=!0);u||(i="new_branch",et(o[2],s[2][a],it))}else i="new_leaf",o[2][0]=s[2][a]}return{conflicts:i,tree:t}}function ot(t,e,n){var i,r=[],o=!1,s=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var a=0,u=t.length;a<u;a++){var l=t[a];if(l.pos===e.pos&&l.ids[0]===e.ids[0])i=rt(l.ids,e.ids),r.push({pos:l.pos,ids:i.tree}),o=o||i.conflicts,s=!0;else if(n!==!0){var c=l.pos<e.pos?l:e,h=l.pos<e.pos?e:l,d=h.pos-c.pos,p=[],f=[];for(f.push({ids:c.ids,diff:d,parent:null,parentIdx:null});f.length>0;){var m=f.pop();if(0!==m.diff)for(var g=m.ids[2],v=0,y=g.length;v<y;v++)f.push({ids:g[v],diff:m.diff-1,parent:m.ids,parentIdx:v});else m.ids[0]===h.ids[0]&&p.push(m)}var _=p[0];_?(i=rt(_.ids,h.ids),_.parent[2][_.parentIdx]=i.tree,r.push({pos:c.pos,ids:c.ids}),o=o||i.conflicts,s=!0):r.push(l)}else r.push(l)}return s||r.push(e),r.sort(Q),{tree:r,conflicts:o||"internal_node"}}function st(t,e){for(var n,i,r=J(t),o=0,s=r.length;o<s;o++){var a,u=r[o],l=u.ids;if(l.length>e){n||(n={});var c=l.length-e;a={pos:u.pos+c,ids:nt(l,c)};for(var h=0;h<c;h++){var d=u.pos+h+"-"+l[h].id;n[d]=!0}}else a={pos:u.pos,ids:nt(l,0)};i=i?ot(i,a,!0).tree:[a]}return n&&Z(i,function(t,e,i){delete n[e+"-"+i]}),{tree:i,revs:n?Object.keys(n):[]}}function at(t,e,n){var i=ot(t,e),r=st(i.tree,n);return{tree:r.tree,stemmedRevs:r.revs,conflicts:i.conflicts}}function ut(t,e){for(var n,i=t.slice(),r=e.split("-"),o=parseInt(r[0],10),s=r[1];n=i.pop();){if(n.pos===o&&n.ids[0]===s)return!0;for(var a=n.ids[2],u=0,l=a.length;u<l;u++)i.push({pos:n.pos+1,ids:a[u]})}return!1}function lt(t){return t.ids}function ct(t,e){e||(e=W(t));for(var n,i=e.substring(e.indexOf("-")+1),r=t.rev_tree.map(lt);n=r.pop();){if(n[0]===i)return!!n[1].deleted;r=r.concat(n[2])}}function ht(t){return/^_local/.test(t)}function dt(t,e){for(var n,i=e.rev_tree.slice();n=i.pop();){var r=n.pos,o=n.ids,s=o[0],a=o[1],u=o[2],l=0===u.length,c=n.history?n.history.slice():[];if(c.push({id:s,pos:r,opts:a}),l)for(var h=0,d=c.length;h<d;h++){var p=c[h],f=p.pos+"-"+p.id;if(f===t)return r+"-"+s}for(var m=0,g=u.length;m<g;m++)i.push({pos:r+1,ids:u[m],history:c})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}function pt(t,e,n,i){try{t.emit("change",e,n,i)}catch(r){C("error",'Error in .on("change", function):',r)}}function ft(t,e,n){function i(){r.cancel()}mr.EventEmitter.call(this);var r=this;this.db=t,e=e?u(e):{};var o=e.complete=l(function(e,n){e?R(r,"error")>0&&r.emit("error",e):r.emit("complete",n),r.removeAllListeners(),t.removeListener("destroyed",i)});n&&(r.on("complete",function(t){n(null,t)}),r.on("error",n)),t.once("destroyed",i),e.onChange=function(t,e,n){r.isCancelled||pt(r,t,e,n)};var s=new wr(function(t,n){e.complete=function(e,i){e?n(e):t(i)}});r.once("cancel",function(){t.removeListener("destroyed",i),e.complete(null,{status:"cancelled"})}),this.then=s.then.bind(s),this["catch"]=s["catch"].bind(s),this.then(function(t){o(null,t)},o),t.taskqueue.isReady?r.validateChanges(e):t.taskqueue.addTask(function(t){t?e.complete(t):r.isCancelled?r.emit("cancel"):r.validateChanges(e)})}function mt(t,e,n){var i=[{rev:t._rev}];"all_docs"===n.style&&(i=Y(e.rev_tree).map(function(t){return{rev:t.rev}}));var r={id:e.id,changes:i,doc:t};return ct(e,t._rev)&&(r.deleted=!0),n.conflicts&&(r.doc._conflicts=X(e),r.doc._conflicts.length||delete r.doc._conflicts),r}function gt(t,e){return t<e?-1:t>e?1:0}function vt(t,e){return function(n,i){n||i[0]&&i[0].error?(n=n||i[0],n.docId=e,t(n)):t(null,i.length?i[0]:i)}}function yt(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var i=Object.keys(n._attachments),r=0;r<i.length;r++){var o=i[r];n._attachments[o]=y(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}function _t(t,e){var n=gt(t._id,e._id);if(0!==n)return n;var i=t._revisions?t._revisions.start:0,r=e._revisions?e._revisions.start:0;return gt(i,r)}function bt(t){var e={},n=[];return Z(t,function(t,i,r,o){var s=i+"-"+r;return t&&(e[s]=0),void 0!==o&&n.push({from:o,to:s}),s}),n.reverse(),n.forEach(function(t){void 0===e[t.from]?e[t.from]=1+e[t.to]:e[t.from]=Math.min(e[t.from],1+e[t.to])}),e}function wt(t){var e="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;t.keys=e,t.skip=0,delete t.limit,t.descending&&(e.reverse(),t.descending=!1)}function xt(t){var e=t._compactionQueue[0],n=e.opts,i=e.callback;t.get("_local/compaction")["catch"](function(){return!1}).then(function(e){e&&e.last_seq&&(n.last_seq=e.last_seq),t._compact(n,function(e,n){e?i(e):i(null,n),fr(function(){t._compactionQueue.shift(),t._compactionQueue.length&&xt(t)})})})}function kt(t){return"_"===t.charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'"}function $t(){mr.EventEmitter.call(this)}function Et(){this.isReady=!1,this.failed=!1,this.queue=[]}function Ct(t,e){var n=t.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var i=Lt.adapters,r=Lt.preferredAdapters,o=Lt.prefix,s=e.adapter;if(!s)for(var a=0;a<r.length;++a){s=r[a];{if(!("idb"===s&&"websql"in i&&k()&&localStorage["_pouch__websqldb_"+o+t]))break;C("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.')}}var u=i[s],l=!(u&&"use_prefix"in u)||u.use_prefix;return{name:l?o+t:t,adapter:s}}function Tt(t){function e(e){t.removeListener("closed",n),e||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)}function Lt(t,e){if(!(this instanceof Lt))return new Lt(t,e);var n=this;if(e=e||{},t&&"object"==typeof t&&(e=t,t=e.name,delete e.name),this.__opts=e=u(e),n.auto_compaction=e.auto_compaction,n.prefix=Lt.prefix,"string"!=typeof t)throw new Error("Missing/invalid DB name");var i=(e.prefix||"")+t,r=Ct(i,e);if(e.name=r.name,e.adapter=e.adapter||r.adapter,n.name=t,n._adapter=e.adapter,Lt.emit("debug",["adapter","Picked adapter: ",e.adapter]),!Lt.adapters[e.adapter]||!Lt.adapters[e.adapter].valid())throw new Error("Invalid Adapter: "+e.adapter);$t.call(n),n.taskqueue=new Et,n.adapter=e.adapter,Lt.adapters[e.adapter].call(n,e,function(t){return t?n.taskqueue.fail(t):(Tt(n),n.emit("created",n),Lt.emit("created",n.name),void n.taskqueue.ready(n))})}function St(t){Object.keys(mr.EventEmitter.prototype).forEach(function(e){"function"==typeof mr.EventEmitter.prototype[e]&&(t[e]=Jr[e].bind(Jr))});var e=t._destructionListeners=new Er;t.on("ref",function(t){e.has(t.name)||e.set(t.name,[]),e.get(t.name).push(t)}),t.on("unref",function(t){if(e.has(t.name)){var n=e.get(t.name),i=n.indexOf(t);i<0||(n.splice(i,1),n.length>1?e.set(t.name,n):e["delete"](t.name))}}),t.on("destroyed",function(t){if(e.has(t)){var n=e.get(t);e["delete"](t),n.forEach(function(t){t.emit("destroyed",!0)})}})}function Dt(t){t.debug=yr;var e={};t.on("debug",function(t){var n=t[0],i=t.slice(1);e[n]||(e[n]=yr("pouchdb:"+n)),e[n].apply(null,i)})}function Mt(t,e){for(var n=t,i=0,r=e.length;i<r;i++){var o=e[i];if(n=n[o],!n)break}return n}function At(t,e){return t<e?-1:t>e?1:0}function Nt(t){for(var e=[],n="",i=0,r=t.length;i<r;i++){var o=t[i];"."===o?i>0&&"\\"===t[i-1]?n=n.substring(0,n.length-1)+".":(e.push(n),n=""):n+=o}return e.push(n),e}function Pt(t){return to.indexOf(t)>-1}function Ot(t){return Object.keys(t)[0]}function It(t){return t[Ot(t)]}function jt(t){var e={};return t.forEach(function(t){Object.keys(t).forEach(function(n){var i=t[n];if("object"!=typeof i&&(i={$eq:i}),Pt(n))i instanceof Array?e[n]=i.map(function(t){return jt([t])}):e[n]=jt([i]);else{var r=e[n]=e[n]||{};Object.keys(i).forEach(function(t){var e=i[t];return"$gt"===t||"$gte"===t?Rt(t,e,r):"$lt"===t||"$lte"===t?qt(t,e,r):"$ne"===t?Ft(e,r):"$eq"===t?Bt(e,r):void(r[t]=e)})}})}),e}function Rt(t,e,n){"undefined"==typeof n.$eq&&("undefined"!=typeof n.$gte?"$gte"===t?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):"undefined"!=typeof n.$gt?"$gte"===t?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e)}function qt(t,e,n){"undefined"==typeof n.$eq&&("undefined"!=typeof n.$lte?"$lte"===t?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):"undefined"!=typeof n.$lt?"$lte"===t?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e)}function Ft(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}function Bt(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}function Ut(t){var e=u(t),n=!1;"$and"in e&&(e=jt(e.$and),n=!0),["$or","$nor"].forEach(function(t){t in e&&e[t].forEach(function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n],r=t[i];"object"==typeof r&&null!==r||(t[i]={$eq:r})}})}),"$not"in e&&(e.$not=jt([e.$not]));for(var i=Object.keys(e),r=0;r<i.length;r++){var o=i[r],s=e[o];"object"!=typeof s||null===s?s={$eq:s}:"$ne"in s&&!n&&(s.$ne=[s.$ne]),e[o]=s}return e}function zt(t,e,n){for(var i="",r=n-t.length;i.length<r;)i+=e;return i}function Vt(t,e,n){var i=zt(t,e,n);return i+t}function Ht(t,e){if(t===e)return 0;t=Wt(t),e=Wt(e);var n=ee(t),i=ee(e);if(n-i!==0)return n-i;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return Qt(t,e)}return Array.isArray(t)?Jt(t,e):te(t,e)}function Wt(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-(1/0)||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var i=0;i<n;i++)t[i]=Wt(e[i])}else{if(t instanceof Date)return t.toJSON();if(null!==t){t={};for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];"undefined"!=typeof o&&(t[r]=Wt(o))}}}}return t}function Zt(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return ne(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),i=-1,r=n.length,o="";if(e)for(;++i<r;)o+=Gt(n[i]);else for(;++i<r;){var s=n[i];o+=Gt(s)+Gt(t[s])}return o}return""}function Gt(t){var e="\0";return t=Wt(t),ee(t)+io+Zt(t)+e}function Yt(t,e){var n,i=e,r="1"===t[e];if(r)n=0,e++;else{var o="0"===t[e];e++;var s="",a=t.substring(e,e+no),u=parseInt(a,10)+eo;for(o&&(u=-u),e+=no;;){var l=t[e];if("\0"===l)break;s+=l,e++}s=s.split("."),n=1===s.length?parseInt(s,10):parseFloat(s[0]+"."+s[1]),o&&(n-=10),0!==u&&(n=parseFloat(n+"e"+u))}return{num:n,length:e-i}}function Xt(t,e){var n=t.pop();if(e.length){var i=e[e.length-1];n===i.element&&(e.pop(),i=e[e.length-1]);var r=i.element,o=i.index;if(Array.isArray(r))r.push(n);else if(o===t.length-2){var s=t.pop();r[s]=n}else t.push(n)}}function Kt(t){for(var e=[],n=[],i=0;;){var r=t[i++];if("\0"!==r)switch(r){case"1":e.push(null);break;case"2":e.push("1"===t[i]),i++;break;case"3":var o=Yt(t,i);e.push(o.num),i+=o.length;break;case"4":for(var s="";;){var a=t[i];if("\0"===a)break;s+=a,i++}s=s.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(s);break;case"5":var u={element:[],index:e.length};e.push(u.element),n.push(u);break;case"6":var l={element:{},index:e.length};e.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+r)}else{if(1===e.length)return e.pop();Xt(e,n)}}}function Jt(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=Ht(t[i],e[i]);if(0!==r)return r}return t.length===e.length?0:t.length>e.length?1:-1}function Qt(t,e){return t===e?0:t>e?1:-1}function te(t,e){for(var n=Object.keys(t),i=Object.keys(e),r=Math.min(n.length,i.length),o=0;o<r;o++){var s=Ht(n[o],i[o]);if(0!==s)return s;if(s=Ht(t[n[o]],e[i[o]]),0!==s)return s}return n.length===i.length?0:n.length>i.length?1:-1}function ee(t){var e=["boolean","number","string","object"],n=e.indexOf(typeof t);return~n?null===t?1:Array.isArray(t)?5:n<3?n+2:n+3:Array.isArray(t)?5:void 0}function ne(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),i=t<0,r=i?"0":"2",o=(i?-n:n)-eo,s=Vt(o.toString(),"0",no);r+=io+s;var a=Math.abs(parseFloat(e[0]));i&&(a=10-a);var u=a.toFixed(20);return u=u.replace(/\.?0+$/,""),r+=io+u}function ie(t){function e(e){return t.map(function(t){var n=Ot(t),i=Nt(n),r=Mt(e,i);return r})}return function(t,n){var i=e(t.doc),r=e(n.doc),o=Ht(i,r);return 0!==o?o:At(t.doc._id,n.doc._id)}}function re(t,e,n){if(t=t.filter(function(t){return oe(t.doc,e.selector,n)}),e.sort){var i=ie(e.sort);t=t.sort(i),"string"!=typeof e.sort[0]&&"desc"===It(e.sort[0])&&(t=t.reverse())}if("limit"in e||"skip"in e){var r=e.skip||0,o=("limit"in e?e.limit:t.length)+r;t=t.slice(r,o)}return t}function oe(t,e,n){return n.every(function(n){var i=e[n],r=Nt(n),o=Mt(t,r);return Pt(n)?ae(n,i,t):se(i,t,r,o)})}function se(t,e,n,i){return!t||Object.keys(t).every(function(r){var o=t[r];return ue(r,e,o,n,i)})}function ae(t,e,n){return"$or"===t?e.some(function(t){return oe(n,t,Object.keys(t))}):"$not"===t?!oe(n,e,Object.keys(e)):!e.find(function(t){return oe(n,t,Object.keys(t))})}function ue(t,e,n,i,r){if(!ro[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return ro[t](e,n,i,r)}function le(t){return"undefined"!=typeof t&&null!==t}function ce(t){return"undefined"!=typeof t}function he(t,e){var n=e[0],i=e[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(i,10)!==i)throw new Error("Modulus is not an integer");return parseInt(t,10)===t&&t%n===i}function de(t,e){return e.some(function(e){return t instanceof Array?t.indexOf(e)>-1:t===e})}function pe(t,e){return e.every(function(e){return t.indexOf(e)>-1})}function fe(t,e){return t.length===e}function me(t,e){var n=new RegExp(e);return n.test(t)}function ge(t,e){switch(e){case"null":return null===t;case"boolean":return"boolean"==typeof t;case"number":return"number"==typeof t;case"string":return"string"==typeof t;case"array":return t instanceof Array;case"object":return"[object Object]"==={}.toString.call(t)}throw new Error(e+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}function ve(t,e){if("object"!=typeof e)throw new Error("Selector error: expected a JSON object");e=Ut(e);var n={doc:t},i=re([n],{selector:e},Object.keys(e));return i&&1===i.length}function ye(t){return U('"use strict";\nreturn '+t+";",{})}function _e(t){var e=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+t+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n");return U(e,{})}function be(t,e){if(t.selector&&t.filter&&"_selector"!==t.filter){var n="string"==typeof t.filter?t.filter:"function";return e(new Error('selector invalid for filter "'+n+'"'))}e()}function we(t){t.view&&!t.filter&&(t.filter="_view"),t.selector&&!t.filter&&(t.filter="_selector"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=F(t.view):t.filter=F(t.filter))}function xe(t,e){return e.filter&&"string"==typeof e.filter&&!e.doc_ids&&!j(t.db)}function ke(t,e){var n=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var i=M(Br,"`view` filter parameter not found or invalid.");return n(i)}var r=q(e.view);t.db.get("_design/"+r[0],function(i,o){if(t.isCancelled)return n(null,{status:"cancelled"});if(i)return n(A(i));var s=o&&o.views&&o.views[r[1]]&&o.views[r[1]].map;return s?(e.filter=_e(s),void t.doChanges(e)):n(M(Ar,o.views?"missing json key: "+r[1]:"missing json key: views"))})}else if(e.selector)e.filter=function(t){return ve(t,e.selector)},t.doChanges(e);else{var o=q(e.filter);t.db.get("_design/"+o[0],function(i,r){if(t.isCancelled)return n(null,{status:"cancelled"});if(i)return n(A(i));var s=r&&r.filters&&r.filters[o[1]];return s?(e.filter=ye(s),void t.doChanges(e)):n(M(Ar,r&&r.filters?"missing json key: "+o[1]:"missing json key: filters"))})}}function $e(t){t._changesFilterPlugin={validate:be,normalize:we,shouldFilter:xe,filter:ke}}function Ee(t){return t.reduce(function(t,e){return t[e]=!0,t},{})}function Ce(t){if(!/^\d+-./.test(t))return M(Hr);var e=t.indexOf("-"),n=t.substring(0,e),i=t.substring(e+1);return{prefix:parseInt(n,10),id:i}}function Te(t,e){for(var n=t.start-t.ids.length+1,i=t.ids,r=[i[0],e,[]],o=1,s=i.length;o<s;o++)r=[i[o],{status:"missing"},[r]];return[{pos:n,ids:r}]}function Le(t,e){var n,i,r,o={status:"available"};if(t._deleted&&(o.deleted=!0),e)if(t._id||(t._id=Kr()),i=H(),t._rev){if(r=Ce(t._rev),r.error)return r;t._rev_tree=[{pos:r.prefix,ids:[r.id,{status:"missing"},[[i,o,[]]]]}],n=r.prefix+1}else t._rev_tree=[{pos:1,ids:[i,o,[]]}],n=1;else if(t._revisions&&(t._rev_tree=Te(t._revisions,o),n=t._revisions.start,i=t._revisions.ids[0]),!t._rev_tree){if(r=Ce(t._rev),r.error)return r;n=r.prefix,i=r.id,t._rev_tree=[{pos:n,ids:[i,o,[]]}]}I(t._id),t._rev=n+"-"+i;var s={metadata:{},data:{}};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u="_"===a[0];if(u&&!so[a]){var l=M(Fr,a);throw l.message=Fr.message+": "+a,l}u&&!ao[a]?s.metadata[a.slice(1)]=t[a]:s.data[a]=t[a]}return s}function Se(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(n){if("TypeError"!==n.name)throw n;for(var i="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new i,o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(e.type)}}function De(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n}function Me(t,e){return Se([De(t)],{type:e})}function Ae(t,e){return Me(uo(t),e)}function Ne(t){for(var e="",n=new Uint8Array(t),i=n.byteLength,r=0;r<i;r++)e+=String.fromCharCode(n[r]);return e}function Pe(t,e){if("undefined"==typeof FileReader)return e(Ne((new FileReaderSync).readAsArrayBuffer(t)));var n=new FileReader,i="function"==typeof n.readAsBinaryString;n.onloadend=function(t){var n=t.target.result||"";return i?e(n):void e(Ne(n))},i?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function Oe(t,e){Pe(t,function(t){e(t)})}function Ie(t,e){Oe(t,function(t){e(lo(t))})}function je(t,e){if("undefined"==typeof FileReader)return e((new FileReaderSync).readAsArrayBuffer(t));var n=new FileReader;n.onloadend=function(t){var n=t.target.result||new ArrayBuffer(0);e(n)},n.readAsArrayBuffer(t)}function Re(t){return lo(t)}function qe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.slice(e,n)}function Fe(t,e,n,i,r){(n>0||i<e.size)&&(e=qe(e,n,i)),je(e,function(e){t.append(e),r()})}function Be(t,e,n,i,r){(n>0||i<e.length)&&(e=e.substring(n,i)),t.appendBinary(e),r()}function Ue(t,e){function n(){co(r)}function i(){var t=c.end(!0),n=Re(t);e(n),c.destroy()}function r(){var e=l*a,r=e+a;l++,l<u?h(c,t,e,r,n):h(c,t,e,r,i)}var o="string"==typeof t,s=o?t.length:t.size,a=Math.min(ho,s),u=Math.ceil(s/a),l=0,c=o?new _r:new _r.ArrayBuffer,h=o?Be:Fe;r()}function ze(t){return _r.hash(t)}function Ve(t){try{return uo(t)}catch(e){var n=M(Rr,"Attachment is not a valid base64 string");return{error:n}}}function He(t,e,n){var i=Ve(t.data);return i.error?n(i.error):(t.length=i.length,"blob"===e?t.data=Me(i,t.content_type):"base64"===e?t.data=lo(i):t.data=i,void Ue(i,function(e){t.digest="md5-"+e,n()}))}function We(t,e,n){Ue(t.data,function(i){t.digest="md5-"+i,t.length=t.data.size||t.data.length||0,"binary"===e?Oe(t.data,function(e){t.data=e,n()}):"base64"===e?Ie(t.data,function(e){t.data=e,n()}):n()})}function Ze(t,e,n){return t.stub?n():void("string"==typeof t.data?He(t,e,n):We(t,e,n))}function Ge(t,e,n){function i(){o++,t.length===o&&(r?n(r):n())}if(!t.length)return n();var r,o=0;t.forEach(function(t){function n(t){r=t,s++,s===o.length&&i()}var o=t.data&&t.data._attachments?Object.keys(t.data._attachments):[],s=0;if(!o.length)return i();for(var a in t.data._attachments)t.data._attachments.hasOwnProperty(a)&&Ze(t.data._attachments[a],e,n)})}function Ye(t,e,n,i,r,o,s,a){if(ut(e.rev_tree,n.metadata.rev))return i[r]=n,o();var u=e.winningRev||W(e),l="deleted"in e?e.deleted:ct(e,u),c="deleted"in n.metadata?n.metadata.deleted:ct(n.metadata),h=/^1-/.test(n.metadata.rev);if(l&&!c&&a&&h){var d=n.data;d._rev=u,d._id=n.metadata.id,n=Le(d,a)}var p=at(e.rev_tree,n.metadata.rev_tree[0],t),f=a&&(l&&c&&"new_leaf"!==p.conflicts||!l&&"new_leaf"!==p.conflicts||l&&!c&&"new_branch"===p.conflicts);if(f){var m=M(Nr);return i[r]=m,o()}var g=n.metadata.rev;n.metadata.rev_tree=p.tree,n.stemmedRevs=p.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var v,y=W(n.metadata),_=ct(n.metadata,y),b=l===_?0:l<_?-1:1;v=g===y?_:ct(n.metadata,g),s(n,y,_,v,!0,b,r,o)}function Xe(t){return"missing"===t.metadata.rev_tree[0].ids[1].status}function Ke(t,e,n,i,r,o,s,a,u){function l(t,e,n){var i=W(t.metadata),r=ct(t.metadata,i);if("was_delete"in a&&r)return o[e]=M(Ar,"deleted"),n();var u=h&&Xe(t);if(u){var l=M(Nr);return o[e]=l,n()}var c=r?0:1;s(t,i,r,r,!1,c,e,n)}function c(){++p===f&&u&&u()}t=t||1e3;var h=a.new_edits,d=new Er,p=0,f=e.length;e.forEach(function(t,e){if(t._id&&ht(t._id)){var i=t._deleted?"_removeLocal":"_putLocal";return void n[i](t,{ctx:r},function(t,n){o[e]=t||n,c()})}var s=t.metadata.id;d.has(s)?(f--,d.get(s).push([t,e])):d.set(s,[[t,e]])}),d.forEach(function(e,n){function r(){++u<e.length?a():c()}function a(){var a=e[u],c=a[0],d=a[1];if(i.has(n))Ye(t,i.get(n),c,o,d,r,s,h);else{var p=at([],c.metadata.rev_tree[0],t);c.metadata.rev_tree=p.tree,c.stemmedRevs=p.stemmedRevs||[],l(c,d,r)}}var u=0;a()})}function Je(t){try{return JSON.parse(t)}catch(e){return br.parse(t)}}function Qe(t){try{return JSON.stringify(t)}catch(e){return br.stringify(t)}}function tn(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(M(zr,n,e.type))}}function en(t,e,n){return{data:Qe(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function nn(t){if(!t)return null;var e=Je(t.data);return e.winningRev=t.winningRev,e.deleted="1"===t.deletedOrLocal,e.seq=t.seq,e}function rn(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function on(t,e,n,i){n?i(t?"string"!=typeof t?t:Ae(t,e):Se([""],{type:e})):t?"string"!=typeof t?Pe(t,function(t){i(lo(t))}):i(t):i("")}function sn(t,e,n,i){function r(){++a===s.length&&i&&i()}function o(t,e){var i=t._attachments[e],o=i.digest,s=n.objectStore(go).get(o);s.onsuccess=function(t){i.body=t.target.result.body,r()}}var s=Object.keys(t._attachments||{});if(!s.length)return i&&i();var a=0;s.forEach(function(n){e.attachments&&e.include_docs?o(t,n):(t._attachments[n].stub=!0,r())})}function an(t,e){return wr.all(t.map(function(t){if(t.doc&&t.doc._attachments){var n=Object.keys(t.doc._attachments);return wr.all(n.map(function(n){var i=t.doc._attachments[n];if("body"in i){var r=i.body,o=i.content_type;return new wr(function(s){on(r,o,e,function(e){t.doc._attachments[n]=Dr(y(i,["digest","content_type"]),{data:e}),s()})})}}))}}))}function un(t,e,n){function i(){l--,l||r()}function r(){o.length&&o.forEach(function(t){var e=u.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::￿",!1,!1));e.onsuccess=function(e){var n=e.target.result;n||a["delete"](t)}})}var o=[],s=n.objectStore(mo),a=n.objectStore(go),u=n.objectStore(vo),l=t.length;t.forEach(function(t){var n=s.index("_doc_id_rev"),r=e+"::"+t;n.getKey(r).onsuccess=function(t){var e=t.target.result;if("number"!=typeof e)return i();s["delete"](e);var n=u.index("seq").openCursor(IDBKeyRange.only(e));n.onsuccess=function(t){var e=t.target.result;if(e){var n=e.value.digestSeq.split("::")[0];o.push(n),u["delete"](e.primaryKey),e["continue"]()}else i()}}})}function ln(t,e,n){try{return{txn:t.transaction(e,n)}}catch(i){return{error:i}}}function cn(t,e,n,i,r,o){function s(){var t=[fo,mo,go,_o,vo,yo],e=ln(r,t,"readwrite");return e.error?o(e.error):(_=e.txn,_.onabort=tn(o),_.ontimeout=tn(o),_.oncomplete=h,b=_.objectStore(fo),w=_.objectStore(mo),x=_.objectStore(go),k=_.objectStore(vo),$=_.objectStore(yo),$.get(yo).onsuccess=function(t){C=t.target.result,l()},void p(function(t){return t?(I=!0,o(t)):void c()}))}function a(){A=!0,l()}function u(){Ke(t.revs_limit,T,i,O,_,P,f,n,a)}function l(){C&&A&&(C.docCount+=N,$.put(C))}function c(){function t(){++n===T.length&&u()}function e(e){var n=nn(e.target.result);n&&O.set(n.id,n),t()}if(T.length)for(var n=0,i=0,r=T.length;i<r;i++){var o=T[i];if(o._id&&ht(o._id))t();else{var s=b.get(o.metadata.id);s.onsuccess=e}}}function h(){I||(wo.notify(i._meta.name),o(null,P))}function d(t,e){var n=x.get(t);n.onsuccess=function(n){if(n.target.result)e();else{var i=M(Wr,"unknown stub attachment with digest "+t);i.status=412,e(i)}}}function p(t){function e(){++r===n.length&&t(i)}var n=[];if(T.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(e){var i=t.data._attachments[e];i.stub&&n.push(i.digest)})}),!n.length)return t();var i,r=0;n.forEach(function(t){d(t,function(t){t&&!i&&(i=t),e()})})}function f(t,e,n,i,r,o,s,a){t.metadata.winningRev=e,t.metadata.deleted=n;var u=t.data;u._id=t.metadata.id,u._rev=t.metadata.rev,i&&(u._deleted=!0);var c=u._attachments&&Object.keys(u._attachments).length;return c?g(t,e,n,r,s,a):(N+=o,l(),void m(t,e,n,r,s,a))}function m(t,e,n,r,o,s){function a(o){var s=t.stemmedRevs||[];r&&i.auto_compaction&&(s=s.concat(K(t.metadata))),s&&s.length&&un(s,t.metadata.id,_),h.seq=o.target.result;var a=en(h,e,n),u=b.put(a);u.onsuccess=l}function u(t){t.preventDefault(),t.stopPropagation();var e=w.index("_doc_id_rev"),n=e.getKey(c._doc_id_rev);n.onsuccess=function(t){var e=w.put(c,t.target.result);e.onsuccess=a}}function l(){P[o]={ok:!0,id:h.id,rev:h.rev},O.set(t.metadata.id,t.metadata),v(t,h.seq,s)}var c=t.data,h=t.metadata;c._doc_id_rev=h.id+"::"+h.rev,delete c._id,delete c._rev;
var d=w.put(c);d.onsuccess=a,d.onerror=u}function g(t,e,n,i,r,o){function s(){l===c.length&&m(t,e,n,i,r,o)}function a(){l++,s()}var u=t.data,l=0,c=Object.keys(u._attachments);c.forEach(function(n){var i=t.data._attachments[n];if(i.stub)l++,s();else{var r=i.data;delete i.data,i.revpos=parseInt(e,10);var o=i.digest;y(o,r,a)}})}function v(t,e,n){function i(){++o===s.length&&n()}function r(n){var r=t.data._attachments[n].digest,o=k.put({seq:e,digestSeq:r+"::"+e});o.onsuccess=i,o.onerror=function(t){t.preventDefault(),t.stopPropagation(),i()}}var o=0,s=Object.keys(t.data._attachments||{});if(!s.length)return n();for(var a=0;a<s.length;a++)r(s[a])}function y(t,e,n){var i=x.count(t);i.onsuccess=function(i){var r=i.target.result;if(r)return n();var o={digest:t,body:e},s=x.put(o);s.onsuccess=n}}for(var _,b,w,x,k,$,E,C,T=e.docs,L=0,S=T.length;L<S;L++){var D=T[L];D._id&&ht(D._id)||(D=T[L]=Le(D,n.new_edits),D.error&&!E&&(E=D))}if(E)return o(E);var A=!1,N=0,P=new Array(T.length),O=new Er,I=!1,j=i._meta.blobSupport?"blob":"base64";Ge(T,j,function(t){return t?o(t):void s()})}function hn(t,e,n,i,r){function o(t){c=t.target.result,l&&r(l,c,h)}function s(t){l=t.target.result,c&&r(l,c,h)}function a(){if(!l.length)return r();var n,a=l[l.length-1];if(e&&e.upper)try{n=IDBKeyRange.bound(a,e.upper,!0,e.upperOpen)}catch(u){if("DataError"===u.name&&0===u.code)return r()}else n=IDBKeyRange.lowerBound(a,!0);e=n,l=null,c=null,t.getAll(e,i).onsuccess=o,t.getAllKeys(e,i).onsuccess=s}function u(t){var e=t.target.result;return e?void r([e.key],[e.value],e):r()}var l,c,h,d="function"==typeof t.getAll&&"function"==typeof t.getAllKeys&&i>1&&!n;d?(h={"continue":a},t.getAll(e,i).onsuccess=o,t.getAllKeys(e,i).onsuccess=s):n?t.openCursor(e,"prev").onsuccess=u:t.openCursor(e).onsuccess=u}function dn(t,e,n){function i(t){var e=t.target.result;e?(r.push(e.value),e["continue"]()):n({target:{result:r}})}if("function"==typeof t.getAll)return void(t.getAll(e).onsuccess=n);var r=[];t.openCursor(e).onsuccess=i}function pn(t,e,n){var i=[],r=0;t.forEach(function(o,s){e.get(o).onsuccess=function(e){e.target.result?i[s]=e.target.result:i[s]={key:o,error:"not_found"},r++,r===t.length&&n(t,i,{})}})}function fn(t,e,n,i,r){try{if(t&&e)return r?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return r?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return r?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(i)return IDBKeyRange.only(i)}catch(o){return{error:o}}return null}function mn(t,e,n){function i(t,e){function n(t){var n=t.target.result,i=void 0;return n&&n.key&&(i=n.key),e({target:{result:[i]}})}t.openCursor(null,"prev").onsuccess=n}function r(e,n,i){var r=e.id+"::"+i;L.get(r).onsuccess=function(i){if(n.doc=rn(i.target.result),t.conflicts){var r=X(e);r.length&&(n.doc._conflicts=r)}sn(n.doc,t,x)}}function o(e,n){var i={id:n.id,key:n.id,value:{rev:e}},o=n.deleted;o?g&&(S.push(i),i.value.deleted=!0,i.doc=null):v--<=0&&(S.push(i),t.include_docs&&r(n,i,e))}function s(t){for(var e=0,n=t.length;e<n&&S.length!==y;e++){var i=t[e];if(i.error&&g)S.push(i);else{var r=nn(i),s=r.winningRev;o(s,r)}}}function a(t,e,n){n&&(s(e),S.length<y&&n["continue"]())}function u(e){var n=e.target.result;t.descending&&(n=n.reverse()),s(n)}function l(){var e={total_rows:k,offset:t.skip,rows:S};t.update_seq&&void 0!==$&&(e.update_seq=$),n(null,e)}function c(){t.attachments?an(S,t.binary).then(l):l()}var h,d,p="startkey"in t&&t.startkey,f="endkey"in t&&t.endkey,m="key"in t&&t.key,g="keys"in t&&t.keys,v=t.skip||0,y="number"==typeof t.limit?t.limit:-1,_=t.inclusive_end!==!1;if(!g&&(h=fn(p,f,_,m,t.descending),d=h&&h.error,d&&("DataError"!==d.name||0!==d.code)))return n(M(zr,d.name,d.message));var b=[fo,mo,yo];t.attachments&&b.push(go);var w=ln(e,b,"readonly");if(w.error)return n(w.error);var x=w.txn;x.oncomplete=c,x.onabort=tn(n);var k,$,E=x.objectStore(fo),C=x.objectStore(mo),T=x.objectStore(yo),L=C.index("_doc_id_rev"),S=[];return T.get(yo).onsuccess=function(t){k=t.target.result.docCount},t.update_seq&&i(C,function(t){t.target.result&&t.target.result.length>0&&($=t.target.result[0])}),d||0===y?void 0:g?pn(t.keys,E,a):y===-1?dn(E,h,u):void hn(E,h,t.descending,y+v,a)}function gn(t){return new wr(function(e){var n=Se([""]),i=t.objectStore(bo).put(n,"key");i.onsuccess=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)},t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)}})["catch"](function(){return!1})}function vn(t,e){var n=t.objectStore(fo).index("deletedOrLocal");n.count(IDBKeyRange.only("0")).onsuccess=function(t){e(t.target.result)}}function yn(t,e,n,i){try{t(e,n)}catch(e){i.emit("error",e)}}function _n(){!xo&&ko.length&&(xo=!0,ko.shift()())}function bn(t,e,n){ko.push(function(){t(function(t,i){yn(e,t,i,n),xo=!1,fr(function(){_n(n)})})}),_n()}function wn(t,e,n,i){function r(e,n,i){function r(e,n){var i=t.processChange(n,e,t);d=i.seq=e.seq;var r=w(i);return"object"==typeof r?t.complete(r):void(r&&(b++,f&&_.push(i),t.attachments&&t.include_docs?sn(n,t,m,function(){an([i],t.binary).then(function(){t.onChange(i)})}):t.onChange(i)))}function o(){for(var t=0,e=a.length;t<e&&b!==p;t++){var n=a[t];if(n){var o=u[t];r(o,n)}}b!==p&&i["continue"]()}if(i&&e.length){var a=new Array(e.length),u=new Array(e.length),l=0;n.forEach(function(t,n){var i=rn(t),r=e[n];s(i,r,function(t,i){u[n]=t,a[n]=i,++l===e.length&&o()})})}}function o(t,e,n,i){if(n.seq!==e)return i();if(n.winningRev===t._rev)return i(n,t);var r=t._id+"::"+n.winningRev,o=y.get(r);o.onsuccess=function(t){i(n,rn(t.target.result))}}function s(t,e,n){if(h&&!h.has(t._id))return n();var i=x.get(t._id);return i?o(t,e,i,n):void(v.get(t._id).onsuccess=function(r){i=nn(r.target.result),x.set(t._id,i),o(t,e,i,n)})}function a(){t.complete(null,{results:_,last_seq:d})}function l(){!t.continuous&&t.attachments?an(_).then(a):a()}if(t=u(t),t.continuous){var c=n+":"+Kr();return wo.addListener(n,c,e,t),wo.notify(n),{cancel:function(){wo.removeListener(n,c)}}}var h=t.doc_ids&&new $r(t.doc_ids);t.since=t.since||0;var d=t.since,p="limit"in t?t.limit:-1;0===p&&(p=1);var f;f="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var m,g,v,y,_=[],b=0,w=P(t),x=new Er,k=[fo,mo];t.attachments&&k.push(go);var $=ln(i,k,"readonly");if($.error)return t.complete($.error);m=$.txn,m.onabort=tn(t.complete),m.oncomplete=l,g=m.objectStore(mo),v=m.objectStore(fo),y=g.index("_doc_id_rev");var E=t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null;hn(g,E,t.descending,p,r)}function xn(t,e){var n=this;bn(function(e){kn(n,t,e)},e,n.constructor)}function kn(t,e,n){function i(t){var e=t.createObjectStore(fo,{keyPath:"id"});t.createObjectStore(mo,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore(go,{keyPath:"digest"}),t.createObjectStore(yo,{keyPath:"id",autoIncrement:!1}),t.createObjectStore(bo),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.createObjectStore(_o,{keyPath:"_id"});var n=t.createObjectStore(vo,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}function r(t,e){var n=t.objectStore(fo);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(t){var i=t.target.result;if(i){var r=i.value,o=ct(r);r.deletedOrLocal=o?"1":"0",n.put(r),i["continue"]()}else e()}}function o(t){t.createObjectStore(_o,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function s(t,e){var n=t.objectStore(_o),i=t.objectStore(fo),r=t.objectStore(mo),o=i.openCursor();o.onsuccess=function(t){var o=t.target.result;if(o){var s=o.value,a=s.id,u=ht(a),l=W(s);if(u){var c=a+"::"+l,h=a+"::",d=a+"::~",p=r.index("_doc_id_rev"),f=IDBKeyRange.bound(h,d,!1,!1),m=p.openCursor(f);m.onsuccess=function(t){if(m=t.target.result){var e=m.value;e._doc_id_rev===c&&n.put(e),r["delete"](m.primaryKey),m["continue"]()}else i["delete"](o.primaryKey),o["continue"]()}}else o["continue"]()}else e&&e()}}function a(t){var e=t.createObjectStore(vo,{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}function u(t,e){var n=t.objectStore(mo),i=t.objectStore(go),r=t.objectStore(vo),o=i.count();o.onsuccess=function(t){var i=t.target.result;return i?void(n.openCursor().onsuccess=function(t){var n=t.target.result;if(!n)return e();for(var i=n.value,o=n.primaryKey,s=Object.keys(i._attachments||{}),a={},u=0;u<s.length;u++){var l=i._attachments[s[u]];a[l.digest]=!0}var c=Object.keys(a);for(u=0;u<c.length;u++){var h=c[u];r.put({seq:o,digestSeq:h+"::"+o})}n["continue"]()}):e()}}function l(t){function e(t){return t.data?nn(t):(t.deleted="1"===t.deletedOrLocal,t)}var n=t.objectStore(mo),i=t.objectStore(fo),r=i.openCursor();r.onsuccess=function(t){function r(){var t=a.id+"::",e=a.id+"::￿",i=n.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,e)),r=0;i.onsuccess=function(t){var e=t.target.result;if(!e)return a.seq=r,o();var n=e.primaryKey;n>r&&(r=n),e["continue"]()}}function o(){var t=en(a,a.winningRev,a.deleted),e=i.put(t);e.onsuccess=function(){s["continue"]()}}var s=t.target.result;if(s){var a=e(s.value);return a.winningRev=a.winningRev||W(a),a.seq?o():void r()}}}var h=e.name,d=null;t._meta=null,t._remote=!1,t.type=function(){return"idb"},t._id=c(function(e){e(null,t._meta.instanceId)}),t._bulkDocs=function(n,i,r){cn(e,n,i,t,d,r)},t._get=function(t,e,n){function i(){n(s,{doc:r,metadata:o,ctx:a})}var r,o,s,a=e.ctx;if(!a){var u=ln(d,[fo,mo,go],"readonly");if(u.error)return n(u.error);a=u.txn}a.objectStore(fo).get(t).onsuccess=function(t){if(o=nn(t.target.result),!o)return s=M(Ar,"missing"),i();var n;if(e.rev)n=e.latest?dt(e.rev,o):e.rev;else{n=o.winningRev;var u=ct(o);if(u)return s=M(Ar,"deleted"),i()}var l=a.objectStore(mo),c=o.id+"::"+n;l.index("_doc_id_rev").get(c).onsuccess=function(t){return r=t.target.result,r&&(r=rn(r)),r?void i():(s=M(Ar,"missing"),i())}}},t._getAttachment=function(t,e,n,i,r){var o;if(i.ctx)o=i.ctx;else{var s=ln(d,[fo,mo,go],"readonly");if(s.error)return r(s.error);o=s.txn}var a=n.digest,u=n.content_type;o.objectStore(go).get(a).onsuccess=function(t){var e=t.target.result.body;on(e,u,i.binary,function(t){r(null,t)})}},t._info=function(e){var n,i,r=ln(d,[yo,mo],"readonly");if(r.error)return e(r.error);var o=r.txn;o.objectStore(yo).get(yo).onsuccess=function(t){i=t.target.result.docCount},o.objectStore(mo).openCursor(null,"prev").onsuccess=function(t){var e=t.target.result;n=e?e.key:0},o.oncomplete=function(){e(null,{doc_count:i,update_seq:n,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(t,e){mn(t,d,e)},t._changes=function(e){return wn(e,t,h,d)},t._close=function(t){d.close(),$o["delete"](h),t()},t._getRevisionTree=function(t,e){var n=ln(d,[fo],"readonly");if(n.error)return e(n.error);var i=n.txn,r=i.objectStore(fo).get(t);r.onsuccess=function(t){var n=nn(t.target.result);n?e(null,n.rev_tree):e(M(Ar))}},t._doCompaction=function(t,e,n){var i=[fo,mo,go,vo],r=ln(d,i,"readwrite");if(r.error)return n(r.error);var o=r.txn,s=o.objectStore(fo);s.get(t).onsuccess=function(n){var i=nn(n.target.result);Z(i.rev_tree,function(t,n,i,r,o){var s=n+"-"+i;e.indexOf(s)!==-1&&(o.status="missing")}),un(e,t,o);var r=i.winningRev,s=i.deleted;o.objectStore(fo).put(en(i,r,s))},o.onabort=tn(n),o.oncomplete=function(){n()}},t._getLocal=function(t,e){var n=ln(d,[_o],"readonly");if(n.error)return e(n.error);var i=n.txn,r=i.objectStore(_o).get(t);r.onerror=tn(e),r.onsuccess=function(t){var n=t.target.result;n?(delete n._doc_id_rev,e(null,n)):e(M(Ar))}},t._putLocal=function(t,e,n){"function"==typeof e&&(n=e,e={}),delete t._revisions;var i=t._rev,r=t._id;i?t._rev="0-"+(parseInt(i.split("-")[1],10)+1):t._rev="0-1";var o,s=e.ctx;if(!s){var a=ln(d,[_o],"readwrite");if(a.error)return n(a.error);s=a.txn,s.onerror=tn(n),s.oncomplete=function(){o&&n(null,o)}}var u,l=s.objectStore(_o);i?(u=l.get(r),u.onsuccess=function(r){var s=r.target.result;if(s&&s._rev===i){var a=l.put(t);a.onsuccess=function(){o={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,o)}}else n(M(Nr))}):(u=l.add(t),u.onerror=function(t){n(M(Nr)),t.preventDefault(),t.stopPropagation()},u.onsuccess=function(){o={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,o)})},t._removeLocal=function(t,e,n){"function"==typeof e&&(n=e,e={});var i=e.ctx;if(!i){var r=ln(d,[_o],"readwrite");if(r.error)return n(r.error);i=r.txn,i.oncomplete=function(){o&&n(null,o)}}var o,s=t._id,a=i.objectStore(_o),u=a.get(s);u.onerror=tn(n),u.onsuccess=function(i){var r=i.target.result;r&&r._rev===t._rev?(a["delete"](s),o={ok:!0,id:s,rev:"0-0"},e.ctx&&n(null,o)):n(M(Ar))}},t._destroy=function(t,e){wo.removeAllListeners(h);var n=Eo.get(h);n&&n.result&&(n.result.close(),$o["delete"](h));var i=indexedDB.deleteDatabase(h);i.onsuccess=function(){Eo["delete"](h),k()&&h in localStorage&&delete localStorage[h],e(null,{ok:!0})},i.onerror=tn(e)};var p=$o.get(h);if(p)return d=p.idb,t._meta=p.global,fr(function(){n(null,t)});var f;f=e.storage?$n(h,e.storage):indexedDB.open(h,po),Eo.set(h,f),f.onupgradeneeded=function(t){function e(){var t=h[d-1];d++,t&&t(c,e)}var n=t.target.result;if(t.oldVersion<1)return i(n);var c=t.currentTarget.transaction;t.oldVersion<3&&o(n),t.oldVersion<4&&a(n);var h=[r,s,u,l],d=t.oldVersion;e()},f.onsuccess=function(e){function i(){"undefined"!=typeof a&&c&&(t._meta={name:h,instanceId:u,blobSupport:a},$o.set(h,{idb:d,global:t._meta}),n(null,t))}function r(){if("undefined"!=typeof s&&"undefined"!=typeof o){var t=h+"_id";t in o?u=o[t]:o[t]=u=Kr(),o.docCount=s,l.objectStore(yo).put(o)}}d=e.target.result,d.onversionchange=function(){d.close(),$o["delete"](h)},d.onabort=function(t){C("error","Database has a global failure",t.target.error),d.close(),$o["delete"](h)};var o,s,a,u,l=d.transaction([yo,bo,fo],"readwrite"),c=!1;l.objectStore(yo).get(yo).onsuccess=function(t){o=t.target.result||{id:yo},r()},vn(l,function(t){s=t,r()}),oo||(oo=gn(l)),oo.then(function(t){a=t,i()}),l.oncomplete=function(){c=!0,i()},l.onabort=tn(n)},f.onerror=function(){var t="Failed to open indexedDB, are you in private browsing mode?";C("error",t),n(M(zr,t))}}function $n(t,e){try{return indexedDB.open(t,{version:po,storage:e})}catch(n){return indexedDB.open(t,po)}}function En(t){t.adapter("idb",xn,!0)}function Cn(t){return decodeURIComponent(escape(t))}function Tn(t){return t<65?t-48:t-55}function Ln(t,e,n){for(var i="";e<n;)i+=String.fromCharCode(Tn(t.charCodeAt(e++))<<4|Tn(t.charCodeAt(e++)));return i}function Sn(t,e,n){for(var i="";e<n;)i+=String.fromCharCode(Tn(t.charCodeAt(e+2))<<12|Tn(t.charCodeAt(e+3))<<8|Tn(t.charCodeAt(e))<<4|Tn(t.charCodeAt(e+1))),e+=4;return i}function Dn(t,e){return"UTF-8"===e?Cn(Ln(t,0,t.length)):Sn(t,0,t.length)}function Mn(t){return"'"+t+"'"}function An(t){return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function Nn(t){return t.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function Pn(t){return delete t._id,delete t._rev,JSON.stringify(t)}function On(t,e,n){return t=JSON.parse(t),t._id=e,t._rev=n,t}function In(t){for(var e="(";t--;)e+="?",t&&(e+=",");return e+")"}function jn(t,e,n,i,r){return"SELECT "+t+" FROM "+("string"==typeof e?e:e.join(" JOIN "))+(n?" ON "+n:"")+(i?" WHERE "+("string"==typeof i?i:i.join(" AND ")):"")+(r?" ORDER BY "+r:"")}function Rn(t,e,n){function i(){++o===t.length&&r()}function r(){if(s.length){var t="SELECT DISTINCT digest AS digest FROM "+Ao+" WHERE seq IN "+In(s.length);n.executeSql(t,s,function(t,e){for(var n=[],i=0;i<e.rows.length;i++)n.push(e.rows.item(i).digest);if(n.length){var r="DELETE FROM "+Ao+" WHERE seq IN ("+s.map(function(){return"?"}).join(",")+")";t.executeSql(r,s,function(t){var e="SELECT digest FROM "+Ao+" WHERE digest IN ("+n.map(function(){return"?"}).join(",")+")";t.executeSql(e,n,function(t,e){for(var i=new $r,r=0;r<e.rows.length;r++)i.add(e.rows.item(r).digest);n.forEach(function(e){i.has(e)||(t.executeSql("DELETE FROM "+Ao+" WHERE digest=?",[e]),t.executeSql("DELETE FROM "+So+" WHERE digest=?",[e]))})})})}})}}if(t.length){var o=0,s=[];t.forEach(function(t){var r="SELECT seq FROM "+Lo+" WHERE doc_id=? AND rev=?";n.executeSql(r,[e,t],function(t,e){if(!e.rows.length)return i();var n=e.rows.item(0).seq;s.push(n),t.executeSql("DELETE FROM "+Lo+" WHERE seq=?",[n],i)})})}}function qn(t){return function(e){C("error","WebSQL threw an error",e);var n=e&&e.constructor.toString().match(/function ([^(]+)/),i=n&&n[1]||e.type,r=e.target||e.message;t(M(Vr,r,i))}}function Fn(t){if("size"in t)return 1e6*t.size;var e="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent);return e?5e6:1}function Bn(t,e,n,i,r,o,s){function a(){return _?s(_):(o.notify(i._name),void s(null,b))}function u(t,e){var n="SELECT count(*) as cnt FROM "+So+" WHERE digest=?";y.executeSql(n,[t],function(n,i){if(0===i.rows.item(0).cnt){var r=M(Wr,"unknown stub attachment with digest "+t);e(r)}else e()})}function l(t){function e(){++r===n.length&&t(i)}var n=[];if(g.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(e){var i=t.data._attachments[e];i.stub&&n.push(i.digest)})}),!n.length)return t();var i,r=0;n.forEach(function(t){u(t,function(t){t&&!i&&(i=t),e()})})}function c(t,e,n,r,o,s,a,u){function l(){function e(t,e){function i(){return++o===s.length&&e(),!1}function r(e){var r="INSERT INTO "+Ao+" (digest, seq) VALUES (?,?)",o=[n._attachments[e].digest,t];y.executeSql(r,o,i,i)}var o=0,s=Object.keys(n._attachments||{});if(!s.length)return e();for(var a=0;a<s.length;a++)r(s[a])}var n=t.data,i=r?1:0,o=n._id,s=n._rev,a=Pn(n),u="INSERT INTO "+Lo+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",l=[o,s,a,i];y.executeSql(u,l,function(t,n){var i=n.insertId;e(i,function(){d(t,i)})},function(){var t=jn("seq",Lo,null,"doc_id=? AND rev=?");return y.executeSql(t,[o,s],function(t,n){var r=n.rows.item(0).seq,u="UPDATE "+Lo+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",l=[a,i,o,s];t.executeSql(u,l,function(t){e(r,function(){d(t,r)})})}),!1})}function c(t){f||(t?(f=t,u(f)):m===g.length&&l())}function h(t){m++,c(t)}function d(n,r){var s=t.metadata.id,l=t.stemmedRevs||[];o&&i.auto_compaction&&(l=K(t.metadata).concat(l)),l.length&&Rn(l,s,n),t.metadata.seq=r;var c=t.metadata.rev;delete t.metadata.rev;var h=o?"UPDATE "+To+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+Lo+" WHERE doc_id="+To+".id AND rev=?) WHERE id=?":"INSERT INTO "+To+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",d=Qe(t.metadata),p=o?[d,r,e,s]:[s,r,r,d];n.executeSql(h,p,function(){b[a]={ok:!0,id:t.metadata.id,rev:c},w.set(s,t.metadata),u()})}var f=null,m=0;t.data._id=t.metadata.id,t.data._rev=t.metadata.rev;var g=Object.keys(t.data._attachments||{});r&&(t.data._deleted=!0),g.forEach(function(n){var i=t.data._attachments[n];if(i.stub)m++,c();else{var r=i.data;delete i.data,i.revpos=parseInt(e,10);var o=i.digest;p(o,r,h)}}),g.length||l()}function h(){Ke(t.revs_limit,g,i,w,y,b,c,n)}function d(t){function e(){++n===g.length&&t()}if(!g.length)return t();var n=0;g.forEach(function(t){if(t._id&&ht(t._id))return e();var n=t.metadata.id;y.executeSql("SELECT json FROM "+To+" WHERE id = ?",[n],function(t,i){if(i.rows.length){var r=Je(i.rows.item(0).json);w.set(n,r)}e()})})}function p(t,e,n){var i="SELECT digest FROM "+So+" WHERE digest=?";y.executeSql(i,[t],function(r,o){return o.rows.length?n():(i="INSERT INTO "+So+" (digest, body, escaped) VALUES (?,?,1)",void r.executeSql(i,[t,An(e)],function(){n()},function(){return n(),!1}))})}var f=n.new_edits,m=e.docs,g=m.map(function(t){if(t._id&&ht(t._id))return t;var e=Le(t,f);return e}),v=g.filter(function(t){return t.error});if(v.length)return s(v[0]);var y,_,b=new Array(g.length),w=new Er;Ge(g,"binary",function(t){return t?s(t):void r.transaction(function(t){y=t,l(function(t){t?_=t:d(h)})},qn(s),a)})}function Un(t){return t.websql(t.name,t.version,t.description,t.size)}function zn(t){try{return{db:Un(t)}}catch(e){return{error:e}}}function Vn(t){var e=No.get(t.name);return e||(e=zn(t),No.set(t.name,e)),e}function Hn(t,e,n,i,r){function o(){++u===a.length&&r&&r()}function s(t,r){var s=t._attachments[r],a={binary:e.binary,ctx:i};n._getAttachment(t._id,r,s,a,function(e,n){t._attachments[r]=Dr(y(s,["digest","content_type"]),{data:n}),o()})}var a=Object.keys(t._attachments||{});if(!a.length)return r&&r();var u=0;a.forEach(function(n){e.attachments&&e.include_docs?s(t,n):(t._attachments[n].stub=!0,o())})}function Wn(t,e){function n(){k()&&(window.localStorage["_pouch__websqldb_"+b._name]=!0),e(null,b)}function i(t,e){t.executeSql(Ro),t.executeSql("ALTER TABLE "+Lo+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){t.executeSql(Io),t.executeSql("ALTER TABLE "+To+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){t.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+To+" (local, id)");var n="SELECT "+To+".winningseq AS seq, "+To+".json AS metadata FROM "+Lo+" JOIN "+To+" ON "+Lo+".seq = "+To+".winningseq";t.executeSql(n,[],function(t,n){for(var i=[],r=[],o=0;o<n.rows.length;o++){var s=n.rows.item(o),a=s.seq,u=JSON.parse(s.metadata);ct(u)&&i.push(a),ht(u.id)&&r.push(u.id)}t.executeSql("UPDATE "+To+"SET local = 1 WHERE id IN "+In(r.length),r,function(){t.executeSql("UPDATE "+Lo+" SET deleted = 1 WHERE seq IN "+In(i.length),i,e)})})})})}function r(t,e){var n="CREATE TABLE IF NOT EXISTS "+Do+" (id UNIQUE, rev, json)";t.executeSql(n,[],function(){var n="SELECT "+To+".id AS id, "+Lo+".json AS data FROM "+Lo+" JOIN "+To+" ON "+Lo+".seq = "+To+".winningseq WHERE local = 1";t.executeSql(n,[],function(t,n){function i(){if(!r.length)return e(t);var n=r.shift(),o=JSON.parse(n.data)._rev;t.executeSql("INSERT INTO "+Do+" (id, rev, json) VALUES (?,?,?)",[n.id,o,n.data],function(t){t.executeSql("DELETE FROM "+To+" WHERE id=?",[n.id],function(t){t.executeSql("DELETE FROM "+Lo+" WHERE seq=?",[n.seq],function(){i()})})})}for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o));i()})})}function o(t,e){function n(n){function i(){if(!n.length)return e(t);var r=n.shift(),o=Dn(r.hex,_),s=o.lastIndexOf("::"),a=o.substring(0,s),u=o.substring(s+2),l="UPDATE "+Lo+" SET doc_id=?, rev=? WHERE doc_id_rev=?";t.executeSql(l,[a,u,o],function(){i()})}i()}var i="ALTER TABLE "+Lo+" ADD COLUMN doc_id";t.executeSql(i,[],function(t){var e="ALTER TABLE "+Lo+" ADD COLUMN rev";t.executeSql(e,[],function(t){t.executeSql(jo,[],function(t){var e="SELECT hex(doc_id_rev) as hex FROM "+Lo;t.executeSql(e,[],function(t,e){for(var i=[],r=0;r<e.rows.length;r++)i.push(e.rows.item(r));n(i)})})})})}function s(t,e){function n(t){var n="SELECT COUNT(*) AS cnt FROM "+So;t.executeSql(n,[],function(t,n){function i(){var n=jn(Uo+", "+To+".id AS id",[To,Lo],Bo,null,To+".id ");n+=" LIMIT "+s+" OFFSET "+o,o+=s,t.executeSql(n,[],function(t,n){function r(t,e){var n=o[t]=o[t]||[];n.indexOf(e)===-1&&n.push(e)}if(!n.rows.length)return e(t);for(var o={},s=0;s<n.rows.length;s++)for(var a=n.rows.item(s),u=On(a.data,a.id,a.rev),l=Object.keys(u._attachments||{}),c=0;c<l.length;c++){var h=u._attachments[l[c]];r(h.digest,a.seq)}var d=[];if(Object.keys(o).forEach(function(t){var e=o[t];e.forEach(function(e){d.push([t,e])})}),!d.length)return i();var p=0;d.forEach(function(e){var n="INSERT INTO "+Ao+" (digest, seq) VALUES (?,?)";t.executeSql(n,e,function(){++p===d.length&&i()})})})}var r=n.rows.item(0).cnt;if(!r)return e(t);var o=0,s=10;i()})}var i="CREATE TABLE IF NOT EXISTS "+Ao+" (digest, seq INTEGER)";t.executeSql(i,[],function(t){t.executeSql(Fo,[],function(t){t.executeSql(qo,[],n)})})}function a(t,e){var n="ALTER TABLE "+So+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";t.executeSql(n,[],e)}function l(t,e){var n="ALTER TABLE "+To+" ADD COLUMN max_seq INTEGER";t.executeSql(n,[],function(t){var n="UPDATE "+To+" SET max_seq=(SELECT MAX(seq) FROM "+Lo+" WHERE doc_id=id)";t.executeSql(n,[],function(t){var n="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+To+" (max_seq)";t.executeSql(n,[],e)})})}function h(t,e){t.executeSql('SELECT HEX("a") AS hex',[],function(t,n){var i=n.rows.item(0).hex;_=2===i.length?"UTF-8":"UTF-16",e()})}function d(){for(;$.length>0;){var t=$.pop();t(null,w)}}function p(t,e){if(0===e){var n="CREATE TABLE IF NOT EXISTS "+Mo+" (dbid, db_version INTEGER)",u="CREATE TABLE IF NOT EXISTS "+So+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",c="CREATE TABLE IF NOT EXISTS "+Ao+" (digest, seq INTEGER)",h="CREATE TABLE IF NOT EXISTS "+To+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",p="CREATE TABLE IF NOT EXISTS "+Lo+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",f="CREATE TABLE IF NOT EXISTS "+Do+" (id UNIQUE, rev, json)";t.executeSql(u),t.executeSql(f),t.executeSql(c,[],function(){t.executeSql(qo),t.executeSql(Fo)}),t.executeSql(h,[],function(){t.executeSql(Ro),t.executeSql(p,[],function(){t.executeSql(Io),t.executeSql(jo),t.executeSql(n,[],function(){var e="INSERT INTO "+Mo+" (db_version, dbid) VALUES (?,?)";w=Kr();var n=[Co,w];t.executeSql(e,n,function(){d()})})})})}else{var m=function(){var n=e<Co;n&&t.executeSql("UPDATE "+Mo+" SET db_version = "+Co);var i="SELECT dbid FROM "+Mo;t.executeSql(i,[],function(t,e){w=e.rows.item(0).dbid,d()})},g=[i,r,o,s,a,l,m],v=e,y=function(t){g[v-1](t,y),v++};y(t)}}function f(){T.transaction(function(t){h(t,function(){m(t)})},qn(e),n)}function m(t){var e="SELECT sql FROM sqlite_master WHERE tbl_name = "+Mo;t.executeSql(e,[],function(t,e){e.rows.length?/db_version/.test(e.rows.item(0).sql)?t.executeSql("SELECT db_version FROM "+Mo,[],function(t,e){var n=e.rows.item(0).db_version;p(t,n)}):t.executeSql("ALTER TABLE "+Mo+" ADD COLUMN db_version INTEGER",[],function(){p(t,1)}):p(t,0)})}function g(t,e){var n="SELECT MAX(seq) AS seq FROM "+Lo;t.executeSql(n,[],function(t,n){var i=n.rows.item(0).seq||0;e(i)})}function v(t,e){var n=jn("COUNT("+To+".id) AS 'num'",[To,Lo],Bo,Lo+".deleted=0");t.executeSql(n,[],function(t,n){e(n.rows.item(0).num)})}function y(t,e,n,i,r){var o=jn(Uo,[To,Lo],Bo,To+".id=?"),s=[e];t.executeSql(o,s,function(t,e){if(!e.rows.length){var o=M(Ar,"missing");return r(o)}var s=e.rows.item(0),a=Je(s.metadata);i(dt(n,a))})}var _,b=this,w=null,x=Fn(t),$=[];b._name=t.name;var E=Dr({},t,{version:Oo,description:t.name,size:x}),C=Vn(E);if(C.error)return qn(e)(C.error);var T=C.db;"function"!=typeof T.readTransaction&&(T.readTransaction=T.transaction),f(),b._remote=!1,b.type=function(){return"websql"},b._id=c(function(t){t(null,w)}),b._info=function(t){var e,n;T.readTransaction(function(t){g(t,function(t){e=t}),v(t,function(t){n=t})},qn(t),function(){t(null,{doc_count:n,update_seq:e,websql_encoding:_})})},b._bulkDocs=function(e,n,i){Bn(t,e,n,b,T,Po,i)},b._get=function(t,e,n){function i(t){n(t,{doc:r,metadata:o,ctx:s})}var r,o,s=e.ctx;if(!s)return T.readTransaction(function(i){b._get(t,Dr({ctx:i},e),n)});var a,u;if(e.rev){if(e.latest)return void y(s,t,e.rev,function(i){e.latest=!1,e.rev=i,b._get(t,e,n)},i);a=jn(Uo,[To,Lo],To+".id="+Lo+".doc_id",[Lo+".doc_id=?",Lo+".rev=?"]),u=[t,e.rev]}else a=jn(Uo,[To,Lo],Bo,To+".id=?"),u=[t];s.executeSql(a,u,function(t,n){if(!n.rows.length){var s=M(Ar,"missing");return i(s)}var a=n.rows.item(0);if(o=Je(a.metadata),a.deleted&&!e.rev){var u=M(Ar,"deleted");return i(u)}r=On(a.data,o.id,a.rev),i()})},b._allDocs=function(t,e){var n,i,r=[],o="startkey"in t&&t.startkey,s="endkey"in t&&t.endkey,a="key"in t&&t.key,u="keys"in t&&t.keys,l="descending"in t&&t.descending,c="limit"in t?t.limit:-1,h="skip"in t?t.skip:0,d=t.inclusive_end!==!1,p=[],f=[];if(u){var m=[],y="";u.forEach(function(t){m.indexOf(t)===-1&&(m.push(t),y+="?,")}),y=y.substring(0,y.length-1),f.push(To+".id IN ("+y+")"),p=p.concat(m)}else if(a!==!1)f.push(To+".id = ?"),p.push(a);else if(o!==!1||s!==!1){if(o!==!1&&(f.push(To+".id "+(l?"<=":">=")+" ?"),p.push(o)),s!==!1){var _=l?">":"<";d&&(_+="="),f.push(To+".id "+_+" ?"),p.push(s)}a!==!1&&(f.push(To+".id = ?"),p.push(a))}u||f.push(Lo+".deleted = 0"),T.readTransaction(function(e){if(v(e,function(t){n=t}),t.update_seq&&g(e,function(t){i=t}),0!==c){var o=jn(Uo,[To,Lo],Bo,f,To+".id "+(l?"DESC":"ASC"));o+=" LIMIT "+c+" OFFSET "+h,e.executeSql(o,p,function(e,n){for(var i=0,o=n.rows.length;i<o;i++){var s=n.rows.item(i),a=Je(s.metadata),l=a.id,c=On(s.data,l,s.rev),h=c._rev,d={id:l,key:l,value:{rev:h}};if(t.include_docs){if(d.doc=c,d.doc._rev=h,t.conflicts){var p=X(a);p.length&&(d.doc._conflicts=p)}Hn(d.doc,t,b,e)}if(s.deleted){if(!u)continue;d.value.deleted=!0,d.doc=null}if(u){var f=u.indexOf(l,f);do r[f]=d,f=u.indexOf(l,f+1);while(f>-1&&f<u.length)}else r.push(d)}u&&u.forEach(function(t,e){r[e]||(r[e]={key:t,error:"not_found"})})})}},qn(e),function(){var o={total_rows:n,offset:t.skip,rows:r};t.update_seq&&(o.update_seq=i),e(null,o)})},b._changes=function(t){function e(){var e=To+".json AS metadata, "+To+".max_seq AS maxSeq, "+Lo+".json AS winningDoc, "+Lo+".rev AS winningRev ",n=To+" JOIN "+Lo,u=To+".id="+Lo+".doc_id AND "+To+".winningseq="+Lo+".seq",l=["maxSeq > ?"],c=[t.since];t.doc_ids&&(l.push(To+".id IN "+In(t.doc_ids.length)),c=c.concat(t.doc_ids));var h="maxSeq "+(i?"DESC":"ASC"),d=jn(e,n,u,l,h),p=P(t);t.view||t.filter||(d+=" LIMIT "+r);var f=t.since||0;T.readTransaction(function(e){e.executeSql(d,c,function(e,n){function i(e){return function(){t.onChange(e)}}for(var u=0,l=n.rows.length;u<l;u++){var c=n.rows.item(u),h=Je(c.metadata);f=c.maxSeq;var d=On(c.winningDoc,h.id,c.winningRev),m=t.processChange(d,h,t);m.seq=c.maxSeq;var g=p(m);if("object"==typeof g)return t.complete(g);if(g&&(a++,o&&s.push(m),t.attachments&&t.include_docs?Hn(d,t,b,e,i(m)):i(m)()),a===r)break}})},qn(t.complete),function(){t.continuous||t.complete(null,{results:s,last_seq:f})})}if(t=u(t),t.continuous){var n=b._name+":"+Kr();return Po.addListener(b._name,n,b,t),Po.notify(b._name),{cancel:function(){Po.removeListener(b._name,n)}}}var i=t.descending;t.since=t.since&&!i?t.since:0;var r="limit"in t?t.limit:-1;0===r&&(r=1);var o;o="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var s=[],a=0;e()},b._close=function(t){t()},b._getAttachment=function(t,e,n,i,r){var o,s=i.ctx,a=n.digest,u=n.content_type,l="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+So+" WHERE digest=?";s.executeSql(l,[a],function(t,e){var n=e.rows.item(0),s=n.escaped?Nn(n.body):Dn(n.body,_);o=i.binary?Me(s,u):lo(s),r(null,o)})},b._getRevisionTree=function(t,e){T.readTransaction(function(n){var i="SELECT json AS metadata FROM "+To+" WHERE id = ?";n.executeSql(i,[t],function(t,n){if(n.rows.length){var i=Je(n.rows.item(0).metadata);e(null,i.rev_tree)}else e(M(Ar))})})},b._doCompaction=function(t,e,n){return e.length?void T.transaction(function(n){var i="SELECT json AS metadata FROM "+To+" WHERE id = ?";n.executeSql(i,[t],function(n,i){var r=Je(i.rows.item(0).metadata);Z(r.rev_tree,function(t,n,i,r,o){var s=n+"-"+i;e.indexOf(s)!==-1&&(o.status="missing")});var o="UPDATE "+To+" SET json = ? WHERE id = ?";n.executeSql(o,[Qe(r),t])}),Rn(e,t,n)},qn(n),function(){n()}):n()},b._getLocal=function(t,e){T.readTransaction(function(n){var i="SELECT json, rev FROM "+Do+" WHERE id=?";n.executeSql(i,[t],function(n,i){if(i.rows.length){var r=i.rows.item(0),o=On(r.json,t,r.rev);e(null,o)}else e(M(Ar))})})},b._putLocal=function(t,e,n){function i(t){var i,l;o?(i="UPDATE "+Do+" SET rev=?, json=? WHERE id=? AND rev=?",l=[r,u,s,o]):(i="INSERT INTO "+Do+" (id, rev, json) VALUES (?,?,?)",l=[s,r,u]),t.executeSql(i,l,function(t,i){i.rowsAffected?(a={ok:!0,id:s,rev:r},e.ctx&&n(null,a)):n(M(Nr))},function(){return n(M(Nr)),!1})}"function"==typeof e&&(n=e,e={}),delete t._revisions;var r,o=t._rev,s=t._id;r=o?t._rev="0-"+(parseInt(o.split("-")[1],10)+1):t._rev="0-1";var a,u=Pn(t);e.ctx?i(e.ctx):T.transaction(i,qn(n),function(){a&&n(null,a)})},b._removeLocal=function(t,e,n){function i(i){var o="DELETE FROM "+Do+" WHERE id=? AND rev=?",s=[t._id,t._rev];i.executeSql(o,s,function(i,o){return o.rowsAffected?(r={ok:!0,id:t._id,rev:"0-0"},void(e.ctx&&n(null,r))):n(M(Ar));
})}"function"==typeof e&&(n=e,e={});var r;e.ctx?i(e.ctx):T.transaction(i,qn(n),function(){r&&n(null,r)})},b._destroy=function(t,e){Po.removeAllListeners(b._name),T.transaction(function(t){var e=[To,Lo,So,Mo,Do,Ao];e.forEach(function(e){t.executeSql("DROP TABLE IF EXISTS "+e,[])})},qn(e),function(){k()&&(delete window.localStorage["_pouch__websqldb_"+b._name],delete window.localStorage[b._name]),e(null,{ok:!0})})}}function Zn(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(t){return!1}}function Gn(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var t=k(),e="_pouch__websqldb_valid_"+navigator.userAgent;if(t&&localStorage[e])return"1"===localStorage[e];var n=Zn();return t&&(localStorage[e]=n?"1":"0"),n}function Yn(){return"function"==typeof openDatabase&&Gn()}function Xn(t,e,n,i){return openDatabase(t,e,n,i)}function Kn(t,e){var n="WebSQL is deprecated and will be removed in future releases of PouchDB. Please migrate to IndexedDB: https://pouchdb.com/2018/01/23/pouchdb-6.4.2.html";C("warn",n);var i=Dr({websql:Xn},t);Wn.call(this,i,e)}function Jn(t){t.adapter("websql",Kn,!0)}function Qn(){for(var t={},e=new wr(function(e,n){t.resolve=e,t.reject=n}),n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.promise=e,wr.resolve().then(function(){return fetch.apply(null,n)}).then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)}),t}function ti(t,e){var n,i,r,o=new Headers,s={method:t.method,credentials:"include",headers:o};return t.json&&(o.set("Accept","application/json"),o.set("Content-Type",t.headers["Content-Type"]||"application/json")),t.body&&t.processData&&"string"!=typeof t.body?s.body=JSON.stringify(t.body):"body"in t?s.body=t.body:s.body=null,Object.keys(t.headers).forEach(function(e){t.headers.hasOwnProperty(e)&&o.set(e,t.headers[e])}),n=Qn(t.url,s),t.timeout>0&&(i=setTimeout(function(){n.reject(new Error("Load timeout for resource: "+t.url))},t.timeout)),n.promise.then(function(e){return r={statusCode:e.status},t.timeout>0&&clearTimeout(i),r.statusCode>=200&&r.statusCode<300?t.binary?e.blob():e.text():e.json()}).then(function(t){r.statusCode>=200&&r.statusCode<300?e(null,r,t):(t.status=r.statusCode,e(t))})["catch"](function(t){t||(t=new Error("canceled")),e(t)}),{abort:n.reject}}function ei(t,e){var n,i,r=!1,o=function(){n.abort(),u()},s=function(){r=!0,n.abort(),u()},a={abort:o},u=function(){clearTimeout(i),a.abort=function(){},n&&(n.onprogress=void 0,n.upload&&(n.upload.onprogress=void 0),n.onreadystatechange=void 0,n=void 0)};n=t.xhr?new t.xhr:new XMLHttpRequest;try{n.open(t.method,t.url)}catch(l){return e(new Error(l.name||"Url is invalid"))}n.withCredentials=!("withCredentials"in t)||t.withCredentials,"GET"===t.method?delete t.headers["Content-Type"]:t.json&&(t.headers.Accept="application/json",t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.body&&t.processData&&"string"!=typeof t.body&&(t.body=JSON.stringify(t.body))),t.binary&&(n.responseType="arraybuffer"),"body"in t||(t.body=null);for(var c in t.headers)t.headers.hasOwnProperty(c)&&n.setRequestHeader(c,t.headers[c]);return t.timeout>0&&(i=setTimeout(s,t.timeout),n.onprogress=function(){clearTimeout(i),4!==n.readyState&&(i=setTimeout(s,t.timeout))},"undefined"!=typeof n.upload&&(n.upload.onprogress=n.onprogress)),n.onreadystatechange=function(){if(4===n.readyState){var i={statusCode:n.status};if(n.status>=200&&n.status<300){var o;o=t.binary?Se([n.response||""],{type:n.getResponseHeader("Content-Type")}):n.responseText,e(null,i,o)}else{var s={};if(r)s=new Error("ETIMEDOUT"),s.code="ETIMEDOUT";else if("string"==typeof n.response&&""!==n.response)try{s=JSON.parse(n.response)}catch(a){}s.status=n.status,e(s)}u()}},t.body&&t.body instanceof Blob?je(t.body,function(t){n.send(t)}):n.send(t.body),a}function ni(){try{return new XMLHttpRequest,!0}catch(t){return!1}}function ii(t,e){return zo||t.xhr?ei(t,e):ti(t,e)}function ri(){return""}function oi(t,e){function n(e,n,i){if(!t.binary&&t.json&&"string"==typeof e)try{e=JSON.parse(e)}catch(r){return i(r)}Array.isArray(e)&&(e=e.map(function(t){return t.error||t.missing?A(t):t})),t.binary,i(null,e,n)}t=u(t);var i={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};return t=Dr(i,t),t.json&&(t.binary||(t.headers.Accept="application/json"),t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json"),t.binary&&(t.encoding=null,t.json=!1),t.processData||(t.json=!1),ii(t,function(i,r,o){if(i)return e(A(i));var s,a=r.headers&&r.headers["content-type"],u=o||ri();if(!t.binary&&(t.json||!t.processData)&&"object"!=typeof u&&(/json/.test(a)||/^[\s]*\{/.test(u)&&/\}[\s]*$/.test(u)))try{u=JSON.parse(u.toString())}catch(l){}r.statusCode>=200&&r.statusCode<300?n(u,r,e):(s=A(u),s.status=r.statusCode,e(s))})}function si(t,e){var n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",i=n.indexOf("safari")!==-1&&n.indexOf("chrome")===-1,r=n.indexOf("msie")!==-1,o=n.indexOf("trident")!==-1,s=n.indexOf("edge")!==-1,a=i||(r||o||s)&&"GET"===t.method,u=!("cache"in t)||t.cache,l=/^blob:/.test(t.url);if(!l&&(a||!u)){var c=t.url.indexOf("?")!==-1;t.url+=(c?"&":"?")+"_nonce="+Date.now()}return oi(t,e)}function ai(t,e){return new wr(function(n,i){function r(){c++,t[h++]().then(s,a)}function o(){++d===p?l?i(l):n():u()}function s(){c--,o()}function a(t){c--,l=l||t,o()}function u(){for(;c<e&&h<p;)r()}var l,c=0,h=0,d=0,p=t.length;u()})}function ui(t){var e=t.doc||t.ok,n=e._attachments;n&&Object.keys(n).forEach(function(t){var e=n[t];e.data=Ae(e.data,e.content_type)})}function li(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function ci(t){return t._attachments&&Object.keys(t._attachments)?wr.all(Object.keys(t._attachments).map(function(e){var n=t._attachments[e];if(n.data&&"string"!=typeof n.data)return new wr(function(t){Ie(n.data,t)}).then(function(t){n.data=t})})):wr.resolve()}function hi(t){if(!t.prefix)return!1;var e=B(t.prefix).protocol;return"http"===e||"https"===e}function di(t,e){if(hi(e)){var n=e.name.substr(e.prefix.length);t=e.prefix+encodeURIComponent(n)}var i=B(t);(i.user||i.password)&&(i.auth={username:i.user,password:i.password});var r=i.path.replace(/(^\/|\/$)/g,"").split("/");return i.db=r.pop(),i.db.indexOf("%")===-1&&(i.db=encodeURIComponent(i.db)),i.path=r.join("/"),i}function pi(t,e){return fi(t,t.db+"/"+e)}function fi(t,e){var n=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+n+e}function mi(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function gi(t,e){function n(t,e,n){var i=(t||{}).ajax||{},r=Dr(u(h),i,e),o=u(h.headers||{});return r.headers=Dr(o,i.headers,e.headers||{}),a.constructor.listeners("debug").length&&a.constructor.emit("debug",["http",r.method,r.url]),a._ajax(r,n)}function i(t,e){return new wr(function(i,r){n(t,e,function(t,e){return t?r(t):void i(e)})})}function r(t,e){return d(t,pr(function(t){o().then(function(){return e.apply(this,t)})["catch"](function(e){var n=t.pop();n(e)})}))}function o(){if(t.skipSetup||t.skip_setup)return wr.resolve();if(g)return g;var e={method:"GET",url:c};return g=i({},e)["catch"](function(t){return t&&t.status&&404===t.status?(S(404,"PouchDB is just detecting if the remote exists."),i({},{method:"PUT",url:c})):wr.reject(t)})["catch"](function(t){return!(!t||!t.status||412!==t.status)||wr.reject(t)}),g["catch"](function(){g=null}),g}function s(t){return t.split("/").map(encodeURIComponent).join("/")}var a=this,l=di(t.name,t),c=pi(l,"");t=u(t);var h=t.ajax||{};if(t.auth||l.auth){var p=t.auth||l.auth,f=p.username+":"+p.password,m=lo(unescape(encodeURIComponent(f)));h.headers=h.headers||{},h.headers.Authorization="Basic "+m}a._ajax=si;var g;fr(function(){e(null,a)}),a._remote=!0,a.type=function(){return"http"},a.id=r("id",function(t){n({},{method:"GET",url:fi(l,"")},function(e,n){var i=n&&n.uuid?n.uuid+l.db:pi(l,"");t(null,i)})}),a.request=r("request",function(t,e){t.url=pi(l,t.url),n({},t,e)}),a.compact=r("compact",function(t,e){"function"==typeof t&&(e=t,t={}),t=u(t),n(t,{url:pi(l,"_compact"),method:"POST"},function(){function n(){a.info(function(i,r){r&&!r.compact_running?e(null,{ok:!0}):setTimeout(n,t.interval||200)})}n()})}),a.bulkGet=d("bulkGet",function(t,e){function i(e){var i={};t.revs&&(i.revs=!0),t.attachments&&(i.attachments=!0),t.latest&&(i.latest=!0),n(t,{url:pi(l,"_bulk_get"+mi(i)),method:"POST",body:{docs:t.docs}},function(n,i){!n&&t.attachments&&t.binary&&i.results.forEach(function(t){t.docs.forEach(ui)}),e(n,i)})}function r(){function n(t){return function(n,i){a[t]=i.results,++s===r&&e(null,{results:O(a)})}}for(var i=Ho,r=Math.ceil(t.docs.length/i),s=0,a=new Array(r),u=0;u<r;u++){var l=y(t,["revs","attachments","binary","latest"]);l.ajax=h,l.docs=t.docs.slice(u*i,Math.min(t.docs.length,(u+1)*i)),w(o,l,n(u))}}var o=this,s=fi(l,""),a=Go[s];"boolean"!=typeof a?i(function(t,n){t?(Go[s]=!1,S(t.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),r()):(Go[s]=!0,e(null,n))}):a?i(e):r()}),a._info=function(t){o().then(function(){n({},{method:"GET",url:pi(l,"")},function(e,n){return e?t(e):(n.host=pi(l,""),void t(null,n))})})["catch"](t)},a.get=r("get",function(t,e,n){function r(t){function n(n){var o=r[n],a=li(t._id)+"/"+s(n)+"?rev="+t._rev;return i(e,{method:"GET",url:pi(l,a),binary:!0}).then(function(t){return e.binary?t:new wr(function(e){Ie(t,e)})}).then(function(t){delete o.stub,delete o.length,o.data=t})}var r=t._attachments,o=r&&Object.keys(r);if(r&&o.length){var a=o.map(function(t){return function(){return n(t)}});return ai(a,5)}}function o(t){return Array.isArray(t)?wr.all(t.map(function(t){if(t.ok)return r(t.ok)})):r(t)}"function"==typeof e&&(n=e,e={}),e=u(e);var a={};e.revs&&(a.revs=!0),e.revs_info&&(a.revs_info=!0),e.latest&&(a.latest=!0),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),a.open_revs=e.open_revs),e.rev&&(a.rev=e.rev),e.conflicts&&(a.conflicts=e.conflicts),e.update_seq&&(a.update_seq=e.update_seq),t=li(t);var c={method:"GET",url:pi(l,t+mi(a))};i(e,c).then(function(t){return wr.resolve().then(function(){if(e.attachments)return o(t)}).then(function(){n(null,t)})})["catch"](function(e){e.docId=t,n(e)})}),a.remove=r("remove",function(t,e,i,r){var o;"string"==typeof e?(o={_id:t,_rev:e},"function"==typeof i&&(r=i,i={})):(o=t,"function"==typeof e?(r=e,i={}):(r=i,i=e));var s=o._rev||i.rev;n(i,{method:"DELETE",url:pi(l,li(o._id))+"?rev="+s},r)}),a.getAttachment=r("getAttachment",function(t,e,i,r){"function"==typeof i&&(r=i,i={});var o=i.rev?"?rev="+i.rev:"",a=pi(l,li(t))+"/"+s(e)+o;n(i,{method:"GET",url:a,binary:!0},r)}),a.removeAttachment=r("removeAttachment",function(t,e,i,r){var o=pi(l,li(t)+"/"+s(e))+"?rev="+i;n({},{method:"DELETE",url:o},r)}),a.putAttachment=r("putAttachment",function(t,e,i,r,o,a){"function"==typeof o&&(a=o,o=r,r=i,i=null);var u=li(t)+"/"+s(e),c=pi(l,u);if(i&&(c+="?rev="+i),"string"==typeof r){var d;try{d=uo(r)}catch(p){return a(M(Rr,"Attachment is not a valid base64 string"))}r=d?Me(d,o):""}var f={headers:{"Content-Type":o},method:"PUT",url:c,processData:!1,body:r,timeout:h.timeout||6e4};n({},f,a)}),a._bulkDocs=function(t,e,i){t.new_edits=e.new_edits,o().then(function(){return wr.all(t.docs.map(ci))}).then(function(){n(e,{method:"POST",url:pi(l,"_bulk_docs"),timeout:e.timeout,body:t},function(t,e){return t?i(t):(e.forEach(function(t){t.ok=!0}),void i(null,e))})})["catch"](i)},a._put=function(t,e,i){o().then(function(){return ci(t)}).then(function(){n(e,{method:"PUT",url:pi(l,li(t._id)),body:t},function(e,n){return e?(e.docId=t&&t._id,i(e)):void i(null,n)})})["catch"](i)},a.allDocs=r("allDocs",function(t,e){"function"==typeof t&&(e=t,t={}),t=u(t);var n,r={},o="GET";t.conflicts&&(r.conflicts=!0),t.update_seq&&(r.update_seq=!0),t.descending&&(r.descending=!0),t.include_docs&&(r.include_docs=!0),t.attachments&&(r.attachments=!0),t.key&&(r.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(r.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(r.endkey=JSON.stringify(t.endkey)),"undefined"!=typeof t.inclusive_end&&(r.inclusive_end=!!t.inclusive_end),"undefined"!=typeof t.limit&&(r.limit=t.limit),"undefined"!=typeof t.skip&&(r.skip=t.skip);var s=mi(r);"undefined"!=typeof t.keys&&(o="POST",n={keys:t.keys}),i(t,{method:o,url:pi(l,"_all_docs"+s),body:n}).then(function(n){t.include_docs&&t.attachments&&t.binary&&n.rows.forEach(ui),e(null,n)})["catch"](e)}),a._changes=function(t){var e="batch_size"in t?t.batch_size:Vo;t=u(t),!t.continuous||"heartbeat"in t||(t.heartbeat=Zo);var i="timeout"in t?t.timeout:"timeout"in h?h.timeout:3e4;"timeout"in t&&t.timeout&&i-t.timeout<Wo&&(i=t.timeout+Wo),"heartbeat"in t&&t.heartbeat&&i-t.heartbeat<Wo&&(i=t.heartbeat+Wo);var r={};"timeout"in t&&t.timeout&&(r.timeout=t.timeout);var s,a="undefined"!=typeof t.limit&&t.limit;s="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var c=a;if(t.style&&(r.style=t.style),(t.include_docs||t.filter&&"function"==typeof t.filter)&&(r.include_docs=!0),t.attachments&&(r.attachments=!0),t.continuous&&(r.feed="longpoll"),t.seq_interval&&(r.seq_interval=t.seq_interval),t.conflicts&&(r.conflicts=!0),t.descending&&(r.descending=!0),t.update_seq&&(r.update_seq=!0),"heartbeat"in t&&t.heartbeat&&(r.heartbeat=t.heartbeat),t.filter&&"string"==typeof t.filter&&(r.filter=t.filter),t.view&&"string"==typeof t.view&&(r.filter="_view",r.view=t.view),t.query_params&&"object"==typeof t.query_params)for(var d in t.query_params)t.query_params.hasOwnProperty(d)&&(r[d]=t.query_params[d]);var p,f="GET";t.doc_ids?(r.filter="_doc_ids",f="POST",p={doc_ids:t.doc_ids}):t.selector&&(r.filter="_selector",f="POST",p={selector:t.selector});var m,g,v=function(s,u){if(!t.aborted){r.since=s,"object"==typeof r.since&&(r.since=JSON.stringify(r.since)),t.descending?a&&(r.limit=c):r.limit=!a||c>e?e:c;var h={method:f,url:pi(l,"_changes"+mi(r)),timeout:i,body:p};g=s,t.aborted||o().then(function(){m=n(t,h,u)})["catch"](u)}},y={results:[]},_=function(n,i){if(!t.aborted){var r=0;if(i&&i.results){r=i.results.length,y.last_seq=i.last_seq;var o=null,u=null;"number"==typeof i.pending&&(o=i.pending),"string"!=typeof y.last_seq&&"number"!=typeof y.last_seq||(u=y.last_seq);var l={};l.query=t.query_params,i.results=i.results.filter(function(e){c--;var n=P(t)(e);return n&&(t.include_docs&&t.attachments&&t.binary&&ui(e),s&&y.results.push(e),t.onChange(e,o,u)),n})}else if(n)return t.aborted=!0,void t.complete(n);i&&i.last_seq&&(g=i.last_seq);var h=a&&c<=0||i&&r<e||t.descending;(!t.continuous||a&&c<=0)&&h?t.complete(null,y):fr(function(){v(g,_)})}};return v(t.since||0,_),{cancel:function(){t.aborted=!0,m&&m.abort()}}},a.revsDiff=r("revsDiff",function(t,e,i){"function"==typeof e&&(i=e,e={}),n(e,{method:"POST",url:pi(l,"_revs_diff"),body:t},i)}),a._close=function(t){t()},a._destroy=function(t,e){n(t,{url:pi(l,""),method:"DELETE"},function(t,n){return t&&t.status&&404!==t.status?e(t):void e(null,n)})}}function vi(t){t.adapter("http",gi,!1),t.adapter("https",gi,!1)}function yi(t){this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,yi)}catch(e){}}function _i(t){this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,_i)}catch(e){}}function bi(t){this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,bi)}catch(e){}}function wi(t,e){return e&&t.then(function(t){fr(function(){e(null,t)})},function(t){fr(function(){e(t)})}),t}function xi(t){return pr(function(e){var n=e.pop(),i=t.apply(this,e);return"function"==typeof n&&wi(i,n),i})}function ki(t,e){return t.then(function(t){return e().then(function(){return t})},function(t){return e().then(function(){throw t})})}function $i(t,e){return function(){var n=arguments,i=this;return t.add(function(){return e.apply(i,n)})}}function Ei(t){var e=new $r(t),n=new Array(e.size),i=-1;return e.forEach(function(t){n[++i]=t}),n}function Ci(t){var e=new Array(t.size),n=-1;return t.forEach(function(t,i){e[++n]=i}),e}function Ti(t){var e="builtin "+t+" function requires map values to be numbers or number arrays";return new bi(e)}function Li(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];if("number"!=typeof r){if(!Array.isArray(r))throw Ti("_sum");e="number"==typeof e?[e]:e;for(var o=0,s=r.length;o<s;o++){var a=r[o];if("number"!=typeof a)throw Ti("_sum");"undefined"==typeof e[o]?e.push(a):e[o]+=a}}else"number"==typeof e?e+=r:e[0]+=r}return e}function Si(t,e){return U("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:Li,log:Yo,isArray:Xo,toJSON:Ko})}function Di(){this.promise=new wr(function(t){t()})}function Mi(t){if(!t)return"undefined";switch(typeof t){case"function":return t.toString();case"string":return t.toString();default:return JSON.stringify(t)}}function Ai(t,e){return Mi(t)+Mi(e)+"undefined"}function Ni(t,e,n,i,r,o){var s,a=Ai(n,i);if(!r&&(s=t._cachedViews=t._cachedViews||{},s[a]))return s[a];var u=t.info().then(function(u){function l(t){t.views=t.views||{};var n=e;n.indexOf("/")===-1&&(n=e+"/"+e);var i=t.views[n]=t.views[n]||{};if(!i[c])return i[c]=!0,t}var c=u.db_name+"-mrview-"+(r?"temp":ze(a));return z(t,"_local/"+o,l).then(function(){return t.registerDependentDatabase(c).then(function(e){var r=e.db;r.auto_compaction=!0;var o={name:c,db:r,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:i};return o.db.get("_local/lastSeq")["catch"](function(t){if(404!==t.status)throw t}).then(function(t){return o.seq=t?t.seq:0,s&&o.db.once("destroyed",function(){delete s[a]}),o})})})});return s&&(s[a]=u),u}function Pi(t){return t.indexOf("/")===-1?[t,t]:t.split("/")}function Oi(t){return 1===t.length&&/^1-/.test(t[0].rev)}function Ii(t,e){try{t.emit("error",e)}catch(n){C("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),C("error",e)}}function ji(t,e,n,i){function r(t,e,n){try{e(n)}catch(i){Ii(t,i)}}function o(t,e,n,i,r){try{return{output:e(n,i,r)}}catch(o){return Ii(t,o),{error:o}}}function s(t,e){var n=Ht(t.key,e.key);return 0!==n?n:Ht(t.value,e.value)}function a(t,e,n){return n=n||0,"number"==typeof e?t.slice(n,e+n):n>0?t.slice(n):t}function u(t){var e=t.value,n=e&&"object"==typeof e&&e._id||t.id;return n}function l(t){t.rows.forEach(function(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){var n=e[t];e[t].data=Ae(n.data,n.content_type)})})}function c(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&l(e),e}}function h(t,e,n,i){var r=e[t];"undefined"!=typeof r&&(i&&(r=encodeURIComponent(JSON.stringify(r))),n.push(t+"="+r))}function d(t){if("undefined"!=typeof t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function p(t){return t.group_level=d(t.group_level),t.limit=d(t.limit),t.skip=d(t.skip),t}function f(t){if(t){if("number"!=typeof t)return new yi('Invalid value for integer: "'+t+'"');if(t<0)return new yi('Invalid value for positive integer: "'+t+'"')}}function m(t,e){var n=t.descending?"endkey":"startkey",i=t.descending?"startkey":"endkey";if("undefined"!=typeof t[n]&&"undefined"!=typeof t[i]&&Ht(t[n],t[i])>0)throw new yi("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&t.reduce!==!1){if(t.include_docs)throw new yi("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new yi("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){var n=f(t[e]);if(n)throw n})}function g(t,e,n){var i,r=[],o="GET";if(h("reduce",n,r),h("include_docs",n,r),h("attachments",n,r),h("limit",n,r),h("descending",n,r),h("group",n,r),h("group_level",n,r),h("skip",n,r),h("stale",n,r),h("conflicts",n,r),h("startkey",n,r,!0),h("start_key",n,r,!0),h("endkey",n,r,!0),h("end_key",n,r,!0),h("inclusive_end",n,r),h("key",n,r,!0),h("update_seq",n,r),r=r.join("&"),r=""===r?"":"?"+r,"undefined"!=typeof n.keys){var s=2e3,a="keys="+encodeURIComponent(JSON.stringify(n.keys));a.length+r.length+1<=s?r+=("?"===r[0]?"&":"?")+a:(o="POST","string"==typeof e?i={keys:n.keys}:e.keys=n.keys)}if("string"==typeof e){var u=Pi(e);return t.request({method:o,url:"_design/"+u[0]+"/_view/"+u[1]+r,body:i}).then(function(t){return t.rows.forEach(function(t){if(t.value&&t.value.error&&"builtin_reduce_error"===t.value.error)throw new Error(t.reason)}),t}).then(c(n))}return i=i||{},Object.keys(e).forEach(function(t){Array.isArray(e[t])?i[t]=e[t]:i[t]=e[t].toString()}),t.request({method:"POST",url:"_temp_view"+r,body:i}).then(c(n))}function v(t,e,n){return new wr(function(i,r){t._query(e,n,function(t,e){return t?r(t):void i(e)})})}function y(t){return new wr(function(e,n){t._viewCleanup(function(t,i){return t?n(t):void e(i)})})}function _(t){return function(e){if(404===e.status)return t;throw e}}function b(t,e,n){function i(){return Oi(c)?wr.resolve(a):e.db.get(s)["catch"](_(a))}function r(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):wr.resolve({rows:[]})}function o(t,e){for(var n=[],i=new $r,r=0,o=e.rows.length;r<o;r++){var s=e.rows[r],a=s.doc;if(a&&(n.push(a),i.add(a._id),a._deleted=!l.has(a._id),!a._deleted)){var u=l.get(a._id);"value"in u&&(a.value=u.value)}}var c=Ci(l);return c.forEach(function(t){if(!i.has(t)){var e={_id:t},r=l.get(t);"value"in r&&(e.value=r.value),n.push(e)}}),t.keys=Ei(c.concat(t.keys)),n.push(t),n}var s="_local/doc_"+t,a={_id:s,keys:[]},u=n.get(t),l=u[0],c=u[1];return i().then(function(t){return r(t).then(function(e){return o(t,e)})})}function w(t,e,n){var i="_local/lastSeq";return t.db.get(i)["catch"](_({_id:i,seq:0})).then(function(i){var r=Ci(e);return wr.all(r.map(function(n){return b(n,t,e)})).then(function(e){var r=O(e);return i.seq=n,r.push(i),t.db.bulkDocs({docs:r})})})}function x(t){var e="string"==typeof t?t:t.name,n=Jo[e];return n||(n=Jo[e]=new Di),n}function k(t){return $i(x(t),function(){return $(t)})()}function $(t){function n(t,e){var n={id:h._id,key:Wt(t)};"undefined"!=typeof e&&null!==e&&(n.value=Wt(e)),c.push(n)}function i(e,n){return function(){return w(t,e,n)}}function o(){return t.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:p,limit:ts}).then(a)}function a(t){var e=t.results;if(e.length){var n=u(e);if(f.add(i(n,p)),!(e.length<ts))return o()}}function u(e){for(var n=new Er,i=0,o=e.length;i<o;i++){var a=e[i];if("_"!==a.doc._id[0]){c=[],h=a.doc,h._deleted||r(t.sourceDB,d,h),c.sort(s);var u=l(c);n.set(a.doc._id,[u,a.changes])}p=a.seq}return n}function l(t){for(var e,n=new Er,i=0,r=t.length;i<r;i++){var o=t[i],s=[o.key,o.id];i>0&&0===Ht(o.key,e)&&s.push(i),n.set(Gt(s),o),e=o.key}return n}var c,h,d=e(t.mapFun,n),p=t.seq||0,f=new Di;return o().then(function(){return f.finish()}).then(function(){t.seq=p})}function E(t,e,i){0===i.group_level&&delete i.group_level;var r=i.group||i.group_level,s=n(t.reduceFun),u=[],l=isNaN(i.group_level)?Number.POSITIVE_INFINITY:i.group_level;e.forEach(function(t){var e=u[u.length-1],n=r?t.key:null;return r&&Array.isArray(n)&&(n=n.slice(0,l)),e&&0===Ht(e.groupKey,n)?(e.keys.push([t.key,t.id]),void e.values.push(t.value)):void u.push({keys:[[t.key,t.id]],values:[t.value],groupKey:n})}),e=[];for(var c=0,h=u.length;c<h;c++){var d=u[c],p=o(t.sourceDB,s,d.keys,d.values,!1);if(p.error&&p.error instanceof bi)throw p.error;e.push({value:p.error?null:p.output,key:d.groupKey})}return{rows:a(e,i.limit,i.skip)}}function C(t,e){return $i(x(t),function(){return T(t,e)})()}function T(t,e){function n(e){return e.include_docs=!0,t.db.allDocs(e).then(function(t){return r=t.total_rows,t.rows.map(function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),n=["id","key","value"];if(!(e<n||e>n))return t.doc.value}var i=Kt(t.doc._id);return{key:i[0],id:i[1],value:"value"in t.doc?t.doc.value:null}})})}function i(n){var i;if(i=o?E(t,n,e):{total_rows:r,offset:s,rows:n},e.update_seq&&(i.update_seq=t.seq),e.include_docs){var a=Ei(n.map(u));return t.sourceDB.allDocs({keys:a,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then(function(t){var e=new Er;return t.rows.forEach(function(t){e.set(t.id,t.doc)}),n.forEach(function(t){var n=u(t),i=e.get(n);i&&(t.doc=i)}),i})}return i}var r,o=t.reduceFun&&e.reduce!==!1,s=e.skip||0;if("undefined"==typeof e.keys||e.keys.length||(e.limit=0,delete e.keys),"undefined"!=typeof e.keys){var a=e.keys,l=a.map(function(t){var i={startkey:Gt([t]),endkey:Gt([t,{}])};return e.update_seq&&(i.update_seq=!0),n(i)});return wr.all(l).then(O).then(i)}var c={descending:e.descending};e.update_seq&&(c.update_seq=!0);var h,d;if("start_key"in e&&(h=e.start_key),"startkey"in e&&(h=e.startkey),"end_key"in e&&(d=e.end_key),"endkey"in e&&(d=e.endkey),"undefined"!=typeof h&&(c.startkey=Gt(e.descending?[h,{}]:[h])),"undefined"!=typeof d){var p=e.inclusive_end!==!1;e.descending&&(p=!p),c.endkey=Gt(p?[d,{}]:[d])}if("undefined"!=typeof e.key){var f=Gt([e.key]),m=Gt([e.key,{}]);c.descending?(c.endkey=f,c.startkey=m):(c.startkey=f,c.endkey=m)}return o||("number"==typeof e.limit&&(c.limit=e.limit),c.skip=s),n(c).then(i)}function L(t){return t.request({method:"POST",url:"_view_cleanup"})}function S(e){return e.get("_local/"+t).then(function(t){var n=new Er;Object.keys(t.views).forEach(function(t){var e=Pi(t),i="_design/"+e[0],r=e[1],o=n.get(i);o||(o=new $r,n.set(i,o)),o.add(r)});var i={keys:Ci(n),include_docs:!0};return e.allDocs(i).then(function(i){var r={};i.rows.forEach(function(e){var i=e.key.substring(8);n.get(e.key).forEach(function(n){var o=i+"/"+n;t.views[o]||(o=n);var s=Object.keys(t.views[o]),a=e.doc&&e.doc.views&&e.doc.views[n];s.forEach(function(t){r[t]=r[t]||a})})});var o=Object.keys(r).filter(function(t){return!r[t]}),s=o.map(function(t){return $i(x(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return wr.all(s).then(function(){return{ok:!0}})})},_({ok:!0}))}function D(e,n,r){if("function"==typeof e._query)return v(e,n,r);if(j(e))return g(e,n,r);if("string"!=typeof n)return m(r,n),Qo.add(function(){var i=Ni(e,"temp_view/temp_view",n.map,n.reduce,!0,t);return i.then(function(t){return ki(k(t).then(function(){return C(t,r)}),function(){return t.db.destroy()})})}),Qo.finish();var o=n,s=Pi(o),a=s[0],u=s[1];return e.get("_design/"+a).then(function(n){var s=n.views&&n.views[u];if(!s)throw new _i("ddoc "+n._id+" has no view named "+u);i(n,u),m(r,s);var a=Ni(e,o,s.map,s.reduce,!1,t);return a.then(function(t){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&fr(function(){k(t)}),C(t,r)):k(t).then(function(){return C(t,r)})})})}function M(t,e,n){var i=this;"function"==typeof e&&(n=e,e={}),e=e?p(e):{},"function"==typeof t&&(t={map:t});var r=wr.resolve().then(function(){return D(i,t,e)});return wi(r,n),r}var A=xi(function(){var t=this;return"function"==typeof t._viewCleanup?y(t):j(t)?L(t):S(t)});return{query:M,viewCleanup:A}}function Ri(t){if(/^_sum/.test(t))return es._sum;if(/^_count/.test(t))return es._count;if(/^_stats/.test(t))return es._stats;if(/^_/.test(t))throw new Error(t+" is not a supported reduce function.")}function qi(t,e){if("function"==typeof t&&2===t.length){var n=t;return function(t){return n(t,e)}}return Si(t.toString(),e)}function Fi(t){var e=t.toString(),n=Ri(e);return n?n:Si(e)}function Bi(t,e){var n=t.views&&t.views[e];if("string"!=typeof n.map)throw new _i("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof n.map)}function Ui(t,e,n){return is.query.call(this,t,e,n)}function zi(t){return is.viewCleanup.call(this,t)}function Vi(t){return/^1-/.test(t)}function Hi(t,e,n){return!t._attachments||!t._attachments[n]||t._attachments[n].digest!==e._attachments[n].digest}function Wi(t,e){var n=Object.keys(e._attachments);return wr.all(n.map(function(n){return t.getAttachment(e._id,n,{rev:e._rev})}))}function Zi(t,e,n){var i=j(e)&&!j(t),r=Object.keys(n._attachments);return i?t.get(n._id).then(function(i){return wr.all(r.map(function(r){return Hi(i,n,r)?e.getAttachment(n._id,r):t.getAttachment(i._id,r)}))})["catch"](function(t){if(404!==t.status)throw t;return Wi(e,n)}):Wi(e,n)}function Gi(t){var e=[];return Object.keys(t).forEach(function(n){var i=t[n].missing;i.forEach(function(t){e.push({id:n,rev:t})})}),{docs:e,revs:!0,latest:!0}}function Yi(t,e,n,i){function r(){var r=Gi(n);if(r.docs.length)return t.bulkGet(r).then(function(n){if(i.cancelled)throw new Error("cancelled");return wr.all(n.results.map(function(n){return wr.all(n.docs.map(function(n){var i=n.ok;return n.error&&(d=!1),i&&i._attachments?Zi(e,t,i).then(function(t){var e=Object.keys(i._attachments);return t.forEach(function(t,n){var r=i._attachments[e[n]];delete r.stub,delete r.length,r.data=t}),i}):i}))})).then(function(t){h=h.concat(O(t).filter(Boolean))})})}function o(t){return t._attachments&&Object.keys(t._attachments).length>0}function s(t){return t._conflicts&&t._conflicts.length>0}function a(e){return t.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(t){if(i.cancelled)throw new Error("cancelled");t.rows.forEach(function(t){t.deleted||!t.doc||!Vi(t.value.rev)||o(t.doc)||s(t.doc)||(t.doc._conflicts&&delete t.doc._conflicts,h.push(t.doc),delete n[t.id])})})}function l(){var t=Object.keys(n).filter(function(t){var e=n[t].missing;return 1===e.length&&Vi(e[0])});if(t.length>0)return a(t)}function c(){return{ok:d,docs:h}}n=u(n);var h=[],d=!0;return wr.resolve().then(l).then(r).then(c)}function Xi(t,e,n,i,r){return t.get(e)["catch"](function(n){if(404===n.status)return"http"!==t.adapter&&"https"!==t.adapter||S(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:i,_id:e,history:[],replicator:ss,version:os};throw n}).then(function(o){if(!r.cancelled&&o.last_seq!==n)return o.history=(o.history||[]).filter(function(t){return t.session_id!==i}),o.history.unshift({last_seq:n,session_id:i}),o.history=o.history.slice(0,as),o.version=os,o.replicator=ss,o.session_id=i,o.last_seq=n,t.put(o)["catch"](function(o){if(409===o.status)return Xi(t,e,n,i,r);throw o})})}function Ki(t,e,n,i,r){this.src=t,this.target=e,this.id=n,this.returnValue=i,this.opts=r||{}}function Ji(t,e){return t.session_id===e.session_id?{last_seq:t.last_seq,history:t.history}:Qi(t.history,e.history)}function Qi(t,e){var n=t[0],i=t.slice(1),r=e[0],o=e.slice(1);if(!n||0===e.length)return{last_seq:us,history:[]};var s=n.session_id;if(tr(s,e))return{last_seq:n.last_seq,history:t};var a=r.session_id;return tr(a,i)?{last_seq:r.last_seq,history:o}:Qi(i,o)}function tr(t,e){var n=e[0],i=e.slice(1);return!(!t||0===e.length)&&(t===n.session_id||tr(t,i))}function er(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}function nr(t,e,n,i){if(t.retry===!1)return e.emit("error",n),void e.removeAllListeners();if("function"!=typeof t.back_off_function&&(t.back_off_function=L),e.emit("requestError",n),"active"===e.state||"pending"===e.state){e.emit("paused",n),e.state="stopped";var r=function(){t.current_back_off=cs},o=function(){e.removeListener("active",r)};e.once("paused",o),e.once("active",r)}t.current_back_off=t.current_back_off||cs,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(i,t.current_back_off)}function ir(t){return Object.keys(t).sort(Ht).reduce(function(e,n){return e[n]=t[n],e},{})}function rr(t,e,n){var i=n.doc_ids?n.doc_ids.sort(Ht):"",r=n.filter?n.filter.toString():"",o="",s="",a="";return n.selector&&(a=JSON.stringify(n.selector)),n.filter&&n.query_params&&(o=JSON.stringify(ir(n.query_params))),n.filter&&"_view"===n.filter&&(s=n.view.toString()),wr.all([t.id(),e.id()]).then(function(t){var e=t[0]+t[1]+r+s+o+i+a;return new wr(function(t){Ue(e,t)})}).then(function(t){return t=t.replace(/\//g,".").replace(/\+/g,"_"),
"_local/"+t})}function or(t,e,n,i,r){function o(){return k?wr.resolve():rr(t,e,n).then(function(r){x=r;var o={};o=n.checkpoint===!1?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},k=new Ki(t,e,x,i,o)})}function s(){if(R=[],0!==w.docs.length){var t=w.docs,o={timeout:n.timeout};return e.bulkDocs({docs:t,new_edits:!1},o).then(function(e){if(i.cancelled)throw f(),new Error("cancelled");var n=Object.create(null);e.forEach(function(t){t.error&&(n[t.id]=t)});var o=Object.keys(n).length;r.doc_write_failures+=o,r.docs_written+=t.length-o,t.forEach(function(t){var e=n[t._id];if(e){r.errors.push(e);var o=(e.name||"").toLowerCase();if("unauthorized"!==o&&"forbidden"!==o)throw e;i.emit("denied",u(e))}else R.push(t)})},function(e){throw r.doc_write_failures+=t.length,e})}}function a(){if(w.error)throw new Error("There was a problem getting docs.");r.last_seq=S=w.seq;var t=u(r);return R.length&&(t.docs=R,"number"==typeof w.pending&&(t.pending=w.pending,delete w.pending),i.emit("change",t)),C=!0,k.writeCheckpoint(w.seq,q).then(function(){if(C=!1,i.cancelled)throw f(),new Error("cancelled");w=void 0,y()})["catch"](function(t){throw b(t),t})}function l(){var t={};return w.changes.forEach(function(e){"_user/"!==e.id&&(t[e.id]=e.changes.map(function(t){return t.rev}))}),e.revsDiff(t).then(function(t){if(i.cancelled)throw f(),new Error("cancelled");w.diffs=t})}function c(){return Yi(t,e,w.diffs,i).then(function(t){w.error=!t.ok,t.docs.forEach(function(t){delete w.diffs[t._id],r.docs_read++,w.docs.push(t)})})}function h(){if(!i.cancelled&&!w){if(0===$.length)return void d(!0);w=$.shift(),l().then(c).then(s).then(a).then(h)["catch"](function(t){p("batch processing terminated with error",t)})}}function d(t){return 0===E.changes.length?void(0!==$.length||w||((D&&B.live||T)&&(i.state="pending",i.emit("paused")),T&&f())):void((t||T||E.changes.length>=A)&&($.push(E),E={seq:0,changes:[],docs:[]},"pending"!==i.state&&"stopped"!==i.state||(i.state="active",i.emit("active")),h()))}function p(t,e){L||(e.message||(e.message=t),r.ok=!1,r.status="aborting",$=[],E={seq:0,changes:[],docs:[]},f(e))}function f(o){if(!(L||i.cancelled&&(r.status="cancelled",C)))if(r.status=r.status||"complete",r.end_time=new Date,r.last_seq=S,L=!0,o){o=M(o),o.result=r;var s=(o.name||"").toLowerCase();"unauthorized"===s||"forbidden"===s?(i.emit("error",o),i.removeAllListeners()):nr(n,i,o,function(){or(t,e,n,i)})}else i.emit("complete",r),i.removeAllListeners()}function m(t,e,r){if(i.cancelled)return f();"number"==typeof e&&(E.pending=e);var o=P(n)(t);o&&(E.seq=t.seq||r,E.changes.push(t),d(0===$.length&&B.live))}function g(t){if(O=!1,i.cancelled)return f();if(t.results.length>0)B.since=t.last_seq,y(),d(!0);else{var e=function(){D?(B.live=!0,y()):T=!0,d(!0)};w||0!==t.results.length?e():(C=!0,k.writeCheckpoint(t.last_seq,q).then(function(){C=!1,r.last_seq=S=t.last_seq,e()})["catch"](b))}}function v(t){return O=!1,i.cancelled?f():void p("changes rejected",t)}function y(){function e(){o.cancel()}function r(){i.removeListener("cancel",e)}if(!O&&!T&&$.length<N){O=!0,i._changes&&(i.removeListener("cancel",i._abortChanges),i._changes.cancel()),i.once("cancel",e);var o=t.changes(B).on("change",m);o.then(r,r),o.then(g)["catch"](v),n.retry&&(i._changes=o,i._abortChanges=e)}}function _(){o().then(function(){return i.cancelled?void f():k.getCheckpoint().then(function(t){S=t,B={since:S,limit:A,batch_size:A,style:"all_docs",doc_ids:I,selector:j,return_docs:!0},F!==!1&&(B.seq_interval=F||A),n.filter&&("string"!=typeof n.filter?B.include_docs=!0:B.filter=n.filter),"heartbeat"in n&&(B.heartbeat=n.heartbeat),"timeout"in n&&(B.timeout=n.timeout),n.query_params&&(B.query_params=n.query_params),n.view&&(B.view=n.view),y()})})["catch"](function(t){p("getCheckpoint rejected with ",t)})}function b(t){C=!1,p("writeCheckpoint completed with error",t)}var w,x,k,$=[],E={seq:0,changes:[],docs:[]},C=!1,T=!1,L=!1,S=0,D=n.continuous||n.live||!1,A=n.batch_size||100,N=n.batches_limit||10,O=!1,I=n.doc_ids,j=n.selector,R=[],q=Kr(),F=n.seq_interval;r=r||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var B={};return i.ready(t,e),i.cancelled?void f():(i._addedListeners||(i.once("cancel",f),"function"==typeof n.complete&&(i.once("error",n.complete),i.once("complete",function(t){n.complete(null,t)})),i._addedListeners=!0),void("undefined"==typeof n.since?_():o().then(function(){return C=!0,k.writeCheckpoint(n.since,q)}).then(function(){return C=!1,i.cancelled?void f():(S=n.since,void _())})["catch"](b)))}function sr(){mr.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var t=this,e=new wr(function(e,n){t.once("complete",e),t.once("error",n)});t.then=function(t,n){return e.then(t,n)},t["catch"]=function(t){return e["catch"](t)},t["catch"](function(){})}function ar(t,e){var n=e.PouchConstructor;return"string"==typeof t?new n(t,e):t}function ur(t,e,n,i){if("function"==typeof n&&(i=n,n={}),"undefined"==typeof n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw M(Br,"`doc_ids` filter parameter is not a list.");n.complete=i,n=u(n),n.continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var r=new sr(n),o=ar(t,n),s=ar(e,n);return or(o,s,n,r),r}function lr(t,e,n,i){return"function"==typeof n&&(i=n,n={}),"undefined"==typeof n&&(n={}),n=u(n),n.PouchConstructor=n.PouchConstructor||this,t=ar(t,n),e=ar(e,n),new cr(t,e,n,i)}function cr(t,e,n,i){function r(t){f.emit("change",{direction:"pull",change:t})}function o(t){f.emit("change",{direction:"push",change:t})}function s(t){f.emit("denied",{direction:"push",doc:t})}function a(t){f.emit("denied",{direction:"pull",doc:t})}function u(){f.pushPaused=!0,f.pullPaused&&f.emit("paused")}function l(){f.pullPaused=!0,f.pushPaused&&f.emit("paused")}function c(){f.pushPaused=!1,f.pullPaused&&f.emit("active",{direction:"push"})}function h(){f.pullPaused=!1,f.pushPaused&&f.emit("active",{direction:"pull"})}function d(t){return function(e,n){var i="change"===e&&(n===r||n===o),d="denied"===e&&(n===a||n===s),p="paused"===e&&(n===l||n===u),m="active"===e&&(n===h||n===c);(i||d||p||m)&&(e in v||(v[e]={}),v[e][t]=!0,2===Object.keys(v[e]).length&&f.removeAllListeners(e))}}function p(t,e,n){t.listeners(e).indexOf(n)==-1&&t.on(e,n)}var f=this;this.canceled=!1;var m=n.push?Dr({},n,n.push):n,g=n.pull?Dr({},n,n.pull):n;this.push=ur(t,e,m),this.pull=ur(e,t,g),this.pushPaused=!0,this.pullPaused=!0;var v={};n.live&&(this.push.on("complete",f.pull.cancel.bind(f.pull)),this.pull.on("complete",f.push.cancel.bind(f.push))),this.on("newListener",function(t){"change"===t?(p(f.pull,"change",r),p(f.push,"change",o)):"denied"===t?(p(f.pull,"denied",a),p(f.push,"denied",s)):"active"===t?(p(f.pull,"active",h),p(f.push,"active",c)):"paused"===t&&(p(f.pull,"paused",l),p(f.push,"paused",u))}),this.on("removeListener",function(t){"change"===t?(f.pull.removeListener("change",r),f.push.removeListener("change",o)):"denied"===t?(f.pull.removeListener("denied",a),f.push.removeListener("denied",s)):"active"===t?(f.pull.removeListener("active",h),f.push.removeListener("active",c)):"paused"===t&&(f.pull.removeListener("paused",l),f.push.removeListener("paused",u))}),this.pull.on("removeListener",d("pull")),this.push.on("removeListener",d("push"));var y=wr.all([this.push,this.pull]).then(function(t){var e={push:t[0],pull:t[1]};return f.emit("complete",e),i&&i(null,e),f.removeAllListeners(),e},function(t){if(f.cancel(),i?i(t):f.emit("error",t),f.removeAllListeners(),i)throw t});this.then=function(t,e){return y.then(t,e)},this["catch"]=function(t){return y["catch"](t)}}function hr(t){t.replicate=ur,t.sync=lr,Object.defineProperty(t.prototype,"replicate",{get:function(){var t=this;return"undefined"==typeof this.replicateMethods&&(this.replicateMethods={from:function(e,n,i){return t.constructor.replicate(e,t,n,i)},to:function(e,n,i){return t.constructor.replicate(t,e,n,i)}}),this.replicateMethods}}),t.prototype.sync=function(t,e,n){return this.constructor.sync(this,t,e,n)}}var dr=i(t("lie")),pr=i(t("argsarray")),fr=i(t("immediate")),mr=t("events"),gr=i(t("inherits")),vr=i(t("uuid")),yr=i(t("debug")),_r=i(t("spark-md5")),br=i(t("vuvuzela")),wr="function"==typeof Promise?Promise:dr,xr=Function.prototype.toString,kr=xr.call(Object);m.prototype.get=function(t){var e=p(t);return this._store[e]},m.prototype.set=function(t,e){var n=p(t);return this._store[n]=e,!0},m.prototype.has=function(t){var e=p(t);return e in this._store},m.prototype["delete"]=function(t){var e=p(t),n=e in this._store;return delete this._store[e],n},m.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,i=e.length;n<i;n++){var r=e[n],o=this._store[r];r=f(r),t(o,r)}},Object.defineProperty(m.prototype,"size",{get:function(){return Object.keys(this._store).length}}),g.prototype.add=function(t){return this._store.set(t,!0)},g.prototype.has=function(t){return this._store.has(t)},g.prototype.forEach=function(t){this._store.forEach(function(e,n){t(n)})},Object.defineProperty(g.prototype,"size",{get:function(){return this._store.size}});var $r,Er;v()?($r=Set,Er=Map):($r=g,Er=m);var Cr,Tr=6;if(x())Cr=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),Cr=!!localStorage.getItem("_pouch_check_localstorage")}catch(Lr){Cr=!1}gr(E,mr.EventEmitter),E.prototype.addListener=function(t,e,n,i){function r(){function t(){s=!1}if(o._listeners[e]){if(s)return void(s="waiting");s=!0;var a=y(i,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(a).on("change",function(t){t.seq>i.since&&!i.cancelled&&(i.since=t.seq,i.onChange(t))}).on("complete",function(){"waiting"===s&&fr(r),s=!1}).on("error",t)}}if(!this._listeners[e]){var o=this,s=!1;this._listeners[e]=r,this.on(t,r)}},E.prototype.removeListener=function(t,e){e in this._listeners&&(mr.EventEmitter.prototype.removeListener.call(this,t,this._listeners[e]),delete this._listeners[e])},E.prototype.notifyLocalWindows=function(t){x()?chrome.storage.local.set({dbName:t}):k()&&(localStorage[t]="a"===localStorage[t]?"b":"a")},E.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)};var Sr;Sr="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e};var Dr=Sr;gr(D,Error),D.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var Mr=(new D(401,"unauthorized","Name or password is incorrect."),new D(400,"bad_request","Missing JSON list of 'docs'")),Ar=new D(404,"not_found","missing"),Nr=new D(409,"conflict","Document update conflict"),Pr=new D(400,"bad_request","_id field must contain a string"),Or=new D(412,"missing_id","_id is required for puts"),Ir=new D(400,"bad_request","Only reserved document ids may start with underscore."),jr=(new D(412,"precondition_failed","Database not open"),new D(500,"unknown_error","Database encountered an unknown error")),Rr=new D(500,"badarg","Some query argument is invalid"),qr=(new D(400,"invalid_request","Request was invalid"),new D(400,"query_parse_error","Some query parameter is invalid")),Fr=new D(500,"doc_validation","Bad special document member"),Br=new D(400,"bad_request","Something wrong with the request"),Ur=new D(400,"bad_request","Document must be a JSON object"),zr=(new D(404,"not_found","Database not found"),new D(500,"indexed_db_went_bad","unknown")),Vr=new D(500,"web_sql_went_bad","unknown"),Hr=(new D(500,"levelDB_went_went_bad","unknown"),new D(403,"forbidden","Forbidden by design doc validate_doc_update function"),new D(400,"bad_request","Invalid rev format")),Wr=(new D(412,"file_exists","The database could not be created, the file already exists."),new D(412,"missing_stub","A pre-existing attachment stub wasn't found")),Zr=(new D(413,"invalid_url","Provided URL is invalid"),["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"]),Gr="queryKey",Yr=/(?:^|&)([^&=]*)=?([^&]*)/g,Xr=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Kr=vr.v4;gr(ft,mr.EventEmitter),ft.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},ft.prototype.validateChanges=function(t){var e=t.complete,n=this;Lt._changesFilterPlugin?Lt._changesFilterPlugin.validate(t,function(i){return i?e(i):void n.doChanges(t)}):n.doChanges(t)},ft.prototype.doChanges=function(t){var e=this,n=t.complete;if(t=u(t),"live"in t&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=mt,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"===t.since)return void this.db.info().then(function(i){return e.isCancelled?void n(null,{status:"cancelled"}):(t.since=i.update_seq,void e.doChanges(t))},n);if(Lt._changesFilterPlugin){if(Lt._changesFilterPlugin.normalize(t),Lt._changesFilterPlugin.shouldFilter(this,t))return Lt._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach(function(e){e in t&&C("warn",'The "'+e+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=n;var i=this.db._changes(t);if(i&&"function"==typeof i.cancel){var r=e.cancel;e.cancel=pr(function(t){i.cancel(),r.apply(this,t)})}},gr($t,mr.EventEmitter),$t.prototype.post=d("post",function(t,e,n){return"function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t)?n(M(Ur)):void this.bulkDocs({docs:[t]},e,vt(n,t._id))}),$t.prototype.put=d("put",function(t,e,n){function i(){var n=t._rev.split("-"),i=n[1],r=parseInt(n[0],10),o=r+1,s=H();t._revisions={start:o,ids:[s,i]},t._rev=o+"-"+s,e.new_edits=!1}function r(n){"function"==typeof o._put&&e.new_edits!==!1?o._put(t,e,n):o.bulkDocs({docs:[t]},e,vt(n,t._id))}if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(M(Ur));if(I(t._id),ht(t._id)&&"function"==typeof this._putLocal)return t._deleted?this._removeLocal(t,n):this._putLocal(t,n);var o=this;e.force&&t._rev?(i(),r(function(e){var i=e?null:{ok:!0,id:t._id,rev:t._rev};n(e,i)})):r(n)}),$t.prototype.putAttachment=d("putAttachment",function(t,e,n,i,r){function o(t){var n="_rev"in t?parseInt(t._rev,10):0;return t._attachments=t._attachments||{},t._attachments[e]={content_type:r,data:i,revpos:++n},s.put(t)}var s=this;return"function"==typeof r&&(r=i,i=n,n=null),"undefined"==typeof r&&(r=i,i=n,n=null),r||C("warn","Attachment",e,"on document",t,"is missing content_type"),s.get(t).then(function(t){if(t._rev!==n)throw M(Nr);return o(t)},function(e){if(e.reason===Ar.message)return o({_id:t});throw e})}),$t.prototype.removeAttachment=d("removeAttachment",function(t,e,n,i){var r=this;r.get(t,function(t,o){return t?void i(t):o._rev!==n?void i(M(Nr)):o._attachments?(delete o._attachments[e],0===Object.keys(o._attachments).length&&delete o._attachments,void r.put(o,i)):i()})}),$t.prototype.remove=d("remove",function(t,e,n,i){var r;"string"==typeof e?(r={_id:t,_rev:e},"function"==typeof n&&(i=n,n={})):(r=t,"function"==typeof e?(i=e,n={}):(i=n,n=e)),n=n||{},n.was_delete=!0;var o={_id:r._id,_rev:r._rev||n.rev};return o._deleted=!0,ht(o._id)&&"function"==typeof this._removeLocal?this._removeLocal(r,i):void this.bulkDocs({docs:[o]},n,vt(i,o._id))}),$t.prototype.revsDiff=d("revsDiff",function(t,e,n){function i(t,e){a.has(t)||a.set(t,{missing:[]}),a.get(t).missing.push(e)}function r(e,n){var r=t[e].slice(0);Z(n,function(t,n,o,s,a){var u=n+"-"+o,l=r.indexOf(u);l!==-1&&(r.splice(l,1),"available"!==a.status&&i(e,u))}),r.forEach(function(t){i(e,t)})}"function"==typeof e&&(n=e,e={});var o=Object.keys(t);if(!o.length)return n(null,{});var s=0,a=new Er;o.map(function(e){this._getRevisionTree(e,function(i,u){if(i&&404===i.status&&"missing"===i.message)a.set(e,{missing:t[e]});else{if(i)return n(i);r(e,u)}if(++s===o.length){var l={};return a.forEach(function(t,e){l[e]=t}),n(null,l)}})},this)}),$t.prototype.bulkGet=d("bulkGet",function(t,e){w(this,t,e)}),$t.prototype.compactDocument=d("compactDocument",function(t,e,n){var i=this;this._getRevisionTree(t,function(r,o){if(r)return n(r);var s=bt(o),a=[],u=[];Object.keys(s).forEach(function(t){s[t]>e&&a.push(t)}),Z(o,function(t,e,n,i,r){var o=e+"-"+n;"available"===r.status&&a.indexOf(o)!==-1&&u.push(o)}),i._doCompaction(t,u,n)})}),$t.prototype.compact=d("compact",function(t,e){"function"==typeof t&&(e=t,t={});var n=this;t=t||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:t,callback:e}),1===n._compactionQueue.length&&xt(n)}),$t.prototype._compact=function(t,e){function n(t){s.push(r.compactDocument(t.id,0))}function i(t){var n=t.last_seq;wr.all(s).then(function(){return z(r,"_local/compaction",function(t){return(!t.last_seq||t.last_seq<n)&&(t.last_seq=n,t)})}).then(function(){e(null,{ok:!0})})["catch"](e)}var r=this,o={return_docs:!1,last_seq:t.last_seq||0},s=[];r.changes(o).on("change",n).on("complete",i).on("error",e)},$t.prototype.get=d("get",function(t,e,n){function i(){var i=[],s=r.length;return s?void r.forEach(function(r){o.get(t,{rev:r,revs:e.revs,latest:e.latest,attachments:e.attachments,binary:e.binary},function(t,e){if(t)i.push({missing:r});else{for(var o,a=0,u=i.length;a<u;a++)if(i[a].ok&&i[a].ok._rev===e._rev){o=!0;break}o||i.push({ok:e})}s--,s||n(null,i)})}):n(null,i)}if("function"==typeof e&&(n=e,e={}),"string"!=typeof t)return n(M(Pr));if(ht(t)&&"function"==typeof this._getLocal)return this._getLocal(t,n);var r=[],o=this;if(!e.open_revs)return this._get(t,e,function(i,r){if(i)return i.docId=t,n(i);var s=r.doc,a=r.metadata,u=r.ctx;if(e.conflicts){var l=X(a);l.length&&(s._conflicts=l)}if(ct(a,s._rev)&&(s._deleted=!0),e.revs||e.revs_info){for(var c=s._rev.split("-"),h=parseInt(c[0],10),d=c[1],p=J(a.rev_tree),f=null,m=0;m<p.length;m++){var g=p[m],v=g.ids.map(function(t){return t.id}).indexOf(d),y=v===h-1;(y||!f&&v!==-1)&&(f=g)}var _=f.ids.map(function(t){return t.id}).indexOf(s._rev.split("-")[1])+1,b=f.ids.length-_;if(f.ids.splice(_,b),f.ids.reverse(),e.revs&&(s._revisions={start:f.pos+f.ids.length-1,ids:f.ids.map(function(t){return t.id})}),e.revs_info){var w=f.pos+f.ids.length;s._revs_info=f.ids.map(function(t){return w--,{rev:w+"-"+t.id,status:t.opts.status}})}}if(e.attachments&&s._attachments){var x=s._attachments,k=Object.keys(x).length;if(0===k)return n(null,s);Object.keys(x).forEach(function(t){this._getAttachment(s._id,t,x[t],{rev:s._rev,binary:e.binary,ctx:u},function(e,i){var r=s._attachments[t];r.data=i,delete r.stub,delete r.length,--k||n(null,s)})},o)}else{if(s._attachments)for(var $ in s._attachments)s._attachments.hasOwnProperty($)&&(s._attachments[$].stub=!0);n(null,s)}});if("all"===e.open_revs)this._getRevisionTree(t,function(t,e){return t?n(t):(r=Y(e).map(function(t){return t.rev}),void i())});else{if(!Array.isArray(e.open_revs))return n(M(jr,"function_clause"));r=e.open_revs;for(var s=0;s<r.length;s++){var a=r[s];if("string"!=typeof a||!/^\d+-/.test(a))return n(M(Hr))}i()}}),$t.prototype.getAttachment=d("getAttachment",function(t,e,n,i){var r=this;n instanceof Function&&(i=n,n={}),this._get(t,n,function(o,s){return o?i(o):s.doc._attachments&&s.doc._attachments[e]?(n.ctx=s.ctx,n.binary=!0,r._getAttachment(t,e,s.doc._attachments[e],n,i),void 0):i(M(Ar))})}),$t.prototype.allDocs=d("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip="undefined"!=typeof t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(n)return void e(M(qr,"Query parameter `"+n+"` is not compatible with multi-get"));if(!j(this)&&(wt(t),0===t.keys.length))return this._allDocs({limit:0},e)}return this._allDocs(t,e)}),$t.prototype.changes=function(t,e){return"function"==typeof t&&(e=t,t={}),new ft(this,t,e)},$t.prototype.close=d("close",function(t){return this._closed=!0,this.emit("closed"),this._close(t)}),$t.prototype.info=d("info",function(t){var e=this;this._info(function(n,i){return n?t(n):(i.db_name=i.db_name||e.name,i.auto_compaction=!(!e.auto_compaction||j(e)),i.adapter=e.adapter,void t(null,i))})}),$t.prototype.id=d("id",function(t){return this._id(t)}),$t.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},$t.prototype.bulkDocs=d("bulkDocs",function(t,e,n){if("function"==typeof e&&(n=e,e={}),e=e||{},Array.isArray(t)&&(t={docs:t}),!t||!t.docs||!Array.isArray(t.docs))return n(M(Mr));for(var i=0;i<t.docs.length;++i)if("object"!=typeof t.docs[i]||Array.isArray(t.docs[i]))return n(M(Ur));var r;if(t.docs.forEach(function(t){t._attachments&&Object.keys(t._attachments).forEach(function(e){r=r||kt(e),t._attachments[e].content_type||C("warn","Attachment",e,"on document",t._id,"is missing content_type")})}),r)return n(M(Br,r));"new_edits"in e||("new_edits"in t?e.new_edits=t.new_edits:e.new_edits=!0);var o=this;e.new_edits||j(o)||t.docs.sort(_t),yt(t.docs);var s=t.docs.map(function(t){return t._id});return this._bulkDocs(t,e,function(t,i){if(t)return n(t);if(e.new_edits||(i=i.filter(function(t){return t.error})),!j(o))for(var r=0,a=i.length;r<a;r++)i[r].id=i[r].id||s[r];n(null,i)})}),$t.prototype.registerDependentDatabase=d("registerDependentDatabase",function(t,e){function n(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}var i=new this.constructor(t,this.__opts);z(this,"_local/_pouch_dependentDbs",n).then(function(){e(null,{db:i})})["catch"](e)}),$t.prototype.destroy=d("destroy",function(t,e){function n(){i._destroy(t,function(t,n){return t?e(t):(i._destroyed=!0,i.emit("destroyed"),void e(null,n||{ok:!0}))})}"function"==typeof t&&(e=t,t={});var i=this,r=!("use_prefix"in i)||i.use_prefix;return j(i)?n():void i.get("_local/_pouch_dependentDbs",function(t,o){if(t)return 404!==t.status?e(t):n();var s=o.dependentDbs,a=i.constructor,u=Object.keys(s).map(function(t){var e=r?t.replace(new RegExp("^"+a.prefix),""):t;return new a(e,i.__opts).destroy()});wr.all(u).then(n,e)})}),Et.prototype.execute=function(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()},Et.prototype.fail=function(t){this.failed=t,this.execute()},Et.prototype.ready=function(t){this.isReady=!0,this.db=t,this.execute()},Et.prototype.addTask=function(t){this.queue.push(t),this.failed&&this.execute()},gr(Lt,$t),Lt.adapters={},Lt.preferredAdapters=[],Lt.prefix="_pouch_";var Jr=new mr.EventEmitter;St(Lt),Lt.adapter=function(t,e,n){e.valid()&&(Lt.adapters[t]=e,n&&Lt.preferredAdapters.push(t))},Lt.plugin=function(t){if("function"==typeof t)t(Lt);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){Lt.prototype[e]=t[e]})}return this.__defaults&&(Lt.__defaults=Dr({},this.__defaults)),Lt},Lt.defaults=function(t){function e(t,n){return this instanceof e?(n=n||{},t&&"object"==typeof t&&(n=t,t=n.name,delete n.name),n=Dr({},e.__defaults,n),void Lt.call(this,t,n)):new e(t,n)}return gr(e,Lt),e.preferredAdapters=Lt.preferredAdapters.slice(),Object.keys(Lt).forEach(function(t){t in e||(e[t]=Lt[t])}),e.__defaults=Dr({},this.__defaults,t),e};var Qr="6.4.3",to=["$or","$nor","$not"],eo=-324,no=3,io="",ro={$elemMatch:function(t,e,n,i){return!!Array.isArray(i)&&(0!==i.length&&("object"==typeof i[0]?i.some(function(t){return oe(t,e,Object.keys(e))}):i.some(function(i){return se(e,t,n,i)})))},$allMatch:function(t,e,n,i){return!!Array.isArray(i)&&(0!==i.length&&("object"==typeof i[0]?i.every(function(t){return oe(t,e,Object.keys(e))}):i.every(function(i){return se(e,t,n,i)})))},$eq:function(t,e,n,i){return ce(i)&&0===Ht(i,e)},$gte:function(t,e,n,i){return ce(i)&&Ht(i,e)>=0},$gt:function(t,e,n,i){return ce(i)&&Ht(i,e)>0},$lte:function(t,e,n,i){return ce(i)&&Ht(i,e)<=0},$lt:function(t,e,n,i){return ce(i)&&Ht(i,e)<0},$exists:function(t,e,n,i){return e?ce(i):!ce(i)},$mod:function(t,e,n,i){return le(i)&&he(i,e)},$ne:function(t,e,n,i){return e.every(function(t){return 0!==Ht(i,t)})},$in:function(t,e,n,i){return le(i)&&de(i,e)},$nin:function(t,e,n,i){return le(i)&&!de(i,e)},$size:function(t,e,n,i){return le(i)&&fe(i,e)},$all:function(t,e,n,i){return Array.isArray(i)&&pe(i,e)},$regex:function(t,e,n,i){return le(i)&&me(i,e)},$type:function(t,e,n,i){return ge(i,e)}};Lt.plugin(Dt),Lt.plugin($e),Lt.version=Qr;var oo,so=Ee(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),ao=Ee(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]),uo=function(t){return atob(t)},lo=function(t){return btoa(t)},co=n.setImmediate||n.setTimeout,ho=32768,po=5,fo="document-store",mo="by-sequence",go="attach-store",vo="attach-seq-store",yo="meta-store",_o="local-store",bo="detect-blob-support",wo=new E,xo=!1,ko=[],$o=new Er,Eo=new Er;xn.valid=function(){var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&fetch.toString().indexOf("[native code")!==-1;try{return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(n){return!1}};var Co=7,To=Mn("document-store"),Lo=Mn("by-sequence"),So=Mn("attach-store"),Do=Mn("local-store"),Mo=Mn("metadata-store"),Ao=Mn("attach-seq-store"),No=new Er,Po=new E,Oo=1,Io="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+Lo+" (seq, deleted)",jo="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+Lo+" (doc_id, rev)",Ro="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+To+" (winningseq)",qo="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+Ao+" (seq)",Fo="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+Ao+" (digest, seq)",Bo=Lo+".seq = "+To+".winningseq",Uo=Lo+".seq AS seq, "+Lo+".deleted AS deleted, "+Lo+".json AS data, "+Lo+".rev AS rev, "+To+".json AS metadata";Kn.valid=Yn,Kn.use_prefix=!0;var zo=ni(),Vo=25,Ho=50,Wo=5e3,Zo=1e4,Go={};gi.valid=function(){return!0},gr(yi,Error),gr(_i,Error),gr(bi,Error);var Yo=C.bind(null,"log"),Xo=Array.isArray,Ko=JSON.parse;Di.prototype.add=function(t){return this.promise=this.promise["catch"](function(){}).then(function(){return t()}),this.promise},Di.prototype.finish=function(){return this.promise};var Jo={},Qo=new Di,ts=50,es={_sum:function(t,e){return Li(e)},_count:function(t,e){return e.length},_stats:function(t,e){function n(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];e+=r*r}return e}return{sum:Li(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:n(e)}}},ns="mrviews",is=ji(ns,qi,Fi,Bi),rs={query:Ui,viewCleanup:zi},os=1,ss="pouchdb",as=5,us=0;Ki.prototype.writeCheckpoint=function(t,e){var n=this;return this.updateTarget(t,e).then(function(){return n.updateSource(t,e)})},Ki.prototype.updateTarget=function(t,e){return this.opts.writeTargetCheckpoint?Xi(this.target,this.id,t,e,this.returnValue):wr.resolve(!0)},Ki.prototype.updateSource=function(t,e){if(this.opts.writeSourceCheckpoint){var n=this;return Xi(this.src,this.id,t,e,this.returnValue)["catch"](function(t){if(er(t))return n.opts.writeSourceCheckpoint=!1,!0;throw t})}return wr.resolve(!0)};var ls={undefined:function(t,e){return 0===Ht(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return Ji(e,t).last_seq}};Ki.prototype.getCheckpoint=function(){var t=this;return t.opts&&t.opts.writeSourceCheckpoint&&!t.opts.writeTargetCheckpoint?t.src.get(t.id).then(function(t){return t.last_seq||us})["catch"](function(t){if(404!==t.status)throw t;return us}):t.target.get(t.id).then(function(e){return t.opts&&t.opts.writeTargetCheckpoint&&!t.opts.writeSourceCheckpoint?e.last_seq||us:t.src.get(t.id).then(function(t){if(e.version!==t.version)return us;var n;return n=e.version?e.version.toString():"undefined",n in ls?ls[n](e,t):us},function(n){if(404===n.status&&e.last_seq)return t.src.put({_id:t.id,last_seq:us}).then(function(){return us},function(n){return er(n)?(t.opts.writeSourceCheckpoint=!1,e.last_seq):us});throw n})})["catch"](function(t){if(404!==t.status)throw t;return us})};var cs=0;gr(sr,mr.EventEmitter),sr.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},sr.prototype.ready=function(t,e){function n(){r.cancel()}function i(){t.removeListener("destroyed",n),e.removeListener("destroyed",n)}var r=this;r._readyCalled||(r._readyCalled=!0,t.once("destroyed",n),e.once("destroyed",n),r.once("complete",i))},gr(cr,mr.EventEmitter),cr.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},Lt.plugin(En).plugin(Jn).plugin(vi).plugin(rs).plugin(hr),e.exports=Lt}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{argsarray:3,debug:81,events:67,immediate:69,inherits:70,lie:83,"spark-md5":86,uuid:89,vuvuzela:97}],81:[function(t,e,n){(function(i){function r(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),e){var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(r++,"%c"===t&&(o=r))}),t.splice(o,0,i)}}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(e){}}function u(){var t;try{t=n.storage.debug}catch(e){}return!t&&"undefined"!=typeof i&&"env"in i&&(t=i.env.DEBUG),t}function l(){try{return window.localStorage}catch(t){}}n=e.exports=t("./debug"),n.log=s,n.formatArgs=o,n.save=a,n.load=u,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],
n.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(u())}).call(this,t("_process"))},{"./debug":82,_process:84}],82:[function(t,e,n){function i(t){var e,i=0;for(e in t)i=(i<<5)-i+t.charCodeAt(e),i|=0;return n.colors[Math.abs(i)%n.colors.length]}function r(t){function e(){if(e.enabled){var t=e,i=+new Date,o=i-(r||i);t.diff=o,t.prev=r,t.curr=i,r=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(e,i){if("%%"===e)return e;u++;var r=n.formatters[i];if("function"==typeof r){var o=s[u];e=r.call(t,o),s.splice(u,1),u--}return e}),n.formatArgs.call(t,s);var l=e.log||n.log||console.log.bind(console);l.apply(t,s)}}var r;return e.namespace=t,e.enabled=n.enabled(t),e.useColors=n.useColors(),e.color=i(t),e.destroy=o,"function"==typeof n.init&&n.init(e),n.instances.push(e),e}function o(){var t=n.instances.indexOf(this);return t!==-1&&(n.instances.splice(t,1),!0)}function s(t){n.save(t),n.names=[],n.skips=[];var e,i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(e=0;e<r;e++)i[e]&&(t=i[e].replace(/\*/g,".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")));for(e=0;e<n.instances.length;e++){var o=n.instances[e];o.enabled=n.enabled(o.namespace)}}function a(){n.enable("")}function u(t){if("*"===t[t.length-1])return!0;var e,i;for(e=0,i=n.skips.length;e<i;e++)if(n.skips[e].test(t))return!1;for(e=0,i=n.names.length;e<i;e++)if(n.names[e].test(t))return!0;return!1}function l(t){return t instanceof Error?t.stack||t.message:t}n=e.exports=r.debug=r["default"]=r,n.coerce=l,n.disable=a,n.enable=s,n.enabled=u,n.humanize=t("ms"),n.instances=[],n.names=[],n.skips=[],n.formatters={}},{ms:79}],83:[function(t,e,n){"use strict";function i(){}function r(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,t!==i&&u(this,t)}function o(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function s(t,e,n){f(function(){var i;try{i=e(n)}catch(r){return m.reject(t,r)}i===t?m.reject(t,new TypeError("Cannot resolve promise with itself")):m.resolve(t,i)})}function a(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function u(t,e){function n(e){o||(o=!0,m.reject(t,e))}function i(e){o||(o=!0,m.resolve(t,e))}function r(){e(i,n)}var o=!1,s=l(r);"error"===s.status&&n(s.value)}function l(t,e){var n={};try{n.value=t(e),n.status="success"}catch(i){n.status="error",n.value=i}return n}function c(t){return t instanceof this?t:m.resolve(new this(i),t)}function h(t){var e=new this(i);return m.reject(e,t)}function d(t){function e(t,e){function i(t){s[e]=t,++a!==r||o||(o=!0,m.resolve(l,s))}n.resolve(t).then(i,function(t){o||(o=!0,m.reject(l,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,o=!1;if(!r)return this.resolve([]);for(var s=new Array(r),a=0,u=-1,l=new this(i);++u<r;)e(t[u],u);return l}function p(t){function e(t){n.resolve(t).then(function(t){o||(o=!0,m.resolve(a,t))},function(t){o||(o=!0,m.reject(a,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,o=!1;if(!r)return this.resolve([]);for(var s=-1,a=new this(i);++s<r;)e(t[s]);return a}var f=t("immediate"),m={},g=["REJECTED"],v=["FULFILLED"],y=["PENDING"];e.exports=r,r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){if("function"!=typeof t&&this.state===v||"function"!=typeof e&&this.state===g)return this;var n=new this.constructor(i);if(this.state!==y){var r=this.state===v?t:e;s(n,r,this.outcome)}else this.queue.push(new o(n,t,e));return n},o.prototype.callFulfilled=function(t){m.resolve(this.promise,t)},o.prototype.otherCallFulfilled=function(t){s(this.promise,this.onFulfilled,t)},o.prototype.callRejected=function(t){m.reject(this.promise,t)},o.prototype.otherCallRejected=function(t){s(this.promise,this.onRejected,t)},m.resolve=function(t,e){var n=l(a,e);if("error"===n.status)return m.reject(t,n.value);var i=n.value;if(i)u(t,i);else{t.state=v,t.outcome=e;for(var r=-1,o=t.queue.length;++r<o;)t.queue[r].callFulfilled(e)}return t},m.reject=function(t,e){t.state=g,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},r.resolve=c,r.reject=h,r.all=d,r.race=p},{immediate:69}],84:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function s(t){if(d===clearTimeout)return clearTimeout(t);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function a(){g&&f&&(g=!1,f.length?m=f.concat(m):v=-1,m.length&&u())}function u(){if(!g){var t=o(a);g=!0;for(var e=m.length;e;){for(f=m,m=[];++v<e;)f&&f[v].run();v=-1,e=m.length}f=null,g=!1,s(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var h,d,p=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(t){h=i}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(t){d=r}}();var f,m=[],g=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new l(t,e)),1!==m.length||g||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],85:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?e.exports=i():"function"==typeof define&&define.amd?define(i):t.SignaturePad=i()}(this,function(){"use strict";function t(t,e,n){this.x=t,this.y=e,this.time=n||(new Date).getTime()}function e(t,e,n,i){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=i}function n(t,e,n){var i,r,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:Date.now(),s=null,o=t.apply(i,r),s||(i=r=null)};return function(){var l=Date.now();a||n.leading!==!1||(a=l);var c=e-(l-a);return i=this,r=arguments,c<=0||c>e?(s&&(clearTimeout(s),s=null),a=l,o=t.apply(i,r),s||(i=r=null)):s||n.trailing===!1||(s=setTimeout(u,c)),o}}function i(t,e){var r=this,o=e||{};this.velocityFilterWeight=o.velocityFilterWeight||.7,this.minWidth=o.minWidth||.5,this.maxWidth=o.maxWidth||2.5,this.throttle="throttle"in o?o.throttle:16,this.minDistance="minDistance"in o?o.minDistance:5,this.throttle?this._strokeMoveUpdate=n(i.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=i.prototype._strokeUpdate,this.dotSize=o.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=o.penColor||"black",this.backgroundColor=o.backgroundColor||"rgba(0,0,0,0)",this.onBegin=o.onBegin,this.onEnd=o.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(r._mouseButtonDown=!0,r._strokeBegin(t))},this._handleMouseMove=function(t){r._mouseButtonDown&&r._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&r._mouseButtonDown&&(r._mouseButtonDown=!1,r._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var e=t.changedTouches[0];r._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];r._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){var e=t.target===r._canvas;e&&(t.preventDefault(),r._strokeEnd(t))},this.on()}return t.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},e.prototype.length=function(){for(var t=10,e=0,n=void 0,i=void 0,r=0;r<=t;r+=1){var o=r/t,s=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){var u=s-n,l=a-i;e+=Math.sqrt(u*u+l*l)}n=s,i=a}return e},e.prototype._point=function(t,e,n,i,r){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*i*(1-t)*t*t+r*t*t*t},i.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},i.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new Image,r=n.ratio||window.devicePixelRatio||1,o=n.width||this._canvas.width/r,s=n.height||this._canvas.height/r;this._reset(),i.src=t,i.onload=function(){e._ctx.drawImage(i,0,0,o,s)},this._isEmpty=!1},i.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(e=this._canvas).toDataURL.apply(e,[t].concat(i))}},i.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},i.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},i.prototype.isEmpty=function(){return this._isEmpty},i.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},i.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,i=this._createPoint(e,n),r=this._data[this._data.length-1],o=r&&r[r.length-1],s=o&&i.distanceTo(o)<this.minDistance;if(!o||!s){var a=this._addPoint(i),u=a.curve,l=a.widths;u&&l&&this._drawCurve(u,l.start,l.end),this._data[this._data.length-1].push({x:i.x,y:i.y,time:i.time,color:this.penColor})}},i.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var i=this._data[this._data.length-1],r=i[i.length-1];n.equals(r)||i.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(t)},i.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},i.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},i.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},i.prototype._createPoint=function(e,n,i){var r=this._canvas.getBoundingClientRect();return new t(e-r.left,n-r.top,i||(new Date).getTime())},i.prototype._addPoint=function(t){var n=this.points,i=void 0;if(n.push(t),n.length>2){3===n.length&&n.unshift(n[0]),i=this._calculateCurveControlPoints(n[0],n[1],n[2]);var r=i.c2;i=this._calculateCurveControlPoints(n[1],n[2],n[3]);var o=i.c1,s=new e(n[1],r,o,n[2]),a=this._calculateCurveWidths(s);return n.shift(),{curve:s,widths:a}}return{}},i.prototype._calculateCurveControlPoints=function(e,n,i){var r=e.x-n.x,o=e.y-n.y,s=n.x-i.x,a=n.y-i.y,u={x:(e.x+n.x)/2,y:(e.y+n.y)/2},l={x:(n.x+i.x)/2,y:(n.y+i.y)/2},c=Math.sqrt(r*r+o*o),h=Math.sqrt(s*s+a*a),d=u.x-l.x,p=u.y-l.y,f=h/(c+h),m={x:l.x+d*f,y:l.y+p*f},g=n.x-m.x,v=n.y-m.y;return{c1:new t(u.x+g,u.y+v),c2:new t(l.x+g,l.y+v)}},i.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,i={start:null,end:null},r=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(r);return i.start=this._lastWidth,i.end=o,this._lastVelocity=r,this._lastWidth=o,i},i.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},i.prototype._drawPoint=function(t,e,n){var i=this._ctx;i.moveTo(t,e),i.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1},i.prototype._drawCurve=function(t,e,n){var i=this._ctx,r=n-e,o=Math.floor(t.length());i.beginPath();for(var s=0;s<o;s+=1){var a=s/o,u=a*a,l=u*a,c=1-a,h=c*c,d=h*c,p=d*t.startPoint.x;p+=3*h*a*t.control1.x,p+=3*c*u*t.control2.x,p+=l*t.endPoint.x;var f=d*t.startPoint.y;f+=3*h*a*t.control1.y,f+=3*c*u*t.control2.y,f+=l*t.endPoint.y;var m=e+l*r;this._drawPoint(p,f,m)}i.closePath(),i.fill()},i.prototype._drawDot=function(t){var e=this._ctx,n="function"==typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()},i.prototype._fromData=function(e,n,i){for(var r=0;r<e.length;r+=1){var o=e[r];if(o.length>1)for(var s=0;s<o.length;s+=1){var a=o[s],u=new t(a.x,a.y,a.time),l=a.color;if(0===s)this.penColor=l,this._reset(),this._addPoint(u);else if(s!==o.length-1){var c=this._addPoint(u),h=c.curve,d=c.widths;h&&d&&n(h,d,l)}}else{this._reset();var p=o[0];i(p)}}},i.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,i=Math.max(window.devicePixelRatio||1,1),r=0,o=0,s=n.width/i,a=n.height/i,u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttributeNS(null,"width",n.width),u.setAttributeNS(null,"height",n.height),this._fromData(e,function(t,e,n){var i=document.createElement("path");if(!(isNaN(t.control1.x)||isNaN(t.control1.y)||isNaN(t.control2.x)||isNaN(t.control2.y))){var r="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" "+("C "+t.control1.x.toFixed(3)+","+t.control1.y.toFixed(3)+" ")+(t.control2.x.toFixed(3)+","+t.control2.y.toFixed(3)+" ")+(t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3));i.setAttribute("d",r),i.setAttribute("stroke-width",(2.25*e.end).toFixed(3)),i.setAttribute("stroke",n),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),u.appendChild(i)}},function(e){var n=document.createElement("circle"),i="function"==typeof t.dotSize?t.dotSize():t.dotSize;n.setAttribute("r",i),n.setAttribute("cx",e.x),n.setAttribute("cy",e.y),n.setAttribute("fill",e.color),u.appendChild(n)});var l="data:image/svg+xml;base64,",c='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+r+" "+o+" "+s+" "+a+'"')+(' width="'+s+'"')+(' height="'+a+'"')+">",h=u.innerHTML;if(void 0===h){var d=document.createElement("dummy"),p=u.childNodes;d.innerHTML="";for(var f=0;f<p.length;f+=1)d.appendChild(p[f].cloneNode(!0));h=d.innerHTML}var m="</svg>",g=c+h+m;return l+btoa(g)},i.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(t,n){return e._drawCurve(t,n.start,n.end)},function(t){return e._drawDot(t)}),this._data=t},i.prototype.toData=function(){return this._data},i})},{}],86:[function(t,e,n){!function(t){if("object"==typeof n)e.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var i;try{i=window}catch(r){i=self}i.SparkMD5=t()}}(function(t){"use strict";function e(t,e){var n=t[0],i=t[1],r=t[2],o=t[3];n+=(i&r|~i&o)+e[0]-680876936|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&r)+e[1]-389564586|0,o=(o<<12|o>>>20)+n|0,r+=(o&n|~o&i)+e[2]+606105819|0,r=(r<<17|r>>>15)+o|0,i+=(r&o|~r&n)+e[3]-1044525330|0,i=(i<<22|i>>>10)+r|0,n+=(i&r|~i&o)+e[4]-176418897|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&r)+e[5]+1200080426|0,o=(o<<12|o>>>20)+n|0,r+=(o&n|~o&i)+e[6]-1473231341|0,r=(r<<17|r>>>15)+o|0,i+=(r&o|~r&n)+e[7]-45705983|0,i=(i<<22|i>>>10)+r|0,n+=(i&r|~i&o)+e[8]+1770035416|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&r)+e[9]-1958414417|0,o=(o<<12|o>>>20)+n|0,r+=(o&n|~o&i)+e[10]-42063|0,r=(r<<17|r>>>15)+o|0,i+=(r&o|~r&n)+e[11]-1990404162|0,i=(i<<22|i>>>10)+r|0,n+=(i&r|~i&o)+e[12]+1804603682|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&r)+e[13]-40341101|0,o=(o<<12|o>>>20)+n|0,r+=(o&n|~o&i)+e[14]-1502002290|0,r=(r<<17|r>>>15)+o|0,i+=(r&o|~r&n)+e[15]+1236535329|0,i=(i<<22|i>>>10)+r|0,n+=(i&o|r&~o)+e[1]-165796510|0,n=(n<<5|n>>>27)+i|0,o+=(n&r|i&~r)+e[6]-1069501632|0,o=(o<<9|o>>>23)+n|0,r+=(o&i|n&~i)+e[11]+643717713|0,r=(r<<14|r>>>18)+o|0,i+=(r&n|o&~n)+e[0]-373897302|0,i=(i<<20|i>>>12)+r|0,n+=(i&o|r&~o)+e[5]-701558691|0,n=(n<<5|n>>>27)+i|0,o+=(n&r|i&~r)+e[10]+38016083|0,o=(o<<9|o>>>23)+n|0,r+=(o&i|n&~i)+e[15]-660478335|0,r=(r<<14|r>>>18)+o|0,i+=(r&n|o&~n)+e[4]-405537848|0,i=(i<<20|i>>>12)+r|0,n+=(i&o|r&~o)+e[9]+568446438|0,n=(n<<5|n>>>27)+i|0,o+=(n&r|i&~r)+e[14]-1019803690|0,o=(o<<9|o>>>23)+n|0,r+=(o&i|n&~i)+e[3]-187363961|0,r=(r<<14|r>>>18)+o|0,i+=(r&n|o&~n)+e[8]+1163531501|0,i=(i<<20|i>>>12)+r|0,n+=(i&o|r&~o)+e[13]-1444681467|0,n=(n<<5|n>>>27)+i|0,o+=(n&r|i&~r)+e[2]-51403784|0,o=(o<<9|o>>>23)+n|0,r+=(o&i|n&~i)+e[7]+1735328473|0,r=(r<<14|r>>>18)+o|0,i+=(r&n|o&~n)+e[12]-1926607734|0,i=(i<<20|i>>>12)+r|0,n+=(i^r^o)+e[5]-378558|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^r)+e[8]-2022574463|0,o=(o<<11|o>>>21)+n|0,r+=(o^n^i)+e[11]+1839030562|0,r=(r<<16|r>>>16)+o|0,i+=(r^o^n)+e[14]-35309556|0,i=(i<<23|i>>>9)+r|0,n+=(i^r^o)+e[1]-1530992060|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^r)+e[4]+1272893353|0,o=(o<<11|o>>>21)+n|0,r+=(o^n^i)+e[7]-155497632|0,r=(r<<16|r>>>16)+o|0,i+=(r^o^n)+e[10]-1094730640|0,i=(i<<23|i>>>9)+r|0,n+=(i^r^o)+e[13]+681279174|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^r)+e[0]-358537222|0,o=(o<<11|o>>>21)+n|0,r+=(o^n^i)+e[3]-722521979|0,r=(r<<16|r>>>16)+o|0,i+=(r^o^n)+e[6]+76029189|0,i=(i<<23|i>>>9)+r|0,n+=(i^r^o)+e[9]-640364487|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^r)+e[12]-421815835|0,o=(o<<11|o>>>21)+n|0,r+=(o^n^i)+e[15]+530742520|0,r=(r<<16|r>>>16)+o|0,i+=(r^o^n)+e[2]-995338651|0,i=(i<<23|i>>>9)+r|0,n+=(r^(i|~o))+e[0]-198630844|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~r))+e[7]+1126891415|0,o=(o<<10|o>>>22)+n|0,r+=(n^(o|~i))+e[14]-1416354905|0,r=(r<<15|r>>>17)+o|0,i+=(o^(r|~n))+e[5]-57434055|0,i=(i<<21|i>>>11)+r|0,n+=(r^(i|~o))+e[12]+1700485571|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~r))+e[3]-1894986606|0,o=(o<<10|o>>>22)+n|0,r+=(n^(o|~i))+e[10]-1051523|0,r=(r<<15|r>>>17)+o|0,i+=(o^(r|~n))+e[1]-2054922799|0,i=(i<<21|i>>>11)+r|0,n+=(r^(i|~o))+e[8]+1873313359|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~r))+e[15]-30611744|0,o=(o<<10|o>>>22)+n|0,r+=(n^(o|~i))+e[6]-1560198380|0,r=(r<<15|r>>>17)+o|0,i+=(o^(r|~n))+e[13]+1309151649|0,i=(i<<21|i>>>11)+r|0,n+=(r^(i|~o))+e[4]-145523070|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~r))+e[11]-1120210379|0,o=(o<<10|o>>>22)+n|0,r+=(n^(o|~i))+e[2]+718787259|0,r=(r<<15|r>>>17)+o|0,i+=(o^(r|~n))+e[9]-343485551|0,i=(i<<21|i>>>11)+r|0,t[0]=n+t[0]|0,t[1]=i+t[1]|0,t[2]=r+t[2]|0,t[3]=o+t[3]|0}function n(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function i(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function r(t){var i,r,o,s,a,u,l=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=l;i+=64)e(c,n(t.substring(i-64,i)));for(t=t.substring(i-64),r=t.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<r;i+=1)o[i>>2]|=t.charCodeAt(i)<<(i%4<<3);if(o[i>>2]|=128<<(i%4<<3),i>55)for(e(c,o),i=0;i<16;i+=1)o[i]=0;return s=8*l,s=s.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,o[14]=a,o[15]=u,e(c,o),c}function o(t){var n,r,o,s,a,u,l=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=l;n+=64)e(c,i(t.subarray(n-64,n)));for(t=n-64<l?t.subarray(n-64):new Uint8Array(0),r=t.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<r;n+=1)o[n>>2]|=t[n]<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(e(c,o),n=0;n<16;n+=1)o[n]=0;return s=8*l,s=s.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,o[14]=a,o[15]=u,e(c,o),c}function s(t){var e,n="";for(e=0;e<4;e+=1)n+=m[t>>8*e+4&15]+m[t>>8*e&15];return n}function a(t){var e;for(e=0;e<t.length;e+=1)t[e]=s(t[e]);return t.join("")}function u(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function l(t,e){var n,i=t.length,r=new ArrayBuffer(i),o=new Uint8Array(r);for(n=0;n<i;n+=1)o[n]=t.charCodeAt(n);return e?o:r}function c(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function h(t,e,n){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t)),i.set(new Uint8Array(e),t.byteLength),n?i:i.buffer}function d(t){var e,n=[],i=t.length;for(e=0;e<i-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function p(){this.reset()}var f=function(t,e){return t+e&4294967295},m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==a(r("hello"))&&(f=function(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function e(t,e){return t=0|t||0,t<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,i){var r,o,s,a,u=this.byteLength,l=e(n,u),c=u;return i!==t&&(c=e(i,u)),l>c?new ArrayBuffer(0):(r=c-l,o=new ArrayBuffer(r),s=new Uint8Array(o),a=new Uint8Array(this,l,r),s.set(a),o)}}(),p.prototype.append=function(t){return this.appendBinary(u(t)),this},p.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var i,r=this._buff.length;for(i=64;i<=r;i+=64)e(this._hash,n(this._buff.substring(i-64,i)));return this._buff=this._buff.substring(i-64),this},p.prototype.end=function(t){var e,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r;e+=1)o[e>>2]|=i.charCodeAt(e)<<(e%4<<3);return this._finish(o,r),n=a(this._hash),t&&(n=d(n)),this.reset(),n},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},p.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(t,n){var i,r,o,s=n;if(t[s>>2]|=128<<(s%4<<3),s>55)for(e(this._hash,t),s=0;s<16;s+=1)t[s]=0;i=8*this._length,i=i.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(i[2],16),o=parseInt(i[1],16)||0,t[14]=r,t[15]=o,e(this._hash,t)},p.hash=function(t,e){return p.hashBinary(u(t),e)},p.hashBinary=function(t,e){var n=r(t),i=a(n);return e?d(i):i},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(t){var n,r=h(this._buff.buffer,t,!0),o=r.length;for(this._length+=t.byteLength,n=64;n<=o;n+=64)e(this._hash,i(r.subarray(n-64,n)));return this._buff=n-64<o?new Uint8Array(r.buffer.slice(n-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(t){var e,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r;e+=1)o[e>>2]|=i[e]<<(e%4<<3);return this._finish(o,r),n=a(this._hash),t&&(n=d(n)),this.reset(),n},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var t=p.prototype.getState.call(this);return t.buff=c(t.buff),t},p.ArrayBuffer.prototype.setState=function(t){return t.buff=l(t.buff,!0),p.prototype.setState.call(this,t)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(t,e){var n=o(new Uint8Array(t)),i=a(n);return e?d(i):i},p})},{}],87:[function(t,e,n){!function(t){t(["jquery"],function(t){return function(){function e(t,e,n){return f({type:w.error,iconClass:m().iconClasses.error,message:t,optionsOverride:n,title:e})}function n(e,n){return e||(e=m()),v=t("#"+e.containerId),v.length?v:(n&&(v=h(e)),v)}function i(t,e,n){return f({type:w.info,iconClass:m().iconClasses.info,message:t,optionsOverride:n,title:e})}function r(t){y=t}function o(t,e,n){return f({type:w.success,iconClass:m().iconClasses.success,message:t,optionsOverride:n,title:e})}function s(t,e,n){return f({type:w.warning,iconClass:m().iconClasses.warning,message:t,optionsOverride:n,title:e})}function a(t,e){var i=m();v||n(i),c(t,i,e)||l(i)}function u(e){var i=m();return v||n(i),e&&0===t(":focus",e).length?void g(e):void(v.children().length&&v.remove())}function l(e){for(var n=v.children(),i=n.length-1;i>=0;i--)c(t(n[i]),e)}function c(e,n,i){var r=!(!i||!i.force)&&i.force;return!(!e||!r&&0!==t(":focus",e).length)&&(e[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){g(e)}}),!0)}function h(e){return v=t("<div/>").attr("id",e.containerId).addClass(e.positionClass),v.appendTo(t(e.target)),v}function d(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function p(t){y&&y(t)}function f(e){function i(t){return null==t&&(t=""),t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(){u(),c(),h(),d(),f(),y(),l(),o()}function o(){var t="";switch(e.iconClass){case"toast-success":case"toast-info":t="polite";break;default:t="assertive"}S.attr("aria-live",t)}function s(){C.closeOnHover&&S.hover($,k),!C.onclick&&C.tapToDismiss&&S.click(x),C.closeButton&&N&&N.click(function(t){t.stopPropagation?t.stopPropagation():void 0!==t.cancelBubble&&t.cancelBubble!==!0&&(t.cancelBubble=!0),C.onCloseClick&&C.onCloseClick(t),x(!0)}),C.onclick&&S.click(function(t){C.onclick(t),x()})}function a(){S.hide(),S[C.showMethod]({duration:C.showDuration,easing:C.showEasing,complete:C.onShown}),C.timeOut>0&&(L=setTimeout(x,C.timeOut),P.maxHideTime=parseFloat(C.timeOut),P.hideEta=(new Date).getTime()+P.maxHideTime,C.progressBar&&(P.intervalId=setInterval(E,10)))}function u(){e.iconClass&&S.addClass(C.toastClass).addClass(T)}function l(){C.newestOnTop?v.prepend(S):v.append(S)}function c(){if(e.title){var t=e.title;C.escapeHtml&&(t=i(e.title)),D.append(t).addClass(C.titleClass),S.append(D)}}function h(){if(e.message){var t=e.message;C.escapeHtml&&(t=i(e.message)),M.append(t).addClass(C.messageClass),S.append(M)}}function d(){C.closeButton&&(N.addClass(C.closeClass).attr("role","button"),S.prepend(N))}function f(){C.progressBar&&(A.addClass(C.progressClass),S.prepend(A))}function y(){C.rtl&&S.addClass("rtl")}function w(t,e){if(t.preventDuplicates){if(e.message===_)return!0;_=e.message}return!1}function x(e){var n=e&&C.closeMethod!==!1?C.closeMethod:C.hideMethod,i=e&&C.closeDuration!==!1?C.closeDuration:C.hideDuration,r=e&&C.closeEasing!==!1?C.closeEasing:C.hideEasing;if(!t(":focus",S).length||e)return clearTimeout(P.intervalId),S[n]({duration:i,easing:r,complete:function(){g(S),clearTimeout(L),C.onHidden&&"hidden"!==O.state&&C.onHidden(),O.state="hidden",O.endTime=new Date,p(O)}})}function k(){(C.timeOut>0||C.extendedTimeOut>0)&&(L=setTimeout(x,C.extendedTimeOut),P.maxHideTime=parseFloat(C.extendedTimeOut),P.hideEta=(new Date).getTime()+P.maxHideTime)}function $(){clearTimeout(L),P.hideEta=0,S.stop(!0,!0)[C.showMethod]({duration:C.showDuration,easing:C.showEasing})}function E(){var t=(P.hideEta-(new Date).getTime())/P.maxHideTime*100;A.width(t+"%")}var C=m(),T=e.iconClass||C.iconClass;if("undefined"!=typeof e.optionsOverride&&(C=t.extend(C,e.optionsOverride),T=e.optionsOverride.iconClass||T),!w(C,e)){b++,v=n(C,!0);var L=null,S=t("<div/>"),D=t("<div/>"),M=t("<div/>"),A=t("<div/>"),N=t(C.closeHtml),P={intervalId:null,hideEta:null,maxHideTime:null},O={toastId:b,state:"visible",startTime:new Date,options:C,map:e};return r(),a(),s(),p(O),C.debug&&console&&console.log(O),S}}function m(){return t.extend({},d(),x.options)}function g(t){v||(v=n()),t.is(":visible")||(t.remove(),t=null,0===v.children().length&&(v.remove(),_=void 0))}var v,y,_,b=0,w={error:"error",info:"info",success:"success",warning:"warning"},x={clear:a,remove:u,error:e,getContainer:n,info:i,options:{},subscribe:r,success:o,version:"2.1.4",warning:s};return x}()})}("function"==typeof define&&define.amd?define:function(n,i){"undefined"!=typeof e&&e.exports?e.exports=i(t("jquery")):window.toastr=i(window.jQuery)})},{jquery:72}],88:[function(t,e,n){(function(t){"use strict";function n(t){return encodeURIComponent(t).replace(a,c)}function i(t){return decodeURIComponent(t.replace(u," "))}function r(t){if(this[d]=Object.create(null),t)for(var e,n,r=(t||"").split("&"),o=0,s=r.length;o<s;o++)n=r[o],e=n.indexOf("="),-1<e&&this.append(i(n.slice(0,e)),i(n.slice(e+1)))}function o(){try{return!!Symbol.iterator}catch(t){return!1}}var s=r.prototype,a=/[!'\(\)~]|%20|%00/g,u=/\+/g,l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},c=function(t){return l[t]},h=o(),d="__URLSearchParams__:"+Math.random();s.append=function(t,e){var n=this[d];t in n?n[t].push(""+e):n[t]=[""+e]},s["delete"]=function(t){delete this[d][t]},s.get=function(t){var e=this[d];return t in e?e[t][0]:null},s.getAll=function(t){var e=this[d];return t in e?e[t].slice(0):[]},s.has=function(t){return t in this[d]},s.set=function(t,e){this[d][t]=[""+e]},s.forEach=function(t,e){var n=this[d];Object.getOwnPropertyNames(n).forEach(function(i){n[i].forEach(function(n){t.call(e,n,i,this)},this)},this)},s.keys=function(){var t=[];this.forEach(function(e,n){t.push(n)});var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return h&&(e[Symbol.iterator]=function(){return e}),e},s.values=function(){var t=[];this.forEach(function(e){t.push(e)});var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return h&&(e[Symbol.iterator]=function(){return e}),e},s.entries=function(){var t=[];this.forEach(function(e,n){t.push([n,e])});var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return h&&(e[Symbol.iterator]=function(){return e}),e},h&&(s[Symbol.iterator]=s.entries),s.toJSON=function(){return{}},s.toString=function(){var t,e,i,r,o=this[d],s=[];for(e in o)for(i=n(e),t=0,r=o[e];t<r.length;t++)s.push(i+"="+n(r[t]));return s.join("&")},e.exports=t.URLSearchParams||r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],89:[function(t,e,n){var i=t("./v1"),r=t("./v4"),o=r;o.v1=i,o.v4=r,e.exports=o},{"./v1":92,"./v4":93}],90:[function(t,e,n){function i(t,e){var n=e||0,i=r;return i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]}for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);
e.exports=i},{}],91:[function(t,e,n){var i="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(i){var r=new Uint8Array(16);e.exports=function(){return i(r),r}}else{var o=new Array(16);e.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},{}],92:[function(t,e,n){function i(t,e,n){var i=e&&n||0,c=e||[];t=t||{};var h=t.node||r,d=void 0!==t.clockseq?t.clockseq:o;if(null==h||null==d){var p=s();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=o=16383&(p[6]<<8|p[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),m=void 0!==t.nsecs?t.nsecs:l+1,g=f-u+(m-l)/1e4;if(g<0&&void 0===t.clockseq&&(d=d+1&16383),(g<0||f>u)&&void 0===t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=f,l=m,o=d,f+=122192928e5;var v=(1e4*(268435455&f)+m)%4294967296;c[i++]=v>>>24&255,c[i++]=v>>>16&255,c[i++]=v>>>8&255,c[i++]=255&v;var y=f/4294967296*1e4&268435455;c[i++]=y>>>8&255,c[i++]=255&y,c[i++]=y>>>24&15|16,c[i++]=y>>>16&255,c[i++]=d>>>8|128,c[i++]=255&d;for(var _=0;_<6;++_)c[i+_]=h[_];return e?e:a(c)}var r,o,s=t("./lib/rng"),a=t("./lib/bytesToUuid"),u=0,l=0;e.exports=i},{"./lib/bytesToUuid":90,"./lib/rng":91}],93:[function(t,e,n){function i(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var s=t.random||(t.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[i+a]=s[a];return e||o(s)}var r=t("./lib/rng"),o=t("./lib/bytesToUuid");e.exports=i},{"./lib/bytesToUuid":90,"./lib/rng":91}],94:[function(t,e,n){!function(t){"use strict";function e(e){return{restrict:"E",transclude:!0,controller:n,scope:{control:"=?",expandCb:"&?onexpand",collapseCb:"&?oncollapse",id:"@?"},link:{pre:function(e,n,i){e.allowMultiple=t.isDefined(i.multiple)&&(""===i.multiple||"true"===i.multiple)},post:function(n,i,r,o,s){function a(){var e=["toggle","expand","collapse","expandAll","collapseAll","hasExpandedPane"];t.forEach(e,function(t){if(n.control[t])throw new Error("The `"+t+"` method can not be overwritten")})}if(s(n.$parent.$new(),function(t,e){e.$accordion=n.internalControl,n.id&&(e.$accordion.id=n.id),i.append(t)}),r.$set("role","tablist"),n.allowMultiple&&r.$set("aria-multiselectable","true"),t.isDefined(n.control)){a();var u=t.extend({},n.internalControl,n.control);n.control=n.internalControl=u}else n.control=n.internalControl;e(function(){var e=t.isDefined(o.getAccordionId())?o.getAccordionId()+":onReady":"vAccordion:onReady";n.$emit(e)},0)}}}}function n(e){var n=this,i=!1;e.panes=[],e.expandCb=t.isFunction(e.expandCb)?e.expandCb:t.noop,e.collapseCb=t.isFunction(e.collapseCb)?e.collapseCb:t.noop,n.hasExpandedPane=function(){for(var t=!1,n=0,i=e.panes.length;n<i;n++){var r=e.panes[n];if(r.isExpanded){t=!0;break}}return t},n.getPaneByIndex=function(n){var i;return t.forEach(e.panes,function(e){e.$parent&&t.isDefined(e.$parent.$index)&&e.$parent.$index===n&&(i=e)}),i?i:e.panes[n]},n.getPaneIndex=function(n){var i;return t.forEach(e.panes,function(e){e.$parent&&t.isDefined(e.$parent.$index)&&e===n&&(i=e.$parent.$index)}),t.isDefined(i)?i:e.panes.indexOf(n)},n.getPaneById=function(n){var i;return t.forEach(e.panes,function(t){t.id&&t.id===n&&(i=t)}),i},n.getPaneId=function(t){return t.id},n.getAccordionId=function(){return e.id},n.disable=function(){i=!0},n.enable=function(){i=!1},n.addPane=function(t){if(!e.allowMultiple&&n.hasExpandedPane()&&t.isExpanded)throw new Error("The `multiple` attribute can't be found");e.panes.push(t),t.isExpanded&&e.expandCb({index:n.getPaneIndex(t),id:t.id,pane:t})},n.focusNext=function(){for(var t=e.panes.length,n=0;n<t;n++){var i=e.panes[n];if(i.isFocused){var r=n+1;r>e.panes.length-1&&(r=0);var o=e.panes[r];o.paneElement.find("v-pane-header")[0].focus();break}}},n.focusPrevious=function(){for(var t=e.panes.length,n=0;n<t;n++){var i=e.panes[n];if(i.isFocused){var r=n-1;r<0&&(r=e.panes.length-1);var o=e.panes[r];o.paneElement.find("v-pane-header")[0].focus();break}}},n.toggle=function(t){!i&&t&&(e.allowMultiple||n.collapseAll(t),t.isExpanded=!t.isExpanded,t.isExpanded?e.expandCb({index:n.getPaneIndex(t),id:t.id,pane:t}):e.collapseCb({index:n.getPaneIndex(t),id:t.id,pane:t}))},n.expand=function(t){!i&&t&&(e.allowMultiple||n.collapseAll(t),t.isExpanded||(t.isExpanded=!0,e.expandCb({index:n.getPaneIndex(t),id:t.id,pane:t})))},n.collapse=function(t){!i&&t&&t.isExpanded&&(t.isExpanded=!1,e.collapseCb({index:n.getPaneIndex(t),id:t.id,pane:t}))},n.expandAll=function(){if(!i){if(!e.allowMultiple)throw new Error("The `multiple` attribute can't be found");t.forEach(e.panes,function(t){n.expand(t)})}},n.collapseAll=function(r){i||t.forEach(e.panes,function(t){t!==r&&n.collapse(t)})},e.internalControl={toggle:function(e){t.isString(e)?n.toggle(n.getPaneById(e)):n.toggle(n.getPaneByIndex(e))},expand:function(e){t.isString(e)?n.expand(n.getPaneById(e)):n.expand(n.getPaneByIndex(e))},collapse:function(e){t.isString(e)?n.collapse(n.getPaneById(e)):n.collapse(n.getPaneByIndex(e))},expandAll:n.expandAll,collapseAll:n.collapseAll,hasExpandedPane:n.hasExpandedPane}}function i(e,n,i){return{restrict:"E",require:"^vAccordion",transclude:!0,controller:r,scope:{isExpanded:"=?expanded",isDisabled:"=?ngDisabled",id:"@?"},link:function(e,r,o,s,a){function u(n){n=t.isDefined(m)?m+":"+n:"vAccordion:"+n,e.$emit(n)}function l(){s.disable(),p.attr("aria-hidden","false"),d.attr({"aria-selected":"true","aria-expanded":"true"}),u("onExpand"),n.addClass(r,h.expanded).then(function(){s.enable(),u("onExpandAnimationEnd")})}function c(){s.disable(),p.attr("aria-hidden","true"),d.attr({"aria-selected":"false","aria-expanded":"false"}),u("onCollapse"),n.removeClass(r,h.expanded).then(function(){s.enable(),u("onCollapseAnimationEnd")})}a(e.$parent.$new(),function(t,n){n.$pane=e.internalControl,e.id&&(n.$pane.id=e.id),r.append(t)}),t.isDefined(e.isExpanded)||(e.isExpanded=t.isDefined(o.expanded)&&""===o.expanded),t.isDefined(o.disabled)&&(e.isDisabled=!0);var h=i.states,d=r.find("v-pane-header"),p=r.find("v-pane-content"),f=p.find("div"),m=s.getAccordionId();if(!d[0])throw new Error("The `v-pane-header` directive can't be found");if(!p[0])throw new Error("The `v-pane-content` directive can't be found");e.paneElement=r,e.paneContentElement=p,e.paneInnerElement=f,e.accordionCtrl=s,s.addPane(e),e.$evalAsync(function(){e.isExpanded?(r.addClass(h.expanded),p.css("max-height","none").attr("aria-hidden","false"),d.attr({"aria-selected":"true","aria-expanded":"true"})):(p.css("max-height","0px").attr("aria-hidden","true"),d.attr({"aria-selected":"false","aria-expanded":"false"}))}),e.$watch("isExpanded",function(t,e){return t===e||void(t?l():c())})}}}function r(t){var e=this;e.isExpanded=function(){return t.isExpanded},e.toggle=function(){t.isAnimating||t.isDisabled||t.accordionCtrl.toggle(t)},e.expand=function(){t.isAnimating||t.isDisabled||t.accordionCtrl.expand(t)},e.collapse=function(){t.isAnimating||t.isDisabled||t.accordionCtrl.collapse(t)},e.focusPane=function(){t.isFocused=!0},e.blurPane=function(){t.isFocused=!1},t.internalControl={toggle:e.toggle,expand:e.expand,collapse:e.collapse,isExpanded:e.isExpanded}}function o(){return{restrict:"E",require:"^vPane",transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(t,e,n){n.$set("role","tabpanel"),n.$set("aria-hidden","true")}}}function s(){return{restrict:"E",require:["^vPane","^vAccordion"],transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(e,n,i,r){function o(){return!h&&void e.$apply(function(){l.toggle()})}function s(t){32===t.keyCode||13===t.keyCode?(e.$apply(function(){l.toggle()}),t.preventDefault()):39===t.keyCode||40===t.keyCode?(e.$apply(function(){c.focusNext()}),t.preventDefault()):37!==t.keyCode&&38!==t.keyCode||(e.$apply(function(){c.focusPrevious()}),t.preventDefault())}function a(){l.focusPane()}function u(){l.blurPane()}i.$set("role","tab"),i.$set("tabindex","0");var l=r[0],c=r[1],h=t.isDefined(i.inactive);n[0].onfocus=a,n[0].onblur=u,n.bind("click",o),n.bind("keydown",s),e.$on("$destroy",function(){n.unbind("click",o),n.unbind("keydown",s),n[0].onfocus=null,n[0].onblur=null})}}}t.module("vAccordion.config",[]).constant("accordionConfig",{states:{expanded:"is-expanded"},expandAnimationDuration:.5}).animation(".is-expanded",["$animateCss","accordionConfig",function(e,n){return{addClass:function(i,r,o){var s=t.element(i[0].querySelector("v-pane-content")),a=t.element(s[0].querySelector("div")),u=a[0].offsetHeight,l=e(s,{easing:"ease",from:{maxHeight:"0px"},to:{maxHeight:u+"px"},duration:n.expandAnimationDuration});return l.start().done(function(){s.css("max-height","none"),o()}),function(t){t&&s.css("max-height","none")}},removeClass:function(i,r,o){var s=t.element(i[0].querySelector("v-pane-content")),a=t.element(s[0].querySelector("div")),u=a[0].offsetHeight,l=e(s,{easing:"ease",from:{maxHeight:u+"px"},to:{maxHeight:"0px"},duration:n.expandAnimationDuration});return l.start().done(o),function(t){t&&s.css("max-height","0px")}}}}]),t.module("vAccordion.directives",[]),t.module("vAccordion",["vAccordion.config","vAccordion.directives"]),t.module("vAccordion.directives").directive("vAccordion",e),e.$inject=["$timeout"],n.$inject=["$scope"],t.module("vAccordion.directives").directive("vPane",i),i.$inject=["$timeout","$animate","accordionConfig"],r.$inject=["$scope"],t.module("vAccordion.directives").directive("vPaneContent",o),t.module("vAccordion.directives").directive("vPaneHeader",s)}(angular)},{}],95:[function(t,e,n){t("./dist/v-accordion"),e.exports="vAccordion"},{"./dist/v-accordion":94}],96:[function(t,e,n){(function(t){"use strict";function n(t,e,i){if(r(t,e))return void(t[e]=i);if(t._isVue)return void n(t._data,e,i);var o=t.__ob__;if(!o)return void(t[e]=i);if(o.convert(e,i),o.dep.notify(),o.vms)for(var s=o.vms.length;s--;){var a=o.vms[s];a._proxy(e),a._digest()}return i}function i(t,e){if(r(t,e)){delete t[e];var n=t.__ob__;if(!n)return void(t._isVue&&(delete t._data[e],t._digest()));if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var o=n.vms[i];o._unproxy(e),o._digest()}}}function r(t,e){return Hn.call(t,e)}function o(t){return Wn.test(t)}function s(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function a(t){return null==t?"":t.toString()}function u(t){if("string"!=typeof t)return t;var e=Number(t);return isNaN(e)?t:e}function l(t){return"true"===t||"false"!==t&&t}function c(t){var e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e!==n||34!==e&&39!==e?t:t.slice(1,-1)}function h(t){return t.replace(Zn,d)}function d(t,e){return e?e.toUpperCase():""}function p(t){return t.replace(Gn,"$1-$2").replace(Gn,"$1-$2").toLowerCase()}function f(t){return t.replace(Yn,d)}function m(t,e){return function(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}}function g(t,e){e=e||0;for(var n=t.length-e,i=new Array(n);n--;)i[n]=t[n+e];return i}function v(t,e){for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}function y(t){return null!==t&&"object"==typeof t}function _(t){return Xn.call(t)===Kn}function b(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(t,e){var n,i,r,o,s,a=function u(){var a=Date.now()-o;a<e&&a>=0?n=setTimeout(u,e-a):(n=null,s=t.apply(r,i),n||(r=i=null))};return function(){return r=this,i=arguments,o=Date.now(),n||(n=setTimeout(a,e)),s}}function x(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function k(t){var e=function n(){if(!n.cancelled)return t.apply(this,arguments)};return e.cancel=function(){e.cancelled=!0},e}function $(t,e){return t==e||!(!y(t)||!y(e))&&JSON.stringify(t)===JSON.stringify(e)}function E(t){return/native code/.test(t.toString())}function C(t){this.size=0,this.limit=t,this.head=this.tail=void 0,this._keymap=Object.create(null)}function T(){return gi.charCodeAt(_i+1)}function L(){return gi.charCodeAt(++_i)}function S(){return _i>=yi}function D(){for(;T()===Ai;)L()}function M(t){return t===Li||t===Si}function A(t){return Ni[t]}function N(t,e){return Pi[t]===e}function P(){for(var t,e=L();!S();)if(t=L(),t===Mi)L();else if(t===e)break}function O(t){for(var e=0,n=t;!S();)if(t=T(),M(t))P();else if(n===t&&e++,N(n,t)&&e--,L(),0===e)break}function I(){for(var t=_i;!S();)if(bi=T(),M(bi))P();else if(A(bi))O(bi);else if(bi===Di){if(L(),bi=T(),bi!==Di){wi!==$i&&wi!==Ti||(wi=Ei);break}L()}else{if(bi===Ai&&(wi===Ci||wi===Ti)){D();break}wi===Ei&&(wi=Ci),L()}return gi.slice(t+1,_i)||null}function j(){for(var t=[];!S();)t.push(R());return t}function R(){var t,e={};return wi=Ei,e.name=I().trim(),wi=Ti,t=q(),t.length&&(e.args=t),e}function q(){for(var t=[];!S()&&wi!==Ei;){var e=I();if(!e)break;t.push(F(e))}return t}function F(t){if(ki.test(t))return{value:u(t),dynamic:!1};var e=c(t),n=e===t;return{value:n?t:e,dynamic:n}}function B(t){var e=xi.get(t);if(e)return e;gi=t,vi={},yi=gi.length,_i=-1,bi="",wi=$i;var n;return gi.indexOf("|")<0?vi.expression=gi.trim():(vi.expression=I().trim(),n=j(),n.length&&(vi.filters=n)),xi.put(t,vi),vi}function U(t){return t.replace(Ii,"\\$&")}function z(){var t=U(Vi.delimiters[0]),e=U(Vi.delimiters[1]),n=U(Vi.unsafeDelimiters[0]),i=U(Vi.unsafeDelimiters[1]);Ri=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+t+"((?:.|\\n)+?)"+e,"g"),qi=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),ji=new C(1e3)}function V(t){ji||z();var e=ji.get(t);if(e)return e;if(!Ri.test(t))return null;for(var n,i,r,o,s,a,u=[],l=Ri.lastIndex=0;n=Ri.exec(t);)i=n.index,i>l&&u.push({value:t.slice(l,i)}),r=qi.test(n[0]),o=r?n[1]:n[2],s=o.charCodeAt(0),a=42===s,o=a?o.slice(1):o,u.push({tag:!0,value:o.trim(),html:r,oneTime:a}),l=i+n[0].length;return l<t.length&&u.push({value:t.slice(l)}),ji.put(t,u),u}function H(t,e){return t.length>1?t.map(function(t){return W(t,e)}).join("+"):W(t[0],e,!0)}function W(t,e,n){return t.tag?t.oneTime&&e?'"'+e.$eval(t.value)+'"':Z(t.value,n):'"'+t.value+'"'}function Z(t,e){if(Fi.test(t)){var n=B(t);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+t+")"}return e?t:"("+t+")"}function G(t,e,n,i){K(t,1,function(){e.appendChild(t)},n,i)}function Y(t,e,n,i){K(t,1,function(){it(t,e)},n,i)}function X(t,e,n){K(t,-1,function(){ot(t)},e,n)}function K(t,e,n,i,r){var o=t.__v_trans;if(!o||!o.hooks&&!ui||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(r&&r());var s=e>0?"enter":"leave";o[s](n,r)}function J(e){if("string"==typeof e){var n=e;e=document.querySelector(e),e||"production"!==t.env.NODE_ENV&&Hi("Cannot find element: "+n)}return e}function Q(t){if(!t)return!1;var e=t.ownerDocument.documentElement,n=t.parentNode;return e===t||e===n||!(!n||1!==n.nodeType||!e.contains(n))}function tt(t,e){var n=t.getAttribute(e);return null!==n&&t.removeAttribute(e),n}function et(t,e){var n=tt(t,":"+e);return null===n&&(n=tt(t,"v-bind:"+e)),n}function nt(t,e){return t.hasAttribute(e)||t.hasAttribute(":"+e)||t.hasAttribute("v-bind:"+e)}function it(t,e){e.parentNode.insertBefore(t,e)}function rt(t,e){e.nextSibling?it(t,e.nextSibling):e.parentNode.appendChild(t)}function ot(t){t.parentNode.removeChild(t)}function st(t,e){e.firstChild?it(t,e.firstChild):e.appendChild(t)}function at(t,e){var n=t.parentNode;n&&n.replaceChild(e,t)}function ut(t,e,n,i){t.addEventListener(e,n,i)}function lt(t,e,n){t.removeEventListener(e,n)}function ct(t){var e=t.className;return"object"==typeof e&&(e=e.baseVal||""),e}function ht(t,e){ri&&!/svg$/.test(t.namespaceURI)?t.className=e:t.setAttribute("class",e)}function dt(t,e){if(t.classList)t.classList.add(e);else{var n=" "+ct(t)+" ";n.indexOf(" "+e+" ")<0&&ht(t,(n+e).trim())}}function pt(t,e){if(t.classList)t.classList.remove(e);else{for(var n=" "+ct(t)+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");ht(t,n.trim())}t.className||t.removeAttribute("class")}function ft(t,e){var n,i;if(vt(t)&&xt(t.content)&&(t=t.content),t.hasChildNodes())for(mt(t),i=e?document.createDocumentFragment():document.createElement("div");n=t.firstChild;)i.appendChild(n);return i}function mt(t){for(var e;e=t.firstChild,gt(e);)t.removeChild(e);for(;e=t.lastChild,gt(e);)t.removeChild(e)}function gt(t){return t&&(3===t.nodeType&&!t.data.trim()||8===t.nodeType)}function vt(t){return t.tagName&&"template"===t.tagName.toLowerCase()}function yt(t,e){var n=Vi.debug?document.createComment(t):document.createTextNode(e?" ":"");return n.__v_anchor=!0,n}function _t(t){if(t.hasAttributes())for(var e=t.attributes,n=0,i=e.length;n<i;n++){var r=e[n].name;if(Gi.test(r))return h(r.replace(Gi,""))}}function bt(t,e,n){for(var i;t!==e;)i=t.nextSibling,n(t),t=i;n(e)}function wt(t,e,n,i,r){function o(){if(a++,s&&a>=u.length){for(var t=0;t<u.length;t++)i.appendChild(u[t]);r&&r()}}var s=!1,a=0,u=[];bt(t,e,function(t){t===e&&(s=!0),u.push(t),X(t,n,o)})}function xt(t){return t&&11===t.nodeType}function kt(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}function $t(e,n){var i=e.tagName.toLowerCase(),r=e.hasAttributes();if(Yi.test(i)||Xi.test(i)){if(r)return Et(e,n)}else{if(At(n,"components",i))return{id:i};var o=r&&Et(e,n);if(o)return o;if("production"!==t.env.NODE_ENV){var s=n._componentNameMap&&n._componentNameMap[i];s?Hi("Unknown custom element: <"+i+"> - did you mean <"+s+">? HTML is case-insensitive, remember to use kebab-case in templates."):Ki(e,i)&&Hi("Unknown custom element: <"+i+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function Et(t,e){var n=t.getAttribute("is");if(null!=n){if(At(e,"components",n))return t.removeAttribute("is"),{id:n}}else if(n=et(t,"is"),null!=n)return{id:n,dynamic:!0}}function Ct(t,e){var i,o,s;for(i in e)o=t[i],s=e[i],r(t,i)?y(o)&&y(s)&&Ct(o,s):n(t,i,s);return t}function Tt(t,e){var n=Object.create(t||null);return e?v(n,Dt(e)):n}function Lt(e){if(e.components){var n,i=e.components=Dt(e.components),r=Object.keys(i);if("production"!==t.env.NODE_ENV)var o=e._componentNameMap={};for(var s=0,a=r.length;s<a;s++){var u=r[s];Yi.test(u)||Xi.test(u)?"production"!==t.env.NODE_ENV&&Hi("Do not use built-in or reserved HTML elements as component id: "+u):("production"!==t.env.NODE_ENV&&(o[u.replace(/-/g,"").toLowerCase()]=p(u)),n=i[u],_(n)&&(i[u]=qn.extend(n)))}}}function St(t){var e,n,i=t.props;if(Jn(i))for(t.props={},e=i.length;e--;)n=i[e],"string"==typeof n?t.props[n]=null:n.name&&(t.props[n.name]=n);else if(_(i)){var r=Object.keys(i);for(e=r.length;e--;)n=i[r[e]],"function"==typeof n&&(i[r[e]]={type:n})}}function Dt(e){if(Jn(e)){for(var n,i={},r=e.length;r--;){n=e[r];var o="function"==typeof n?n.options&&n.options.name||n.id:n.name||n.id;o?i[o]=n:"production"!==t.env.NODE_ENV&&Hi('Array-syntax assets must provide a "name" or "id" field.')}return i}return e}function Mt(e,n,i){function o(t){var r=Ji[t]||Qi;a[t]=r(e[t],n[t],i,t)}Lt(n),St(n),"production"!==t.env.NODE_ENV&&n.propsData&&!i&&Hi("propsData can only be used as an instantiation option.");var s,a={};if(n["extends"]&&(e="function"==typeof n["extends"]?Mt(e,n["extends"].options,i):Mt(e,n["extends"],i)),n.mixins)for(var u=0,l=n.mixins.length;u<l;u++){var c=n.mixins[u],h=c.prototype instanceof qn?c.options:c;e=Mt(e,h,i)}for(s in e)o(s);for(s in n)r(e,s)||o(s);return a}function At(e,n,i,r){if("string"==typeof i){var o,s=e[n],a=s[i]||s[o=h(i)]||s[o.charAt(0).toUpperCase()+o.slice(1)];return"production"!==t.env.NODE_ENV&&r&&!a&&Hi("Failed to resolve "+n.slice(0,-1)+": "+i,e),a}}function Nt(){this.id=tr++,this.subs=[]}function Pt(t){rr=!1,t(),rr=!0}function Ot(t){if(this.value=t,this.dep=new Nt,b(t,"__ob__",this),Jn(t)){var e=Qn?It:jt;e(t,nr,ir),this.observeArray(t)}else this.walk(t)}function It(t,e){t.__proto__=e}function jt(t,e,n){for(var i=0,r=n.length;i<r;i++){var o=n[i];b(t,o,e[o])}}function Rt(t,e){if(t&&"object"==typeof t){var n;return r(t,"__ob__")&&t.__ob__ instanceof Ot?n=t.__ob__:rr&&(Jn(t)||_(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Ot(t)),n&&e&&n.addVm(e),n}}function qt(t,e,n){var i=new Nt,r=Object.getOwnPropertyDescriptor(t,e);if(!r||r.configurable!==!1){var o=r&&r.get,s=r&&r.set,a=Rt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=o?o.call(t):n;if(Nt.target&&(i.depend(),a&&a.dep.depend(),Jn(e)))for(var r,s=0,u=e.length;s<u;s++)r=e[s],r&&r.__ob__&&r.__ob__.dep.depend();return e},set:function(e){var r=o?o.call(t):n;e!==r&&(s?s.call(t,e):n=e,a=Rt(e),i.notify())}})}}function Ft(t){t.prototype._init=function(t){t=t||{},this.$el=null,this.$parent=t.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=sr++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=t._context||this.$parent,this._scope=t._scope,this._frag=t._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),t=this.$options=Mt(this.constructor.options,t,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),t.el&&this.$mount(t.el)}}function Bt(t){if(void 0===t)return"eof";var e=t.charCodeAt(0);switch(e){case 91:case 93:case 46:case 34:case 39:case 48:return t;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return e>=97&&e<=122||e>=65&&e<=90?"ident":e>=49&&e<=57?"number":"else"}function Ut(t){var e=t.trim();return("0"!==t.charAt(0)||!isNaN(t))&&(o(e)?c(e):"*"+e)}function zt(t){function e(){var e=t[c+1];if(h===vr&&"'"===e||h===yr&&'"'===e)return c++,i="\\"+e,p[ur](),!0}var n,i,r,o,s,a,u,l=[],c=-1,h=dr,d=0,p=[];for(p[lr]=function(){void 0!==r&&(l.push(r),r=void 0)},p[ur]=function(){void 0===r?r=i:r+=i},p[cr]=function(){p[ur](),d++},p[hr]=function(){if(d>0)d--,h=gr,p[ur]();else{if(d=0,r=Ut(r),r===!1)return!1;p[lr]()}};null!=h;)if(c++,n=t[c],"\\"!==n||!e()){if(o=Bt(n),u=wr[h],s=u[o]||u["else"]||br,s===br)return;if(h=s[0],a=p[s[1]],a&&(i=s[2],i=void 0===i?n:i,a()===!1))return;if(h===_r)return l.raw=t,l}}function Vt(t){var e=ar.get(t);return e||(e=zt(t),e&&ar.put(t,e)),e}function Ht(t,e){return te(e).get(t)}function Wt(e,i,r){var o=e;if("string"==typeof i&&(i=zt(i)),!i||!y(e))return!1;for(var s,a,u=0,l=i.length;u<l;u++)s=e,a=i[u],"*"===a.charAt(0)&&(a=te(a.slice(1)).get.call(o,o)),u<l-1?(e=e[a],y(e)||(e={},"production"!==t.env.NODE_ENV&&s._isVue&&xr(i,s),n(s,a,e))):Jn(e)?e.$set(a,r):a in e?e[a]=r:("production"!==t.env.NODE_ENV&&e._isVue&&xr(i,e),n(e,a,r));return!0}function Zt(){}function Gt(t,e){var n=Ir.length;return Ir[n]=e?t.replace(Dr,"\\n"):t,'"'+n+'"'}function Yt(t){var e=t.charAt(0),n=t.slice(1);return Cr.test(n)?t:(n=n.indexOf('"')>-1?n.replace(Ar,Xt):n,e+"scope."+n)}function Xt(t,e){return Ir[e]}function Kt(e){Lr.test(e)&&"production"!==t.env.NODE_ENV&&Hi("Avoid using reserved keywords in expression: "+e),Ir.length=0;var n=e.replace(Mr,Gt).replace(Sr,"");return n=(" "+n).replace(Pr,Yt).replace(Ar,Xt),Jt(n)}function Jt(e){try{return new Function("scope","return "+e+";")}catch(n){return"production"!==t.env.NODE_ENV&&Hi(n.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+e),Zt}}function Qt(e){var n=Vt(e);return n?function(t,e){Wt(t,n,e)}:void("production"!==t.env.NODE_ENV&&Hi("Invalid setter expression: "+e))}function te(t,e){t=t.trim();var n=$r.get(t);if(n)return e&&!n.set&&(n.set=Qt(n.exp)),n;var i={exp:t};return i.get=ee(t)&&t.indexOf("[")<0?Jt("scope."+t):Kt(t),e&&(i.set=Qt(t)),$r.put(t,i),i}function ee(t){return Nr.test(t)&&!Or.test(t)&&"Math."!==t.slice(0,5)}function ne(){Rr.length=0,qr.length=0,Fr={},Br={},Ur=!1}function ie(){for(var t=!0;t;)t=!1,re(Rr),re(qr),Rr.length?t=!0:(ei&&Vi.devtools&&ei.emit("flush"),ne())}function re(e){for(var n=0;n<e.length;n++){var i=e[n],r=i.id;if(Fr[r]=null,i.run(),"production"!==t.env.NODE_ENV&&null!=Fr[r]&&(Br[r]=(Br[r]||0)+1,Br[r]>Vi._maxUpdateCount)){Hi('You may have an infinite update loop for watcher with expression "'+i.expression+'"',i.vm);break}}e.length=0}function oe(t){var e=t.id;if(null==Fr[e]){var n=t.user?qr:Rr;Fr[e]=n.length,n.push(t),Ur||(Ur=!0,pi(ie))}}function se(t,e,n,i){i&&v(this,i);var r="function"==typeof e;if(this.vm=t,t._watchers.push(this),this.expression=e,this.cb=n,this.id=++zr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new fi,this.newDepIds=new fi,this.prevError=null,r)this.getter=e,this.setter=void 0;else{var o=te(e,this.twoWay);this.getter=o.get,this.setter=o.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function ae(t,e){var n=void 0,i=void 0;e||(e=Vr,e.clear());var r=Jn(t),o=y(t);if((r||o)&&Object.isExtensible(t)){if(t.__ob__){var s=t.__ob__.dep.id;if(e.has(s))return;e.add(s)}if(r)for(n=t.length;n--;)ae(t[n],e);else if(o)for(i=Object.keys(t),n=i.length;n--;)ae(t[i[n]],e)}}function ue(t){return vt(t)&&xt(t.content)}function le(t,e){var n=e?t:t.trim(),i=Wr.get(n);if(i)return i;var r=document.createDocumentFragment(),o=t.match(Yr),s=Xr.test(t),a=Kr.test(t);if(o||s||a){var u=o&&o[1],l=Gr[u]||Gr.efault,c=l[0],h=l[1],d=l[2],p=document.createElement("div");for(p.innerHTML=h+t+d;c--;)p=p.lastChild;for(var f;f=p.firstChild;)r.appendChild(f)}else r.appendChild(document.createTextNode(t));return e||mt(r),Wr.put(n,r),r}function ce(t){if(ue(t))return le(t.innerHTML);if("SCRIPT"===t.tagName)return le(t.textContent);for(var e,n=he(t),i=document.createDocumentFragment();e=n.firstChild;)i.appendChild(e);return mt(i),i}function he(t){if(!t.querySelectorAll)return t.cloneNode();var e,n,i,r=t.cloneNode(!0);if(Jr){var o=r;if(ue(t)&&(t=t.content,o=r.content),n=t.querySelectorAll("template"),n.length)for(i=o.querySelectorAll("template"),e=i.length;e--;)i[e].parentNode.replaceChild(he(n[e]),i[e])}if(Qr)if("TEXTAREA"===t.tagName)r.value=t.value;else if(n=t.querySelectorAll("textarea"),n.length)for(i=r.querySelectorAll("textarea"),e=i.length;e--;)i[e].value=n[e].value;return r}function de(t,e,n){var i,r;return xt(t)?(mt(t),e?he(t):t):("string"==typeof t?n||"#"!==t.charAt(0)?r=le(t,n):(r=Zr.get(t),r||(i=document.getElementById(t.slice(1)),i&&(r=ce(i),Zr.put(t,r)))):t.nodeType&&(r=ce(t)),r&&e?he(r):r)}function pe(t,e,n,i,r,o){this.children=[],this.childFrags=[],this.vm=e,this.scope=r,this.inserted=!1,this.parentFrag=o,o&&o.childFrags.push(this),this.unlink=t(e,n,i,r,this);var s=this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor;s?(this.node=n.childNodes[0],this.before=fe,this.remove=me):(this.node=yt("fragment-start"),this.end=yt("fragment-end"),this.frag=n,st(this.node,n),n.appendChild(this.end),this.before=ge,this.remove=ve),this.node.__v_frag=this}function fe(t,e){this.inserted=!0;var n=e!==!1?Y:it;n(this.node,t,this.vm),Q(this.node)&&this.callHook(ye)}function me(){this.inserted=!1;var t=Q(this.node),e=this;this.beforeRemove(),X(this.node,this.vm,function(){t&&e.callHook(_e),e.destroy()})}function ge(t,e){this.inserted=!0;var n=this.vm,i=e!==!1?Y:it;bt(this.node,this.end,function(e){i(e,t,n)}),Q(this.node)&&this.callHook(ye)}function ve(){this.inserted=!1;var t=this,e=Q(this.node);this.beforeRemove(),wt(this.node,this.end,this.vm,this.frag,function(){e&&t.callHook(_e),t.destroy()})}function ye(t){!t._isAttached&&Q(t.$el)&&t._callHook("attached")}function _e(t){t._isAttached&&!Q(t.$el)&&t._callHook("detached")}function be(t,e){this.vm=t;var n,i="string"==typeof e;i||vt(e)&&!e.hasAttribute("v-if")?n=de(e,!0):(n=document.createDocumentFragment(),n.appendChild(e)),this.template=n;var r,o=t.constructor.cid;if(o>0){var s=o+(i?e:kt(e));r=no.get(s),r||(r=Ke(n,t.$options,!0),no.put(s,r))}else r=Ke(n,t.$options,!0);this.linker=r}function we(t,e,n){var i=t.node.previousSibling;if(i){for(t=i.__v_frag;!(t&&t.forId===n&&t.inserted||i===e);){if(i=i.previousSibling,!i)return;t=i.__v_frag}return t}}function xe(t){for(var e=-1,n=new Array(Math.floor(t));++e<t;)n[e]=e;return n}function ke(t,e,n,i){return i?"$index"===i?t:i.charAt(0).match(/\w/)?Ht(n,i):n[i]:e||n}function $e(t){var e=t.node;if(t.end)for(;!e.__vue__&&e!==t.end&&e.nextSibling;)e=e.nextSibling;return e.__vue__}function Ee(t,e,n){for(var i,r,o,s=e?[]:null,a=0,u=t.options.length;a<u;a++)if(i=t.options[a],o=n?i.hasAttribute("selected"):i.selected){if(r=i.hasOwnProperty("_value")?i._value:i.value,!e)return r;s.push(r)}return s}function Ce(t,e){for(var n=t.length;n--;)if($(t[n],e))return n;return-1}function Te(t,e){var n=e.map(function(t){var e=t.charCodeAt(0);return e>47&&e<58?parseInt(t,10):1===t.length&&(e=t.toUpperCase().charCodeAt(0),e>64&&e<91)?e:$o[t]});return n=[].concat.apply([],n),function(e){if(n.indexOf(e.keyCode)>-1)return t.call(this,e)}}function Le(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function Se(t){return function(e){return e.preventDefault(),t.call(this,e)}}function De(t){return function(e){if(e.target===e.currentTarget)return t.call(this,e)}}function Me(t){if(So[t])return So[t];var e=Ae(t);return So[t]=So[e]=e,e}function Ae(t){t=p(t);var e=h(t),n=e.charAt(0).toUpperCase()+e.slice(1);Do||(Do=document.createElement("div"));var i,r=Co.length;if("filter"!==e&&e in Do.style)return{kebab:t,camel:e};for(;r--;)if(i=To[r]+n,i in Do.style)return{kebab:Co[r]+t,camel:i}}function Ne(t){var e=[];if(Jn(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];if(r)if("string"==typeof r)e.push(r);else for(var o in r)r[o]&&e.push(o)}else if(y(t))for(var s in t)t[s]&&e.push(s);return e}function Pe(t,e,n){if(e=e.trim(),e.indexOf(" ")===-1)return void n(t,e);for(var i=e.split(/\s+/),r=0,o=i.length;r<o;r++)n(t,i[r])}function Oe(t,e,n){function i(){++o>=r?n():t[o].call(e,i)}var r=t.length,o=0;t[0].call(e,i)}function Ie(e,n,i){for(var r,s,a,u,l,c,d,f=[],m=i.$options.propsData,g=Object.keys(n),v=g.length;v--;)if(s=g[v],r=n[s]||Wo,"production"===t.env.NODE_ENV||"$data"!==s)if(l=h(s),Zo.test(l)){if(d={name:s,path:l,options:r,mode:Ho.ONE_WAY,raw:null},a=p(s),null===(u=et(e,a))&&(null!==(u=et(e,a+".sync"))?d.mode=Ho.TWO_WAY:null!==(u=et(e,a+".once"))&&(d.mode=Ho.ONE_TIME)),null!==u)d.raw=u,c=B(u),u=c.expression,d.filters=c.filters,o(u)&&!c.filters?d.optimizedLiteral=!0:(d.dynamic=!0,"production"===t.env.NODE_ENV||d.mode!==Ho.TWO_WAY||Go.test(u)||(d.mode=Ho.ONE_WAY,Hi("Cannot bind two-way prop with non-settable parent path: "+u,i))),d.parentPath=u,"production"!==t.env.NODE_ENV&&r.twoWay&&d.mode!==Ho.TWO_WAY&&Hi('Prop "'+s+'" expects a two-way binding type.',i);else if(null!==(u=tt(e,a)))d.raw=u;else if(m&&null!==(u=m[s]||m[l]))d.raw=u;else if("production"!==t.env.NODE_ENV){var y=l.toLowerCase();u=/[A-Z\-]/.test(s)&&(e.getAttribute(y)||e.getAttribute(":"+y)||e.getAttribute("v-bind:"+y)||e.getAttribute(":"+y+".once")||e.getAttribute("v-bind:"+y+".once")||e.getAttribute(":"+y+".sync")||e.getAttribute("v-bind:"+y+".sync")),u?Hi("Possible usage error for prop `"+y+"` - did you mean `"+a+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",i):!r.required||m&&(s in m||l in m)||Hi("Missing required prop: "+s,i)}f.push(d)}else"production"!==t.env.NODE_ENV&&Hi('Invalid prop key: "'+s+'". Prop keys must be valid identifiers.',i);else Hi("Do not use $data as prop.",i);return je(f)}function je(t){return function(e,n){e._props={};for(var i,o,s,a,h,d=e.$options.propsData,f=t.length;f--;)if(i=t[f],h=i.raw,o=i.path,s=i.options,e._props[o]=i,d&&r(d,o)&&qe(e,i,d[o]),null===h)qe(e,i,void 0);else if(i.dynamic)i.mode===Ho.ONE_TIME?(a=(n||e._context||e).$get(i.parentPath),qe(e,i,a)):e._context?e._bindDir({name:"prop",def:Xo,prop:i},null,null,n):qe(e,i,e.$get(i.parentPath));else if(i.optimizedLiteral){var m=c(h);
a=m===h?l(u(h)):m,qe(e,i,a)}else a=s.type===Boolean&&(""===h||h===p(i.name))||h,qe(e,i,a)}}function Re(t,e,n,i){var r=e.dynamic&&ee(e.parentPath),o=n;void 0===o&&(o=Be(t,e)),o=ze(e,o,t);var s=o!==n;Ue(e,o,t)||(o=void 0),r&&!s?Pt(function(){i(o)}):i(o)}function qe(t,e,n){Re(t,e,n,function(n){qt(t,e.path,n)})}function Fe(t,e,n){Re(t,e,n,function(n){t[e.path]=n})}function Be(e,n){var i=n.options;if(!r(i,"default"))return i.type!==Boolean&&void 0;var o=i["default"];return y(o)&&"production"!==t.env.NODE_ENV&&Hi('Invalid default value for prop "'+n.name+'": Props with type Object/Array must use a factory function to return the default value.',e),"function"==typeof o&&i.type!==Function?o.call(e):o}function Ue(e,n,i){if(!e.options.required&&(null===e.raw||null==n))return!0;var r=e.options,o=r.type,s=!o,a=[];if(o){Jn(o)||(o=[o]);for(var u=0;u<o.length&&!s;u++){var l=Ve(n,o[u]);a.push(l.expectedType),s=l.valid}}if(!s)return"production"!==t.env.NODE_ENV&&Hi('Invalid prop: type check failed for prop "'+e.name+'". Expected '+a.map(He).join(", ")+", got "+We(n)+".",i),!1;var c=r.validator;return!(c&&!c(n))||("production"!==t.env.NODE_ENV&&Hi('Invalid prop: custom validator check failed for prop "'+e.name+'".',i),!1)}function ze(e,n,i){var r=e.options.coerce;return r?"function"==typeof r?r(n):("production"!==t.env.NODE_ENV&&Hi('Invalid coerce for prop "'+e.name+'": expected function, got '+typeof r+".",i),n):n}function Ve(t,e){var n,i;return e===String?(i="string",n=typeof t===i):e===Number?(i="number",n=typeof t===i):e===Boolean?(i="boolean",n=typeof t===i):e===Function?(i="function",n=typeof t===i):e===Object?(i="object",n=_(t)):e===Array?(i="array",n=Jn(t)):n=t instanceof e,{valid:n,expectedType:i}}function He(t){return t?t.charAt(0).toUpperCase()+t.slice(1):"custom type"}function We(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ze(t){Ko.push(t),Jo||(Jo=!0,pi(Ge))}function Ge(){for(var t=document.documentElement.offsetHeight,e=0;e<Ko.length;e++)Ko[e]();return Ko=[],Jo=!1,t}function Ye(e,n,i,r){this.id=n,this.el=e,this.enterClass=i&&i.enterClass||n+"-enter",this.leaveClass=i&&i.leaveClass||n+"-leave",this.hooks=i,this.vm=r,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=i&&i.type,"production"!==t.env.NODE_ENV&&this.type&&this.type!==Qo&&this.type!==ts&&Hi('invalid CSS transition type for transition="'+this.id+'": '+this.type,r);var o=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(t){o[t]=m(o[t],o)})}function Xe(t){if(/svg$/.test(t.namespaceURI)){var e=t.getBoundingClientRect();return!(e.width||e.height)}return!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}function Ke(t,e,n){var i=n||!e._asComponent?on(t,e):null,r=i&&i.terminal||xn(t)||!t.hasChildNodes()?null:hn(t.childNodes,e);return function(t,e,n,o,s){var a=g(e.childNodes),u=Je(function(){i&&i(t,e,n,o,s),r&&r(t,a,n,o,s)},t);return tn(t,u)}}function Je(e,n){"production"===t.env.NODE_ENV&&(n._directives=[]);var i=n._directives.length;e();var r=n._directives.slice(i);Qe(r);for(var o=0,s=r.length;o<s;o++)r[o]._bind();return r}function Qe(t){if(0!==t.length){var e,n,i,r,o={},s=0,a=[];for(e=0,n=t.length;e<n;e++){var u=t[e],l=u.descriptor.def.priority||ps,c=o[l];c||(c=o[l]=[],a.push(l)),c.push(u)}for(a.sort(function(t,e){return t>e?-1:t===e?0:1}),e=0,n=a.length;e<n;e++){var h=o[a[e]];for(i=0,r=h.length;i<r;i++)t[s++]=h[i]}}}function tn(t,e,n,i){function r(r){en(t,e,r),n&&i&&en(n,i)}return r.dirs=e,r}function en(e,n,i){for(var r=n.length;r--;)n[r]._teardown(),"production"===t.env.NODE_ENV||i||e._directives.$remove(n[r])}function nn(t,e,n,i){var r=Ie(e,n,t),o=Je(function(){r(t,i)},t);return tn(t,o)}function rn(e,n,i){var r,o,s=n._containerAttrs,a=n._replacerAttrs;if(11!==e.nodeType)n._asComponent?(s&&i&&(r=yn(s,i)),a&&(o=yn(a,n))):o=yn(e.attributes,n);else if("production"!==t.env.NODE_ENV&&s){var u=s.filter(function(t){return t.name.indexOf("_v-")<0&&!ls.test(t.name)&&"slot"!==t.name}).map(function(t){return'"'+t.name+'"'});if(u.length){var l=u.length>1,c=n.el.tagName.toLowerCase();"component"===c&&n.name&&(c+=":"+n.name),Hi("Attribute"+(l?"s ":" ")+u.join(", ")+(l?" are":" is")+" ignored on component <"+c+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return n._containerAttrs=n._replacerAttrs=null,function(t,e,n){var i,s=t._context;s&&r&&(i=Je(function(){r(s,e,null,n)},s));var a=Je(function(){o&&o(t,e)},t);return tn(t,a,s,i)}}function on(t,e){var n=t.nodeType;return 1!==n||xn(t)?3===n&&t.data.trim()?an(t,e):null:sn(t,e)}function sn(t,e){if("TEXTAREA"===t.tagName){if(null!==tt(t,"v-pre"))return gn;var n=V(t.value);n&&(t.setAttribute(":value",H(n)),t.value="")}var i,r=t.hasAttributes(),o=r&&g(t.attributes);return r&&(i=mn(t,o,e)),i||(i=pn(t,e)),i||(i=fn(t,e)),!i&&r&&(i=yn(o,e)),i}function an(t,e){if(t._skip)return un;var n=V(t.wholeText);if(!n)return null;for(var i=t.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var r,o,s=document.createDocumentFragment(),a=0,u=n.length;a<u;a++)o=n[a],r=o.tag?ln(o,e):document.createTextNode(o.value),s.appendChild(r);return cn(n,s,e)}function un(t,e){ot(e)}function ln(t,e){function n(e){if(!t.descriptor){var n=B(t.value);t.descriptor={name:e,def:Uo[e],expression:n.expression,filters:n.filters}}}var i;return t.oneTime?i=document.createTextNode(t.value):t.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function cn(t,e){return function(n,i,r,o){for(var s,u,l,c=e.cloneNode(!0),h=g(c.childNodes),d=0,p=t.length;d<p;d++)s=t[d],u=s.value,s.tag&&(l=h[d],s.oneTime?(u=(o||n).$eval(u),s.html?at(l,de(u,!0)):l.data=a(u)):n._bindDir(s.descriptor,l,r,o));at(i,c)}}function hn(t,e){for(var n,i,r,o=[],s=0,a=t.length;s<a;s++)r=t[s],n=on(r,e),i=n&&n.terminal||"SCRIPT"===r.tagName||!r.hasChildNodes()?null:hn(r.childNodes,e),o.push(n,i);return o.length?dn(o):null}function dn(t){return function(e,n,i,r,o){for(var s,a,u,l=0,c=0,h=t.length;l<h;c++){s=n[c],a=t[l++],u=t[l++];var d=g(s.childNodes);a&&a(e,s,i,r,o),u&&u(e,d,i,r,o)}}}function pn(t,e){var n=t.tagName.toLowerCase();if(!Yi.test(n)){var i=At(e,"elementDirectives",n);return i?vn(t,n,"",e,i):void 0}}function fn(t,e){var n=$t(t,e);if(n){var i=_t(t),r={name:"component",ref:i,expression:n.id,def:as.component,modifiers:{literal:!n.dynamic}},o=function(t,e,n,o,s){i&&qt((o||t).$refs,i,null),t._bindDir(r,e,n,o,s)};return o.terminal=!0,o}}function mn(t,e,n){if(null!==tt(t,"v-pre"))return gn;if(t.hasAttribute("v-else")){var i=t.previousElementSibling;if(i&&i.hasAttribute("v-if"))return gn}for(var r,o,s,a,u,l,c,h,d,p,f=0,m=e.length;f<m;f++)r=e[f],o=r.name.replace(hs,""),(u=o.match(cs))&&(d=At(n,"directives",u[1]),d&&d.terminal&&(!p||(d.priority||fs)>p.priority)&&(p=d,c=r.name,a=_n(r.name),s=r.value,l=u[1],h=u[2]));return p?vn(t,l,s,n,p,c,h,a):void 0}function gn(){}function vn(t,e,n,i,r,o,s,a){var u=B(n),l={name:e,arg:s,expression:u.expression,filters:u.filters,raw:n,attr:o,modifiers:a,def:r};"for"!==e&&"router-view"!==e||(l.ref=_t(t));var c=function(t,e,n,i,r){l.ref&&qt((i||t).$refs,l.ref,null),t._bindDir(l,e,n,i,r)};return c.terminal=!0,c}function yn(e,n){function i(t,e,n){var i=n&&wn(n),r=!i&&B(s);g.push({name:t,attr:a,raw:u,def:e,arg:c,modifiers:h,expression:r&&r.expression,filters:r&&r.filters,interp:n,hasOneTime:i})}for(var r,o,s,a,u,l,c,h,d,p,f,m=e.length,g=[];m--;)if(r=e[m],o=a=r.name,s=u=r.value,p=V(s),c=null,h=_n(o),o=o.replace(hs,""),p)s=H(p),c=o,i("bind",Uo.bind,p),"production"!==t.env.NODE_ENV&&"class"===o&&Array.prototype.some.call(e,function(t){return":class"===t.name||"v-bind:class"===t.name})&&Hi('class="'+u+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',n);else if(ds.test(o))h.literal=!us.test(o),i("transition",as.transition);else if(ls.test(o))c=o.replace(ls,""),i("on",Uo.on);else if(us.test(o))l=o.replace(us,""),"style"===l||"class"===l?i(l,as[l]):(c=l,i("bind",Uo.bind));else if(f=o.match(cs)){if(l=f[1],c=f[2],"else"===l)continue;d=At(n,"directives",l,!0),d&&i(l,d)}if(g.length)return bn(g)}function _n(t){var e=Object.create(null),n=t.match(hs);if(n)for(var i=n.length;i--;)e[n[i].slice(1)]=!0;return e}function bn(t){return function(e,n,i,r,o){for(var s=t.length;s--;)e._bindDir(t[s],n,i,r,o)}}function wn(t){for(var e=t.length;e--;)if(t[e].oneTime)return!0}function xn(t){return"SCRIPT"===t.tagName&&(!t.hasAttribute("type")||"text/javascript"===t.getAttribute("type"))}function kn(t,e){return e&&(e._containerAttrs=En(t)),vt(t)&&(t=de(t)),e&&(e._asComponent&&!e.template&&(e.template="<slot></slot>"),e.template&&(e._content=ft(t),t=$n(t,e))),xt(t)&&(st(yt("v-start",!0),t),t.appendChild(yt("v-end",!0))),t}function $n(e,n){var i=n.template,r=de(i,!0);if(r){var o=r.firstChild;if(!o)return r;var s=o.tagName&&o.tagName.toLowerCase();return n.replace?(e===document.body&&"production"!==t.env.NODE_ENV&&Hi("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),r.childNodes.length>1||1!==o.nodeType||"component"===s||At(n,"components",s)||nt(o,"is")||At(n,"elementDirectives",s)||o.hasAttribute("v-for")||o.hasAttribute("v-if")?r:(n._replacerAttrs=En(o),Cn(e,o),o)):(e.appendChild(r),e)}"production"!==t.env.NODE_ENV&&Hi("Invalid template option: "+i)}function En(t){if(1===t.nodeType&&t.hasAttributes())return g(t.attributes)}function Cn(t,e){for(var n,i,r=t.attributes,o=r.length;o--;)n=r[o].name,i=r[o].value,e.hasAttribute(n)||ms.test(n)?"class"===n&&!V(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(t){dt(e,t)}):e.setAttribute(n,i)}function Tn(e,n){if(n){for(var i,r,o=e._slotContents=Object.create(null),s=0,a=n.children.length;s<a;s++)i=n.children[s],(r=i.getAttribute("slot"))&&(o[r]||(o[r]=[])).push(i),"production"!==t.env.NODE_ENV&&et(i,"slot")&&Hi('The "slot" attribute must be static.',e.$parent);for(r in o)o[r]=Ln(o[r],n);if(n.hasChildNodes()){var u=n.childNodes;if(1===u.length&&3===u[0].nodeType&&!u[0].data.trim())return;o["default"]=Ln(n.childNodes,n)}}}function Ln(t,e){var n=document.createDocumentFragment();t=g(t);for(var i=0,r=t.length;i<r;i++){var o=t[i];!vt(o)||o.hasAttribute("v-if")||o.hasAttribute("v-for")||(e.removeChild(o),o=de(o,!0)),n.appendChild(o)}return n}function Sn(e){function n(){}function i(t,e){var n=new se(e,t,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),Nt.target&&n.depend(),n.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(t){t!==this._data&&this._setData(t)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,n=e.el,i=e.props;i&&!n&&"production"!==t.env.NODE_ENV&&Hi("Props will not be compiled if no `el` option is provided at instantiation.",this),n=e.el=J(n),this._propsUnlinkFn=n&&1===n.nodeType&&i?nn(this,n,i,this._scope):null},e.prototype._initData=function(){var e=this.$options.data,n=this._data=e?e():{};_(n)||(n={},"production"!==t.env.NODE_ENV&&Hi("data functions should return an object.",this));var i,o,s=this._props,a=Object.keys(n);for(i=a.length;i--;)o=a[i],s&&r(s,o)?"production"!==t.env.NODE_ENV&&Hi('Data field "'+o+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(o);Rt(n,this)},e.prototype._setData=function(t){t=t||{};var e=this._data;this._data=t;var n,i,o;for(n=Object.keys(e),o=n.length;o--;)i=n[o],i in t||this._unproxy(i);for(n=Object.keys(t),o=n.length;o--;)i=n[o],r(this,i)||this._proxy(i);e.__ob__.removeVm(this),Rt(t,this),this._digest()},e.prototype._proxy=function(t){if(!s(t)){var e=this;Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e._data[t]},set:function(n){e._data[t]=n}})}},e.prototype._unproxy=function(t){s(t)||delete this[t]},e.prototype._digest=function(){for(var t=0,e=this._watchers.length;t<e;t++)this._watchers[t].update(!0)},e.prototype._initComputed=function(){var t=this.$options.computed;if(t)for(var e in t){var r=t[e],o={enumerable:!0,configurable:!0};"function"==typeof r?(o.get=i(r,this),o.set=n):(o.get=r.get?r.cache!==!1?i(r.get,this):m(r.get,this):n,o.set=r.set?m(r.set,this):n),Object.defineProperty(this,e,o)}},e.prototype._initMethods=function(){var t=this.$options.methods;if(t)for(var e in t)this[e]=m(t[e],this)},e.prototype._initMeta=function(){var t=this.$options._meta;if(t)for(var e in t)qt(this,e,t[e])}}function Dn(e){function n(t,e){for(var n,i,r,o=e.attributes,s=0,a=o.length;s<a;s++)n=o[s].name,vs.test(n)&&(n=n.replace(vs,""),i=o[s].value,ee(i)&&(i+=".apply(this, $arguments)"),r=(t._scope||t._context).$eval(i,!0),r._fromParent=!0,t.$on(n.replace(vs),r))}function i(t,e,n){if(n){var i,o,s,a;for(o in n)if(i=n[o],Jn(i))for(s=0,a=i.length;s<a;s++)r(t,e,o,i[s]);else r(t,e,o,i)}}function r(e,n,i,o,s){var a=typeof o;if("function"===a)e[n](i,o,s);else if("string"===a){var u=e.$options.methods,l=u&&u[o];l?e[n](i,l,s):"production"!==t.env.NODE_ENV&&Hi('Unknown method: "'+o+'" when registering callback for '+n+': "'+i+'".',e)}else o&&"object"===a&&r(e,n,i,o.handler,o)}function o(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(t){!t._isAttached&&Q(t.$el)&&t._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(u))}function u(t){t._isAttached&&!Q(t.$el)&&t._callHook("detached")}e.prototype._initEvents=function(){var t=this.$options;t._asComponent&&n(this,t.el),i(this,"$on",t.events),i(this,"$watch",t.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",o),this.$on("hook:detached",a)},e.prototype._callHook=function(t){this.$emit("pre-hook:"+t);var e=this.$options[t];if(e)for(var n=0,i=e.length;n<i;n++)e[n].call(this);this.$emit("hook:"+t)}}function Mn(){}function An(e,n,i,r,o,s){this.vm=n,this.el=i,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=r,this._scope=o,this._frag=s,"production"!==t.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function Nn(t){t.prototype._updateRef=function(t){var e=this.$options._ref;if(e){var n=(this._scope||this._context).$refs;t?n[e]===this&&(n[e]=null):n[e]=this}},t.prototype._compile=function(t){var e=this.$options,n=t;if(t=kn(t,e),this._initElement(t),1!==t.nodeType||null===tt(t,"v-pre")){var i=this._context&&this._context.$options,r=rn(t,e,i);Tn(this,e._content);var o,s=this.constructor;e._linkerCachable&&(o=s.linker,o||(o=s.linker=Ke(t,e)));var a=r(this,t,this._scope),u=o?o(this,t):Ke(t,e)(this,t);this._unlinkFn=function(){a(),u(!0)},e.replace&&at(n,t),this._isCompiled=!0,this._callHook("compiled")}},t.prototype._initElement=function(t){xt(t)?(this._isFragment=!0,this.$el=this._fragmentStart=t.firstChild,this._fragmentEnd=t.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=t):this.$el=t,this.$el.__vue__=this,this._callHook("beforeCompile")},t.prototype._bindDir=function(t,e,n,i,r){this._directives.push(new An(t,this,e,n,i,r))},t.prototype._destroy=function(t,e){if(this._isBeingDestroyed)return void(e||this._cleanup());var n,i,r=this,o=function(){!n||i||e||r._cleanup()};t&&this.$el&&(i=!0,this.$remove(function(){i=!1,o()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var s,a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),s=this.$children.length;s--;)this.$children[s].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),s=this._watchers.length;s--;)this._watchers[s].teardown();this.$el&&(this.$el.__vue__=null),n=!0,o()},t.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function Pn(e){e.prototype._applyFilters=function(t,e,n,i){var r,o,s,a,u,l,c,h,d;for(l=0,c=n.length;l<c;l++)if(r=n[i?c-l-1:l],o=At(this.$options,"filters",r.name,!0),o&&(o=i?o.write:o.read||o,"function"==typeof o)){if(s=i?[t,e]:[t],u=i?2:1,r.args)for(h=0,d=r.args.length;h<d;h++)a=r.args[h],s[h+u]=a.dynamic?this.$get(a.value):a.value;t=o.apply(this,s)}return t},e.prototype._resolveComponent=function(n,i){var r;if(r="function"==typeof n?n:At(this.$options,"components",n,!0))if(r.options)i(r);else if(r.resolved)i(r.resolved);else if(r.requested)r.pendingCallbacks.push(i);else{r.requested=!0;var o=r.pendingCallbacks=[i];r.call(this,function(t){_(t)&&(t=e.extend(t)),r.resolved=t;for(var n=0,i=o.length;n<i;n++)o[n](t)},function(e){"production"!==t.env.NODE_ENV&&Hi("Failed to resolve async component"+("string"==typeof n?": "+n:"")+". "+(e?"\nReason: "+e:""))})}}}function On(t){function e(t){return JSON.parse(JSON.stringify(t))}t.prototype.$get=function(t,e){var n=te(t);if(n){if(e){var i=this;return function(){i.$arguments=g(arguments);var t=n.get.call(i,i);return i.$arguments=null,t}}try{return n.get.call(this,this)}catch(r){}}},t.prototype.$set=function(t,e){var n=te(t,!0);n&&n.set&&n.set.call(this,this,e)},t.prototype.$delete=function(t){i(this._data,t)},t.prototype.$watch=function(t,e,n){var i,r=this;"string"==typeof t&&(i=B(t),t=i.expression);var o=new se(r,t,e,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||n.user!==!1});return n&&n.immediate&&e.call(r,o.value),function(){o.teardown()}},t.prototype.$eval=function(t,e){if(ys.test(t)){var n=B(t),i=this.$get(n.expression,e);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(t,e)},t.prototype.$interpolate=function(t){var e=V(t),n=this;return e?1===e.length?n.$eval(e[0].value)+"":e.map(function(t){return t.tag?n.$eval(t.value):t.value}).join(""):t},t.prototype.$log=function(t){var n=t?Ht(this._data,t):this._data;if(n&&(n=e(n)),!t){var i;for(i in this.$options.computed)n[i]=e(this[i]);if(this._props)for(i in this._props)n[i]=e(this[i])}console.log(n)}}function In(t){function e(t,e,i,r,o,s){e=n(e);var a=!Q(e),u=r===!1||a?o:s,l=!a&&!t._isAttached&&!Q(t.$el);return t._isFragment?(bt(t._fragmentStart,t._fragmentEnd,function(n){u(n,e,t)}),i&&i()):u(t.$el,e,t,i),l&&t._callHook("attached"),t}function n(t){return"string"==typeof t?document.querySelector(t):t}function i(t,e,n,i){e.appendChild(t),i&&i()}function r(t,e,n,i){it(t,e),i&&i()}function o(t,e,n){ot(t),n&&n()}t.prototype.$nextTick=function(t){pi(t,this)},t.prototype.$appendTo=function(t,n,r){return e(this,t,n,r,i,G)},t.prototype.$prependTo=function(t,e,i){return t=n(t),t.hasChildNodes()?this.$before(t.firstChild,e,i):this.$appendTo(t,e,i),this},t.prototype.$before=function(t,n,i){return e(this,t,n,i,r,Y)},t.prototype.$after=function(t,e,i){return t=n(t),t.nextSibling?this.$before(t.nextSibling,e,i):this.$appendTo(t.parentNode,e,i),this},t.prototype.$remove=function(t,e){if(!this.$el.parentNode)return t&&t();var n=this._isAttached&&Q(this.$el);n||(e=!1);var i=this,r=function(){n&&i._callHook("detached"),t&&t()};if(this._isFragment)wt(this._fragmentStart,this._fragmentEnd,this,this._fragment,r);else{var s=e===!1?o:X;s(this.$el,this,r)}return this}}function jn(t){function e(t,e,i){var r=t.$parent;if(r&&i&&!n.test(e))for(;r;)r._eventsCount[e]=(r._eventsCount[e]||0)+i,r=r.$parent}t.prototype.$on=function(t,n){return(this._events[t]||(this._events[t]=[])).push(n),e(this,t,1),this},t.prototype.$once=function(t,e){function n(){i.$off(t,n),e.apply(this,arguments)}var i=this;return n.fn=e,this.$on(t,n),this},t.prototype.$off=function(t,n){var i;if(!arguments.length){if(this.$parent)for(t in this._events)i=this._events[t],i&&e(this,t,-i.length);return this._events={},this}if(i=this._events[t],!i)return this;if(1===arguments.length)return e(this,t,-i.length),this._events[t]=null,this;for(var r,o=i.length;o--;)if(r=i[o],r===n||r.fn===n){e(this,t,-1),i.splice(o,1);break}return this},t.prototype.$emit=function(t){var e="string"==typeof t;t=e?t:t.name;var n=this._events[t],i=e||!n;if(n){n=n.length>1?g(n):n;var r=e&&n.some(function(t){return t._fromParent});r&&(i=!1);for(var o=g(arguments,1),s=0,a=n.length;s<a;s++){var u=n[s],l=u.apply(this,o);l!==!0||r&&!u._fromParent||(i=!0)}}return i},t.prototype.$broadcast=function(t){var e="string"==typeof t;if(t=e?t:t.name,this._eventsCount[t]){var n=this.$children,i=g(arguments);e&&(i[0]={name:t,source:this});for(var r=0,o=n.length;r<o;r++){var s=n[r],a=s.$emit.apply(s,i);a&&s.$broadcast.apply(s,i)}return this}},t.prototype.$dispatch=function(t){var e=this.$emit.apply(this,arguments);if(e){var n=this.$parent,i=g(arguments);for(i[0]={name:t,source:this};n;)e=n.$emit.apply(n,i),n=e?n.$parent:null;return this}};var n=/^hook:/}function Rn(e){function n(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void("production"!==t.env.NODE_ENV&&Hi("$mount() should be called only once.",this)):(e=J(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),Q(this.$el)?(this._callHook("attached"),n.call(this)):this.$once("hook:attached",n),this)},e.prototype.$destroy=function(t,e){this._destroy(t,e)},e.prototype.$compile=function(t,e,n,i){return Ke(t,this.$options,!0)(this,t,e,n,i)}}function qn(t){this._init(t)}function Fn(t,e,n){return n=n?parseInt(n,10):0,e=u(e),"number"==typeof e?t.slice(n,n+e):t}function Bn(t,e,n){if(t=xs(t),null==e)return t;if("function"==typeof e)return t.filter(e);e=(""+e).toLowerCase();for(var i,r,o,s,a="in"===n?3:2,u=Array.prototype.concat.apply([],g(arguments,a)),l=[],c=0,h=t.length;c<h;c++)if(i=t[c],o=i&&i.$value||i,s=u.length){for(;s--;)if(r=u[s],"$key"===r&&zn(i.$key,e)||zn(Ht(o,r),e)){l.push(i);break}}else zn(i,e)&&l.push(i);return l}function Un(t){function e(t,e,n){var r=i[n];return r&&("$key"!==r&&(y(t)&&"$value"in t&&(t=t.$value),y(e)&&"$value"in e&&(e=e.$value)),t=y(t)?Ht(t,r):t,e=y(e)?Ht(e,r):e),t===e?0:t>e?o:-o}var n=null,i=void 0;t=xs(t);var r=g(arguments,1),o=r[r.length-1];"number"==typeof o?(o=o<0?-1:1,r=r.length>1?r.slice(0,-1):r):o=1;var s=r[0];return s?("function"==typeof s?n=function(t,e){return s(t,e)*o}:(i=Array.prototype.concat.apply([],r),n=function(t,r,o){return o=o||0,o>=i.length-1?e(t,r,o):e(t,r,o)||n(t,r,o+1)}),t.slice().sort(n)):t}function zn(t,e){var n;if(_(t)){var i=Object.keys(t);for(n=i.length;n--;)if(zn(t[i[n]],e))return!0}else if(Jn(t)){for(n=t.length;n--;)if(zn(t[n],e))return!0}else if(null!=t)return t.toString().toLowerCase().indexOf(e)>-1}function Vn(e){function r(t){return new Function("return function "+f(t)+" (options) { this._init(options) }")()}e.options={directives:Uo,elementDirectives:ws,filters:$s,transitions:{},components:{},partials:{},replace:!0},e.util=or,e.config=Vi,e.set=n,e["delete"]=i,e.nextTick=pi,e.compiler=gs,e.FragmentFactory=be,e.internalDirectives=as,e.parsers={path:kr,text:Bi,template:to,directive:Oi,expression:jr},e.cid=0;var o=1;e.extend=function(e){e=e||{};var n=this,i=0===n.cid;if(i&&e._Ctor)return e._Ctor;var s=e.name||n.options.name;"production"!==t.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(s)||(Hi('Invalid component name: "'+s+'". Component names can only contain alphanumeric characaters and the hyphen.'),s=null));var a=r(s||"VueComponent");return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=o++,a.options=Mt(n.options,e),a["super"]=n,a.extend=n.extend,Vi._assetTypes.forEach(function(t){a[t]=n[t]}),s&&(a.options.components[s]=a),i&&(e._Ctor=a),a},e.use=function(t){if(!t.installed){var e=g(arguments,1);return e.unshift(this),"function"==typeof t.install?t.install.apply(t,e):t.apply(null,e),t.installed=!0,this}},e.mixin=function(t){e.options=Mt(e.options,t)},Vi._assetTypes.forEach(function(n){e[n]=function(i,r){return r?("production"!==t.env.NODE_ENV&&"component"===n&&(Yi.test(i)||Xi.test(i))&&Hi("Do not use built-in or reserved HTML elements as component id: "+i),"component"===n&&_(r)&&(r.name||(r.name=i),r=e.extend(r)),this.options[n+"s"][i]=r,r):this.options[n+"s"][i]}}),v(e.transition,Zi)}var Hn=Object.prototype.hasOwnProperty,Wn=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,Zn=/-(\w)/g,Gn=/([^-])([A-Z])/g,Yn=/(?:^|[-_\/])(\w)/g,Xn=Object.prototype.toString,Kn="[object Object]",Jn=Array.isArray,Qn="__proto__"in{},ti="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),ei=ti&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,ni=ti&&window.navigator.userAgent.toLowerCase(),ii=ni&&ni.indexOf("trident")>0,ri=ni&&ni.indexOf("msie 9.0")>0,oi=ni&&ni.indexOf("android")>0,si=ni&&/iphone|ipad|ipod|ios/.test(ni),ai=void 0,ui=void 0,li=void 0,ci=void 0;if(ti&&!ri){var hi=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,di=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;ai=hi?"WebkitTransition":"transition",ui=hi?"webkitTransitionEnd":"transitionend",li=di?"WebkitAnimation":"animation",ci=di?"webkitAnimationEnd":"animationend"}var pi=function(){function t(){n=!1;var t=e.slice(0);e.length=0;for(var i=0;i<t.length;i++)t[i]()}var e=[],n=!1,i=void 0;if("undefined"!=typeof Promise&&E(Promise)){var r=Promise.resolve(),o=function(){};i=function(){r.then(t),si&&setTimeout(o)}}else if("undefined"!=typeof MutationObserver){var s=1,a=new MutationObserver(t),u=document.createTextNode(String(s));a.observe(u,{characterData:!0}),i=function(){s=(s+1)%2,u.data=String(s)}}else i=setTimeout;return function(r,o){var s=o?function(){r.call(o)}:r;e.push(s),n||(n=!0,i(t,0))}}(),fi=void 0;"undefined"!=typeof Set&&E(Set)?fi=Set:(fi=function(){this.set=Object.create(null)},fi.prototype.has=function(t){return void 0!==this.set[t]},fi.prototype.add=function(t){this.set[t]=1},fi.prototype.clear=function(){this.set=Object.create(null)});var mi=C.prototype;mi.put=function(t,e){var n,i=this.get(t,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:t},this._keymap[t]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=e,n},mi.shift=function(){var t=this.head;return t&&(this.head=this.head.newer,this.head.older=void 0,t.newer=t.older=void 0,this._keymap[t.key]=void 0,this.size--),t},mi.get=function(t,e){var n=this._keymap[t];if(void 0!==n)return n===this.tail?e?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,e?n:n.value)};var gi,vi,yi,_i,bi,wi,xi=new C(1e3),ki=/^in$|^-?\d+/,$i=0,Ei=1,Ci=2,Ti=3,Li=34,Si=39,Di=124,Mi=92,Ai=32,Ni={91:1,123:1,40:1},Pi={91:93,123:125,40:41},Oi=Object.freeze({parseDirective:B}),Ii=/[-.*+?^${}()|[\]\/\\]/g,ji=void 0,Ri=void 0,qi=void 0,Fi=/[^|]\|[^|]/,Bi=Object.freeze({compileRegex:z,parseText:V,tokensToExp:H}),Ui=["{{","}}"],zi=["{{{","}}}"],Vi=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==t.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return Ui},set:function(t){Ui=t,z()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return zi},set:function(t){zi=t,z()},configurable:!0,enumerable:!0}}),Hi=void 0,Wi=void 0;"production"!==t.env.NODE_ENV&&!function(){var t="undefined"!=typeof console;Hi=function(e,n){t&&!Vi.silent&&console.error("[Vue warn]: "+e+(n?Wi(n):""))},Wi=function(t){var e=t._isVue?t.$options.name:t.name;return e?" (found in component: <"+p(e)+">)":""}}();var Zi=Object.freeze({appendWithTransition:G,beforeWithTransition:Y,removeWithTransition:X,applyTransition:K}),Gi=/^v-ref:/,Yi=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Xi=/^(slot|partial|component)$/i,Ki=void 0;"production"!==t.env.NODE_ENV&&(Ki=function(t,e){return e.indexOf("-")>-1?t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:/HTMLUnknownElement/.test(t.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(e)});var Ji=Vi.optionMergeStrategies=Object.create(null);Ji.data=function(e,n,i){return i?e||n?function(){var t="function"==typeof n?n.call(i):n,r="function"==typeof e?e.call(i):void 0;return t?Ct(t,r):r}:void 0:n?"function"!=typeof n?("production"!==t.env.NODE_ENV&&Hi('The "data" option should be a function that returns a per-instance value in component definitions.',i),e):e?function(){return Ct(n.call(this),e.call(this))}:n:e},Ji.el=function(e,n,i){if(!i&&n&&"function"!=typeof n)return void("production"!==t.env.NODE_ENV&&Hi('The "el" option should be a function that returns a per-instance value in component definitions.',i));var r=n||e;return i&&"function"==typeof r?r.call(i):r},Ji.init=Ji.created=Ji.ready=Ji.attached=Ji.detached=Ji.beforeCompile=Ji.compiled=Ji.beforeDestroy=Ji.destroyed=Ji.activate=function(t,e){return e?t?t.concat(e):Jn(e)?e:[e]:t},Vi._assetTypes.forEach(function(t){Ji[t+"s"]=Tt}),Ji.watch=Ji.events=function(t,e){if(!e)return t;if(!t)return e;var n={};v(n,t);for(var i in e){var r=n[i],o=e[i];r&&!Jn(r)&&(r=[r]),n[i]=r?r.concat(o):[o]}return n},Ji.props=Ji.methods=Ji.computed=function(t,e){if(!e)return t;if(!t)return e;var n=Object.create(null);return v(n,t),v(n,e),n};var Qi=function(t,e){return void 0===e?t:e},tr=0;Nt.target=null,Nt.prototype.addSub=function(t){this.subs.push(t)},Nt.prototype.removeSub=function(t){this.subs.$remove(t)},Nt.prototype.depend=function(){Nt.target.addDep(this)},Nt.prototype.notify=function(){for(var t=g(this.subs),e=0,n=t.length;e<n;e++)t[e].update()};var er=Array.prototype,nr=Object.create(er);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=er[t];b(nr,t,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var r,o=e.apply(this,i),s=this.__ob__;switch(t){case"push":r=i;break;case"unshift":r=i;break;case"splice":r=i.slice(2)}return r&&s.observeArray(r),s.dep.notify(),o})}),b(er,"$set",function(t,e){return t>=this.length&&(this.length=Number(t)+1),this.splice(t,1,e)[0]}),b(er,"$remove",function(t){if(this.length){var e=x(this,t);return e>-1?this.splice(e,1):void 0}});var ir=Object.getOwnPropertyNames(nr),rr=!0;Ot.prototype.walk=function(t){for(var e=Object.keys(t),n=0,i=e.length;n<i;n++)this.convert(e[n],t[e[n]])},Ot.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Rt(t[e])},Ot.prototype.convert=function(t,e){qt(this.value,t,e)},Ot.prototype.addVm=function(t){(this.vms||(this.vms=[])).push(t)},Ot.prototype.removeVm=function(t){this.vms.$remove(t)};var or=Object.freeze({defineReactive:qt,set:n,del:i,hasOwn:r,isLiteral:o,isReserved:s,_toString:a,toNumber:u,toBoolean:l,stripQuotes:c,camelize:h,hyphenate:p,classify:f,bind:m,toArray:g,extend:v,isObject:y,isPlainObject:_,def:b,debounce:w,indexOf:x,cancellable:k,looseEqual:$,isArray:Jn,hasProto:Qn,inBrowser:ti,devtools:ei,isIE:ii,isIE9:ri,isAndroid:oi,isIOS:si,get transitionProp(){return ai},get transitionEndEvent(){return ui},get animationProp(){return li},get animationEndEvent(){return ci},nextTick:pi,get _Set(){return fi},query:J,inDoc:Q,getAttr:tt,getBindAttr:et,hasBindAttr:nt,before:it,after:rt,remove:ot,prepend:st,replace:at,on:ut,off:lt,setClass:ht,addClass:dt,removeClass:pt,extractContent:ft,trimNode:mt,isTemplate:vt,createAnchor:yt,findRef:_t,mapNodeRange:bt,removeNodeRange:wt,isFragment:xt,getOuterHTML:kt,mergeOptions:Mt,resolveAsset:At,checkComponentAttr:$t,
commonTagRE:Yi,reservedTagRE:Xi,get warn(){return Hi}}),sr=0,ar=new C(1e3),ur=0,lr=1,cr=2,hr=3,dr=0,pr=1,fr=2,mr=3,gr=4,vr=5,yr=6,_r=7,br=8,wr=[];wr[dr]={ws:[dr],ident:[mr,ur],"[":[gr],eof:[_r]},wr[pr]={ws:[pr],".":[fr],"[":[gr],eof:[_r]},wr[fr]={ws:[fr],ident:[mr,ur]},wr[mr]={ident:[mr,ur],0:[mr,ur],number:[mr,ur],ws:[pr,lr],".":[fr,lr],"[":[gr,lr],eof:[_r,lr]},wr[gr]={"'":[vr,ur],'"':[yr,ur],"[":[gr,cr],"]":[pr,hr],eof:br,"else":[gr,ur]},wr[vr]={"'":[gr,ur],eof:br,"else":[vr,ur]},wr[yr]={'"':[gr,ur],eof:br,"else":[yr,ur]};var xr;"production"!==t.env.NODE_ENV&&(xr=function(t,e){Hi('You are setting a non-existent path "'+t.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',e)});var kr=Object.freeze({parsePath:Vt,getPath:Ht,setPath:Wt}),$r=new C(1e3),Er="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",Cr=new RegExp("^("+Er.replace(/,/g,"\\b|")+"\\b)"),Tr="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",Lr=new RegExp("^("+Tr.replace(/,/g,"\\b|")+"\\b)"),Sr=/\s/g,Dr=/\n/g,Mr=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\"']|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,Ar=/"(\d+)"/g,Nr=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,Pr=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,Or=/^(?:true|false|null|undefined|Infinity|NaN)$/,Ir=[],jr=Object.freeze({parseExpression:te,isSimplePath:ee}),Rr=[],qr=[],Fr={},Br={},Ur=!1,zr=0;se.prototype.get=function(){this.beforeGet();var e,n=this.scope||this.vm;try{e=this.getter.call(n,n)}catch(i){"production"!==t.env.NODE_ENV&&Vi.warnExpressionErrors&&Hi('Error when evaluating expression "'+this.expression+'": '+i.toString(),this.vm)}return this.deep&&ae(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=n._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},se.prototype.set=function(e){var n=this.scope||this.vm;this.filters&&(e=n._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(n,n,e)}catch(i){"production"!==t.env.NODE_ENV&&Vi.warnExpressionErrors&&Hi('Error when evaluating setter "'+this.expression+'": '+i.toString(),this.vm)}var r=n.$forContext;if(r&&r.alias===this.expression){if(r.filters)return void("production"!==t.env.NODE_ENV&&Hi("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));r._withLock(function(){n.$key?r.rawValue[n.$key]=e:r.rawValue.$set(n.$index,e)})}},se.prototype.beforeGet=function(){Nt.target=this},se.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},se.prototype.afterGet=function(){Nt.target=null;for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},se.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!Vi.async?this.run():(this.shallow=this.queued?!!e&&this.shallow:!!e,this.queued=!0,"production"!==t.env.NODE_ENV&&Vi.debug&&(this.prevError=new Error("[vue] async stack trace")),oe(this))},se.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(y(e)||this.deep)&&!this.shallow){var n=this.value;this.value=e;var i=this.prevError;if("production"!==t.env.NODE_ENV&&Vi.debug&&i){this.prevError=null;try{this.cb.call(this.vm,e,n)}catch(r){throw pi(function(){throw i},0),r}}else this.cb.call(this.vm,e,n)}this.queued=this.shallow=!1}},se.prototype.evaluate=function(){var t=Nt.target;this.value=this.get(),this.dirty=!1,Nt.target=t},se.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},se.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var Vr=new fi,Hr={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(t){this.el[this.attr]=a(t)}},Wr=new C(1e3),Zr=new C(1e3),Gr={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};Gr.td=Gr.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Gr.option=Gr.optgroup=[1,'<select multiple="multiple">',"</select>"],Gr.thead=Gr.tbody=Gr.colgroup=Gr.caption=Gr.tfoot=[1,"<table>","</table>"],Gr.g=Gr.defs=Gr.symbol=Gr.use=Gr.image=Gr.text=Gr.circle=Gr.ellipse=Gr.line=Gr.path=Gr.polygon=Gr.polyline=Gr.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Yr=/<([\w:-]+)/,Xr=/&#?\w+?;/,Kr=/<!--/,Jr=function(){if(ti){var t=document.createElement("div");return t.innerHTML="<template>1</template>",!t.cloneNode(!0).firstChild.innerHTML}return!1}(),Qr=function(){if(ti){var t=document.createElement("textarea");return t.placeholder="t","t"===t.cloneNode(!0).value}return!1}(),to=Object.freeze({cloneNode:he,parseTemplate:de}),eo={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=yt("v-html"),at(this.el,this.anchor))},update:function(t){t=a(t),this.nodes?this.swap(t):this.el.innerHTML=t},swap:function(t){for(var e=this.nodes.length;e--;)ot(this.nodes[e]);var n=de(t,!0,!0);this.nodes=g(n.childNodes),it(n,this.anchor)}};pe.prototype.callHook=function(t){var e,n;for(e=0,n=this.childFrags.length;e<n;e++)this.childFrags[e].callHook(t);for(e=0,n=this.children.length;e<n;e++)t(this.children[e])},pe.prototype.beforeRemove=function(){var t,e;for(t=0,e=this.childFrags.length;t<e;t++)this.childFrags[t].beforeRemove(!1);for(t=0,e=this.children.length;t<e;t++)this.children[t].$destroy(!1,!0);var n=this.unlink.dirs;for(t=0,e=n.length;t<e;t++)n[t]._watcher&&n[t]._watcher.teardown()},pe.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var no=new C(5e3);be.prototype.create=function(t,e,n){var i=he(this.template);return new pe(this.linker,this.vm,i,t,e,n)};var io=700,ro=800,oo=850,so=1100,ao=1500,uo=1500,lo=1750,co=2100,ho=2200,po=2300,fo=0,mo={priority:ho,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){"production"!==t.env.NODE_ENV&&this.el.hasAttribute("v-if")&&Hi("<"+this.el.tagName.toLowerCase()+' v-for="'+this.expression+'" v-if="'+this.el.getAttribute("v-if")+'">: Using v-if and v-for on the same element is not recommended - consider filtering the source Array instead.',this.vm);var e=this.expression.match(/(.*) (?:in|of) (.*)/);if(e){var n=e[1].match(/\((.*),(.*)\)/);n?(this.iterator=n[1].trim(),this.alias=n[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(!this.alias)return void("production"!==t.env.NODE_ENV&&Hi('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++fo;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=yt("v-for-start"),this.end=yt("v-for-end"),at(this.el,this.end),it(this.start,this.end),this.cache=Object.create(null),this.factory=new be(this.vm,this.el)},update:function(t){this.diff(t),this.updateRef(),this.updateModel()},diff:function(t){var e,n,i,o,s,a,u=t[0],l=this.fromObject=y(u)&&r(u,"$key")&&r(u,"$value"),c=this.params.trackBy,h=this.frags,d=this.frags=new Array(t.length),p=this.alias,f=this.iterator,m=this.start,g=this.end,v=Q(m),_=!h;for(e=0,n=t.length;e<n;e++)u=t[e],o=l?u.$key:null,s=l?u.$value:u,a=!y(s),i=!_&&this.getCachedFrag(s,e,o),i?(i.reused=!0,i.scope.$index=e,o&&(i.scope.$key=o),f&&(i.scope[f]=null!==o?o:e),(c||l||a)&&Pt(function(){i.scope[p]=s})):(i=this.create(s,p,e,o),i.fresh=!_),d[e]=i,_&&i.before(g);if(!_){var b=0,w=h.length-d.length;for(this.vm._vForRemoving=!0,e=0,n=h.length;e<n;e++)i=h[e],i.reused||(this.deleteCachedFrag(i),this.remove(i,b++,w,v));this.vm._vForRemoving=!1,b&&(this.vm._watchers=this.vm._watchers.filter(function(t){return t.active}));var x,k,$,E=0;for(e=0,n=d.length;e<n;e++)i=d[e],x=d[e-1],k=x?x.staggerCb?x.staggerAnchor:x.end||x.node:m,i.reused&&!i.staggerCb?($=we(i,m,this.id),$===x||$&&we($,m,this.id)===x||this.move(i,k)):this.insert(i,E++,k,v),i.reused=i.fresh=!1}},create:function(t,e,n,i){var r=this._host,o=this._scope||this.vm,s=Object.create(o);s.$refs=Object.create(o.$refs),s.$els=Object.create(o.$els),s.$parent=o,s.$forContext=this,Pt(function(){qt(s,e,t)}),qt(s,"$index",n),i?qt(s,"$key",i):s.$key&&b(s,"$key",null),this.iterator&&qt(s,this.iterator,null!==i?i:n);var a=this.factory.create(r,s,this._frag);return a.forId=this.id,this.cacheFrag(t,a,n,i),a},updateRef:function(){var t=this.descriptor.ref;if(t){var e,n=(this._scope||this.vm).$refs;this.fromObject?(e={},this.frags.forEach(function(t){e[t.scope.$key]=$e(t)})):e=this.frags.map($e),n[t]=e}},updateModel:function(){if(this.isOption){var t=this.start.parentNode,e=t&&t.__v_model;e&&e.forceUpdate()}},insert:function(t,e,n,i){t.staggerCb&&(t.staggerCb.cancel(),t.staggerCb=null);var r=this.getStagger(t,e,null,"enter");if(i&&r){var o=t.staggerAnchor;o||(o=t.staggerAnchor=yt("stagger-anchor"),o.__v_frag=t),rt(o,n);var s=t.staggerCb=k(function(){t.staggerCb=null,t.before(o),ot(o)});setTimeout(s,r)}else{var a=n.nextSibling;a||(rt(this.end,n),a=this.end),t.before(a)}},remove:function(t,e,n,i){if(t.staggerCb)return t.staggerCb.cancel(),void(t.staggerCb=null);var r=this.getStagger(t,e,n,"leave");if(i&&r){var o=t.staggerCb=k(function(){t.staggerCb=null,t.remove()});setTimeout(o,r)}else t.remove()},move:function(t,e){e.nextSibling||this.end.parentNode.appendChild(this.end),t.before(e.nextSibling,!1)},cacheFrag:function(e,n,i,o){var s,a=this.params.trackBy,u=this.cache,l=!y(e);o||a||l?(s=ke(i,o,e,a),u[s]?"$index"!==a&&"production"!==t.env.NODE_ENV&&this.warnDuplicate(e):u[s]=n):(s=this.id,r(e,s)?null===e[s]?e[s]=n:"production"!==t.env.NODE_ENV&&this.warnDuplicate(e):Object.isExtensible(e)?b(e,s,n):"production"!==t.env.NODE_ENV&&Hi("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),n.raw=e},getCachedFrag:function(e,n,i){var r,o=this.params.trackBy,s=!y(e);if(i||o||s){var a=ke(n,i,e,o);r=this.cache[a]}else r=e[this.id];return r&&(r.reused||r.fresh)&&"production"!==t.env.NODE_ENV&&this.warnDuplicate(e),r},deleteCachedFrag:function(t){var e=t.raw,n=this.params.trackBy,i=t.scope,o=i.$index,s=r(i,"$key")&&i.$key,a=!y(e);if(n||s||a){var u=ke(o,s,e,n);this.cache[u]=null}else e[this.id]=null,t.raw=null},getStagger:function(t,e,n,i){i+="Stagger";var r=t.node.__v_trans,o=r&&r.hooks,s=o&&(o[i]||o.stagger);return s?s.call(t,e,n):e*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(t){return this.rawValue=t,t},_postProcess:function(t){if(Jn(t))return t;if(_(t)){for(var e,n=Object.keys(t),i=n.length,r=new Array(i);i--;)e=n[i],r[i]={$key:e,$value:t[e]};return r}return"number"!=typeof t||isNaN(t)||(t=xe(t)),t||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var t,e=this.frags.length;e--;)t=this.frags[e],this.deleteCachedFrag(t),t.destroy()}};"production"!==t.env.NODE_ENV&&(mo.warnDuplicate=function(t){Hi('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(t)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var go={priority:co,terminal:!0,bind:function(){var e=this.el;if(e.__vue__)"production"!==t.env.NODE_ENV&&Hi('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var n=e.nextElementSibling;n&&null!==tt(n,"v-else")&&(ot(n),this.elseEl=n),this.anchor=yt("v-if"),at(e,this.anchor)}},update:function(t){this.invalid||(t?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new be(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new be(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},vo={bind:function(){var t=this.el.nextElementSibling;t&&null!==tt(t,"v-else")&&(this.elseEl=t)},update:function(t){this.apply(this.el,t),this.elseEl&&this.apply(this.elseEl,!t)},apply:function(t,e){function n(){t.style.display=e?"":"none"}Q(t)?K(t,e?1:-1,n,this.vm):n()}},yo={bind:function(){var t=this,e=this.el,n="range"===e.type,i=this.params.lazy,r=this.params.number,o=this.params.debounce,s=!1;if(oi||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||t.listener()})),this.focused=!1,n||i||(this.on("focus",function(){t.focused=!0}),this.on("blur",function(){t.focused=!1,t._frag&&!t._frag.inserted||t.rawListener()})),this.listener=this.rawListener=function(){if(!s&&t._bound){var i=r||n?u(e.value):e.value;t.set(i),pi(function(){t._bound&&!t.focused&&t.update(t._watcher.value)})}},o&&(this.listener=w(this.listener,o)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(e)[a]("change",this.rawListener),i||jQuery(e)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&ri&&(this.on("cut",function(){pi(t.listener)}),this.on("keyup",function(e){46!==e.keyCode&&8!==e.keyCode||t.listener()})),(e.hasAttribute("value")||"TEXTAREA"===e.tagName&&e.value.trim())&&(this.afterBind=this.listener)},update:function(t){t=a(t),t!==this.el.value&&(this.el.value=t)},unbind:function(){var t=this.el;if(this.hasjQuery){var e=jQuery.fn.off?"off":"unbind";jQuery(t)[e]("change",this.listener),jQuery(t)[e]("input",this.listener)}}},_o={bind:function(){var t=this,e=this.el;this.getValue=function(){if(e.hasOwnProperty("_value"))return e._value;var n=e.value;return t.params.number&&(n=u(n)),n},this.listener=function(){t.set(t.getValue())},this.on("change",this.listener),e.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(t){this.el.checked=$(t,this.getValue())}},bo={bind:function(){var t=this,e=this,n=this.el;this.forceUpdate=function(){e._watcher&&e.update(e._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var t=Ee(n,i);t=e.params.number?Jn(t)?t.map(u):u(t):t,e.set(t)},this.on("change",this.listener);var r=Ee(n,i,!0);(i&&r.length||!i&&null!==r)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){pi(t.forceUpdate)}),Q(n)||pi(this.forceUpdate)},update:function(t){var e=this.el;e.selectedIndex=-1;for(var n,i,r=this.multiple&&Jn(t),o=e.options,s=o.length;s--;)n=o[s],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=r?Ce(t,i)>-1:$(t,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},wo={bind:function(){function t(){var t=n.checked;return t&&n.hasOwnProperty("_trueValue")?n._trueValue:!t&&n.hasOwnProperty("_falseValue")?n._falseValue:t}var e=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:e.params.number?u(n.value):n.value},this.listener=function(){var i=e._watcher.get();if(Jn(i)){var r=e.getValue(),o=x(i,r);n.checked?o<0&&e.set(i.concat(r)):o>-1&&e.set(i.slice(0,o).concat(i.slice(o+1)))}else e.set(t())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(t){var e=this.el;Jn(t)?e.checked=x(t,this.getValue())>-1:e.hasOwnProperty("_trueValue")?e.checked=$(t,e._trueValue):e.checked=!!t}},xo={text:yo,radio:_o,select:bo,checkbox:wo},ko={priority:ro,twoWay:!0,handlers:xo,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==t.env.NODE_ENV&&Hi('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var e,n=this.el,i=n.tagName;if("INPUT"===i)e=xo[n.type]||xo.text;else if("SELECT"===i)e=xo.select;else{if("TEXTAREA"!==i)return void("production"!==t.env.NODE_ENV&&Hi("v-model does not support element type: "+i,this.vm));e=xo.text}n.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var t=this.filters;if(t)for(var e=t.length;e--;){var n=At(this.vm.$options,"filters",t[e].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},$o={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},Eo={priority:io,acceptStatement:!0,keyCodes:$o,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var t=this;this.iframeBind=function(){ut(t.el.contentWindow,t.arg,t.handler,t.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"!=typeof e)return void("production"!==t.env.NODE_ENV&&Hi("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+e,this.vm));this.modifiers.stop&&(e=Le(e)),this.modifiers.prevent&&(e=Se(e)),this.modifiers.self&&(e=De(e));var n=Object.keys(this.modifiers).filter(function(t){return"stop"!==t&&"prevent"!==t&&"self"!==t&&"capture"!==t});n.length&&(e=Te(e,n)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():ut(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var t=this.iframeBind?this.el.contentWindow:this.el;this.handler&&lt(t,this.arg,this.handler)},unbind:function(){this.reset()}},Co=["-webkit-","-moz-","-ms-"],To=["Webkit","Moz","ms"],Lo=/!important;?$/,So=Object.create(null),Do=null,Mo={deep:!0,update:function(t){"string"==typeof t?this.el.style.cssText=t:Jn(t)?this.handleObject(t.reduce(v,{})):this.handleObject(t||{})},handleObject:function(t){var e,n,i=this.cache||(this.cache={});for(e in i)e in t||(this.handleSingle(e,null),delete i[e]);for(e in t)n=t[e],n!==i[e]&&(i[e]=n,this.handleSingle(e,n))},handleSingle:function(e,n){if(e=Me(e))if(null!=n&&(n+=""),n){var i=Lo.test(n)?"important":"";i?("production"!==t.env.NODE_ENV&&Hi("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),n=n.replace(Lo,"").trim(),this.el.style.setProperty(e.kebab,n,i)):this.el.style[e.camel]=n}else this.el.style[e.camel]=""}},Ao="http://www.w3.org/1999/xlink",No=/^xlink:/,Po=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,Oo=/^(?:value|checked|selected|muted)$/,Io=/^(?:draggable|contenteditable|spellcheck)$/,jo={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Ro={priority:oo,bind:function(){var e=this.arg,n=this.el.tagName;e||(this.deep=!0);var i=this.descriptor,r=i.interp;if(r&&(i.hasOneTime&&(this.expression=H(r,this._scope||this.vm)),(Po.test(e)||"name"===e&&("PARTIAL"===n||"SLOT"===n))&&("production"!==t.env.NODE_ENV&&Hi(e+'="'+i.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(e),this.invalid=!0),"production"!==t.env.NODE_ENV)){var o=e+'="'+i.raw+'": ';"src"===e&&Hi(o+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===e&&Hi(o+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(t){if(!this.invalid){var e=this.arg;this.arg?this.handleSingle(e,t):this.handleObject(t||{})}},handleObject:Mo.handleObject,handleSingle:function(t,e){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(t=h(t)),!i&&Oo.test(t)&&t in n){var r="value"===t&&null==e?"":e;n[t]!==r&&(n[t]=r)}var o=jo[t];if(!i&&o){n[o]=e;var s=n.__v_model;s&&s.listener()}return"value"===t&&"TEXTAREA"===n.tagName?void n.removeAttribute(t):void(Io.test(t)?n.setAttribute(t,e?"true":"false"):null!=e&&e!==!1?"class"===t?(n.__v_trans&&(e+=" "+n.__v_trans.id+"-transition"),ht(n,e)):No.test(t)?n.setAttributeNS(Ao,t,e===!0?"":e):n.setAttribute(t,e===!0?"":e):n.removeAttribute(t))}},qo={priority:ao,bind:function(){if(this.arg){var t=this.id=h(this.arg),e=(this._scope||this.vm).$els;r(e,t)?e[t]=this.el:qt(e,t,this.el)}},unbind:function(){var t=(this._scope||this.vm).$els;t[this.id]===this.el&&(t[this.id]=null)}},Fo={bind:function(){"production"!==t.env.NODE_ENV&&Hi("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},Bo={bind:function(){var t=this.el;this.vm.$once("pre-hook:compiled",function(){t.removeAttribute("v-cloak")})}},Uo={text:Hr,html:eo,"for":mo,"if":go,show:vo,model:ko,on:Eo,bind:Ro,el:qo,ref:Fo,cloak:Bo},zo={deep:!0,update:function(t){t?"string"==typeof t?this.setClass(t.trim().split(/\s+/)):this.setClass(Ne(t)):this.cleanup()},setClass:function(t){this.cleanup(t);for(var e=0,n=t.length;e<n;e++){var i=t[e];i&&Pe(this.el,i,dt)}this.prevKeys=t},cleanup:function(t){var e=this.prevKeys;if(e)for(var n=e.length;n--;){var i=e[n];(!t||t.indexOf(i)<0)&&Pe(this.el,i,pt)}}},Vo={priority:uo,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==t.env.NODE_ENV&&Hi('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=ft(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=yt("v-component"),at(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+p(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(t){this.literal||this.setComponent(t)},setComponent:function(t,e){if(this.invalidatePending(),t){var n=this;this.resolveComponent(t,function(){n.mountComponent(e)})}else this.unbuild(!0),this.remove(this.childVM,e),this.childVM=null},resolveComponent:function(t,e){var n=this;this.pendingComponentCb=k(function(i){n.ComponentName=i.options.name||("string"==typeof t?t:null),n.Component=i,e()}),this.vm._resolveComponent(t,this.pendingComponentCb)},mountComponent:function(t){this.unbuild(!0);var e=this,n=this.Component.options.activate,i=this.getCached(),r=this.build();n&&!i?(this.waitingFor=r,Oe(n,r,function(){e.waitingFor===r&&(e.waitingFor=null,e.transition(r,t))})):(i&&r._updateRef(),this.transition(r,t))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var n=this.getCached();if(n)return n;if(this.Component){var i={name:this.ComponentName,el:he(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&v(i,e);var r=new this.Component(i);return this.keepAlive&&(this.cache[this.Component.cid]=r),"production"!==t.env.NODE_ENV&&this.el.hasAttribute("transition")&&r._isFragment&&Hi("Transitions will not work on a fragment instance. Template: "+r.$options.template,r),r}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(t){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var e=this.childVM;return!e||this.keepAlive?void(e&&(e._inactive=!0,e._updateRef(!0))):void e.$destroy(!1,t)},remove:function(t,e){var n=this.keepAlive;if(t){this.pendingRemovals++,this.pendingRemovalCb=e;var i=this;t.$remove(function(){i.pendingRemovals--,n||t._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else e&&e()},transition:function(t,e){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),t._inactive=!1,this.childVM=t,n.params.transitionMode){case"in-out":t.$before(n.anchor,function(){n.remove(i,e)});break;case"out-in":n.remove(i,function(){t.$before(n.anchor,e)});break;default:n.remove(i),t.$before(n.anchor,e)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var t in this.cache)this.cache[t].$destroy();this.cache=null}}},Ho=Vi._propBindingModes,Wo={},Zo=/^[$_a-zA-Z]+[\w$]*$/,Go=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,Yo=Vi._propBindingModes,Xo={bind:function(){var t=this.vm,e=t._context,n=this.descriptor.prop,i=n.path,r=n.parentPath,o=n.mode===Yo.TWO_WAY,s=this.parentWatcher=new se(e,r,function(e){Fe(t,n,e)},{twoWay:o,filters:n.filters,scope:this._scope});if(qe(t,n,s.value),o){var a=this;t.$once("pre-hook:created",function(){a.childWatcher=new se(t,i,function(t){s.set(t)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Ko=[],Jo=!1,Qo="transition",ts="animation",es=ai+"Duration",ns=li+"Duration",is=ti&&window.requestAnimationFrame,rs=is?function(t){is(function(){is(t)})}:function(t){setTimeout(t,50)},os=Ye.prototype;os.enter=function(t,e){this.cancelPending(),this.callHook("beforeEnter"),this.cb=e,dt(this.el,this.enterClass),t(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,Ze(this.enterNextTick))},os.enterNextTick=function(){var t=this;this.justEntered=!0,rs(function(){t.justEntered=!1});var e=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===Qo&&pt(this.el,this.enterClass):n===Qo?(pt(this.el,this.enterClass),this.setupCssCb(ui,e)):n===ts?this.setupCssCb(ci,e):e()},os.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,pt(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},os.leave=function(t,e){this.cancelPending(),this.callHook("beforeLeave"),this.op=t,this.cb=e,dt(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():Ze(this.leaveNextTick)))},os.leaveNextTick=function(){var t=this.getCssTransitionType(this.leaveClass);if(t){var e=t===Qo?ui:ci;this.setupCssCb(e,this.leaveDone)}else this.leaveDone()},os.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),pt(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},os.cancelPending=function(){this.op=this.cb=null;var t=!1;this.pendingCssCb&&(t=!0,lt(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(t=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),t&&(pt(this.el,this.enterClass),pt(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},os.callHook=function(t){this.hooks&&this.hooks[t]&&this.hooks[t].call(this.vm,this.el)},os.callHookWithCb=function(t){var e=this.hooks&&this.hooks[t];e&&(e.length>1&&(this.pendingJsCb=k(this[t+"Done"])),e.call(this.vm,this.el,this.pendingJsCb))},os.getCssTransitionType=function(t){if(!(!ui||document.hidden||this.hooks&&this.hooks.css===!1||Xe(this.el))){var e=this.type||this.typeCache[t];if(e)return e;var n=this.el.style,i=window.getComputedStyle(this.el),r=n[es]||i[es];if(r&&"0s"!==r)e=Qo;else{var o=n[ns]||i[ns];o&&"0s"!==o&&(e=ts)}return e&&(this.typeCache[t]=e),e}},os.setupCssCb=function(t,e){this.pendingCssEvent=t;var n=this,i=this.el,r=this.pendingCssCb=function(o){o.target===i&&(lt(i,t,r),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&e&&e())};ut(i,t,r)};var ss={priority:so,update:function(t,e){var n=this.el,i=At(this.vm.$options,"transitions",t);t=t||"v",e=e||"v",n.__v_trans=new Ye(n,t,i,this.vm),pt(n,e+"-transition"),dt(n,t+"-transition")}},as={style:Mo,"class":zo,component:Vo,prop:Xo,transition:ss},us=/^v-bind:|^:/,ls=/^v-on:|^@/,cs=/^v-([^:]+)(?:$|:(.*)$)/,hs=/\.[^\.]+/g,ds=/^(v-bind:|:)?transition$/,ps=1e3,fs=2e3;gn.terminal=!0;var ms=/[^\w\-:\.]/,gs=Object.freeze({compile:Ke,compileAndLinkProps:nn,compileRoot:rn,transclude:kn,resolveSlots:Tn}),vs=/^v-on:|^@/;An.prototype._bind=function(){var t=this.name,e=this.descriptor;if(("cloak"!==t||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=e.attr||"v-"+t;this.el.removeAttribute(n)}var i=e.def;if("function"==typeof i?this.update=i:v(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(e.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var r=this;this.update?this._update=function(t,e){r._locked||r.update(t,e)}:this._update=Mn;var o=this._preProcess?m(this._preProcess,this):null,s=this._postProcess?m(this._postProcess,this):null,a=this._watcher=new se(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:o,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},An.prototype._setupParams=function(){if(this.params){var t=this.params;this.params=Object.create(null);for(var e,n,i,r=t.length;r--;)e=p(t[r]),i=h(e),n=et(this.el,e),null!=n?this._setupParamWatcher(i,n):(n=tt(this.el,e),null!=n&&(this.params[i]=""===n||n))}},An.prototype._setupParamWatcher=function(t,e){var n=this,i=!1,r=(this._scope||this.vm).$watch(e,function(e,r){if(n.params[t]=e,i){var o=n.paramWatchers&&n.paramWatchers[t];o&&o.call(n,e,r)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(r)},An.prototype._checkStatement=function(){var t=this.expression;if(t&&this.acceptStatement&&!ee(t)){var e=te(t).get,n=this._scope||this.vm,i=function(t){n.$event=t,e.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},An.prototype.set=function(e){this.twoWay?this._withLock(function(){this._watcher.set(e)}):"production"!==t.env.NODE_ENV&&Hi("Directive.set() can only be used inside twoWaydirectives.")},An.prototype._withLock=function(t){var e=this;e._locked=!0,t.call(e),pi(function(){e._locked=!1})},An.prototype.on=function(t,e,n){ut(this.el,t,e,n),(this._listeners||(this._listeners=[])).push([t,e])},An.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,n=this._listeners;if(n)for(e=n.length;e--;)lt(this.el,n[e][0],n[e][1]);var i=this._paramUnwatchFns;if(i)for(e=i.length;e--;)i[e]();"production"!==t.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var ys=/[^|]\|[^|]/;Ft(qn),Sn(qn),Dn(qn),Nn(qn),Pn(qn),On(qn),In(qn),jn(qn),Rn(qn);var _s={priority:po,params:["name"],bind:function(){var t=this.params.name||"default",e=this.vm._slotContents&&this.vm._slotContents[t];e&&e.hasChildNodes()?this.compile(e.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(t,e,n){if(t&&e){if(this.el.hasChildNodes()&&1===t.childNodes.length&&1===t.childNodes[0].nodeType&&t.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,t.appendChild(i)}var r=n?n._scope:this._scope;this.unlink=e.$compile(t,n,r,this._frag);
}t?at(this.el,t):ot(this.el)},fallback:function(){this.compile(ft(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},bs={priority:lo,params:["name"],paramWatchers:{name:function(t){go.remove.call(this),t&&this.insert(t)}},bind:function(){this.anchor=yt("v-partial"),at(this.el,this.anchor),this.insert(this.params.name)},insert:function(t){var e=At(this.vm.$options,"partials",t,!0);e&&(this.factory=new be(this.vm,e),go.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},ws={slot:_s,partial:bs},xs=mo._postProcess,ks=/(\d{3})(?=\d)/g,$s={orderBy:Un,filterBy:Bn,limitBy:Fn,json:{read:function(t,e){return"string"==typeof t?t:JSON.stringify(t,null,arguments.length>1?e:2)},write:function(t){try{return JSON.parse(t)}catch(e){return t}}},capitalize:function(t){return t||0===t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""},uppercase:function(t){return t||0===t?t.toString().toUpperCase():""},lowercase:function(t){return t||0===t?t.toString().toLowerCase():""},currency:function(t,e,n){if(t=parseFloat(t),!isFinite(t)||!t&&0!==t)return"";e=null!=e?e:"$",n=null!=n?n:2;var i=Math.abs(t).toFixed(n),r=n?i.slice(0,-1-n):i,o=r.length%3,s=o>0?r.slice(0,o)+(r.length>3?",":""):"",a=n?i.slice(-1-n):"",u=t<0?"-":"";return u+e+s+r.slice(o).replace(ks,"$1,")+a},pluralize:function(t){var e=g(arguments,1),n=e.length;if(n>1){var i=t%10-1;return i in e?e[i]:e[n-1]}return e[0]+(1===t?"":"s")},debounce:function(t,e){if(t)return e||(e=300),w(t,e)}};Vn(qn),qn.version="1.0.28",setTimeout(function(){Vi.devtools&&(ei?ei.emit("init",qn):"production"!==t.env.NODE_ENV&&ti&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),e.exports=qn}).call(this,t("_process"))},{_process:84}],97:[function(t,e,n){"use strict";function i(t,e,n){var i=n[n.length-1];t===i.element&&(n.pop(),i=n[n.length-1]);var r=i.element,o=i.index;if(Array.isArray(r))r.push(t);else if(o===e.length-2){var s=e.pop();r[s]=t}else e.push(t)}n.stringify=function(t){var e=[];e.push({obj:t});for(var n,i,r,o,s,a,u,l,c,h,d,p="";n=e.pop();)if(i=n.obj,r=n.prefix||"",o=n.val||"",p+=r,o)p+=o;else if("object"!=typeof i)p+="undefined"==typeof i?null:JSON.stringify(i);else if(null===i)p+="null";else if(Array.isArray(i)){for(e.push({val:"]"}),s=i.length-1;s>=0;s--)a=0===s?"":",",e.push({obj:i[s],prefix:a});e.push({val:"["})}else{u=[];for(l in i)i.hasOwnProperty(l)&&u.push(l);for(e.push({val:"}"}),s=u.length-1;s>=0;s--)c=u[s],h=i[c],d=s>0?",":"",d+=JSON.stringify(c)+":",e.push({obj:h,prefix:d});e.push({val:"{"})}return p},n.parse=function(t){for(var e,n,r,o,s,a,u,l,c,h=[],d=[],p=0;;)if(e=t[p++],"}"!==e&&"]"!==e&&"undefined"!=typeof e)switch(e){case" ":case"\t":case"\n":case":":case",":break;case"n":p+=3,i(null,h,d);break;case"t":p+=3,i(!0,h,d);break;case"f":p+=4,i(!1,h,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",p--;;){if(r=t[p++],!/[\d\.\-e\+]/.test(r)){p--;break}n+=r}i(parseFloat(n),h,d);break;case'"':for(o="",s=void 0,a=0;;){if(u=t[p++],'"'===u&&("\\"!==s||a%2!==1))break;o+=u,s=u,"\\"===s?a++:a=0}i(JSON.parse('"'+o+'"'),h,d);break;case"[":l={element:[],index:h.length},h.push(l.element),d.push(l);break;case"{":c={element:{},index:h.length},h.push(c.element),d.push(c);break;default:throw new Error("unexpectedly reached end of input: "+e)}else{if(1===h.length)return h.pop();i(h.pop(),h,d)}}},{}],98:[function(t,e,n){var i=t("vue"),r=window.jQuery=window.$=t("jquery");t("./modules/utils/auth"),t("./modules/utils/overlay");var o=(t("./modules/session/ui/session-vue"),t("./modules/support")),s=t("./modules/utils/toastr");t("./modules/utils/bg-image")("#loading-block");window.Vue=i,o.touch=!0;var a=t("./modules/survey");r(document).ready(function(){r("html").addClass("touch"),a.boot(),r(".save-progress").click(function(){a.saveSession(!0)}),r("#close-button").click(function(){a.saveAndExit()}),r(".validate-form").on("click",function(){a.validate().then(function(){s.success("The data looks valid!"),r(".last-page").click()})["catch"](function(t){s.error(t.message?t.message:"An unknown error occured")})}),r(".first-page-alias").click(function(){r(".first-page").click()}),r(".last-page-alias").click(function(){r(".last-page").click()}),r(".submit-form").on("click",function(){return a.submit().then(function(){s.success("Your submission has been successfully saved on the device"),r(".submit-form").remove()})["catch"](function(t){"redirected!"!=t.message&&s.error(t.message?t.message:"An unknown error occured")}),!1})})},{"./modules/session/ui/session-vue":110,"./modules/support":112,"./modules/survey":113,"./modules/utils/auth":114,"./modules/utils/bg-image":115,"./modules/utils/overlay":118,"./modules/utils/toastr":121,jquery:72,vue:96}],99:[function(t,e,n){var i=t("jquery"),r=t("angular"),o=(t("v-accordion"),r.module("app",["vAccordion"])),s=t("./utils/helpers");e.exports=function(t){o.controller("jumpCtrl",["$scope",function(e){var n=[];e.pages={},e.search={label:""},i('[role="page"]').each(function(){var t=i(this),e=i(".question-label.active",t);e.each(function(){var e=i(this).text();if(!(e.length<2||"."!=e[1])){var r=e.indexOf(" "),o=e.substr(0,r).split(".").filter(function(t){return""!=t});n.push({el:t.children().first(),notations:o,label:e})}})}),n.forEach(function(t){if(s.set(e.pages,t.notations.join(".items."),t),t.notations.length>1){t.notations.pop();var n=t.notations.join(".items.");null==s.get(e.pages,n+".label",null)&&(s.set(e.pages,n+".label",t.label),s.set(e.pages,n+".el",t.el))}}),e.jump=function(n){e.accordion.collapseAll(),t.pages.flipToPageContaining(n.el),setTimeout(function(){i("#jump-to-block").overlay("hide")})},i("#jump-to-close").click(function(){e.accordion.collapseAll(),i("#jump-to-block").overlay("hide")})}]),i("#jump-to-block").attr("ng-app","app").attr("ng-controller","jumpCtrl"),i("#jump-to").click(function(){i("#jump-to-block").overlay("show")}),i("#jump-to-block").hide(),r.bootstrap(document,["app"])}},{"./utils/helpers":117,angular:2,jquery:72,"v-accordion":95}],100:[function(t,e,n){function i(t,e){function n(t){return t.content_type.indexOf("image/")!==-1&&!(t.length<u)}function i(e,n){return t.hasOwnProperty("browser_mode")?r.resolve(n.data):a.getAttachment(c,e)}function l(e,n){return i(e,n).then(function(t){return s.compress(t,{maxWidth:600,quality:.6,convertSize:999999999})}).then(function(i){t._attachments[e]={content_type:n.content_type,data:i}})}var c=t._id,h=t._attachments;this.process=function(){var i=new o;return e&&i.onProgress(e),Object.keys(h).forEach(function(t){var e=t,r=h[t];n(r)&&i.add(function(){return l(e,r)})}),i.isEmpty()?r.resolve(t):i.run().then(function(){return t.browser_mode?t:a.update(t)})}}var r=t("lie"),o=t("./utils/task-queue"),s=t("image-compressor.js"),a=t("./repositories/sessions-repository");s=new s;var u=3e5;e.exports=function(t,e){var n=new i(t,e);return n.process()}},{"./repositories/sessions-repository":103,"./utils/task-queue":120,"image-compressor.js":68,lie:76}],101:[function(t,e,n){var i=t("enketo-core/src/js/file-manager"),r=t("../repositories/sessions-repository"),o=t("../utils/query-params"),s=i.getFileUrl;i.setSession=function(t){this.session=t},i.getFileUrlFromDatabase=function(t){return r.getAttachment(this.session._id,t).then(function(t){return URL.createObjectURL(t)})},i.getFileUrlOnServer=function(t){return Promise.resolve(o.getUrl("submissions/"+this.session.instance_id+"/photo/"+t))},i.getFileUrl=function(t){return t&&"string"==typeof t?this.session.browser_mode?this.getFileUrlOnServer(t):this.getFileUrlFromDatabase(t):s(t)},e.exports=i},{"../repositories/sessions-repository":103,"../utils/query-params":119,"enketo-core/src/js/file-manager":18}],102:[function(t,e,n){function i(t){var e=new o(t,{adapter:"idb",revs_limit:1,auto_compaction:!0});return e}function r(t){var e=i(t);this.all=function(){return e.allDocs({include_docs:!0}).then(function(t){return t.rows.map(function(t){return t.doc})})},this.create=function(t){return e.post(t).then(function(t){return e.get(t.id)})},this.update=function(t){return e.put(t).then(function(t){return e.get(t.id)})},this.get=function(t){return e.get(t)},this.remove=function(t){return e.remove(t)},this.attach=function(t,n,i){return e.putAttachment(t,n,i)},this.getAttachment=function(t,n){return e.getAttachment(t,n)}}var o=t("pouchdb");window.PouchDB=o;var s={};e.exports={instance:function(t){return s.hasOwnProperty(t)||(s[t]=new r(t)),s[t]}}},{pouchdb:80}],103:[function(t,e,n){var i=t("./repository"),r=t("../utils/query-params"),o="sessions";r.has("db")&&(o=r.get("db")),e.exports=i.instance(o)},{"../utils/query-params":119,"./repository":102}],104:[function(t,e,n){var i=t("./modes"),r=t("./drivers/in-memory"),o=t("./drivers/persisted"),s={};s[i.MODE_ONLINE]=r,s[i.MODE_OFFLINE]=o,e.exports={getDriverForMode:function(t){return s[t]}}},{"./drivers/in-memory":105,"./drivers/persisted":106,"./modes":108}],105:[function(t,e,n){function i(){this.start=function(){return r(".save-progress").remove(),a.has("edit")?e(a.getPath("edit")):o.resolve(t())},this.save=function(t){return t},this.beforeEnd=function(t){return s(a.getPath("submit"),t)};var t=function(){return{xml:null,draft:!1,submitted:!1,browser_mode:!0,instance_id:null,deprecated_id:null}},e=function(e){return new o(function(n){r.getJSON(e).done(function(e){var i=t();i.submitted=!0,i.xml=e.instance,i.instance_id=e.instance_id,i.deprecated_id=e.deprecated_id,n(i)}).fail(function(){throw new Error("Could not load the document")})})}}var r=t("jquery"),o=t("lie"),s=t("../../submit"),a=t("../../utils/query-params");e.exports=new i},{"../../submit":111,"../../utils/query-params":119,jquery:72,lie:76}],106:[function(t,e,n){function i(){this.start=function(){return t().then(e).then(i)},this.save=function(t){return s.update(t)},this.beforeEnd=this.save;var t=function(){return s.all().then(function(t){return t=t.filter(function(t){return t.draft}),o.$set("sessions",t),t})},e=function(t){return o.$set("showModal",!0),new r(function(t){n(t)})},n=function(e){var n=document.getElementById("app");n.addEventListener("session:destroy",function(e){s.remove(e.detail.session).then(t)}),n.addEventListener("session:load",function(t){e(t.detail.session)}),n.addEventListener("session:create",function(t){return s.create({name:t.detail.name,xml:"",submitted:!1,draft:!0,last_update:Date.now()}).then(e)})},i=function(t){return o.$set("showModal",!1),new r(function(e){setTimeout(function(){e(t)},50)})}}var r=t("lie"),o=t("../ui/session-vue"),s=t("../../repositories/sessions-repository");e.exports=new i},{"../../repositories/sessions-repository":103,"../ui/session-vue":110,lie:76}],107:[function(t,e,n){var i=(t("lie"),t("./modes")),r=t("../optimizer"),o=t("./drivers"),s=t("../utils/query-params"),a=function(){if(!s.has("mode"))return i.MODE_OFFLINE;var t=s.get("mode");if(!i.isValidMode(t))throw new Error("Invalid mode: "+t);return t},u={driver:null,session:null,returnUrl:null,start:function(){var t=this;this.returnUrl=s.getPath("return");var e=a();return this.driver=o.getDriverForMode(e),this.driver.start().then(function(e){return t.session=e,e})},getAttachments:function(t){var e=this,n={};return t.forEach(function(t){return"string"==typeof t?void(e.session.hasOwnProperty("_attachments")&&e.session._attachments.hasOwnProperty(t)&&(n[t]=e.session._attachments[t],n[t].stub=!0)):void(n[t.name]={content_type:t.type,data:t})}),n},save:function(t){var e=this;return this.session.xml=t.xml,this.session._attachments=this.getAttachments(t.files),this.session.instance_id=t.instance_id,this.session.deprecated_id=t.deprecated_id,this.driver.save(this.session).then(function(t){e.session=t})},optimize:function(t){var e=this;return r(this.session,t).then(function(t){e.session=t})},end:function(){return this.session.draft=!1,this.session.last_update=Date.now(),this.driver.beforeEnd(this.session).then(function(){throw window.location=this.returnUrl?this.returnUrl:"index.html",new Error("redirected!")})}};e.exports=u},{"../optimizer":100,"../utils/query-params":119,"./drivers":104,"./modes":108,lie:76}],108:[function(t,e,n){var i=["online","offline"];e.exports={MODE_ONLINE:i[0],MODE_OFFLINE:i[1],isValidMode:function(t){return i.indexOf(t)>=0}}},{}],109:[function(t,e,n){function i(t,e){var n=new CustomEvent(t,{detail:e}),i=document.getElementById("app");i.dispatchEvent(n)}var r=t("vue");r.filter("timeAgo",function(t){var e=new Date(t);return e.toLocaleString()}),e.exports=r.component("modal",{template:"#modal-template",data:function(){return{name:"",error:"",disabled:!1}},props:{show:{type:Boolean,required:!0,twoWay:!0},sessions:{type:Array,required:!0,twoWay:!1,"default":function(){return[]}}},methods:{destroy:function(t){confirm("Do you really want to delete this session")===!0&&i("session:destroy",{session:t})},load:function(t){i("session:load",{session:t})},create:function(){var t=this.name?this.name.trim():"";return""==t?void(this.error="Please name this session"):(this.disabled=!0,void i("session:create",{name:this.name}))}}})},{vue:96}],110:[function(t,e,n){var i=t("vue"),r=(t("./session-modal"),new i({el:"#app",data:{showModal:!1,sessions:[]}}));e.exports=r},{"./session-modal":109,vue:96}],111:[function(t,e,n){var i=t("jquery"),r=t("lie"),o=t("./utils/task-queue"),s=(t("./patches/file-manager"),t("./repositories/sessions-repository")),a={form:function(t){var e=new FormData;return e.append("Date",(new Date).toUTCString()),e.append("xml_submission_file",new Blob([t.xml])),e},headers:function(t){return{"X-OpenRosa-Version":"1.0","X-OpenRosa-Deprecated-Id":t.deprecated_id,"X-OpenRosa-Instance-Id":t.instance_id}},chunks:function(t){var e=[[]],n=0,i=0,r=52428800;for(var o in t){var s=t[o];i>=r&&(i=0,n++,e[n]=[]),e[n].push(o),i+=s.length}return e},loadChunk:function(t,e,n){return t.hasOwnProperty("browser_mode")?(e.forEach(function(e){n.append(e,t._attachments[e].data,e)}),r.resolve(!0)):r.all(e.map(function(e){return s.getAttachment(t._id,e).then(function(t){n.append(e,t,e)})}))},upload:function(t,e){var n=this,i=this.chunks(t._attachments),r=n.headers(t),s=new o;return i.forEach(function(i){var o=function(){var o=n.form(t);return n.loadChunk(t,i,o).then(function(){return n.request(o,r,e)})};s.add(o)}),s.run()},request:function(t,e,n){var o=this;return new r(function(r,s){i.ajax(o.openrosaUrl,{type:"POST",data:t,cache:!1,contentType:!1,processData:!1,headers:e,xhr:function(){var t=new window.XMLHttpRequest;return t.upload.addEventListener("progress",function(t){if(t.lengthComputable){var e=t.loaded/t.total;n&&n(e)}},!1),t}}).done(function(t,e,n){return 201==n.status||202==n.status?void r(t):void s("Submission was not successful!")}).fail(function(t,e,n){s(n)})})},setOpenrosaServer:function(t){this.openrosaUrl=t}};e.exports=function(t,e,n){return a.setOpenrosaServer(t),a.upload(e,n)}},{"./patches/file-manager":101,"./repositories/sessions-repository":103,"./utils/task-queue":120,jquery:72,lie:76}],112:[function(t,e,n){if("object"==typeof n&&"string"!=typeof n.nodeName&&"function"!=typeof i)var i=function(i){i(t,n,e)};i(function(t,e,n){"use strict";var i={inputtypes:{}},r=["date","datetime","time"];r.forEach(function(t){var e=document.createElement("input");e.setAttribute("type",t),i.inputtypes[t]="text"!==e.type}),"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?(i.touch=!0,document.documentElement.classList.add("touch")):i.touch=!1,n.exports=i})},{}],113:[function(t,e,n){function i(){var t=this;this.form=null,this.session=null;var e=r(".form-header");this.boot=function(){n().then(i).then(l).then(c).then(h).then(d).then(p).then(f).then(m)};var n=function(){return r.getJSON(a.getPath("survey"))},i=function(t){return t.form=t.form.replace(/jr:\/\/images\/https:\/\/www.dropbox.com\/s\/.*?\//g,"assets/"),t},l=function(t){return e.after(t.form),t},c=function(e){return u.start().then(function(n){return t.session=n,e})},h=function(e){t.form=new o("form.or:eq(0)",{modelStr:e.model,instanceStr:t.session.xml,submitted:t.session.submitted})},d=function(){var e=t.form.init();if(e.length)throw console.error(e),new Error("The form could not be initialized")},p=function(){a.has("lang")&&i18n.set(a.get("lang"));var e=i18n.get();t.form.langs.setAll(e)},f=function(e){s(t.form)},m=function(){e.show(),r("#submit-progress").hide(),r("#loading-block").remove(),r(window).scrollTop(0)}}var r=t("jquery"),o=t("enketo-core/src/js/Form"),s=t("./jump-to"),a=t("./utils/query-params"),u=t("./session/manager");e.exports=new i},{"./jump-to":99,"./session/manager":107,"./utils/query-params":119,"enketo-core/src/js/Form":10,jquery:72}],114:[function(t,e,n){function i(){return a("enketo_token")?a("enketo_token"):u.has("token")?u.get("token"):null}function r(){o(document).ajaxError(function(t,e){401===e.status&&s.error("This survey is not accessible to guest users. Please login before continuning.","Authentication Needed",{timeOut:0,extendedTimeOut:0,tapToDismiss:!1})})}var o=t("jquery"),s=t("toastr"),a=t("./cookies"),u=t("./query-params");e.exports=function(){var t;(t=i())&&o.ajaxSetup({beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t)}}),r()}()},{"./cookies":116,"./query-params":119,jquery:72,toastr:87}],115:[function(t,e,n){var i=t("jquery"),r=t("./query-params");e.exports=function(t){i(document).ready(function(){if(r.has("bg")){var e="content: ' ';display: block;position: absolute;top: 0;left: 0;width: 100%;height: 100%;opacity: 0.2;z-index: -1;background-image: url('"+r.get("bg")+"');background-size: cover;background-position: center;background-repeat: no-repeat;";i("<style>"+t+":after { "+e+"} </style>").appendTo("head")}})}},{"./query-params":119,jquery:72}],116:[function(t,e,n){e.exports=function(t){for(var e=t+"=",n=decodeURIComponent(document.cookie),i=n.split(";"),r=0;r<i.length;r++){for(var o=i[r];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}},{}],117:[function(t,e,n){var i=t("lodash.set");e.exports={get:function(t,e,n){function i(e){return!(e&&void 0===(t=t[e]))}var r=e.replace(/\[/g,".").replace(/]/g,"").split(".").filter(Boolean);return r.every(i)?t:n},set:i}},{"lodash.set":77}],118:[function(t,e,n){e.exports=function(){function t(t){$(window).scrollTop(0),setTimeout(function(){n.addClass("noScroll"),t.show()})}function e(t){n.removeClass("noScroll"),t.hide()}var n=$("body");$.fn.overlay=$.fn.overlay=function(n){switch(n){case"show":t(this);break;case"hide":e(this);break;default:throw new Exception("Unknown action. Either use show or hide.")}return this}}()},{}],119:[function(t,e,n){var i=t("url-search-params"),r=new i(window.location.search);r.getPath=function(t){var e="";return r.has("base")&&(e=r.get("base")+"/"),e+r.get(t)},r.getUrl=function(t){var e="";return r.has("base")&&(e=r.get("base")+"/"),e+t},e.exports=r},{"url-search-params":88}],120:[function(t,e,n){function i(){function t(){n.progress.done+=1,null!==i&&i(n.progress)}var e=[],n=this,i=null;this.progress={total:0,done:0},this.onProgress=function(t){i=t},this.add=function(t){e.push(t),n.progress.total+=1},this.isEmpty=function(){return!e.length},this.run=function(){return e.reduce(function(e,n){return e.then(function(){return n().then(function(){t()})})},r.resolve())}}var r=t("lie");e.exports=i},{lie:76}],121:[function(t,e,n){var i=t("toastr");i.options={positionClass:"toast-top-left"},e.exports=i},{toastr:87}]},{},[98]);