/*! For license information please see survey.5fd79e653c037526826d.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=536)}([function(t,e,n){var i,r;i=[n(2),n(11),n(33),n(84),n(34),n(203),n(118),n(205),n(86),n(206),n(211),n(35),n(215),n(62),n(217),n(220),n(52),n(221),n(137),n(36),n(222),n(223),n(224),n(225),n(228),n(87),n(229),n(230),n(231),n(232),n(234),n(235)],void 0===(r=function(t){"use strict";return t}.apply(e,i))||(t.exports=r)},,function(t,e,n){(function(i){var r,o;r=[n(49),n(9),n(197),n(60),n(110),n(111),n(82),n(61),n(112),n(83),n(113),n(198),n(25),n(7),n(50),n(114),n(32)],void 0===(o=function(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,m,g){"use strict";var v=function(t,e){return new v.fn.init(t,e)},y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function _(t){var e=!!t&&"length"in t&&t.length,n=g(t);return!p(t)&&!f(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}return v.fn=v.prototype={jquery:"3.3.1",constructor:v,length:0,toArray:function(){return i.call(this)},get:function(t){return null==t?i.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=v.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return v.each(this,t)},map:function(t){return this.pushStack(v.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:t.sort,splice:t.splice},v.extend=v.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||p(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(i=t[e])&&(l&&i&&(v.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,o=n&&Array.isArray(n)?n:[]):o=n&&v.isPlainObject(n)?n:{},a[e]=v.extend(l,o,i)):void 0!==i&&(a[e]=i));return a},v.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==u.call(t))&&(!(e=n(t))||"function"==typeof(i=l.call(e,"constructor")&&e.constructor)&&c.call(i)===h)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){m(t)},each:function(t,e){var n,i=0;if(_(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(y,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(_(Object(t))?v.merge(n,"string"==typeof t?[t]:t):o.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:a.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,a=!n;r<o;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,o,a=0,s=[];if(_(t))for(i=t.length;a<i;a++)null!=(o=e(t[a],a,n))&&s.push(o);else for(a in t)null!=(o=e(t[a],a,n))&&s.push(o);return r.apply([],s)},guid:1,support:d}),"function"==typeof Symbol&&(v.fn[Symbol.iterator]=t[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){s["[object "+e+"]"]=e.toLowerCase()})),v}.apply(e,r))||(t.exports=o)}).call(this,n(0))},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=n(238),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"urlParams",value:function(){return this._urlParams||(this._urlParams=new r(window.location.search)),this._urlParams}},{key:"has",value:function(t){return this.urlParams().has(t)}},{key:"get",value:function(t){return this.urlParams().get(t)}},{key:"getUrl",value:function(t){var e="";return this.has("base")&&(e=this.get("base")+"/"),e+t}},{key:"getPath",value:function(t){return this.getUrl(this.get(t))}}])&&i(e.prototype,n),o&&i(e,o),t}();e.a=new o},function(t,e,n){"use strict";let i;function r(t,e){let n,i,r,o,a,s;const u=new RegExp(`${e}\\s*\\(`,"g"),l=[];if(!t||!e)return l;for(;null!==(i=u.exec(t));){for(r=1,s=[],o=i.index,a=u.lastIndex,n=a-1;0!==r&&n<t.length;)n++,"("===t[n]?r++:")"===t[n]?r--:","===t[n]&&1===r&&(s.push(t.substring(a,n).trim()),a=n+1);a<n&&s.push(t.substring(a,n).trim()),l.push([t.substring(o,n+1),s])}return l}function o(t){return/^".+"$/.test(t)||/^'.+'$/.test(t)?t.substring(1,t.length-1):t}function a(t,e){let n;return"object"==typeof t&&null!==t&&t.name?(e=e||"",n=t.name.split("."),n.length>1?n[n.length-2]+=e:1===n.length&&(n[0]+=e),n.join(".")):""}function s(t){const e=[];for(let n=t.length>>>0;n--;)e[n]=t[n];return e}function u(t){return!isNaN(parseFloat(t))&&isFinite(t)}function l(t){let e,n,r;if(i)return i[t];for(e=document.cookie.split("; "),i={},r=e.length-1;r>=0;r--)n=e[r].split("="),n[1]=decodeURIComponent(n[1]),"s:"===n[1].substr(0,2)&&(n[1]=n[1].slice(2),n[1]=n[1].slice(0,n[1].lastIndexOf("."))),i[n[0]]=decodeURIComponent(n[1]);return i[t]}function c(t){let e,n,i,r;e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),r=new Uint8Array(i);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return new Blob([r],{type:n})}function h(t){const e=t.originalEvent.clipboardData||window.clipboardData;return e?e.getData("text"):null}function d(t,e,n){if(window.updateDownloadLinkIe11)return window.updateDownloadLinkIe11(...arguments);t.setAttribute("href",e||""),t.setAttribute("download",n||"")}function p(t,e){return new Promise((n,i)=>{let r=new Image;r.src=URL.createObjectURL(t),r.onload=()=>{let i,o,a=r.width,s=r.height;a<=e&&s<=e&&n(t),a>s?(o=s*(e/a),i=e):(i=a*(e/s),o=e);let u=document.createElement("canvas");u.width=i,u.height=o,u.getContext("2d").drawImage(r,0,0,i,o),u.toBlob(n,t.type)},r.onerror=i})}n.d(e,"e",(function(){return r})),n.d(e,"h",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"i",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return h})),n.d(e,"j",(function(){return d})),n.d(e,"g",(function(){return p}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const i={constraint:{invalid:"Value not allowed",required:"This field is required"},filepicker:{placeholder:"Click here to upload file. (< __maxSize__)",notFound:"File __existing__ could not be found (leave unchanged if already submitted and you want to preserve it).",waitingForPermissions:"Waiting for user permissions.",resetWarning:"This will remove the __item__. Are you sure you want to do this?",toolargeerror:"File too large (> __maxSize__)",file:"file"},drawwidget:{drawing:"drawing",signature:"signature",annotation:"file and drawing"},form:{required:"required"},geopicker:{accuracy:"accuracy (m)",altitude:"altitude (m)",closepolygon:"close polygon",kmlcoords:"KML coordinates",kmlpaste:"paste KML coordinates here",latitude:"latitude (x.y °)",longitude:"longitude (x.y °)",points:"points",searchPlaceholder:"search for place or address",removePoint:"This will completely remove the current geopoint from the list of geopoints and cannot be undone. Are you sure you want to do this?"},selectpicker:{noneselected:"none selected",numberselected:"__number__ selected"},imagemap:{svgNotFound:"SVG image could not be found"},rankwidget:{tapstart:"Tap to start",clickstart:"Click to start"},widget:{comment:{update:"Update"}},alert:{gotonotfound:{msg:"Failed to find question '__path__' in form. Is it a valid path?"},valuehasspaces:{multiple:'Select multiple question has an illegal value "__value__" that contains a space.'}},confirm:{repeatremove:{heading:"Delete this group of responses?",msg:"This action is irreversible. Are you sure you want to proceed?"}}};function r(t,e){let n="",r=i;return t.split(".").forEach(t=>{r=r?r[t]:"",n=r}),e=e||{},n=n.replace(/__([^_]+)__/,(t,n)=>e[n]),n}},,function(t,e,n){var i;void 0===(i=function(){"use strict";return function(t){return"function"==typeof t&&"number"!=typeof t.nodeType}}.call(e,n,e,t))||(t.exports=i)},,function(t,e,n){var i;void 0===(i=function(){"use strict";return window.document}.call(e,n,e,t))||(t.exports=i)},,function(t,e,n){var i,r;i=[n(199)],void 0===(r=function(){}.apply(e,i))||(t.exports=r)},,,function(t,e,n){"use strict";var i=n(138),r=n(240),o=Object.prototype.toString;function a(t){return"[object Array]"===o.call(t)}function s(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function l(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),a(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:r,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function t(){var e={};function n(n,i){"object"==typeof e[i]&&"object"==typeof n?e[i]=t(e[i],n):e[i]=n}for(var i=0,r=arguments.length;i<r;i++)l(arguments[i],n);return e},extend:function(t,e,n){return l(e,(function(e,r){t[r]=n&&"function"==typeof e?i(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},,,function(t,e,n){var i,r;i=[n(2),n(9),n(7),n(116),n(117)],void 0===(r=function(t,e,n,i){"use strict";var r,o=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,a=t.fn.init=function(a,s,u){var l,c;if(!a)return this;if(u=u||r,"string"==typeof a){if(!(l="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:o.exec(a))||!l[1]&&s)return!s||s.jquery?(s||u).find(a):this.constructor(s).find(a);if(l[1]){if(s=s instanceof t?s[0]:s,t.merge(this,t.parseHTML(l[1],s&&s.nodeType?s.ownerDocument||s:e,!0)),i.test(l[1])&&t.isPlainObject(s))for(l in s)n(this[l])?this[l](s[l]):this.attr(l,s[l]);return this}return(c=e.getElementById(l[2]))&&(this[0]=c,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):n(a)?void 0!==u.ready?u.ready(a):a(t):t.makeArray(a,this)};return a.prototype=t.fn,r=t(e),a}.apply(e,i))||(t.exports=r)},,function(t,e,n){var i,r;i=[n(119)],void 0===(r=function(t){"use strict";return new t}.apply(e,i))||(t.exports=r)},,function(t,e,n){var i;void 0===(i=function(){"use strict";return/[^\x20\t\r\n\f]+/g}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){!function(t){"use strict";var e=Object.freeze;function n(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}Object.freeze=function(t){return t};var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var o=0;function a(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,n){var i,r,o,a;return a=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)}}function u(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function l(){return!1}function c(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function p(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function f(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(m,(function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function x(t){var e=+new Date,n=Math.max(0,16-(e-w));return w=e+n,window.setTimeout(t,n)}var $=window.requestAnimationFrame||b("RequestAnimationFrame")||x,E=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function k(t,e,n){if(!n||$!==x)return $.call(window,r(t,e));t.call(e)}function C(t){t&&E.call(window,t)}var T=(Object.freeze||Object)({freeze:e,extend:n,create:i,bind:r,lastId:o,stamp:a,throttle:s,wrapNum:u,falseFn:l,formatNum:c,trim:h,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:$,cancelFn:E,requestAnimFrame:k,cancelAnimFrame:C});function S(){}S.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=e.__super__=this.prototype,o=i(r);for(var a in o.constructor=e,e.prototype=o,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),n.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=n(i(o.options),t.options)),n(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},S.include=function(t){return n(this.prototype,t),this},S.mergeOptions=function(t){return n(this.prototype.options,t),this},S.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var D={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,o=(t=d(t)).length;r<o;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,o=(t=d(t)).length;r<o;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var a=i[r];if(a.ctx===n&&a.fn===e)return a.fn=l,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=l;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var r=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fn.call(u.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var o=r((function(){this.off(t,e,n).off(t,o,n)}),this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};D.addEventListener=D.on,D.removeEventListener=D.clearAllEventListeners=D.off,D.addOneTimeEventListener=D.once,D.fireEvent=D.fire,D.hasEventListeners=D.listens;var M=S.extend(D);function A(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var P=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function O(t,e,n){return t instanceof A?t:v(t)?new A(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new A(t.x,t.y):new A(t,e,n)}function I(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function N(t,e){return!t||t instanceof I?t:new I(t,e)}function R(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function j(t,e){return t instanceof R?t:new R(t,e)}function q(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function F(t,e,n){return t instanceof q?t:v(t)&&"object"!=typeof t[0]?3===t.length?new q(t[0],t[1],t[2]):2===t.length?new q(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new q(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new q(t,e,n)}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(t){return this.clone()._add(O(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(O(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new A(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new A(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=P(this.x),this.y=P(this.y),this},distanceTo:function(t){var e=(t=O(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=O(t)).x===this.x&&t.y===this.y},contains:function(t){return t=O(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},I.prototype={extend:function(t){return t=O(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new A((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new A(this.min.x,this.max.y)},getTopRight:function(){return new A(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof A?O(t):N(t))instanceof I?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=N(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,a=r.y>=e.y&&i.y<=n.y;return o&&a},overlaps:function(t){t=N(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,a=r.y>e.y&&i.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},R.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof q)e=t,n=t;else{if(!(t instanceof R))return t?this.extend(F(t)||j(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new q(e.lat,e.lng),this._northEast=new q(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new R(new q(e.lat-i,e.lng-r),new q(n.lat+i,n.lng+r))},getCenter:function(){return new q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new q(this.getNorth(),this.getWest())},getSouthEast:function(){return new q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof q||"lat"in t?F(t):j(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof R?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,a=r.lng>=e.lng&&i.lng<=n.lng;return o&&a},overlaps:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,a=r.lng>e.lng&&i.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=j(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},q.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return z.distance(this,F(t))},wrap:function(){return z.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new q(this.lat,this.lng,this.alt)}};var U,B={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new I(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u(t.lng,this.wrapLng,!0):t.lng;return new q(this.wrapLat?u(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new R(new q(o.lat-i,o.lng-r),new q(a.lat-i,a.lng-r))}},z=n({},B,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(i)*Math.cos(r)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),V={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new A(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new q((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(U=6378137*Math.PI,new I([-U,-U],[U,U]))};function H(t,e,n,i){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function W(t,e,n,i){return new H(t,e,n,i)}H.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new A((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Z=n({},z,{code:"EPSG:3857",projection:V,transformation:function(){var t=.5/(Math.PI*V.R);return W(t,.5,-t,.5)}()}),G=n({},Z,{code:"EPSG:900913"});function Y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t,e){var n,i,r,o,a,s,u="";for(n=0,r=t.length;n<r;n++){for(i=0,o=(a=t[n]).length;i<o;i++)u+=(i?"L":"M")+(s=a[i]).x+" "+s.y;u+=e?Tt?"z":"x":""}return u||"M0 0"}var K=document.documentElement.style,J="ActiveXObject"in window,Q=J&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),et=Dt("webkit"),nt=Dt("android"),it=Dt("android 2")||Dt("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=nt&&Dt("Google")&&rt<537&&!("AudioNode"in window),at=!!window.opera,st=Dt("chrome"),ut=Dt("gecko")&&!et&&!at&&!J,lt=!st&&Dt("safari"),ct=Dt("phantom"),ht="OTransition"in K,dt=0===navigator.platform.indexOf("Win"),pt=J&&"transition"in K,ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,mt="MozPerspective"in K,gt=!window.L_DISABLE_3D&&(pt||ft||mt)&&!ht&&!ct,vt="undefined"!=typeof orientation||Dt("mobile"),yt=vt&&et,_t=vt&&ft,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!(et||!window.PointerEvent&&!bt),xt=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),$t=vt&&at,Et=vt&&ut,kt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Lt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(t){}return t},Ct=!!document.createElement("canvas").getContext,Tt=!(!document.createElementNS||!Y("svg").createSVGRect),St=!Tt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Dt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Mt=(Object.freeze||Object)({ie:J,ielt9:Q,edge:tt,webkit:et,android:nt,android23:it,androidStock:ot,opera:at,chrome:st,gecko:ut,safari:lt,phantom:ct,opera12:ht,win:dt,ie3d:pt,webkit3d:ft,gecko3d:mt,any3d:gt,mobile:vt,mobileWebkit:yt,mobileWebkit3d:_t,msPointer:bt,pointer:wt,touch:xt,mobileOpera:$t,mobileGecko:Et,retina:kt,passiveEvents:Lt,canvas:Ct,svg:Tt,vml:St}),At=bt?"MSPointerDown":"pointerdown",Pt=bt?"MSPointerMove":"pointermove",Ot=bt?"MSPointerUp":"pointerup",It=bt?"MSPointerCancel":"pointercancel",Nt=["INPUT","SELECT","OPTION"],Rt={},jt=!1,qt=0;function Ft(t,e,n,i){return"touchstart"===e?function(t,e,n){var i=r((function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Nt.indexOf(t.target.tagName)<0))return;Re(t)}Vt(t,e)}));t["_leaflet_touchstart"+n]=i,t.addEventListener(At,i,!1),jt||(document.documentElement.addEventListener(At,Ut,!0),document.documentElement.addEventListener(Pt,Bt,!0),document.documentElement.addEventListener(Ot,zt,!0),document.documentElement.addEventListener(It,zt,!0),jt=!0)}(t,n,i):"touchmove"===e?function(t,e,n){var i=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Vt(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Pt,i,!1)}(t,n,i):"touchend"===e&&function(t,e,n){var i=function(t){Vt(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(Ot,i,!1),t.addEventListener(It,i,!1)}(t,n,i),this}function Ut(t){Rt[t.pointerId]=t,qt++}function Bt(t){Rt[t.pointerId]&&(Rt[t.pointerId]=t)}function zt(t){delete Rt[t.pointerId],qt--}function Vt(t,e){for(var n in t.touches=[],Rt)t.touches.push(Rt[n]);t.changedTouches=[t],e(t)}var Ht=bt?"MSPointerDown":wt?"pointerdown":"touchstart",Wt=bt?"MSPointerUp":wt?"pointerup":"touchend",Zt="_leaflet_";function Gt(t,e,n){var i,r,o=!1;function a(t){var e;if(wt){if(!tt||"mouse"===t.pointerType)return;e=qt}else e=t.touches.length;if(!(e>1)){var n=Date.now(),a=n-(i||n);r=t.touches?t.touches[0]:t,o=a>0&&a<=250,i=n}}function s(t){if(o&&!r.cancelBubble){if(wt){if(!tt||"mouse"===t.pointerType)return;var n,a,s={};for(a in r)n=r[a],s[a]=n&&n.bind?n.bind(r):n;r=s}r.type="dblclick",r.button=0,e(r),i=null}}return t[Zt+Ht+n]=a,t[Zt+Wt+n]=s,t[Zt+"dblclick"+n]=e,t.addEventListener(Ht,a,!!Lt&&{passive:!1}),t.addEventListener(Wt,s,!!Lt&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function Yt(t,e){var n=t[Zt+Ht+e],i=t[Zt+Wt+e],r=t[Zt+"dblclick"+e];return t.removeEventListener(Ht,n,!!Lt&&{passive:!1}),t.removeEventListener(Wt,i,!!Lt&&{passive:!1}),tt||t.removeEventListener("dblclick",r,!1),this}var Xt,Kt,Jt,Qt,te,ee=ve(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ne=ve(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ie="webkitTransition"===ne||"OTransition"===ne?ne+"End":"transitionend";function re(t){return"string"==typeof t?document.getElementById(t):t}function oe(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ae(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function se(t){var e=t.parentNode;e&&e.removeChild(t)}function ue(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function le(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ce(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function he(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=me(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function de(t,e){if(void 0!==t.classList)for(var n=d(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!he(t,e)){var o=me(t);fe(t,(o?o+" ":"")+e)}}function pe(t,e){void 0!==t.classList?t.classList.remove(e):fe(t,h((" "+me(t)+" ").replace(" "+e+" "," ")))}function fe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function me(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function ge(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ve(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ye(t,e,n){var i=e||new A(0,0);t.style[ee]=(pt?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function _e(t,e){t._leaflet_pos=e,gt?ye(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function be(t){return t._leaflet_pos||new A(0,0)}if("onselectstart"in document)Xt=function(){Se(window,"selectstart",Re)},Kt=function(){Me(window,"selectstart",Re)};else{var we=ve(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Xt=function(){if(we){var t=document.documentElement.style;Jt=t[we],t[we]="none"}},Kt=function(){we&&(document.documentElement.style[we]=Jt,Jt=void 0)}}function xe(){Se(window,"dragstart",Re)}function $e(){Me(window,"dragstart",Re)}function Ee(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(ke(),Qt=t,te=t.style.outline,t.style.outline="none",Se(window,"keydown",ke))}function ke(){Qt&&(Qt.style.outline=te,Qt=void 0,te=void 0,Me(window,"keydown",ke))}function Le(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Ce(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Te=(Object.freeze||Object)({TRANSFORM:ee,TRANSITION:ne,TRANSITION_END:ie,get:re,getStyle:oe,create:ae,remove:se,empty:ue,toFront:le,toBack:ce,hasClass:he,addClass:de,removeClass:pe,setClass:fe,getClass:me,setOpacity:ge,testProp:ve,setTransform:ye,setPosition:_e,getPosition:be,disableTextSelection:Xt,enableTextSelection:Kt,disableImageDrag:xe,enableImageDrag:$e,preventOutline:Ee,restoreOutline:ke,getSizedParentNode:Le,getScale:Ce});function Se(t,e,n,i){if("object"==typeof e)for(var r in e)Ae(t,r,e[r],n);else for(var o=0,a=(e=d(e)).length;o<a;o++)Ae(t,e[o],n,i);return this}var De="_leaflet_events";function Me(t,e,n,i){if("object"==typeof e)for(var r in e)Pe(t,r,e[r],n);else if(e)for(var o=0,a=(e=d(e)).length;o<a;o++)Pe(t,e[o],n,i);else{for(var s in t[De])Pe(t,s,t[De][s]);delete t[De]}return this}function Ae(t,e,n,i){var r=e+a(n)+(i?"_"+a(i):"");if(t[De]&&t[De][r])return this;var o=function(e){return n.call(i||t,e||window.event)},s=o;wt&&0===e.indexOf("touch")?Ft(t,e,o,r):!xt||"dblclick"!==e||!Gt||wt&&st?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!!Lt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,We(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&nt&&(o=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=Be&&n-Be;i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?je(t):(Be=n,e(t))}(t,s)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o):Gt(t,o,r),t[De]=t[De]||{},t[De][r]=o}function Pe(t,e,n,i){var r=e+a(n)+(i?"_"+a(i):""),o=t[De]&&t[De][r];if(!o)return this;wt&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(At,i,!1):"touchmove"===e?t.removeEventListener(Pt,i,!1):"touchend"===e&&(t.removeEventListener(Ot,i,!1),t.removeEventListener(It,i,!1))}(t,e,r):!xt||"dblclick"!==e||!Yt||wt&&st?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",o,!!Lt&&{passive:!1}):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o):Yt(t,r),t[De][r]=null}function Oe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,He(t),this}function Ie(t){return Ae(t,"mousewheel",Oe),this}function Ne(t){return Se(t,"mousedown touchstart dblclick",Oe),Ae(t,"click",Ve),this}function Re(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function je(t){return Re(t),Oe(t),this}function qe(t,e){if(!e)return new A(t.clientX,t.clientY);var n=Ce(e),i=n.boundingClientRect;return new A((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Fe=dt&&st?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function Ue(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Fe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Be,ze={};function Ve(t){ze[t.type]=!0}function He(t){var e=ze[t.type];return ze[t.type]=!1,e}function We(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Ze=(Object.freeze||Object)({on:Se,off:Me,stopPropagation:Oe,disableScrollPropagation:Ie,disableClickPropagation:Ne,preventDefault:Re,stop:je,getMousePosition:qe,getWheelDelta:Ue,fakeStop:Ve,skipped:He,isExternalTarget:We,addListener:Se,removeListener:Me}),Ge=M.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=be(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=k(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),_e(this._el,n),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ye=M.extend({options:{crs:Z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ne&&gt&&!$t&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Se(this._proxy,ie,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(F(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof A?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():j(t);var n=O(e.paddingTopLeft||e.padding||[0,0]),i=O(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),r),s=this.project(t.getNorthEast(),r);return{center:this.unproject(a.add(s).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=j(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=O(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ge,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){de(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!gt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),a=this._zoom;t=F(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),u=s*this.getZoomScale(a,e),l=r.distanceTo(i)||1;function c(t){var e=(u*u-s*s+2.0164*(t?-1:1)*2.0164*l*l)/(2*(t?u:s)*2.0164*l),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function h(t){return(Math.exp(t)-Math.exp(-t))/2}function d(t){return(Math.exp(t)+Math.exp(-t))/2}var p=c(0);function f(t){return s*(d(p)*(h(e=p+1.42*t)/d(e))-h(p))/2.0164;var e}var m=Date.now(),g=(c(1)-p)/1.42,v=n.duration?1e3*n.duration:1e3*g*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-m)/v,u=function(t){return 1-Math.pow(1-t,1.5)}(o)*g;o<=1?(this._flyToFrame=k(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(f(u)/l)),a),this.getScaleZoom(s/function(t){return s*(d(p)/d(p+1.42*t))}(u),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=j(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,j(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=O((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=O(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),o=this.project(r),a=this.project(t),s=this.getPixelBounds(),u=s.getSize().divideBy(2),l=N([s.min.add(n),s.max.subtract(i)]);if(!l.contains(a)){this._enforcingBounds=!0;var c=o.subtract(a),h=O(a.x+c.x,a.y+c.y);(a.x<l.min.x||a.x>l.max.x)&&(h.x=o.x-c.x,c.x>0?h.x+=u.x-n.x:h.x-=u.x-i.x),(a.y<l.min.y||a.y>l.max.y)&&(h.y=o.y-c.y,c.y>0?h.y+=u.y-n.y:h.y-=u.y-i.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=e.divideBy(2).round(),a=i.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new q(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)se(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ae("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new R(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=j(t),n=O(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),l=N(this.project(s,i),this.project(a,i)).getSize(),c=gt?this.options.zoomSnap:1,h=u.x/l.x,d=u.y/l.y,p=e?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(p,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new A(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new I(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(O(t),e)},layerPointToLatLng:function(t){var e=O(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return O(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return O(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(O(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return qe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=re(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Se(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&gt,de(t,"leaflet-container"+(xt?" leaflet-touch":"")+(kt?" leaflet-retina":"")+(Q?" leaflet-oldie":"")+(lt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=oe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_e(this._mapPane,new A(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(de(t.markerPane,"leaflet-zoom-hide"),de(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){_e(this._mapPane,new A(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){_e(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Me:Se;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),gt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=k((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((n=this._targets[a(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(r&&!We(o,t))break;if(i.push(n),r)break}if(o===this._container)break;o=o.parentNode}return i.length||s||r||!We(o,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!He(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Ee(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var r=n({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var o=i[0];"contextmenu"===e&&o.listens(e,!0)&&Re(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var u=0;u<i.length;u++)if(i[u].fire(e,a,!0),a.originalEvent._stopped||!1===i[u].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return be(this._mapPane)||new A(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return N([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new I(i.subtract(r),i.add(r)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new I(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=N(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max);return new A(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=gt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=ee,n=this._proxy.style[e];ye(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){se(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ye(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r)||(k((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,de(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),k((function(){this._moveEnd(!0)}),this))}}),Xe=S.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return de(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(se(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ke=function(t){return new Xe(t)};Ye.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ae("div",e+"control-container",this._container);function i(i,r){var o=e+i+" "+e+r;t[i+r]=ae("div",o,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)se(this._controlCorners[t]);se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Je=Xe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Xe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){de(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(de(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):pe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ae("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ne(e),Ie(e);var i=this._section=ae("section",t+"-list");n&&(this._map.on("click",this.collapse,this),nt||Se(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ae("a",t+"-toggle",e);r.href="#",r.title="Layers",xt?(Se(r,"click",je),Se(r,"click",this.expand,this)):Se(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ae("div",t+"-base",i),this._separator=ae("div",t+"-separator",i),this._overlaysList=ae("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(r((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ue(this._baseLayersList),ue(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+a(this),i),this._layerControlInputs.push(e),e.layerId=a(t.layer),Se(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Qe=Xe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ae("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=ae("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Ne(o),Se(o,"click",je),Se(o,"click",r,this),Se(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";pe(this._zoomInButton,e),pe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&de(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&de(this._zoomInButton,e)}});Ye.mergeOptions({zoomControl:!0}),Ye.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Qe,this.addControl(this.zoomControl))}));var tn=Xe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=ae("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ae("div",e,n)),t.imperial&&(this._iScale=ae("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),en=Xe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ae("div","leaflet-control-attribution"),Ne(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ye.mergeOptions({attributionControl:!0}),Ye.addInitHook((function(){this.options.attributionControl&&(new en).addTo(this)})),Xe.Layers=Je,Xe.Zoom=Qe,Xe.Scale=tn,Xe.Attribution=en,Ke.layers=function(t,e,n){return new Je(t,e,n)},Ke.zoom=function(t){return new Qe(t)},Ke.scale=function(t){return new tn(t)},Ke.attribution=function(t){return new en(t)};var nn=S.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nn.addTo=function(t,e){return t.addHandler(e,this),this};var rn,on={Events:D},an=xt?"touchstart mousedown":"mousedown",sn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},un={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ln=M.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){p(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Se(this._dragStartTarget,an,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ln._dragging===this&&this.finishDrag(),Me(this._dragStartTarget,an,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!he(this._element,"leaflet-zoom-anim")&&!(ln._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(ln._dragging=this,this._preventOutline&&Ee(this._element),xe(),Xt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Le(this._element);this._startPoint=new A(e.clientX,e.clientY),this._parentScale=Ce(n),Se(document,un[t.type],this._onMove,this),Se(document,sn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new A(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Re(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=be(this._element).subtract(n),de(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),de(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,C(this._animRequest),this._lastEvent=t,this._animRequest=k(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),_e(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in pe(document.body,"leaflet-dragging"),this._lastTarget&&(pe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),un)Me(document,un[t],this._onMove,this),Me(document,sn[t],this._onUp,this);$e(),Kt(),this._moved&&this._moving&&(C(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ln._dragging=!1}});function cn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,r,o){var a,s,u,l=0;for(s=r+1;s<=o-1;s++)(u=mn(e[s],e[r],e[o],!0))>l&&(a=s,l=u);l>i&&(n[a]=1,t(e,n,i,r,a),t(e,n,i,a,o))}(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}(t=function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)a=t[i],s=t[r],u=void 0,l=void 0,u=s.x-a.x,l=s.y-a.y,u*u+l*l>e&&(n.push(t[i]),r=i);var a,s,u,l;return r<o-1&&n.push(t[o-1]),n}(t,n),n)}function hn(t,e,n){return Math.sqrt(mn(t,e,n,!0))}function dn(t,e,n,i,r){var o,a,s,u=i?rn:fn(t,n),l=fn(e,n);for(rn=l;;){if(!(u|l))return[t,e];if(u&l)return!1;s=fn(a=pn(t,e,o=u||l,n,r),n),o===u?(t=a,u=s):(e=a,l=s)}}function pn(t,e,n,i,r){var o,a,s=e.x-t.x,u=e.y-t.y,l=i.min,c=i.max;return 8&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):4&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):2&n?(o=c.x,a=t.y+u*(c.x-t.x)/s):1&n&&(o=l.x,a=t.y+u*(l.x-t.x)/s),new A(o,a,r)}function fn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function mn(t,e,n,i){var r,o=e.x,a=e.y,s=n.x-o,u=n.y-a,l=s*s+u*u;return l>0&&((r=((t.x-o)*s+(t.y-a)*u)/l)>1?(o=n.x,a=n.y):r>0&&(o+=s*r,a+=u*r)),s=t.x-o,u=t.y-a,i?s*s+u*u:new A(o,a)}function gn(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function vn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gn(t)}var yn=(Object.freeze||Object)({simplify:cn,pointToSegmentDistance:hn,closestPointOnSegment:function(t,e,n){return mn(t,e,n)},clipSegment:dn,_getEdgeIntersection:pn,_getBitCode:fn,_sqClosestPointOnSegment:mn,isFlat:gn,_flat:vn});function _n(t,e,n){var i,r,o,a,s,u,l,c,h,d=[1,4,2,8];for(r=0,l=t.length;r<l;r++)t[r]._code=fn(t[r],e);for(a=0;a<4;a++){for(c=d[a],i=[],r=0,o=(l=t.length)-1;r<l;o=r++)s=t[r],u=t[o],s._code&c?u._code&c||((h=pn(u,s,c,e,n))._code=fn(h,e),i.push(h)):(u._code&c&&((h=pn(u,s,c,e,n))._code=fn(h,e),i.push(h)),i.push(s));t=i}return t}var bn=(Object.freeze||Object)({clipPolygon:_n}),wn={project:function(t){return new A(t.lng,t.lat)},unproject:function(t){return new q(t.y,t.x)},bounds:new I([-180,-90],[180,90])},xn={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=o*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),o/2);return i=-n*Math.log(Math.max(s,1e-10)),new A(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=l=Math.PI/2-2*Math.atan(a*e)-s;return new q(s*n,t.x*n/i)}},$n=(Object.freeze||Object)({LonLat:wn,Mercator:xn,SphericalMercator:V}),En=n({},z,{code:"EPSG:3395",projection:xn,transformation:function(){var t=.5/(Math.PI*xn.R);return W(t,.5,-t,.5)}()}),kn=n({},z,{code:"EPSG:4326",projection:wn,transformation:W(1/180,1,-1/180,.5)}),Ln=n({},B,{projection:wn,transformation:W(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});B.Earth=z,B.EPSG3395=En,B.EPSG3857=Z,B.EPSG900913=G,B.EPSG4326=kn,B.Simple=Ln;var Cn=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ye.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Tn=Cn.extend({initialize:function(t,e){var n,i;if(p(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Sn=Tn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Tn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Tn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new R;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Dn=S.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=O(i),o=O("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return kt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Mn=Dn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Mn.imagePath||(Mn.imagePath=this._detectIconPath()),(this.options.imagePath||Mn.imagePath)+Dn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ae("div","leaflet-default-icon-path",document.body),e=oe(t,"background-image")||oe(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),An=nn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ln(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),de(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=be(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),u=N(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));if(!u.contains(o)){var l=O((Math.max(u.max.x,o.x)-u.max.x)/(a.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(a.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(a.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(a.min.y-u.min.y)).multiplyBy(i);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),_e(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=k(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=k(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=be(e._icon),r=e._map.layerPointToLatLng(i);n&&_e(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Pn=Cn.extend({options:{icon:new Mn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),de(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(de(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&se(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&_e(this._icon,t),this._shadow&&_e(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(de(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),An)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new An(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ge(this._icon,t),this._shadow&&ge(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),On=Cn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),In=On.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return On.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new I(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Nn=In.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=n({},i,{radius:e})),p(this,e),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:On.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===z.distance){var r=Math.PI/180,o=this._mRadius/z.R/r,a=n.project([e+o,t]),s=n.project([e-o,t]),u=a.add(s).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(l*r))/(Math.cos(e*r)*Math.cos(l*r)))/r;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-n.project([l,t-c]).x,this._radiusY=u.y-a.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),Rn=On.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=mn,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],l=1,c=u.length;l<c;l++){var h=o(t,e=u[l-1],n=u[l],!0);h<i&&(i=h,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,i=0;t<u-1;t++)if(r=s[t],o=s[t+1],(i+=n=r.distanceTo(o))>e)return a=(i-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-r.x),o.y-a*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new R,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=gn(t),i=0,r=t.length;i<r;i++)n?(e[i]=F(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new A(t,t);this._pxBounds=new I([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof q,a=t.length;if(o){for(r=[],i=0;i<a;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,o,a,s,u=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=dn(s[n],s[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=cn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(a=(s=this._parts[n]).length)-1;i<a;r=i++)if((e||0!==i)&&hn(t,s[r],s[i])<=u)return!0;return!1}});Rn._flat=vn;var jn=Rn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s,u,l=this._rings[0],c=l.length;if(!c)return null;for(o=a=s=0,t=0,e=c-1;t<c;e=t++)n=l[t],i=l[e],r=n.y*i.x-i.y*n.x,a+=(n.x+i.x)*r,s+=(n.y+i.y)*r,o+=3*r;return u=0===o?l[0]:[a/o,s/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=Rn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof q&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Rn.prototype._setLatLngs.call(this,t),gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new A(e,e);if(t=new I(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=_n(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,a,s,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(u=(e=this._parts[r]).length)-1;o<u;a=o++)n=e[o],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||Rn.prototype._containsPoint.call(this,t,!0)}}),qn=Sn.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=v(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=Fn(t,o);return a?(a.feature=Zn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Fn(t,e){var n,i,r,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Bn;if(!s&&!a)return null;switch(a.type){case"Point":return Un(l,t,n=c(s),e);case"MultiPoint":for(r=0,o=s.length;r<o;r++)n=c(s[r]),u.push(Un(l,t,n,e));return new Sn(u);case"LineString":case"MultiLineString":return i=zn(s,"LineString"===a.type?0:1,c),new Rn(i,e);case"Polygon":case"MultiPolygon":return i=zn(s,"Polygon"===a.type?1:2,c),new jn(i,e);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var h=Fn({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new Sn(u);default:throw new Error("Invalid GeoJSON object.")}}function Un(t,e,n,i){return t?t(e,n):new Pn(n,i&&i.markersInheritOptions&&i)}function Bn(t){return new q(t[1],t[0],t[2])}function zn(t,e,n){for(var i,r=[],o=0,a=t.length;o<a;o++)i=e?zn(t[o],e-1,n):(n||Bn)(t[o]),r.push(i);return r}function Vn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function Hn(t,e,n,i){for(var r=[],o=0,a=t.length;o<a;o++)r.push(e?Hn(t[o],e-1,n,i):Vn(t[o],i));return!e&&n&&r.push(r[0]),r}function Wn(t,e){return t.feature?n({},t.feature,{geometry:e}):Zn(e)}function Zn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Gn={toGeoJSON:function(t){return Wn(this,{type:"Point",coordinates:Vn(this.getLatLng(),t)})}};function Yn(t,e){return new qn(t,e)}Pn.include(Gn),Nn.include(Gn),In.include(Gn),Rn.include({toGeoJSON:function(t){var e=!gn(this._latlngs);return Wn(this,{type:(e?"Multi":"")+"LineString",coordinates:Hn(this._latlngs,e?1:0,!1,t)})}}),jn.include({toGeoJSON:function(t){var e=!gn(this._latlngs),n=e&&!gn(this._latlngs[0]),i=Hn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Wn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Tn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Wn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer((function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var o=Zn(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}})),n?Wn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Xn=Yn,Kn=Cn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=j(e),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(de(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&le(this._image),this},bringToBack:function(){return this._map&&ce(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=j(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ae("img");de(e,"leaflet-image-layer"),this._zoomAnimated&&de(e,"leaflet-zoom-animated"),this.options.className&&de(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ye(this._image,n,e)},_reset:function(){var t=this._image,e=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();_e(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){ge(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Jn=Kn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ae("video");if(de(e,"leaflet-image-layer"),this._zoomAnimated&&de(e,"leaflet-zoom-animated"),this.options.className&&de(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=r(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],o=0;o<n.length;o++)i.push(n[o].src);this._url=n.length>0?i:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var s=ae("source");s.src=this._url[a],e.appendChild(s)}}}}),Qn=Kn.extend({_initImage:function(){var t=this._image=this._url;de(t,"leaflet-image-layer"),this._zoomAnimated&&de(t,"leaflet-zoom-animated"),this.options.className&&de(t,this.options.className),t.onselectstart=l,t.onmousemove=l}}),ti=Cn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ge(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ge(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ge(this._container,0),this._removeTimeout=setTimeout(r(se,void 0,this._container),200)):se(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&le(this._container),this},bringToBack:function(){return this._map&&ce(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Cn||(n=e,e=t),e instanceof Sn)for(var i in t._layers){e=t._layers[i];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=O(this.options.offset),n=this._getAnchor();this._zoomAnimated?_e(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),ei=ti.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){ti.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof On||this._source.on("preclick",Oe))},onRemove:function(t){ti.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof On||this._source.off("preclick",Oe))},getEvents:function(){var t=ti.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ae("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ae("div",t+"-content-wrapper",e);if(this._contentNode=ae("div",t+"-content",n),Ne(n),Ie(this._contentNode),Se(n,"contextmenu",Oe),this._tipContainer=ae("div",t+"-tip-container",e),this._tip=ae("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ae("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Se(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight;r&&i>r?(e.height=r+"px",de(t,"leaflet-popup-scrolled")):pe(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();_e(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(oe(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new A(this._containerLeft,-n-this._containerBottom);r._add(be(this._container));var o=t.layerPointToContainerPoint(r),a=O(this.options.autoPanPadding),s=O(this.options.autoPanPaddingTopLeft||a),u=O(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),c=0,h=0;o.x+i+u.x>l.x&&(c=o.x+i-l.x+u.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+u.y>l.y&&(h=o.y+n-l.y+u.y),o.y-h-s.y<0&&(h=o.y-s.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),je(t)},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ye.mergeOptions({closePopupOnClick:!0}),Ye.include({openPopup:function(t,e,n){return t instanceof ei||(t=new ei(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Cn.include({bindPopup:function(t,e){return t instanceof ei?(p(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new ei(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(je(t),e instanceof On?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var ni=ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){ti.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){ti.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=ti.prototype.getEvents.call(this);return xt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ae("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),r=e.layerPointToContainerPoint(t),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,u=O(this.options.offset),l=this._getAnchor();"top"===o?t=t.add(O(-a/2+u.x,-s+u.y+l.y,!0)):"bottom"===o?t=t.subtract(O(a/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(O(a/2+u.x,s/2-l.y+u.y,!0)):"right"===o||"auto"===o&&r.x<i.x?(o="right",t=t.add(O(u.x+l.x,l.y-s/2+u.y,!0))):(o="left",t=t.subtract(O(a+l.x-u.x,s/2-l.y-u.y,!0))),pe(n,"leaflet-tooltip-right"),pe(n,"leaflet-tooltip-left"),pe(n,"leaflet-tooltip-top"),pe(n,"leaflet-tooltip-bottom"),de(n,"leaflet-tooltip-"+o),_e(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ge(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ye.include({openTooltip:function(t,e,n){return t instanceof ni||(t=new ni(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Cn.include({bindTooltip:function(t,e){return t instanceof ni?(p(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new ni(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),xt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(pe(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var ii=Dn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ue(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=O(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Dn.Default=Mn;var ri=Cn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:vt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),se(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof A?t:new A(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Q){ge(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);ge(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(C(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(se(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)se(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new A(+r,+o);s.z=+a;var u=this._tileCoordsToKey(s),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),a>i&&this._retainParent(r,o,a,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new A(r,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();gt?ye(t.el,r,i):_e(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new I(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),a=[],s=this.options.keepBuffer,u=new I(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new A(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var p=new A(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:a.push(p)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new R(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new A(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(se(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){de(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,Q&&this.options.opacity<1&&ge(t,this.options.opacity),nt&&!it&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&k(r(this._tileReady,this,t,null,o)),_e(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(ge(n.el,0),C(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(de(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Q||!this._map._fadeAnimated?k(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new A(this._wrapX?u(t.x,this._wrapX):t.x,this._wrapY?u(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new I(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),oi=ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&kt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Se(n,"load",r(this._tileOnLoad,this,e,n)),Se(n,"error",r(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:kt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){Q?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=_,se(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return ot||e.el.setAttribute("src",_),ri.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==_))return ri.prototype._tileReady.call(this,t,e,n)}});function ai(t,e){return new oi(t,e)}var si=oi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var r in e)r in this.options||(i[r]=e[r]);var o=(e=p(this,e)).detectRetina&&kt?2:1,a=this.getTileSize();i.width=a.x*o,i.height=a.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,oi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=N(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,a=(this._wmsVersion>=1.3&&this._crs===kn?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=oi.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});oi.WMS=si,ai.wms=function(t,e){return new si(t,e)};var ui=Cn.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&de(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=be(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=r.multiplyBy(-n).add(i).add(r).subtract(a);gt?ye(this._container,s,n):_e(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new I(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),li=ui.extend({getEvents:function(){var t=ui.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Se(t,"mousemove",this._onMouseMove,this),Se(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Se(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,se(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ui.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=kt?2:1;_e(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",kt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||k(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(u.beginPath(),n=0;n<s;n++){for(i=0,r=a[n].length;i<r;i++)o=a[n][i],u[i?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(Ve(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(pe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(de(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(L.bind((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function ci(t){return Ct?new li(t):null}var hi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),di={_initContainer:function(){this._container=ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ui.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hi("shape");de(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;se(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=hi("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=hi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){le(t._container)},_bringToBack:function(t){ce(t._container)}},pi=St?hi:Y,fi=ui.extend({getEvents:function(){var t=ui.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=pi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){se(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ui.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),_e(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=pi("path");t.options.className&&de(e,t.options.className),t.options.interactive&&de(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){se(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,X(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){le(t._path)},_bringToBack:function(t){ce(t._path)}});function mi(t){return Tt||St?new fi(t):null}St&&fi.include(di),Ye.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ci(t)||mi(t)}});var gi=jn.extend({initialize:function(t,e){jn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=j(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});fi.create=pi,fi.pointsToPath=X,qn.geometryToLayer=Fn,qn.coordsToLatLng=Bn,qn.coordsToLatLngs=zn,qn.latLngToCoords=Vn,qn.latLngsToCoords=Hn,qn.getFeature=Wn,qn.asFeature=Zn,Ye.mergeOptions({boxZoom:!0});var vi=nn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Xt(),xe(),this._startPoint=this._map.mouseEventToContainerPoint(t),Se(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ae("div","leaflet-zoom-box",this._container),de(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new I(this._point,this._startPoint),n=e.getSize();_e(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(se(this._box),pe(this._container,"leaflet-crosshair")),Kt(),$e(),Me(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ye.addInitHook("addHandler","boxZoom",vi),Ye.mergeOptions({doubleClickZoom:!0});var yi=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});Ye.addInitHook("addHandler","doubleClickZoom",yi),Ye.mergeOptions({dragging:!0,inertia:!it,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _i=nn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ln(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}de(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pe(this._map._container,"leaflet-grab"),pe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=N(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,a=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=r.multiplyBy(a/o),u=s.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),c=s.multiplyBy(l/u),h=l/(n.inertiaDeceleration*a),d=c.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),k((function(){e.panBy(d,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Ye.addInitHook("addHandler","dragging",_i),Ye.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bi=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Se(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=O(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}je(t)}}});Ye.addInitHook("addHandler","keyboard",bi),Ye.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wi=nn.extend({addHooks:function(){Se(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ue(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),je(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Ye.addInitHook("addHandler","scrollWheelZoom",wi),Ye.mergeOptions({tap:!0,tapTolerance:15});var xi=nn.extend({addHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Re(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new A(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&de(n,"leaflet-active"),this._holdTimeout=setTimeout(r((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Se(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Me(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&pe(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new A(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});xt&&!wt&&Ye.addInitHook("addHandler","tap",xi),Ye.mergeOptions({touchZoom:xt&&!it,bounceAtZoomLimits:!0});var $i=nn.extend({addHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend",this._onTouchEnd,this),Re(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var s=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=k(s,this,!0),Re(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),Me(document,"touchmove",this._onTouchMove),Me(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ye.addInitHook("addHandler","touchZoom",$i),Ye.BoxZoom=vi,Ye.DoubleClickZoom=yi,Ye.Drag=_i,Ye.Keyboard=bi,Ye.ScrollWheelZoom=wi,Ye.Tap=xi,Ye.TouchZoom=$i,Object.freeze=e,t.version="1.6.0",t.Control=Xe,t.control=Ke,t.Browser=Mt,t.Evented=M,t.Mixin=on,t.Util=T,t.Class=S,t.Handler=nn,t.extend=n,t.bind=r,t.stamp=a,t.setOptions=p,t.DomEvent=Ze,t.DomUtil=Te,t.PosAnimation=Ge,t.Draggable=ln,t.LineUtil=yn,t.PolyUtil=bn,t.Point=A,t.point=O,t.Bounds=I,t.bounds=N,t.Transformation=H,t.transformation=W,t.Projection=$n,t.LatLng=q,t.latLng=F,t.LatLngBounds=R,t.latLngBounds=j,t.CRS=B,t.GeoJSON=qn,t.geoJSON=Yn,t.geoJson=Xn,t.Layer=Cn,t.LayerGroup=Tn,t.layerGroup=function(t,e){return new Tn(t,e)},t.FeatureGroup=Sn,t.featureGroup=function(t){return new Sn(t)},t.ImageOverlay=Kn,t.imageOverlay=function(t,e,n){return new Kn(t,e,n)},t.VideoOverlay=Jn,t.videoOverlay=function(t,e,n){return new Jn(t,e,n)},t.SVGOverlay=Qn,t.svgOverlay=function(t,e,n){return new Qn(t,e,n)},t.DivOverlay=ti,t.Popup=ei,t.popup=function(t,e){return new ei(t,e)},t.Tooltip=ni,t.tooltip=function(t,e){return new ni(t,e)},t.Icon=Dn,t.icon=function(t){return new Dn(t)},t.DivIcon=ii,t.divIcon=function(t){return new ii(t)},t.Marker=Pn,t.marker=function(t,e){return new Pn(t,e)},t.TileLayer=oi,t.tileLayer=ai,t.GridLayer=ri,t.gridLayer=function(t){return new ri(t)},t.SVG=fi,t.svg=mi,t.Renderer=ui,t.Canvas=li,t.canvas=ci,t.Path=On,t.CircleMarker=In,t.circleMarker=function(t,e){return new In(t,e)},t.Circle=Nn,t.circle=function(t,e,n){return new Nn(t,e,n)},t.Polyline=Rn,t.polyline=function(t,e){return new Rn(t,e)},t.Polygon=jn,t.polygon=function(t,e){return new jn(t,e)},t.Rectangle=gi,t.rectangle=function(t,e){return new gi(t,e)},t.Map=Ye,t.map=function(t,e){return new Ye(t,e)};var Ei=window.L;t.noConflict=function(){return window.L=Ei,this},window.L=t}(e)},function(t,e,n){"use strict";n.r(e);var i=n(98),r=n.n(i);window.PouchDB=r.a;var o={};function a(t){var e,n=(e=t,new r.a(e,{revs_limit:1,auto_compaction:!0}));this.all=function(){return n.allDocs({include_docs:!0}).then((function(t){return t.rows.map((function(t){return t.doc}))}))},this.create=function(t){return n.post(t).then((function(t){return n.get(t.id)}))},this.update=function(t){return n.put(t).then((function(t){return n.get(t.id)}))},this.get=function(t){return n.get(t)},this.remove=function(t){return n.remove(t)},this.attach=function(t,e,i){return n.putAttachment(t,e,i)},this.getAttachment=function(t,e){return n.getAttachment(t,e)}}var s=n(3),u="sessions";s.a.has("db")&&(u=s.a.get("db"));var l;e.default=(l=u,o.hasOwnProperty(l)||(o[l]=new a(l)),o[l])},,function(t,e,n){var i;void 0===(i=function(){"use strict";return{}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){"use strict";return function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2),n(32),n(7)],void 0===(r=function(t,e,n){"use strict";var i=function(r,o,a,s,u,l,c){var h=0,d=r.length,p=null==a;if("object"===e(a))for(h in u=!0,a)i(r,o,h,a[h],!0,l,c);else if(void 0!==s&&(u=!0,n(s)||(c=!0),p&&(c?(o.call(r,s),o=null):(p=o,o=function(e,n,i){return p.call(t(e),i)})),o))for(;h<d;h++)o(r[h],a,c?s:s.call(r[h],h,o(r[h],a)));return u?r:p?o.call(r):d?o(r[0],a):l};return i}.apply(e,i))||(t.exports=r)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,,,function(t,e,n){var i,r;i=[n(61),n(112)],void 0===(r=function(t,e){"use strict";return function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?t[e.call(n)]||"object":typeof n}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(82),n(201),n(202),n(115),n(26),n(17),n(117),n(11)],void 0===(r=function(t,e,n,i,r,o){"use strict";var a=/^(?:parents|prev(?:Until|All))/,s={children:!0,contents:!0,next:!0,prev:!0};function u(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}return t.fn.extend({has:function(e){var n=t(e,this),i=n.length;return this.filter((function(){for(var e=0;e<i;e++)if(t.contains(this,n[e]))return!0}))},closest:function(e,n){var i,o=0,a=this.length,s=[],u="string"!=typeof e&&t(e);if(!r.test(e))for(;o<a;o++)for(i=this[o];i&&i!==n;i=i.parentNode)if(i.nodeType<11&&(u?u.index(i)>-1:1===i.nodeType&&t.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?t.uniqueSort(s):s)},index:function(n){return n?"string"==typeof n?e.call(t(n),this[0]):e.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,n){return this.pushStack(t.uniqueSort(t.merge(this.get(),t(e,n))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),t.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return n(t,"parentNode")},parentsUntil:function(t,e,i){return n(t,"parentNode",i)},next:function(t){return u(t,"nextSibling")},prev:function(t){return u(t,"previousSibling")},nextAll:function(t){return n(t,"nextSibling")},prevAll:function(t){return n(t,"previousSibling")},nextUntil:function(t,e,i){return n(t,"nextSibling",i)},prevUntil:function(t,e,i){return n(t,"previousSibling",i)},siblings:function(t){return i((t.parentNode||{}).firstChild,t)},children:function(t){return i(t.firstChild)},contents:function(e){return o(e,"iframe")?e.contentDocument:(o(e,"template")&&(e=e.content||e),t.merge([],e.childNodes))}},(function(e,n){t.fn[e]=function(i,r){var o=t.map(this,n,i);return"Until"!==e.slice(-5)&&(r=i),r&&"string"==typeof r&&(o=t.filter(r,o)),this.length>1&&(s[e]||t.uniqueSort(o),a.test(e)&&o.reverse()),this.pushStack(o)}})),t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(7),n(60),n(84)],void 0===(r=function(t,e,n){"use strict";function i(t){return t}function r(t){throw t}function o(t,n,i,r){var o;try{t&&e(o=t.promise)?o.call(t).done(n).fail(i):t&&e(o=t.then)?o.call(t,n,i):n.apply(void 0,[t].slice(r))}catch(t){i.apply(void 0,[t])}}return t.extend({Deferred:function(n){var o=[["notify","progress",t.Callbacks("memory"),t.Callbacks("memory"),2],["resolve","done",t.Callbacks("once memory"),t.Callbacks("once memory"),0,"resolved"],["reject","fail",t.Callbacks("once memory"),t.Callbacks("once memory"),1,"rejected"]],a="pending",s={state:function(){return a},always:function(){return u.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var n=arguments;return t.Deferred((function(i){t.each(o,(function(t,r){var o=e(n[r[4]])&&n[r[4]];u[r[1]]((function(){var t=o&&o.apply(this,arguments);t&&e(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[r[0]+"With"](this,o?[t]:arguments)}))})),n=null})).promise()},then:function(n,a,s){var u=0;function l(n,o,a,s){return function(){var c=this,h=arguments,d=function(){var t,d;if(!(n<u)){if((t=a.apply(c,h))===o.promise())throw new TypeError("Thenable self-resolution");d=t&&("object"==typeof t||"function"==typeof t)&&t.then,e(d)?s?d.call(t,l(u,o,i,s),l(u,o,r,s)):(u++,d.call(t,l(u,o,i,s),l(u,o,r,s),l(u,o,i,o.notifyWith))):(a!==i&&(c=void 0,h=[t]),(s||o.resolveWith)(c,h))}},p=s?d:function(){try{d()}catch(e){t.Deferred.exceptionHook&&t.Deferred.exceptionHook(e,p.stackTrace),n+1>=u&&(a!==r&&(c=void 0,h=[e]),o.rejectWith(c,h))}};n?p():(t.Deferred.getStackHook&&(p.stackTrace=t.Deferred.getStackHook()),window.setTimeout(p))}}return t.Deferred((function(t){o[0][3].add(l(0,t,e(s)?s:i,t.notifyWith)),o[1][3].add(l(0,t,e(n)?n:i)),o[2][3].add(l(0,t,e(a)?a:r))})).promise()},promise:function(e){return null!=e?t.extend(e,s):s}},u={};return t.each(o,(function(t,e){var n=e[2],i=e[5];s[e[1]]=n.add,i&&n.add((function(){a=i}),o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),n.add(e[3].fire),u[e[0]]=function(){return u[e[0]+"With"](this===u?void 0:this,arguments),this},u[e[0]+"With"]=n.fireWith})),s.promise(u),n&&n.call(u,u),u},when:function(i){var r=arguments.length,a=r,s=Array(a),u=n.call(arguments),l=t.Deferred(),c=function(t){return function(e){s[t]=this,u[t]=arguments.length>1?n.call(arguments):e,--r||l.resolveWith(s,u)}};if(r<=1&&(o(i,l.done(c(a)).resolve,l.reject,!r),"pending"===l.state()||e(u[a]&&u[a].then)))return l.then();for(;a--;)o(u[a],c(a),l.reject);return l.promise()}}),t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(9),n(91),n(7),n(21),n(60),n(19),n(26),n(17),n(11)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";var u=/^key/,l=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,c=/^([^.]*)(?:\.(.+)|)/;function h(){return!0}function d(){return!1}function p(){try{return e.activeElement}catch(t){}}function f(e,n,i,r,o,a){var s,u;if("object"==typeof n){for(u in"string"!=typeof i&&(r=r||i,i=void 0),n)f(e,u,i,r,n[u],a);return e}if(null==r&&null==o?(o=i,r=i=void 0):null==o&&("string"==typeof i?(o=r,r=void 0):(o=r,r=i,i=void 0)),!1===o)o=d;else if(!o)return e;return 1===a&&(s=o,(o=function(e){return t().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=t.guid++)),e.each((function(){t.event.add(this,n,o,r,i)}))}return t.event={global:{},add:function(e,i,o,s,u){var l,h,d,p,f,m,g,v,y,_,b,w=a.get(e);if(w)for(o.handler&&(o=(l=o).handler,u=l.selector),u&&t.find.matchesSelector(n,u),o.guid||(o.guid=t.guid++),(p=w.events)||(p=w.events={}),(h=w.handle)||(h=w.handle=function(n){return void 0!==t&&t.event.triggered!==n.type?t.event.dispatch.apply(e,arguments):void 0}),f=(i=(i||"").match(r)||[""]).length;f--;)y=b=(d=c.exec(i[f])||[])[1],_=(d[2]||"").split(".").sort(),y&&(g=t.event.special[y]||{},y=(u?g.delegateType:g.bindType)||y,g=t.event.special[y]||{},m=t.extend({type:y,origType:b,data:s,handler:o,guid:o.guid,selector:u,needsContext:u&&t.expr.match.needsContext.test(u),namespace:_.join(".")},l),(v=p[y])||((v=p[y]=[]).delegateCount=0,g.setup&&!1!==g.setup.call(e,s,_,h)||e.addEventListener&&e.addEventListener(y,h)),g.add&&(g.add.call(e,m),m.handler.guid||(m.handler.guid=o.guid)),u?v.splice(v.delegateCount++,0,m):v.push(m),t.event.global[y]=!0)},remove:function(e,n,i,o,s){var u,l,h,d,p,f,m,g,v,y,_,b=a.hasData(e)&&a.get(e);if(b&&(d=b.events)){for(p=(n=(n||"").match(r)||[""]).length;p--;)if(v=_=(h=c.exec(n[p])||[])[1],y=(h[2]||"").split(".").sort(),v){for(m=t.event.special[v]||{},g=d[v=(o?m.delegateType:m.bindType)||v]||[],h=h[2]&&new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=u=g.length;u--;)f=g[u],!s&&_!==f.origType||i&&i.guid!==f.guid||h&&!h.test(f.namespace)||o&&o!==f.selector&&("**"!==o||!f.selector)||(g.splice(u,1),f.selector&&g.delegateCount--,m.remove&&m.remove.call(e,f));l&&!g.length&&(m.teardown&&!1!==m.teardown.call(e,y,b.handle)||t.removeEvent(e,v,b.handle),delete d[v])}else for(v in d)t.event.remove(e,v+n[p],i,o,!0);t.isEmptyObject(d)&&a.remove(e,"handle events")}},dispatch:function(e){var n,i,r,o,s,u,l=t.event.fix(e),c=new Array(arguments.length),h=(a.get(this,"events")||{})[l.type]||[],d=t.event.special[l.type]||{};for(c[0]=l,n=1;n<arguments.length;n++)c[n]=arguments[n];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(u=t.event.handlers.call(this,l,h),n=0;(o=u[n++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(r=((t.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,c))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(e,n){var i,r,o,a,s,u=[],l=n.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(a=[],s={},i=0;i<l;i++)void 0===s[o=(r=n[i]).selector+" "]&&(s[o]=r.needsContext?t(o,this).index(c)>-1:t.find(o,this,null,[c]).length),s[o]&&a.push(r);a.length&&u.push({elem:c,handlers:a})}return c=this,l<n.length&&u.push({elem:c,handlers:n.slice(l)}),u},addProp:function(e,n){Object.defineProperty(t.Event.prototype,e,{enumerable:!0,configurable:!0,get:i(n)?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[t.expando]?e:new t.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===p()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&s(this,"input"))return this.click(),!1},_default:function(t){return s(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},t.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},t.Event=function(e,n){if(!(this instanceof t.Event))return new t.Event(e,n);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?h:d,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,n&&t.extend(this,n),this.timeStamp=e&&e.timeStamp||Date.now(),this[t.expando]=!0},t.Event.prototype={constructor:t.Event,isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=h,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=h,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=h,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},t.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&u.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&l.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},t.event.addProp),t.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,n){t.event.special[e]={delegateType:n,bindType:n,handle:function(e){var i,r=this,o=e.relatedTarget,a=e.handleObj;return o&&(o===r||t.contains(r,o))||(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=n),i}}})),t.fn.extend({on:function(t,e,n,i){return f(this,t,e,n,i)},one:function(t,e,n,i){return f(this,t,e,n,i,1)},off:function(e,n,i){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,t(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return!1!==n&&"function"!=typeof n||(i=n,n=void 0),!1===i&&(i=d),this.each((function(){t.event.remove(this,e,i,n)}))}}),t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(9),n(7),n(21),n(218),n(135),n(136),n(17),n(219),n(96),n(34),n(137)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";var s=/%20/g,u=/#.*$/,l=/([?&])_=[^&]*/,c=/^(.*?):[ \t]*([^\r\n]*)$/gm,h=/^(?:GET|HEAD)$/,d=/^\/\//,p={},f={},m="*/".concat("*"),g=e.createElement("a");function v(t){return function(e,r){"string"!=typeof e&&(r=e,e="*");var o,a=0,s=e.toLowerCase().match(i)||[];if(n(r))for(;o=s[a++];)"+"===o[0]?(o=o.slice(1)||"*",(t[o]=t[o]||[]).unshift(r)):(t[o]=t[o]||[]).push(r)}}function y(e,n,i,r){var o={},a=e===f;function s(u){var l;return o[u]=!0,t.each(e[u]||[],(function(t,e){var u=e(n,i,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(n.dataTypes.unshift(u),s(u),!1)})),l}return s(n.dataTypes[0])||!o["*"]&&s("*")}function _(e,n){var i,r,o=t.ajaxSettings.flatOptions||{};for(i in n)void 0!==n[i]&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&t.extend(!0,e,r),e}return g.href=r.href,t.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:r.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(r.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":m,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":t.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,n){return n?_(_(e,t.ajaxSettings),n):_(t.ajaxSettings,e)},ajaxPrefilter:v(p),ajaxTransport:v(f),ajax:function(n,v){"object"==typeof n&&(v=n,n=void 0),v=v||{};var _,b,w,x,$,E,k,L,C,T,S=t.ajaxSetup({},v),D=S.context||S,M=S.context&&(D.nodeType||D.jquery)?t(D):t.event,A=t.Deferred(),P=t.Callbacks("once memory"),O=S.statusCode||{},I={},N={},R="canceled",j={readyState:0,getResponseHeader:function(t){var e;if(k){if(!x)for(x={};e=c.exec(w);)x[e[1].toLowerCase()]=e[2];e=x[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return k?w:null},setRequestHeader:function(t,e){return null==k&&(t=N[t.toLowerCase()]=N[t.toLowerCase()]||t,I[t]=e),this},overrideMimeType:function(t){return null==k&&(S.mimeType=t),this},statusCode:function(t){var e;if(t)if(k)j.always(t[j.status]);else for(e in t)O[e]=[O[e],t[e]];return this},abort:function(t){var e=t||R;return _&&_.abort(e),q(0,e),this}};if(A.promise(j),S.url=((n||S.url||r.href)+"").replace(d,r.protocol+"//"),S.type=v.method||v.type||S.method||S.type,S.dataTypes=(S.dataType||"*").toLowerCase().match(i)||[""],null==S.crossDomain){E=e.createElement("a");try{E.href=S.url,E.href=E.href,S.crossDomain=g.protocol+"//"+g.host!=E.protocol+"//"+E.host}catch(t){S.crossDomain=!0}}if(S.data&&S.processData&&"string"!=typeof S.data&&(S.data=t.param(S.data,S.traditional)),y(p,S,v,j),k)return j;for(C in(L=t.event&&S.global)&&0==t.active++&&t.event.trigger("ajaxStart"),S.type=S.type.toUpperCase(),S.hasContent=!h.test(S.type),b=S.url.replace(u,""),S.hasContent?S.data&&S.processData&&0===(S.contentType||"").indexOf("application/x-www-form-urlencoded")&&(S.data=S.data.replace(s,"+")):(T=S.url.slice(b.length),S.data&&(S.processData||"string"==typeof S.data)&&(b+=(a.test(b)?"&":"?")+S.data,delete S.data),!1===S.cache&&(b=b.replace(l,"$1"),T=(a.test(b)?"&":"?")+"_="+o+++T),S.url=b+T),S.ifModified&&(t.lastModified[b]&&j.setRequestHeader("If-Modified-Since",t.lastModified[b]),t.etag[b]&&j.setRequestHeader("If-None-Match",t.etag[b])),(S.data&&S.hasContent&&!1!==S.contentType||v.contentType)&&j.setRequestHeader("Content-Type",S.contentType),j.setRequestHeader("Accept",S.dataTypes[0]&&S.accepts[S.dataTypes[0]]?S.accepts[S.dataTypes[0]]+("*"!==S.dataTypes[0]?", "+m+"; q=0.01":""):S.accepts["*"]),S.headers)j.setRequestHeader(C,S.headers[C]);if(S.beforeSend&&(!1===S.beforeSend.call(D,j,S)||k))return j.abort();if(R="abort",P.add(S.complete),j.done(S.success),j.fail(S.error),_=y(f,S,v,j)){if(j.readyState=1,L&&M.trigger("ajaxSend",[j,S]),k)return j;S.async&&S.timeout>0&&($=window.setTimeout((function(){j.abort("timeout")}),S.timeout));try{k=!1,_.send(I,q)}catch(t){if(k)throw t;q(-1,t)}}else q(-1,"No Transport");function q(e,n,i,r){var o,a,s,u,l,c=n;k||(k=!0,$&&window.clearTimeout($),_=void 0,w=r||"",j.readyState=e>0?4:0,o=e>=200&&e<300||304===e,i&&(u=function(t,e,n){for(var i,r,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){u.unshift(r);break}if(u[0]in n)o=u[0];else{for(r in n){if(!u[0]||t.converters[r+" "+u[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(S,j,i)),u=function(t,e,n,i){var r,o,a,s,u,l={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(r in l)if((s=r.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[r]:!0!==l[r]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(S,u,j,o),o?(S.ifModified&&((l=j.getResponseHeader("Last-Modified"))&&(t.lastModified[b]=l),(l=j.getResponseHeader("etag"))&&(t.etag[b]=l)),204===e||"HEAD"===S.type?c="nocontent":304===e?c="notmodified":(c=u.state,a=u.data,o=!(s=u.error))):(s=c,!e&&c||(c="error",e<0&&(e=0))),j.status=e,j.statusText=(n||c)+"",o?A.resolveWith(D,[a,c,j]):A.rejectWith(D,[j,c,s]),j.statusCode(O),O=void 0,L&&M.trigger(o?"ajaxSuccess":"ajaxError",[j,S,o?a:s]),P.fireWith(D,[j,c]),L&&(M.trigger("ajaxComplete",[j,S]),--t.active||t.event.trigger("ajaxStop")))}return j},getJSON:function(e,n,i){return t.get(e,n,i,"json")},getScript:function(e,n){return t.get(e,void 0,n,"script")}}),t.each(["get","post"],(function(e,i){t[i]=function(e,r,o,a){return n(r)&&(a=a||o,o=r,r=void 0),t.ajax(t.extend({url:e,type:i,dataType:a,data:r,success:o},t.isPlainObject(e)&&e))}})),t}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),o=n(4),a=n(5);const s={},u=/[a-zA-Z0-9+-.]+?:\/\//;s.init=()=>Promise.resolve(!0),s.isWaitingForPermissions=()=>!1,s.getFileUrl=t=>new Promise((e,n)=>{let i;t?"string"==typeof t?u.test(t)?e(t):n("no!"):"object"==typeof t?s.isTooLarge(t)?(i=new Error(Object(a.a)("filepicker.toolargeerror",{maxSize:s.getMaxSizeReadable()})),n(i)):e(URL.createObjectURL(t)):n(new Error("Unknown error occurred")):e(null)}),s.getObjectUrl=t=>s.getFileUrl(t).then(t=>/https?:\/\//.test(t)?s.urlToBlob(t).then(URL.createObjectURL):t),s.urlToBlob=t=>{const e=new XMLHttpRequest;return new Promise(n=>{e.open("GET",t),e.responseType="blob",e.onload=()=>{n(e.response)},e.send()})},s.getCurrentFiles=()=>{const t=[];return r()("form.or").find('input[type="file"]:not(.ignore), input[type="text"][data-drawing="true"]').each((function(){let e,n=null,i=null;"file"===this.type?n=this.files[0]:this.value&&(i=r()(this).closest(".question")[0].querySelector(".draw-widget canvas"),i&&!u.test(this.value)&&(n=Object(o.a)(i.toDataURL()),n.name=this.value)),n&&n.name&&(e=Object(o.b)(n,this.dataset.filenamePostfix),this.dataset.resized&&this.dataset.resizedDataURI&&(n=Object(o.a)(this.dataset.resizedDataURI)),n=new Blob([n],{type:n.type}),n.name=e,t.push(n))})),t},s.isTooLarge=()=>!1,s.getMaxSizeReadable=()=>"5MB",e.default=s},function(t,e,n){"use strict";var i=n(3),r=n(64),o=n(43),a=n(268);function s(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.session=e}var e,n,i,o,a;return e=t,(n=[{key:"submit",value:(o=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.create().postForm(this.session);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,i){var r=o.apply(t,e);function a(t){s(r,n,i,a,u,"next",t)}function u(t){s(r,n,i,a,u,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})}])&&u(e.prototype,n),i&&u(e,i),t}();function c(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){c(o,i,r,a,s,"next",t)}function s(t){c(o,i,r,a,s,"throw",t)}a(void 0)}))}}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p=n(70),f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.session=e}var e,n,r,o,s;return e=t,(n=[{key:"getDriver",value:function(){return i.a.has("sms")?new a.a(this.session):new l(this.session)}},{key:"chooseDriver",value:(s=h(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.chooseMethod=function(t){p.emit("Submit.method.choose",t)},p.emit("EnketoForm.submit.status",'<div style="text-align:center">Please choose submission method <br><a href="#" id="instantSubmit__sms" role="button" style="margin:16px" onclick="chooseMethod(\'sms\')" class="btn btn-primary">SMS</a><a href="#" id="instantSubmit__http" role="button" style="margin:16px" onclick="chooseMethod(\'http\')" class="btn btn-primary">Internet</a></div>'),t.abrupt("return",new Promise((function(t){p.once("Submit.method.choose",(function(n){return p.emit("EnketoForm.submit.status","Please wait..."),t("sms"===n?new a.a(e.session):new l(e.session))}))})));case 3:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"send",value:(o=h(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p.emit("EnketoForm.submitting"),!i.a.get("instant_submit")){t.next=7;break}return t.next=4,this.chooseDriver();case 4:e=t.sent,t.next=8;break;case 7:e=this.getDriver();case 8:return t.next=10,e.submit();case 10:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_updateStatus",value:function(t){p.emit("EnketoForm.submit.status",t)}}])&&d(e.prototype,n),r&&d(e,r),t}(),m=function(t){return new f(t).send()};function g(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){g(o,i,r,a,s,"next",t)}function s(t){g(o,i,r,a,s,"throw",t)}a(void 0)}))}}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var _=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a,s,u,l;return e=t,(n=[{key:"start",value:function(){return i.a.has("edit")?this._loadSessionFromUrl(i.a.getPath("edit")):Promise.resolve(new o.a({online:!0,draft:!1}))}},{key:"canSave",value:function(){return!1}},{key:"finalize",value:(l=v(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:case"end":return t.stop()}}),t)}))),function(t){return l.apply(this,arguments)})},{key:"attachmentUrl",value:(u=v(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.a.getUrl("submissions/"+e.data.instance_id+"/photo/"+n));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return u.apply(this,arguments)})},{key:"_loadSessionFromUrl",value:(s=v(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.create().json(e);case 2:return n=t.sent,t.abrupt("return",new o.a({submitted:!0,xml:n.instance,instance_id:n.instance_id,deprecated_id:n.deprecated_id}));case 4:case"end":return t.stop()}}),t)}))),function(t){return s.apply(this,arguments)})}])&&y(e.prototype,n),a&&y(e,a),t}(),b=n(311),w=n.n(b),x=n(23);function $(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function E(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){$(o,i,r,a,s,"next",t)}function s(t){$(o,i,r,a,s,"throw",t)}a(void 0)}))}}function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var L=n(70),C={online:_,offline:function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,a,s,u,l,c,h,d,p,f,g,v;return e=t,(n=[{key:"start",value:(v=E(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._loadSessions();case 2:return t.abrupt("return",this._chooseSession());case 3:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"canSave",value:function(){return!0}},{key:"save",value:(g=E(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w()(e,(function(t){L.emit("EnketoForm.savingProgress",t)}));case 2:return e=t.sent,t.t0=o.a,t.next=6,x.default.update(e.data);case 6:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 8:case"end":return t.stop()}}),t)}))),function(t){return g.apply(this,arguments)})},{key:"finalize",value:(f=E(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.a.has("instant_submit")){t.next=4;break}return t.next=3,m(e);case 3:return t.abrupt("return",t.sent);case 4:return t.next=6,this.save(e.setData({draft:!1}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"attachmentUrl",value:(p=E(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",x.default.getAttachment(e.data._id,n).then((function(t){return URL.createObjectURL(t)})));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return p.apply(this,arguments)})},{key:"_loadSessions",value:(d=E(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.all();case 2:this.sessions=t.sent,e=this.sessions.filter((function(t){return t.draft})).reverse(),L.emit("SessionModal.updateSessions",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"_chooseSession",value:(h=E(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.a.has("session")){t.next=2;break}return t.abrupt("return",this._startFromName(i.a.get("session")));case 2:return t.abrupt("return",this._sessionFromUi());case 3:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"_sessionFromUi",value:(c=E(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L.emit("SessionModal.activate"),t.abrupt("return",new Promise((function(t){L.once("Session.create",(function(n){t(e._createDistinctFromName(n))})),L.on("Session.delete",function(){var t=E(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.remove(n);case 2:return t.next=4,e._loadSessions();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),L.on("Session.select",(function(e){t(new o.a(e))}))})));case 2:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"_startFromName",value:(l=E(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this.sessions.find((function(t){return t.name==e})))){t.next=3;break}return t.abrupt("return",new o.a(n));case 3:return t.abrupt("return",this._createFromName(e));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"_create",value:(u=E(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new o.a(e),t.next=3,x.default.create(n.data);case 3:return i=t.sent,t.abrupt("return",new o.a(i));case 5:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)})},{key:"_createFromName",value:(s=E(regeneratorRuntime.mark((function t(e){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},i.a.has("session_extra")&&(n=JSON.parse(i.a.get("session_extra"))),t.abrupt("return",this._create({name:e,payload:n}));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"_createDistinctFromName",value:(a=E(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.sessions.find((function(t){return t.name==e}))&&(n=new Date,e="".concat(e," ").concat(n.getHours(),":").concat(n.getMinutes())),t.abrupt("return",this._createFromName(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})}])&&k(e.prototype,n),r&&k(e,r),t}()},T=function(){var t=i.a.get("mode");return new(0,C[t||"offline"])};function S(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function D(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){S(o,i,r,a,s,"next",t)}function s(t){S(o,i,r,a,s,"throw",t)}a(void 0)}))}}function M(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.driver=T()}var e,n,i,r,o,a,s;return e=t,(n=[{key:"start",value:(s=D(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.driver.start();case 2:this.session=t.sent;case 3:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"attachmentUrl",value:(a=D(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.driver.attachmentUrl(this.session,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"finalize",value:(o=D(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.save(e);case 2:return t.next=4,this.driver.finalize(this.session);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"save",value:(r=D(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.session.putEnketoForm(e),this.driver.canSave()){t.next=3;break}return t.abrupt("return",Promise.resolve(!0));case 3:return t.next=5,this.driver.save(this.session);case 5:this.session=t.sent;case 6:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}])&&M(e.prototype,n),i&&M(e,i),t}();e.a=new A},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(3);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(n,!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=a({xml:null,online:!1,draft:!0,payload:{},_attachments:{},submitted:!1,instance_id:null,deprecated_id:null,last_update:Date.now()},e),e.hasOwnProperty("payload")||this._setPayloadFromUrl()}var e,n,o;return e=t,(n=[{key:"setData",value:function(t){return this.data=a({},this.data,{},t,{last_update:Date.now()}),this}},{key:"_setPayloadFromUrl",value:function(){try{var t=i.a.get("session_extra");this.setData({payload:JSON.parse(t)})}catch(t){console.error(t)}}},{key:"putEnketoForm",value:function(t){this.setData({xml:t.xml,instance_id:t.instance_id,deprecated_id:t.deprecated_id,current_page:t.current_page,_attachments:this._getFiles(t.files)})}},{key:"toFormInstance",value:function(){return{instanceStr:this.data.xml,submitted:this.data.submitted}}},{key:"isOnline",value:function(){return this.data.online}},{key:"_getFiles",value:function(t){var e=this;if(!t||"object"!==r(t))return this.data._attachments;var n={};return t.forEach((function(t){e._isFileStub(t)?e._attachmentExists(t)&&(n[t]=a({},e.data._attachments[t],{stub:!0})):n[t.name]={data:t,content_type:t.type}})),n}},{key:"_isFileStub",value:function(t){return"string"==typeof t}},{key:"_attachmentExists",value:function(t){return this.data.hasOwnProperty("_attachments")&&this.data._attachments.hasOwnProperty(t)}}])&&u(e.prototype,n),o&&u(e,o),t}()},,,,,,function(t,e,n){var i;void 0===(i=function(){"use strict";return[]}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){"use strict";return function(t){return null!=t&&t===t.window}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){"use strict";var t=/^-ms-/,e=/-([a-z])/g;function n(t,e){return e.toUpperCase()}return function(i){return i.replace(t,"ms-").replace(e,n)}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2),n(89),n(27),n(51),n(9),n(88),n(92),n(90),n(131),n(122),n(132),n(123),n(133),n(93),n(17),n(118),n(11)],void 0===(r=function(t,e,n,i,r,o,a,s,u,l,c,h,d,p){"use strict";var f=/^(none|table(?!-c[ea]).+)/,m=/^--/,g={position:"absolute",visibility:"hidden",display:"block"},v={letterSpacing:"0",fontWeight:"400"},y=["Webkit","Moz","ms"],_=r.createElement("div").style;function b(e){var n=t.cssProps[e];return n||(n=t.cssProps[e]=function(t){if(t in _)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=y.length;n--;)if((t=y[n]+e)in _)return t}(e)||e),n}function w(t,e,n){var i=o.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function x(e,n,i,r,o,a){var u="width"===n?1:0,l=0,c=0;if(i===(r?"border":"content"))return 0;for(;u<4;u+=2)"margin"===i&&(c+=t.css(e,i+s[u],!0,o)),r?("content"===i&&(c-=t.css(e,"padding"+s[u],!0,o)),"margin"!==i&&(c-=t.css(e,"border"+s[u]+"Width",!0,o))):(c+=t.css(e,"padding"+s[u],!0,o),"padding"!==i?c+=t.css(e,"border"+s[u]+"Width",!0,o):l+=t.css(e,"border"+s[u]+"Width",!0,o));return!r&&a>=0&&(c+=Math.max(0,Math.ceil(e["offset"+n[0].toUpperCase()+n.slice(1)]-a-c-l-.5))),c}function $(e,n,i){var r=u(e),o=c(e,n,r),s="border-box"===t.css(e,"boxSizing",!1,r),l=s;if(a.test(o)){if(!i)return o;o="auto"}return l=l&&(p.boxSizingReliable()||o===e.style[n]),("auto"===o||!parseFloat(o)&&"inline"===t.css(e,"display",!1,r))&&(o=e["offset"+n[0].toUpperCase()+n.slice(1)],l=!0),(o=parseFloat(o)||0)+x(e,n,i||(s?"border":"content"),l,r,o)+"px"}return t.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=c(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,n,r,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,u,l,c=i(n),d=m.test(n),f=e.style;if(d||(n=b(c)),l=t.cssHooks[n]||t.cssHooks[c],void 0===r)return l&&"get"in l&&void 0!==(s=l.get(e,!1,a))?s:f[n];"string"===(u=typeof r)&&(s=o.exec(r))&&s[1]&&(r=h(e,n,s),u="number"),null!=r&&r==r&&("number"===u&&(r+=s&&s[3]||(t.cssNumber[c]?"":"px")),p.clearCloneStyle||""!==r||0!==n.indexOf("background")||(f[n]="inherit"),l&&"set"in l&&void 0===(r=l.set(e,r,a))||(d?f.setProperty(n,r):f[n]=r))}},css:function(e,n,r,o){var a,s,u,l=i(n);return m.test(n)||(n=b(l)),(u=t.cssHooks[n]||t.cssHooks[l])&&"get"in u&&(a=u.get(e,!0,r)),void 0===a&&(a=c(e,n,o)),"normal"===a&&n in v&&(a=v[n]),""===r||r?(s=parseFloat(a),!0===r||isFinite(s)?s||0:a):a}}),t.each(["height","width"],(function(e,n){t.cssHooks[n]={get:function(e,i,r){if(i)return!f.test(t.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?$(e,n,r):l(e,g,(function(){return $(e,n,r)}))},set:function(e,i,r){var a,s=u(e),l="border-box"===t.css(e,"boxSizing",!1,s),c=r&&x(e,n,r,l,s);return l&&p.scrollboxSize()===s.position&&(c-=Math.ceil(e["offset"+n[0].toUpperCase()+n.slice(1)]-parseFloat(s[n])-x(e,n,"border",!1,s)-.5)),c&&(a=o.exec(i))&&"px"!==(a[3]||"px")&&(e.style[n]=i,i=t.css(e,n)),w(0,i,c)}}})),t.cssHooks.marginLeft=d(p.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(c(t,"marginLeft"))||t.getBoundingClientRect().left-l(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),t.each({margin:"",padding:"",border:"Width"},(function(e,n){t.cssHooks[e+n]={expand:function(t){for(var i=0,r={},o="string"==typeof t?t.split(" "):[t];i<4;i++)r[e+s[i]+n]=o[i]||o[i-2]||o[0];return r}},"margin"!==e&&(t.cssHooks[e+n].set=w)})),t.fn.extend({css:function(e,i){return n(this,(function(e,n,i){var r,o,a={},s=0;if(Array.isArray(n)){for(r=u(e),o=n.length;s<o;s++)a[n[s]]=t.css(e,n[s],!1,r);return a}return void 0!==i?t.style(e,n,i):t.css(e,n)}),e,i,arguments.length>1)}}),t}.apply(e,i))||(t.exports=r)},,,,,function(t,e,n){var i,r;n(236),i=[n(0)],void 0===(r=function(t){return function(){var e,n,i,r=0,o="error",a="info",s="success",u="warning",l={clear:function(n,i){var r=f();e||c(r),h(n,r,i)||function(n){for(var i=e.children(),r=i.length-1;r>=0;r--)h(t(i[r]),n)}(r)},remove:function(n){var i=f();e||c(i),n&&0===t(":focus",n).length?m(n):e.children().length&&e.remove()},error:function(t,e,n){return p({type:o,iconClass:f().iconClasses.error,message:t,optionsOverride:n,title:e})},getContainer:c,info:function(t,e,n){return p({type:a,iconClass:f().iconClasses.info,message:t,optionsOverride:n,title:e})},options:{},subscribe:function(t){n=t},success:function(t,e,n){return p({type:s,iconClass:f().iconClasses.success,message:t,optionsOverride:n,title:e})},version:"2.1.4",warning:function(t,e,n){return p({type:u,iconClass:f().iconClasses.warning,message:t,optionsOverride:n,title:e})}};return l;function c(n,i){return n||(n=f()),(e=t("#"+n.containerId)).length?e:(i&&(e=function(n){return(e=t("<div/>").attr("id",n.containerId).addClass(n.positionClass)).appendTo(t(n.target)),e}(n)),e)}function h(e,n,i){var r=!(!i||!i.force)&&i.force;return!(!e||!r&&0!==t(":focus",e).length||(e[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){m(e)}}),0))}function d(t){n&&n(t)}function p(n){var o=f(),a=n.iconClass||o.iconClass;if(void 0!==n.optionsOverride&&(o=t.extend(o,n.optionsOverride),a=n.optionsOverride.iconClass||a),!function(t,e){if(t.preventDuplicates){if(e.message===i)return!0;i=e.message}return!1}(o,n)){r++,e=c(o,!0);var s=null,u=t("<div/>"),l=t("<div/>"),h=t("<div/>"),p=t("<div/>"),g=t(o.closeHtml),v={intervalId:null,hideEta:null,maxHideTime:null},y={toastId:r,state:"visible",startTime:new Date,options:o,map:n};return n.iconClass&&u.addClass(o.toastClass).addClass(a),function(){if(n.title){var t=n.title;o.escapeHtml&&(t=_(n.title)),l.append(t).addClass(o.titleClass),u.append(l)}}(),function(){if(n.message){var t=n.message;o.escapeHtml&&(t=_(n.message)),h.append(t).addClass(o.messageClass),u.append(h)}}(),o.closeButton&&(g.addClass(o.closeClass).attr("role","button"),u.prepend(g)),o.progressBar&&(p.addClass(o.progressClass),u.prepend(p)),o.rtl&&u.addClass("rtl"),o.newestOnTop?e.prepend(u):e.append(u),function(){var t="";switch(n.iconClass){case"toast-success":case"toast-info":t="polite";break;default:t="assertive"}u.attr("aria-live",t)}(),u.hide(),u[o.showMethod]({duration:o.showDuration,easing:o.showEasing,complete:o.onShown}),o.timeOut>0&&(s=setTimeout(b,o.timeOut),v.maxHideTime=parseFloat(o.timeOut),v.hideEta=(new Date).getTime()+v.maxHideTime,o.progressBar&&(v.intervalId=setInterval($,10))),o.closeOnHover&&u.hover(x,w),!o.onclick&&o.tapToDismiss&&u.click(b),o.closeButton&&g&&g.click((function(t){t.stopPropagation?t.stopPropagation():void 0!==t.cancelBubble&&!0!==t.cancelBubble&&(t.cancelBubble=!0),o.onCloseClick&&o.onCloseClick(t),b(!0)})),o.onclick&&u.click((function(t){o.onclick(t),b()})),d(y),o.debug&&console&&console.log(y),u}function _(t){return null==t&&(t=""),t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(e){var n=e&&!1!==o.closeMethod?o.closeMethod:o.hideMethod,i=e&&!1!==o.closeDuration?o.closeDuration:o.hideDuration,r=e&&!1!==o.closeEasing?o.closeEasing:o.hideEasing;if(!t(":focus",u).length||e)return clearTimeout(v.intervalId),u[n]({duration:i,easing:r,complete:function(){m(u),clearTimeout(s),o.onHidden&&"hidden"!==y.state&&o.onHidden(),y.state="hidden",y.endTime=new Date,d(y)}})}function w(){(o.timeOut>0||o.extendedTimeOut>0)&&(s=setTimeout(b,o.extendedTimeOut),v.maxHideTime=parseFloat(o.extendedTimeOut),v.hideEta=(new Date).getTime()+v.maxHideTime)}function x(){clearTimeout(s),v.hideEta=0,u.stop(!0,!0)[o.showMethod]({duration:o.showDuration,easing:o.showEasing})}function $(){var t=(v.hideEta-(new Date).getTime())/v.maxHideTime*100;p.width(t+"%")}}function f(){return t.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},l.options)}function m(t){e||(e=c()),t.is(":visible")||(t.remove(),t=null,0===e.children().length&&(e.remove(),i=void 0))}}()}.apply(e,i))||(t.exports=r)},,,function(t,e,n){var i,r;i=[n(49)],void 0===(r=function(t){"use strict";return t.slice}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";return{}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2),n(110),n(7),n(111),n(27),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(208),n(19),n(120),n(85),n(114),n(26),n(17),n(33),n(11),n(35)],void 0===(r=function(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,m,g,v){"use strict";var y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,_=/<script|<style|<link/i,b=/checked\s*(?:[^=]|=\s*.checked.)/i,w=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function x(e,n){return v(e,"table")&&v(11!==n.nodeType?n:n.firstChild,"tr")&&t(e).children("tbody")[0]||e}function $(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function E(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function k(e,n){var i,r,o,a,s,u,l,c;if(1===n.nodeType){if(p.hasData(e)&&(a=p.access(e),s=p.set(n,a),c=a.events))for(o in delete s.handle,s.events={},c)for(i=0,r=c[o].length;i<r;i++)t.event.add(n,o,c[o][i]);f.hasData(e)&&(u=f.access(e),l=t.extend({},u),f.set(n,l))}}function L(t,e){var n=e.nodeName.toLowerCase();"input"===n&&o.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function C(i,r,o,a){r=e.apply([],r);var u,c,f,m,v,y,_=0,x=i.length,k=x-1,L=r[0],T=n(L);if(T||x>1&&"string"==typeof L&&!d.checkClone&&b.test(L))return i.each((function(t){var e=i.eq(t);T&&(r[0]=L.call(this,t,e.html())),C(e,r,o,a)}));if(x&&(c=(u=h(r,i[0].ownerDocument,!1,i,a)).firstChild,1===u.childNodes.length&&(u=c),c||a)){for(m=(f=t.map(l(u,"script"),$)).length;_<x;_++)v=u,_!==k&&(v=t.clone(v,!0,!0),m&&t.merge(f,l(v,"script"))),o.call(i[_],v,_);if(m)for(y=f[f.length-1].ownerDocument,t.map(f,E),_=0;_<m;_++)v=f[_],s.test(v.type||"")&&!p.access(v,"globalEval")&&t.contains(y,v)&&(v.src&&"module"!==(v.type||"").toLowerCase()?t._evalUrl&&t._evalUrl(v.src):g(v.textContent.replace(w,""),y,v))}return i}function T(e,n,i){for(var r,o=n?t.filter(n,e):e,a=0;null!=(r=o[a]);a++)i||1!==r.nodeType||t.cleanData(l(r)),r.parentNode&&(i&&t.contains(r.ownerDocument,r)&&c(l(r,"script")),r.parentNode.removeChild(r));return e}return t.extend({htmlPrefilter:function(t){return t.replace(y,"<$1></$2>")},clone:function(e,n,i){var r,o,a,s,u=e.cloneNode(!0),h=t.contains(e.ownerDocument,e);if(!(d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||t.isXMLDoc(e)))for(s=l(u),r=0,o=(a=l(e)).length;r<o;r++)L(a[r],s[r]);if(n)if(i)for(a=a||l(e),s=s||l(u),r=0,o=a.length;r<o;r++)k(a[r],s[r]);else k(e,u);return(s=l(u,"script")).length>0&&c(s,!h&&l(e,"script")),u},cleanData:function(e){for(var n,i,r,o=t.event.special,a=0;void 0!==(i=e[a]);a++)if(m(i)){if(n=i[p.expando]){if(n.events)for(r in n.events)o[r]?t.event.remove(i,r):t.removeEvent(i,r,n.handle);i[p.expando]=void 0}i[f.expando]&&(i[f.expando]=void 0)}}}),t.fn.extend({detach:function(t){return T(this,t,!0)},remove:function(t){return T(this,t)},text:function(e){return r(this,(function(e){return void 0===e?t.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return C(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||x(this,t).appendChild(t)}))},prepend:function(){return C(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=x(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return C(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return C(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var e,n=0;null!=(e=this[n]);n++)1===e.nodeType&&(t.cleanData(l(e,!1)),e.textContent="");return this},clone:function(e,n){return e=null!=e&&e,n=null==n?e:n,this.map((function(){return t.clone(this,e,n)}))},html:function(e){return r(this,(function(e){var n=this[0]||{},i=0,r=this.length;if(void 0===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof e&&!_.test(e)&&!u[(a.exec(e)||["",""])[1].toLowerCase()]){e=t.htmlPrefilter(e);try{for(;i<r;i++)1===(n=this[i]||{}).nodeType&&(t.cleanData(l(n,!1)),n.innerHTML=e);n=0}catch(t){}}n&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return C(this,arguments,(function(n){var i=this.parentNode;t.inArray(this,e)<0&&(t.cleanData(l(this)),i&&i.replaceChild(n,this))}),e)}}),t.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,n){t.fn[e]=function(e){for(var r,o=[],a=t(e),s=a.length-1,u=0;u<=s;u++)r=u===s?this:this.clone(!0),t(a[u])[n](r),i.apply(o,r.get());return this.pushStack(o)}})),t}.apply(e,i))||(t.exports=r)},function(t,e,n){n(237),t.exports=angular},function(t,e,n){"use strict";var i=n(66),r=n.n(i);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"get",value:function(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""}}])&&o(e.prototype,n),i&&o(e,i),t}()),s=n(3),u=n(23);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){c(o,i,r,a,s,"next",t)}function s(t){c(o,i,r,a,s,"throw",t)}a(void 0)}))}}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return f}));var p=null,f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._configureAxios()}var e,n,i,o,c,f;return e=t,n=[{key:"_configureAxios",value:function(){var t=this._detectAuthToken();null!==t&&(r.a.defaults.headers.common.Authorization="Bearer "+t)}},{key:"_detectAuthToken",value:function(){return s.a.has("auth")?s.a.get("auth"):a.get("enketo_token")?a.get("enketo_token"):null}},{key:"json",value:(f=h(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.get(e);case 2:return n=t.sent,i=n.data,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)}))),function(t){return f.apply(this,arguments)})},{key:"getFileBlob",value:(c=h(regeneratorRuntime.mark((function t(e,n,i){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.data||i.stub){t.next=2;break}return t.abrupt("return",{file:n,blob:i.data});case 2:return t.next=4,u.default.getAttachment(e,n);case 4:return r=t.sent,t.abrupt("return",{file:n,blob:r});case 6:case"end":return t.stop()}}),t)}))),function(t,e,n){return c.apply(this,arguments)})},{key:"getFileBlobs",value:function(t,e){var n=this;return Object.keys(e).map((function(i){return n.getFileBlob(t,i,e[i])}))}},{key:"postForm",value:(o=h(regeneratorRuntime.mark((function t(e){var n,i,o,a,u,c,h=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:null,(i=new FormData).append("Date",(new Date).toUTCString()),i.append("xml_submission_file",new Blob([e.data.xml])),"object"===l(e.data.payload)&&i.append("Payload",JSON.stringify(e.data.payload)),"object"!==l(e.data._attachments)){t.next=10;break}return t.next=8,Promise.all(this.getFileBlobs(e.data._id,e.data._attachments));case 8:t.sent.forEach((function(t){var e=t.file,n=t.blob;return i.append(e,n,e)}));case 10:return o=s.a.getPath("submit"),a={headers:this._headersForSession(e)},n&&(a.onUploadProgress=function(t){return n(t.total>0?t.loaded/t.total:0)}),t.next=15,r.a.post(o,i,a);case 15:return u=t.sent,c=u.data,t.abrupt("return",c);case 18:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"_headersForSession",value:function(t){return{"Content-Type":"multipart/form-data","X-OpenRosa-Version":"1.0","X-OpenRosa-Instance-Id":t.data.instance_id,"X-OpenRosa-Deprecated-Id":t.data.deprecated_id}}}],i=[{key:"create",value:function(){return p||(p=t.newInstance()),p}},{key:"newInstance",value:function(){return new t}}],n&&d(e.prototype,n),i&&d(e,i),t}()},function(t,e,n){"use strict";(function(t){n(520);var i=n(310),r=n(162),o=n(269),a=n(3),s=n(38);function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){h(o,i,r,a,s,"next",t)}function s(t){h(o,i,r,a,s,"throw",t)}a(void 0)}))}}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=n(70),m=function(t){return t?function(t){}:function(t){return f.emit(t)}},g=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,h,g,v,y,_,b,w,x;return n=e,(h=[{key:"init",value:(x=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.saving=!1,this.validating=!1,a.a.has("lang")&&i18n.set(a.a.get("lang")),t.next=5,o.a.loadAndAttach();case 5:return t.next=7,s.a.start();case 7:this._newFormInstance(),this._initFormInstance(),f.emit("EnketoForm.initialized");case 10:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)})},{key:"_newFormInstance",value:function(){this.form=new r.a("form.or:eq(0)",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({modelStr:o.a.survey.model},s.a.session.toFormInstance()),{language:i18n.get("lang")})}},{key:"_initFormInstance",value:function(){var t=this.form.init();if(t.length)throw console.error(t),new Error("The form could not be initialized");setTimeout(this._restoreLastPage.bind(this),50)}},{key:"save",value:(w=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.saving){t.next=2;break}return t.abrupt("return",null);case 2:return this.saving=!0,f.emit("EnketoForm.saving"),t.prev=4,t.next=7,this._saveSession();case 7:t.next=14;break;case 9:throw t.prev=9,t.t0=t.catch(4),this.saving=!1,f.emit("EnketoForm.saveFailed"),t.t0;case 14:this.saving=!1,f.emit("EnketoForm.saveSucceded");case 16:case"end":return t.stop()}}),t,this,[[4,9]])}))),function(){return w.apply(this,arguments)})},{key:"_saveSession",value:(b=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s.a,t.next=3,this._form();case 3:return t.t1=t.sent,t.next=6,t.t0.save.call(t.t0,t.t1);case 6:case"end":return t.stop()}}),t,this)}))),function(){return b.apply(this,arguments)})},{key:"_form",value:(_=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.form.getDataStr(),t.next=3,this._formFiles();case 3:return t.t1=t.sent,t.t2=this._getCurrentPage(),t.t3=this.form.instanceID,t.t4=this.form.deprecatedID,t.abrupt("return",{xml:t.t0,files:t.t1,current_page:t.t2,instance_id:t.t3,deprecated_id:t.t4});case 8:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"_getCurrentPage",value:function(){return u(this.form.pages.$activePages).indexOf(this.form.pages.$current[0])}},{key:"_restoreLastPage",value:function(){if(s.a.session.data.current_page&&!(s.a.session.data.current_page<=0)){var t=s.a.session.data.current_page,e=u(this.form.pages.$activePages);e[t]&&this.form.pages.flipTo(e[t])}}},{key:"_formFiles",value:function(){var e=i.a.getCurrentFiles();return t('form.or input[type="file"][data-loaded-file-name]').each((function(){e.push(t(this).data("loaded-file-name"))})),e}},{key:"_validateForm",value:function(){return a.a.has("novalidate")?Promise.resolve(!0):this.form.validate()}},{key:"validate",value:(y=d(regeneratorRuntime.mark((function t(){var e,n,i,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]&&r[0],!this.validating){t.next=3;break}return t.abrupt("return");case 3:return n=m(e),this.validating=!0,n("EnketoForm.validating"),t.next=8,this._validateForm();case 8:return i=t.sent,n(i?"EnketoForm.validationSucceeded":"EnketoForm.validationFailed"),this.validating=!1,t.abrupt("return",i);case 12:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"finishAndSubmit",value:(v=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.validate(!0);case 3:if(t.sent){t.next=5;break}throw new Error("Form cannot be submitted. Check validation errors!");case 5:return t.prev=5,t.t0=s.a,t.next=9,this._form();case 9:return t.t1=t.sent,t.next=12,t.t0.finalize.call(t.t0,t.t1);case 12:t.next=18;break;case 14:throw t.prev=14,t.t2=t.catch(5),f.emit("EnketoForm.submitFailed",t.t2),t.t2;case 18:if(!s.a.driver.canSave()||a.a.get("instant_submit")){t.next=20;break}return t.abrupt("return","Survey finished. It's ready to upload!");case 20:return t.abrupt("return","Submission completed. Thank you!");case 21:case"end":return t.stop()}}),t,this,[[5,14]])}))),function(){return v.apply(this,arguments)})}])&&p(n.prototype,h),g&&p(n,g),e}();e.a=new g}).call(this,n(0))},function(t,e,n){t.exports=n(239)},,,,function(t,e,n){var i=n(519);t.exports=new i},,,,,,,,,,,,function(t,e,n){var i,r;i=[n(49)],void 0===(r=function(t){"use strict";return t.indexOf}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(61)],void 0===(r=function(t){"use strict";return t.hasOwnProperty}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(32),n(7),n(21)],void 0===(r=function(t,e,n,i){"use strict";return t.Callbacks=function(r){r="string"==typeof r?function(e){var n={};return t.each(e.match(i)||[],(function(t,e){n[e]=!0})),n}(r):t.extend({},r);var o,a,s,u,l=[],c=[],h=-1,d=function(){for(u=u||r.once,s=o=!0;c.length;h=-1)for(a=c.shift();++h<l.length;)!1===l[h].apply(a[0],a[1])&&r.stopOnFalse&&(h=l.length,a=!1);r.memory||(a=!1),o=!1,u&&(l=a?[]:"")},p={add:function(){return l&&(a&&!o&&(h=l.length-1,c.push(a)),function i(o){t.each(o,(function(t,o){n(o)?r.unique&&p.has(o)||l.push(o):o&&o.length&&"string"!==e(o)&&i(o)}))}(arguments),a&&!o&&d()),this},remove:function(){return t.each(arguments,(function(e,n){for(var i;(i=t.inArray(n,l,i))>-1;)l.splice(i,1),i<=h&&h--})),this},has:function(e){return e?t.inArray(e,l)>-1:l.length>0},empty:function(){return l&&(l=[]),this},disable:function(){return u=c=[],l=a="",this},disabled:function(){return!l},lock:function(){return u=c=[],a||o||(l=a=""),this},locked:function(){return!!u},fireWith:function(t,e){return u||(e=[t,(e=e||[]).slice?e.slice():e],c.push(e),o||d()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!s}};return p},t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";return function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2),n(19),n(34),n(84)],void 0===(r=function(t,e){"use strict";return t.extend({queue:function(n,i,r){var o;if(n)return i=(i||"fx")+"queue",o=e.get(n,i),r&&(!o||Array.isArray(r)?o=e.access(n,i,t.makeArray(r)):o.push(r)),o||[]},dequeue:function(e,n){n=n||"fx";var i=t.queue(e,n),r=i.length,o=i.shift(),a=t._queueHooks(e,n);"inprogress"===o&&(o=i.shift(),r--),o&&("fx"===n&&i.unshift("inprogress"),delete a.stop,o.call(e,(function(){t.dequeue(e,n)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(n,i){var r=i+"queueHooks";return e.get(n,r)||e.access(n,r,{empty:t.Callbacks("once memory").add((function(){e.remove(n,[i+"queue",r])}))})}}),t.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?t.queue(this[0],e):void 0===n?this:this.each((function(){var i=t.queue(this,e,n);t._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&t.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){t.dequeue(this,e)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(n,i){var r,o=1,a=t.Deferred(),s=this,u=this.length,l=function(){--o||a.resolveWith(s,[s])};for("string"!=typeof n&&(i=n,n=void 0),n=n||"fx";u--;)(r=e.get(s[u],n+"queueHooks"))&&r.empty&&(o++,r.empty.add(l));return l(),a.promise(i)}}),t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(51),n(9),n(7),n(88),n(21),n(90),n(121),n(122),n(123),n(19),n(207),n(17),n(86),n(34),n(33),n(62),n(52),n(210)],void 0===(r=function(t,e,n,i,r,o,a,s,u,l,c,h){"use strict";var d,p,f=/^(?:toggle|show|hide)$/,m=/queueHooks$/;function g(){p&&(!1===n.hidden&&window.requestAnimationFrame?window.requestAnimationFrame(g):window.setTimeout(g,t.fx.interval),t.fx.tick())}function v(){return window.setTimeout((function(){d=void 0})),d=Date.now()}function y(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=a[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function _(t,e,n){for(var i,r=(b.tweeners[e]||[]).concat(b.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function b(n,r,o){var a,s,u=0,l=b.prefilters.length,c=t.Deferred().always((function(){delete h.elem})),h=function(){if(s)return!1;for(var t=d||v(),e=Math.max(0,p.startTime+p.duration-t),i=1-(e/p.duration||0),r=0,o=p.tweens.length;r<o;r++)p.tweens[r].run(i);return c.notifyWith(n,[p,i,e]),i<1&&o?e:(o||c.notifyWith(n,[p,1,0]),c.resolveWith(n,[p]),!1)},p=c.promise({elem:n,props:t.extend({},r),opts:t.extend(!0,{specialEasing:{},easing:t.easing._default},o),originalProperties:r,originalOptions:o,startTime:d||v(),duration:o.duration,tweens:[],createTween:function(e,i){var r=t.Tween(n,p.opts,e,i,p.opts.specialEasing[e]||p.opts.easing);return p.tweens.push(r),r},stop:function(t){var e=0,i=t?p.tweens.length:0;if(s)return this;for(s=!0;e<i;e++)p.tweens[e].run(1);return t?(c.notifyWith(n,[p,1,0]),c.resolveWith(n,[p,t])):c.rejectWith(n,[p,t]),this}}),f=p.props;for(!function(n,i){var r,o,a,s,u;for(r in n)if(a=i[o=e(r)],s=n[r],Array.isArray(s)&&(a=s[1],s=n[r]=s[0]),r!==o&&(n[o]=s,delete n[r]),(u=t.cssHooks[o])&&"expand"in u)for(r in s=u.expand(s),delete n[o],s)r in n||(n[r]=s[r],i[r]=a);else i[o]=a}(f,p.opts.specialEasing);u<l;u++)if(a=b.prefilters[u].call(p,n,f,p.opts))return i(a.stop)&&(t._queueHooks(p.elem,p.opts.queue).stop=a.stop.bind(a)),a;return t.map(f,_,p),i(p.opts.start)&&p.opts.start.call(n,p),p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always),t.fx.timer(t.extend(h,{elem:n,anim:p,queue:p.opts.queue})),p}return t.Animation=t.extend(b,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return l(n.elem,t,r.exec(e),n),n}]},tweener:function(t,e){i(t)?(e=t,t=["*"]):t=t.match(o);for(var n,r=0,a=t.length;r<a;r++)n=t[r],b.tweeners[n]=b.tweeners[n]||[],b.tweeners[n].unshift(e)},prefilters:[function(e,n,i){var r,o,a,u,l,d,p,m,g="width"in n||"height"in n,v=this,y={},b=e.style,w=e.nodeType&&s(e),x=c.get(e,"fxshow");for(r in i.queue||(null==(u=t._queueHooks(e,"fx")).unqueued&&(u.unqueued=0,l=u.empty.fire,u.empty.fire=function(){u.unqueued||l()}),u.unqueued++,v.always((function(){v.always((function(){u.unqueued--,t.queue(e,"fx").length||u.empty.fire()}))}))),n)if(o=n[r],f.test(o)){if(delete n[r],a=a||"toggle"===o,o===(w?"hide":"show")){if("show"!==o||!x||void 0===x[r])continue;w=!0}y[r]=x&&x[r]||t.style(e,r)}if((d=!t.isEmptyObject(n))||!t.isEmptyObject(y))for(r in g&&1===e.nodeType&&(i.overflow=[b.overflow,b.overflowX,b.overflowY],null==(p=x&&x.display)&&(p=c.get(e,"display")),"none"===(m=t.css(e,"display"))&&(p?m=p:(h([e],!0),p=e.style.display||p,m=t.css(e,"display"),h([e]))),("inline"===m||"inline-block"===m&&null!=p)&&"none"===t.css(e,"float")&&(d||(v.done((function(){b.display=p})),null==p&&(m=b.display,p="none"===m?"":m)),b.display="inline-block")),i.overflow&&(b.overflow="hidden",v.always((function(){b.overflow=i.overflow[0],b.overflowX=i.overflow[1],b.overflowY=i.overflow[2]}))),d=!1,y)d||(x?"hidden"in x&&(w=x.hidden):x=c.access(e,"fxshow",{display:p}),a&&(x.hidden=!w),w&&h([e],!0),v.done((function(){for(r in w||h([e]),c.remove(e,"fxshow"),y)t.style(e,r,y[r])}))),d=_(w?x[r]:0,r,v),r in x||(x[r]=d.start,w&&(d.end=d.start,d.start=0))}],prefilter:function(t,e){e?b.prefilters.unshift(t):b.prefilters.push(t)}}),t.speed=function(e,n,r){var o=e&&"object"==typeof e?t.extend({},e):{complete:r||!r&&n||i(e)&&e,duration:e,easing:r&&n||n&&!i(n)&&n};return t.fx.off?o.duration=0:"number"!=typeof o.duration&&(o.duration in t.fx.speeds?o.duration=t.fx.speeds[o.duration]:o.duration=t.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){i(o.old)&&o.old.call(this),o.queue&&t.dequeue(this,o.queue)},o},t.fn.extend({fadeTo:function(t,e,n,i){return this.filter(s).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,n,i,r){var o=t.isEmptyObject(e),a=t.speed(n,i,r),s=function(){var n=b(this,t.extend({},e),a);(o||c.get(this,"finish"))&&n.stop(!0)};return s.finish=s,o||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,n,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof e&&(i=n,n=e,e=void 0),n&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var n=!0,o=null!=e&&e+"queueHooks",a=t.timers,s=c.get(this);if(o)s[o]&&s[o].stop&&r(s[o]);else for(o in s)s[o]&&s[o].stop&&m.test(o)&&r(s[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(i),n=!1,a.splice(o,1));!n&&i||t.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var n,i=c.get(this),r=i[e+"queue"],o=i[e+"queueHooks"],a=t.timers,s=r?r.length:0;for(i.finish=!0,t.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),n=a.length;n--;)a[n].elem===this&&a[n].queue===e&&(a[n].anim.stop(!0),a.splice(n,1));for(n=0;n<s;n++)r[n]&&r[n].finish&&r[n].finish.call(this);delete i.finish}))}}),t.each(["toggle","show","hide"],(function(e,n){var i=t.fn[n];t.fn[n]=function(t,e,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(y(n,!0),t,e,r)}})),t.each({slideDown:y("show"),slideUp:y("hide"),slideToggle:y("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,n){t.fn[e]=function(t,e,i){return this.animate(n,t,e,i)}})),t.timers=[],t.fx.tick=function(){var e,n=0,i=t.timers;for(d=Date.now();n<i.length;n++)(e=i[n])()||i[n]!==e||i.splice(n--,1);i.length||t.fx.stop(),d=void 0},t.fx.timer=function(e){t.timers.push(e),t.fx.start()},t.fx.interval=13,t.fx.start=function(){p||(p=!0,g())},t.fx.stop=function(){p=null},t.fx.speeds={slow:600,fast:200,_default:400},t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(89)],void 0===(r=function(t){"use strict";return new RegExp("^(?:([+-])=|)("+t+")([a-z%]*)$","i")}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";return/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){"use strict";return["Top","Right","Bottom","Left"]}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(9)],void 0===(r=function(t){"use strict";return t.documentElement}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(89)],void 0===(r=function(t){"use strict";return new RegExp("^("+t+")(?!px)[a-z%]+$","i")}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(9),n(91),n(25)],void 0===(r=function(t,e,n,i){"use strict";return function(){function r(){if(d){h.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",n.appendChild(h).appendChild(d);var t=window.getComputedStyle(d);a="1%"!==t.top,c=12===o(t.marginLeft),d.style.right="60%",l=36===o(t.right),s=36===o(t.width),d.style.position="absolute",u=36===d.offsetWidth||"absolute",n.removeChild(h),d=null}}function o(t){return Math.round(parseFloat(t))}var a,s,u,l,c,h=e.createElement("div"),d=e.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===d.style.backgroundClip,t.extend(i,{boxSizingReliable:function(){return r(),s},pixelBoxStyles:function(){return r(),l},pixelPosition:function(){return r(),a},reliableMarginLeft:function(){return r(),c},scrollboxSize:function(){return r(),u}}))}(),i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(9),n(25)],void 0===(r=function(t,e){"use strict";var n,i;return n=t.createElement("input"),i=t.createElement("select").appendChild(t.createElement("option")),n.type="checkbox",e.checkOn=""!==n.value,e.optSelected=i.selected,(n=t.createElement("input")).value="t",n.type="radio",e.radioValue="t"===n.value,e}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(21)],void 0===(r=function(t){"use strict";return function(e){return(e.match(t)||[]).join(" ")}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(9),n(19),n(85),n(83),n(7),n(50),n(35)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";var s=/^(?:focusinfocus|focusoutblur)$/,u=function(t){t.stopPropagation()};return t.extend(t.event,{trigger:function(l,c,h,d){var p,f,m,g,v,y,_,b,w=[h||e],x=r.call(l,"type")?l.type:l,$=r.call(l,"namespace")?l.namespace.split("."):[];if(f=b=m=h=h||e,3!==h.nodeType&&8!==h.nodeType&&!s.test(x+t.event.triggered)&&(x.indexOf(".")>-1&&($=x.split("."),x=$.shift(),$.sort()),v=x.indexOf(":")<0&&"on"+x,(l=l[t.expando]?l:new t.Event(x,"object"==typeof l&&l)).isTrigger=d?2:3,l.namespace=$.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+$.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=h),c=null==c?[l]:t.makeArray(c,[l]),_=t.event.special[x]||{},d||!_.trigger||!1!==_.trigger.apply(h,c))){if(!d&&!_.noBubble&&!a(h)){for(g=_.delegateType||x,s.test(g+x)||(f=f.parentNode);f;f=f.parentNode)w.push(f),m=f;m===(h.ownerDocument||e)&&w.push(m.defaultView||m.parentWindow||window)}for(p=0;(f=w[p++])&&!l.isPropagationStopped();)b=f,l.type=p>1?g:_.bindType||x,(y=(n.get(f,"events")||{})[l.type]&&n.get(f,"handle"))&&y.apply(f,c),(y=v&&f[v])&&y.apply&&i(f)&&(l.result=y.apply(f,c),!1===l.result&&l.preventDefault());return l.type=x,d||l.isDefaultPrevented()||_._default&&!1!==_._default.apply(w.pop(),c)||!i(h)||v&&o(h[x])&&!a(h)&&((m=h[v])&&(h[v]=null),t.event.triggered=x,l.isPropagationStopped()&&b.addEventListener(x,u),h[x](),l.isPropagationStopped()&&b.removeEventListener(x,u),t.event.triggered=void 0,m&&(h[v]=m)),l.result}},simulate:function(e,n,i){var r=t.extend(new t.Event,i,{type:e,isSimulated:!0});t.event.trigger(r,null,n)}}),t.fn.extend({trigger:function(e,n){return this.each((function(){t.event.trigger(e,n,this)}))},triggerHandler:function(e,n){var i=this[0];if(i)return t.event.trigger(e,n,i,!0)}}),t}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";(function(e){var i=n(14),r=n(242),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,u={adapter:("undefined"!=typeof XMLHttpRequest?s=n(139):void 0!==e&&(s=n(139)),s),transformRequest:[function(t,e){return r(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),i.forEach(["post","put","patch"],(function(t){u.headers[t]=i.merge(o)})),t.exports=u}).call(this,n(103))},function(t,e,n){"use strict";(function(e){function i(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var r=i(n(256)),o=i(n(257)),a=i(n(143)),s=n(258),u=i(n(259)),l=i(n(260)),c=i(n(263)),h=i(n(266)),d=i(n(267)),p="function"==typeof Promise?Promise:r;function f(t){if(t instanceof ArrayBuffer)return function(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),i=new Uint8Array(t);return n.set(i),e}(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}var m,g,v=Function.prototype.toString,y=v.call(Object);function _(t){var e,n,i;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,i=t.length;n<i;n++)e[n]=_(t[n]);return e}if(t instanceof Date)return t.toISOString();if(function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}(t))return f(t);if(!function(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&v.call(n)==y}(t))return t;for(n in e={},t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=_(t[n]);void 0!==r&&(e[n]=r)}return e}function b(t){var e=!1;return o((function(n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)}))}function w(t){return o((function(e){e=_(e);var n=this,i="function"==typeof e[e.length-1]&&e.pop(),r=new p((function(i,r){var o;try{var a=b((function(t,e){t?r(t):i(e)}));e.push(a),(o=t.apply(n,e))&&"function"==typeof o.then&&i(o)}catch(t){r(t)}}));return i&&r.then((function(t){i(null,t)}),i),r}))}function x(t,e){return w(o((function(n){if(this._closed)return p.reject(new Error("database is closed"));if(this._destroyed)return p.reject(new Error("database is destroyed"));var i=this;return function(t,e,n){if(t.constructor.listeners("debug").length){for(var i=["api",t.name,e],r=0;r<n.length-1;r++)i.push(n[r]);t.constructor.emit("debug",i);var o=n[n.length-1];n[n.length-1]=function(n,i){var r=["api",t.name,e];r=r.concat(n?["error",n]:["success",i]),t.constructor.emit("debug",r),o(n,i)}}}(i,t,n),this.taskqueue.isReady?e.apply(this,n):new p((function(e,r){i.taskqueue.addTask((function(o){o?r(o):e(i[t].apply(i,n))}))}))})))}function $(t){return"$"+t}function E(t){return t.substring(1)}function k(){this._store={}}function L(t){if(this._store=new k,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}function C(t,e){for(var n={},i=0,r=e.length;i<r;i++){var o=e[i];o in t&&(n[o]=t[o])}return n}k.prototype.get=function(t){var e=$(t);return this._store[e]},k.prototype.set=function(t,e){var n=$(t);return this._store[n]=e,!0},k.prototype.has=function(t){return $(t)in this._store},k.prototype.delete=function(t){var e=$(t),n=e in this._store;return delete this._store[e],n},k.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,i=e.length;n<i;n++){var r=e[n];t(this._store[r],r=E(r))}},Object.defineProperty(k.prototype,"size",{get:function(){return Object.keys(this._store).length}}),L.prototype.add=function(t){return this._store.set(t,!0)},L.prototype.has=function(t){return this._store.has(t)},L.prototype.forEach=function(t){this._store.forEach((function(e,n){t(n)}))},Object.defineProperty(L.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}()?(m=L,g=k):(m=Set,g=Map);var T;function S(t){return t}function D(t){return[{ok:t}]}function M(t,e,n){var i=e.docs,r=new g;i.forEach((function(t){r.has(t.id)?r.get(t.id).push(t):r.set(t.id,[t])}));var o=r.size,a=0,s=new Array(o);function u(){var t;++a===o&&(t=[],s.forEach((function(e){e.docs.forEach((function(n){t.push({id:e.id,docs:[n]})}))})),n(null,{results:t}))}var l=[];r.forEach((function(t,e){l.push(e)}));var c=0;function h(){if(!(c>=l.length)){var n=Math.min(c+6,l.length),i=l.slice(c,n);!function(n,i){n.forEach((function(n,o){var a=i+o,l=r.get(n),c=C(l[0],["atts_since","attachments"]);c.open_revs=l.map((function(t){return t.rev})),c.open_revs=c.open_revs.filter(S);var d=S;0===c.open_revs.length&&(delete c.open_revs,d=D),["revs","attachments","binary","ajax","latest"].forEach((function(t){t in e&&(c[t]=e[t])})),t.get(n,c,(function(t,e){var i,r,o;i=t?[{error:t}]:d(e),r=n,o=i,s[a]={id:r,docs:o},u(),h()}))}))}(i,c),c+=i.length}}h()}function A(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}if(A())T=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),T=!!localStorage.getItem("_pouch_check_localstorage")}catch(t){T=!1}function P(){return T}function O(){s.EventEmitter.call(this),this._listeners={},function(t){A()?chrome.storage.onChanged.addListener((function(e){null!=e.db_name&&t.emit(e.dbName.newValue)})):P()&&("undefined"!=typeof addEventListener?addEventListener("storage",(function(e){t.emit(e.key)})):window.attachEvent("storage",(function(e){t.emit(e.key)})))}(this)}function I(t){if("undefined"!=typeof console&&"function"==typeof console[t]){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function N(t){var e=0;return t||(e=2e3),function(t,e){return t=parseInt(t,10)||0,(e=parseInt(e,10))!=e||e<=t?e=(t||1)<<1:e+=1,e>6e5&&(t=3e5,e=6e5),~~((e-t)*Math.random()+t)}(t,e)}function R(t,e){I("info","The above "+t+" is totally normal. "+e)}u(O,s.EventEmitter),O.prototype.addListener=function(t,e,n,i){if(!this._listeners[e]){var r=this,o=!1;this._listeners[e]=s,this.on(t,s)}function s(){if(r._listeners[e])if(o)o="waiting";else{o=!0;var t=C(i,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(t).on("change",(function(t){t.seq>i.since&&!i.cancelled&&(i.since=t.seq,i.onChange(t))})).on("complete",(function(){"waiting"===o&&a(s),o=!1})).on("error",(function(){o=!1}))}}},O.prototype.removeListener=function(t,e){e in this._listeners&&(s.EventEmitter.prototype.removeListener.call(this,t,this._listeners[e]),delete this._listeners[e])},O.prototype.notifyLocalWindows=function(t){A()?chrome.storage.local.set({dbName:t}):P()&&(localStorage[t]="a"===localStorage[t]?"b":"a")},O.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)};var j="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e};function q(t,e,n){Error.call(this,n),this.status=t,this.name=e,this.message=n,this.error=!0}u(q,Error),q.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new q(401,"unauthorized","Name or password is incorrect.");var F=new q(400,"bad_request","Missing JSON list of 'docs'"),U=new q(404,"not_found","missing"),B=new q(409,"conflict","Document update conflict"),z=new q(400,"bad_request","_id field must contain a string"),V=new q(412,"missing_id","_id is required for puts"),H=new q(400,"bad_request","Only reserved document ids may start with underscore."),W=(new q(412,"precondition_failed","Database not open"),new q(500,"unknown_error","Database encountered an unknown error")),Z=new q(500,"badarg","Some query argument is invalid"),G=(new q(400,"invalid_request","Request was invalid"),new q(400,"query_parse_error","Some query parameter is invalid")),Y=new q(500,"doc_validation","Bad special document member"),X=new q(400,"bad_request","Something wrong with the request"),K=new q(400,"bad_request","Document must be a JSON object"),J=(new q(404,"not_found","Database not found"),new q(500,"indexed_db_went_bad","unknown")),Q=new q(500,"web_sql_went_bad","unknown"),tt=(new q(500,"levelDB_went_went_bad","unknown"),new q(403,"forbidden","Forbidden by design doc validate_doc_update function"),new q(400,"bad_request","Invalid rev format")),et=(new q(412,"file_exists","The database could not be created, the file already exists."),new q(412,"missing_stub","A pre-existing attachment stub wasn't found"));new q(413,"invalid_url","Provided URL is invalid");function nt(t,e){function n(e){for(var n in t)"function"!=typeof t[n]&&(this[n]=t[n]);void 0!==e&&(this.reason=e)}return n.prototype=q.prototype,new n(e)}function it(t){if("object"!=typeof t){var e=t;(t=W).data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),t}function rt(t){var e={},n=t.filter&&"function"==typeof t.filter;return e.query=t.query_params,function(i){i.doc||(i.doc={});var r=n&&function(t,e,n){try{return!t(e,n)}catch(t){var i="Filter function threw: "+t.toString();return nt(X,i)}}(t.filter,i.doc,e);if("object"==typeof r)return r;if(r)return!1;if(t.include_docs){if(!t.attachments)for(var o in i.doc._attachments)i.doc._attachments.hasOwnProperty(o)&&(i.doc._attachments[o].stub=!0)}else delete i.doc;return!0}}function ot(t){for(var e=[],n=0,i=t.length;n<i;n++)e=e.concat(t[n]);return e}function at(t){var e;if(t?"string"!=typeof t?e=nt(z):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=nt(H)):e=nt(V),e)throw e}function st(t){return"boolean"==typeof t._remote?t._remote:"function"==typeof t.type&&(I("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===t.type())}function ut(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function lt(t){var e=ut(t);return e?e.join("/"):null}var ct=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],ht=/(?:^|&)([^&=]*)=?([^&]*)/g,dt=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function pt(t){for(var e=dt.exec(t),n={},i=14;i--;){var r=ct[i],o=e[i]||"",a=-1!==["user","password"].indexOf(r);n[r]=a?decodeURIComponent(o):o}return n.queryKey={},n[ct[12]].replace(ht,(function(t,e,i){e&&(n.queryKey[e]=i)})),n}function ft(t,e){var n=[],i=[];for(var r in e)e.hasOwnProperty(r)&&(n.push(r),i.push(e[r]));return n.push(t),Function.apply(null,n).apply(null,i)}function mt(t,e,n){return new p((function(i,r){t.get(e,(function(o,a){if(o){if(404!==o.status)return r(o);a={}}var s=a._rev,u=n(a);if(!u)return i({updated:!1,rev:s});u._id=e,u._rev=s,i(function(t,e,n){return t.put(e).then((function(t){return{updated:!0,rev:t.rev}}),(function(i){if(409!==i.status)throw i;return mt(t,e._id,n)}))}(t,u,n))}))}))}function gt(){return l.v4().replace(/-/g,"").toLowerCase()}var vt=l.v4;function yt(t){for(var e,n,i,r,o=t.rev_tree.slice();r=o.pop();){var a=r.ids,s=a[2],u=r.pos;if(s.length)for(var l=0,c=s.length;l<c;l++)o.push({pos:u+1,ids:s[l]});else{var h=!!a[1].deleted,d=a[0];e&&!(i!==h?i:n!==u?n<u:e<d)||(e=d,n=u,i=h)}}return n+"-"+e}function _t(t,e){for(var n,i=t.slice();n=i.pop();)for(var r=n.pos,o=n.ids,a=o[2],s=e(0===a.length,r,o[0],n.ctx,o[1]),u=0,l=a.length;u<l;u++)i.push({pos:r+1,ids:a[u],ctx:s})}function bt(t,e){return t.pos-e.pos}function wt(t){var e=[];_t(t,(function(t,n,i,r,o){t&&e.push({rev:n+"-"+i,pos:n,opts:o})})),e.sort(bt).reverse();for(var n=0,i=e.length;n<i;n++)delete e[n].pos;return e}function xt(t){for(var e=yt(t),n=wt(t.rev_tree),i=[],r=0,o=n.length;r<o;r++){var a=n[r];a.rev===e||a.opts.deleted||i.push(a.rev)}return i}function $t(t){var e=[];return _t(t.rev_tree,(function(t,n,i,r,o){"available"!==o.status||t||(e.push(n+"-"+i),o.status="missing")})),e}function Et(t){for(var e,n=[],i=t.slice();e=i.pop();){var r=e.pos,o=e.ids,a=o[0],s=o[1],u=o[2],l=0===u.length,c=e.history?e.history.slice():[];c.push({id:a,opts:s}),l&&n.push({pos:r+1-c.length,ids:c});for(var h=0,d=u.length;h<d;h++)i.push({pos:r+1,ids:u[h],history:c})}return n.reverse()}function kt(t,e){return t.pos-e.pos}function Lt(t,e,n){var i=function(t,e,n){for(var i,r=0,o=t.length;r<o;)n(t[i=r+o>>>1],e)<0?r=i+1:o=i;return r}(t,e,n);t.splice(i,0,e)}function Ct(t,e){for(var n,i,r=e,o=t.length;r<o;r++){var a=t[r],s=[a.id,a.opts,[]];i?(i[2].push(s),i=s):n=i=s}return n}function Tt(t,e){return t[0]<e[0]?-1:1}function St(t,e){for(var n=[{tree1:t,tree2:e}],i=!1;n.length>0;){var r=n.pop(),o=r.tree1,a=r.tree2;(o[1].status||a[1].status)&&(o[1].status="available"===o[1].status||"available"===a[1].status?"available":"missing");for(var s=0;s<a[2].length;s++)if(o[2][0]){for(var u=!1,l=0;l<o[2].length;l++)o[2][l][0]===a[2][s][0]&&(n.push({tree1:o[2][l],tree2:a[2][s]}),u=!0);u||(i="new_branch",Lt(o[2],a[2][s],Tt))}else i="new_leaf",o[2][0]=a[2][s]}return{conflicts:i,tree:t}}function Dt(t,e,n){var i,r=[],o=!1,a=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var s=0,u=t.length;s<u;s++){var l=t[s];if(l.pos===e.pos&&l.ids[0]===e.ids[0])i=St(l.ids,e.ids),r.push({pos:l.pos,ids:i.tree}),o=o||i.conflicts,a=!0;else if(!0!==n){var c=l.pos<e.pos?l:e,h=l.pos<e.pos?e:l,d=h.pos-c.pos,p=[],f=[];for(f.push({ids:c.ids,diff:d,parent:null,parentIdx:null});f.length>0;){var m=f.pop();if(0!==m.diff)for(var g=m.ids[2],v=0,y=g.length;v<y;v++)f.push({ids:g[v],diff:m.diff-1,parent:m.ids,parentIdx:v});else m.ids[0]===h.ids[0]&&p.push(m)}var _=p[0];_?(i=St(_.ids,h.ids),_.parent[2][_.parentIdx]=i.tree,r.push({pos:c.pos,ids:c.ids}),o=o||i.conflicts,a=!0):r.push(l)}else r.push(l)}return a||r.push(e),r.sort(kt),{tree:r,conflicts:o||"internal_node"}}function Mt(t,e,n){var i=Dt(t,e),r=function(t,e){for(var n,i,r=Et(t),o=0,a=r.length;o<a;o++){var s,u=r[o],l=u.ids;if(l.length>e){n||(n={});var c=l.length-e;s={pos:u.pos+c,ids:Ct(l,c)};for(var h=0;h<c;h++){var d=u.pos+h+"-"+l[h].id;n[d]=!0}}else s={pos:u.pos,ids:Ct(l,0)};i=i?Dt(i,s,!0).tree:[s]}return n&&_t(i,(function(t,e,i){delete n[e+"-"+i]})),{tree:i,revs:n?Object.keys(n):[]}}(i.tree,n);return{tree:r.tree,stemmedRevs:r.revs,conflicts:i.conflicts}}function At(t){return t.ids}function Pt(t,e){e||(e=yt(t));for(var n,i=e.substring(e.indexOf("-")+1),r=t.rev_tree.map(At);n=r.pop();){if(n[0]===i)return!!n[1].deleted;r=r.concat(n[2])}}function Ot(t){return/^_local/.test(t)}function It(t,e){for(var n,i=e.rev_tree.slice();n=i.pop();){var r=n.pos,o=n.ids,a=o[0],s=o[1],u=o[2],l=0===u.length,c=n.history?n.history.slice():[];if(c.push({id:a,pos:r,opts:s}),l)for(var h=0,d=c.length;h<d;h++){var p=c[h];if(p.pos+"-"+p.id===t)return r+"-"+a}for(var f=0,m=u.length;f<m;f++)i.push({pos:r+1,ids:u[f],history:c})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}function Nt(t,e,n){s.EventEmitter.call(this);var i=this;this.db=t;var r=(e=e?_(e):{}).complete=b((function(e,n){var r,a;e?(a="error",("listenerCount"in(r=i)?r.listenerCount(a):s.EventEmitter.listenerCount(r,a))>0&&i.emit("error",e)):i.emit("complete",n),i.removeAllListeners(),t.removeListener("destroyed",o)}));function o(){i.cancel()}n&&(i.on("complete",(function(t){n(null,t)})),i.on("error",n)),t.once("destroyed",o),e.onChange=function(t,e,n){i.isCancelled||function(t,e,n,i){try{t.emit("change",e,n,i)}catch(t){I("error",'Error in .on("change", function):',t)}}(i,t,e,n)};var a=new p((function(t,n){e.complete=function(e,i){e?n(e):t(i)}}));i.once("cancel",(function(){t.removeListener("destroyed",o),e.complete(null,{status:"cancelled"})})),this.then=a.then.bind(a),this.catch=a.catch.bind(a),this.then((function(t){r(null,t)}),r),t.taskqueue.isReady?i.validateChanges(e):t.taskqueue.addTask((function(t){t?e.complete(t):i.isCancelled?i.emit("cancel"):i.validateChanges(e)}))}function Rt(t,e,n){var i=[{rev:t._rev}];"all_docs"===n.style&&(i=wt(e.rev_tree).map((function(t){return{rev:t.rev}})));var r={id:e.id,changes:i,doc:t};return Pt(e,t._rev)&&(r.deleted=!0),n.conflicts&&(r.doc._conflicts=xt(e),r.doc._conflicts.length||delete r.doc._conflicts),r}function jt(t,e){return t<e?-1:t>e?1:0}function qt(t,e){return function(n,i){n||i[0]&&i[0].error?((n=n||i[0]).docId=e,t(n)):t(null,i.length?i[0]:i)}}function Ft(t,e){var n=jt(t._id,e._id);return 0!==n?n:jt(t._revisions?t._revisions.start:0,e._revisions?e._revisions.start:0)}function Ut(){s.EventEmitter.call(this)}function Bt(){this.isReady=!1,this.failed=!1,this.queue=[]}function zt(t,e){if(!(this instanceof zt))return new zt(t,e);var n=this;if(e=e||{},t&&"object"==typeof t&&(t=(e=t).name,delete e.name),this.__opts=e=_(e),n.auto_compaction=e.auto_compaction,n.prefix=zt.prefix,"string"!=typeof t)throw new Error("Missing/invalid DB name");var i=function(t,e){var n=t.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var i=zt.adapters,r=zt.preferredAdapters,o=zt.prefix,a=e.adapter;if(!a)for(var s=0;s<r.length&&("idb"===(a=r[s])&&"websql"in i&&P()&&localStorage["_pouch__websqldb_"+o+t]);++s)I("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var u=i[a];return{name:!(u&&"use_prefix"in u)||u.use_prefix?o+t:t,adapter:a}}((e.prefix||"")+t,e);if(e.name=i.name,e.adapter=e.adapter||i.adapter,n.name=t,n._adapter=e.adapter,zt.emit("debug",["adapter","Picked adapter: ",e.adapter]),!zt.adapters[e.adapter]||!zt.adapters[e.adapter].valid())throw new Error("Invalid Adapter: "+e.adapter);Ut.call(n),n.taskqueue=new Bt,n.adapter=e.adapter,zt.adapters[e.adapter].call(n,e,(function(t){if(t)return n.taskqueue.fail(t);!function(t){function e(e){t.removeListener("closed",n),e||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)}(n),n.emit("created",n),zt.emit("created",n.name),n.taskqueue.ready(n)}))}u(Nt,s.EventEmitter),Nt.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Nt.prototype.validateChanges=function(t){var e=t.complete,n=this;zt._changesFilterPlugin?zt._changesFilterPlugin.validate(t,(function(i){if(i)return e(i);n.doChanges(t)})):n.doChanges(t)},Nt.prototype.doChanges=function(t){var e=this,n=t.complete;if("live"in(t=_(t))&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=Rt,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"!==t.since){if(zt._changesFilterPlugin){if(zt._changesFilterPlugin.normalize(t),zt._changesFilterPlugin.shouldFilter(this,t))return zt._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach((function(e){e in t&&I("warn",'The "'+e+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')}));"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=n;var i=this.db._changes(t);if(i&&"function"==typeof i.cancel){var r=e.cancel;e.cancel=o((function(t){i.cancel(),r.apply(this,t)}))}}else this.db.info().then((function(i){e.isCancelled?n(null,{status:"cancelled"}):(t.since=i.update_seq,e.doChanges(t))}),n)},u(Ut,s.EventEmitter),Ut.prototype.post=x("post",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(nt(K));this.bulkDocs({docs:[t]},e,qt(n,t._id))})),Ut.prototype.put=x("put",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(nt(K));if(at(t._id),Ot(t._id)&&"function"==typeof this._putLocal)return t._deleted?this._removeLocal(t,n):this._putLocal(t,n);var i,r,o,a,s=this;function u(n){"function"==typeof s._put&&!1!==e.new_edits?s._put(t,e,n):s.bulkDocs({docs:[t]},e,qt(n,t._id))}e.force&&t._rev?(i=t._rev.split("-"),r=i[1],o=parseInt(i[0],10)+1,a=gt(),t._revisions={start:o,ids:[a,r]},t._rev=o+"-"+a,e.new_edits=!1,u((function(e){var i=e?null:{ok:!0,id:t._id,rev:t._rev};n(e,i)}))):u(n)})),Ut.prototype.putAttachment=x("putAttachment",(function(t,e,n,i,r){var o=this;function a(t){var n="_rev"in t?parseInt(t._rev,10):0;return t._attachments=t._attachments||{},t._attachments[e]={content_type:r,data:i,revpos:++n},o.put(t)}return"function"==typeof r&&(r=i,i=n,n=null),void 0===r&&(r=i,i=n,n=null),r||I("warn","Attachment",e,"on document",t,"is missing content_type"),o.get(t).then((function(t){if(t._rev!==n)throw nt(B);return a(t)}),(function(e){if(e.reason===U.message)return a({_id:t});throw e}))})),Ut.prototype.removeAttachment=x("removeAttachment",(function(t,e,n,i){var r=this;r.get(t,(function(t,o){if(t)i(t);else if(o._rev===n){if(!o._attachments)return i();delete o._attachments[e],0===Object.keys(o._attachments).length&&delete o._attachments,r.put(o,i)}else i(nt(B))}))})),Ut.prototype.remove=x("remove",(function(t,e,n,i){var r;"string"==typeof e?(r={_id:t,_rev:e},"function"==typeof n&&(i=n,n={})):(r=t,"function"==typeof e?(i=e,n={}):(i=n,n=e)),(n=n||{}).was_delete=!0;var o={_id:r._id,_rev:r._rev||n.rev,_deleted:!0};if(Ot(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(r,i);this.bulkDocs({docs:[o]},n,qt(i,o._id))})),Ut.prototype.revsDiff=x("revsDiff",(function(t,e,n){"function"==typeof e&&(n=e,e={});var i=Object.keys(t);if(!i.length)return n(null,{});var r=0,o=new g;function a(t,e){o.has(t)||o.set(t,{missing:[]}),o.get(t).missing.push(e)}i.map((function(e){this._getRevisionTree(e,(function(s,u){if(s&&404===s.status&&"missing"===s.message)o.set(e,{missing:t[e]});else{if(s)return n(s);!function(e,n){var i=t[e].slice(0);_t(n,(function(t,n,r,o,s){var u=n+"-"+r,l=i.indexOf(u);-1!==l&&(i.splice(l,1),"available"!==s.status&&a(e,u))})),i.forEach((function(t){a(e,t)}))}(e,u)}if(++r===i.length){var l={};return o.forEach((function(t,e){l[e]=t})),n(null,l)}}))}),this)})),Ut.prototype.bulkGet=x("bulkGet",(function(t,e){M(this,t,e)})),Ut.prototype.compactDocument=x("compactDocument",(function(t,e,n){var i=this;this._getRevisionTree(t,(function(r,o){if(r)return n(r);var a=function(t){var e={},n=[];return _t(t,(function(t,i,r,o){var a=i+"-"+r;return t&&(e[a]=0),void 0!==o&&n.push({from:o,to:a}),a})),n.reverse(),n.forEach((function(t){void 0===e[t.from]?e[t.from]=1+e[t.to]:e[t.from]=Math.min(e[t.from],1+e[t.to])})),e}(o),s=[],u=[];Object.keys(a).forEach((function(t){a[t]>e&&s.push(t)})),_t(o,(function(t,e,n,i,r){var o=e+"-"+n;"available"===r.status&&-1!==s.indexOf(o)&&u.push(o)})),i._doCompaction(t,u,n)}))})),Ut.prototype.compact=x("compact",(function(t,e){"function"==typeof t&&(e=t,t={});t=t||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:t,callback:e}),1===this._compactionQueue.length&&function t(e){var n=e._compactionQueue[0],i=n.opts,r=n.callback;e.get("_local/compaction").catch((function(){return!1})).then((function(n){n&&n.last_seq&&(i.last_seq=n.last_seq),e._compact(i,(function(n,i){n?r(n):r(null,i),a((function(){e._compactionQueue.shift(),e._compactionQueue.length&&t(e)}))}))}))}(this)})),Ut.prototype._compact=function(t,e){var n=this,i={return_docs:!1,last_seq:t.last_seq||0},r=[];n.changes(i).on("change",(function(t){r.push(n.compactDocument(t.id,0))})).on("complete",(function(t){var i=t.last_seq;p.all(r).then((function(){return mt(n,"_local/compaction",(function(t){return(!t.last_seq||t.last_seq<i)&&(t.last_seq=i,t)}))})).then((function(){e(null,{ok:!0})})).catch(e)})).on("error",e)},Ut.prototype.get=x("get",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),"string"!=typeof t)return n(nt(z));if(Ot(t)&&"function"==typeof this._getLocal)return this._getLocal(t,n);var i=[],r=this;function o(){var o=[],a=i.length;if(!a)return n(null,o);i.forEach((function(i){r.get(t,{rev:i,revs:e.revs,latest:e.latest,attachments:e.attachments,binary:e.binary},(function(t,e){if(t)o.push({missing:i});else{for(var r,s=0,u=o.length;s<u;s++)if(o[s].ok&&o[s].ok._rev===e._rev){r=!0;break}r||o.push({ok:e})}--a||n(null,o)}))}))}if(!e.open_revs)return this._get(t,e,(function(i,o){if(i)return i.docId=t,n(i);var a=o.doc,s=o.metadata,u=o.ctx;if(e.conflicts){var l=xt(s);l.length&&(a._conflicts=l)}if(Pt(s,a._rev)&&(a._deleted=!0),e.revs||e.revs_info){for(var c=a._rev.split("-"),h=parseInt(c[0],10),d=c[1],p=Et(s.rev_tree),f=null,m=0;m<p.length;m++){var g=p[m],v=g.ids.map((function(t){return t.id})).indexOf(d);(v===h-1||!f&&-1!==v)&&(f=g)}var y=f.ids.map((function(t){return t.id})).indexOf(a._rev.split("-")[1])+1,_=f.ids.length-y;if(f.ids.splice(y,_),f.ids.reverse(),e.revs&&(a._revisions={start:f.pos+f.ids.length-1,ids:f.ids.map((function(t){return t.id}))}),e.revs_info){var b=f.pos+f.ids.length;a._revs_info=f.ids.map((function(t){return{rev:--b+"-"+t.id,status:t.opts.status}}))}}if(e.attachments&&a._attachments){var w=a._attachments,x=Object.keys(w).length;if(0===x)return n(null,a);Object.keys(w).forEach((function(t){this._getAttachment(a._id,t,w[t],{rev:a._rev,binary:e.binary,ctx:u},(function(e,i){var r=a._attachments[t];r.data=i,delete r.stub,delete r.length,--x||n(null,a)}))}),r)}else{if(a._attachments)for(var $ in a._attachments)a._attachments.hasOwnProperty($)&&(a._attachments[$].stub=!0);n(null,a)}}));if("all"===e.open_revs)this._getRevisionTree(t,(function(t,e){if(t)return n(t);i=wt(e).map((function(t){return t.rev})),o()}));else{if(!Array.isArray(e.open_revs))return n(nt(W,"function_clause"));i=e.open_revs;for(var a=0;a<i.length;a++){var s=i[a];if("string"!=typeof s||!/^\d+-/.test(s))return n(nt(tt))}o()}})),Ut.prototype.getAttachment=x("getAttachment",(function(t,e,n,i){var r=this;n instanceof Function&&(i=n,n={}),this._get(t,n,(function(o,a){return o?i(o):a.doc._attachments&&a.doc._attachments[e]?(n.ctx=a.ctx,n.binary=!0,void r._getAttachment(t,e,a.doc._attachments[e],n,i)):i(nt(U))}))})),Ut.prototype.allDocs=x("allDocs",(function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter((function(e){return e in t}))[0];if(n)return void e(nt(G,"Query parameter `"+n+"` is not compatible with multi-get"));if(!st(this)&&(function(t){var e="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;t.keys=e,t.skip=0,delete t.limit,t.descending&&(e.reverse(),t.descending=!1)}(t),0===t.keys.length))return this._allDocs({limit:0},e)}return this._allDocs(t,e)})),Ut.prototype.changes=function(t,e){return"function"==typeof t&&(e=t,t={}),new Nt(this,t,e)},Ut.prototype.close=x("close",(function(t){return this._closed=!0,this.emit("closed"),this._close(t)})),Ut.prototype.info=x("info",(function(t){var e=this;this._info((function(n,i){if(n)return t(n);i.db_name=i.db_name||e.name,i.auto_compaction=!(!e.auto_compaction||st(e)),i.adapter=e.adapter,t(null,i)}))})),Ut.prototype.id=x("id",(function(t){return this._id(t)})),Ut.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Ut.prototype.bulkDocs=x("bulkDocs",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),e=e||{},Array.isArray(t)&&(t={docs:t}),!t||!t.docs||!Array.isArray(t.docs))return n(nt(F));for(var i=0;i<t.docs.length;++i)if("object"!=typeof t.docs[i]||Array.isArray(t.docs[i]))return n(nt(K));var r;if(t.docs.forEach((function(t){t._attachments&&Object.keys(t._attachments).forEach((function(e){r=r||function(t){return"_"===t.charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'"}(e),t._attachments[e].content_type||I("warn","Attachment",e,"on document",t._id,"is missing content_type")}))})),r)return n(nt(X,r));"new_edits"in e||(e.new_edits=!("new_edits"in t)||t.new_edits);var o=this;e.new_edits||st(o)||t.docs.sort(Ft),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var i=Object.keys(n._attachments),r=0;r<i.length;r++){var o=i[r];n._attachments[o]=C(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}(t.docs);var a=t.docs.map((function(t){return t._id}));return this._bulkDocs(t,e,(function(t,i){if(t)return n(t);if(e.new_edits||(i=i.filter((function(t){return t.error}))),!st(o))for(var r=0,s=i.length;r<s;r++)i[r].id=i[r].id||a[r];n(null,i)}))})),Ut.prototype.registerDependentDatabase=x("registerDependentDatabase",(function(t,e){var n=new this.constructor(t,this.__opts);mt(this,"_local/_pouch_dependentDbs",(function(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)})).then((function(){e(null,{db:n})})).catch(e)})),Ut.prototype.destroy=x("destroy",(function(t,e){"function"==typeof t&&(e=t,t={});var n=this,i=!("use_prefix"in n)||n.use_prefix;function r(){n._destroy(t,(function(t,i){if(t)return e(t);n._destroyed=!0,n.emit("destroyed"),e(null,i||{ok:!0})}))}if(st(n))return r();n.get("_local/_pouch_dependentDbs",(function(t,o){if(t)return 404!==t.status?e(t):r();var a=o.dependentDbs,s=n.constructor,u=Object.keys(a).map((function(t){var e=i?t.replace(new RegExp("^"+s.prefix),""):t;return new s(e,n.__opts).destroy()}));p.all(u).then(r,e)}))})),Bt.prototype.execute=function(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()},Bt.prototype.fail=function(t){this.failed=t,this.execute()},Bt.prototype.ready=function(t){this.isReady=!0,this.db=t,this.execute()},Bt.prototype.addTask=function(t){this.queue.push(t),this.failed&&this.execute()},u(zt,Ut),zt.adapters={},zt.preferredAdapters=[],zt.prefix="_pouch_";var Vt=new s.EventEmitter;!function(t){Object.keys(s.EventEmitter.prototype).forEach((function(e){"function"==typeof s.EventEmitter.prototype[e]&&(t[e]=Vt[e].bind(Vt))}));var e=t._destructionListeners=new g;t.on("ref",(function(t){e.has(t.name)||e.set(t.name,[]),e.get(t.name).push(t)})),t.on("unref",(function(t){if(e.has(t.name)){var n=e.get(t.name),i=n.indexOf(t);i<0||(n.splice(i,1),n.length>1?e.set(t.name,n):e.delete(t.name))}})),t.on("destroyed",(function(t){if(e.has(t)){var n=e.get(t);e.delete(t),n.forEach((function(t){t.emit("destroyed",!0)}))}}))}(zt),zt.adapter=function(t,e,n){e.valid()&&(zt.adapters[t]=e,n&&zt.preferredAdapters.push(t))},zt.plugin=function(t){if("function"==typeof t)t(zt);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach((function(e){zt.prototype[e]=t[e]}))}return this.__defaults&&(zt.__defaults=j({},this.__defaults)),zt},zt.defaults=function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);n=n||{},t&&"object"==typeof t&&(t=(n=t).name,delete n.name),n=j({},e.__defaults,n),zt.call(this,t,n)}return u(e,zt),e.preferredAdapters=zt.preferredAdapters.slice(),Object.keys(zt).forEach((function(t){t in e||(e[t]=zt[t])})),e.__defaults=j({},this.__defaults,t),e};function Ht(t,e){for(var n=t,i=0,r=e.length;i<r;i++){if(!(n=n[e[i]]))break}return n}function Wt(t){for(var e=[],n="",i=0,r=t.length;i<r;i++){var o=t[i];"."===o?i>0&&"\\"===t[i-1]?n=n.substring(0,n.length-1)+".":(e.push(n),n=""):n+=o}return e.push(n),e}var Zt=["$or","$nor","$not"];function Gt(t){return Zt.indexOf(t)>-1}function Yt(t){return Object.keys(t)[0]}function Xt(t){var e={};return t.forEach((function(t){Object.keys(t).forEach((function(n){var i=t[n];if("object"!=typeof i&&(i={$eq:i}),Gt(n))e[n]=i instanceof Array?i.map((function(t){return Xt([t])})):Xt([i]);else{var r=e[n]=e[n]||{};Object.keys(i).forEach((function(t){var e=i[t];return"$gt"===t||"$gte"===t?function(t,e,n){if(void 0!==n.$eq)return;void 0!==n.$gte?"$gte"===t?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):void 0!==n.$gt?"$gte"===t?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e}(t,e,r):"$lt"===t||"$lte"===t?function(t,e,n){if(void 0!==n.$eq)return;void 0!==n.$lte?"$lte"===t?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):void 0!==n.$lt?"$lte"===t?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e}(t,e,r):"$ne"===t?function(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}(e,r):"$eq"===t?function(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}(e,r):void(r[t]=e)}))}}))})),e}function Kt(t,e){if(t===e)return 0;t=Jt(t),e=Jt(e);var n=ie(t),i=ie(e);if(n-i!=0)return n-i;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return function(t,e){return t===e?0:t>e?1:-1}(t,e)}return Array.isArray(t)?function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=Kt(t[i],e[i]);if(0!==r)return r}return t.length===e.length?0:t.length>e.length?1:-1}(t,e):function(t,e){for(var n=Object.keys(t),i=Object.keys(e),r=Math.min(n.length,i.length),o=0;o<r;o++){var a=Kt(n[o],i[o]);if(0!==a)return a;if(0!==(a=Kt(t[n[o]],e[i[o]])))return a}return n.length===i.length?0:n.length>i.length?1:-1}(t,e)}function Jt(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var i=0;i<n;i++)t[i]=Jt(e[i])}else{if(t instanceof Date)return t.toJSON();if(null!==t)for(var r in t={},e)if(e.hasOwnProperty(r)){var o=e[r];void 0!==o&&(t[r]=Jt(o))}}}return t}function Qt(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return function(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),i=t<0,r=i?"0":"2",o=(a=((i?-n:n)- -324).toString(),s="0",u=3,function(t,e,n){for(var i="",r=n-t.length;i.length<r;)i+=e;return i}(a,s,u)+a);var a,s,u;r+=""+o;var l=Math.abs(parseFloat(e[0]));i&&(l=10-l);var c=l.toFixed(20);return c=c.replace(/\.?0+$/,""),r+=""+c}(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),i=-1,r=n.length,o="";if(e)for(;++i<r;)o+=te(n[i]);else for(;++i<r;){var a=n[i];o+=te(a)+te(t[a])}return o}return""}function te(t){return ie(t=Jt(t))+""+Qt(t)+"\0"}function ee(t,e){var n,i=e;if("1"===t[e])n=0,e++;else{var r="0"===t[e];e++;var o="",a=t.substring(e,e+3),s=parseInt(a,10)+-324;for(r&&(s=-s),e+=3;;){var u=t[e];if("\0"===u)break;o+=u,e++}n=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),r&&(n-=10),0!==s&&(n=parseFloat(n+"e"+s))}return{num:n,length:e-i}}function ne(t,e){var n=t.pop();if(e.length){var i=e[e.length-1];n===i.element&&(e.pop(),i=e[e.length-1]);var r=i.element,o=i.index;if(Array.isArray(r))r.push(n);else if(o===t.length-2){r[t.pop()]=n}else t.push(n)}}function ie(t){var e=["boolean","number","string","object"].indexOf(typeof t);return~e?null===t?1:Array.isArray(t)?5:e<3?e+2:e+3:Array.isArray(t)?5:void 0}function re(t,e,n){if(t=t.filter((function(t){return oe(t.doc,e.selector,n)})),e.sort){var i=function(t){function e(e){return t.map((function(t){var n=Wt(Yt(t));return Ht(e,n)}))}return function(t,n){var i,r,o=Kt(e(t.doc),e(n.doc));return 0!==o?o:(i=t.doc._id,r=n.doc._id,i<r?-1:i>r?1:0)}}(e.sort);t=t.sort(i),"string"!=typeof e.sort[0]&&"desc"===(r=e.sort[0])[Yt(r)]&&(t=t.reverse())}var r;if("limit"in e||"skip"in e){var o=e.skip||0,a=("limit"in e?e.limit:t.length)+o;t=t.slice(o,a)}return t}function oe(t,e,n){return n.every((function(n){var i=e[n],r=Wt(n),o=Ht(t,r);return Gt(n)?function(t,e,n){if("$or"===t)return e.some((function(t){return oe(n,t,Object.keys(t))}));if("$not"===t)return!oe(n,e,Object.keys(e));return!e.find((function(t){return oe(n,t,Object.keys(t))}))}(n,i,t):ae(i,t,r,o)}))}function ae(t,e,n,i){return!t||Object.keys(t).every((function(r){var o=t[r];return function(t,e,n,i,r){if(!ce[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return ce[t](e,n,i,r)}(r,e,o,n,i)}))}function se(t){return null!=t}function ue(t){return void 0!==t}function le(t,e){return e.some((function(e){return t instanceof Array?t.indexOf(e)>-1:t===e}))}var ce={$elemMatch:function(t,e,n,i){return!!Array.isArray(i)&&(0!==i.length&&("object"==typeof i[0]?i.some((function(t){return oe(t,e,Object.keys(e))})):i.some((function(i){return ae(e,t,n,i)}))))},$allMatch:function(t,e,n,i){return!!Array.isArray(i)&&(0!==i.length&&("object"==typeof i[0]?i.every((function(t){return oe(t,e,Object.keys(e))})):i.every((function(i){return ae(e,t,n,i)}))))},$eq:function(t,e,n,i){return ue(i)&&0===Kt(i,e)},$gte:function(t,e,n,i){return ue(i)&&Kt(i,e)>=0},$gt:function(t,e,n,i){return ue(i)&&Kt(i,e)>0},$lte:function(t,e,n,i){return ue(i)&&Kt(i,e)<=0},$lt:function(t,e,n,i){return ue(i)&&Kt(i,e)<0},$exists:function(t,e,n,i){return e?ue(i):!ue(i)},$mod:function(t,e,n,i){return se(i)&&function(t,e){var n=e[0],i=e[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(i,10)!==i)throw new Error("Modulus is not an integer");return parseInt(t,10)===t&&t%n===i}(i,e)},$ne:function(t,e,n,i){return e.every((function(t){return 0!==Kt(i,t)}))},$in:function(t,e,n,i){return se(i)&&le(i,e)},$nin:function(t,e,n,i){return se(i)&&!le(i,e)},$size:function(t,e,n,i){return se(i)&&function(t,e){return t.length===e}(i,e)},$all:function(t,e,n,i){return Array.isArray(i)&&function(t,e){return e.every((function(e){return t.indexOf(e)>-1}))}(i,e)},$regex:function(t,e,n,i){return se(i)&&function(t,e){return new RegExp(e).test(t)}(i,e)},$type:function(t,e,n,i){return function(t,e){switch(e){case"null":return null===t;case"boolean":return"boolean"==typeof t;case"number":return"number"==typeof t;case"string":return"string"==typeof t;case"array":return t instanceof Array;case"object":return"[object Object]"==={}.toString.call(t)}throw new Error(e+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(i,e)}};function he(t,e){if("object"!=typeof e)throw new Error("Selector error: expected a JSON object");var n=re([{doc:t}],{selector:e=function(t){var e=_(t),n=!1;"$and"in e&&(e=Xt(e.$and),n=!0),["$or","$nor"].forEach((function(t){t in e&&e[t].forEach((function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n],r=t[i];"object"==typeof r&&null!==r||(t[i]={$eq:r})}}))})),"$not"in e&&(e.$not=Xt([e.$not]));for(var i=Object.keys(e),r=0;r<i.length;r++){var o=i[r],a=e[o];"object"!=typeof a||null===a?a={$eq:a}:"$ne"in a&&!n&&(a.$ne=[a.$ne]),e[o]=a}return e}(e)},Object.keys(e));return n&&1===n.length}function de(t,e){if(t.selector&&t.filter&&"_selector"!==t.filter){var n="string"==typeof t.filter?t.filter:"function";return e(new Error('selector invalid for filter "'+n+'"'))}e()}function pe(t){t.view&&!t.filter&&(t.filter="_view"),t.selector&&!t.filter&&(t.filter="_selector"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=lt(t.view):t.filter=lt(t.filter))}function fe(t,e){return e.filter&&"string"==typeof e.filter&&!e.doc_ids&&!st(t.db)}function me(t,e){var n=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var i=nt(X,"`view` filter parameter not found or invalid.");return n(i)}var r=ut(e.view);t.db.get("_design/"+r[0],(function(i,o){if(t.isCancelled)return n(null,{status:"cancelled"});if(i)return n(it(i));var a=o&&o.views&&o.views[r[1]]&&o.views[r[1]].map;if(!a)return n(nt(U,o.views?"missing json key: "+r[1]:"missing json key: views"));e.filter=ft(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+a+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{}),t.doChanges(e)}))}else if(e.selector)e.filter=function(t){return he(t,e.selector)},t.doChanges(e);else{var o=ut(e.filter);t.db.get("_design/"+o[0],(function(i,r){if(t.isCancelled)return n(null,{status:"cancelled"});if(i)return n(it(i));var a=r&&r.filters&&r.filters[o[1]];if(!a)return n(nt(U,r&&r.filters?"missing json key: "+o[1]:"missing json key: filters"));e.filter=ft('"use strict";\nreturn '+a+";",{}),t.doChanges(e)}))}}function ge(t){return t.reduce((function(t,e){return t[e]=!0,t}),{})}zt.plugin((function(t){t.debug=c;var e={};t.on("debug",(function(t){var n=t[0],i=t.slice(1);e[n]||(e[n]=c("pouchdb:"+n)),e[n].apply(null,i)}))})),zt.plugin((function(t){t._changesFilterPlugin={validate:de,normalize:pe,shouldFilter:fe,filter:me}})),zt.version="6.4.3";var ve=ge(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),ye=ge(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function _e(t){if(!/^\d+-./.test(t))return nt(tt);var e=t.indexOf("-"),n=t.substring(0,e),i=t.substring(e+1);return{prefix:parseInt(n,10),id:i}}function be(t,e){var n,i,r,o={status:"available"};if(t._deleted&&(o.deleted=!0),e)if(t._id||(t._id=vt()),i=gt(),t._rev){if((r=_e(t._rev)).error)return r;t._rev_tree=[{pos:r.prefix,ids:[r.id,{status:"missing"},[[i,o,[]]]]}],n=r.prefix+1}else t._rev_tree=[{pos:1,ids:[i,o,[]]}],n=1;else if(t._revisions&&(t._rev_tree=function(t,e){for(var n=t.start-t.ids.length+1,i=t.ids,r=[i[0],e,[]],o=1,a=i.length;o<a;o++)r=[i[o],{status:"missing"},[r]];return[{pos:n,ids:r}]}(t._revisions,o),n=t._revisions.start,i=t._revisions.ids[0]),!t._rev_tree){if((r=_e(t._rev)).error)return r;n=r.prefix,i=r.id,t._rev_tree=[{pos:n,ids:[i,o,[]]}]}at(t._id),t._rev=n+"-"+i;var a={metadata:{},data:{}};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var u="_"===s[0];if(u&&!ve[s]){var l=nt(Y,s);throw l.message=Y.message+": "+s,l}u&&!ye[s]?a.metadata[s.slice(1)]=t[s]:a.data[s]=t[s]}return a}var we=function(t){return atob(t)},xe=function(t){return btoa(t)};function $e(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)n.append(t[i]);return n.getBlob(e.type)}}function Ee(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n}function ke(t,e){return $e([Ee(t)],{type:e})}function Le(t,e){return ke(we(t),e)}function Ce(t){for(var e="",n=new Uint8Array(t),i=n.byteLength,r=0;r<i;r++)e+=String.fromCharCode(n[r]);return e}function Te(t,e){if("undefined"==typeof FileReader)return e(Ce((new FileReaderSync).readAsArrayBuffer(t)));var n=new FileReader,i="function"==typeof n.readAsBinaryString;n.onloadend=function(t){var n=t.target.result||"";if(i)return e(n);e(Ce(n))},i?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function Se(t,e){Te(t,(function(t){e(t)}))}function De(t,e){Se(t,(function(t){e(xe(t))}))}function Me(t,e){if("undefined"==typeof FileReader)return e((new FileReaderSync).readAsArrayBuffer(t));var n=new FileReader;n.onloadend=function(t){var n=t.target.result||new ArrayBuffer(0);e(n)},n.readAsArrayBuffer(t)}var Ae=e.setImmediate||e.setTimeout;function Pe(t,e,n,i,r){(n>0||i<e.size)&&(e=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.slice(e,n)}(e,n,i)),Me(e,(function(e){t.append(e),r()}))}function Oe(t,e,n,i,r){(n>0||i<e.length)&&(e=e.substring(n,i)),t.appendBinary(e),r()}function Ie(t,e){var n="string"==typeof t,i=n?t.length:t.size,r=Math.min(32768,i),o=Math.ceil(i/r),a=0,s=n?new h:new h.ArrayBuffer,u=n?Oe:Pe;function l(){Ae(d)}function c(){var t=function(t){return xe(t)}(s.end(!0));e(t),s.destroy()}function d(){var e=a*r,n=e+r;a++,u(s,t,e,n,a<o?l:c)}d()}function Ne(t,e,n){var i=function(t){try{return we(t)}catch(t){return{error:nt(Z,"Attachment is not a valid base64 string")}}}(t.data);if(i.error)return n(i.error);t.length=i.length,t.data="blob"===e?ke(i,t.content_type):"base64"===e?xe(i):i,Ie(i,(function(e){t.digest="md5-"+e,n()}))}function Re(t,e,n){if(t.stub)return n();"string"==typeof t.data?Ne(t,e,n):function(t,e,n){Ie(t.data,(function(i){t.digest="md5-"+i,t.length=t.data.size||t.data.length||0,"binary"===e?Se(t.data,(function(e){t.data=e,n()})):"base64"===e?De(t.data,(function(e){t.data=e,n()})):n()}))}(t,e,n)}function je(t,e,n){if(!t.length)return n();var i,r=0;function o(){r++,t.length===r&&(i?n(i):n())}t.forEach((function(t){var n=t.data&&t.data._attachments?Object.keys(t.data._attachments):[],r=0;if(!n.length)return o();function a(t){i=t,++r===n.length&&o()}for(var s in t.data._attachments)t.data._attachments.hasOwnProperty(s)&&Re(t.data._attachments[s],e,a)}))}function qe(t,e,n,i,r,o,a,s){if(function(t,e){for(var n,i=t.slice(),r=e.split("-"),o=parseInt(r[0],10),a=r[1];n=i.pop();){if(n.pos===o&&n.ids[0]===a)return!0;for(var s=n.ids[2],u=0,l=s.length;u<l;u++)i.push({pos:n.pos+1,ids:s[u]})}return!1}(e.rev_tree,n.metadata.rev))return i[r]=n,o();var u=e.winningRev||yt(e),l="deleted"in e?e.deleted:Pt(e,u),c="deleted"in n.metadata?n.metadata.deleted:Pt(n.metadata),h=/^1-/.test(n.metadata.rev);if(l&&!c&&s&&h){var d=n.data;d._rev=u,d._id=n.metadata.id,n=be(d,s)}var p=Mt(e.rev_tree,n.metadata.rev_tree[0],t);if(s&&(l&&c&&"new_leaf"!==p.conflicts||!l&&"new_leaf"!==p.conflicts||l&&!c&&"new_branch"===p.conflicts)){var f=nt(B);return i[r]=f,o()}var m=n.metadata.rev;n.metadata.rev_tree=p.tree,n.stemmedRevs=p.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var g=yt(n.metadata),v=Pt(n.metadata,g),y=l===v?0:l<v?-1:1;a(n,g,v,m===g?v:Pt(n.metadata,m),!0,y,r,o)}function Fe(t,e,n,i,r,o,a,s,u){t=t||1e3;var l=s.new_edits,c=new g,h=0,d=e.length;function p(){++h===d&&u&&u()}e.forEach((function(t,e){if(t._id&&Ot(t._id)){var i=t._deleted?"_removeLocal":"_putLocal";n[i](t,{ctx:r},(function(t,n){o[e]=t||n,p()}))}else{var a=t.metadata.id;c.has(a)?(d--,c.get(a).push([t,e])):c.set(a,[[t,e]])}})),c.forEach((function(e,n){var r=0;function u(){++r<e.length?c():p()}function c(){var c=e[r],h=c[0],d=c[1];if(i.has(n))qe(t,i.get(n),h,o,d,u,a,l);else{var p=Mt([],h.metadata.rev_tree[0],t);h.metadata.rev_tree=p.tree,h.stemmedRevs=p.stemmedRevs||[],function(t,e,n){var i=yt(t.metadata),r=Pt(t.metadata,i);if("was_delete"in s&&r)return o[e]=nt(U,"deleted"),n();if(l&&function(t){return"missing"===t.metadata.rev_tree[0].ids[1].status}(t)){var u=nt(B);return o[e]=u,n()}a(t,i,r,r,!1,r?0:1,e,n)}(h,d,u)}}c()}))}var Ue="document-store",Be="meta-store";function ze(t){try{return JSON.parse(t)}catch(e){return d.parse(t)}}function Ve(t){try{return JSON.stringify(t)}catch(e){return d.stringify(t)}}function He(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(nt(J,n,e.type))}}function We(t,e,n){return{data:Ve(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function Ze(t){if(!t)return null;var e=ze(t.data);return e.winningRev=t.winningRev,e.deleted="1"===t.deletedOrLocal,e.seq=t.seq,e}function Ge(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function Ye(t,e,n,i){n?i(t?"string"!=typeof t?t:Le(t,e):$e([""],{type:e})):t?"string"!=typeof t?Te(t,(function(t){i(xe(t))})):i(t):i("")}function Xe(t,e,n,i){var r=Object.keys(t._attachments||{});if(!r.length)return i&&i();var o=0;function a(){++o===r.length&&i&&i()}r.forEach((function(i){e.attachments&&e.include_docs?function(t,e){var i=t._attachments[e],r=i.digest;n.objectStore("attach-store").get(r).onsuccess=function(t){i.body=t.target.result.body,a()}}(t,i):(t._attachments[i].stub=!0,a())}))}function Ke(t,e){return p.all(t.map((function(t){if(t.doc&&t.doc._attachments){var n=Object.keys(t.doc._attachments);return p.all(n.map((function(n){var i=t.doc._attachments[n];if("body"in i){var r=i.body,o=i.content_type;return new p((function(a){Ye(r,o,e,(function(e){t.doc._attachments[n]=j(C(i,["digest","content_type"]),{data:e}),a()}))}))}})))}})))}function Je(t,e,n){var i=[],r=n.objectStore("by-sequence"),o=n.objectStore("attach-store"),a=n.objectStore("attach-seq-store"),s=t.length;function u(){--s||function(){if(!i.length)return;i.forEach((function(t){a.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::￿",!1,!1)).onsuccess=function(e){e.target.result||o.delete(t)}}))}()}t.forEach((function(t){var n=r.index("_doc_id_rev"),o=e+"::"+t;n.getKey(o).onsuccess=function(t){var e=t.target.result;if("number"!=typeof e)return u();r.delete(e),a.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(t){var e=t.target.result;if(e){var n=e.value.digestSeq.split("::")[0];i.push(n),a.delete(e.primaryKey),e.continue()}else u()}}}))}function Qe(t,e,n){try{return{txn:t.transaction(e,n)}}catch(t){return{error:t}}}var tn=new O;function en(t,e,n,i,r,o){for(var a,s,u,l,c,h,d,p,f=e.docs,m=0,v=f.length;m<v;m++){var y=f[m];y._id&&Ot(y._id)||(y=f[m]=be(y,n.new_edits)).error&&!d&&(d=y)}if(d)return o(d);var _=!1,b=0,w=new Array(f.length),x=new g,$=!1,E=i._meta.blobSupport?"blob":"base64";function k(){_=!0,L()}function L(){p&&_&&(p.docCount+=b,h.put(p))}function C(){$||(tn.notify(i._meta.name),o(null,w))}function T(t,e,n,i,r,o,a,s){t.metadata.winningRev=e,t.metadata.deleted=n;var u=t.data;if(u._id=t.metadata.id,u._rev=t.metadata.rev,i&&(u._deleted=!0),u._attachments&&Object.keys(u._attachments).length)return function(t,e,n,i,r,o){var a=t.data,s=0,u=Object.keys(a._attachments);function c(){s===u.length&&S(t,e,n,i,r,o)}function h(){s++,c()}u.forEach((function(n){var i=t.data._attachments[n];if(i.stub)s++,c();else{var r=i.data;delete i.data,i.revpos=parseInt(e,10),function(t,e,n){l.count(t).onsuccess=function(i){if(i.target.result)return n();var r={digest:t,body:e};l.put(r).onsuccess=n}}(i.digest,r,h)}}))}(t,e,n,r,a,s);b+=o,L(),S(t,e,n,r,a,s)}function S(t,e,n,r,o,l){var h=t.data,d=t.metadata;function p(o){var u=t.stemmedRevs||[];r&&i.auto_compaction&&(u=u.concat($t(t.metadata))),u&&u.length&&Je(u,t.metadata.id,a),d.seq=o.target.result;var l=We(d,e,n);s.put(l).onsuccess=f}function f(){w[o]={ok:!0,id:d.id,rev:d.rev},x.set(t.metadata.id,t.metadata),function(t,e,n){var i=0,r=Object.keys(t.data._attachments||{});if(!r.length)return n();function o(){++i===r.length&&n()}function a(n){var i=t.data._attachments[n].digest,r=c.put({seq:e,digestSeq:i+"::"+e});r.onsuccess=o,r.onerror=function(t){t.preventDefault(),t.stopPropagation(),o()}}for(var s=0;s<r.length;s++)a(r[s])}(t,d.seq,l)}h._doc_id_rev=d.id+"::"+d.rev,delete h._id,delete h._rev;var m=u.put(h);m.onsuccess=p,m.onerror=function(t){t.preventDefault(),t.stopPropagation(),u.index("_doc_id_rev").getKey(h._doc_id_rev).onsuccess=function(t){u.put(h,t.target.result).onsuccess=p}}}je(f,E,(function(e){if(e)return o(e);!function(){var e=Qe(r,[Ue,"by-sequence","attach-store","local-store","attach-seq-store",Be],"readwrite");if(e.error)return o(e.error);(a=e.txn).onabort=He(o),a.ontimeout=He(o),a.oncomplete=C,s=a.objectStore(Ue),u=a.objectStore("by-sequence"),l=a.objectStore("attach-store"),c=a.objectStore("attach-seq-store"),(h=a.objectStore(Be)).get(Be).onsuccess=function(t){p=t.target.result,L()},function(t){var e=[];if(f.forEach((function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach((function(n){var i=t.data._attachments[n];i.stub&&e.push(i.digest)}))})),!e.length)return t();var n,i=0;e.forEach((function(r){!function(t,e){l.get(t).onsuccess=function(n){if(n.target.result)e();else{var i=nt(et,"unknown stub attachment with digest "+t);i.status=412,e(i)}}}(r,(function(r){r&&!n&&(n=r),++i===e.length&&t(n)}))}))}((function(e){if(e)return $=!0,o(e);!function(){if(!f.length)return;var e=0;function r(){++e===f.length&&Fe(t.revs_limit,f,i,x,a,w,T,n,k)}function o(t){var e=Ze(t.target.result);e&&x.set(e.id,e),r()}for(var u=0,l=f.length;u<l;u++){var c=f[u];if(c._id&&Ot(c._id))r();else s.get(c.metadata.id).onsuccess=o}}()}))}()}))}function nn(t,e,n,i,r){var o,a,s;function u(t){a=t.target.result,o&&r(o,a,s)}function l(t){o=t.target.result,a&&r(o,a,s)}function c(t){var e=t.target.result;if(!e)return r();r([e.key],[e.value],e)}"function"==typeof t.getAll&&"function"==typeof t.getAllKeys&&i>1&&!n?(s={continue:function(){if(!o.length)return r();var n,s=o[o.length-1];if(e&&e.upper)try{n=IDBKeyRange.bound(s,e.upper,!0,e.upperOpen)}catch(t){if("DataError"===t.name&&0===t.code)return r()}else n=IDBKeyRange.lowerBound(s,!0);e=n,o=null,a=null,t.getAll(e,i).onsuccess=u,t.getAllKeys(e,i).onsuccess=l}},t.getAll(e,i).onsuccess=u,t.getAllKeys(e,i).onsuccess=l):n?t.openCursor(e,"prev").onsuccess=c:t.openCursor(e).onsuccess=c}function rn(t,e,n){var i,r,o="startkey"in t&&t.startkey,a="endkey"in t&&t.endkey,s="key"in t&&t.key,u="keys"in t&&t.keys,l=t.skip||0,c="number"==typeof t.limit?t.limit:-1,h=!1!==t.inclusive_end;if(!u&&(r=(i=function(t,e,n,i,r){try{if(t&&e)return r?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return r?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return r?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(i)return IDBKeyRange.only(i)}catch(t){return{error:t}}return null}(o,a,h,s,t.descending))&&i.error)&&("DataError"!==r.name||0!==r.code))return n(nt(J,r.name,r.message));var d=[Ue,"by-sequence",Be];t.attachments&&d.push("attach-store");var p=Qe(e,d,"readonly");if(p.error)return n(p.error);var f=p.txn;f.oncomplete=function(){t.attachments?Ke(x,t.binary).then(L):L()},f.onabort=He(n);var m,g,v,y=f.objectStore(Ue),_=f.objectStore("by-sequence"),b=f.objectStore(Be),w=_.index("_doc_id_rev"),x=[];function $(e,n){var i={id:n.id,key:n.id,value:{rev:e}};n.deleted?u&&(x.push(i),i.value.deleted=!0,i.doc=null):l--<=0&&(x.push(i),t.include_docs&&function(e,n,i){var r=e.id+"::"+i;w.get(r).onsuccess=function(i){if(n.doc=Ge(i.target.result),t.conflicts){var r=xt(e);r.length&&(n.doc._conflicts=r)}Xe(n.doc,t,f)}}(n,i,e))}function E(t){for(var e=0,n=t.length;e<n&&x.length!==c;e++){var i=t[e];if(i.error&&u)x.push(i);else{var r=Ze(i);$(r.winningRev,r)}}}function k(t,e,n){n&&(E(e),x.length<c&&n.continue())}function L(){var e={total_rows:m,offset:t.skip,rows:x};t.update_seq&&void 0!==g&&(e.update_seq=g),n(null,e)}return b.get(Be).onsuccess=function(t){m=t.target.result.docCount},t.update_seq&&(v=function(t){t.target.result&&t.target.result.length>0&&(g=t.target.result[0])},_.openCursor(null,"prev").onsuccess=function(t){var e=t.target.result,n=void 0;return e&&e.key&&(n=e.key),v({target:{result:[n]}})}),r||0===c?void 0:u?function(t,e,n){var i=[],r=0;t.forEach((function(o,a){e.get(o).onsuccess=function(e){e.target.result?i[a]=e.target.result:i[a]={key:o,error:"not_found"},++r===t.length&&n(t,i,{})}}))}(t.keys,y,k):-1===c?function(t,e,n){if("function"!=typeof t.getAll){var i=[];t.openCursor(e).onsuccess=function(t){var e=t.target.result;e?(i.push(e.value),e.continue()):n({target:{result:i}})}}else t.getAll(e).onsuccess=n}(y,i,(function(e){var n=e.target.result;t.descending&&(n=n.reverse()),E(n)})):void nn(y,i,t.descending,c+l,k)}var on=!1,an=[];function sn(){!on&&an.length&&(on=!0,an.shift()())}function un(t,e,n,i){if((t=_(t)).continuous){var r=n+":"+vt();return tn.addListener(n,r,e,t),tn.notify(n),{cancel:function(){tn.removeListener(n,r)}}}var o=t.doc_ids&&new m(t.doc_ids);t.since=t.since||0;var a,s=t.since,u="limit"in t?t.limit:-1;0===u&&(u=1),a="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var l,c,h,d,p=[],f=0,v=rt(t),y=new g;function b(t,e,n,i){if(n.seq!==e)return i();if(n.winningRev===t._rev)return i(n,t);var r=t._id+"::"+n.winningRev;d.get(r).onsuccess=function(t){i(n,Ge(t.target.result))}}function w(){t.complete(null,{results:p,last_seq:s})}var x=[Ue,"by-sequence"];t.attachments&&x.push("attach-store");var $=Qe(i,x,"readonly");if($.error)return t.complete($.error);(l=$.txn).onabort=He(t.complete),l.oncomplete=function(){!t.continuous&&t.attachments?Ke(p).then(w):w()},c=l.objectStore("by-sequence"),h=l.objectStore(Ue),d=c.index("_doc_id_rev"),nn(c,t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null,t.descending,u,(function(e,n,i){if(i&&e.length){var r=new Array(e.length),c=new Array(e.length),d=0;n.forEach((function(t,n){!function(t,e,n){if(o&&!o.has(t._id))return n();var i=y.get(t._id);if(i)return b(t,e,i,n);h.get(t._id).onsuccess=function(r){i=Ze(r.target.result),y.set(t._id,i),b(t,e,i,n)}}(Ge(t),e[n],(function(t,o){c[n]=t,r[n]=o,++d===e.length&&function(){for(var t=0,e=r.length;t<e&&f!==u;t++){var n=r[t];n&&m(c[t],n)}f!==u&&i.continue()}()}))}))}function m(e,n){var i=t.processChange(n,e,t);s=i.seq=e.seq;var r=v(i);if("object"==typeof r)return t.complete(r);r&&(f++,a&&p.push(i),t.attachments&&t.include_docs?Xe(n,t,l,(function(){Ke([i],t.binary).then((function(){t.onChange(i)}))})):t.onChange(i))}}))}var ln,cn=new g,hn=new g;function dn(t,e){var n=this;!function(t,e,n){an.push((function(){t((function(t,i){!function(t,e,n,i){try{t(e,n)}catch(e){i.emit("error",e)}}(e,t,i,n),on=!1,a((function(){sn()}))}))})),sn()}((function(e){!function(t,e,n){var i=e.name,r=null;function o(t,e){var n=t.objectStore(Ue);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(t){var i=t.target.result;if(i){var r=i.value,o=Pt(r);r.deletedOrLocal=o?"1":"0",n.put(r),i.continue()}else e()}}function s(t,e){var n=t.objectStore("local-store"),i=t.objectStore(Ue),r=t.objectStore("by-sequence");i.openCursor().onsuccess=function(t){var o=t.target.result;if(o){var a=o.value,s=a.id,u=Ot(s),l=yt(a);if(u){var c=s+"::"+l,h=s+"::",d=s+"::~",p=r.index("_doc_id_rev"),f=IDBKeyRange.bound(h,d,!1,!1),m=p.openCursor(f);m.onsuccess=function(t){if(m=t.target.result){var e=m.value;e._doc_id_rev===c&&n.put(e),r.delete(m.primaryKey),m.continue()}else i.delete(o.primaryKey),o.continue()}}else o.continue()}else e&&e()}}function u(t,e){var n=t.objectStore("by-sequence"),i=t.objectStore("attach-store"),r=t.objectStore("attach-seq-store");i.count().onsuccess=function(t){if(!t.target.result)return e();n.openCursor().onsuccess=function(t){var n=t.target.result;if(!n)return e();for(var i=n.value,o=n.primaryKey,a=Object.keys(i._attachments||{}),s={},u=0;u<a.length;u++){s[i._attachments[a[u]].digest]=!0}var l=Object.keys(s);for(u=0;u<l.length;u++){var c=l[u];r.put({seq:o,digestSeq:c+"::"+o})}n.continue()}}}function l(t){var e=t.objectStore("by-sequence"),n=t.objectStore(Ue);n.openCursor().onsuccess=function(t){var i=t.target.result;if(i){var r,o=(r=i.value).data?Ze(r):(r.deleted="1"===r.deletedOrLocal,r);if(o.winningRev=o.winningRev||yt(o),o.seq)return a();!function(){var t=o.id+"::",n=o.id+"::￿",i=e.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,n)),r=0;i.onsuccess=function(t){var e=t.target.result;if(!e)return o.seq=r,a();var n=e.primaryKey;n>r&&(r=n),e.continue()}}()}function a(){var t=We(o,o.winningRev,o.deleted);n.put(t).onsuccess=function(){i.continue()}}}}t._meta=null,t._remote=!1,t.type=function(){return"idb"},t._id=w((function(e){e(null,t._meta.instanceId)})),t._bulkDocs=function(n,i,o){en(e,n,i,t,r,o)},t._get=function(t,e,n){var i,o,a,s=e.ctx;if(!s){var u=Qe(r,[Ue,"by-sequence","attach-store"],"readonly");if(u.error)return n(u.error);s=u.txn}function l(){n(a,{doc:i,metadata:o,ctx:s})}s.objectStore(Ue).get(t).onsuccess=function(t){if(!(o=Ze(t.target.result)))return a=nt(U,"missing"),l();var n;if(e.rev)n=e.latest?It(e.rev,o):e.rev;else if(n=o.winningRev,Pt(o))return a=nt(U,"deleted"),l();var r=s.objectStore("by-sequence"),u=o.id+"::"+n;r.index("_doc_id_rev").get(u).onsuccess=function(t){if((i=t.target.result)&&(i=Ge(i)),!i)return a=nt(U,"missing"),l();l()}}},t._getAttachment=function(t,e,n,i,o){var a;if(i.ctx)a=i.ctx;else{var s=Qe(r,[Ue,"by-sequence","attach-store"],"readonly");if(s.error)return o(s.error);a=s.txn}var u=n.digest,l=n.content_type;a.objectStore("attach-store").get(u).onsuccess=function(t){Ye(t.target.result.body,l,i.binary,(function(t){o(null,t)}))}},t._info=function(e){var n,i,o=Qe(r,[Be,"by-sequence"],"readonly");if(o.error)return e(o.error);var a=o.txn;a.objectStore(Be).get(Be).onsuccess=function(t){i=t.target.result.docCount},a.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(t){var e=t.target.result;n=e?e.key:0},a.oncomplete=function(){e(null,{doc_count:i,update_seq:n,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(t,e){rn(t,r,e)},t._changes=function(e){return un(e,t,i,r)},t._close=function(t){r.close(),cn.delete(i),t()},t._getRevisionTree=function(t,e){var n=Qe(r,[Ue],"readonly");if(n.error)return e(n.error);n.txn.objectStore(Ue).get(t).onsuccess=function(t){var n=Ze(t.target.result);n?e(null,n.rev_tree):e(nt(U))}},t._doCompaction=function(t,e,n){var i=Qe(r,[Ue,"by-sequence","attach-store","attach-seq-store"],"readwrite");if(i.error)return n(i.error);var o=i.txn;o.objectStore(Ue).get(t).onsuccess=function(n){var i=Ze(n.target.result);_t(i.rev_tree,(function(t,n,i,r,o){var a=n+"-"+i;-1!==e.indexOf(a)&&(o.status="missing")})),Je(e,t,o);var r=i.winningRev,a=i.deleted;o.objectStore(Ue).put(We(i,r,a))},o.onabort=He(n),o.oncomplete=function(){n()}},t._getLocal=function(t,e){var n=Qe(r,["local-store"],"readonly");if(n.error)return e(n.error);var i=n.txn.objectStore("local-store").get(t);i.onerror=He(e),i.onsuccess=function(t){var n=t.target.result;n?(delete n._doc_id_rev,e(null,n)):e(nt(U))}},t._putLocal=function(t,e,n){"function"==typeof e&&(n=e,e={}),delete t._revisions;var i=t._rev,o=t._id;t._rev=i?"0-"+(parseInt(i.split("-")[1],10)+1):"0-1";var a,s=e.ctx;if(!s){var u=Qe(r,["local-store"],"readwrite");if(u.error)return n(u.error);(s=u.txn).onerror=He(n),s.oncomplete=function(){a&&n(null,a)}}var l,c=s.objectStore("local-store");i?(l=c.get(o)).onsuccess=function(r){var o=r.target.result;o&&o._rev===i?c.put(t).onsuccess=function(){a={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,a)}:n(nt(B))}:((l=c.add(t)).onerror=function(t){n(nt(B)),t.preventDefault(),t.stopPropagation()},l.onsuccess=function(){a={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,a)})},t._removeLocal=function(t,e,n){"function"==typeof e&&(n=e,e={});var i,o=e.ctx;if(!o){var a=Qe(r,["local-store"],"readwrite");if(a.error)return n(a.error);(o=a.txn).oncomplete=function(){i&&n(null,i)}}var s=t._id,u=o.objectStore("local-store"),l=u.get(s);l.onerror=He(n),l.onsuccess=function(r){var o=r.target.result;o&&o._rev===t._rev?(u.delete(s),i={ok:!0,id:s,rev:"0-0"},e.ctx&&n(null,i)):n(nt(U))}},t._destroy=function(t,e){tn.removeAllListeners(i);var n=hn.get(i);n&&n.result&&(n.result.close(),cn.delete(i));var r=indexedDB.deleteDatabase(i);r.onsuccess=function(){hn.delete(i),P()&&i in localStorage&&delete localStorage[i],e(null,{ok:!0})},r.onerror=He(e)};var c,h=cn.get(i);if(h)return r=h.idb,t._meta=h.global,a((function(){n(null,t)}));c=e.storage?function(t,e){try{return indexedDB.open(t,{version:5,storage:e})}catch(e){return indexedDB.open(t,5)}}(i,e.storage):indexedDB.open(i,5);hn.set(i,c),c.onupgradeneeded=function(t){var e=t.target.result;if(t.oldVersion<1)return function(t){var e=t.createObjectStore(Ue,{keyPath:"id"});t.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore("attach-store",{keyPath:"digest"}),t.createObjectStore(Be,{keyPath:"id",autoIncrement:!1}),t.createObjectStore("detect-blob-support"),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.createObjectStore("local-store",{keyPath:"_id"});var n=t.createObjectStore("attach-seq-store",{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}(e);var n=t.currentTarget.transaction;t.oldVersion<3&&function(t){t.createObjectStore("local-store",{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(e),t.oldVersion<4&&function(t){var e=t.createObjectStore("attach-seq-store",{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}(e);var i=[o,s,u,l],r=t.oldVersion;!function t(){var e=i[r-1];r++,e&&e(n,t)}()},c.onsuccess=function(e){(r=e.target.result).onversionchange=function(){r.close(),cn.delete(i)},r.onabort=function(t){I("error","Database has a global failure",t.target.error),r.close(),cn.delete(i)};var o,a,s,u,l=r.transaction([Be,"detect-blob-support",Ue],"readwrite"),c=!1;function h(){void 0!==s&&c&&(t._meta={name:i,instanceId:u,blobSupport:s},cn.set(i,{idb:r,global:t._meta}),n(null,t))}function d(){if(void 0!==a&&void 0!==o){var t=i+"_id";t in o?u=o[t]:o[t]=u=vt(),o.docCount=a,l.objectStore(Be).put(o)}}l.objectStore(Be).get(Be).onsuccess=function(t){o=t.target.result||{id:Be},d()},function(t,e){t.objectStore(Ue).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(t){e(t.target.result)}}(l,(function(t){a=t,d()})),ln||(ln=function(t){return new p((function(e){var n=$e([""]);t.objectStore("detect-blob-support").put(n,"key").onsuccess=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)},t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)}})).catch((function(){return!1}))}(l)),ln.then((function(t){s=t,h()})),l.oncomplete=function(){c=!0,h()},l.onabort=He(n)},c.onerror=function(){var t="Failed to open indexedDB, are you in private browsing mode?";I("error",t),n(nt(J,t))}}(n,t,e)}),e,n.constructor)}function pn(t){return t<65?t-48:t-55}function fn(t,e){return"UTF-8"===e?function(t){return decodeURIComponent(escape(t))}(function(t,e,n){for(var i="";e<n;)i+=String.fromCharCode(pn(t.charCodeAt(e++))<<4|pn(t.charCodeAt(e++)));return i}(t,0,t.length)):function(t,e,n){for(var i="";e<n;)i+=String.fromCharCode(pn(t.charCodeAt(e+2))<<12|pn(t.charCodeAt(e+3))<<8|pn(t.charCodeAt(e))<<4|pn(t.charCodeAt(e+1))),e+=4;return i}(t,0,t.length)}function mn(t){return"'"+t+"'"}dn.valid=function(){var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");try{return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}};var gn=mn("document-store"),vn=mn("by-sequence"),yn=mn("attach-store"),_n=mn("local-store"),bn=mn("metadata-store"),wn=mn("attach-seq-store");function xn(t){return delete t._id,delete t._rev,JSON.stringify(t)}function $n(t,e,n){return(t=JSON.parse(t))._id=e,t._rev=n,t}function En(t){for(var e="(";t--;)e+="?",t&&(e+=",");return e+")"}function kn(t,e,n,i,r){return"SELECT "+t+" FROM "+("string"==typeof e?e:e.join(" JOIN "))+(n?" ON "+n:"")+(i?" WHERE "+("string"==typeof i?i:i.join(" AND ")):"")+(r?" ORDER BY "+r:"")}function Ln(t,e,n){if(t.length){var i=0,r=[];t.forEach((function(t){var i="SELECT seq FROM "+vn+" WHERE doc_id=? AND rev=?";n.executeSql(i,[e,t],(function(t,e){if(!e.rows.length)return o();var n=e.rows.item(0).seq;r.push(n),t.executeSql("DELETE FROM "+vn+" WHERE seq=?",[n],o)}))}))}function o(){++i===t.length&&function(){if(!r.length)return;var t="SELECT DISTINCT digest AS digest FROM "+wn+" WHERE seq IN "+En(r.length);n.executeSql(t,r,(function(t,e){for(var n=[],i=0;i<e.rows.length;i++)n.push(e.rows.item(i).digest);if(n.length){var o="DELETE FROM "+wn+" WHERE seq IN ("+r.map((function(){return"?"})).join(",")+")";t.executeSql(o,r,(function(t){var e="SELECT digest FROM "+wn+" WHERE digest IN ("+n.map((function(){return"?"})).join(",")+")";t.executeSql(e,n,(function(t,e){for(var i=new m,r=0;r<e.rows.length;r++)i.add(e.rows.item(r).digest);n.forEach((function(e){i.has(e)||(t.executeSql("DELETE FROM "+wn+" WHERE digest=?",[e]),t.executeSql("DELETE FROM "+yn+" WHERE digest=?",[e]))}))}))}))}}))}()}}function Cn(t){return function(e){I("error","WebSQL threw an error",e);var n=e&&e.constructor.toString().match(/function ([^(]+)/),i=(n&&n[1]||e.type,e.target||e.message);t(nt(Q,i))}}function Tn(t,e,n,i,r,o,a){var s,u=n.new_edits,l=e.docs.map((function(t){return t._id&&Ot(t._id)?t:be(t,u)})),c=l.filter((function(t){return t.error}));if(c.length)return a(c[0]);var h,d=new Array(l.length),p=new g;function f(){if(h)return a(h);o.notify(i._name),a(null,d)}function m(t){var e=[];if(l.forEach((function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach((function(n){var i=t.data._attachments[n];i.stub&&e.push(i.digest)}))})),!e.length)return t();var n,i=0;e.forEach((function(r){!function(t,e){var n="SELECT count(*) as cnt FROM "+yn+" WHERE digest=?";s.executeSql(n,[t],(function(n,i){if(0===i.rows.item(0).cnt){var r=nt(et,"unknown stub attachment with digest "+t);e(r)}else e()}))}(r,(function(r){r&&!n&&(n=r),++i===e.length&&t(n)}))}))}function v(t,e,n,r,o,a,u,l){function c(){var e=t.data,n=r?1:0,i=e._id,o=e._rev,a=xn(e),u="INSERT INTO "+vn+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",l=[i,o,a,n];function c(t,n){var i=0,r=Object.keys(e._attachments||{});if(!r.length)return n();function o(){return++i===r.length&&n(),!1}function a(n){var i="INSERT INTO "+wn+" (digest, seq) VALUES (?,?)",r=[e._attachments[n].digest,t];s.executeSql(i,r,o,o)}for(var u=0;u<r.length;u++)a(r[u])}s.executeSql(u,l,(function(t,e){var n=e.insertId;c(n,(function(){y(t,n)}))}),(function(){var t=kn("seq",vn,null,"doc_id=? AND rev=?");return s.executeSql(t,[i,o],(function(t,e){var r=e.rows.item(0).seq,s="UPDATE "+vn+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",u=[a,n,i,o];t.executeSql(s,u,(function(t){c(r,(function(){y(t,r)}))}))})),!1}))}function h(t){f||(t?l(f=t):m===g.length&&c())}var f=null,m=0;t.data._id=t.metadata.id,t.data._rev=t.metadata.rev;var g=Object.keys(t.data._attachments||{});function v(t){m++,h(t)}function y(n,r){var a=t.metadata.id,s=t.stemmedRevs||[];o&&i.auto_compaction&&(s=$t(t.metadata).concat(s)),s.length&&Ln(s,a,n),t.metadata.seq=r;var c=t.metadata.rev;delete t.metadata.rev;var h=o?"UPDATE "+gn+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+vn+" WHERE doc_id="+gn+".id AND rev=?) WHERE id=?":"INSERT INTO "+gn+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",f=Ve(t.metadata),m=o?[f,r,e,a]:[a,r,r,f];n.executeSql(h,m,(function(){d[u]={ok:!0,id:t.metadata.id,rev:c},p.set(a,t.metadata),l()}))}r&&(t.data._deleted=!0),g.forEach((function(n){var i=t.data._attachments[n];if(i.stub)m++,h();else{var r=i.data;delete i.data,i.revpos=parseInt(e,10),function(t,e,n){var i="SELECT digest FROM "+yn+" WHERE digest=?";s.executeSql(i,[t],(function(r,o){if(o.rows.length)return n();var a;i="INSERT INTO "+yn+" (digest, body, escaped) VALUES (?,?,1)",r.executeSql(i,[t,(a=e,a.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,""))],(function(){n()}),(function(){return n(),!1}))}))}(i.digest,r,v)}})),g.length||c()}function y(){Fe(t.revs_limit,l,i,p,s,d,v,n)}je(l,"binary",(function(t){if(t)return a(t);r.transaction((function(t){s=t,m((function(t){t?h=t:function(t){if(!l.length)return t();var e=0;function n(){++e===l.length&&t()}l.forEach((function(t){if(t._id&&Ot(t._id))return n();var e=t.metadata.id;s.executeSql("SELECT json FROM "+gn+" WHERE id = ?",[e],(function(t,i){if(i.rows.length){var r=ze(i.rows.item(0).json);p.set(e,r)}n()}))}))}(y)}))}),Cn(a),f)}))}var Sn=new g;function Dn(t){return t.websql(t.name,t.version,t.description,t.size)}function Mn(t){var e=Sn.get(t.name);return e||(e=function(t){try{return{db:Dn(t)}}catch(t){return{error:t}}}(t),Sn.set(t.name,e)),e}var An=new O;function Pn(t,e,n,i,r){var o=Object.keys(t._attachments||{});if(!o.length)return r&&r();var a=0;function s(){++a===o.length&&r&&r()}o.forEach((function(r){e.attachments&&e.include_docs?function(t,r){var o=t._attachments[r],a={binary:e.binary,ctx:i};n._getAttachment(t._id,r,o,a,(function(e,n){t._attachments[r]=j(C(o,["digest","content_type"]),{data:n}),s()}))}(t,r):(t._attachments[r].stub=!0,s())}))}var On="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+vn+" (seq, deleted)",In="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+vn+" (doc_id, rev)",Nn="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+gn+" (winningseq)",Rn="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+wn+" (seq)",jn="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+wn+" (digest, seq)",qn=vn+".seq = "+gn+".winningseq",Fn=vn+".seq AS seq, "+vn+".deleted AS deleted, "+vn+".json AS data, "+vn+".rev AS rev, "+gn+".json AS metadata";function Un(t,e){var n,i=this,r=null,o=function(t){return"size"in t?1e6*t.size:"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent)?5e6:1}(t),a=[];i._name=t.name;var s=Mn(j({},t,{version:1,description:t.name,size:o}));if(s.error)return Cn(e)(s.error);var u=s.db;function l(){P()&&(window.localStorage["_pouch__websqldb_"+i._name]=!0),e(null,i)}function c(t,e){t.executeSql(Nn),t.executeSql("ALTER TABLE "+vn+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],(function(){t.executeSql(On),t.executeSql("ALTER TABLE "+gn+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],(function(){t.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+gn+" (local, id)");var n="SELECT "+gn+".winningseq AS seq, "+gn+".json AS metadata FROM "+vn+" JOIN "+gn+" ON "+vn+".seq = "+gn+".winningseq";t.executeSql(n,[],(function(t,n){for(var i=[],r=[],o=0;o<n.rows.length;o++){var a=n.rows.item(o),s=a.seq,u=JSON.parse(a.metadata);Pt(u)&&i.push(s),Ot(u.id)&&r.push(u.id)}t.executeSql("UPDATE "+gn+"SET local = 1 WHERE id IN "+En(r.length),r,(function(){t.executeSql("UPDATE "+vn+" SET deleted = 1 WHERE seq IN "+En(i.length),i,e)}))}))}))}))}function h(t,e){var n="CREATE TABLE IF NOT EXISTS "+_n+" (id UNIQUE, rev, json)";t.executeSql(n,[],(function(){var n="SELECT "+gn+".id AS id, "+vn+".json AS data FROM "+vn+" JOIN "+gn+" ON "+vn+".seq = "+gn+".winningseq WHERE local = 1";t.executeSql(n,[],(function(t,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r));!function n(){if(!i.length)return e(t);var r=i.shift(),o=JSON.parse(r.data)._rev;t.executeSql("INSERT INTO "+_n+" (id, rev, json) VALUES (?,?,?)",[r.id,o,r.data],(function(t){t.executeSql("DELETE FROM "+gn+" WHERE id=?",[r.id],(function(t){t.executeSql("DELETE FROM "+vn+" WHERE seq=?",[r.seq],(function(){n()}))}))}))}()}))}))}function d(t,e){function i(i){!function r(){if(!i.length)return e(t);var o=fn(i.shift().hex,n),a=o.lastIndexOf("::"),s=o.substring(0,a),u=o.substring(a+2),l="UPDATE "+vn+" SET doc_id=?, rev=? WHERE doc_id_rev=?";t.executeSql(l,[s,u,o],(function(){r()}))}()}var r="ALTER TABLE "+vn+" ADD COLUMN doc_id";t.executeSql(r,[],(function(t){var e="ALTER TABLE "+vn+" ADD COLUMN rev";t.executeSql(e,[],(function(t){t.executeSql(In,[],(function(t){var e="SELECT hex(doc_id_rev) as hex FROM "+vn;t.executeSql(e,[],(function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r));i(n)}))}))}))}))}function p(t,e){function n(t){var n="SELECT COUNT(*) AS cnt FROM "+yn;t.executeSql(n,[],(function(t,n){if(!n.rows.item(0).cnt)return e(t);var i=0;!function n(){var r=kn(Fn+", "+gn+".id AS id",[gn,vn],qn,null,gn+".id ");r+=" LIMIT 10 OFFSET "+i,i+=10,t.executeSql(r,[],(function(t,i){if(!i.rows.length)return e(t);var r,o,a,s={};for(var u=0;u<i.rows.length;u++)for(var l=i.rows.item(u),c=$n(l.data,l.id,l.rev),h=Object.keys(c._attachments||{}),d=0;d<h.length;d++){var p=c._attachments[h[d]];r=p.digest,o=l.seq,a=void 0,-1===(a=s[r]=s[r]||[]).indexOf(o)&&a.push(o)}var f=[];if(Object.keys(s).forEach((function(t){s[t].forEach((function(e){f.push([t,e])}))})),!f.length)return n();var m=0;f.forEach((function(e){var i="INSERT INTO "+wn+" (digest, seq) VALUES (?,?)";t.executeSql(i,e,(function(){++m===f.length&&n()}))}))}))}()}))}var i="CREATE TABLE IF NOT EXISTS "+wn+" (digest, seq INTEGER)";t.executeSql(i,[],(function(t){t.executeSql(jn,[],(function(t){t.executeSql(Rn,[],n)}))}))}function f(t,e){var n="ALTER TABLE "+yn+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";t.executeSql(n,[],e)}function m(t,e){var n="ALTER TABLE "+gn+" ADD COLUMN max_seq INTEGER";t.executeSql(n,[],(function(t){var n="UPDATE "+gn+" SET max_seq=(SELECT MAX(seq) FROM "+vn+" WHERE doc_id=id)";t.executeSql(n,[],(function(t){var n="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+gn+" (max_seq)";t.executeSql(n,[],e)}))}))}function g(){for(;a.length>0;){a.pop()(null,r)}}function v(t,e){if(0===e){var n="CREATE TABLE IF NOT EXISTS "+bn+" (dbid, db_version INTEGER)",i="CREATE TABLE IF NOT EXISTS "+yn+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",o="CREATE TABLE IF NOT EXISTS "+wn+" (digest, seq INTEGER)",a="CREATE TABLE IF NOT EXISTS "+gn+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",s="CREATE TABLE IF NOT EXISTS "+vn+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",u="CREATE TABLE IF NOT EXISTS "+_n+" (id UNIQUE, rev, json)";t.executeSql(i),t.executeSql(u),t.executeSql(o,[],(function(){t.executeSql(Rn),t.executeSql(jn)})),t.executeSql(a,[],(function(){t.executeSql(Nn),t.executeSql(s,[],(function(){t.executeSql(On),t.executeSql(In),t.executeSql(n,[],(function(){var e="INSERT INTO "+bn+" (db_version, dbid) VALUES (?,?)",n=[7,r=vt()];t.executeSql(e,n,(function(){g()}))}))}))}))}else{var l=[c,h,d,p,f,m,function(){e<7&&t.executeSql("UPDATE "+bn+" SET db_version = 7");var n="SELECT dbid FROM "+bn;t.executeSql(n,[],(function(t,e){r=e.rows.item(0).dbid,g()}))}],v=e,y=function(t){l[v-1](t,y),v++};y(t)}}function y(t,e){var n="SELECT MAX(seq) AS seq FROM "+vn;t.executeSql(n,[],(function(t,n){var i=n.rows.item(0).seq||0;e(i)}))}function b(t,e){var n=kn("COUNT("+gn+".id) AS 'num'",[gn,vn],qn,vn+".deleted=0");t.executeSql(n,[],(function(t,n){e(n.rows.item(0).num)}))}"function"!=typeof u.readTransaction&&(u.readTransaction=u.transaction),u.transaction((function(t){!function(t,e){t.executeSql('SELECT HEX("a") AS hex',[],(function(t,i){var r=i.rows.item(0).hex;n=2===r.length?"UTF-8":"UTF-16",e()}))}(t,(function(){!function(t){var e="SELECT sql FROM sqlite_master WHERE tbl_name = "+bn;t.executeSql(e,[],(function(t,e){e.rows.length?/db_version/.test(e.rows.item(0).sql)?t.executeSql("SELECT db_version FROM "+bn,[],(function(t,e){v(t,e.rows.item(0).db_version)})):t.executeSql("ALTER TABLE "+bn+" ADD COLUMN db_version INTEGER",[],(function(){v(t,1)})):v(t,0)}))}(t)}))}),Cn(e),l),i._remote=!1,i.type=function(){return"websql"},i._id=w((function(t){t(null,r)})),i._info=function(t){var e,i;u.readTransaction((function(t){y(t,(function(t){e=t})),b(t,(function(t){i=t}))}),Cn(t),(function(){t(null,{doc_count:i,update_seq:e,websql_encoding:n})}))},i._bulkDocs=function(e,n,r){Tn(t,e,n,i,u,An,r)},i._get=function(t,e,n){var r,o,a,s,l=e.ctx;if(!l)return u.readTransaction((function(r){i._get(t,j({ctx:r},e),n)}));function c(t){n(t,{doc:r,metadata:o,ctx:l})}if(e.rev){if(e.latest)return void function(t,e,n,i,r){var o=kn(Fn,[gn,vn],qn,gn+".id=?"),a=[e];t.executeSql(o,a,(function(t,e){if(!e.rows.length){var o=nt(U,"missing");return r(o)}var a=ze(e.rows.item(0).metadata);i(It(n,a))}))}(l,t,e.rev,(function(r){e.latest=!1,e.rev=r,i._get(t,e,n)}),c);a=kn(Fn,[gn,vn],gn+".id="+vn+".doc_id",[vn+".doc_id=?",vn+".rev=?"]),s=[t,e.rev]}else a=kn(Fn,[gn,vn],qn,gn+".id=?"),s=[t];l.executeSql(a,s,(function(t,n){if(!n.rows.length)return c(nt(U,"missing"));var i=n.rows.item(0);if(o=ze(i.metadata),i.deleted&&!e.rev)return c(nt(U,"deleted"));r=$n(i.data,o.id,i.rev),c()}))},i._allDocs=function(t,e){var n,r,o=[],a="startkey"in t&&t.startkey,s="endkey"in t&&t.endkey,l="key"in t&&t.key,c="keys"in t&&t.keys,h="descending"in t&&t.descending,d="limit"in t?t.limit:-1,p="skip"in t?t.skip:0,f=!1!==t.inclusive_end,m=[],g=[];if(c){var v=[],_="";c.forEach((function(t){-1===v.indexOf(t)&&(v.push(t),_+="?,")})),_=_.substring(0,_.length-1),g.push(gn+".id IN ("+_+")"),m=m.concat(v)}else if(!1!==l)g.push(gn+".id = ?"),m.push(l);else if(!1!==a||!1!==s){if(!1!==a&&(g.push(gn+".id "+(h?"<=":">=")+" ?"),m.push(a)),!1!==s){var w=h?">":"<";f&&(w+="="),g.push(gn+".id "+w+" ?"),m.push(s)}!1!==l&&(g.push(gn+".id = ?"),m.push(l))}c||g.push(vn+".deleted = 0"),u.readTransaction((function(e){if(b(e,(function(t){n=t})),t.update_seq&&y(e,(function(t){r=t})),0!==d){var a=kn(Fn,[gn,vn],qn,g,gn+".id "+(h?"DESC":"ASC"));a+=" LIMIT "+d+" OFFSET "+p,e.executeSql(a,m,(function(e,n){for(var r=0,a=n.rows.length;r<a;r++){var s=n.rows.item(r),u=ze(s.metadata),l=u.id,h=$n(s.data,l,s.rev),d=h._rev,p={id:l,key:l,value:{rev:d}};if(t.include_docs){if(p.doc=h,p.doc._rev=d,t.conflicts){var f=xt(u);f.length&&(p.doc._conflicts=f)}Pn(p.doc,t,i,e)}if(s.deleted){if(!c)continue;p.value.deleted=!0,p.doc=null}if(c){var m=c.indexOf(l,m);do{o[m]=p,m=c.indexOf(l,m+1)}while(m>-1&&m<c.length)}else o.push(p)}c&&c.forEach((function(t,e){o[e]||(o[e]={key:t,error:"not_found"})}))}))}}),Cn(e),(function(){var i={total_rows:n,offset:t.skip,rows:o};t.update_seq&&(i.update_seq=r),e(null,i)}))},i._changes=function(t){if((t=_(t)).continuous){var e=i._name+":"+vt();return An.addListener(i._name,e,i,t),An.notify(i._name),{cancel:function(){An.removeListener(i._name,e)}}}var n=t.descending;t.since=t.since&&!n?t.since:0;var r,o="limit"in t?t.limit:-1;0===o&&(o=1),r="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var a=[],s=0;!function(){var e=gn+".json AS metadata, "+gn+".max_seq AS maxSeq, "+vn+".json AS winningDoc, "+vn+".rev AS winningRev ",l=gn+" JOIN "+vn,c=gn+".id="+vn+".doc_id AND "+gn+".winningseq="+vn+".seq",h=["maxSeq > ?"],d=[t.since];t.doc_ids&&(h.push(gn+".id IN "+En(t.doc_ids.length)),d=d.concat(t.doc_ids));var p=kn(e,l,c,h,"maxSeq "+(n?"DESC":"ASC")),f=rt(t);t.view||t.filter||(p+=" LIMIT "+o);var m=t.since||0;u.readTransaction((function(e){e.executeSql(p,d,(function(e,n){function u(e){return function(){t.onChange(e)}}for(var l=0,c=n.rows.length;l<c;l++){var h=n.rows.item(l),d=ze(h.metadata);m=h.maxSeq;var p=$n(h.winningDoc,d.id,h.winningRev),g=t.processChange(p,d,t);g.seq=h.maxSeq;var v=f(g);if("object"==typeof v)return t.complete(v);if(v&&(s++,r&&a.push(g),t.attachments&&t.include_docs?Pn(p,t,i,e,u(g)):u(g)()),s===o)break}}))}),Cn(t.complete),(function(){t.continuous||t.complete(null,{results:a,last_seq:m})}))}()},i._close=function(t){t()},i._getAttachment=function(t,e,i,r,o){var a,s=r.ctx,u=i.digest,l=i.content_type,c="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+yn+" WHERE digest=?";s.executeSql(c,[u],(function(t,e){var i=e.rows.item(0),s=i.escaped?i.body.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""):fn(i.body,n);a=r.binary?ke(s,l):xe(s),o(null,a)}))},i._getRevisionTree=function(t,e){u.readTransaction((function(n){var i="SELECT json AS metadata FROM "+gn+" WHERE id = ?";n.executeSql(i,[t],(function(t,n){if(n.rows.length){var i=ze(n.rows.item(0).metadata);e(null,i.rev_tree)}else e(nt(U))}))}))},i._doCompaction=function(t,e,n){if(!e.length)return n();u.transaction((function(n){var i="SELECT json AS metadata FROM "+gn+" WHERE id = ?";n.executeSql(i,[t],(function(n,i){var r=ze(i.rows.item(0).metadata);_t(r.rev_tree,(function(t,n,i,r,o){var a=n+"-"+i;-1!==e.indexOf(a)&&(o.status="missing")}));var o="UPDATE "+gn+" SET json = ? WHERE id = ?";n.executeSql(o,[Ve(r),t])})),Ln(e,t,n)}),Cn(n),(function(){n()}))},i._getLocal=function(t,e){u.readTransaction((function(n){var i="SELECT json, rev FROM "+_n+" WHERE id=?";n.executeSql(i,[t],(function(n,i){if(i.rows.length){var r=i.rows.item(0),o=$n(r.json,t,r.rev);e(null,o)}else e(nt(U))}))}))},i._putLocal=function(t,e,n){"function"==typeof e&&(n=e,e={}),delete t._revisions;var i,r=t._rev,o=t._id;i=t._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var a,s=xn(t);function l(t){var u,l;r?(u="UPDATE "+_n+" SET rev=?, json=? WHERE id=? AND rev=?",l=[i,s,o,r]):(u="INSERT INTO "+_n+" (id, rev, json) VALUES (?,?,?)",l=[o,i,s]),t.executeSql(u,l,(function(t,r){r.rowsAffected?(a={ok:!0,id:o,rev:i},e.ctx&&n(null,a)):n(nt(B))}),(function(){return n(nt(B)),!1}))}e.ctx?l(e.ctx):u.transaction(l,Cn(n),(function(){a&&n(null,a)}))},i._removeLocal=function(t,e,n){var i;function r(r){var o="DELETE FROM "+_n+" WHERE id=? AND rev=?",a=[t._id,t._rev];r.executeSql(o,a,(function(r,o){if(!o.rowsAffected)return n(nt(U));i={ok:!0,id:t._id,rev:"0-0"},e.ctx&&n(null,i)}))}"function"==typeof e&&(n=e,e={}),e.ctx?r(e.ctx):u.transaction(r,Cn(n),(function(){i&&n(null,i)}))},i._destroy=function(t,e){An.removeAllListeners(i._name),u.transaction((function(t){[gn,vn,yn,bn,_n,wn].forEach((function(e){t.executeSql("DROP TABLE IF EXISTS "+e,[])}))}),Cn(e),(function(){P()&&(delete window.localStorage["_pouch__websqldb_"+i._name],delete window.localStorage[i._name]),e(null,{ok:!0})}))}}function Bn(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var t=P(),e="_pouch__websqldb_valid_"+navigator.userAgent;if(t&&localStorage[e])return"1"===localStorage[e];var n=function(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(t){return!1}}();return t&&(localStorage[e]=n?"1":"0"),n}function zn(t,e,n,i){return openDatabase(t,e,n,i)}function Vn(t,e){I("warn","WebSQL is deprecated and will be removed in future releases of PouchDB. Please migrate to IndexedDB: https://pouchdb.com/2018/01/23/pouchdb-6.4.2.html");var n=j({websql:zn},t);Un.call(this,n,e)}function Hn(t,e){var n,i,r,o=new Headers,a={method:t.method,credentials:"include",headers:o};return t.json&&(o.set("Accept","application/json"),o.set("Content-Type",t.headers["Content-Type"]||"application/json")),t.body&&t.processData&&"string"!=typeof t.body?a.body=JSON.stringify(t.body):a.body="body"in t?t.body:null,Object.keys(t.headers).forEach((function(e){t.headers.hasOwnProperty(e)&&o.set(e,t.headers[e])})),n=function(){for(var t={},e=new p((function(e,n){t.resolve=e,t.reject=n})),n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.promise=e,p.resolve().then((function(){return fetch.apply(null,n)})).then((function(e){t.resolve(e)})).catch((function(e){t.reject(e)})),t}(t.url,a),t.timeout>0&&(i=setTimeout((function(){n.reject(new Error("Load timeout for resource: "+t.url))}),t.timeout)),n.promise.then((function(e){return r={statusCode:e.status},t.timeout>0&&clearTimeout(i),r.statusCode>=200&&r.statusCode<300?t.binary?e.blob():e.text():e.json()})).then((function(t){r.statusCode>=200&&r.statusCode<300?e(null,r,t):(t.status=r.statusCode,e(t))})).catch((function(t){t||(t=new Error("canceled")),e(t)})),{abort:n.reject}}Vn.valid=function(){return"function"==typeof openDatabase&&Bn()},Vn.use_prefix=!0;var Wn=function(){try{return new XMLHttpRequest,!0}catch(t){return!1}}();function Zn(t,e){return Wn||t.xhr?function(t,e){var n,i,r=!1,o=function(){r=!0,n.abort(),s()},a={abort:function(){n.abort(),s()}},s=function(){clearTimeout(i),a.abort=function(){},n&&(n.onprogress=void 0,n.upload&&(n.upload.onprogress=void 0),n.onreadystatechange=void 0,n=void 0)};n=t.xhr?new t.xhr:new XMLHttpRequest;try{n.open(t.method,t.url)}catch(t){return e(new Error(t.name||"Url is invalid"))}for(var u in n.withCredentials=!("withCredentials"in t)||t.withCredentials,"GET"===t.method?delete t.headers["Content-Type"]:t.json&&(t.headers.Accept="application/json",t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.body&&t.processData&&"string"!=typeof t.body&&(t.body=JSON.stringify(t.body))),t.binary&&(n.responseType="arraybuffer"),"body"in t||(t.body=null),t.headers)t.headers.hasOwnProperty(u)&&n.setRequestHeader(u,t.headers[u]);return t.timeout>0&&(i=setTimeout(o,t.timeout),n.onprogress=function(){clearTimeout(i),4!==n.readyState&&(i=setTimeout(o,t.timeout))},void 0!==n.upload&&(n.upload.onprogress=n.onprogress)),n.onreadystatechange=function(){if(4===n.readyState){var i={statusCode:n.status};if(n.status>=200&&n.status<300){var o;o=t.binary?$e([n.response||""],{type:n.getResponseHeader("Content-Type")}):n.responseText,e(null,i,o)}else{var a={};if(r)(a=new Error("ETIMEDOUT")).code="ETIMEDOUT";else if("string"==typeof n.response&&""!==n.response)try{a=JSON.parse(n.response)}catch(t){}a.status=n.status,e(a)}s()}},t.body&&t.body instanceof Blob?Me(t.body,(function(t){n.send(t)})):n.send(t.body),a}(t,e):Hn(t,e)}function Gn(t,e){t=_(t);return(t=j({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},t)).json&&(t.binary||(t.headers.Accept="application/json"),t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json"),t.binary&&(t.encoding=null,t.json=!1),t.processData||(t.json=!1),Zn(t,(function(n,i,r){if(n)return e(it(n));var o,a=i.headers&&i.headers["content-type"],s=r||"";if(!t.binary&&(t.json||!t.processData)&&"object"!=typeof s&&(/json/.test(a)||/^[\s]*\{/.test(s)&&/\}[\s]*$/.test(s)))try{s=JSON.parse(s.toString())}catch(t){}i.statusCode>=200&&i.statusCode<300?function(e,n,i){if(!t.binary&&t.json&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){return i(t)}Array.isArray(e)&&(e=e.map((function(t){return t.error||t.missing?it(t):t}))),t.binary,i(null,e,n)}(s,i,e):((o=it(s)).status=i.statusCode,e(o))}))}function Yn(t,e){var n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",i=-1!==n.indexOf("safari")&&-1===n.indexOf("chrome"),r=-1!==n.indexOf("msie"),o=-1!==n.indexOf("trident"),a=-1!==n.indexOf("edge"),s=i||(r||o||a)&&"GET"===t.method,u=!("cache"in t)||t.cache;if(!/^blob:/.test(t.url)&&(s||!u)){var l=-1!==t.url.indexOf("?");t.url+=(l?"&":"?")+"_nonce="+Date.now()}return Gn(t,e)}var Xn={};function Kn(t){var e=(t.doc||t.ok)._attachments;e&&Object.keys(e).forEach((function(t){var n=e[t];n.data=Le(n.data,n.content_type)}))}function Jn(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function Qn(t){return t._attachments&&Object.keys(t._attachments)?p.all(Object.keys(t._attachments).map((function(e){var n=t._attachments[e];if(n.data&&"string"!=typeof n.data)return new p((function(t){De(n.data,t)})).then((function(t){n.data=t}))}))):p.resolve()}function ti(t,e){if(function(t){if(!t.prefix)return!1;var e=pt(t.prefix).protocol;return"http"===e||"https"===e}(e)){var n=e.name.substr(e.prefix.length);t=e.prefix+encodeURIComponent(n)}var i=pt(t);(i.user||i.password)&&(i.auth={username:i.user,password:i.password});var r=i.path.replace(/(^\/|\/$)/g,"").split("/");return i.db=r.pop(),-1===i.db.indexOf("%")&&(i.db=encodeURIComponent(i.db)),i.path=r.join("/"),i}function ei(t,e){return ni(t,t.db+"/"+e)}function ni(t,e){var n=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+n+e}function ii(t){return"?"+Object.keys(t).map((function(e){return e+"="+encodeURIComponent(t[e])})).join("&")}function ri(t,e){var n,i=this,r=ti(t.name,t),s=ei(r,""),u=(t=_(t)).ajax||{};if(t.auth||r.auth){var l=t.auth||r.auth,c=l.username+":"+l.password,h=xe(unescape(encodeURIComponent(c)));u.headers=u.headers||{},u.headers.Authorization="Basic "+h}function d(t,e,n){var r=(t||{}).ajax||{},o=j(_(u),r,e),a=_(u.headers||{});return o.headers=j(a,r.headers,e.headers||{}),i.constructor.listeners("debug").length&&i.constructor.emit("debug",["http",o.method,o.url]),i._ajax(o,n)}function f(t,e){return new p((function(n,i){d(t,e,(function(t,e){if(t)return i(t);n(e)}))}))}function m(t,e){return x(t,o((function(t){g().then((function(){return e.apply(this,t)})).catch((function(e){t.pop()(e)}))})))}function g(){return t.skipSetup||t.skip_setup?p.resolve():n||((n=f({},{method:"GET",url:s}).catch((function(t){return t&&t.status&&404===t.status?(R(404,"PouchDB is just detecting if the remote exists."),f({},{method:"PUT",url:s})):p.reject(t)})).catch((function(t){return!(!t||!t.status||412!==t.status)||p.reject(t)}))).catch((function(){n=null})),n)}function v(t){return t.split("/").map(encodeURIComponent).join("/")}i._ajax=Yn,a((function(){e(null,i)})),i._remote=!0,i.type=function(){return"http"},i.id=m("id",(function(t){d({},{method:"GET",url:ni(r,"")},(function(e,n){var i=n&&n.uuid?n.uuid+r.db:ei(r,"");t(null,i)}))})),i.request=m("request",(function(t,e){t.url=ei(r,t.url),d({},t,e)})),i.compact=m("compact",(function(t,e){"function"==typeof t&&(e=t,t={}),d(t=_(t),{url:ei(r,"_compact"),method:"POST"},(function(){!function n(){i.info((function(i,r){r&&!r.compact_running?e(null,{ok:!0}):setTimeout(n,t.interval||200)}))}()}))})),i.bulkGet=x("bulkGet",(function(t,e){var n=this;function i(e){var n={};t.revs&&(n.revs=!0),t.attachments&&(n.attachments=!0),t.latest&&(n.latest=!0),d(t,{url:ei(r,"_bulk_get"+ii(n)),method:"POST",body:{docs:t.docs}},(function(n,i){!n&&t.attachments&&t.binary&&i.results.forEach((function(t){t.docs.forEach(Kn)})),e(n,i)}))}function o(){var i=Math.ceil(t.docs.length/50),r=0,o=new Array(i);function a(t){return function(n,a){o[t]=a.results,++r===i&&e(null,{results:ot(o)})}}for(var s=0;s<i;s++){var l=C(t,["revs","attachments","binary","latest"]);l.ajax=u,l.docs=t.docs.slice(50*s,Math.min(t.docs.length,50*(s+1))),M(n,l,a(s))}}var a=ni(r,""),s=Xn[a];"boolean"!=typeof s?i((function(t,n){t?(Xn[a]=!1,R(t.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):(Xn[a]=!0,e(null,n))})):s?i(e):o()})),i._info=function(t){g().then((function(){d({},{method:"GET",url:ei(r,"")},(function(e,n){if(e)return t(e);n.host=ei(r,""),t(null,n)}))})).catch(t)},i.get=m("get",(function(t,e,n){"function"==typeof e&&(n=e,e={});var i={};(e=_(e)).revs&&(i.revs=!0),e.revs_info&&(i.revs_info=!0),e.latest&&(i.latest=!0),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),i.open_revs=e.open_revs),e.rev&&(i.rev=e.rev),e.conflicts&&(i.conflicts=e.conflicts),e.update_seq&&(i.update_seq=e.update_seq),t=Jn(t);var o={method:"GET",url:ei(r,t+ii(i))};function a(t){var n=t._attachments,i=n&&Object.keys(n);if(n&&i.length)return function(t,e){return new p((function(n,i){var r,o=0,a=0,s=0,u=t.length;function l(){++s===u?r?i(r):n():d()}function c(){o--,l()}function h(t){o--,r=r||t,l()}function d(){for(;o<e&&a<u;)o++,t[a++]().then(c,h)}d()}))}(i.map((function(i){return function(){return function(i){var o=n[i],a=Jn(t._id)+"/"+v(i)+"?rev="+t._rev;return f(e,{method:"GET",url:ei(r,a),binary:!0}).then((function(t){return e.binary?t:new p((function(e){De(t,e)}))})).then((function(t){delete o.stub,delete o.length,o.data=t}))}(i)}})),5)}f(e,o).then((function(t){return p.resolve().then((function(){if(e.attachments)return n=t,Array.isArray(n)?p.all(n.map((function(t){if(t.ok)return a(t.ok)}))):a(n);var n})).then((function(){n(null,t)}))})).catch((function(e){e.docId=t,n(e)}))})),i.remove=m("remove",(function(t,e,n,i){var o;"string"==typeof e?(o={_id:t,_rev:e},"function"==typeof n&&(i=n,n={})):(o=t,"function"==typeof e?(i=e,n={}):(i=n,n=e));var a=o._rev||n.rev;d(n,{method:"DELETE",url:ei(r,Jn(o._id))+"?rev="+a},i)})),i.getAttachment=m("getAttachment",(function(t,e,n,i){"function"==typeof n&&(i=n,n={});var o=n.rev?"?rev="+n.rev:"";d(n,{method:"GET",url:ei(r,Jn(t))+"/"+v(e)+o,binary:!0},i)})),i.removeAttachment=m("removeAttachment",(function(t,e,n,i){d({},{method:"DELETE",url:ei(r,Jn(t)+"/"+v(e))+"?rev="+n},i)})),i.putAttachment=m("putAttachment",(function(t,e,n,i,o,a){"function"==typeof o&&(a=o,o=i,i=n,n=null);var s=Jn(t)+"/"+v(e),l=ei(r,s);if(n&&(l+="?rev="+n),"string"==typeof i){var c;try{c=we(i)}catch(t){return a(nt(Z,"Attachment is not a valid base64 string"))}i=c?ke(c,o):""}d({},{headers:{"Content-Type":o},method:"PUT",url:l,processData:!1,body:i,timeout:u.timeout||6e4},a)})),i._bulkDocs=function(t,e,n){t.new_edits=e.new_edits,g().then((function(){return p.all(t.docs.map(Qn))})).then((function(){d(e,{method:"POST",url:ei(r,"_bulk_docs"),timeout:e.timeout,body:t},(function(t,e){if(t)return n(t);e.forEach((function(t){t.ok=!0})),n(null,e)}))})).catch(n)},i._put=function(t,e,n){g().then((function(){return Qn(t)})).then((function(){d(e,{method:"PUT",url:ei(r,Jn(t._id)),body:t},(function(e,i){if(e)return e.docId=t&&t._id,n(e);n(null,i)}))})).catch(n)},i.allDocs=m("allDocs",(function(t,e){"function"==typeof t&&(e=t,t={});var n,i={},o="GET";(t=_(t)).conflicts&&(i.conflicts=!0),t.update_seq&&(i.update_seq=!0),t.descending&&(i.descending=!0),t.include_docs&&(i.include_docs=!0),t.attachments&&(i.attachments=!0),t.key&&(i.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(i.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(i.endkey=JSON.stringify(t.endkey)),void 0!==t.inclusive_end&&(i.inclusive_end=!!t.inclusive_end),void 0!==t.limit&&(i.limit=t.limit),void 0!==t.skip&&(i.skip=t.skip);var a=ii(i);void 0!==t.keys&&(o="POST",n={keys:t.keys}),f(t,{method:o,url:ei(r,"_all_docs"+a),body:n}).then((function(n){t.include_docs&&t.attachments&&t.binary&&n.rows.forEach(Kn),e(null,n)})).catch(e)})),i._changes=function(t){var e="batch_size"in t?t.batch_size:25;!(t=_(t)).continuous||"heartbeat"in t||(t.heartbeat=1e4);var n="timeout"in t?t.timeout:"timeout"in u?u.timeout:3e4;"timeout"in t&&t.timeout&&n-t.timeout<5e3&&(n=t.timeout+5e3),"heartbeat"in t&&t.heartbeat&&n-t.heartbeat<5e3&&(n=t.heartbeat+5e3);var i={};"timeout"in t&&t.timeout&&(i.timeout=t.timeout);var o,s=void 0!==t.limit&&t.limit;o="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var l=s;if(t.style&&(i.style=t.style),(t.include_docs||t.filter&&"function"==typeof t.filter)&&(i.include_docs=!0),t.attachments&&(i.attachments=!0),t.continuous&&(i.feed="longpoll"),t.seq_interval&&(i.seq_interval=t.seq_interval),t.conflicts&&(i.conflicts=!0),t.descending&&(i.descending=!0),t.update_seq&&(i.update_seq=!0),"heartbeat"in t&&t.heartbeat&&(i.heartbeat=t.heartbeat),t.filter&&"string"==typeof t.filter&&(i.filter=t.filter),t.view&&"string"==typeof t.view&&(i.filter="_view",i.view=t.view),t.query_params&&"object"==typeof t.query_params)for(var c in t.query_params)t.query_params.hasOwnProperty(c)&&(i[c]=t.query_params[c]);var h,p,f,m="GET";t.doc_ids?(i.filter="_doc_ids",m="POST",h={doc_ids:t.doc_ids}):t.selector&&(i.filter="_selector",m="POST",h={selector:t.selector});var v=function(o,a){if(!t.aborted){i.since=o,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),t.descending?s&&(i.limit=l):i.limit=!s||l>e?e:l;var u={method:m,url:ei(r,"_changes"+ii(i)),timeout:n,body:h};f=o,t.aborted||g().then((function(){p=d(t,u,a)})).catch(a)}},y={results:[]},b=function(n,i){if(!t.aborted){var r=0;if(i&&i.results){r=i.results.length,y.last_seq=i.last_seq;var u=null,c=null;"number"==typeof i.pending&&(u=i.pending),"string"!=typeof y.last_seq&&"number"!=typeof y.last_seq||(c=y.last_seq);t.query_params,i.results=i.results.filter((function(e){l--;var n=rt(t)(e);return n&&(t.include_docs&&t.attachments&&t.binary&&Kn(e),o&&y.results.push(e),t.onChange(e,u,c)),n}))}else if(n)return t.aborted=!0,void t.complete(n);i&&i.last_seq&&(f=i.last_seq);var h=s&&l<=0||i&&r<e||t.descending;(!t.continuous||s&&l<=0)&&h?t.complete(null,y):a((function(){v(f,b)}))}};return v(t.since||0,b),{cancel:function(){t.aborted=!0,p&&p.abort()}}},i.revsDiff=m("revsDiff",(function(t,e,n){"function"==typeof e&&(n=e,e={}),d(e,{method:"POST",url:ei(r,"_revs_diff"),body:t},n)})),i._close=function(t){t()},i._destroy=function(t,e){d(t,{url:ei(r,""),method:"DELETE"},(function(t,n){if(t&&t.status&&404!==t.status)return e(t);e(null,n)}))}}function oi(t){this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,oi)}catch(t){}}function ai(t){this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,ai)}catch(t){}}function si(t){this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,si)}catch(t){}}function ui(t,e){return e&&t.then((function(t){a((function(){e(null,t)}))}),(function(t){a((function(){e(t)}))})),t}function li(t,e){return function(){var n=arguments,i=this;return t.add((function(){return e.apply(i,n)}))}}function ci(t){var e=new m(t),n=new Array(e.size),i=-1;return e.forEach((function(t){n[++i]=t})),n}function hi(t){var e=new Array(t.size),n=-1;return t.forEach((function(t,i){e[++n]=i})),e}function di(t){return new si("builtin "+t+" function requires map values to be numbers or number arrays")}function pi(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];if("number"!=typeof r){if(!Array.isArray(r))throw di("_sum");e="number"==typeof e?[e]:e;for(var o=0,a=r.length;o<a;o++){var s=r[o];if("number"!=typeof s)throw di("_sum");void 0===e[o]?e.push(s):e[o]+=s}}else"number"==typeof e?e+=r:e[0]+=r}return e}ri.valid=function(){return!0},u(oi,Error),u(ai,Error),u(si,Error);var fi=I.bind(null,"log"),mi=Array.isArray,gi=JSON.parse;function vi(t,e){return ft("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:pi,log:fi,isArray:mi,toJSON:gi})}function yi(){this.promise=new p((function(t){t()}))}function _i(t){if(!t)return"undefined";switch(typeof t){case"function":case"string":return t.toString();default:return JSON.stringify(t)}}function bi(t,e,n,i,r,o){var a,s=function(t,e){return _i(t)+_i(e)+"undefined"}(n,i);if(!r&&(a=t._cachedViews=t._cachedViews||{})[s])return a[s];var u=t.info().then((function(u){var l,c=u.db_name+"-mrview-"+(r?"temp":(l=s,h.hash(l)));return mt(t,"_local/"+o,(function(t){t.views=t.views||{};var n=e;-1===n.indexOf("/")&&(n=e+"/"+e);var i=t.views[n]=t.views[n]||{};if(!i[c])return i[c]=!0,t})).then((function(){return t.registerDependentDatabase(c).then((function(e){var r=e.db;r.auto_compaction=!0;var o={name:c,db:r,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:i};return o.db.get("_local/lastSeq").catch((function(t){if(404!==t.status)throw t})).then((function(t){return o.seq=t?t.seq:0,a&&o.db.once("destroyed",(function(){delete a[s]})),o}))}))}))}));return a&&(a[s]=u),u}yi.prototype.add=function(t){return this.promise=this.promise.catch((function(){})).then((function(){return t()})),this.promise},yi.prototype.finish=function(){return this.promise};var wi={},xi=new yi;function $i(t){return-1===t.indexOf("/")?[t,t]:t.split("/")}function Ei(t,e){try{t.emit("error",e)}catch(t){I("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),I("error",e)}}var ki=function(t,e){return pi(e)},Li=function(t,e){return e.length},Ci=function(t,e){return{sum:pi(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:function(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];e+=r*r}return e}(e)}};var Ti=function(t,e,n,i){function r(t,e,n){try{e(n)}catch(e){Ei(t,e)}}function s(t,e,n,i,r){try{return{output:e(n,i,r)}}catch(e){return Ei(t,e),{error:e}}}function u(t,e){var n=Kt(t.key,e.key);return 0!==n?n:Kt(t.value,e.value)}function l(t,e,n){return n=n||0,"number"==typeof e?t.slice(n,e+n):n>0?t.slice(n):t}function c(t){var e=t.value;return e&&"object"==typeof e&&e._id||t.id}function h(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&function(t){t.rows.forEach((function(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach((function(t){var n=e[t];e[t].data=Le(n.data,n.content_type)}))}))}(e),e}}function d(t,e,n,i){var r=e[t];void 0!==r&&(i&&(r=encodeURIComponent(JSON.stringify(r))),n.push(t+"="+r))}function f(t){if(void 0!==t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function v(t,e){var n=t.descending?"endkey":"startkey",i=t.descending?"startkey":"endkey";if(void 0!==t[n]&&void 0!==t[i]&&Kt(t[n],t[i])>0)throw new oi("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==t.reduce){if(t.include_docs)throw new oi("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new oi("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach((function(e){var n=function(t){if(t){if("number"!=typeof t)return new oi('Invalid value for integer: "'+t+'"');if(t<0)return new oi('Invalid value for positive integer: "'+t+'"')}}(t[e]);if(n)throw n}))}function y(t){return function(e){if(404===e.status)return t;throw e}}function _(t,e,n){var i="_local/doc_"+t,r={_id:i,keys:[]},o=n.get(t),a=o[0];return(function(t){return 1===t.length&&/^1-/.test(t[0].rev)}(o[1])?p.resolve(r):e.db.get(i).catch(y(r))).then((function(t){return function(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):p.resolve({rows:[]})}(t).then((function(e){return function(t,e){for(var n=[],i=new m,r=0,o=e.rows.length;r<o;r++){var s=e.rows[r].doc;if(s&&(n.push(s),i.add(s._id),s._deleted=!a.has(s._id),!s._deleted)){var u=a.get(s._id);"value"in u&&(s.value=u.value)}}var l=hi(a);return l.forEach((function(t){if(!i.has(t)){var e={_id:t},r=a.get(t);"value"in r&&(e.value=r.value),n.push(e)}})),t.keys=ci(l.concat(t.keys)),n.push(t),n}(t,e)}))}))}function b(t){var e="string"==typeof t?t:t.name,n=wi[e];return n||(n=wi[e]=new yi),n}function w(t){return li(b(t),(function(){return function(t){var n,i;var o=e(t.mapFun,(function(t,e){var r={id:i._id,key:Jt(t)};null!=e&&(r.value=Jt(e)),n.push(r)})),a=t.seq||0;function s(e,n){return function(){return function(t,e,n){return t.db.get("_local/lastSeq").catch(y({_id:"_local/lastSeq",seq:0})).then((function(i){var r=hi(e);return p.all(r.map((function(n){return _(n,t,e)}))).then((function(e){var r=ot(e);return i.seq=n,r.push(i),t.db.bulkDocs({docs:r})}))}))}(t,e,n)}}var l=new yi;function c(){return t.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:a,limit:50}).then(h)}function h(e){var h=e.results;if(h.length){var p=function(e){for(var s=new g,l=0,c=e.length;l<c;l++){var h=e[l];if("_"!==h.doc._id[0]){n=[],(i=h.doc)._deleted||r(t.sourceDB,o,i),n.sort(u);var p=d(n);s.set(h.doc._id,[p,h.changes])}a=h.seq}return s}(h);if(l.add(s(p,a)),!(h.length<50))return c()}}function d(t){for(var e,n=new g,i=0,r=t.length;i<r;i++){var o=t[i],a=[o.key,o.id];i>0&&0===Kt(o.key,e)&&a.push(i),n.set(te(a),o),e=o.key}return n}return c().then((function(){return l.finish()})).then((function(){t.seq=a}))}(t)}))()}function x(t,e){return li(b(t),(function(){return function(t,e){var i,r=t.reduceFun&&!1!==e.reduce,o=e.skip||0;void 0===e.keys||e.keys.length||(e.limit=0,delete e.keys);function a(e){return e.include_docs=!0,t.db.allDocs(e).then((function(t){return i=t.total_rows,t.rows.map((function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),n=["id","key","value"];if(!(e<n||e>n))return t.doc.value}var i=function(t){for(var e=[],n=[],i=0;;){var r=t[i++];if("\0"!==r)switch(r){case"1":e.push(null);break;case"2":e.push("1"===t[i]),i++;break;case"3":var o=ee(t,i);e.push(o.num),i+=o.length;break;case"4":for(var a="";;){var s=t[i];if("\0"===s)break;a+=s,i++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(a);break;case"5":var u={element:[],index:e.length};e.push(u.element),n.push(u);break;case"6":var l={element:{},index:e.length};e.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+r)}else{if(1===e.length)return e.pop();ne(e,n)}}}(t.doc._id);return{key:i[0],id:i[1],value:"value"in t.doc?t.doc.value:null}}))}))}function u(a){var u;if(u=r?function(t,e,i){0===i.group_level&&delete i.group_level;var r=i.group||i.group_level,o=n(t.reduceFun),a=[],u=isNaN(i.group_level)?Number.POSITIVE_INFINITY:i.group_level;e.forEach((function(t){var e=a[a.length-1],n=r?t.key:null;if(r&&Array.isArray(n)&&(n=n.slice(0,u)),e&&0===Kt(e.groupKey,n))return e.keys.push([t.key,t.id]),void e.values.push(t.value);a.push({keys:[[t.key,t.id]],values:[t.value],groupKey:n})})),e=[];for(var c=0,h=a.length;c<h;c++){var d=a[c],p=s(t.sourceDB,o,d.keys,d.values,!1);if(p.error&&p.error instanceof si)throw p.error;e.push({value:p.error?null:p.output,key:d.groupKey})}return{rows:l(e,i.limit,i.skip)}}(t,a,e):{total_rows:i,offset:o,rows:a},e.update_seq&&(u.update_seq=t.seq),e.include_docs){var h=ci(a.map(c));return t.sourceDB.allDocs({keys:h,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then((function(t){var e=new g;return t.rows.forEach((function(t){e.set(t.id,t.doc)})),a.forEach((function(t){var n=c(t),i=e.get(n);i&&(t.doc=i)})),u}))}return u}if(void 0!==e.keys){var h=e.keys.map((function(t){var n={startkey:te([t]),endkey:te([t,{}])};return e.update_seq&&(n.update_seq=!0),a(n)}));return p.all(h).then(ot).then(u)}var d,f,m={descending:e.descending};if(e.update_seq&&(m.update_seq=!0),"start_key"in e&&(d=e.start_key),"startkey"in e&&(d=e.startkey),"end_key"in e&&(f=e.end_key),"endkey"in e&&(f=e.endkey),void 0!==d&&(m.startkey=e.descending?te([d,{}]):te([d])),void 0!==f){var v=!1!==e.inclusive_end;e.descending&&(v=!v),m.endkey=te(v?[f,{}]:[f])}if(void 0!==e.key){var y=te([e.key]),_=te([e.key,{}]);m.descending?(m.endkey=y,m.startkey=_):(m.startkey=y,m.endkey=_)}return r||("number"==typeof e.limit&&(m.limit=e.limit),m.skip=o),a(m).then(u)}(t,e)}))()}function $(e,n,r){if("function"==typeof e._query)return function(t,e,n){return new p((function(i,r){t._query(e,n,(function(t,e){if(t)return r(t);i(e)}))}))}(e,n,r);if(st(e))return function(t,e,n){var i,r=[],o="GET";if(d("reduce",n,r),d("include_docs",n,r),d("attachments",n,r),d("limit",n,r),d("descending",n,r),d("group",n,r),d("group_level",n,r),d("skip",n,r),d("stale",n,r),d("conflicts",n,r),d("startkey",n,r,!0),d("start_key",n,r,!0),d("endkey",n,r,!0),d("end_key",n,r,!0),d("inclusive_end",n,r),d("key",n,r,!0),d("update_seq",n,r),r=""===(r=r.join("&"))?"":"?"+r,void 0!==n.keys){var a="keys="+encodeURIComponent(JSON.stringify(n.keys));a.length+r.length+1<=2e3?r+=("?"===r[0]?"&":"?")+a:(o="POST","string"==typeof e?i={keys:n.keys}:e.keys=n.keys)}if("string"==typeof e){var s=$i(e);return t.request({method:o,url:"_design/"+s[0]+"/_view/"+s[1]+r,body:i}).then((function(t){return t.rows.forEach((function(t){if(t.value&&t.value.error&&"builtin_reduce_error"===t.value.error)throw new Error(t.reason)})),t})).then(h(n))}return i=i||{},Object.keys(e).forEach((function(t){Array.isArray(e[t])?i[t]=e[t]:i[t]=e[t].toString()})),t.request({method:"POST",url:"_temp_view"+r,body:i}).then(h(n))}(e,n,r);if("string"!=typeof n)return v(r,n),xi.add((function(){return bi(e,"temp_view/temp_view",n.map,n.reduce,!0,t).then((function(t){return e=w(t).then((function(){return x(t,r)})),n=function(){return t.db.destroy()},e.then((function(t){return n().then((function(){return t}))}),(function(t){return n().then((function(){throw t}))}));var e,n}))})),xi.finish();var o=n,s=$i(o),u=s[0],l=s[1];return e.get("_design/"+u).then((function(n){var s=n.views&&n.views[l];if(!s)throw new ai("ddoc "+n._id+" has no view named "+l);return i(n,l),v(r,s),bi(e,o,s.map,s.reduce,!1,t).then((function(t){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&a((function(){w(t)})),x(t,r)):w(t).then((function(){return x(t,r)}))}))}))}var E;return{query:function(t,e,n){var i=this;"function"==typeof e&&(n=e,e={}),e=e?function(t){return t.group_level=f(t.group_level),t.limit=f(t.limit),t.skip=f(t.skip),t}(e):{},"function"==typeof t&&(t={map:t});var r=p.resolve().then((function(){return $(i,t,e)}));return ui(r,n),r},viewCleanup:(E=function(){var e=this;return"function"==typeof e._viewCleanup?function(t){return new p((function(e,n){t._viewCleanup((function(t,i){if(t)return n(t);e(i)}))}))}(e):st(e)?function(t){return t.request({method:"POST",url:"_view_cleanup"})}(e):function(e){return e.get("_local/"+t).then((function(t){var n=new g;Object.keys(t.views).forEach((function(t){var e=$i(t),i="_design/"+e[0],r=e[1],o=n.get(i);o||(o=new m,n.set(i,o)),o.add(r)}));var i={keys:hi(n),include_docs:!0};return e.allDocs(i).then((function(i){var r={};i.rows.forEach((function(e){var i=e.key.substring(8);n.get(e.key).forEach((function(n){var o=i+"/"+n;t.views[o]||(o=n);var a=Object.keys(t.views[o]),s=e.doc&&e.doc.views&&e.doc.views[n];a.forEach((function(t){r[t]=r[t]||s}))}))}));var o=Object.keys(r).filter((function(t){return!r[t]})).map((function(t){return li(b(t),(function(){return new e.constructor(t,e.__opts).destroy()}))()}));return p.all(o).then((function(){return{ok:!0}}))}))}),y({ok:!0}))}(e)},o((function(t){var e=t.pop(),n=E.apply(this,t);return"function"==typeof e&&ui(n,e),n})))}}("mrviews",(function(t,e){if("function"==typeof t&&2===t.length){var n=t;return function(t){return n(t,e)}}return vi(t.toString(),e)}),(function(t){var e=t.toString(),n=function(t){if(/^_sum/.test(t))return ki;if(/^_count/.test(t))return Li;if(/^_stats/.test(t))return Ci;if(/^_/.test(t))throw new Error(t+" is not a supported reduce function.")}(e);return n||vi(e)}),(function(t,e){var n=t.views&&t.views[e];if("string"!=typeof n.map)throw new ai("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof n.map)}));var Si={query:function(t,e,n){return Ti.query.call(this,t,e,n)},viewCleanup:function(t){return Ti.viewCleanup.call(this,t)}};function Di(t){return/^1-/.test(t)}function Mi(t,e){var n=Object.keys(e._attachments);return p.all(n.map((function(n){return t.getAttachment(e._id,n,{rev:e._rev})})))}function Ai(t,e,n,i){n=_(n);var r=[],o=!0;function a(e){return t.allDocs({keys:e,include_docs:!0,conflicts:!0}).then((function(t){if(i.cancelled)throw new Error("cancelled");t.rows.forEach((function(t){var e;t.deleted||!t.doc||!Di(t.value.rev)||(e=t.doc,e._attachments&&Object.keys(e._attachments).length>0)||function(t){return t._conflicts&&t._conflicts.length>0}(t.doc)||(t.doc._conflicts&&delete t.doc._conflicts,r.push(t.doc),delete n[t.id])}))}))}return p.resolve().then((function(){var t=Object.keys(n).filter((function(t){var e=n[t].missing;return 1===e.length&&Di(e[0])}));if(t.length>0)return a(t)})).then((function(){var a=function(t){var e=[];return Object.keys(t).forEach((function(n){t[n].missing.forEach((function(t){e.push({id:n,rev:t})}))})),{docs:e,revs:!0,latest:!0}}(n);if(a.docs.length)return t.bulkGet(a).then((function(n){if(i.cancelled)throw new Error("cancelled");return p.all(n.results.map((function(n){return p.all(n.docs.map((function(n){var i=n.ok;return n.error&&(o=!1),i&&i._attachments?function(t,e,n){var i=st(e)&&!st(t),r=Object.keys(n._attachments);return i?t.get(n._id).then((function(i){return p.all(r.map((function(r){return function(t,e,n){return!t._attachments||!t._attachments[n]||t._attachments[n].digest!==e._attachments[n].digest}(i,n,r)?e.getAttachment(n._id,r):t.getAttachment(i._id,r)})))})).catch((function(t){if(404!==t.status)throw t;return Mi(e,n)})):Mi(e,n)}(e,t,i).then((function(t){var e=Object.keys(i._attachments);return t.forEach((function(t,n){var r=i._attachments[e[n]];delete r.stub,delete r.length,r.data=t})),i})):i})))}))).then((function(t){r=r.concat(ot(t).filter(Boolean))}))}))})).then((function(){return{ok:o,docs:r}}))}function Pi(t,e,n,i,r){return t.get(e).catch((function(n){if(404===n.status)return"http"!==t.adapter&&"https"!==t.adapter||R(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:i,_id:e,history:[],replicator:"pouchdb",version:1};throw n})).then((function(o){if(!r.cancelled&&o.last_seq!==n)return o.history=(o.history||[]).filter((function(t){return t.session_id!==i})),o.history.unshift({last_seq:n,session_id:i}),o.history=o.history.slice(0,5),o.version=1,o.replicator="pouchdb",o.session_id=i,o.last_seq=n,t.put(o).catch((function(o){if(409===o.status)return Pi(t,e,n,i,r);throw o}))}))}function Oi(t,e,n,i,r){this.src=t,this.target=e,this.id=n,this.returnValue=i,this.opts=r||{}}Oi.prototype.writeCheckpoint=function(t,e){var n=this;return this.updateTarget(t,e).then((function(){return n.updateSource(t,e)}))},Oi.prototype.updateTarget=function(t,e){return this.opts.writeTargetCheckpoint?Pi(this.target,this.id,t,e,this.returnValue):p.resolve(!0)},Oi.prototype.updateSource=function(t,e){if(this.opts.writeSourceCheckpoint){var n=this;return Pi(this.src,this.id,t,e,this.returnValue).catch((function(t){if(Ri(t))return n.opts.writeSourceCheckpoint=!1,!0;throw t}))}return p.resolve(!0)};var Ii={undefined:function(t,e){return 0===Kt(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return function(t,e){if(t.session_id===e.session_id)return{last_seq:t.last_seq,history:t.history};return function t(e,n){var i=e[0],r=e.slice(1),o=n[0],a=n.slice(1);if(!i||0===n.length)return{last_seq:0,history:[]};if(Ni(i.session_id,n))return{last_seq:i.last_seq,history:e};if(Ni(o.session_id,r))return{last_seq:o.last_seq,history:a};return t(r,a)}(t.history,e.history)}(e,t).last_seq}};function Ni(t,e){var n=e[0],i=e.slice(1);return!(!t||0===e.length)&&(t===n.session_id||Ni(t,i))}function Ri(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}Oi.prototype.getCheckpoint=function(){var t=this;return t.opts&&t.opts.writeSourceCheckpoint&&!t.opts.writeTargetCheckpoint?t.src.get(t.id).then((function(t){return t.last_seq||0})).catch((function(t){if(404!==t.status)throw t;return 0})):t.target.get(t.id).then((function(e){return t.opts&&t.opts.writeTargetCheckpoint&&!t.opts.writeSourceCheckpoint?e.last_seq||0:t.src.get(t.id).then((function(t){return e.version!==t.version?0:(n=e.version?e.version.toString():"undefined")in Ii?Ii[n](e,t):0;var n}),(function(n){if(404===n.status&&e.last_seq)return t.src.put({_id:t.id,last_seq:0}).then((function(){return 0}),(function(n){return Ri(n)?(t.opts.writeSourceCheckpoint=!1,e.last_seq):0}));throw n}))})).catch((function(t){if(404!==t.status)throw t;return 0}))};function ji(t,e,n){var i=n.doc_ids?n.doc_ids.sort(Kt):"",r=n.filter?n.filter.toString():"",o="",a="",s="";return n.selector&&(s=JSON.stringify(n.selector)),n.filter&&n.query_params&&(o=JSON.stringify(function(t){return Object.keys(t).sort(Kt).reduce((function(e,n){return e[n]=t[n],e}),{})}(n.query_params))),n.filter&&"_view"===n.filter&&(a=n.view.toString()),p.all([t.id(),e.id()]).then((function(t){var e=t[0]+t[1]+r+a+o+i+s;return new p((function(t){Ie(e,t)}))})).then((function(t){return"_local/"+(t=t.replace(/\//g,".").replace(/\+/g,"_"))}))}function qi(t,e,n,i,r){var o,a,s,u=[],l={seq:0,changes:[],docs:[]},c=!1,h=!1,d=!1,f=0,m=n.continuous||n.live||!1,g=n.batch_size||100,v=n.batches_limit||10,y=!1,b=n.doc_ids,w=n.selector,x=[],$=vt(),E=n.seq_interval;r=r||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var k={};function L(){return s?p.resolve():ji(t,e,n).then((function(r){a=r;var o={};o=!1===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},s=new Oi(t,e,a,i,o)}))}function C(){if(x=[],0!==o.docs.length){var t=o.docs,a={timeout:n.timeout};return e.bulkDocs({docs:t,new_edits:!1},a).then((function(e){if(i.cancelled)throw P(),new Error("cancelled");var n=Object.create(null);e.forEach((function(t){t.error&&(n[t.id]=t)}));var o=Object.keys(n).length;r.doc_write_failures+=o,r.docs_written+=t.length-o,t.forEach((function(t){var e=n[t._id];if(e){r.errors.push(e);var o=(e.name||"").toLowerCase();if("unauthorized"!==o&&"forbidden"!==o)throw e;i.emit("denied",_(e))}else x.push(t)}))}),(function(e){throw r.doc_write_failures+=t.length,e}))}}function T(){if(o.error)throw new Error("There was a problem getting docs.");r.last_seq=f=o.seq;var t=_(r);return x.length&&(t.docs=x,"number"==typeof o.pending&&(t.pending=o.pending,delete o.pending),i.emit("change",t)),c=!0,s.writeCheckpoint(o.seq,$).then((function(){if(c=!1,i.cancelled)throw P(),new Error("cancelled");o=void 0,j()})).catch((function(t){throw F(t),t}))}function S(){return Ai(t,e,o.diffs,i).then((function(t){o.error=!t.ok,t.docs.forEach((function(t){delete o.diffs[t._id],r.docs_read++,o.docs.push(t)}))}))}function D(){var t;i.cancelled||o||(0!==u.length?(o=u.shift(),(t={},o.changes.forEach((function(e){"_user/"!==e.id&&(t[e.id]=e.changes.map((function(t){return t.rev})))})),e.revsDiff(t).then((function(t){if(i.cancelled)throw P(),new Error("cancelled");o.diffs=t}))).then(S).then(C).then(T).then(D).catch((function(t){A("batch processing terminated with error",t)}))):M(!0))}function M(t){0!==l.changes.length?(t||h||l.changes.length>=g)&&(u.push(l),l={seq:0,changes:[],docs:[]},"pending"!==i.state&&"stopped"!==i.state||(i.state="active",i.emit("active")),D()):0!==u.length||o||((m&&k.live||h)&&(i.state="pending",i.emit("paused")),h&&P())}function A(t,e){d||(e.message||(e.message=t),r.ok=!1,r.status="aborting",u=[],l={seq:0,changes:[],docs:[]},P(e))}function P(o){if(!(d||i.cancelled&&(r.status="cancelled",c)))if(r.status=r.status||"complete",r.end_time=new Date,r.last_seq=f,d=!0,o){(o=nt(o)).result=r;var a=(o.name||"").toLowerCase();"unauthorized"===a||"forbidden"===a?(i.emit("error",o),i.removeAllListeners()):function(t,e,n,i){if(!1===t.retry)return e.emit("error",n),void e.removeAllListeners();if("function"!=typeof t.back_off_function&&(t.back_off_function=N),e.emit("requestError",n),"active"===e.state||"pending"===e.state){e.emit("paused",n),e.state="stopped";var r=function(){t.current_back_off=0};e.once("paused",(function(){e.removeListener("active",r)})),e.once("active",r)}t.current_back_off=t.current_back_off||0,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(i,t.current_back_off)}(n,i,o,(function(){qi(t,e,n,i)}))}else i.emit("complete",r),i.removeAllListeners()}function O(t,e,r){if(i.cancelled)return P();"number"==typeof e&&(l.pending=e),rt(n)(t)&&(l.seq=t.seq||r,l.changes.push(t),M(0===u.length&&k.live))}function I(t){if(y=!1,i.cancelled)return P();if(t.results.length>0)k.since=t.last_seq,j(),M(!0);else{var e=function(){m?(k.live=!0,j()):h=!0,M(!0)};o||0!==t.results.length?e():(c=!0,s.writeCheckpoint(t.last_seq,$).then((function(){c=!1,r.last_seq=f=t.last_seq,e()})).catch(F))}}function R(t){if(y=!1,i.cancelled)return P();A("changes rejected",t)}function j(){if(!y&&!h&&u.length<v){y=!0,i._changes&&(i.removeListener("cancel",i._abortChanges),i._changes.cancel()),i.once("cancel",r);var e=t.changes(k).on("change",O);e.then(o,o),e.then(I).catch(R),n.retry&&(i._changes=e,i._abortChanges=r)}function r(){e.cancel()}function o(){i.removeListener("cancel",r)}}function q(){L().then((function(){if(!i.cancelled)return s.getCheckpoint().then((function(t){k={since:f=t,limit:g,batch_size:g,style:"all_docs",doc_ids:b,selector:w,return_docs:!0},!1!==E&&(k.seq_interval=E||g),n.filter&&("string"!=typeof n.filter?k.include_docs=!0:k.filter=n.filter),"heartbeat"in n&&(k.heartbeat=n.heartbeat),"timeout"in n&&(k.timeout=n.timeout),n.query_params&&(k.query_params=n.query_params),n.view&&(k.view=n.view),j()}));P()})).catch((function(t){A("getCheckpoint rejected with ",t)}))}function F(t){c=!1,A("writeCheckpoint completed with error",t)}i.ready(t,e),i.cancelled?P():(i._addedListeners||(i.once("cancel",P),"function"==typeof n.complete&&(i.once("error",n.complete),i.once("complete",(function(t){n.complete(null,t)}))),i._addedListeners=!0),void 0===n.since?q():L().then((function(){return c=!0,s.writeCheckpoint(n.since,$)})).then((function(){c=!1,i.cancelled?P():(f=n.since,q())})).catch(F))}function Fi(){s.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var t=this,e=new p((function(e,n){t.once("complete",e),t.once("error",n)}));t.then=function(t,n){return e.then(t,n)},t.catch=function(t){return e.catch(t)},t.catch((function(){}))}function Ui(t,e){var n=e.PouchConstructor;return"string"==typeof t?new n(t,e):t}function Bi(t,e,n,i){if("function"==typeof n&&(i=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw nt(X,"`doc_ids` filter parameter is not a list.");n.complete=i,(n=_(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var r=new Fi(n);return qi(Ui(t,n),Ui(e,n),n,r),r}function zi(t,e,n,i){return"function"==typeof n&&(i=n,n={}),void 0===n&&(n={}),(n=_(n)).PouchConstructor=n.PouchConstructor||this,new Vi(t=Ui(t,n),e=Ui(e,n),n,i)}function Vi(t,e,n,i){var r=this;this.canceled=!1;var o=n.push?j({},n,n.push):n,a=n.pull?j({},n,n.pull):n;function s(t){r.emit("change",{direction:"pull",change:t})}function u(t){r.emit("change",{direction:"push",change:t})}function l(t){r.emit("denied",{direction:"push",doc:t})}function c(t){r.emit("denied",{direction:"pull",doc:t})}function h(){r.pushPaused=!0,r.pullPaused&&r.emit("paused")}function d(){r.pullPaused=!0,r.pushPaused&&r.emit("paused")}function f(){r.pushPaused=!1,r.pullPaused&&r.emit("active",{direction:"push"})}function m(){r.pullPaused=!1,r.pushPaused&&r.emit("active",{direction:"pull"})}this.push=Bi(t,e,o),this.pull=Bi(e,t,a),this.pushPaused=!0,this.pullPaused=!0;var g={};function v(t){return function(e,n){("change"===e&&(n===s||n===u)||"denied"===e&&(n===c||n===l)||"paused"===e&&(n===d||n===h)||"active"===e&&(n===m||n===f))&&(e in g||(g[e]={}),g[e][t]=!0,2===Object.keys(g[e]).length&&r.removeAllListeners(e))}}function y(t,e,n){-1==t.listeners(e).indexOf(n)&&t.on(e,n)}n.live&&(this.push.on("complete",r.pull.cancel.bind(r.pull)),this.pull.on("complete",r.push.cancel.bind(r.push))),this.on("newListener",(function(t){"change"===t?(y(r.pull,"change",s),y(r.push,"change",u)):"denied"===t?(y(r.pull,"denied",c),y(r.push,"denied",l)):"active"===t?(y(r.pull,"active",m),y(r.push,"active",f)):"paused"===t&&(y(r.pull,"paused",d),y(r.push,"paused",h))})),this.on("removeListener",(function(t){"change"===t?(r.pull.removeListener("change",s),r.push.removeListener("change",u)):"denied"===t?(r.pull.removeListener("denied",c),r.push.removeListener("denied",l)):"active"===t?(r.pull.removeListener("active",m),r.push.removeListener("active",f)):"paused"===t&&(r.pull.removeListener("paused",d),r.push.removeListener("paused",h))})),this.pull.on("removeListener",v("pull")),this.push.on("removeListener",v("push"));var _=p.all([this.push,this.pull]).then((function(t){var e={push:t[0],pull:t[1]};return r.emit("complete",e),i&&i(null,e),r.removeAllListeners(),e}),(function(t){if(r.cancel(),i?i(t):r.emit("error",t),r.removeAllListeners(),i)throw t}));this.then=function(t,e){return _.then(t,e)},this.catch=function(t){return _.catch(t)}}u(Fi,s.EventEmitter),Fi.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},Fi.prototype.ready=function(t,e){var n=this;function i(){n.cancel()}n._readyCalled||(n._readyCalled=!0,t.once("destroyed",i),e.once("destroyed",i),n.once("complete",(function(){t.removeListener("destroyed",i),e.removeListener("destroyed",i)})))},u(Vi,s.EventEmitter),Vi.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},zt.plugin((function(t){t.adapter("idb",dn,!0)})).plugin((function(t){t.adapter("websql",Vn,!0)})).plugin((function(t){t.adapter("http",ri,!1),t.adapter("https",ri,!1)})).plugin(Si).plugin((function(t){t.replicate=Bi,t.sync=zi,Object.defineProperty(t.prototype,"replicate",{get:function(){var t=this;return void 0===this.replicateMethods&&(this.replicateMethods={from:function(e,n,i){return t.constructor.replicate(e,t,n,i)},to:function(e,n,i){return t.constructor.replicate(t,e,n,i)}}),this.replicateMethods}}),t.prototype.sync=function(t,e,n){return this.constructor.sync(this,t,e,n)}})),t.exports=zt}).call(this,n(28))},,,,,function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var u,l=[],c=!1,h=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=s(d);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";function i(t,e,n){if(void 0===n)return t&&t.h5s&&t.h5s.data&&t.h5s.data[e];t.h5s=t.h5s||{},t.h5s.data=t.h5s.data||{},t.h5s.data[e]=n}var r=function(t,e){if(!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof e?Array.from(t):Array.from(t).filter((function(t){return 1===t.nodeType&&t.matches(e)}))},o=new Map,a=function(){function t(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(t.prototype,"config",{get:function(){var t={};return this._config.forEach((function(e,n){t[n]=e})),t},set:function(t){if("object"!=typeof t)throw new Error("You must provide a valid configuration object to the config setter.");var e=Object.assign({},t);this._config=new Map(Object.entries(e))},enumerable:!0,configurable:!0}),t.prototype.setConfig=function(t,e){if(!this._config.has(t))throw new Error("Trying to set invalid configuration item: "+t);this._config.set(t,e)},t.prototype.getConfig=function(t){if(!this._config.has(t))throw new Error("Invalid configuration item requested: "+t);return this._config.get(t)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){if(!(t instanceof HTMLElement)&&null!==t)throw new Error("A placeholder must be an html element or null.");this._placeholder=t},enumerable:!0,configurable:!0}),t.prototype.setData=function(t,e){if("string"!=typeof t)throw new Error("The key must be a string.");this._data.set(t,e)},t.prototype.getData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.get(t)},t.prototype.deleteData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.delete(t)},t}(),s=function(t){if(!(t instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return o.has(t)||o.set(t,new a),o.get(t)};function u(t,e,n){if(t instanceof Array)for(var i=0;i<t.length;++i)u(t[i],e,n);else t.addEventListener(e,n),s(t).setData("event"+e,n)}function l(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)l(t[n],e);else t.removeEventListener(e,s(t).getData("event"+e)),s(t).deleteData("event"+e)}function c(t,e,n){if(t instanceof Array)for(var i=0;i<t.length;++i)c(t[i],e,n);else t.setAttribute(e,n)}function h(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)h(t[n],e);else t.removeAttribute(e)}var d=function(t){if(!t.parentElement||0===t.getClientRects().length)throw new Error("target element must be part of the dom");var e=t.getClientRects()[0];return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}},p=function(t,e){if(!(t instanceof HTMLElement&&(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(e).indexOf(t)},f=function(t){if(!(t instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==t.parentNode},m=function(t,e,n){if(!(t instanceof HTMLElement&&t.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");t.parentElement.insertBefore(e,"before"===n?t:t.nextElementSibling)},g=function(t,e){return m(t,e,"after")},v=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return["height","padding-top","padding-bottom"].map((function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n})).reduce((function(t,e){return t+e}))},y=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return["width","padding-left","padding-right"].map((function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n})).reduce((function(t,e){return t+e}))},_=function(t,e){if(!(t instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof e?t:t.filter((function(t){return t.querySelector(e)instanceof HTMLElement||t.shadowRoot&&t.shadowRoot.querySelector(e)instanceof HTMLElement})).map((function(t){return t.querySelector(e)||t.shadowRoot&&t.shadowRoot.querySelector(e)}))},b=function(t){return t.composedPath&&t.composedPath()[0]||t.target},w=function(t,e,n){return{element:t,posX:n.pageX-e.left,posY:n.pageY-e.top}},x=function(t,e){if(!0===t.isSortable){var n=s(t).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(t){return t.length>0&&e.matches(t)})).length>0;if(t===e)return!0;if(void 0!==s(t).getConfig("connectWith")&&null!==s(t).getConfig("connectWith"))return s(t).getConfig("connectWith")===s(e).getConfig("connectWith")}return!1},$={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"};var E,k,L,C,T,S,D,M,A,P=function(t,e){if("string"==typeof s(t).getConfig("hoverClass")){var n=s(t).getConfig("hoverClass").split(" ");!0===e?(u(t,"mousemove",function(t,e){var n=this;if(void 0===e&&(e=250),"function"!=typeof t)throw new Error("You must provide a function as the first argument for throttle.");if("number"!=typeof e)throw new Error("You must provide a number as the second argument for throttle.");var i=null;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=Date.now();(null===i||a-i>=e)&&(i=a,t.apply(n,r))}}((function(e){0===e.buttons&&r(t.children,s(t).getConfig("items")).forEach((function(t){var i,r;t!==e.target?(i=t.classList).remove.apply(i,n):(r=t.classList).add.apply(r,n)}))}),s(t).getConfig("throttleTime"))),u(t,"mouseleave",(function(){r(t.children,s(t).getConfig("items")).forEach((function(t){var e;(e=t.classList).remove.apply(e,n)}))}))):(l(t,"mousemove"),l(t,"mouseleave"))}},O=function(t){l(t,"dragstart"),l(t,"dragend"),l(t,"dragover"),l(t,"dragenter"),l(t,"drop"),l(t,"mouseenter"),l(t,"mouseleave")},I=function(t){var e;(e=t).h5s&&delete e.h5s.data,h(t,"aria-dropeffect")},N=function(t){h(t,"aria-grabbed"),h(t,"aria-copied"),h(t,"draggable"),h(t,"role")};function R(t,e){if(e.composedPath)return e.composedPath().find((function(t){return t.isSortable}));for(;!0!==t.isSortable;)t=t.parentElement;return t}function j(t,e){var n=i(t,"opts"),o=r(t.children,n.items).filter((function(t){return t.contains(e)||t.shadowRoot&&t.shadowRoot.contains(e)}));return o.length>0?o[0]:e}var q=function(t){var e=i(t,"opts"),n=r(t.children,e.items),o=_(n,e.handle);(c(t,"aria-dropeffect","move"),i(t,"_disabled","false"),c(o,"draggable","true"),!1===e.disableIEFix)&&("function"==typeof(document||window.document).createElement("span").dragDrop&&u(o,"mousedown",(function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var t=this.parentElement;-1===n.indexOf(t);)t=t.parentElement;t.dragDrop()}})))};function F(t,e){var n=String(e);return e=e||{},"string"==typeof t&&(t=document.querySelectorAll(t)),t instanceof HTMLElement&&(t=[t]),t=Array.prototype.slice.call(t),/serialize/.test(n)?t.map((function(t){var e=i(t,"opts");return function(t,e,n){if(void 0===e&&(e=function(t,e){return t}),void 0===n&&(n=function(t){return t}),!(t instanceof HTMLElement)||!0==!t.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof e||"function"!=typeof n)throw new Error("You need to provide a valid serializer for items and the container.");var o=i(t,"opts").items,a=r(t.children,o),s=a.map((function(e){return{parent:t,node:e,html:e.outerHTML,index:p(e,a)}}));return{container:n({node:t,itemCount:s.length}),items:s.map((function(n){return e(n,t)}))}}(t,e.itemSerializer,e.containerSerializer)})):(t.forEach((function(t){if(/enable|disable|destroy/.test(n))return F[n](t);["connectWith","disableIEFix"].forEach((function(t){Object.prototype.hasOwnProperty.call(e,t)&&null!==e[t]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+t+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),e=Object.assign({},$,s(t).config,e),s(t).config=e,i(t,"opts",e),t.isSortable=!0,function(t){var e=i(t,"opts"),n=r(t.children,e.items),o=_(n,e.handle);i(t,"_disabled","false"),O(n),l(o,"mousedown"),l(t,"dragover"),l(t,"dragenter"),l(t,"drop")}(t);var a,h=r(t.children,e.items);if(null!==e.placeholder&&void 0!==e.placeholder){var I=document.createElement(t.tagName);e.placeholder instanceof HTMLElement?I.appendChild(e.placeholder):I.innerHTML=e.placeholder,a=I.children[0]}s(t).placeholder=function(t,e,n){var i;if(void 0===n&&(n="sortable-placeholder"),!(t instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(e instanceof HTMLElement)&&void 0!==e)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===e&&(["UL","OL"].includes(t.tagName)?e=document.createElement("li"):["TABLE","TBODY"].includes(t.tagName)?(e=document.createElement("tr")).innerHTML='<td colspan="100"></td>':e=document.createElement("div")),"string"==typeof n&&(i=e.classList).add.apply(i,n.split(" ")),e}(t,a,e.placeholderClass),i(t,"items",e.items),e.acceptFrom?i(t,"acceptFrom",e.acceptFrom):e.connectWith&&i(t,"connectWith",e.connectWith),q(t),c(h,"role","option"),c(h,"aria-grabbed","false"),P(t,!0),u(t,"dragstart",(function(t){var n=b(t);if(!0!==n.isSortable&&(t.stopImmediatePropagation(),(!e.handle||n.matches(e.handle))&&"false"!==n.getAttribute("draggable"))){var i=R(n,t),o=j(i,n);D=r(i.children,e.items),T=D.indexOf(o),S=p(o,i.children),C=i,function(t,e,n){if(!(t instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(e instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=w),t.dataTransfer&&t.dataTransfer.setDragImage){var i=n(e,d(e),t);if(!(i.element instanceof HTMLElement)||"number"!=typeof i.posX||"number"!=typeof i.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setData("text/plain",b(t).id),t.dataTransfer.setDragImage(i.element,i.posX,i.posY)}}(t,o,e.customDragImage),k=v(o),L=y(o),o.classList.add(e.draggingClass),E=function(t,e){var n=t;return!0===s(e).getConfig("copy")&&(c(n=t.cloneNode(!0),"aria-copied","true"),t.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=t.style.display),n}(o,i),c(E,"aria-grabbed","true"),i.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:S,index:T,container:C},item:E,originalTarget:n}}))}})),u(t,"dragenter",(function(e){var n=b(e),o=R(n,e);o&&o!==M&&(A=r(o.children,i(o,"items")).filter((function(e){return e!==s(t).placeholder})),o.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:S,index:T,container:C},destination:{container:o,itemsBeforeUpdate:A},item:E,originalTarget:n}}))),M=o})),u(t,"dragend",(function(n){if(E){E.classList.remove(e.draggingClass),c(E,"aria-grabbed","false"),"true"===E.getAttribute("aria-copied")&&"true"!==i(E,"dropped")&&E.remove(),E.style.display=E.oldDisplay,delete E.oldDisplay;var r=Array.from(o.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(f)[0];r&&r.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:S,index:T,container:C},item:E}})),M=null,E=null,k=null,L=null}})),u(t,"drop",(function(n){if(x(t,E.parentElement)){n.preventDefault(),n.stopPropagation(),i(E,"dropped","true");var a=Array.from(o.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(f)[0];g(a,E),a.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:S,index:T,container:C},item:E}}));var u=s(t).placeholder,l=r(C.children,e.items).filter((function(t){return t!==u})),c=!0===this.isSortable?this:this.parentElement,h=r(c.children,i(c,"items")).filter((function(t){return t!==u})),d=p(E,Array.from(E.parentElement.children).filter((function(t){return t!==u}))),m=p(E,h);S===d&&C===c||t.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:S,index:T,container:C,itemsBeforeUpdate:D,items:l},destination:{index:m,elementIndex:d,container:c,itemsBeforeUpdate:A,items:h},item:E}}))}}));var N,U,B,z=(N=function(t,n,i,a){if(E)if(e.forcePlaceholderSize&&(s(t).placeholder.style.height=k+"px",s(t).placeholder.style.width=L+"px"),Array.from(t.children).indexOf(n)>-1){var u=v(n),l=y(n),c=p(s(t).placeholder,n.parentElement.children),h=p(n,n.parentElement.children);if(u>k||l>L){var f=u-k,_=l-L,b=d(n).top,w=d(n).left;if(c<h&&("vertical"===e.orientation&&a<b||"horizontal"===e.orientation&&i<w))return;if(c>h&&("vertical"===e.orientation&&a>b+u-f||"horizontal"===e.orientation&&i>w+l-_))return}void 0===E.oldDisplay&&(E.oldDisplay=E.style.display),"none"!==E.style.display&&(E.style.display="none");var x=!1;try{var $=d(n).top+n.offsetHeight/2,C=d(n).left+n.offsetWidth/2;x="vertical"===e.orientation&&a>=$||"horizontal"===e.orientation&&i>=C}catch(t){x=c<h}x?g(n,s(t).placeholder):function(t,e){m(t,e,"before")}(n,s(t).placeholder),Array.from(o.values()).filter((function(t){return void 0!==t.placeholder})).forEach((function(e){e.placeholder!==s(t).placeholder&&e.placeholder.remove()}))}else{var T=Array.from(o.values()).filter((function(t){return void 0!==t.placeholder})).map((function(t){return t.placeholder}));-1!==T.indexOf(n)||t!==n||r(n.children,e.items).length||(T.forEach((function(t){return t.remove()})),n.appendChild(s(t).placeholder))}},void 0===(U=e.debounce)&&(U=0),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];clearTimeout(B),B=setTimeout((function(){N.apply(void 0,t)}),U)}),V=function(t){var e=t.target,n=!0===e.isSortable?e:R(e,t);if(e=j(n,e),E&&x(n,E.parentElement)&&"true"!==i(n,"_disabled")){var o=i(n,"opts");parseInt(o.maxItems)&&r(n.children,i(n,"items")).length>=parseInt(o.maxItems)&&E.parentElement!==n||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=!0===s(n).getConfig("copy")?"copy":"move",z(n,e,t.pageX,t.pageY))}};u(h.concat(t),"dragover",V),u(h.concat(t),"dragenter",V)})),t)}F.destroy=function(t){!function(t){var e=i(t,"opts")||{},n=r(t.children,e.items),o=_(n,e.handle);l(t,"dragover"),l(t,"dragenter"),l(t,"dragstart"),l(t,"dragend"),l(t,"drop"),I(t),l(o,"mousedown"),O(n),N(n),t.isSortable=!1}(t)},F.enable=function(t){q(t)},F.disable=function(t){!function(t){var e=i(t,"opts"),n=r(t.children,e.items),o=_(n,e.handle);c(t,"aria-dropeffect","none"),i(t,"_disabled","true"),c(o,"draggable","false"),l(o,"mousedown")}(t)},F.__testing={_data:i,_removeItemEvents:O,_removeItemData:N,_removeSortableData:I},t.exports=F},,,,,,function(t,e,n){var i,r;i=[n(49)],void 0===(r=function(t){"use strict";return t.concat}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(49)],void 0===(r=function(t){"use strict";return t.push}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(61)],void 0===(r=function(t){"use strict";return t.toString}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(83)],void 0===(r=function(t){"use strict";return t.toString}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(9)],void 0===(r=function(t){"use strict";var e={type:!0,src:!0,noModule:!0};return function(n,i,r){var o,a=(i=i||t).createElement("script");if(a.text=n,r)for(o in e)r[o]&&(a[o]=r[o]);i.head.appendChild(a).parentNode.removeChild(a)}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(11)],void 0===(r=function(t){"use strict";return t.expr.match.needsContext}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";return/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2),n(82),n(7),n(115),n(11)],void 0===(r=function(t,e,n,i){"use strict";function r(i,r,o){return n(r)?t.grep(i,(function(t,e){return!!r.call(t,e,t)!==o})):r.nodeType?t.grep(i,(function(t){return t===r!==o})):"string"!=typeof r?t.grep(i,(function(t){return e.call(r,t)>-1!==o})):t.filter(r,i,o)}t.filter=function(e,n,i){var r=n[0];return i&&(e=":not("+e+")"),1===n.length&&1===r.nodeType?t.find.matchesSelector(r,e)?[r]:[]:t.find.matches(e,t.grep(n,(function(t){return 1===t.nodeType})))},t.fn.extend({find:function(e){var n,i,r=this.length,o=this;if("string"!=typeof e)return this.pushStack(t(e).filter((function(){for(n=0;n<r;n++)if(t.contains(o[n],this))return!0})));for(i=this.pushStack([]),n=0;n<r;n++)t.find(e,o[n],i);return r>1?t.uniqueSort(i):i},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&i.test(e)?t(e):e||[],!1).length}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(9),n(204),n(34)],void 0===(r=function(t,e){"use strict";var n=t.Deferred();function i(){e.removeEventListener("DOMContentLoaded",i),window.removeEventListener("load",i),t.ready()}t.fn.ready=function(e){return n.then(e).catch((function(e){t.readyException(e)})),this},t.extend({isReady:!1,readyWait:1,ready:function(i){(!0===i?--t.readyWait:t.isReady)||(t.isReady=!0,!0!==i&&--t.readyWait>0||n.resolveWith(e,[t]))}}),t.ready.then=n.then,"complete"===e.readyState||"loading"!==e.readyState&&!e.documentElement.doScroll?window.setTimeout(t.ready):(e.addEventListener("DOMContentLoaded",i),window.addEventListener("load",i))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(51),n(21),n(85)],void 0===(r=function(t,e,n,i){"use strict";function r(){this.expando=t.expando+r.uid++}return r.uid=1,r.prototype={cache:function(t){var e=t[this.expando];return e||(e={},i(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,n,i){var r,o=this.cache(t);if("string"==typeof n)o[e(n)]=i;else for(r in n)o[e(r)]=n[r];return o},get:function(t,n){return void 0===n?this.cache(t):t[this.expando]&&t[this.expando][e(n)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(i,r){var o,a=i[this.expando];if(void 0!==a){if(void 0!==r){o=(r=Array.isArray(r)?r.map(e):(r=e(r))in a?[r]:r.match(n)||[]).length;for(;o--;)delete a[r[o]]}(void 0===r||t.isEmptyObject(a))&&(i.nodeType?i[this.expando]=void 0:delete i[this.expando])}},hasData:function(e){var n=e[this.expando];return void 0!==n&&!t.isEmptyObject(n)}},r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(119)],void 0===(r=function(t){"use strict";return new t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(11)],void 0===(r=function(t){"use strict";return function(e,n){return"none"===(e=n||e).style.display||""===e.style.display&&t.contains(e.ownerDocument,e)&&"none"===t.css(e,"display")}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";return function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=a[o];return r}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2),n(88)],void 0===(r=function(t,e){"use strict";return function(n,i,r,o){var a,s,u=20,l=o?function(){return o.cur()}:function(){return t.css(n,i,"")},c=l(),h=r&&r[3]||(t.cssNumber[i]?"":"px"),d=(t.cssNumber[i]||"px"!==h&&+c)&&e.exec(t.css(n,i));if(d&&d[3]!==h){for(c/=2,h=h||d[3],d=+c||1;u--;)t.style(n,i,d+h),(1-s)*(1-(s=l()/c||.5))<=0&&(u=0),d/=s;d*=2,t.style(n,i,d+h),r=r||[]}return r&&(d=+d||+c||0,a=r[1]?d+(r[1]+1)*r[2]:+r[2],o&&(o.unit=h,o.start=d,o.end=a)),a}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";return/^(?:checkbox|radio)$/i}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){"use strict";return/<([a-z][^\/\0>\x20\t\r\n\f]+)/i}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){"use strict";return/^$|^module$|\/(?:java|ecma)script/i}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){"use strict";var t={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};return t.optgroup=t.option,t.tbody=t.tfoot=t.colgroup=t.caption=t.thead,t.th=t.td,t}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2),n(26)],void 0===(r=function(t,e){"use strict";return function(n,i){var r;return r=void 0!==n.getElementsByTagName?n.getElementsByTagName(i||"*"):void 0!==n.querySelectorAll?n.querySelectorAll(i||"*"):[],void 0===i||i&&e(n,i)?t.merge([n],r):r}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(19)],void 0===(r=function(t){"use strict";return function(e,n){for(var i=0,r=e.length;i<r;i++)t.set(e[i],"globalEval",!n||t.get(n[i],"globalEval"))}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(32),n(125),n(126),n(127),n(128),n(129)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";var s=/<|&#?\w+;/;return function(u,l,c,h,d){for(var p,f,m,g,v,y,_=l.createDocumentFragment(),b=[],w=0,x=u.length;w<x;w++)if((p=u[w])||0===p)if("object"===e(p))t.merge(b,p.nodeType?[p]:p);else if(s.test(p)){for(f=f||_.appendChild(l.createElement("div")),m=(n.exec(p)||["",""])[1].toLowerCase(),g=r[m]||r._default,f.innerHTML=g[1]+t.htmlPrefilter(p)+g[2],y=g[0];y--;)f=f.lastChild;t.merge(b,f.childNodes),(f=_.firstChild).textContent=""}else b.push(l.createTextNode(p));for(_.textContent="",w=0;p=b[w++];)if(h&&t.inArray(p,h)>-1)d&&d.push(p);else if(v=t.contains(p.ownerDocument,p),f=o(_.appendChild(p),"script"),v&&a(f),c)for(y=0;p=f[y++];)i.test(p.type||"")&&c.push(p);return _}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";return function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=window),e.getComputedStyle(t)}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2),n(209),n(92),n(131),n(93),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";return function(o,a,s){var u,l,c,h,d=o.style;return(s=s||i(o))&&(""!==(h=s.getPropertyValue(a)||s[a])||t.contains(o.ownerDocument,o)||(h=t.style(o,a)),!r.pixelBoxStyles()&&n.test(h)&&e.test(a)&&(u=d.width,l=d.minWidth,c=d.maxWidth,d.minWidth=d.maxWidth=d.width=h,h=s.width,d.width=u,d.minWidth=l,d.maxWidth=c)),void 0!==h?h+"":h}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";return function(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2),n(27),n(94),n(11)],void 0===(r=function(t,e,n){"use strict";var i=/^(?:input|select|textarea|button)$/i,r=/^(?:a|area)$/i;t.fn.extend({prop:function(n,i){return e(this,t.prop,n,i,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[t.propFix[e]||e]}))}}),t.extend({prop:function(e,n,i){var r,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&t.isXMLDoc(e)||(n=t.propFix[n]||n,o=t.propHooks[n]),void 0!==i?o&&"set"in o&&void 0!==(r=o.set(e,i,n))?r:e[n]=i:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){var n=t.find.attr(e,"tabindex");return n?parseInt(n,10):i.test(e.nodeName)||r.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),n.optSelected||(t.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),t.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){t.propFix[this.toLowerCase()]=this}))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";return Date.now()}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){"use strict";return/\?/}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2),n(32),n(124),n(7),n(17),n(33),n(134)],void 0===(r=function(t,e,n,i){"use strict";var r=/\[\]$/,o=/\r?\n/g,a=/^(?:submit|button|image|reset|file)$/i,s=/^(?:input|select|textarea|keygen)/i;function u(n,i,o,a){var s;if(Array.isArray(i))t.each(i,(function(t,e){o||r.test(n)?a(n,e):u(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,o,a)}));else if(o||"object"!==e(i))a(n,i);else for(s in i)u(n+"["+s+"]",i[s],o,a)}return t.param=function(e,n){var r,o=[],a=function(t,e){var n=i(e)?e():e;o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!t.isPlainObject(e))t.each(e,(function(){a(this.name,this.value)}));else for(r in e)u(r,e[r],n,a);return o.join("&")},t.fn.extend({serialize:function(){return t.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=t.prop(this,"elements");return e?t.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!t(this).is(":disabled")&&s.test(this.nodeName)&&!a.test(e)&&(this.checked||!n.test(e))})).map((function(e,n){var i=t(this).val();return null==i?null:Array.isArray(i)?t.map(i,(function(t){return{name:n.name,value:t.replace(o,"\r\n")}})):{name:n.name,value:i.replace(o,"\r\n")}})).get()}}),t}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},function(t,e,n){"use strict";var i=n(14),r=n(243),o=n(245),a=n(246),s=n(247),u=n(140);t.exports=function(t){return new Promise((function(e,l){var c=t.data,h=t.headers;i.isFormData(c)&&delete h["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",f=t.auth.password||"";h.Authorization="Basic "+btoa(p+":"+f)}if(d.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:n,config:t,request:d};r(e,l,i),d=null}},d.onerror=function(){l(u("Network Error",t,null,d)),d=null},d.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",d)),d=null},i.isStandardBrowserEnv()){var m=n(248),g=(t.withCredentials||s(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;g&&(h[t.xsrfHeaderName]=g)}if("setRequestHeader"in d&&i.forEach(h,(function(t,e){void 0===c&&"content-type"===e.toLowerCase()?delete h[e]:d.setRequestHeader(e,t)})),t.withCredentials&&(d.withCredentials=!0),t.responseType)try{d.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){d&&(d.abort(),l(t),d=null)})),void 0===c&&(c=null),d.send(c)}))}},function(t,e,n){"use strict";var i=n(244);t.exports=function(t,e,n,r,o){var a=new Error(t);return i(a,e,n,r,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},function(t,e,n){"use strict";(function(e){var n,i,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var o=0,a=new r(c),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var u=new e.MessageChannel;u.port1.onmessage=c,n=function(){u.port2.postMessage(0)}}var l=[];function c(){var t,e;i=!0;for(var n=l.length;n;){for(e=l,l=[],t=-1;++t<n;)e[t]();n=l.length}i=!1}t.exports=function(t){1!==l.push(t)||i||n()}}).call(this,n(28))},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},function(t,e){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(t,e){var i=e||0,r=n;return r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]}},function(t,e,n){"use strict";(function(t){var i=n(65),r=n(3);function o(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(t){o(a,i,r,s,u,"next",t)}function u(t){o(a,i,r,s,u,"throw",t)}s(void 0)}))}}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n(70);var u=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.saving=!1,this.validating=!1}var n,o,u,l,c,h,d,p;return n=e,(o=[{key:"boot",value:(p=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.a.init();case 1:case"end":return t.stop()}}),t)}))),function(){return p.apply(this,arguments)})},{key:"submit",value:(d=a(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.a.finishAndSubmit().then((function(t){return e.exit({message:t,message_type:"success"})})));case 1:case"end":return t.stop()}}),t)}))),function(){return d.apply(this,arguments)})},{key:"_save",value:(h=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.save();case 2:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"exit",value:(c=a(regeneratorRuntime.mark((function e(){var n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:null,!r.a.has("return")){e.next=3;break}return e.abrupt("return",window.location=r.a.getPath("return"));case 3:window.location="index.html?"+(n?t.param(n):"");case 4:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},{key:"saveAndExit",value:(l=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._save();case 2:return t.next=4,this.exit();case 4:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})}])&&s(n.prototype,o),u&&s(n,u),e}();e.a=new u}).call(this,n(0))},,,,,,,,,,,,,,,function(t,e,n){var i=n(196);t.exports={get:function(t,e,n){return e.replace(/\[/g,".").replace(/]/g,"").split(".").filter(Boolean).every((function(e){return!(e&&void 0===(t=t[e]))}))?t:n},set:i}},function(t,e,n){"use strict";var i=n(309),r=n.n(i),o=n(4),a=n(0),s=n.n(a);function u(t,e){return c(t,e,[t])}function l(t,e){return c(t,e)}function c(t,e="*",n=[]){const i=n;let r=t.previousElementSibling,o=t.nextElementSibling;for(;r;)r.matches(e)&&i.unshift(r),r=r.previousElementSibling;for(;o;)o.matches(e)&&i.push(o),o=o.nextElementSibling;return i}function h(t,e="*",n){const i=[];let r=t.parentElement;for(;r;)r.matches(e)&&i.unshift(r),r=n&&r.matches(n)?null:r.parentElement;return i}function d(t,e="*",n){let i=t.parentElement,r=null;for(;i&&!r;)i.matches(e)&&(r=i),i=n&&i.matches(n)?null:i.parentElement;return r}function p(t,e="*"){return[...t.children].filter(t=>t.matches(e))}function f(t,e="#document",n=!1){let i;const r=[];let o="";if(!t||1!==t.nodeType)return null;const a=t.nodeName;let s=t.parentElement,u=s?s.nodeName:null;for(n&&(i=m(t),i>0&&(o=`[${i+1}]`)),r.push(a+o);s&&u!==e&&"#document"!==u;)n&&(i=m(s),o=i>0?`[${i+1}]`:""),r.push(u+o),s=s.parentElement,u=s?s.nodeName:null;return`/${r.reverse().join("/")}`}function m(t){let e=0;const n=t.nodeName;let i=t.previousSibling;for(;i;)i.nodeName&&i.nodeName===n&&e++,i=i.previousSibling;return e}const g={_storage:new WeakMap,put:function(t,e,n){this._storage.has(t)||this._storage.set(t,new Map),this._storage.get(t).set(e,n)},get:function(t,e){const n=this._storage.get(t);return n?n.get(e):n},has:function(t,e){const n=this._storage.get(t);return n&&n.has(e)},remove:function(t,e){var n=this._storage.get(t).delete(e);return 0===!this._storage.get(e).size&&this._storage.delete(t),n}};function v(t){this.message=t||"unknown",this.name="FormLogicError",this.stack=(new Error).stack}v.prototype=Object.create(Error.prototype),v.prototype.constructor=v;var y=v,_={maps:[{tiles:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],name:"streets",attribution:"© <a href='http://openstreetmap.org'>OpenStreetMap</a> | <a href='www.openstreetmap.org/copyright'>Terms</a>"},{tiles:"GOOGLE_SATELLITE",name:"satellite"}],googleApiKey:"",repeatOrdinals:!1,validateContinuously:!1,validatePage:!0,swipePage:!0,arcGis:{jsUrl:"",cssUrl:"",webMapId:"",hasZ:!0,basemaps:["streets"]},textMaxChars:2e3};let b=navigator.language;const w=new RegExp("^([:0-9٠-٩]+ ?([^: 0-9٠-٩]+))|(([^: 0-9٠-٩]+) ?[:0-9٠-٩]+)$");function x(t){return $((t=void 0===t?new Date:t).toLocaleTimeString(b))}function $(t){return t.replace(/[\u200E\u200F]/g,"")}const E={get hour12(){return this.hasMeridian(x())},get pmNotation(){return this.meridianNotation(new Date(2e3,1,1,23,0,0))},get amNotation(){return this.meridianNotation(new Date(2e3,1,1,1,0,0))},meridianNotation(t){let e=x(t).match(w);return e&&e.length?(e=e.filter(t=>!!t),e[e.length-1].trim()):null},hasMeridian:t=>w.test($(t))},k={string:{convert:t=>t.replace(/^\s+$/,""),validate:()=>!0},select:{validate:()=>!0},select1:{validate:()=>!0},decimal:{convert(t){const e=Number(t);return isNaN(e)||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY?"":e},validate(t){const e=Number(t);return!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY}},int:{convert(t){const e=Number(t);return isNaN(e)||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY?"":e>=0?Math.floor(e):-Math.floor(Math.abs(e))},validate(t){const e=Number(t);return!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY&&Math.round(e)===e&&e.toString()===t.toString()}},date:{validate(t){const e=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(t);if(e&&4===e.length){const t=Number(e[1]),n=Number(e[2])-1,i=Number(e[3]),r=new Date(t,n,i);return r.getFullYear()===t&&r.getMonth()===n&&r.getDate()===i}return!1},convert(t){if(Object(o.d)(t)){const e=new Date(24*t*60*60*1e3);return"Invalid Date"===e.toString()?"":`${e.getFullYear().toString().pad(4)}-${(e.getMonth()+1).toString().pad(2)}-${e.getDate().toString().pad(2)}`}return/[0-9]T[0-9]/.test(t)&&(t=t.split("T")[0]),this.validate(t)?t:""}},datetime:{validate(t){const e=t.split("T");return 2===e.length?k.date.validate(e[0])&&k.time.validate(e[1],!1):k.date.validate(e[0])},convert(t){let e="Invalid Date";const n=t.split("T");if(Object(o.d)(t))e=new Date(24*t*60*60*1e3);else if(/[0-9]T[0-9]/.test(t)&&2===n.length){const t=k.date.convert(n[0]),e=k.time.convert(n[1],!1);if(t&&e)return`${t}T${e}`}else{const t=k.date.convert(n[0]);if(t)return`${t}T00:00:00.000${(new Date).getTimezoneOffsetAsTime()}`}return"Invalid Date"!==e.toString()?e.toISOLocalString():""}},time:{validate(t,e){let n=t.match(/^(\d\d):(\d\d):(\d\d)\.\d\d\d(\+|-)(\d\d):(\d\d)$/);return e="boolean"!=typeof e||e,n||e||(n=t.match(/^(\d\d):(\d\d):(\d\d)(\+|-)(\d\d):(\d\d)$/)),!!n&&(n[1]<24&&n[1]>=0&&n[2]<60&&n[2]>=0&&n[3]<60&&n[3]>=0&&n[5]<24&&n[5]>=0&&n[6]<60&&n[6]>=0)},convert(t,e){let n;const i={};let r,o,a,s,u;if(e="boolean"!=typeof e||e,!/^[0-9]{1,2}:[0-9]{1,2}(:[0-9.]*)?/.test(t)){if(n=new Date(t),"Invalid Date"===n.toString())return"";t=`${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}.${n.getMilliseconds()}${n.getTimezoneOffsetAsTime()}`}return r=t.toString().split(/(\+|-|Z)/),r.length<1?"":(o=r[0].split(":"),s=r[2]?[r[1]].concat(r[2].split(":")):"Z"===r[1]?["+","00","00"]:[],i.hours=o[0].pad(2),i.minutes=o[1].pad(2),a=o[2]?o[2].split("."):["00"],i.seconds=a[0],i.milliseconds=a[1]||(e?"000":void 0),u=0===s.length?(new Date).getTimezoneOffsetAsTime():`${s[0]+s[1].pad(2)}:${s[2]?s[2].pad(2):"00"}`,t=`${i.hours}:${i.minutes}:${i.seconds}${i.milliseconds?`.${i.milliseconds}`:""}${u}`,this.validate(t,e)?t:"")},convertMeridian(t){if(t=t.trim(),E.hasMeridian(t)){const e=t.split(" "),n=e[0].split(":");e.length>0&&(e[1]===E.pmNotation?n[0]=(Number(n[0])%12+12).toString().pad(2):e[1]===E.amNotation&&(n[0]=(Number(n[0])%12).toString().pad(2)),t=n.join(":"))}return t}},barcode:{validate:()=>!0},geopoint:{validate(t){const e=t.toString().trim().split(" ");return""!==e[0]&&e[0]>=-90&&e[0]<=90&&""!==e[1]&&e[1]>=-360&&e[1]<=360&&(void 0===e[2]||!isNaN(e[2]))&&(void 0===e[3]||!isNaN(e[3])&&e[3]>=0)},convert:t=>t.toString().trim()},geotrace:{validate(t){const e=t.toString().split(";");return e.length>=2&&e.every(t=>k.geopoint.validate(t))},convert:t=>t.toString().trim()},geoshape:{validate(t){const e=t.toString().split(";");return e.length>=4&&e[0]===e[e.length-1]&&e.every(t=>k.geopoint.validate(t))},convert:t=>t.toString().trim()},binary:{validate:()=>!0}};var L=k;var C={DataUpdate:function(t){return new CustomEvent("dataupdate",{detail:t})},FakeFocus:function(){return new CustomEvent("fakefocus",{bubbles:!0})},ApplyFocus:function(){return new CustomEvent("applyfocus")},PageFlip:function(){return new CustomEvent("pageflip",{bubbles:!0})},Removed:function(t){return new CustomEvent("removed",{detail:t,bubbles:!0})},InstanceFirstLoad:function(){return new CustomEvent("odk-instance-first-load",{bubbles:!0})},NewRepeat:function(t){return new CustomEvent("odk-new-repeat",{detail:t,bubbles:!0})},AddRepeat:function(t){return new CustomEvent("addrepeat",{detail:t,bubbles:!0})},RemoveRepeat:function(){return new CustomEvent("removerepeat",{bubbles:!0})},ChangeLanguage:function(){return new CustomEvent("changelanguage",{bubbles:!0})},Change:function(){return new Event("change",{bubbles:!0})},Input:function(){return new Event("input",{bubbles:!0})},InputUpdate:function(){return new CustomEvent("inputupdate",{bubbles:!0})},Edited:function(){return new CustomEvent("edited",{bubbles:!0})},ValidationComplete:function(){return new CustomEvent("validationcomplete",{bubbles:!0})},Invalidated:function(){return new CustomEvent("invalidated",{bubbles:!0})},ProgressUpdate:function(t){return new CustomEvent("progressupdate",{detail:t,bubbles:!0})},GoToHidden:function(){return new CustomEvent("gotohidden",{bubbles:!0})},XFormsValueChanged:function(t){return new CustomEvent("xforms-value-changed",{detail:t,bubbles:!0})}};n(307);String.prototype.pad=function(t){let e=this;for(;e.length<t;)e=`0${e}`;return e},void 0===console.deprecate&&(console.deprecate=(t,e)=>{console.warn(`${t} is deprecated. Use ${e} instead.`)});var T=n(163),S=n.n(T);const D=/instance\(\s*(["'])((?:(?!\1)[A-z0-9.\-_]+))\1\s*\)/g,M=/(decimal-date-time\(|pow\(|indexed-repeat\(|format-date\(|coalesce\(|join\(|max\(|min\(|random\(|substr\(|int\(|uuid\(|regex\(|now\(|today\(|date\(|if\(|boolean-from-string\(|checklist\(|selected\(|selected-at\(|round\(|area\(|position\([^)])/,A="http://openrosa.org/xforms",P="http://openrosa.org/javarosa",O="http://enketo.org/xforms",I="http://www.opendatakit.org/xforms",N=new DOMParser;let R,j;R=function(t,e){"string"==typeof t&&(t={modelStr:t}),t.external=t.external||[],t.submitted=void 0===t.submitted||t.submitted,(e=e||{}).full=void 0===e.full||e.full,this.events=document.createElement("div"),this.convertedExpressions={},this.templates={},this.loadErrors=[],this.data=t,this.options=e,this.namespaces={}},(R.prototype={get version(){return this.evaluate("/node()/@version","string",null,null,!0)},get instanceID(){return this.getMetaNode("instanceID").getVal()},get deprecatedID(){return this.getMetaNode("deprecatedID").getVal()||""},get instanceName(){return this.getMetaNode("instanceName").getVal()}}).init=function(){let t,e,n,i;const r=this;this.data.modelStr=this.data.modelStr.replace(/\s(xmlns=("|')[^\s>]+("|'))/g," data-$1"),this.options.full||(this.data.modelStr=this.data.modelStr.replace(/^(<model\s*><instance((?!<instance).)+<\/instance\s*>\s*)(<instance.+<\/instance\s*>)*/,"$1"));try{t="model",this.xml=N.parseFromString(this.data.modelStr,"text/xml"),this.throwParserErrors(this.xml,this.data.modelStr),this.data.external.forEach(o=>{for(t=`instance "${o.id}"`||"instance unknown",n=r.getSecondaryInstance(o.id),i=n.children,e=i.length-1;e>=0;e--)n.removeChild(i[e]);let a;(o.xml instanceof XMLDocument||o.xml instanceof Document)&&(a=window.navigator.userAgent.indexOf("Trident/")>=0?r.importNode(o.xml.documentElement,!0):r.xml.importNode(o.xml.documentElement,!0)),a&&n.appendChild(a)}),this.createSession("__session",this.data.session)}catch(e){console.error("parseXML error"),this.loadErrors.push(`Error trying to parse XML ${t}. ${e.message}`)}if(this.xml){try{this.hasInstance=!!this.xml.querySelector("model > instance"),this.rootElement=this.xml.querySelector("instance > *")||this.xml.documentElement,this.setNamespaces(),this.noRepeatRefErrorExpected=this.evaluate("/model/@odk:xforms-version","boolean",null,null,!0),this.getMetaNode("instanceID").getElement()||r.loadErrors.push("Invalid primary instance. Missing instanceID node."),Array.prototype.slice.call(this.xml.querySelectorAll("model > instance[src]:empty")).forEach(t=>{r.loadErrors.push(`External instance "${t.id}" is empty.`)}),this.trimValues(),this.extractTemplates()}catch(t){console.error(t),this.loadErrors.push(`${t.name}: ${t.message}`)}try{t="record",this.data.instanceStr?this.mergeXml(this.data.instanceStr):this.events.dispatchEvent(C.InstanceFirstLoad()),this.setInstanceIdAndDeprecatedId()}catch(e){console.error(e),this.loadErrors.push(`Error trying to parse XML ${t}. ${e.message}`)}}return this.loadErrors},R.prototype.throwParserErrors=(t,e)=>{if(!t||t.querySelector("parsererror"))throw new Error(`Invalid XML: ${e}`)},R.prototype.createSession=function(t,e){let n,i;const r=this.xml.querySelector("model"),a=["deviceid","username","email","phonenumber","simserial","subscriberid"];r&&(e="object"==typeof e?e:{},n=r.querySelector(`instance[id="${t}"]`),n||(n=N.parseFromString(`<instance id="${t}"/>`,"text/xml").documentElement,this.xml.adoptNode(n),r.appendChild(n)),a.forEach(t=>{e[t]=e[t]||Object(o.f)(`__enketo_meta_${t}`)||`${t} not found`}),i=N.parseFromString(`<session><context>${a.map(t=>`<${t}>${e[t]}</${t}>`).join("")}</context></session>`,"text/xml").documentElement,this.xml.adoptNode(i),n.appendChild(i))},R.prototype.getSecondaryInstance=function(t){let e;return[].slice.call(this.xml.querySelectorAll("model > instance")).some(n=>n.getAttribute("id")===t&&(e=n,!0)),e},R.prototype.node=function(t,e,n){return new j(t,e,n,this)},R.prototype.importNode=function(t,e){let n,i;switch(t.nodeType){case document.ELEMENT_NODE:{const r=document.createElementNS(t.namespaceURI,t.nodeName);if(t.attributes&&t.attributes.length>0)for(n=0,i=t.attributes.length;n<i;n++){const e=t.attributes[n];e.namespaceURI?r.setAttributeNS(e.namespaceURI,e.nodeName,t.getAttributeNS(e.namespaceURI,e.localName)):r.setAttribute(e.nodeName,t.getAttribute(e.nodeName))}if(e&&t.children.length)for(n=0,i=t.children.length;n<i;n++)r.appendChild(this.importNode(t.children[n],e));return!t.children.length&&t.textContent&&(r.textContent=t.textContent),r}case document.TEXT_NODE:case document.CDATA_SECTION_NODE:case document.COMMENT_NODE:return document.createTextNode(t.nodeValue)}},R.prototype.mergeXml=function(t){let e,n,i,o,a;const s=this;let u,l;if(t){if(i=this.xml.querySelector("instance"),o=this.xml.querySelector("instance > *"),!o)throw new Error("Model is corrupt. It does not contain a childnode of instance");t=(t=t.replace(/\s(xmlns=("|')[^\s>]+("|'))/g,"")).replace(/<!--[^>]*-->/g,""),l=N.parseFromString(t,"text/xml"),u=l.querySelectorAll("[*|template]");for(let t=0;t<u.length;t++)u[t].remove();if(Array.prototype.slice.call(l.querySelectorAll("*")).forEach(t=>{let e,n,i,r=0;try{e=f(t,"instance",!1),(void 0!==s.templates[e]||m(t)>0)&&(n=f(t,"instance",!0),s.evaluate(n,"node",null,null,!0)||(i=n.match(/([^[]+)\[(\d+)\]\//g),i&&i.length>0&&(r=i[i.length-1].match(/\[(\d+)\]/)[1]-1),s.addRepeat(e,r,!0)))}catch(t){console.log("Ignored error:",t)}}),Array.prototype.slice.call(l.querySelectorAll("*")).filter(t=>{const e=t.textContent;return 0===t.children.length&&0===e.trim().length}).forEach(t=>{const e=f(t,"instance",!0);s.node(e,0).getElement()&&(0===s.evaluate("./*","nodes",e,0,!0).length?s.evaluate("./text()","nodes",e,0,!0).forEach(t=>{t.textContent=""}):s.evaluate(".//*[not(*)]","nodes",e,0,!0).forEach(t=>{t.textContent=""}))}),n=new r.a({join:!1}),e=(new XMLSerializer).serializeToString(o),t=(new XMLSerializer).serializeToString(l),n.AddSource(e),n.AddSource(t),n.error.code)throw new Error(n.error.text);a=N.parseFromString(n.Get(1),"text/xml"),this.xml.querySelector("instance").removeChild(o),o=window.navigator.userAgent.indexOf("Trident/")>=0?this.importNode(a.documentElement,!0):this.xml.adoptNode(a.documentElement,!0),i.appendChild(o),this.rootElement=o}},R.prototype.trimValues=function(){this.node(null,null,{noEmpty:!0}).getElements().forEach(t=>{t.textContent=t.textContent.trim()})},R.prototype.setInstanceIdAndDeprecatedId=function(){let t,e,n,i,r;t=this.getMetaNode("instanceID"),e=t.getElement(),r=t.getVal(),this.data.instanceStr&&this.data.submitted&&(n=this.getMetaNode("deprecatedID").getElement(),e.textContent="",n||(n=N.parseFromString("<deprecatedID/>","text/xml").documentElement,this.xml.adoptNode(n),i=this.xml.querySelector("* > meta"),i.appendChild(n))),t.getVal()||t.setVal(this.evaluate('concat("uuid:", uuid())',"string")),n&&this.getMetaNode("deprecatedID").setVal(r)},R.prototype.bindJsEvaluator=function(t){const e=new S.a.XPathEvaluator;"function"==typeof t&&t(S.a),S.a.bindDomLevel3XPath(this.xml,{window:{JsXPathException:!0,JsXPathExpression:!0,JsXPathNSResolver:!0,JsXPathResult:!0,JsXPathNamespace:!0},document:{jsCreateExpression:(...t)=>e.createExpression(...t),jsCreateNSResolver:(...t)=>e.createNSResolver(...t),jsEvaluate:(...t)=>e.evaluate(...t)}})},R.prototype.getMetaNode=function(t){const e=this.getNamespacePrefix(A);let n=this.node(`/*/${e}:meta/${e}:${t}`);return n.getElement()||(n=this.node(`/*/meta/${t}`)),n},R.prototype.getRepeatCommentText=t=>"repeat:/"+(t=t.trim()),R.prototype.getRepeatCommentSelector=function(t){return`//comment()[self::comment()="${this.getRepeatCommentText(t)}"]`},R.prototype.getRepeatCommentEl=function(t,e){return this.evaluate(this.getRepeatCommentSelector(t),"nodes",null,null,!0)[e]},R.prototype.addRepeat=function(t,e,n){let i;const r=this;this.templates[t]||this.extractFakeTemplates([t]);const o=this.templates[t],a=this.getRepeatSeries(t,e),s=a.length?a[a.length-1]:this.getRepeatCommentEl(t,e);n||a.forEach(t=>{r.addOrdinalAttribute(t,a[0])}),o&&s?(i=o.cloneNode(!0),s.after(i),this.removeOrdinalAttributes(i),n||this.addOrdinalAttribute(i,a[0]),n&&Array.prototype.slice.call(i.querySelectorAll("*")).filter(t=>0===t.children.length).forEach(t=>{t.textContent=""})):console.error("Could not find template node and/or node to insert the clone after")},R.prototype.addOrdinalAttribute=function(t,e){let n,i;const r=this.getNamespacePrefix(O);e=e||t,!0!==_.repeatOrdinals||t.getAttributeNS(O,"ordinal")||(n=e.getAttributeNS(O,"last-used-ordinal")||0,i=Number(n)+1,e.setAttributeNS(O,`${r}:last-used-ordinal`,i),t.setAttributeNS(O,`${r}:ordinal`,i))},R.prototype.removeOrdinalAttributes=t=>{if(!0===_.repeatOrdinals){const e=Array.prototype.slice.call(t.querySelectorAll("[*|ordinal]"));e.push(t);for(let t=0;t<e.length;t++)e[t].removeAttributeNS(O,"last-used-ordinal"),e[t].removeAttributeNS(O,"ordinal")}},R.prototype.getRepeatSeries=function(t,e){let n,i,r;const o=this.getRepeatCommentEl(t,e),a=[];if(o)for(n=o.textContent.substr("repeat:/".length).split("/"),i=n[n.length-1],r=o.nextSibling;r;)r.nodeName&&r.nodeName===i&&a.push(r),r=r.nextSibling;return a},R.prototype.determineIndex=function(t){if(t){const e=t.nodeName,n=f(t,"instance"),i=Array.prototype.slice.call(this.xml.querySelectorAll(e.replace(/\./g,"\\."))).filter(t=>n===f(t,"instance"));return 1===i.length?null:i.indexOf(t)}return console.error("no node, or multiple nodes, provided to determineIndex function"),-1},R.prototype.extractTemplates=function(){const t=this;this.getTemplateNodes().reverse().forEach(e=>{const n=f(e,"instance");t.addTemplate(n,e),e.remove()})},R.prototype.extractFakeTemplates=function(t){const e=this;let n;t.forEach(t=>{n=e.evaluate(t,"node",null,null,!0),n&&e.addTemplate(t,n,!0)})},R.prototype.addRepeatComments=function(t){const e=this.getRepeatCommentText(t);this.evaluate(t,"nodes",null,null,!0).forEach(t=>{(function(t){let e=!1;const n=t.nodeName;for(t=t.previousSibling;t;){if(t.nodeName&&t.nodeName===n){e=!0;break}t=t.previousSibling}return e})(t)||function(t,e){let n=!1;for(t=t.previousSibling;t;){if(t.nodeType===Node.COMMENT_NODE&&t.textContent===e){n=!0;break}t=t.previousSibling}return n}(t,e)||t.before(document.createComment(e))})},R.prototype.addTemplate=function(t,e,n){if(this.addRepeatComments(t),!this.templates[t]){const i=e.cloneNode(!0);i.removeAttribute("template"),i.removeAttribute("jr:template"),n&&Array.prototype.slice.call(i.querySelectorAll("*")).filter(t=>0===t.children.length).forEach(t=>{t.textContent=""}),this.templates[t]=i}},R.prototype.getTemplateNodes=function(){const t=this.getNamespacePrefix(P);return this.evaluate(`/model/instance[1]/*//*[@template] | /model/instance[1]/*//*[@${t}:template]`,"nodes",null,null,!1)},R.prototype.getStr=function(){let t=(new XMLSerializer).serializeToString(this.xml.querySelector("instance > *")||this.xml.documentElement,"text/xml");return t=t.replace(/\s(data-)(xmlns=("|')[^\s>]+("|'))/g," $2"),t=t.replace(new RegExp("\x3c!--repeat:/\\/[^>]+--\x3e","g"),""),-1===navigator.userAgent.indexOf("Trident/")&&(t=this.removeDuplicateEnketoNsDeclarations(t)),t},R.prototype.removeDuplicateEnketoNsDeclarations=function(t){let e=0;const n=new RegExp(`( xmlns:${this.getNamespacePrefix(O)}="${O}")`,"g");return t.replace(n,t=>(e++,e>1?"":t))},R.prototype.makeBugCompliant=function(t,e,n){if(this.noRepeatRefErrorExpected)return t;let i=this.node(e,n).getElement();if(!i)return t;const r=[i];for(;i&&i.parentElement&&"instance"!==i.nodeName.toLowerCase();)i=i.parentElement,r.push(i);return r.forEach(e=>{const n=e.nodeName.replace(/\./g,"\\."),i=u(e,`${n}:not([template])`);if(i.length>1){const n=f(e,"instance"),r=i.indexOf(e);t=t.replace(new RegExp(`${n}/`,"g"),`${n}[${r+1}]/`)}}),t},R.prototype.setNamespaces=function(){const t=this.hasInstance?"/model/instance":"",e=this.evaluate(`${t}/*`,"nodes",null,null,!0),n=this;let i;e.forEach(t=>{t.hasAttributes()&&Array.from(t.attributes).forEach(t=>{0===t.name.indexOf("xmlns:")&&(n.namespaces[t.name.substring(6)]=t.value)}),[["orx",A,!1],["jr",P,!1],["enk",O,!0===_.repeatOrdinals],["odk",I,!1]].forEach(e=>{n.getNamespacePrefix(e[1])||(i=n.namespaces[e[0]]?`__${e[0]}`:e[0],n.namespaces[i]=e[1],e[2]&&t.setAttributeNS("http://www.w3.org/2000/xmlns/",`xmlns:${i}`,e[1]))})})},R.prototype.getNamespacePrefix=function(t){const e=Object.entries(this.namespaces).find(e=>e[1]===t);return e?e[0]:void 0},R.prototype.getNsResolver=function(){const t=void 0===this.namespaces?{}:this.namespaces;return{lookupNamespaceURI:e=>t[e]||null}},R.prototype.shiftRoot=function(t){const e=/"([^"]*)(")|'([^']*)(')/g;return this.hasInstance&&(t=(t=(t=(t=t.replace(e,(t,e,n,i,r)=>{const o=n||r;return o+(void 0!==e?encodeURIComponent(e):encodeURIComponent(i))+o})).replace(/^(\/(?!model\/)[^/][^/\s,"']*\/)/g,"/model/instance[1]$1")).replace(/([^a-zA-Z0-9.\])/*_-])(\/(?!model\/)[^/][^/\s,"']*\/)/g,"$1/model/instance[1]$2")).replace(e,(t,e,n,i,r)=>{const o=n||r;return o+(void 0!==e?decodeURIComponent(e):decodeURIComponent(i))+o})),t},R.prototype.replaceInstanceFn=function(t){let e;const n=this;return t.replace(D,(t,i,r)=>{if(e=`/model/instance[@id="${r}"]`,n.evaluate(e,"nodes",null,null,!0).length)return e;throw new y(`instance "${r}" does not exist in model`)})},R.prototype.replaceCurrentFn=(t,e)=>t.replace(/current\(\)/g,`${e}`),R.prototype.replaceIndexedRepeatFn=function(t,e,n){const i=this;return Object(o.e)(t,"indexed-repeat").forEach(r=>{let o,a,s;const u=r[1];if(u.length%2!=1)throw new y(`indexed repeat with incorrect number of parameters found: ${r[0]}`);for(a=u[0],o=u.length-1;o>1;o-=2)s=isNaN(u[o])?i.evaluate(u[o],"number",e,n,!0):u[o],a=a.replace(u[o-1],`${u[o-1]}[position() = ${s}]`);t=t.replace(r[0],a)}),t},R.prototype.replaceVersionFn=function(t){const e=this;let n;return Object(o.e)(t,"version").forEach(i=>{n=n||e.evaluate("/node()/@version","string",null,0,!0),t=t.replace(i[0],`"${n}"`)}),t},R.prototype.replacePullDataFn=function(t,e,n){let i;const r=this,o=this.convertPullDataFn(t,e,n);for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i=r.evaluate(o[a],"string",e,n,!0),t=t.replace(a,`"${i}"`));return t},R.prototype.convertPullDataFn=function(t,e,n){const i=this,r=Object(o.e)(t,"pulldata"),a={};return r.length?(r.forEach(t=>{let r,s;const u=t[1];if(4!==u.length)throw new y(`pulldata with incorrect number of parameters found: ${t[0]}`);u[1]=Object(o.h)(u[1]),u[2]=Object(o.h)(u[2]),r=i.evaluate(u[3],"string",e,n,!0),r=""===r||isNaN(r)?`'${r}'`:r,s=`instance(${u[0]})/root/item[${u[2]} = ${r}]/${u[1]}`,a[t[0]]=s}),a):a},R.prototype.evaluate=function(t,e,n,i,r){let o,a,s,u,l,c,h,d,p,m,g,v;for(u in g=t,r=r||!1,e=e||"any",i=i||0,s=this.xml,p=null,n?(h=this.node(n).getElements(),p=h.length,a=h[i]):a=this.rootElement,a||console.error("no context element found",n,i),m=[t,n,i,p].join("|"),t=this.replaceIndexedRepeatFn(t,n,i),v=g===(t=this.replacePullDataFn(t,n,i)),this.convertedExpressions[m]?t=this.convertedExpressions[m]:(t=t.trim(),t=this.replaceInstanceFn(t),t=this.replaceVersionFn(t),t=this.replaceCurrentFn(t,f(a,"instance",!0)),t=this.shiftRoot(t),p&&p>1&&(t=this.makeBugCompliant(t,n,i)),t=(t=(t=t.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"'),v&&(this.convertedExpressions[m]=t)),l={0:["any","ANY_TYPE"],1:["number","NUMBER_TYPE","numberValue"],2:["string","STRING_TYPE","stringValue"],3:["boolean","BOOLEAN_TYPE","booleanValue"],7:["nodes","ORDERED_NODE_SNAPSHOT_TYPE"],9:["node","FIRST_ORDERED_NODE_TYPE","singleNodeValue"]},l)if(Object.prototype.hasOwnProperty.call(l,u)){if(u=Number(u),l[u][0]===e)break;u=0}if(r&&void 0!==s.evaluate&&!M.test(t))try{c=s.evaluate(t,a,this.getNsResolver(),u,null)}catch(e){console.log("%cWell native XPath evaluation did not work... No worries, worth a shot, the expression probably contained unknown OpenRosa functions or errors:","color:orange",t)}if(!c)try{void 0===s.jsEvaluate&&this.bindJsEvaluator(),c=s.jsEvaluate(t,a,this.getNsResolver(),u,null)}catch(e){throw new y(`Could not evaluate: ${t}, message: ${e.message}`)}if(c){if(0===u){for(u in l)if(Object.prototype.hasOwnProperty.call(l,u)&&(u=Number(u),u===Number(c.resultType)&&u>0&&u<4)){d=c[l[u][2]];break}d||console.error(`Expression: ${t} did not return any boolean, string or number value as expected`)}else if(7===u)for(d=[],o=0;o<c.snapshotLength;o++)d.push(c.snapshotItem(o));else d=c[l[u][2]];return d}},j=function(t,e,n,i){const r=i.hasInstance?"/model/instance[1]//*":"//*";this.model=i,this.originalSelector=t,this.selector="string"==typeof t&&t.length>0?t:r,n=null!=n?n:{},this.filter=n,this.filter.onlyLeaf=void 0!==n.onlyLeaf&&n.onlyLeaf,this.filter.noEmpty=void 0!==n.noEmpty&&n.noEmpty,this.index=e},j.prototype.getElement=function(){return this.getElements()[0]},j.prototype.getElements=function(){let t,e;return this._nodes||(this._nodes=this.model.evaluate(this.selector,"nodes",null,null,!0),!0===this.filter.noEmpty?this._nodes=this._nodes.filter(t=>(e=t.textContent,0===t.children.length&&e.trim().length>0)):!0===this.filter.onlyLeaf&&(this._nodes=this._nodes.filter(t=>0===t.children.length))),t=this._nodes,void 0!==this.index&&null!==this.index&&(t=void 0===t[this.index]?[]:[t[this.index]]),t},j.prototype.setIndex=function(t){this.index=t},j.prototype.setVal=function(t,e){let n,i,r;const o=this.getVal();n=null!=t?Array.isArray(t)?t.join(" "):t.toString():"",n=this.convert(n,e);const a=this.getElements();if(1===a.length&&n.toString()!==o.toString()){const t=a[0];return t.textContent=n.toString(),i=this.getClosestRepeat(),i.nodes=[t.nodeName],r=this.model.getUpdateEventData(t,e),i=r?s.a.extend({},i,r):i,this.model.events.dispatchEvent(C.DataUpdate(i)),"binary"===e&&(n.length>0?(t.setAttribute("type","file"),t.removeAttribute("src")):t.removeAttribute("type")),i}return a.length>1?(console.error("nodeset.setVal expected nodeset with one node, but received multiple"),null):0===a.length?(console.log(`Data node: ${this.selector} with null-based index: ${this.index} not found. Ignored.`),null):null},j.prototype.getVal=function(){const t=this.getElements();return t.length?t[0].textContent:void 0},j.prototype.getClosestRepeat=function(){let t=this.getElement(),e=t.nodeName;for(;e&&"instance"!==e&&(!t.nextElementSibling||t.nextElementSibling.nodeName!==e)&&(!t.previousElementSibling||t.previousElementSibling.nodeName!==e);)t=t.parentElement,e=t?t.nodeName:null;return e&&"instance"!==e?{repeatPath:f(t,"instance"),repeatIndex:this.model.determineIndex(t)}:{}},j.prototype.remove=function(){const t=this.getElement();if(t){const e=t.nodeName,n=f(t,"instance");let i=this.model.determineIndex(t);const r=this.model.getRemovalEventData(t);this.model.templates[n]||this.model.extractFakeTemplates([n]);let o=t.nextElementSibling;for(t.remove(),this._nodes=null,this.model.events.dispatchEvent(C.DataUpdate({nodes:null,repeatPath:n,repeatIndex:i}));o&&o.nodeName==e;)o=o.nextElementSibling,this.model.events.dispatchEvent(C.DataUpdate({nodes:null,repeatPath:n,repeatIndex:i++}));this.model.events.dispatchEvent(C.Removed(r))}else console.error(`could not find node ${this.selector} with index ${this.index} to remove `)},j.prototype.convert=(t,e)=>""===t.toString()?t:null!=e&&void 0!==L[e.toLowerCase()]&&void 0!==L[e.toLowerCase()].convert?L[e.toLowerCase()].convert(t):t,j.prototype.validate=function(t,e,n){const i=this,r={};return this.validateRequired(e).then(e=>(r.requiredValid=e,!1===e?null:i.validateConstraintAndType(t,n))).then(t=>(r.constraintValid=t,r))},j.prototype.validateConstraintAndType=function(t,e){const n=this;let i;return e&&void 0!==L[e.toLowerCase()]||(e="string"),t||"string"!==e&&"select"!==e&&"select1"!==e&&"binary"!==e?(i=n.getVal(),""===i.toString()?Promise.resolve(!0):Promise.resolve().then(()=>L[e.toLowerCase()].validate(i)).then(e=>{const i=!(null!=t&&t.length>0)||n.model.evaluate(t,"boolean",n.originalSelector,n.index);return e&&i})):Promise.resolve(!0)},j.prototype.isRequired=function(t){return!(!t||"false()"===t.trim())&&("true()"===t.trim()||this.model.evaluate(t,"boolean",this.originalSelector,this.index))},j.prototype.validateRequired=function(t){const e=this;return!t||this.getVal()?Promise.resolve(!0):Promise.resolve().then(()=>!e.isRequired(t))},R.prototype.getUpdateEventData=()=>{},R.prototype.getRemovalEventData=()=>{},R.prototype.types=L;var q=n(5),F={getWrapNode:t=>t.closest(".question, .calculation, .setvalue"),getWrapNodes(t){const e=[];return t.forEach(t=>{const n=this.getWrapNode(t);e.includes(n)||e.push(n)}),e},getProps(t){return{path:this.getName(t),ind:this.getIndex(t),inputType:this.getInputType(t),xmlType:this.getXmlType(t),constraint:this.getConstraint(t),calculation:this.getCalculation(t),relevant:this.getRelevant(t),readonly:this.getReadonly(t),val:this.getVal(t),required:this.getRequired(t),enabled:this.isEnabled(t),multiple:this.isMultiple(t)}},getInputType(t){const e=t.nodeName.toLowerCase();return"input"===e?t.dataset.drawing?"drawing":t.type?"text"===t.type&&"date"===this.getXmlType(t)?"date":"text"===t.type&&"datetime"===this.getXmlType(t)?"datetime-local":t.type.toLowerCase():console.error("<input> node has no type"):"select"===e?"select":"textarea"===e?"textarea":"fieldset"===e||"section"===e?"fieldset":console.error("unexpected input node type provided")},getConstraint:t=>t.dataset.constraint,getRequired(t){if(!d(t,".or-appearance-label",".or"))return t.dataset.required},getRelevant:t=>t.dataset.relevant,getReadonly:t=>t.matches("[readonly]"),getCalculation:t=>t.dataset.calculate,getXmlType:t=>t.dataset.typeXml.toLowerCase()||"string",getName(t){const e=t.dataset.name||t.getAttribute("name");return e||console.error("input node has no name"),e},getIndex(t){return this.form.repeats.getIndex(t.closest(".or-repeat"))},isMultiple(t){return"checkbox"===this.getInputType(t)||t.multiple},isEnabled:t=>!(t.disabled||d(t,".disabled",".or")),getVal(t){let e="";const n=this.getInputType(t),i=this.getName(t);switch(n){case"radio":{const n=this.getWrapNode(t).querySelector(`input[type="radio"][data-name="${i}"]:checked`);e=n?n.value:"";break}case"checkbox":e=[...this.getWrapNode(t).querySelectorAll(`input[type="checkbox"][name="${i}"]:checked`)].map(t=>t.value);break;case"select":if(this.isMultiple(t))e=[...t.querySelectorAll("option:checked")].map(t=>t.value);else{const n=t.querySelector("option:checked");e=n?n.value:""}break;case"datetime-local":if(t.value){const n=5===t.value.split("T")[1].length?t.value+":00":t.value;e=n+new Date(n).getTimezoneOffsetAsTime()}break;default:e=t.value}return e||""},find(t,e){let n="name";this.form.view.html.querySelector(`input[type="radio"][data-name="${t}"]:not(.ignore)`)&&(n="data-name");const i=this.getWrapNodes(this.form.view.html.querySelectorAll(`[${n}="${t}"]`))[e];return i?i.querySelector(`[${n}="${t}"]:not(.ignore)`):null},setVal(t,e,n=C.InputUpdate()){let i;const r=this.getInputType(t),o=this.getXmlType(t),a=this.getWrapNode(t),s=this.getName(t);if("radio"===r)i=a.querySelectorAll(`[data-name="${s}"]:not(.ignore)`);else{if(i=a.querySelectorAll(`[name="${s}"]:not(.ignore)`),"file"===r&&e)return t.setAttribute("data-loaded-file-name",e),!1;if(("date"===o||"datetime"===o)&&e&&(e=L[o.toLowerCase()].convert(e),"datetime"===o)){const t=(e=new Date(e).toISOLocalString()).split("T"),n=t[0],i=t&&t[1]?t[1].split(/[Z\-+]/)[0]:"00:00";e=`${n}T${i}`}if("time"===r&&/(\+|-)/.test(e)){const t=`${(new Date).toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}).replace(/\u200E/g,"")} ${e.replace(/(\d\d:\d\d:\d\d)(\.\d{1,3})(\s?((\+|-)\d\d))(:)?(\d\d)?/,"$1 GMT$3$7")}`,n=new Date(t);"Invalid Date"!==n.toString()?e=`${n.getHours().toString().pad(2)}:${n.getMinutes().toString().pad(2)}`:console.error("could not parse time:",e)}}if(!0===this.isMultiple(t)?e=e.split(" "):"radio"===r&&(e=[e]),i.length){const o=this.getVal(t);if(void 0===o||o.toString()!==e.toString()){switch(r){case"radio":{const n=this.getWrapNode(t).querySelector(`input[type="radio"][data-name="${s}"][value="${e}"]`);n&&(n.checked=!0);break}case"checkbox":this.getWrapNode(t).querySelectorAll(`input[type="checkbox"][name="${s}"]`).forEach(t=>t.checked=e.includes(t.value));break;case"select":if(this.isMultiple(t))t.querySelectorAll("option").forEach(t=>t.selected=e.includes(t.value));else{const n=t.querySelector(`option[value="${e}"]`);n?n.selected=!0:t.querySelectorAll("option").forEach(t=>t.selected=!1)}break;default:t.value=e}n&&i[0].dispatchEvent(n)}}return i[0]},validate(t){return this.form.validateInput(t)}};var U={alert:function(t){return window.alert(t),Promise.resolve()},confirm:function(t){const e=t.message?t.message:t;return Promise.resolve(window.confirm(e))},prompt:function(t,e){return Promise.resolve(window.prompt(t,e))}};const B=!0===_.repeatOrdinals;var z={init(){const t=this;let e;if(!this.form)throw new Error("Repeat module not correctly instantiated with form property.");return e=this.form.view.$.find(".or-repeat-info"),this.templates={},e.siblings(".or-repeat").prepend('<span class="repeat-number"></span>').addBack().filter((function(){return this.firstChild&&3===this.firstChild.nodeType&&(this.firstChild.textContent=""),!this.querySelector(".question")})).addClass("empty"),e.filter("*:not([data-repeat-fixed]):not([data-repeat-count])").append('<button type="button" class="btn btn-default add-repeat-btn"><i class="icon icon-plus"> </i></button>').siblings(".or-repeat").append(`<div class="repeat-buttons"><button type="button" ${B?" disabled ":" "}class="btn btn-default remove"><i class="icon icon-minus"> </i></button></div>`),this.form.model.extractFakeTemplates(e.map((function(){return this.dataset.name})).get()),e.siblings(".or-repeat").reverse().each((function(){const e=this.cloneNode(!0),n=e.getAttribute("name");this.remove(),s()(e).removeClass("contains-current current").find(".current").removeClass("current"),t.templates[n]=e})),e.reverse().each((function(){s()(this).closest(".or-repeat").length||t.updateDefaultFirstRepeatInstance(this)})).get().forEach(t.updateViewInstancesFromModel.bind(this)),this.form.view.$.on("click","button.add-repeat-btn:enabled",(function(){return t.add(s()(this).closest(".or-repeat-info")[0]),!1})),this.form.view.$.on("click","button.remove:enabled",(function(){return t.confirmDelete(this.closest(".or-repeat")),!1})),this.countUpdate(),!0},confirmDelete(t){const e=this;U.confirm({heading:Object(q.a)("confirm.repeatremove.heading"),msg:Object(q.a)("confirm.repeatremove.msg")}).then(n=>{n&&e.remove(s()(t))}).catch(console.error)},getIndex(t){if(!t||!this.form.repeatsPresent)return 0;let e=t.parentElement.closest(".or-repeat");const n=t.classList.contains("or-repeat-info");let i,r=n?1:Number(t.querySelector(".repeat-number").textContent);for(;e;){for(;e.previousElementSibling&&e.previousElementSibling.matches(".or-repeat");)e=e.previousElementSibling,n?r++:(i=i||t.getAttribute("name"),r+=e.querySelectorAll(`.or-repeat[name="${i}"]`).length);const o=e.parentElement;e=o?o.closest(".or-repeat"):null}return r-1},getInfoIndex(t){if(!this.form.repeatsPresent)return 0;if(!t||!t.classList.contains("or-repeat-info"))return null;const e=t.dataset.name;return[...t.closest("form.or").querySelectorAll(`.or-repeat-info[data-name="${e}"]`)].indexOf(t)},updateViewInstancesFromModel(t){const e=t.dataset.name,n=this.getIndex(t),i=this.form.model.getRepeatSeries(e,n),r=l(t,".or-repeat");return i.length>r.length&&(this.add(t,i.length-r.length,"model"),l(t,".or-repeat").reduce((t,e)=>t.concat([...e.querySelectorAll(".or-repeat-info:not([data-repeat-count])")]),[]).forEach(this.updateViewInstancesFromModel.bind(this))),i.length},updateDefaultFirstRepeatInstance(t){const e=t.dataset.name;if(!this.form.model.data.instanceStr&&!this.templates[e].classList.contains("or-appearance-minimal")){const n=this.getIndex(t);0===this.form.model.getRepeatSeries(e,n).length&&this.add(t,1,"magic"),l(t,".or-repeat").reduce((t,e)=>t.concat([...e.querySelectorAll(".or-repeat-info:not([data-repeat-count])")]),[]).forEach(this.updateDefaultFirstRepeatInstance.bind(this))}},updateRepeatInstancesFromCount(t){let e;const n=t.dataset.repeatCount||"";if(!n)return;const i=t.dataset.name,r=this.form.model.evaluate(n,"node",this.form.model.getRepeatCommentSelector(i),this.getInfoIndex(t),!0);r?e=Number(r.textContent):console.error("Unexpectedly, could not obtain repeat count node"),e=isNaN(e)?0:e;const o=l(t,`.or-repeat[name="${i}"]`).length;let a=e-o;if(a>0)this.add(t,a,"count");else if(a<0)for(a=Math.abs(a)>=o?(B?1:0)-o:a;a<0;a++){const e=s()(t).siblings(".or-repeat").last();this.remove(e,0)}u(t,".or-repeat").reduce((t,e)=>t.concat(p(e,".or-group, .or-group-data")),[]).reduce((t,e)=>t.concat(p(e,".or-repeat-info[data-repeat-count]")),[]).forEach(this.updateRepeatInstancesFromCount.bind(this))},countUpdate(t={}){this.form.getRelatedNodes("data-repeat-count",".or-repeat-info",t).get().forEach(this.updateRepeatInstancesFromCount.bind(this))},add(t,e=1,n="user"){if(!t)return console.error("Nothing to clone"),!1;let i;const r=t.dataset.name;let o=l(t,".or-repeat"),a=this.templates[r].cloneNode(!0),u=this.getIndex(t),c=this.form.model.getRepeatSeries(r,u).length;const h=t.previousElementSibling;let d=h&&h.classList.contains("or-repeat")?Number(h.querySelector(".repeat-number").textContent):0;for(let l=0;l<e;l++){a.querySelectorAll(".option-wrapper").forEach(this.fixRadioNames),a.querySelectorAll("datalist").forEach(this.fixDatalistIds),t.parentElement.insertBefore(a,t),d>0&&a.classList.add("clone"),a.querySelector(".repeat-number").textContent=d+1,o.push(a),o.length>c&&(this.form.model.addRepeat(r,u),c++),i=i||this.getIndex(a);const e={repeatIndex:i,repeatPath:r,trigger:n,cloned:!0};"user"!==n&&"count"!==n||a.dispatchEvent(C.NewRepeat(e)),a.dispatchEvent(C.AddRepeat(e)),this.form.widgetsInitialized&&this.form.widgets.init(s()(a),this.form.options),a.querySelectorAll(".or-repeat-info:not([data-repeat-count])").forEach(this.updateDefaultFirstRepeatInstance.bind(this)),a=this.templates[r].cloneNode(!0),i++,d++}return this.toggleButtons(t),!0},remove(t,e){const n=this,i=t.next(".or-repeat, .or-repeat-info"),r=t.attr("name"),o=this.getIndex(t[0]),a=t.siblings(".or-repeat-info")[0];e=void 0!==e?e:600,t.hide(e,()=>{t.remove(),n.numberRepeats(a),n.toggleButtons(a),i[0].dispatchEvent(C.RemoveRepeat()),n.form.model.node(r,o).remove()})},fixRadioNames(t){const e=Math.floor(1e7*Math.random()+1);t.querySelectorAll('input[type="radio"]').forEach(t=>{t.setAttribute("name",e)})},fixDatalistIds(t){const e=t.id+Math.floor(1e7*Math.random()+1);t.parentNode.querySelector(`input[list="${t.id}"]`).setAttribute("list",e),t.id=e},toggleButtons(t){s()(t).siblings(".or-repeat").children(".repeat-buttons").find("button.remove").prop("disabled",!1).first().prop("disabled",B)},numberRepeats(t){s()(t).siblings(".or-repeat").each((t,e)=>{s()(e).children(".repeat-number").text(t+1)})}},V={tocItems:[],_maxTocLevel:[],generateTocItems(){this.tocItems=[],[...this.form.view.$[0].querySelectorAll('.question:not([role="comment"]), .or-group')].filter(t=>!t.closest(".disabled")&&(t.matches(".question")||t.querySelector(".question:not(.disabled)")||t.matches(".or-repeat-info")&&0===l(t,".or-repeat").length)).filter(t=>!t.classList.contains("or-repeat-info")).forEach((t,e)=>{const n=h(t,".or-group");this.tocItems.push({element:t,level:n.length,parent:n.length>0?n[n.length-1]:null,tocId:e,tocParentId:null})}),this._maxTocLevel=Math.max.apply(Math,this.tocItems.map(t=>t.level));const t=this.tocItems.filter(t=>t.level<this._maxTocLevel&&t.element.classList.contains("or-group"));this.tocItems.forEach(e=>{const n=t.find(t=>e.parent===t.element);n&&(e.tocParentId=n.tocId)})},getHtmlFragment(){this.generateTocItems();const t=document.createDocumentFragment();let e=0;do{const n=this.tocItems.filter(t=>t.level===e);if(0===e)this._buildTocHtmlList(n,t);else{[...new Set(n.map(t=>t.tocParentId))].forEach(e=>{const i=document.createElement("ul"),r=n.filter(t=>t.tocParentId===e);this._buildTocHtmlList(r,i),t.querySelectorAll('[tocId="'+e+'"]')[0].appendChild(i)})}e++}while(e<=this._maxTocLevel);return t},_getTitle(t){let e;const n=t.querySelector(".question-label.active");if(n)e=n.textContent;else{const n=t.querySelector(".or-hint.active");n&&(e=n.textContent)}return e=e&&e.length>20?`${e.substring(0,20)}...`:e,e},_buildTocHtmlList(t,e){t.length>0&&t.forEach(t=>{const n=document.createElement("li");if(t.element.classList.contains("or-group")){const e=document.createElement("summary");e.textContent=this._getTitle(t.element)||`[${t.tocId+1}]`;const i=document.createElement("details");i.setAttribute("tocId",t.tocId),null!==t.tocParentId&&i.setAttribute("tocParentId",t.tocParentId),i.append(e),n.append(i)}else{const e=document.createElement("a");e.textContent=this._getTitle(t.element)||`[${t.tocId+1}]`,n.setAttribute("tocId",t.tocId),n.setAttribute("role","pageLink"),null!==t.tocParentId&&n.setAttribute("tocParentId",t.tocParentId),n.append(e)}e.append(n)})}},H=(n(525),{active:!1,current:null,activePages:[],init(){if(!this.form)throw new Error("Repeats module not correctly instantiated with form property.");if(this.form.view.html.classList.contains("pages")){const t=[...this.form.view.html.querySelectorAll(".question, .or-appearance-field-list")].concat([...this.form.view.html.querySelectorAll(".or-repeat.or-appearance-field-list + .or-repeat-info")]).filter(t=>!(t.parentElement.closest(".or-appearance-field-list")||t.matches(".question")&&t.querySelector("[data-for]"))).map(t=>(t.setAttribute("role","page"),t));if(t.length>0||t[0].classList.contains("or-repeat")){const e=this.form.view.html.parentNode;this.$formFooter=s()(e.querySelector(".form-footer")),this.$btnFirst=this.$formFooter.find(".first-page"),this.$btnPrev=this.$formFooter.find(".previous-page"),this.$btnNext=this.$formFooter.find(".next-page"),this.$btnLast=this.$formFooter.find(".last-page"),this.$toc=s()(e.querySelector(".pages-toc__list")),this._updateAllActive(t),this._updateToc(),this._toggleButtons(0),this._setButtonHandlers(),this._setRepeatHandlers(),this._setBranchHandlers(),this._setSwipeHandlers(),this._setTocHandlers(),this._setLangChangeHandlers(),this.active=!0,this._flipToFirst()}}},flipToPageContaining(t){let e;e=t.closest('[role="page"]'),e=0===e.length?t.find('[role="page"]'):e,e.length&&this._flipTo(e[0]),this.$toc.parent().find(".pages-toc__overlay").click()},_setButtonHandlers(){const t=this;this.$btnFirst.off(".pagemode").on("click.pagemode",()=>(t.form.pageNavigationBlocked||t._flipToFirst(),!1)),this.$btnPrev.off(".pagemode").on("click.pagemode",()=>(t.form.pageNavigationBlocked||t._prev(),!1)),this.$btnNext.off(".pagemode").on("click.pagemode",()=>(t.form.pageNavigationBlocked||t._next(),!1)),this.$btnLast.off(".pagemode").on("click.pagemode",()=>(t.form.pageNavigationBlocked||t._flipToLast(),!1))},_setSwipeHandlers(){if(!1===_.swipePage)return;const t=this,e=this.form.view.$.closest(".main");e.swipe("destroy"),e.swipe({allowPageScroll:"vertical",threshold:250,preventDefaultEvents:!1,swipeLeft(){t.$btnNext.click()},swipeRight(){t.$btnPrev.click()},swipeStatus(e,n){if("start"===n){const e=t._getCurrent()?t._getCurrent().querySelector(":focus"):null;e&&e.blur()}}})},_setTocHandlers(){const t=this;this.$toc.on("click","a",(function(){if(!t.form.pageNavigationBlocked&&this.parentElement&&this.parentElement.getAttribute("tocId")){const e=parseInt(this.parentElement.getAttribute("tocId"),10),n=t.form.toc.tocItems.find(t=>t.tocId===e);if(n&&n.element){const e=n.element;t.form.goToTarget(e)}}return!1})).parent().find(".pages-toc__overlay").on("click",()=>{t.$toc.parent().find("#toc-toggle").prop("checked",!1)})},_setRepeatHandlers(){this.form.view.html.addEventListener(C.AddRepeat().type,t=>{this._updateAllActive(),"user"===t.detail.trigger||this.activePages[0]===t.target||h(this.activePages[0],".or-repeat").includes(t.target)?this.flipToPageContaining(s()(t.target)):this._toggleButtons()}),this.form.view.html.addEventListener(C.RemoveRepeat().type,t=>{if(this.current&&!this.current.closest("html")){this._updateAllActive();let e=s()(t.target).prev();0===e.length&&(e=s()(t.target)),this.flipToPageContaining(e)}})},_setBranchHandlers(){const t=this;this.form.view.$.on("changebranch.pagemode",()=>{t._updateAllActive(),t.activePages.includes(t.current)||t._next(),t._toggleButtons()})},_setLangChangeHandlers(){this.form.view.html.addEventListener(C.ChangeLanguage().type,()=>{this._updateToc()})},_getCurrent(){return this.current},_updateAllActive(t){t=t||[...this.form.view.html.querySelectorAll('[role="page"]')],this.activePages=t.filter(t=>!t.closest(".disabled")&&(t.matches(".question")||t.querySelector(".question:not(.disabled)")||t.matches(".or-repeat-info")&&0===l(t,".or-repeat").length)),this._updateToc()},_getPrev(t){return this.activePages[t-1]},_getNext(t){return this.activePages[t+1]},_getCurrentIndex(){return this.activePages.findIndex(t=>t===this.current)},_next(){const t=this;let e,n;return e=this._getCurrentIndex(),n=!1!==_.validatePage&&this.current?this.form.validateContent(s()(this.current)):Promise.resolve(!0),n.then(n=>{let i,r;return!!n&&(i=t._getNext(e),i&&(r=e+1,t._flipTo(i,r)),!0)})},_prev(){const t=this._getCurrentIndex(),e=this._getPrev(t);e&&this._flipTo(e,t-1)},_setToCurrent(t){t.classList.add("current","hidden"),t.classList.remove("hidden"),h(t,".or-group, .or-group-data, .or-repeat",".or").forEach(t=>t.classList.add("contains-current")),this.current=t},_flipTo(t,e){this.current&&this.current.closest("html")?this.current!==t&&(this.current.classList.remove("current","fade-out"),h(this.current,".or-group, .or-group-data, .or-repeat",".or").forEach(t=>t.classList.remove("contains-current")),this._setToCurrent(t),this._focusOnFirstQuestion(t),this._toggleButtons(e),t.dispatchEvent(C.PageFlip())):t&&(this._setToCurrent(t),this._focusOnFirstQuestion(t),this._toggleButtons(e),t.dispatchEvent(C.PageFlip()))},_flipToFirst(){this._flipTo(this.activePages[0])},_flipToLast(){this._flipTo(this.activePages[this.activePages.length-1])},_focusOnFirstQuestion(t){s()(t).find(".question:not(.disabled)").addBack(".question:not(.disabled)").filter((function(){return 0===s()(this).parentsUntil(".or",".disabled").length})).eq(0).find("input, select, textarea").eq(0).trigger("fakefocus"),t.scrollIntoView()},_toggleButtons(t=this._getCurrentIndex()){const e=this._getNext(t),n=this._getPrev(t);this.$btnNext.add(this.$btnLast).toggleClass("disabled",!e),this.$btnPrev.add(this.$btnFirst).toggleClass("disabled",!n),this.$formFooter.toggleClass("end",!e)},_updateToc(){this.$toc.length&&(this.$toc.empty()[0].append(this.form.toc.getHtmlFragment()),this.$toc.closest(".pages-toc").removeClass("hide"))}}),W={update(t,e){let n;if(!this.form)throw new Error("Branch module not correctly instantiated with form property.");n=this.form.getRelatedNodes("data-relevant","",t),this.updateNodes(n,e)},updateNodes(t,e){let n,i,r,o,a,u;const l={},c=[];let h=!1;const d=this,p=this.form.repeatsPresent&&this.form.view.html.querySelector(".or-repeat.clone");t.each((function(){const t=s()(this);let f,m,g,v;-1===c.indexOf(t.attr("name"))&&(i=t.closest(".or-branch"),n={},u=null,n.relevant=d.form.input.getRelevant(this),n.path=d.form.input.getName(this),1===i.length?(g=n.path.split("/"),g.length>3&&(v=g.splice(0,g.length-1).join("/"),m=d.form.view.$.find(`.or-group[name="${v}"],.or-group-data[name="${v}"]`).filter((function(){const t=s()(this);return t.children(".or-repeat").length>0||0===t.children(".or-repeat-info").length})),0===m.length)||(o=p&&i.parentsUntil(".or",".or-repeat").length>0,a=p&&i.parentsUntil(".or",".or-repeat.clone").length>0,f=t.children(`.or-repeat-info[data-name="${n.path}"]`).length&&!t.children(`.or-repeat[name="${n.path}"]`).length?null:n.path,n.ind=f&&a?d.form.input.getIndex(this):0,-1===n.relevant.indexOf("..")&&(u=o?`${n.relevant}__${n.path.substring(0,n.path.lastIndexOf("/"))}__${n.ind}`:n.relevant),u&&void 0!==l[u]?r=l[u]:(r=d.evaluate(n.relevant,f,n.ind),l[u]=r),o||c.push(this.getAttribute("name")),!0===d.process(i,n.path,r,e)&&(h=!0))):0===t.parentsUntil(".or","#or-calculated-items").length&&console.error("could not find branch node for ",this))})),h&&this.form.view.$.trigger("changebranch")},evaluate(t,e,n){return this.form.model.evaluate(t,"boolean",e,n)},process(t,e,n,i){return!0===n?this.enable(t,e):this.disable(t,e,i)},selfRelevant:t=>!t.hasClass("disabled")&&!t.hasClass("pre-init"),enable(t,e){let n=!1;return this.selfRelevant(t)||(n=!0,t.removeClass("disabled pre-init"),this.form.calc.update({relevantPath:e}),this.form.itemset.update({relevantPath:e}),this.form.output.update(),this.form.widgets.enable(t[0]),this.activate(t)),n},disable(t,e,n){const i=t.hasClass("pre-init");let r=!1;return(i||this.selfRelevant(t)||n)&&(r=!0,i?t.removeClass("pre-init"):(this.form.options.clearIrrelevantImmediately||n)&&this.clear(t,e),this.deactivate(t)),r},clear(t,e){t.clearInputs("change",C.InputUpdate().type),t.is(".or-group, .or-group-data")&&this.form.calc.update({relevantPath:e})},setDisabledProperty(t,e){const n=t.prop("nodeName").toLowerCase();"label"===n?t.children("input, select, textarea").prop("disabled",e):"fieldset"===n||"section"===n?t.prop("disabled",e):t.find("fieldset, input, select, textarea").prop("disabled",e)},activate(t){this.setDisabledProperty(t,!1)},deactivate(t){t.addClass("disabled"),this.form.widgets.disable(t[0]),this.setDisabledProperty(t,!0)}},Z={update(t={}){const e=this,n={};let i;if(!this.form)throw new Error("Output module not correctly instantiated with form property.");i=t.relevantPath?this.form.getRelatedNodes("data-items-path",`[name^="${t.relevantPath}/"]`).add(this.form.getRelatedNodes("data-items-path",`[name^="${t.relevantPath}/"] ~ datalist > .itemset-template`)).add(this.form.getRelatedNodes("data-items-path",`[name="${t.relevantPath}"]`)).add(this.form.getRelatedNodes("data-items-path",`[name="${t.relevantPath}"] ~ datalist > .itemset-template`)).add(this.form.getRelatedNodes("data-items-path",`[data-name="${t.relevantPath}"]`)).add(this.form.getRelatedNodes("data-items-path",`[data-name="${t.relevantPath}"] ~ datalist > .itemset-template`)):this.form.getRelatedNodes("data-items-path",".itemset-template",t);const r=this.form.repeatsPresent&&this.form.view.html.querySelector(".or-repeat.clone"),a=[];i.each((function(){let t,i;const u=s()(this),l={};if(u.parentsUntil(".or",".or-branch").parentsUntil(".or",".disabled").length)return;const c={},h=u.data(),d=u.prop("nodeName").toLowerCase(),p=u.parent("select, datalist");if("label"===d){const e=u.children("input").eq(0);[].slice.call(e[0].attributes).forEach(t=>{l[t.name]=t.value}),t=e.hasClass("ignore")?e.closest(".option-wrapper").siblings("input.rank").eq(0):e}else"select"===p.prop("nodeName").toLowerCase()?t=p:"datalist"===p.prop("nodeName").toLowerCase()&&(t=p.siblings("input:not(.widget)"));const f=u.closest("label, select, datalist").siblings(".itemset-labels"),m=u.attr("data-items-path");let g=f.attr("data-label-type"),v=f.attr("data-label-ref");const y=Object(o.e)(v,"translate");y.length&&(v=y[0][1][0],g="langs");const _=f.attr("data-value-ref"),b=e.form.input.getName(t[0]),w=!!(r&&t.parentsUntil(".or",".or-repeat").length>0),x=!!(r&&t.parentsUntil(".or",".or-repeat.clone").length>0)?e.form.input.getIndex(t[0]):0;if(void 0!==n[m])i=n[m];else{const t=!0;i=s()(e.form.model.evaluate(m,"nodes",b,x,t)),w||(n[m]=i)}if(c.length=i.length,c.text=i.text(),c.length===h.length&&c.text===h.text)return;u.data(c);const $=u.closest(".question");$.find(d).not(u).remove();const E=$.find(".or-option-translations").empty()[0],k=document.createDocumentFragment(),L=document.createDocumentFragment();let C=[];i.each((function(){const t=e.getNodesFromItem(v,this);if(t&&t.length)switch(g){case"itext":C=f.find(`[data-itext-id="${t[0].textContent}"]`).get().map(t=>{const e=t.getAttribute("lang"),n=t.nodeName,i=t.src;return{language:e,type:n,text:t.textContent,active:t.classList.contains("active"),src:i,alt:t.alt}});break;case"langs":C=t.map(t=>{const n=t.getAttribute("lang"),i=!n&&!e.form.langs.currentLang||n===e.form.langs.currentLang;return{language:n,type:"span",text:t.textContent,active:i}});break;default:C=[{language:"",type:"span",text:t&&t.length?t[0].textContent:"error",active:!0}]}else C=[{language:"",label:"error",active:!0}];const n=e.getNodeFromItem(_,this).textContent;if(("select"==l["data-type-xml"]&&"checkbox"==l.type||p[0]&&p[0].multiple)&&n.indexOf(" ")>-1&&(a[a.length]=Object(q.a)("alert.valuehasspaces.multiple",{value:n})),"label"===d)k.appendChild(e.createInput(l,C,n));else if("option"===d){let t="";C.length>1?C.forEach(i=>{i.active&&(t=i.text),L.appendChild(e.createOptionTranslation(i,n))}):t=C[0].text,k.appendChild(e.createOption(t,n))}})),this.parentNode.appendChild(k),E&&E.appendChild(L);let T=e.form.model.node(b,x).getVal();""!==T&&(t.hasClass("rank")&&(T=""),e.form.input.setVal(t[0],T,null),t.trigger("change")),(p.length>0||t.hasClass("rank"))&&t.trigger("changeoption")})),a.length>0&&U.alert(a.join("<br>"))},getNodesFromItem(t,e,n){if(!t||!e)throw new Error("Error: could not query instance item, no expression and/or context provided");const i=n?9:7,r=void 0!==this.form.model.xml.evaluate?"evaluate":"jsEvaluate",o=this.form.model.xml[r](t,e,this.form.model.getNsResolver(),i,null),a=[];if(n)a.push(o.singleNodeValue);else for(let t=0;t<o.snapshotLength;t++)a.push(o.snapshotItem(t));return a},getNodeFromItem(t,e){const n=this.getNodesFromItem(t,e,!0);return n.length?n[0]:null},createOption(t,e){const n=document.createElement("option");return n.textContent=t,n.value=e,n},createOptionTranslation(t,e){const n=document.createElement(t.type||"span");return t.text&&(n.textContent=t.text,n.classList.add("option-label")),n.classList.toggle("active",t.active),t.language&&(n.lang=t.language),n.dataset.optionValue=e,t.src&&(n.src=t.src,n.alt=t.alt),n},createInput(t,e,n){const i=this,r=document.createElement("label"),o=document.createElement("input");return Object.getOwnPropertyNames(t).forEach(e=>{o.setAttribute(e,t[e])}),o.value=n,r.appendChild(o),e.forEach(t=>{r.appendChild(i.createOptionTranslation(t,n))}),r}},G={status:0,lastChanged:null,all:null,updateTotal(){this.all=[...this.form.view.html.querySelectorAll(".question:not(.disabled):not(.or-appearance-comment):not(.or-appearance-dn):not(.readonly)")].filter(t=>!t.closest(".disabled"))},update(t){let e;this.all&&t||this.updateTotal(),this.lastChanged=t||this.lastChanged,this.lastChanged&&(e=Math.round(100*(this.all.indexOf(this.lastChanged.closest(".question"))+1)/this.all.length)),e>0&&e!==this.status&&(this.status=e,this.form.view.html.dispatchEvent(C.ProgressUpdate(e)))},get(){return this.status}};const Y=document.createRange();var X=class{constructor(t,e){return this.element=t,this.options=e||{},this.question=t.closest(".question"),this._props=this._getProps(),this._init()||this}_init(){this.value=this.originalInputValue}_getProps(){const t=this;return{get readonly(){return"select"===t.element.nodeName.toLowerCase()?!!t.element.getAttribute("readonly"):!!t.element.readOnly},appearances:[...this.element.closest(".question, form.or").classList].filter(t=>0===t.indexOf("or-appearance-")).map(t=>t.substring(14)),multiple:!!this.element.multiple,disabled:!!this.element.disabled,type:this.element.getAttribute("data-type-xml")}}disable(){}enable(){}update(){}get props(){return this._props}get resetButtonHtml(){return Y.createContextualFragment('<button\n                type="button"\n                class="btn-icon-only btn-reset"\n                aria-label="reset">\n                <i class="icon icon-refresh"> </i>\n            </button>')}get downloadButtonHtml(){return Y.createContextualFragment('<a\n                class="btn-icon-only btn-download"\n                aria-label="download"\n                download\n                href=""><i class="icon icon-download"> </i></a>')}get value(){}set value(t){}get originalInputValue(){return F.getVal(this.element)}set originalInputValue(t){F.setVal(this.element,t,null),this.element.dispatchEvent(C.Change())}static get name(){return this.constructor.name}static get list(){return!1}static condition(){return!0}};const K=navigator.userAgent,J=navigator.platform,Q={get ios(){return/iPad|iPhone|iPod/i.test(J)||/Mac/i.test(J)&&void 0!==document.documentElement.ontouchstart},get android(){return/android/i.test(K)}},tt={};let et=!1;["date","datetime-local","time","month"].forEach(t=>{const e=document.createElement("input");e.setAttribute("type",t),tt[t]="text"!==e.type}),(Q.ios||Q.android)&&(et=!0,document.documentElement.classList.add("touch"));var nt={get inputTypes(){return tt},get touch(){return et},set touch(t){et=t}};const it="[data-toggle=dropdown]",rt=function(t){s()(t).on("click.bs.dropdown",this.toggle)};function ot(t){s()(".dropdown-backdrop").remove(),s()(it).each((function(){const e=at(s()(this)),n={relatedTarget:this};e.hasClass("open")&&(e.trigger(t=s.a.Event("hide.bs.dropdown",n)),t.isDefaultPrevented()||e.removeClass("open").trigger("hidden.bs.dropdown",n))}))}function at(t){let e=t.attr("data-target");e||(e=t.attr("href"),e=e&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));const n=e&&s()(e);return n&&n.length?n:t.parent()}rt.prototype.toggle=function(t){const e=s()(this);if(e.is(".disabled, :disabled"))return;const n=at(e),i=n.hasClass("open");if(ot(),!i){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&s()('<div class="dropdown-backdrop"/>').insertAfter(s()(this)).on("click",ot);const i={relatedTarget:this};if(n.trigger(t=s.a.Event("show.bs.dropdown",i)),t.isDefaultPrevented())return;n.toggleClass("open").trigger("shown.bs.dropdown",i),e.focus()}return!1},rt.prototype.keydown=function(t){if(!/^(38|40|27)$/.test(t.keyCode))return;const e=s()(this);if(t.preventDefault(),t.stopPropagation(),e.is(".disabled, :disabled"))return;const n=at(e),i=n.hasClass("open");if(!i||i&&27===t.keyCode)return 27===t.which&&n.find(it).focus(),e.click();const r=" li:not(.divider):visible a",o=n.find(`[role=menu]${r}, [role=listbox]${r}`);if(!o.length)return;let a=o.index(o.filter(":focus"));38===t.keyCode&&a>0&&a--,40===t.keyCode&&a<o.length-1&&a++,~a||(a=0),o.eq(a).focus()};const st=s.a.fn.dropdown;s.a.fn.dropdown=function(t){return this.each((function(){const e=s()(this),n=e.data("bs.dropdown");n||e.data("bs.dropdown",new rt(this)),"string"==typeof t&&n[t].call(e)}))},s.a.fn.dropdown.Constructor=rt,s.a.fn.dropdown.noConflict=function(){return s.a.fn.dropdown=st,this},s()(document).on("click.bs.dropdown.data-api",ot).on("click.bs.dropdown.data-api",".dropdown form",t=>{t.stopPropagation()}).on("click.bs.dropdown.data-api",it,rt.prototype.toggle).on("keydown.bs.dropdown.data-api",`${it}, [role=menu], [role=listbox]`,rt.prototype.keydown);var ut=class extends X{static get selector(){return".question select"}static get list(){return!0}static condition(){return!nt.touch}_init(){const t=s()(this.element);t.css("display","none");const e=this._createLi(this._getTemplate());this.$picker=e.insertAfter(t),this.props.readonly&&this.disable(),this._clickListener(),this._focusListener()}_getTemplate(){return'\n        <div class="btn-group bootstrap-select widget clearfix">\n            <button type="button" class="btn btn-default dropdown-toggle clearfix" data-toggle="dropdown">\n                <span class="selected">__SELECTED_OPTIONS</span><span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu" role="menu">__ADD_LI</ul>\n        </div>'}_createLi(t){const e=[];let n="";const i=this.props.multiple?'type="checkbox"':`type="radio" name="${1e5*Math.random()}"`;if(s()(this.element).find("option").each((function(){e.push({label:s()(this).text(),selected:s()(this).is(":selected"),value:s()(this).attr("value")})})),e.length>0){t=t.replace("__SELECTED_OPTIONS",this._createSelectedStr());for(let t=0;t<e.length;t++)if(e[t].value){const r=e[t].selected?' checked="checked"':"";n+=`\n                    <li ${e[t].selected?'class="active"':""}>\n                        <a class="option-wrapper" tabindex="-1" href="#">\n                            <label>\n                                <input class="ignore" ${i}${r} value="${e[t].value}" />\n                                <span class="option-label">${e[t].label}</span>\n                            </label>\n                        </a>\n                    </li>`}}return t=t.replace("__ADD_LI",n),s()(t)}_createSelectedStr(){const t=[];return s()(this.element).find("option:selected").each((function(){s()(this).attr("value").length>0&&t.push(s()(this).text())})),0===t.length?Object(q.a)("selectpicker.noneselected"):1===t.length?t[0]:Object(q.a)("selectpicker.numberselected",{number:t.length})}_clickListener(){const t=this;this.$picker.on("click","li:not(.disabled)",(function(e){const n=this,i=n.querySelector("input"),r=t.element,o=r.querySelector(`option[value="${i.value}"]`),a=o.matches(":checked");"input"!==e.target.nodeName.toLowerCase()&&e.preventDefault(),t.props.multiple?e.stopPropagation():(t.$picker.find("li").removeClass("active"),u(o,"option").forEach(t=>{t.selected=!1}),t.$picker.find("input").prop("checked",!1)),setTimeout(()=>{a?(n.classList.remove("active"),i.checked=!1,o.selected=!1):(n.classList.add("active"),o.selected=!0,i.checked=!0),t.$picker.find(".selected").html(t._createSelectedStr()),r.dispatchEvent(new C.Change)},10)})).on("keydown","li:not(.disabled)",t=>{const e=t.keyCode.toString(10);if(/(13|32)/.test(e)){/(32)/.test(e)||t.preventDefault();const n=s()(":focus");n.click(),n.focus(),t.preventDefault()}}).on("click","li.disabled",t=>(t.stopPropagation(),!1)).on("click","a",t=>{t.preventDefault()})}_focusListener(){const t=this;this.element.addEventListener(C.ApplyFocus().type,()=>{t.$picker.find(".dropdown-toggle").focus()})}disable(){this.$picker[0].querySelectorAll("li").forEach(t=>{t.classList.add("disabled");const e=t.querySelector("input");e.disabled=!0,e.readOnly=!0})}enable(){this.$picker[0].querySelectorAll("li").forEach(t=>{t.classList.remove("disabled");const e=t.querySelector("input");e.disabled=!1,e.readOnly=!1})}update(){this.$picker.remove(),this._init()}};var lt=class extends X{static get selector(){return".question select[multiple]"}static condition(){return nt.touch}_init(){const t=document.createRange().createContextualFragment('<span class="widget mobileselect"></span>');this.element.after(t),this.widget=this.element.parentElement.querySelector(".widget"),this.element.addEventListener("change",()=>{this._showSelectedValues()}),this._showSelectedValues()}_showSelectedValues(){this.widget.textContent=this.originalInputValue.join(", ")}update(){this._showSelectedValues()}};const ct="relevantDropdown";function ht(t,e,n){this.namespace=ct,this.element=t,this.options=s.a.extend({fadeOutSpeed:"normal",change:null},e),n&&(n.stopPropagation(),n.preventDefault()),this._init()}s.a.expr[":"].RD_contains=s.a.expr.createPseudo(t=>e=>s()(e).text().toUpperCase().indexOf(t.toUpperCase())>=0),ht.prototype._init=function(){const t=s()(this.element);this.listId=t.attr("list"),this.$fakeDatalist=s()("<ul />",{class:"datalist widget",id:this.listId}).appendTo(t.parent()),this._updateFakeDatalist(),this._setEventListeners()},ht.prototype._updateFakeDatalist=function(){const t=s()(`#${this.listId}`),e=document.createDocumentFragment();this.$fakeDatalist.empty(),t.find("option").each((function(){const t=s()("<li />",{text:s()(this).val()})[0];e.appendChild(t)})),this.$fakeDatalist.append(e),this.$fakeDatalistItems=this.$fakeDatalist.find("li")},ht.prototype._setEventListeners=function(){const t=this,e=s()(this.element);let n,i=0;e.on("focus",()=>{t.$fakeDatalist.scrollTop(0),i=0}).on("blur",()=>{setTimeout(()=>{t.$fakeDatalist.fadeOut(t.options.fadeOutSpeed),t.$fakeDatalistItems.removeClass("active")},500)}).on("keyup",(function(i){n=e.position(),t.$fakeDatalist.show().css({top:n.top+s()(this).outerHeight(),left:n.left,width:e.outerWidth()}),t.$fakeDatalistItems.hide(),t.$fakeDatalist.find(`li:RD_contains("${e.val()}")`).show()})),this.$fakeDatalist.on("mouseenter","li",(function(){s()(this).addClass("active").siblings().removeClass("active")})).on("mouseleave","li",(function(){s()(this).removeClass("active")})),s()(window).resize((function(){n=e.position(),t.$fakeDatalist.css({top:n.top+s()(this).outerHeight(),left:n.left,width:e.outerWidth()})})),e.on("keydown",n=>{const r=t.$fakeDatalist.find("li.active"),o=t.$fakeDatalist.outerHeight(),a=t.$fakeDatalistItems.outerHeight();if(38==n.keyCode&&r.length&&(prevAll=r.prevAll("li:visible"),prevAll.length>0&&(r.removeClass("active"),prevAll.eq(0).addClass("active")),prevAll.length&&prevAll.position().top<0&&i>0&&t.$fakeDatalist.scrollTop(i-=a)),40==n.keyCode)if(r.length){const e=r.nextAll("li:visible");e.length>0&&(r.removeClass("active"),e.eq(0).addClass("active")),e.length&&e.position().top+a>=o&&t.$fakeDatalist.stop().animate({scrollTop:i+=a},200)}else t.$fakeDatalistItems.removeClass("active"),t.$fakeDatalist.find("li:visible:first").addClass("active");13!=n.keyCode&&9!=n.keyCode||(r.length&&e.val(r.text()).trigger("input"),t.$fakeDatalist.fadeOut(t.options.fadeOutSpeed),t.$fakeDatalistItems.removeClass("active")),13!=n.keyCode&&38!=n.keyCode&&40!=n.keyCode&&(t.$fakeDatalistItems.removeClass("active"),t.$fakeDatalist.find("li:visible:first").addClass("active"),t.$fakeDatalist.scrollTop(0),i=0)}),this.$fakeDatalist.on("click","li",(function(){s()("li.active").length&&e.val(s()(this).text()).trigger("input"),t.$fakeDatalist.fadeOut(t.options.fadeOutSpeed),t.$fakeDatalistItems.removeClass("active")}))},ht.prototype.update=function(){this._updateFakeDatalist()},s.a.fn[ct]=function(t,e){return t=t||{},this.each((function(){const n=s()(this);let i=n.data(ct);i||"object"!=typeof t?i&&"string"==typeof t&&i[t](this):n.data(ct,i=new ht(this,t,e))}))};const dt=!("list"in document.createElement("input")&&"options"in document.createElement("datalist")&&void 0!==window.HTMLDataListElement);var pt=class extends X{static get selector(){return".question input[list]"}static get list(){return!0}_init(){const t=this.element.getAttribute("list");this.options=[...this.question.querySelectorAll(`datalist#${t} > option`)],this.options.forEach(t=>{const e=t.getAttribute("value");!t.classList.contains("itemset-template")&&t.textContent&&null!=e&&(t.dataset.value=e,t.setAttribute("value",t.textContent),t.textContent="")});const e=document.createRange().createContextualFragment(`<input type="text" class="ignore widget autocomplete" list="${t}" />`);this.element.classList.add("hide"),this.element.after(e),this.fakeInput=this.element.parentElement.querySelector("input.autocomplete"),this.props.readonly&&this.fakeInput.setAttribute("readonly","readonly"),this.props.disabled&&this.fakeInput.setAttribute("disabled","disabled"),dt&&(console.debug("Polyfill required"),s()(this.fakeInput).relevantDropdown()),this._setFakeInputListener(),this._setFocusListener(),this._showCurrentLabel()}_showCurrentLabel(){const t=this.originalInputValue,e=this._findLabel(t);this.fakeInput.value=e,t&&!e&&this.fakeInput.dispatchEvent(C.Input())}_setFakeInputListener(){this.fakeInput.addEventListener("input",t=>{const e=t.target,n=e.value,i=this._findValue(n)||"";this.originalInputValue!==i&&(this.originalInputValue=i),e.classList.toggle("notfound",n&&!i)})}_findValue(t){let e="";return t?(this.options.forEach(n=>{if(n.value===t)return e=n.getAttribute("data-value"),!1}),e):""}_findLabel(t){let e="";return t?(this.options.forEach(n=>{if(n.dataset.value===t)return e=n.value,!1}),e):""}_setFocusListener(){this.element.addEventListener(C.ApplyFocus().type,()=>{this.fakeInput.focus()})}disable(){this.fakeInput.classList.add("disabled")}enable(){this.fakeInput.classList.remove("disabled")}update(){this.element.parentElement.querySelector(".widget").remove(),this._init()}},ft=n(22),mt=n.n(ft);n(527),n(528);let gt;const vt=_&&_.maps&&_.maps.length>0?_.maps:[{name:"streets",maxzoom:24,tiles:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],attribution:'© <a href="http://openstreetmap.org">OpenStreetMap</a> | <a href="www.openstreetmap.org/copyright">Terms</a>'}];let yt="https://maps.googleapis.com/maps/api/geocode/json?address={address}&sensor=true&key={api_key}";const _t=_.googleApiKey||_.google_api_key,bt=mt.a.divIcon({iconSize:24,className:"enketo-geopoint-marker"}),wt=mt.a.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker"}),xt=mt.a.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker-active"});var $t=class extends X{static get selector(){return'.question input[data-type-xml="geopoint"], .question input[data-type-xml="geotrace"], .question input[data-type-xml="geoshape"]'}static condition(t){return!g.has(t,"ArcGisGeopicker")}_init(){const t=this.originalInputValue,e=this;this.$form=s()(this.element).closest("form.or"),this.$question=s()(this.element).closest(".question"),this.mapId=Math.round(1e7*Math.random()),this._addDomElements(),this.currentIndex=0,this.points=[],t&&(this.value=t),this.$widget.find('[name="lat"], [name="long"], [name="alt"], [name="acc"]').on("change change.bymap change.bysearch",t=>{const n=e.$lat.val()?Number(e.$lat.val()):"",i=e.$lng.val()?Number(e.$lng.val()):"",r=e.$alt.val()?Number(e.$alt.val()):"",o=e.$acc.val()?Number(e.$acc.val()):"",a={lat:n,lng:i};t.stopImmediatePropagation(),"bymap"!==t.namespace&&"bysearch"!==t.namespace&&e.polyline&&"geoshape"===e.props.type&&!e.containsEmptyPoints(e.points,e.currentIndex)&&e.updatedPolylineWouldIntersect(a,e.currentIndex)?(e._showIntersectError(),e._updateInputs(e.points[e.currentIndex],"nochange")):(e._editPoint([n,i,r,o]),"bysearch"!==t.namespace&&e.$search&&e.$search.val(""))}),this.$kmlInput.on("change",(function(t){const n=e.$points.find(".addpoint"),i=s()(this).prev(".paste-progress").removeClass("hide"),r=t.target.value,o=e._convertKmlCoordinatesToLeafletCoordinates(r);t.target.value="",setTimeout(()=>{o.forEach((t,i)=>{e._updateInputs(t),i<o.length-1&&n.click()}),i.remove(),e._switchInputType("points")},10)})),this.$widget.find(".toggle-input-type-btn").on("click",()=>{const t=e.$inputGroup.hasClass("kml-input-mode")?"points":"kml";return e._switchInputType(t),!1}),s()(this.element).on("change",(function(){e.$kmlInput.prop("disabled",!!this.value)})).on("applyfocus",()=>{e.$widget[0].querySelector("input").focus()}),this.$points.on("click",".point",(function(){return e._setCurrent(e.$points.find(".point").index(s()(this))),e._switchInputType("points"),!1})),this.$points.find(".addpoint").on("click",()=>(e._addPoint(),!1)),this.$widget.find(".close-chain-btn").on("click",()=>(e._closePolygon(),!1)),this.$widget.find(".btn-remove").on("click",()=>{e.points.length<2?e._updateInputs([]):U.confirm(Object(q.a)("geopicker.removePoint")).then(t=>{t&&e._removePoint()}).catch(()=>{})}),this.$map.find(".show-map-btn").on("click",()=>(e.$widget.find(".search-bar").removeClass("hide-search"),e.$widget.addClass("full-screen"),e._updateMap(),!1)),this.$form.on(`pageflip.map${this.mapId}`,t=>{e.map&&s.a.contains(t.target,e.element)&&(e.map.invalidateSize(),e.$form.off(`pageflip.map${e.mapId}`))}),this.props.wide&&this.$widget.addClass("wide"),this.$widget.toggleClass("hide-input",this.$question.hasClass("or-appearance-hide-input")).find(".toggle-input-visibility-btn").on("click",(function(){e.$widget.toggleClass("hide-input"),s()(this).toggleClass("open",e.$widget.hasClass("hide-input")),e.map&&e.map.invalidateSize(!1)})).toggleClass("open",e.$widget.hasClass("hide-input")),this.$widget.find(".hide-map-btn").on("click",()=>(e.$widget.find(".search-bar").addClass("hide-search"),e.$widget.removeClass("full-screen").find(".map-canvas").removeClass("leaflet-container").find(".leaflet-google-layer").remove(),e.map&&(e.map.remove(),e.map=null,e.polygon=null,e.polyline=null),!1)),this.props.search&&this._enableSearch(),this.props.detect&&this._enableDetection(),this.props.readonly&&this.disable(),t?this.points.forEach(()=>{e._addPointBtn()}):this._addPoint(),t?(this._updateMap(),this._setCurrent(this.currentIndex)):(this._updateMap([0,0],1),this.props.detect&&navigator.geolocation.getCurrentPosition(t=>{e._updateMap([t.coords.latitude,t.coords.longitude],15)}))}_switchInputType(t){"kml"===t?this.$inputGroup.addClass("kml-input-mode"):"points"===t&&this.$inputGroup.removeClass("kml-input-mode")}_addPointBtn(){this.$points.find(".addpoint").before('<a href="#" class="point" aria-label="point"> </a>')}_addDomElements(){const t=`<div class="map-canvas-wrapper"><div class=map-canvas id="map${this.mapId}"></div></div>`,e=`\n            <a href="#" class="toggle-input-type-btn">\n                <span class="kml-input">KML</span>\n                <span class="points-input" data-i18n="geopicker.points">${Object(q.a)("geopicker.points")}</span>\n            </a>\n            <label class="geo kml">\n                <span data-i18n="geopicker.kmlcoords">${Object(q.a)("geopicker.kmlcoords")}</span>\n                <progress class="paste-progress hide"></progress>\n                <textarea class="ignore" name="kml" placeholder="${Object(q.a)("geopicker.kmlpaste")}" data-i18n="geopicker.kmlpaste"></textarea>\n                <span class="disabled-msg">remove all points to enable</span>\n            </label>`,n=`<button type="button" class="close-chain-btn btn btn-default btn-xs" data-i18n="geopicker.closepolygon">${Object(q.a)("geopicker.closepolygon")}</button>`;if(this.$widget=s()(`<div class="geopicker widget">\n                <div class="search-bar hide-search no-map no-detect">\n                    <button type="button" class="hide-map-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button>\n                    <button name="geodetect" type="button" class="btn btn-default" title="detect current location" data-placement="top"><span class="icon icon-crosshairs"> </span></button>\n                    <div class="input-group">\n                        <input class="geo ignore" name="search" type="text" placeholder="${Object(q.a)("geopicker.searchPlaceholder")}" data-i18n="geopicker.searchPlaceholder" disabled="disabled"/>\n                        <button type="button" class="btn btn-default search-btn"><i class="icon icon-search"> </i></button>\n                    </div>\n                </div>\n                <div class="geo-inputs">\n                    <label class="geo lat">\n                        <span data-i18n="geopicker.latitude">${Object(q.a)("geopicker.latitude")}</span>\n                        <input class="ignore" name="lat" type="number" step="0.000001" min="-90" max="90"/>\n                    </label>\n                    <label class="geo long">\n                        <span data-i18n="geopicker.longitude">${Object(q.a)("geopicker.longitude")}</span>\n                        <input class="ignore" name="long" type="number" step="0.000001" min="-180" max="180"/>\n                    </label>\n                    <label class="geo alt">\n                        <span data-i18n="geopicker.altitude">${Object(q.a)("geopicker.altitude")}</span>\n                        <input class="ignore" name="alt" type="number" step="0.1" />\n                    </label>\n                    <label class="geo acc">\n                        <span data-i18n="geopicker.accuracy">${Object(q.a)("geopicker.accuracy")}</span>\n                        <input class="ignore" name="acc" type="number" step="0.1" />\n                    </label>\n                    <button type="button" class="btn-icon-only btn-remove" aria-label="remove"><span class="icon icon-trash"> </span></button>\n                </div>\n            </div>`),this.props.detect&&(this.$widget.find(".search-bar").removeClass("no-detect"),this.$detect=this.$widget.find('button[name="geodetect"]')),this.$search=this.$widget.find('[name="search"]'),this.$inputGroup=this.$widget.find(".geo-inputs"),this.props.map?(this.$widget.find(".search-bar").removeClass("no-map").after(t),this.$map=this.$widget.find(".map-canvas"),this.$map.parent().append('<button type="button" class="toggle-input-visibility-btn" aria-label="toggle input"> </button>')):this.$map=s()(),this.props.touch&&this.props.map&&this.$map.append('<button type="button" class="show-map-btn btn btn-default">Map</button>'),this.props.touch||this.$widget.find(".search-bar").removeClass("hide-search"),"geopoint"!==this.props.type){this.$points=s()('<div class="points"><button type="button" class="addpoint">+</button></div>'),this.$widget.prepend(this.$points),"geoshape"===this.props.type&&this.$inputGroup.append(n);const t=s()(e);this.$kmlInput=t.find('[name="kml"]'),this.$inputGroup.prepend(t)}else this.$points=s()(),this.$kmlInput=s()();this.$lat=this.$widget.find('[name="lat"]'),this.$lng=this.$widget.find('[name="long"]'),this.$alt=this.$widget.find('[name="alt"]'),this.$acc=this.$widget.find('[name="acc"]'),s()(this.element).hide().after(this.$widget).parent().addClass("clearfix")}_updateValue(){this._markAsValid();const t=this.originalInputValue,e=this.value;return t!==e&&(this.originalInputValue=e,!0)}_isValidGeopoint(t){return!!t&&L.geopoint.validate(t)}_isValidLatLngList(t){const e=this;return t.every((t,n,i)=>e._isValidLatLng(t)||""===t.join()&&n===i.length-1)}_cleanLatLng(t){return Array.isArray(t)?[t[0],t[1]]:t}_isValidLatLng(t){const e="number"==typeof t[0]?t[0]:"number"==typeof t.lat?t.lat:null,n="number"==typeof t[1]?t[1]:"number"==typeof t.lng?t.lng:null;return L.geopoint.validate([e,n].join(" "))}_markAsInvalid(t){this.$points.find(".point").eq(t).addClass("has-error")}_markAsValid(){this.$points.find(".point").removeClass("has-error")}_setCurrent(t){this.currentIndex=t,this.$points.find(".point").removeClass("active").eq(t).addClass("active"),this._updateInputs(this.points[t],""),!this.map||this.props.touch&&!this._inFullScreenMode()||this._updateMarkers()}_enableDetection(){const t=this,e={enableHighAccuracy:!0,maximumAge:0};this.$detect.click(n=>(n.preventDefault(),navigator.geolocation.getCurrentPosition(e=>{const n={lat:Math.round(1e6*e.coords.latitude)/1e6,lng:Math.round(1e6*e.coords.longitude)/1e6};t.polyline&&"geoshape"===t.props.type&&t.updatedPolylineWouldIntersect(n,t.currentIndex)?t._showIntersectError():(t._updateInputs([n.lat,n.lng,e.coords.altitude,e.coords.accuracy]),t.currentIndex===t.points.length-1&&"geopoint"!==t.props.type&&t._addPoint())},()=>{console.error("error occurred trying to obtain position")},e),!1))}_enableSearch(){const t=this;yt=_t?yt.replace("{api_key}",_t):yt.replace("&key={api_key}",""),this.$search.prop("disabled",!1).on("change",(function(e){let n=s()(this).val();e.stopImmediatePropagation(),n&&(n=n.split(/\s+/).join("+"),s.a.get(yt.replace("{address}",n),e=>{let i;e.results&&e.results.length>0&&e.results[0].geometry&&e.results[0].geometry.location?(i=e.results[0].geometry.location,t._updateMap([i.lat,i.lng],15),t.$search.closest(".input-group").removeClass("has-error")):(t.$search.closest(".input-group").addClass("has-error"),console.log(`Location "${n}" not found`))},"json").fail(()=>{t.$search.closest(".input-group").addClass("has-error"),console.log("Error. Geocoding service may not be available or app is offline")}).always(()=>{}))}))}_dynamicMapAvailable(){return!!this.map}_inFullScreenMode(){return this.$widget.hasClass("full-screen")}_updateMap(t,e){const n=this;this.props.map&&(e||(e=this.map&&this.map.getZoom()||15),t&&(this.lastLatLng=t,this.lastZoom=e),this.props.touch&&!this._inFullScreenMode()||(this.loadMap=this.loadMap||this._addDynamicMap(),this.loadMap.then(()=>{n._updateDynamicMapView(t,e)})))}_addDynamicMap(){const t=this;return this._getLayers().then(e=>{const n={layers:t._getDefaultLayer(e)};t.map=mt.a.map(`map${t.mapId}`,n).on("click",e=>{let n,i;if(t.props.readonly)return!1;n=e.latlng,i=t.$lat.val()&&t.$lng.val()?t.points.length:t.currentIndex,n.lat=Math.round(1e6*n.lat)/1e6,n.lng=Math.round(1e6*n.lng)/1e6,"geoshape"===t.props.type&&!t.containsEmptyPoints(t.points,i)&&t.updatedPolylineWouldIntersect(n,i)?t._showIntersectError():t.$lat.val()&&t.$lng.val()&&"geopoint"!==t.props.type?t.$lat.val()&&t.$lng.val()&&(t._addPoint(),t._updateInputs(n,"change.bymap")):t._updateInputs(n,"change.bymap")}),t.map.attributionControl.setPrefix(""),e.length>1&&mt.a.control.layers(t._getBaseLayers(e),null).addTo(t.map),t.$widget.find(".leaflet-control-layers-toggle").append('<span class="icon icon-globe"></span>'),t.map.on("baselayerchange",()=>{t.$widget.find(".leaflet-control-container input").addClass("ignore no-unselect").next("span").addClass("option-label")})})}_updateDynamicMapView(t,e){t?this.map.setView(t,e||15):(this._updatePolyline(),this._updateMarkers(),1===this.points.length&&""===this.points[0].toString()&&(this.lastLatLng?this.map.setView(this.lastLatLng,this.lastZoom||15):this.map.setView(mt.a.latLng(0,0),e||15)))}_showIntersectError(){U.alert("Borders cannot intersect!")}_getLayers(){const t=this,e=[];return vt.forEach((n,i)=>{"string"==typeof n.tiles&&/^GOOGLE_(SATELLITE|ROADMAP|HYBRID|TERRAIN)/.test(n.tiles)?e.push(t._getGoogleTileLayer(n,i)):n.tiles?e.push(t._getLeafletTileLayer(n,i)):console.error("Configuration error for map tiles. Not a valid tile layer: ",n)}),Promise.all(e)}_getLeafletTileLayer(t,e){let n;const i=this._getTileOptions(t,e);return t.tileIndex=void 0===t.tileIndex?Math.round(100*Math.random())%t.tiles.length:t.tileIndex,n=t.tiles[t.tileIndex],Promise.resolve(mt.a.tileLayer(n,i))}_getGoogleTileLayer(t,e){const n=this._getTileOptions(t,e);return n.type=t.tiles.substring(7).toLowerCase(),this._loadGoogleMapsScript().then(()=>mt.a.gridLayer.googleMutant(n))}_getTileOptions(t,e){const n=t.name||`map-${e+1}`;return{id:t.id||n,maxZoom:t.maxzoom||18,minZoom:t.minzoom||0,name:n,attribution:t.attribution||""}}_loadGoogleMapsScript(){return gt||(gt=new Promise(t=>{let e,n;window.gmapsLoaded=()=>{delete window.gmapsLoaded,t()},e=_t?`&key=${_t}`:"",n=`https://maps.google.com/maps/api/js?v=3.exp${e}&libraries=places&callback=gmapsLoaded`,s.a.getScript(n)})),gt}_getDefaultLayer(t){let e;const n=this;return t.reverse().some(t=>(e=t,n.props.appearances.some(e=>e===t.options.name))),e}_getBaseLayers(t){const e={};return t.forEach(t=>{e[t.options.name]=t}),e}_updateMarkers(){const t=[],e=[],n=this;this.markerLayer&&this.markerLayer.clearLayers(),this.points.length<2&&""===this.points[0].join()||(this.points.forEach((i,r)=>{const o="geopoint"===n.props.type?bt:r===n.currentIndex?xt:wt;n._isValidLatLng(i)?(t.push(n._cleanLatLng(i)),e.push(mt.a.marker(n._cleanLatLng(i),{icon:o,clickable:!n.props.readonly,draggable:!n.props.readonly,alt:r,opacity:.9}).on("click",t=>{0===t.target.options.alt&&"geoshape"===n.props.type?n._closePolygon():n._setCurrent(t.target.options.alt)}).on("dragend",t=>{const e=t.target.getLatLng(),i=t.target.options.alt;e.lat=Math.round(1e6*e.lat)/1e6,e.lng=Math.round(1e6*e.lng)/1e6,n.polyline&&"geoshape"===n.props.type&&n.updatedPolylineWouldIntersect(e,i)?(n._showIntersectError(),n._updateMarkers()):(n._setCurrent(i),n._updateInputs(e,"change.bymap"),n._updateMap())}))):console.debug("this latLng was not considered valid",i)}),e.length>0&&(this.markerLayer=mt.a.layerGroup(e).addTo(this.map),1!==this.points.length&&this._isValidLatLngList(this.points)||this.map.setView(t[0],this.lastZoom||15)))}_updatePolyline(){let t;const e=this;if("geopoint"!==this.props.type){if(this.points.length<2||!this._isValidLatLngList(this.points))return this.map&&(this.polyline&&this.map.removeLayer(this.polyline),this.polygon&&this.map.removeLayer(this.polygon)),this.polyline=null,void(this.polygon=null);"geoshape"===this.props.type&&this._updatePolygon(),t=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1),t=t.map(t=>e._cleanLatLng(t)),this.polyline?this.polyline.setLatLngs(t):(this.polyline=mt.a.polyline(t,{color:"red"}),this.map.addLayer(this.polyline)),setTimeout(()=>{e.map.fitBounds(e.polyline.getBounds())},0)}}_updatePolygon(){let t;const e=this;"geopoint"!==this.props.type&&"geotrace"!==this.props.type&&(t=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1),t=t.map(t=>e._cleanLatLng(t)),this.polygon?this.polygon.setLatLngs(t):(this.polygon=mt.a.polygon(t,{color:"red",stroke:!1}),this.map.addLayer(this.polygon)),this._updateArea(t))}_updateArea(t){let e,n;if(t.length>2){const i=t.map(t=>({lat:t[0],lng:t[1]}));e=mt.a.GeometryUtil.geodesicArea(i),n=mt.a.GeometryUtil.readableArea(e,!0),mt.a.popup({className:"enketo-area-popup"}).setLatLng(this.polygon.getBounds().getCenter()).setContent(n).openOn(this.map)}else this.map.closePopup()}_addPoint(){this._addPointBtn(),this.points.push([]),this._setCurrent(this.points.length-1),this._updateValue()}_editPoint(t){let e;return this.points[this.currentIndex]=t,e=this._updateValue(),e&&this._updateMap(),e}_removePoint(){let t=this.currentIndex;this.points.splice(this.currentIndex,1),this._updateValue(),this.$points.find(".point").eq(this.currentIndex).remove(),void 0===this.points[this.currentIndex]&&(t=this.currentIndex-1),this._setCurrent(t),this._updateMap()}_closePolygon(){const t=this.points[this.points.length-1];if(!(this.points.length<3||3===this.points.length&&!this._isValidLatLng(this.points[2])||JSON.stringify(this.points[0])===JSON.stringify(t))){if(this._isValidLatLng(t)?(console.log("current last point is valid, so will create a new one to use to close"),this._addPoint()):(console.log("current last point is not a valid point, so will use this as closing point"),this.currentIndex=this.points.length-1),this.polyline&&!this.containsEmptyPoints(this.points,this.points.length)&&this.updatedPolylineWouldIntersect(this.points[0],this.currentIndex))return this._showIntersectError();this._updateInputs(this.points[0])}}_updateInputs(t,e){const n=t[0]||t.lat||"",i=t[1]||t.lng||"",r=t[2]||t.alt||"",o=t[3]||t.acc||"";e=void 0!==e?e:"change",this.$lat.val(n||""),this.$lng.val(i||""),this.$alt.val(r||""),this.$acc.val(o||"").trigger(e)}_convertKmlCoordinatesToLeafletCoordinates(t){const e=[],n=/<\s?coordinates>(([^<]|\n)*)<\/\s?coordinates\s?>/;return(t=n.test(t)?t.match(n)[1]:t).trim().split(/\s+/).forEach(t=>{const n=[];t.split(",").forEach((t,e)=>{const i=Number(t);0===e?n[1]=i:1===e?n[0]=i:2===e&&(n[2]=i)}),e.push(n)}),e}updatedPolylineWouldIntersect(t,e){const n=[];let i,r,o;const a=this;return!(this.points<3)&&(s.a.extend(!0,n,this.points),n[e]=[t[0]||t.lat,t[1]||t.lng],i=""!==n[n.length-1].join("")?n:n.slice(0,n.length-1),i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]&&(i=i.slice(0,i.length-1)),i=i.map(t=>a._cleanLatLng(t)),r=mt.a.polyline(i,{color:"white"}),this.map.addLayer(r),o=r.intersects(),this.map.removeLayer(r),o)}containsEmptyPoints(t,e){return t.some((t,n)=>!(n===e||t[0]&&t[1]))}get props(){const t=this._props;return t.detect=!!navigator.geolocation,t.map=!nt.touch||t.appearances.includes("maps")||t.appearances.includes("placement-map"),t.search=t.map,t.touch=nt.touch,t.wide=this.question.clientWidth/this.element.closest("form.or").clientWidth>.8,t}get value(){let t="";return this.points.forEach((e,n,i)=>{let r;const o="number"==typeof e[0]?e[0]:"number"==typeof e.lat?e.lat:null,a="number"==typeof e[1]?e[1]:"number"==typeof e.lng?e.lng:null,s="number"==typeof e[2]?e[2]:0,u="number"==typeof e[3]?e[3]:0;r=o&&a?`${o} ${a} ${s} ${u}`:"",this._isValidGeopoint(r)||""===r&&n===i.length-1||this._markAsInvalid(n),""!==r||n!==i.length-1?(t+=r,n!==i.length-1&&(t+=";")):t=t.substring(0,t.lastIndexOf(";"))}),t}set value(t){t.trim().split(";").forEach((t,e)=>{this.points[e]=t.trim().split(" "),this.points[e].forEach((t,e,n)=>{n[e]=Number(t)})})}enable(){s()(this.element).next(".widget").removeClass("readonly").find("input, select, textarea").prop("disabled",!1).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!1),this.map&&this.map.invalidateSize()}disable(){s()(this.element).next(".widget").addClass("readonly").find("input, select, textarea").prop("disabled",!0).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!0)}update(){const t=this.element.parentElement.querySelector(".widget");t&&(t.remove(),this.map=void 0,this.polyline=void 0,this.polygon=void 0,this._init())}};var Et=class extends X{static get selector(){return"form"}_init(){const t=this.element.querySelectorAll("textarea");this.defaultHeight=t[0]?t[0].clientHeight:20,this.element.addEventListener("input",t=>{const e=t.target;"textarea"===e.nodeName.toLowerCase()&&this._resize(e)}),t.forEach(this._resize.bind(this))}_resize(t){t.scrollHeight>t.clientHeight&&t.scrollHeight>this.defaultHeight&&(t.style.height=`${t.scrollHeight}px`,t.style.flex="auto")}};var kt=class extends X{static get selector(){return"form"}_init(){const t=s()(this.element),e=this;t.on("click",'input[type="radio"]:not([readonly]):checked',(function(){s()(this).parent("label").siblings().removeAttr("data-checked").end().attr("data-checked","true")})).on("click",'input[type="checkbox"]:not([readonly])',(function(){e._updateDataChecked(this)})).on(C.InputUpdate().type,'input[type="radio"], input[type="checkbox"]',(function(){this.closest(".option-wrapper").querySelectorAll('input[type="radio"],input[type="checkbox"]').forEach(t=>e._updateDataChecked(t))})).on("click",'input[type="checkbox"][readonly],input[type="radio"][readonly]',t=>(t.stopImmediatePropagation(),!1)).on(C.Change().type,'input[type="checkbox"][readonly],input[type="radio"][readonly]',(function(t){const e=void 0===t.originalEvent;return e||(t.stopImmediatePropagation(),this.checked&&"true"!==this.parentNode.dataset.checked&&(this.checked=!1)),e})).on("click",'[data-checked]>input[type="radio"]:not(.no-unselect)',(function(){s()(this).prop("checked",!1).trigger("change").parent().removeAttr("data-checked")})),this.element.querySelectorAll('input[type="radio"]:checked, input[type="checkbox"]:checked').forEach(t=>this._updateDataChecked(t))}_updateDataChecked(t){t.checked?t.parentNode.dataset.checked=!0:delete t.parentNode.dataset.checked}};n(308);var Lt=class extends X{static get selector(){return'.question input[type="date"]'}static condition(){return!nt.touch||!nt.inputTypes.date}_init(){this.settings=this.props.appearances.includes("year")?{format:"yyyy",startView:"decade",minViewMode:"years"}:this.props.appearances.includes("month-year")?{format:"yyyy-mm",startView:"year",minViewMode:"months"}:{format:"yyyy-mm-dd",startView:"month",minViewMode:"days"},this.$fakeDateI=this._createFakeDateInput(this.settings.format),this._setChangeHandler(this.$fakeDateI),this._setFocusHandler(this.$fakeDateI),this._setResetHandler(this.$fakeDateI),this.enable(),this.value=this.element.value,this.props.readonly&&(console.log("disabling datepicker"),this.disable())}_createFakeDateInput(t){const e=s()(this.element),n=s()(`<div class="widget date"><input class="ignore input-small" type="text" placeholder="${t}" /></div>`).append(this.resetButtonHtml),i=n.find("input");return e.hide().after(n),i}_setChangeHandler(t){const e=this.settings;t.on("change paste",n=>{let i="",r="paste"===n.type?Object(o.c)(n):this.value;return r.length>0&&(Object(o.d)(r)&&"yyyy"!==e.format?i="":(r=this._toActualDate(r),i=L.date.convert(r))),t.val(this._toDisplayDate(i)).datepicker("update"),""===i&&"paste"===n.type&&n.stopImmediatePropagation(),this.originalInputValue!==i&&(this.originalInputValue=i),!1})}_setResetHandler(t){t.next(".btn-reset").on("click",()=>{this.originalInputValue&&(this.value="")})}_setFocusHandler(t){s()(this.element).on("applyfocus",()=>{t[0].focus()})}_toActualDate(t=""){return(t=t.trim())&&"yyyy"===this.settings.format&&t.length<5?`${t}-01-01`:t&&"yyyy-mm"===this.settings.format&&t.length<8?`${t}-01`:t}_toDisplayDate(t=""){return(t=t.trim())&&"yyyy"===this.settings.format?t.substring(0,4):"yyyy-mm"===this.settings.format?t.substring(0,7):t}disable(){this.$fakeDateI.datepicker("destroy"),this.$fakeDateI.prop("disabled",!0),this.$fakeDateI.next(".btn-reset").prop("disabled",!0)}enable(){this.$fakeDateI.datepicker({format:this.settings.format,autoclose:!0,todayHighlight:!0,startView:this.settings.startView,minViewMode:this.settings.minViewMode,forceParse:!1}),this.$fakeDateI.prop("disabled",!1),this.$fakeDateI.next(".btn-reset").prop("disabled",!1)}update(){this.value=this.element.value}get displayedValue(){return this.question.querySelector(".widget input").value}get value(){return this._toActualDate(this.displayedValue)}set value(t){this.$fakeDateI.datepicker("setDate",this._toDisplayDate(t))}};var Ct=class extends X{static get selector(){return'.or-appearance-month-year input[type="date"]'}static condition(t){return!g.has(t,"DatepickerExtended")&&nt.touch&&nt.inputTypes.month}_init(){this.element.classList.add("hide");const t=document.createRange().createContextualFragment('<input class="ignore widget datepicker-mobile" type="month"/>');this.element.after(t),this.widgetInput=this.question.querySelector("input.widget"),this.value=this.originalInputValue,this.widgetInput.addEventListener("change",()=>{this.originalInputValue=this.value})}get value(){return this.widgetInput.value?`${this.widgetInput.value}-01`:""}set value(t){const e=t?t.substring(0,t.lastIndexOf("-")):"";this.widgetInput.value=e}update(){this.value=this.originalInputValue}};((t,e,n)=>{const i=function(e,n){this.widget="",this.$element=t(e),this.defaultTime=n.defaultTime,this.disableFocus=n.disableFocus,this.disableMousewheel=n.disableMousewheel,this.isOpen=n.isOpen,this.minuteStep=n.minuteStep,this.orientation=n.orientation,this.secondStep=n.secondStep,this.snapToStep=n.snapToStep,this.showInputs=n.showInputs,this.showMeridian=n.showMeridian,this.meridianNotation=n.meridianNotation,this.showSeconds=n.showSeconds,this.template=n.template,this.appendWidgetTo=n.appendWidgetTo,this.showWidgetOnAddonClick=n.showWidgetOnAddonClick,this.icons=n.icons,this.maxHours=n.maxHours,this.explicitMode=n.explicitMode,this.handleDocumentClick=t=>{const e=t.data.scope;e.$element.parent().find(t.target).length||e.$widget.is(t.target)||e.$widget.find(t.target).length||e.hideWidget()},this._init()};i.prototype={constructor:i,_init(){const e=this;this.showWidgetOnAddonClick&&this.$element.parent().hasClass("input-group")&&this.$element.parent().hasClass("timepicker")?(this.$element.parent(".input-group.timepicker").find(".input-group-addon").on({"click.timepicker":t.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":t.proxy(this.highlightUnit,this),"click.timepicker":t.proxy(this.highlightUnit,this),"keydown.timepicker":t.proxy(this.elementKeydown,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)})):this.template?this.$element.on({"focus.timepicker":t.proxy(this.showWidget,this),"click.timepicker":t.proxy(this.showWidget,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)}):this.$element.on({"focus.timepicker":t.proxy(this.highlightUnit,this),"click.timepicker":t.proxy(this.highlightUnit,this),"keydown.timepicker":t.proxy(this.elementKeydown,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)}),!1!==this.template?this.$widget=t(this.getTemplate()).on("click",t.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&!1!==this.$widget&&this.$widget.find("input").each((function(){t(this).on({"click.timepicker":function(){t(this).select()},"keydown.timepicker":t.proxy(e.widgetKeydown,e),"keyup.timepicker":t.proxy(e.widgetKeyup,e)})})),this.setDefaultTime(this.defaultTime)},blurElement(){this.highlightedUnit=null,this.updateFromElementVal()},clear(){this.hour="",this.minute="",this.second="",this.meridian="",this.$element.val("")},decrementHour(){if(""===this.hour&&(this.hour=this.getCurrentHour(),this.incrementHour()),this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour<=0?this.hour=this.maxHours-1:this.hour--},decrementMinute(t){let e;""===this.minute&&(this.minute=this.getCurrentMinute(),this.incrementMinute()),e=t?this.minute-t:this.minute-this.minuteStep,e<0?(this.decrementHour(),this.minute=e+60):this.minute=e},decrementSecond(){const t=this.second-this.secondStep;t<0?(this.decrementMinute(!0),this.second=t+60):this.second=t},elementKeydown(t){switch(t.which){case 9:if(t.shiftKey){if("hour"===this.highlightedUnit){this.hideWidget();break}this.highlightPrevUnit()}else{if(this.showMeridian&&"meridian"===this.highlightedUnit||this.showSeconds&&"second"===this.highlightedUnit||!this.showMeridian&&!this.showSeconds&&"minute"===this.highlightedUnit){this.hideWidget();break}this.highlightNextUnit()}t.preventDefault(),this.updateFromElementVal();break;case 27:this.updateFromElementVal();break;case 37:t.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(t.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update();break;case 39:t.preventDefault(),this.highlightNextUnit(),this.updateFromElementVal();break;case 40:switch(t.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update()}},getCursorPosition(){const t=this.$element.get(0);if("selectionStart"in t)return t.selectionStart;if(n.selection){t.focus();const e=n.selection.createRange(),i=n.selection.createRange().text.length;return e.moveStart("character",-t.value.length),e.text.length-i}},getMeridianLength(){const t=n.createElement("span");t.textContent=this.meridianNotation.am,t.style.position="absolute",n.querySelector("body").appendChild(t);const e=t.scrollWidth;t.textContent=this.meridianNotation.pm;const i=t.scrollWidth;return t.remove(),e>i?e:i},getTemplate(){let t,e,n,i,r,o;if(this.showInputs){const t=this.getMeridianLength()>26?`style="width: ${this.getMeridianLength()+24}px"`:"";e=`<input type="text" class="timepicker-hour" ${t}/>`,n=`<input type="text" class="timepicker-minute" ${t}/>`,i=`<input type="text" class="timepicker-second" ${t}/>`,r=`<input type="text" class="timepicker-meridian"${t}/>`}else e='<span class="timepicker-hour"></span>',n='<span class="timepicker-minute"></span>',i='<span class="timepicker-second"></span>',r='<span class="timepicker-meridian"></span>';switch(o=`<table><tr><td><a href="#" data-action="incrementHour"><span class="${this.icons.up}"></span></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><span class="${this.icons.up}"></span></a></td>${this.showSeconds?`<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><span class="${this.icons.up}"></span></a></td>`:""}${this.showMeridian?`<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><span class="${this.icons.up}"></span></a></td>`:""}</tr><tr><td>${e}</td> <td class="separator">:</td><td>${n}</td> ${this.showSeconds?`<td class="separator">:</td><td>${i}</td>`:""}${this.showMeridian?`<td class="separator">&nbsp;</td><td>${r}</td>`:""}</tr><tr><td><a href="#" data-action="decrementHour"><span class="${this.icons.down}"></span></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><span class="${this.icons.down}"></span></a></td>${this.showSeconds?`<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><span class="${this.icons.down}"></span></a></td>`:""}${this.showMeridian?`<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><span class="${this.icons.down}"></span></a></td>`:""}</tr></table>`,this.template){case"dropdown":t=`<div class="timepicker-widget dropdown-menu">${o}</div>`}return t},getTime(){return""===this.hour?"":`${1===this.hour.toString().length?`0${this.hour}`:this.hour}:${1===this.minute.toString().length?`0${this.minute}`:this.minute}${this.showSeconds?`:${1===this.second.toString().length?`0${this.second}`:this.second}`:""}${this.showMeridian?` ${this.meridian}`:""}`},hideWidget(){!1!==this.isOpen&&(this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.$widget.removeClass("open"),t(n).off("mousedown.timepicker, touchend.timepicker",this.handleDocumentClick),this.isOpen=!1,this.$widget.detach())},highlightUnit(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit(){switch(this.highlightedUnit){case"hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour(){const t=this.$element.get(0),e=this;this.highlightedUnit="hour",t.setSelectionRange&&setTimeout(()=>{e.hour<10?t.setSelectionRange(0,1):t.setSelectionRange(0,2)},0)},highlightMinute(){const t=this.$element.get(0),e=this;this.highlightedUnit="minute",t.setSelectionRange&&setTimeout(()=>{e.hour<10?t.setSelectionRange(2,4):t.setSelectionRange(3,5)},0)},highlightSecond(){const t=this.$element.get(0),e=this;this.highlightedUnit="second",t.setSelectionRange&&setTimeout(()=>{e.hour<10?t.setSelectionRange(5,7):t.setSelectionRange(6,8)},0)},highlightMeridian(){const t=this.$element.get(0),e=this;this.highlightedUnit="meridian",t.setSelectionRange&&(this.showSeconds?setTimeout(()=>{e.hour<10?t.setSelectionRange(8,10):t.setSelectionRange(9,11)},0):setTimeout(()=>{e.hour<10?t.setSelectionRange(5,7):t.setSelectionRange(6,8)},0))},getCurrentHour(){const t=(new Date).getHours();return this.showMeridian?t%12:t},getCurrentMinute:()=>(new Date).getMinutes(),incrementHour(){if(""===this.hour&&(this.hour=this.getCurrentHour(),this.decrementHour()),this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}this.hour!==this.maxHours-1?this.hour++:this.hour=0},incrementMinute(t){let e;""===this.minute&&(this.minute=this.getCurrentMinute(),this.decrementMinute()),e=t?this.minute+t:this.minute+this.minuteStep-this.minute%this.minuteStep,e>59?(this.incrementHour(),this.minute=e-60):this.minute=e},incrementSecond(){const t=this.second+this.secondStep-this.second%this.secondStep;t>59?(this.incrementMinute(!0),this.second=t-60):this.second=t},mousewheel(e){if(this.disableMousewheel)return;e.preventDefault(),e.stopPropagation();const n=e.originalEvent.wheelDelta||-e.originalEvent.detail;let i=null;switch("mousewheel"===e.type?i=-1*e.originalEvent.wheelDelta:"DOMMouseScroll"===e.type&&(i=40*e.originalEvent.detail),i&&(e.preventDefault(),t(this).scrollTop(i+t(this).scrollTop())),this.highlightedUnit){case"minute":n>0?this.incrementMinute():this.decrementMinute(),this.highlightMinute();break;case"second":n>0?this.incrementSecond():this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break;default:n>0?this.incrementHour():this.decrementHour(),this.highlightHour()}return!1},changeToNearestStep:(t,e)=>t%e==0?t:Math.round(t%e/e)?(t+(e-t%e))%60:t-t%e,place(){if(this.isInline)return;const n=this.$widget.outerWidth(),i=this.$widget.outerHeight(),r=t(e).width(),o=t(e).height(),a=t(e).scrollTop(),s=parseInt(this.$element.parents().filter((function(){return"auto"!==t(this).css("z-index")})).first().css("z-index"),10)+10,u=this.component?this.component.parent().offset():this.$element.offset(),l=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),c=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1);let h=u.left,d=u.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),"auto"!==this.orientation.x?(this.$widget.addClass(`timepicker-orient-${this.orientation.x}`),"right"===this.orientation.x&&(h-=n-c)):(this.$widget.addClass("timepicker-orient-left"),u.left<0?h-=u.left-10:u.left+n>r&&(h=r-n-10));let p,f,m=this.orientation.y;"auto"===m&&(p=-a+u.top-i,f=a+o-(u.top+l+i),m=Math.max(p,f)===f?"top":"bottom"),this.$widget.addClass(`timepicker-orient-${m}`),"top"===m?d+=l:d-=i+parseInt(this.$widget.css("padding-top"),10),this.$widget.css({top:d,left:h,zIndex:s})},remove(){t("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime(t){if(this.$element.val())this.updateFromElementVal();else if("current"===t){const t=new Date;let e=t.getHours(),n=t.getMinutes(),i=t.getSeconds(),r=this.meridianNotation.am;0!==i&&(i=Math.ceil(t.getSeconds()/this.secondStep)*this.secondStep,60===i&&(n+=1,i=0)),0!==n&&(n=Math.ceil(t.getMinutes()/this.minuteStep)*this.minuteStep,60===n&&(e+=1,n=0)),this.showMeridian&&(0===e?e=12:e>=12?(e>12&&(e-=12),r=this.meridianNotation.pm):r=this.meridianNotation.am),this.hour=e,this.minute=n,this.second=i,this.meridian=r,this.update()}else!1===t?(this.hour=0,this.minute=0,this.second=0,this.meridian=this.meridianNotation.am):this.setTime(t)},setTime(t,e){if(!t)return void this.clear();let n,i,r,o,a,s;if("object"==typeof t&&t.getMonth)r=t.getHours(),o=t.getMinutes(),a=t.getSeconds(),this.showMeridian&&(s=this.meridianNotation.am,r>12&&(s=this.meridianNotation.pm,r%=12),12===r&&(s=this.meridianNotation.pm));else{let e=this.showMeridian?this.meridianNotation.am:"am",u=this.showMeridian?this.meridianNotation.pm:"pm";if(n=(new RegExp(e,"i").test(t)?1:0)+(new RegExp(u,"i").test(t)?2:0),n>2)return void this.clear();if(i=t.replace(/[^0-9:]/g,"").split(":"),r=i[0]?i[0].toString():i.toString(),this.explicitMode&&r.length>2&&r.length%2!=0)return void this.clear();o=i[1]?i[1].toString():"",a=i[2]?i[2].toString():"",r.length>4&&(a=r.slice(-2),r=r.slice(0,-2)),r.length>2&&(o=r.slice(-2),r=r.slice(0,-2)),o.length>2&&(a=o.slice(-2),o=o.slice(0,-2)),r=parseInt(r,10),o=parseInt(o,10),a=parseInt(a,10),isNaN(r)&&(r=0),isNaN(o)&&(o=0),isNaN(a)&&(a=0),a>59&&(a=59),o>59&&(o=59),r>=this.maxHours&&(r=this.maxHours-1),this.showMeridian?(r>=12&&(n||(n=2),r-=12),n||(n=1),0===r&&(r=12),s=1===n?this.meridianNotation.am:this.meridianNotation.pm):r<12&&2===n?r+=12:r>=this.maxHours?r=this.maxHours-1:(r<0||12===r&&1===n)&&(r=0)}this.hour=r,this.snapToStep?(this.minute=this.changeToNearestStep(o,this.minuteStep),this.second=this.changeToNearestStep(a,this.secondStep)):(this.minute=o,this.second=a),this.meridian=s,this.update(e)},showWidget(){this.isOpen||this.$element.is(":disabled")||(this.setTime(this.$element.val()),this.updateWidget(),this.$widget.appendTo(this.appendWidgetTo),t(n).on("mousedown.timepicker, touchend.timepicker",{scope:this},this.handleDocumentClick),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.place(),this.disableFocus&&this.$element.blur(),""===this.hour&&this.defaultTime&&this.setDefaultTime(this.defaultTime),!1===this.isOpen&&this.$widget.addClass("open"),this.isOpen=!0)},toggleMeridian(){this.meridian=this.meridian===this.meridianNotation.am?this.meridianNotation.pm:this.meridianNotation.am},update(t){this.updateElement(),t||this.updateWidget(),this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},updateElement(){this.$element.val(this.getTime()),this.$element[0].dispatchEvent(C.Change())},updateFromElementVal(){this.setTime(this.$element.val())},updateWidget(){if(!1===this.$widget)return;const t=this.hour,e=1===this.minute.toString().length?`0${this.minute}`:this.minute,n=1===this.second.toString().length?`0${this.second}`:this.second;this.showInputs?(this.$widget.find("input.timepicker-hour").val(t),this.$widget.find("input.timepicker-minute").val(e),this.showSeconds&&this.$widget.find("input.timepicker-second").val(n),this.showMeridian&&this.$widget.find("input.timepicker-meridian").val(this.meridian)):(this.$widget.find("span.timepicker-hour").text(t),this.$widget.find("span.timepicker-minute").text(e),this.showSeconds&&this.$widget.find("span.timepicker-second").text(n),this.showMeridian&&this.$widget.find("span.timepicker-meridian").text(this.meridian))},updateFromWidgetInputs(){if(!1===this.$widget)return;const t=`${this.$widget.find("input.timepicker-hour").val()}:${this.$widget.find("input.timepicker-minute").val()}${this.showSeconds?`:${this.$widget.find("input.timepicker-second").val()}`:""}${this.showMeridian?this.$widget.find("input.timepicker-meridian").val():""}`;this.setTime(t,!0)},widgetClick(e){e.stopPropagation(),e.preventDefault();const n=t(e.target),i=n.closest("a").data("action");i&&this[i](),this.update(),n.is("input")&&n.get(0).setSelectionRange(0,2)},widgetKeydown(e){const n=t(e.target),i=n.attr("class").replace("timepicker-","");switch(e.which){case 9:if(e.shiftKey){if("hour"===i)return this.hideWidget()}else if(this.showMeridian&&"meridian"===i||this.showSeconds&&"second"===i||!this.showMeridian&&!this.showSeconds&&"minute"===i)return this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(e.preventDefault(),i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),n.get(0).setSelectionRange(0,2);break;case 40:switch(e.preventDefault(),i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),n.get(0).setSelectionRange(0,2)}},widgetKeyup(t){(65===t.which||77===t.which||80===t.which||46===t.which||8===t.which||t.which>=48&&t.which<=57||t.which>=96&&t.which<=105)&&this.updateFromWidgetInputs()}},t.fn.timepicker=function(e){const n=Array(...arguments);return n.shift(),this.each((function(){const r=t(this);let o=r.data("timepicker");const a="object"==typeof e&&e;o||r.data("timepicker",o=new i(this,t.extend({},t.fn.timepicker.defaults,a,t(this).data()))),"string"==typeof e&&o[e](...n)}))},t.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,disableMousewheel:!1,isOpen:!1,minuteStep:15,orientation:{x:"auto",y:"auto"},secondStep:15,snapToStep:!1,showSeconds:!1,showInputs:!0,showMeridian:!0,meridianNotation:{am:"AM",pm:"PM"},template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:!0,icons:{up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},maxHours:24,explicitMode:!1},t.fn.timepicker.Constructor=i,t(n).on("focus.timepicker.data-api click.timepicker.data-api",'[data-provide="timepicker"]',(function(e){const n=t(this);n.data("timepicker")||(e.preventDefault(),n.timepicker())}))})(s.a,window,document);var Tt=class extends X{static get selector(){return'.question input[type="time"]:not([readonly])'}static condition(){return!nt.touch||!nt.inputTypes.time}_init(){const t=document.createRange().createContextualFragment('<div class="widget timepicker">\n                <input class="ignore timepicker-default" type="text" placeholder="hh:mm" />\n            </div>');t.querySelector(".widget").append(this.resetButtonHtml),this.element.classList.add("hide"),this.element.after(t);const e=this.question.querySelector(".widget > .btn-reset");this.fakeTimeI=this.question.querySelector(".widget > input"),s()(this.fakeTimeI).timepicker({showMeridian:E.hour12,meridianNotation:{am:E.amNotation,pm:E.pmNotation}}),this.value=this.originalInputValue,this.fakeTimeI.addEventListener("change",()=>{const t=E.hour12?L.time.convertMeridian(this.value):this.value;this.originalInputValue=t}),e.addEventListener("click",this._reset.bind(this)),this.element.addEventListener(C.ApplyFocus().type,()=>{this.fakeTimeI.focus()})}_reset(){const t=this.originalInputValue?C.Change():null;(t||this.value)&&(this.value="",this.fakeTimeI.dispatchEvent(t))}update(){this.element.value!==this.value&&s()(this.element).next(".widget").find("input").timepicker("setTime",this.element.value)}get value(){return this.fakeTimeI.value}set value(t){s()(this.fakeTimeI).timepicker("setTime",t)}};var St=class extends X{static get selector(){return'.question input[type="datetime-local"]:not([readonly])'}static condition(){return!nt.touch||!nt.inputTypes["datetime-local"]}_init(){this.$fakeDateI=this._createFakeDateInput(),this.$fakeTimeI=this._createFakeTimeInput(),this.element.classList.add("hide"),this.element.after(document.createRange().createContextualFragment('<div class="datetimepicker widget" />'));const t=this.question.querySelector(".widget");t.append(this.$fakeDateI[0].closest(".date")),t.append(this.$fakeTimeI[0].closest(".timepicker")),this.$fakeDateI.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0,forceParse:!1}),this.$fakeTimeI.timepicker({showMeridian:E.hour12,meridianNotation:{am:E.amNotation,pm:E.pmNotation}}),this.value=this.originalInputValue,this._setFocusHandler(this.$fakeDateI.add(this.$fakeTimeI)),this.$fakeDateI.on("change changeDate",()=>(L.date.validate(this.$fakeDateI[0].value)||this.$fakeDateI.val("").datepicker("update"),this.originalInputValue=this.value,!1)),this.$fakeTimeI.on("change",()=>(this.originalInputValue=this.value,!1)),this.question.querySelector(".btn-reset").addEventListener("click",()=>{const t=this.originalInputValue?"change":"";(t||this.$fakeDateI.val()||this.$fakeTimeI.val())&&(this.$fakeDateI.val("").trigger(t).datepicker("update"),this.$fakeTimeI.val("").trigger(t))})}_createFakeDateInput(){return s()('<div class="date"><input class="ignore" type="text" placeholder="yyyy-mm-dd"/></div>').find("input")}_createFakeTimeInput(){return s()('<div class="timepicker">\n                    <input class="ignore timepicker-default" type="text" placeholder="hh:mm"/>\n                </div>').append(this.resetButtonHtml).find("input")}_setFocusHandler(t){this.element.addEventListener(C.ApplyFocus().type,()=>{t.eq(0).focus()})}update(){const t=s()(this.element),e=t.val().length>0?new Date(t.val()).toISOLocalString():"";if(e!==this.value){const t=e.split("T"),n=t[0],i=t[1]&&t[1].length>4?t[1].substring(0,5):"";this.$fakeDateI.datepicker("setDate",n),this.$fakeTimeI.timepicker("setTime",i)}}get value(){if(this.$fakeDateI.val().length>0&&this.$fakeTimeI.val().length>3){const t=this.$fakeDateI.val().split("-"),e=(E.hour12?L.time.convertMeridian(this.$fakeTimeI.val()):this.$fakeTimeI.val()).split(":");return new Date(t[0],t[1]-1,t[2],e[0],e[1]).toISOLocalString()}return""}set value(t){const e=(t?new Date(t).toISOLocalString():"").split("T"),n=e[0],i=e[1]&&e[1].length>4?e[1].substring(0,5):n&&!e[1]?"00:00":"";this.$fakeDateI.datepicker("setDate",n),this.$fakeTimeI.timepicker("setTime",i)}};var Dt=class extends X{static get selector(){return'.question input[type="date"],.question input[type="datetime-local"]'}static condition(t){return!g.has(t,"DatepickerExtended")&&!g.has(t,"DatetimepickerExtended")&&!nt.touch}_init(){this.element.type="text",this.element.classList.add("mask-date")}};var Mt=class extends X{static get selector(){return".or-appearance-no-buttons"}_init(){this.element.querySelectorAll(".option-label").forEach((function(t){l(t,"img, video, audio").length>0&&(t.style.display="none")}))}},At=n(37);function Pt(t,e,n){this.message=t,this.translationKey=e,this.translationOptions=n}Pt.prototype=Object.create(Error.prototype),Pt.prototype.name="TranslatedError";var Ot=Pt;var It=class extends X{static get selector(){return'.question:not(.or-appearance-draw):not(.or-appearance-signature):not(.or-appearance-annotate) input[type="file"]'}_init(){const t=this.element.getAttribute("data-loaded-file-name"),e=this;this.element.classList.add("hide"),this.question.classList.add("with-media","clearfix");const n=document.createRange().createContextualFragment('<div class="widget file-picker">\n                    <input class="ignore fake-file-input"/>\n                    <div class="file-feedback"></div>\n                    <div class="file-preview"></div>\n                </div>');n.querySelector("input").after(this.downloadButtonHtml),n.querySelector("input").after(this.resetButtonHtml),this.element.after(n),this.disable();const i=this.question.querySelector(".widget");this.feedback=i.querySelector(".file-feedback"),this.preview=i.querySelector(".file-preview"),this.fakeInput=i.querySelector(".fake-file-input"),this.downloadLink=i.querySelector(".btn-download"),e._setResetButtonListener(i.querySelector(".btn-reset")),e._setFocusListener(),this._showFileName(t),At.default.isWaitingForPermissions()&&this._showFeedback(Object(q.a)("filepicker.waitingForPermissions"),"warning"),this._updatePlaceholder(),s()(this.element.closest("form.or")).on("updateMaxSize",this._updatePlaceholder.bind(this)),At.default.init().then(()=>{e._showFeedback(),e._setChangeListener(),e.props.readonly||e.enable(),t&&At.default.getFileUrl(t).then(n=>{e._showPreview(n,e.props.mediaType),e._updateDownloadLink(n,t)}).catch(()=>{e._showFeedback(Object(q.a)("filepicker.notFound",{existing:t}),"error")})}).catch(t=>{e._showFeedback(t,"error")})}_updatePlaceholder(){this.fakeInput.setAttribute("placeholder",Object(q.a)("filepicker.placeholder",{maxSize:At.default.getMaxSizeReadable()||"?MB"}))}_setResetButtonListener(t){t&&t.addEventListener("click",()=>{(this.originalInputValue||this.value)&&U.confirm(Object(q.a)("filepicker.resetWarning",{item:Object(q.a)("filepicker.file")})).then(t=>{t&&(this.originalInputValue="")}).catch(()=>{})})}_setChangeListener(){const t=this;s()(this.element).on("click",e=>{if(t.props.readonly||"propagate"!==e.namespace)return t.fakeInput.focus(),e.stopImmediatePropagation(),!1}).on("change.propagate",e=>{let n,i,r;const a=this.element.getAttribute("data-loaded-file-name"),u=new Date;if("propagate"===e.namespace)return s()(this.element).trigger("change.file"),!1;e.stopImmediatePropagation(),n=e.target.files[0],r=`-${u.getHours()}_${u.getMinutes()}_${u.getSeconds()}`,e.target.dataset.filenamePostfix=r,i=Object(o.b)(n,r),this._resizeFile(n,t.props.mediaType).then(t=>{e.target.dataset.resized=!0,e.target.dataset.resizedDataURI=t.dataURI,n=t.blob}).catch(()=>{}).finally(()=>{At.default.getFileUrl(n,i).then(e=>{t._showPreview(e,t.props.mediaType),t._showFeedback(),t._showFileName(i),a&&a!==i&&t.element.removeAttribute("data-loaded-file-name"),t._updateDownloadLink(e,i),s()(t.element).trigger("change.propagate")}).catch(e=>{s()(t.element).val("").trigger("change.propagate"),t._showFileName(""),t._showPreview(null),t._showFeedback(e,"error"),t._updateDownloadLink("","")})})}),this.fakeInput.addEventListener("click",e=>{if(e.preventDefault(),this.props.readonly||this.originalInputValue||this.value)return this.fakeInput.focus(),void e.stopImmediatePropagation();s()(t.element).trigger("click.propagate")}),this.fakeInput.addEventListener("change",t=>{t.preventDefault(),t.stopPropagation()})}_setFocusListener(){this.element.addEventListener(C.ApplyFocus().type,()=>{this.fakeInput.focus()})}_showFileName(t){this.value=t,this.fakeInput.readOnly=!!t}_showFeedback(t,e){const n=t instanceof Ot?Object(q.a)(t.translationKey,t.translationOptions):t instanceof Error?t.message:t||"";e=e||"",this.feedback.textContent=n,this.feedback.setAttribute("class",`file-feedback ${e}`)}_showPreview(t,e){let n;switch([...this.preview.children].forEach(t=>t.remove()),e){case"image/*":n="<img />";break;case"audio/*":n='<audio controls="controls"/>';break;case"video/*":n='<video controls="controls"/>'}if(t&&n){const e=document.createRange().createContextualFragment(n);e.querySelector("*").src=t,this.preview.append(e)}}_resizeFile(t,e){return new Promise((n,i)=>{"image/*"!==e&&i(t),this.props&&this.props.maxPixels?Object(o.g)(t,this.props.maxPixels).then(t=>{const e=new FileReader;e.addEventListener("load",(function(){n({blob:t,dataURI:e.result})}),!1),e.readAsDataURL(t)}).catch(()=>{i(t)}):i(t)})}_updateDownloadLink(t,e){Object(o.j)(this.downloadLink,t,e)}disable(){this.element.disabled=!0,this.question.querySelector(".btn-reset").disabled=!0}enable(){this.element.disabled=!1,this.question.querySelector(".btn-reset").disabled=!1}get props(){const t=this._props;return t.mediaType=this.element.getAttribute("accept"),this.element.dataset.maxPixels&&Object(o.d)(this.element.dataset.maxPixels)&&(t.maxPixels=parseInt(this.element.dataset.maxPixels,10)),t}get value(){return this.fakeInput.value}set value(t){this.fakeInput.value=t}},Nt=n(164),Rt=n.n(Nt);Rt.a.prototype.fromObjectURL=function(t,e){const n=new Image,i=(e=e||{}).ratio||window.devicePixelRatio||1,r=e.width||this._canvas.width/i,o=e.height||this._canvas.height/i,a=this;return this._reset(),new Promise(e=>{n.src=t,n.onload=()=>{const i=n.width,s=n.height,u=r/i,l=o/s;let c,h;if(u<1||l<1){const t=Math.min(u,l);c=(r-i*t)/2,h=(o-s*t)/2,a._ctx.drawImage(n,0,0,i,s,c,h,i*t,s*t)}else c=(r-i)/2,h=(o-s)/2,a._ctx.drawImage(n,c,h,i,s);e(t)},a._isEmpty=!1})},Rt.a.prototype.updateData=function(t){const e=this;this._fromData(t,(t,n)=>{e._drawCurve(t,n.start,n.end)},t=>{e._drawDot(t)}),this._data=t};var jt=class extends X{static get selector(){return'.or-appearance-draw input[data-type-xml="binary"][accept^="image"], .or-appearance-signature input[data-type-xml="binary"][accept^="image"], .or-appearance-annotate input[data-type-xml="binary"][accept^="image"]'}_init(){let t;const e=this,n=this.element.dataset.loadedFileName;this.element.type="text",this.element.dataset.drawing=!0,this.element.after(this._getMarkup());const i=this.question;i.classList.add(`or-${this.props.type}-initialized`),this.$widget=s()(i.querySelector(".widget")),t=this.$widget[0].querySelector(".draw-widget__body__canvas"),this._handleResize(t),this._resizeCanvas(t),this.props.load&&this._handleFiles(n),t.addEventListener("blur",this._forceUpdate.bind(this)),this.initialize=At.default.init().then(()=>(e.pad=new Rt.a(t,{onEnd:()=>{clearTimeout(e._updateWithDelay),e._updateWithDelay=setTimeout(e._updateValue.bind(e),1500)},penColor:e.props.colors[0]||"black"}),e.pad.off(),!n||(e.element.value=n,e._loadFileIntoPad(n).then(e._updateDownloadLink.bind(e))))),this.disable(),this.initialize.then(()=>{e.$widget.find(".btn-reset").on("click",e._reset.bind(e)).end().find(".draw-widget__colorpicker").on("click",".current",(function(){s()(this).parent().toggleClass("reveal")})).on("click","[data-color]:not(.current)",(function(){s()(this).siblings().removeClass("current").end().addClass("current").parent().removeClass("reveal"),e.pad.penColor=this.dataset.color})).end().find(".draw-widget__undo").on("click",()=>{const t=e.pad.toData();e.pad.clear();const n=e.$widget[0].querySelector("input[type=file]"),i=n&&n.files[0]?n.files[0]:e.element.dataset.loadedFileName;e._loadFileIntoPad(i).then(()=>{e.pad.updateData(t.slice(0,-1)),e._updateValue(),e.pad.penColor=e.$widget.find(".draw-widget__colorpicker .current")[0].dataset.color})}).end().find(".show-canvas-btn").on("click",()=>(e.$widget.addClass("full-screen"),e._resizeCanvas(t),e.enable(),!1)).end().find(".hide-canvas-btn").on("click",()=>(e.$widget.removeClass("full-screen"),e.pad.off(),e._forceUpdate(),e._resizeCanvas(t),!1)).click(),s()(t).on("canvasreload",()=>{e.cache&&e.pad.fromObjectURL(e.cache).then(e._updateValue.bind(e,!1))}),e.enable()}).catch(t=>{e._showFeedback(t.message)}),s()(this.element).on("applyfocus",()=>{t.focus()}).closest('[role="page"]').on("pageflip",()=>{e._resizeCanvas(t)})}_forceUpdate(){this._updateWithDelay&&(clearTimeout(this._updateWithDelay),this._updateValue())}_handleFiles(t){this._updatePlaceholder(),this.$widget.closest("form.or").on("updateMaxSize",this._updatePlaceholder.bind(this));const e=this,n=this.$widget.find("input[type=file]"),i=this.$widget.find(".fake-file-input");this._showFileName(t),n.on("click",t=>{if(e.props.readonly||"propagate"!==t.namespace)return e.$fakeInput.focus(),t.stopImmediatePropagation(),!1}).on("change",(function(){const t=this.files[0];t?At.default.isTooLarge(t)?e._showFeedback(Object(q.a)("filepicker.toolargeerror",{maxSize:At.default.getMaxSizeReadable()})):(e.pad.clear(),e._loadFileIntoPad(this.files[0]).then(()=>{e._updateValue.call(e),e._showFileName(t.name),e.enable()})):e._showFileName(null)})),i.on("click",(function(t){if(e.props.readonly||n[0].value||i[0].value)return s()(this).focus(),t.stopImmediatePropagation(),!1;t.preventDefault(),n.trigger("click.propagate")})).on("change",()=>!1)}_showFileName(t){this.$widget.find(".fake-file-input").val(t).prop("readonly",!!t)}_updatePlaceholder(){this.$widget.find(".fake-file-input").attr("placeholder",Object(q.a)("filepicker.placeholder",{maxSize:At.default.getMaxSizeReadable()||"?MB"}))}_getMarkup(){const t=this.props.load?`<input type="file" class="ignore draw-widget__load"${null!==this.props.capture?` capture="${this.props.capture}"`:""} accept="${this.props.accept}"/><div class="widget file-picker"><input class="ignore fake-file-input"/><div class="file-feedback"></div></div>`:"",e=this.props.touch?'<button type="button" class="show-canvas-btn btn btn-default">Draw/Sign</button><button type="button" class="hide-canvas-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button>':"",n=document.createRange().createContextualFragment(`<div class="widget draw-widget">\n                <div class="draw-widget__body">\n                    ${e}\n                    ${t}\n                    <canvas class="draw-widget__body__canvas noSwipe disabled" tabindex="0"></canvas>\n                    <div class="draw-widget__colorpicker"></div>\n                    ${"signature"===this.props.type?"":'<button class="btn-icon-only draw-widget__undo" aria-label="undo" type=button><i class="icon icon-undo"> </i></button>'}\n                </div>\n                <div class="draw-widget__footer">\n                    <div class="draw-widget__feedback"></div>\n                </div>\n            </div>`);n.querySelector(".draw-widget__footer").prepend(this.downloadButtonHtml),n.querySelector(".draw-widget__footer").prepend(this.resetButtonHtml);const i=n.querySelector(".draw-widget__colorpicker");return this.props.colors.forEach((t,e)=>{const n=0===e?" current":"",r=document.createRange().createContextualFragment(`<div class="${n}"data-color="${t}" style="background: ${t};" />`);i.append(r)}),n}_updateValue(t=!0){const e=new Date,n=`-${e.getHours()}_${e.getMinutes()}_${e.getSeconds()}`;this.element.dataset.filenamePostfix=n,t&&(this.originalInputValue=this.props.filename),this.value=this.pad.toDataURL(),this._updateDownloadLink(this.value)}_reset(){const t=this;if(this.element.value){const e="signature"===this.props.type?Object(q.a)("drawwidget.signature"):"drawing"===this.props.type?Object(q.a)("drawwidget.drawing"):Object(q.a)("drawwidget.annotation");U.confirm(Object(q.a)("filepicker.resetWarning",{item:e})).then(e=>{e&&(t.pad.clear(),t.cache=null,delete t.element.dataset.loadedFileName,delete t.element.dataset.loadedUrl,t.element.dataset.filenamePostfix="",s()(t.element).val("").trigger("change"),t.$widget.find("input[type=file]").val("").trigger("change"),t._updateDownloadLink(""),t.disable(),t.enable())})}}_loadFileIntoPad(t){const e=this;return t?("string"==typeof t&&t.startsWith("jr://")&&this.element.dataset.loadedUrl&&(t=this.element.dataset.loadedUrl),At.default.getObjectUrl(t).then(e.pad.fromObjectURL.bind(e.pad)).then(t=>(e.cache=t,t)).catch(()=>{e._showFeedback("File could not be loaded (leave unchanged if already submitted and you want to preserve it).","error")})):Promise.resolve("")}_showFeedback(t){t=t||"",this.$widget.find(".draw-widget__feedback").text(t)}_updateDownloadLink(t){t&&0===t.indexOf("data:")&&(t=URL.createObjectURL(Object(o.a)(t)));const e=t?Object(o.b)({name:this.element.value},this.element.dataset.filenamePostfix):"";Object(o.j)(this.$widget.find(".btn-download")[0],t,e)}_handleResize(t){const e=this;s()(window).on("resize",()=>{e._forceUpdate(),e._resizeCanvas(t)})}_resizeCanvas(t){if(t.offsetWidth>0){const e=Math.max(window.devicePixelRatio||1,1);t.width=t.offsetWidth*e,t.height=t.offsetHeight*e,t.getContext("2d").scale(e,e),s()(t).trigger("canvasreload")}}disable(){const t=this,e=this.$widget.find(".draw-widget__body__canvas")[0];this.initialize.then(()=>{t.pad.off(),e.classList.add("disabled"),t.$widget.find(".btn-reset").prop("disabled",!0)})}enable(){const t=this,e=this.$widget.find(".draw-widget__body__canvas")[0],n=this.props.touch&&!this.$widget.is(".full-screen"),i=this.props.load&&!this.element.value;this.initialize.then(()=>{t.props.readonly||i||n||(t.pad.on(),e.classList.remove("disabled"),t.$widget.find(".btn-reset").prop("disabled",!1)),t._resizeCanvas(e)})}update(){""===this.originalInputValue&&this._reset()}get props(){const t=this._props;return t.type=t.appearances.includes("draw")?"drawing":t.appearances.includes("signature")?"signature":"annotation",t.filename=`${t.type}.png`,t.load="annotation"===t.type,t.colors="signature"===t.type?[]:["black","lightblue","blue","red","orange","cyan","yellow","lightgreen","green","pink","purple","lightgray","darkgray"],t.touch=nt.touch,t.accept=this.element.getAttribute("accept"),t.capture=this.element.getAttribute("capture"),t}get value(){return this.cache||""}set value(t){this.cache=t}};var qt=class extends X{static get selector(){return".question.or-appearance-columns"}_init(){this.element.querySelectorAll(".option-wrapper").forEach(t=>{let e=3-t.querySelectorAll("label").length%3;for(;e<3&&e>0;)t.append(document.createRange().createContextualFragment('<label class="filler"></label>')),e--;this.question.classList.add("or-columns-initialized")})}};var Ft=class extends X{static get selector(){return'.or-appearance-distress input[type="number"], .question:not(.or-appearance-analog-scale):not(.or-appearance-rating) > input[type="number"][min][max][step]'}_init(){const t=this,e=document.createRange().createContextualFragment(this._getHtmlStr());e.querySelector(".range-widget__scale__end").before(this.resetButtonHtml),e.querySelector(".range-widget__scale__start").textContent=this.props.min,e.querySelector(".range-widget__scale__end").textContent=this.props.max,this.element.after(e),this.element.classList.add("hide"),this.element.addEventListener("applyfocus",()=>{this.range.focus()}),this.widget=this.question.querySelector(".widget"),this.range=this.widget.querySelector("input"),this.current=this.widget.querySelector(".range-widget__current"),this.props.readonly&&this.disable(),this.range.addEventListener("change",()=>{this.originalInputValue!==this.value&&(this.current.textContent=this.value,this.originalInputValue=this.value,this._updateMercury((this.value-this.props.min)/(t.props.max-t.props.min)))}),this.widget.querySelector("input.empty").addEventListener("click",()=>{this.range.classList.remove("empty"),this.range.dispatchEvent(C.Change())}),this.widget.querySelector("input.empty").addEventListener("touchstart",()=>{this.range.classList.remove("empty"),this.range.dispatchEvent(C.Change())}),this.widget.querySelector(".btn-reset").addEventListener("click",this._reset.bind(this)),this.update();let n=this.props.ticks?Math.ceil(Math.abs((this.props.max-this.props.min)/this.props.step)):1,i=Math.ceil(n/this.props.maxTicks);for(;n%i&&i<n;)i++;n/=i,this.widget.querySelector(".range-widget__ticks").append(document.createRange().createContextualFragment(new Array(n).fill("<span></span>").join("")))}_getHtmlStr(){return`<div class="widget range-widget">\n                <div class="range-widget__wrap">\n                    <div class="range-widget__current"></div>\n                    <div class="range-widget__bg"></div>\n                    <div class="range-widget__ticks"></div>\n                    <div class="range-widget__scale">\n                        <span class="range-widget__scale__start"></span>\n                        ${this._stepsBetweenHtmlStr(this.props)}\n                        <span class="range-widget__scale__end"></span>\n                    </div>\n                    <div class="range-widget__bulb">\n                        <div class="range-widget__bulb__inner"></div>\n                        <div class="range-widget__bulb__mercury"></div>\n                    </div>\n                </div>\n                <input type="range" class="ignore empty" min="${this.props.min}" max="${this.props.max}" step="${this.props.step}"/>\n            </div>`}_updateMercury(t){const e=this.widget.querySelector(".range-widget__ticks").clientHeight,n=this.widget.querySelector(".range-widget__bulb").clientHeight;this.widget.querySelector(".range-widget__bulb__mercury").style.height=`${t*e+.5*n}px`}_stepsBetweenHtmlStr(t){let e="";if(t.distress){if((t.max-t.min)/t.step<=10&&(t.max-t.min)%t.step==0)for(let n=t.min+t.step;n<t.max;n+=t.step)e+=`<span class="range-widget__scale__between">${n}</span>`}return e}_reset(){this.current.textContent="",this._updateMercury(0),this.value="",this.originalInputValue=""}disable(){this.widget.querySelectorAll("input, button").forEach(t=>t.disabled=!0)}enable(){this.widget.querySelectorAll("input, button").forEach(t=>t.disabled=!1)}update(){const t=this.element.value;Object(o.d)(t)?(this.value=t,this.range.dispatchEvent(C.Change())):this._reset()}get props(){const t=this._props,e=Object(o.d)(this.element.getAttribute("min"))?this.element.getAttribute("min"):0,n=Object(o.d)(this.element.getAttribute("max"))?this.element.getAttribute("max"):10,i=Object(o.d)(this.element.getAttribute("step"))?this.element.getAttribute("step"):1,r=t.appearances.includes("distress");return t.min=Number(e),t.max=Number(n),t.step=Number(i),t.vertical=t.appearances.includes("vertical")||r,t.ticks=!t.appearances.includes("no-ticks"),t.distress=r,t.maxTicks=50,t}get value(){return this.range.classList.contains("empty")?"":this.range.value}set value(t){this.range.value=t,this.range.classList.toggle("empty",""===t)}};var Ut=class extends Ft{static get selector(){return'.or-appearance-analog-scale input[type="number"]'}_init(){super._init(),this.props.vertical&&this.question.classList.add("or-appearance-vertical"),this.question.classList.add("or-analog-scale-initialized"),this._renderLabels(),this._setResizeListener()}_getHtmlStr(){return`<div class="widget analog-scale-widget">\n                ${super._getHtmlStr()}\n            </div>`}_updateMercury(){}_renderLabels(){const t=document.createRange().createContextualFragment('<div class="label-content widget"></div>'),e=t.querySelector(".label-content");this.question.querySelectorAll(".question-label, .or-hint, .or-required-msg, .or-constraint-msg").forEach(t=>e.append(t)),this.question.prepend(t),this.labelContent=this.question.querySelector(".label-content"),this._updateLabels()}_updateLabels(){if(!this.question.classList.contains("or-analog-scale-initialized"))return;const t=this.labelContent.querySelector(".question-label.active:not(.widget)"),e=t.innerHTML.split(/\|/).map(t=>t.trim()),n=this.labelContent.querySelector(".question-label.widget");n&&n.remove();const i=document.createRange().createContextualFragment(`<span class="question-label widget active">${e[0]}</span>`);t.after(i);const r=this.widget.querySelector(".max-label");r&&r.remove();const o=document.createRange().createContextualFragment(`<div class="max-label">${e[1]}</div>`);this.widget.prepend(o);const a=this.widget.querySelector(".min-label");a&&a.remove();const s=document.createRange().createContextualFragment(`<div class="min-label">${e[2]}</div>`);this.widget.append(s);const u=this.labelContent.querySelector(".show-value");if(u&&u.remove(),e[3]){const t=document.createRange().createContextualFragment(`<div class="widget show-value">\n                    <div class="show-value__box">${e[3]}<span class="show-value__value">${this.value}</span></div>\n                <div>`);this.labelContent.append(t),this.current=this.labelContent.querySelector(".show-value__value")}}_setResizeListener(){this.props.vertical&&this.question.addEventListener("pageflip",this._stretchHeight.bind(this))}_stretchHeight(){this.question.style["min-height"]="auto"}update(){super.update(),this._updateLabels()}get props(){const t=this._props;return t.touch=nt.touch,t.min=Object(o.d)(this.element.getAttribute("min"))?this.element.getAttribute("min"):0,t.max=Object(o.d)(this.element.getAttribute("max"))?this.element.getAttribute("max"):100,t.step=Object(o.d)(this.element.getAttribute("step"))?this.element.getAttribute("step"):1,t.vertical=!t.appearances.includes("horizontal"),t.ticks=!t.appearances.includes("no-ticks"),t.maxTicks=10,t}get value(){return super.value}set value(t){super.value=t}};var Bt=class extends X{static get selector(){return"a.or-big-image"}_init(){this.element.addEventListener("click",t=>{const e=this.element.getAttribute("href"),n=this.element.querySelector("img"),i=n.getAttribute("src");this.element.setAttribute("href",i),n.setAttribute("src",e),this.element.classList.toggle("open"),t.preventDefault(),t.stopPropagation()})}};var zt=class extends X{static get selector(){return'.or-appearance-comment input[type="text"][data-for], .or-appearance-comment textarea[data-for]'}static get helpersRequired(){return["input","pathToAbsolute"]}_init(){if(this.linkedQuestion=this._getLinkedQuestion(this.element),this.commentQuestion=this.question,this.linkedQuestion){this.commentQuestion.classList.add("hide"),this.commentQuestion.setAttribute("role","comment");const t=document.createRange().createContextualFragment('<a class="btn-icon-only btn-comment aria-label="comment" type="button" href="#"><i class="icon"> </i></a>'),e=this.linkedQuestion.querySelectorAll(".question-label");e[e.length-1].after(t),this.commentButton=this.linkedQuestion.querySelector(".btn-comment"),this._setCommentButtonState(this.originalInputValue),this._setCommentButtonHandler(),this._setValidationHandler(),this._setFocusHandler()}}_getLinkedQuestion(t){const e=this.options.helpers.input.getName(t),n=this.element.dataset.for.trim(),i=this.options.helpers.pathToAbsolute(n,e),r=t.closest("form.or, .or-repeat");return this.options.helpers.input.getWrapNode(r.querySelector(`[name="${i}"], [data-name="${i}"]`))}_commentHasError(){return this.commentQuestion.classList.contains("invalid-required")||this.commentQuestion.classList.contains("invalid-constraint")}_setCommentButtonState(t,e){t="string"==typeof t?t.trim():t,this.commentButton.classList.toggle("empty",!t),this.commentButton.classList.toggle("invalid",!!e)}_setCommentButtonHandler(){this.commentButton.addEventListener("click",t=>{this._isCommentModalShown(this.linkedQuestion)?this._hideCommentModal(this.linkedQuestion):this._showCommentModal(),t.preventDefault(),t.stopPropagation()})}_setValidationHandler(){this.element.closest("form.or").addEventListener(C.ValidationComplete().type,()=>{const t=this._commentHasError(),e=this.originalInputValue;this._setCommentButtonState(e,t)})}_setFocusHandler(){s()(this.element).on("applyfocus",()=>{this.commentButton.matches(":visible")?this.commentButton.click():console.log(`The linked question is not visible. Cannot apply focus to ${this.element.getAttribute("name")}`)})}_isCommentModalShown(t){return!!t.querySelector(".or-comment-widget")}_showCommentModal(){const t=this.question.cloneNode(!0),e=Object(q.a)("widget.comment.update")||"Update",n=t.querySelector("input, textarea");t.classList.remove("hide"),n.classList.add("ignore"),n.removeAttribute("name data-for data-type-xml");const i=document.createRange().createContextualFragment(`<section class="widget or-comment-widget">\n                <div class="or-comment-widget__content">\n                    <button class="btn btn-primary or-comment-widget__content__btn-update" type="button">${e}</button>\n                    <button class="btn-icon-only or-comment-widget__content__btn-close-x" type="button">&times;</button>\n                </div>\n            </section>\n            `);i.querySelector(".or-comment-widget__content").prepend(t);const r=document.createRange().createContextualFragment('<div class="or-comment-widget__overlay"></div>');this.linkedQuestion.prepend(i),this.linkedQuestion.before(r);const o=this.linkedQuestion.previousElementSibling,a=this.linkedQuestion.querySelector(".or-comment-widget"),u=a.querySelector(".or-comment-widget__content__btn-update"),l=a.querySelector(".or-comment-widget__content__btn-close-x");n.focus(),a.scrollIntoView(!1),u.addEventListener("click",t=>{const e=n.value;this.originalInputValue=e,this.element.dispatchEvent(C.Change());const i=this._commentHasError();this._setCommentButtonState(e,i),this._hideCommentModal(this.linkedQuestion),this.options.helpers.input.validate(s()(this.linkedQuestion.querySelector("input, select, textarea"))),t.preventDefault(),t.stopPropagation()}),l.addEventListener("click",t=>{this._hideCommentModal(this.linkedQuestion),t.stopPropagation(),t.preventDefault()}),o.addEventListener("click",t=>{this._hideCommentModal(this.linkedQuestion),t.stopPropagation(),t.preventDefault()})}_hideCommentModal(t){t.querySelector(".or-comment-widget").remove();const e=t.previousElementSibling;e&&e.matches(".or-comment-widget__overlay")&&e.remove()}};var Vt=class extends X{static get selector(){return".simple-select.or-appearance-image-map label:first-child > input"}_init(){const t=this.question.querySelector("img");if(this.question.classList.add("or-image-map-initialized"),t)return t.getAttribute("src")?this._addMarkup(t).then(this._addFunctionality.bind(this)).then(()=>this):new Promise(e=>{t.addEventListener("load",()=>{this._addMarkup(t).then(this._addFunctionality.bind(this)),e(this)})});this._showSvgNotFoundError()}_addFunctionality(t){t&&(this.svg=t.querySelector("svg"),this.tooltip=t.querySelector(".image-map__ui__tooltip"),this.props.readonly&&this.disable(),this._setSvgClickHandler(),this._setChangeHandler(),this._setHoverHandler(),this._updateImage())}_addMarkup(t){const e=this,n=t.getAttribute("src");return fetch(n).then(t=>t.text()).then(t=>(new DOMParser).parseFromString(t,"text/xml")).then(t=>{if(e._isSvgDoc(t)){const n=e._removeUnmatchedIds(t.querySelector("svg")),i=document.createRange().createContextualFragment('<div class="widget image-map">\n                            <div class="image-map__ui">\n                                <span class="image-map__ui__tooltip"></span>\n                            </div>\n                        </div>');i.querySelector(".widget").append(n),e.question.querySelectorAll("img").forEach(t=>t.remove()),e.question.querySelector(".option-wrapper").before(i);const r=e.question.querySelector(".image-map"),o=r.querySelector("svg");let a={};try{a=o.getBBox()}catch(t){console.error("Could not obtain Boundary Box of SVG element",t)}const s=a.width||o.getAttribute("width"),u=a.height||o.getAttribute("height");return o.setAttribute("viewBox",[0,0,parseInt(s,10),parseInt(u,10)].join(" ")),r}throw"Image is not an SVG doc"}).catch(this._showSvgNotFoundError.bind(e))}_showSvgNotFoundError(t){console.error(t);const e=document.createRange().createContextualFragment(`<div class="widget image-map">\n                <div class="image-map__error" data-i18n="imagemap.svgNotFound">${Object(q.a)("imagemap.svgNotFound")}</div>\n            </div>`);this.question.querySelector(".option-wrapper").before(e)}_removeUnmatchedIds(t){return t.querySelectorAll("path[id], g[id]").forEach(t=>{this._getInput(t.id)||t.removeAttribute("id")}),t}_getInput(t){return this.question.querySelector(`input[value="${t}"]`)}_setSvgClickHandler(){this.svg.addEventListener("click",t=>{if(!t.target.closest("svg").matches("[or-readonly]")&&t.target.matches("path[id], g[id]")){const e=t.target.id||t.target.closest("g[id]").id,n=this._getInput(e);n&&(n.checked=!n.checked,n.dispatchEvent(C.Change()),n.dispatchEvent(C.FakeFocus()))}})}_setChangeHandler(){this.question.addEventListener("change",this._updateImage.bind(this))}_setHoverHandler(){this.svg.querySelectorAll("path[id], g[id]").forEach(t=>{t.addEventListener("mouseenter",t=>{const e=t.target.id||t.target.closest("g[id]").id,n=l(this._getInput(e),".option-label.active"),i=n&&n.length?n[0].textContent:"";this.tooltip.textContent=i}),t.addEventListener("mouseleave",t=>{t.target.matches("path[id], g[id]")&&(this.tooltip.textContent="")})})}_isSvgDoc(t){return"object"==typeof t&&t.querySelector("svg")}_updateImage(){let t=this.originalInputValue;this.svg.querySelectorAll("path[or-selected], g[or-selected]").forEach(t=>t.removeAttribute("or-selected")),"string"==typeof t&&(t=[t]),t.forEach(t=>{t&&this.svg.querySelectorAll(`path#${t},g#${t}`).forEach(t=>t.setAttribute("or-selected",""))})}disable(){this.svg.setAttribute("or-readonly","")}enable(){this.svg.removeAttribute("or-readonly")}update(){this._updateImage()}get value(){return this.originalInputValue}set value(t){this.originalInputValue=t}},Ht=n(104),Wt=n.n(Ht);const Zt=[class{},ut,lt,pt,$t,Et,class{},kt,Lt,Ct,Tt,St,Dt,Mt,It,jt,class{},qt,Ut,Bt,zt,Vt,Ft,class extends X{static get selector(){return".question input.rank"}static get list(){return!0}_init(){const t=this,e=this.originalInputValue,n=nt.touch?Object(q.a)("rankwidget.tapstart"):Object(q.a)("rankwidget.clickstart");this.itemSelector="label:not(.itemset-template)",this.list=s()(this.element).next(".option-wrapper").addClass("widget rank-widget")[0],s()(this.list).toggleClass("rank-widget--empty",!e).append(this.resetButtonHtml).append(`<div class="rank-widget__overlay"><span class="rank-widget__overlay__content" data-i18n="rankwidget.clickstart">${n}</span></div>`).on("click",(function(){t.element.disabled||(this.classList.remove("rank-widget--empty"),t.originalInputValue=t.value,t.element.dispatchEvent(C.FakeFocus()))})),this.list.querySelector(".btn-reset").addEventListener("click",t=>{this._reset(),t.stopPropagation()}),this.element.classList.add("hide"),this.value=e,Wt()(this.list,{items:this.itemSelector,containerSerializer:e=>({value:[].slice.call(e.node.querySelectorAll(`${t.itemSelector} input`)).map(t=>t.value).join(" ")})})[0].addEventListener("sortupdate",()=>{this.originalInputValue=this.value,this.element.dispatchEvent(C.FakeFocus())}),this.props.readonly&&this.disable()}_reset(){this.originalInputValue=""}get value(){return Wt()(this.list,"serialize")[0].container.value}set value(t){if(!t)return this._reset();const e=this,n=t.split(" "),i=[...this.list.querySelectorAll(`${this.itemSelector} input`)];if(n.length!==i.length)throw new Error("Could not load rank widget value. Number of items mismatch.");i.sort((t,e)=>{const i=n.indexOf(t.value),r=n.indexOf(e.value);if(-1===i||-1===r)throw new Error("Could not load rank widget value. Mismatch in item values.");return i-r}),i.forEach(t=>{s()(e.list).find(".btn-reset").before(s()(t.parentNode).detach())})}disable(){s()(this.element).prop("disabled",!0).next(".widget").find("input, button").prop("disabled",!0),Wt()(this.list,"disable")}enable(){s()(this.element).prop("disabled",!1).next(".widget").find("input, button").prop("disabled",!1),Wt()(this.list,"enable")}update(){const t=this.element.value;Wt()(this.list),t?(this.value=t,this.originalInputValue=t):this._reset()}get originalInputValue(){return super.originalInputValue}set originalInputValue(t){super.originalInputValue=t,this.list.classList.toggle("rank-widget--empty",!t)}},class extends X{static get selector(){return'.or-appearance-url input[type="text"]'}_init(){const t=document.createRange().createContextualFragment('<a class="widget url-widget" target="_blank" rel="noopener"/>');this.element.classList.add("hide"),this.element.after(t),this.value=this.originalInputValue}update(){this.value=this.originalInputValue}get value(){return this.question.querySelector(".url-widget").href}set value(t){t=t||"";const e=this.question.querySelector(".url-widget");e.href=t,e.title=t,e.textContent=t}},class extends X{static get selector(){return'[data-type-xml="string"]'}_init(){const t=Number(_.textMaxChars);!isNaN(t)&&t>0&&this.element.setAttribute("maxlength",_.textMaxChars)}},class extends X{static get selector(){return' .question input[type="date"], .question input[type="datetime-local"], .question input[type="time"]'}static condition(t){return!g.has(t,"DatepickerExtended")&&!g.has(t,"DatetimepickerExtended")&&!g.has(t,"TimepickerExtended")&&Q.ios}_init(){console.log("Adding iOS readonly date/time/datetime picker workaround."),this.element.addEventListener("focus",()=>{this.element.readOnly&&this.element.blur()})}},class extends X{static get selector(){return'.or-appearance-rating input[type="number"]'}_init(){const t=document.createRange().createContextualFragment(this._getHtmlStr());this.element.after(t),this.element.classList.add("hide"),this.widget=this.question.querySelector(".widget");let e="",n=Math.random().toString(36).substring(2,15);for(let t=this.props.min;t<=this.props.max;t+=this.props.step)e+=`<input type=radio name="rating-stars__${n}" class="rating-widget__rating__star ignore" value="${t}"/>`;this.widget.querySelector(".rating-widget__rating").append(document.createRange().createContextualFragment(e)),this.rating=this.widget.querySelector(".rating-widget__rating"),this.stars=this.rating.querySelectorAll(".rating-widget__rating__star"),this.stars.forEach(t=>{t.addEventListener("change",()=>{const t=this.rating.querySelector("input:checked");(this.value!=t.value||this.rating.classList.contains("empty"))&&(this.value=t.value)})}),this.update(),this.props.readonly&&this.disable()}_getHtmlStr(){return'<div class="widget rating-widget">\n                \t<div class="rating-widget__rating empty"></div>\n            \t</div>'}disable(){this.stars.forEach(t=>t.disabled=!0)}enable(){this.stars.forEach(t=>t.disabled=!1)}update(){const t=this.element.value;Object(o.d)(t)?this.stars.forEach(e=>{e.value===t&&(e.checked=!0,e.dispatchEvent(C.Change()))}):this._reset()}_reset(){const t=this.rating.querySelector("input:checked");t&&(this.value="",t.checked=!1)}get props(){const t=this._props,e=Object(o.d)(this.element.getAttribute("min"))?this.element.getAttribute("min"):0,n=Object(o.d)(this.element.getAttribute("max"))?this.element.getAttribute("max"):10,i=Object(o.d)(this.element.getAttribute("step"))?this.element.getAttribute("step"):1;return t.min=Number(e),t.max=Number(n),t.step=Number(i),t}get value(){return this.originalInputValue}set value(t){this.originalInputValue=t,this.rating.classList.toggle("empty",""===t)}},class extends X{static get selector(){return".question:not(.or-appearance-autocomplete):not(.or-appearance-url) > input[type=text]:not(.ignore):not([data-for])"}_init(){this.question.classList.add("or-text-print-initialized");const t=document.createElement("div");t.classList.add("print-input-text"),t.classList.add("print-only"),""!==getComputedStyle(this.element).order&&(t.style.order=parseInt(getComputedStyle(this.element).order,10)+1),this.element.after(t),this.widget=this.element.parentElement.querySelector(".print-input-text"),this._copyValue(),this.element.addEventListener("input",()=>{this._copyValue()})}_copyValue(){this.widget.innerHTML=this.element.value.replace(/\n/g,"<br>")}update(){this._copyValue()}},class extends X{static get selector(){return'.or-appearance-thousands-sep input[type="number"]'}_init(){const t=document.createRange().createContextualFragment('<div class="widget "></div>');this.element.after(t),this.widget=this.element.parentElement.querySelector(".widget"),this.update(),this.element.addEventListener("change",this.update.bind(this))}update(){this.value=this.originalInputValue}get value(){return this.widget.textContent}set value(t){let e="";Object(o.d)(t)&&(e=Number(t).toLocaleString(void 0,{maximumFractionDigits:20})),this.widget.textContent=e}}].filter(t=>t.selector);let Gt,Yt;function Xt(t,e){return e?"form"===e?[Yt]:t.classList.contains("question")?[...t.querySelectorAll("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)")].filter(t=>t.matches(e)):[...t.querySelectorAll(e)]:[]}class Kt{constructor(t){Array.isArray(t)||(t=[t]),this.elements=t}_instantiateSingleWidget(t,e,n={}){if(!e.condition(t))return;if(g.has(t,e))return;const i=new e(t,n);i instanceof Promise?i.then(n=>g.put(t,e.name,n)):g.put(t,e.name,i)}_methodCall(t,e){this.elements.forEach(n=>{const i=g.get(n,t.name);i&&i[e]()})}instantiate(t,e){this.elements.forEach(n=>this._instantiateSingleWidget(n,t,e))}update(t){this._methodCall(t,"update")}disable(t){this._methodCall(t,"disable")}enable(t){this._methodCall(t,"enable")}}var Jt={init:function(t,e={}){if(!this.form)throw new Error("Widgets module not correctly instantiated with form property.");Gt=e,Yt=this.form.view.html;const n=t&&t.length?t[0]:Yt;return Zt.forEach(t=>{!function(t,e){let n={};if(!t.name)return console.error("widget doesn't have a name");t.helpersRequired&&t.helpersRequired.length>0&&(n.helpers={},t.helpersRequired.forEach(t=>{n.helpers[t]=Gt[t]}));const i=Xt(e,t.selector);if(!i.length)return;new Kt(i).instantiate(t,n),function(t,e){e.length>0&&Yt.addEventListener(C.ChangeLanguage().type,()=>{new Kt(e).update(t)})}(t,i),function(t,e){e.length>0&&t.list&&s()(e).on("changeoption",(function(){new Kt(this).update(t)}))}(t,i),function(t,e){e.length>0&&e[0].matches("input, select, textarea")&&e.forEach(e=>e.addEventListener(C.InputUpdate().type,e=>{new Kt(e.target).update(t)}))}(t,i)}(t,n)}),!0},enable:function(t){Zt.forEach(e=>{const n=Xt(t,e.selector).filter(t=>"select"===t.nodeName.toLowerCase()?!t.getAttribute("readonly"):!t.readOnly);new Kt(n).enable(e)})},disable:function(t){Zt.forEach(e=>{const n=Xt(t,e.selector);new Kt(n).disable(e)})}},Qt={init(t){if(!this.form)throw new Error("Language module not correctly instantiated with form property.");const e=this.form.view.html.closest("body")||this.form.view.html.parentNode;if(!e)return;const n=e.querySelector(".form-language-selector"),i=this.form.view.html.querySelector("#form-languages");if(!i)return;const r=[...i.querySelectorAll("option")].map(t=>t.value);n&&(n.append(i),r.length>1&&n.classList.remove("hide")),this.formLanguages=e.querySelector("#form-languages"),t&&r.includes(t)?(this._currentLang=t,this.setUi(this._currentLang)):this._currentLang=this.formLanguages.dataset.defaultLang||r[0]||"";const o=this.formLanguages.querySelector(`[value="${this._currentLang}"]`),a=o&&o.dataset.dir||"ltr";this.formLanguages.value=this._currentLang,this.form.view.html.setAttribute("dir",a),r.length<2||(this.formLanguages.addEventListener(C.Change().type,t=>{t.preventDefault(),this._currentLang=t.target.value,this.setUi(this._currentLang)}),this.form.view.html.addEventListener(C.AddRepeat().type,t=>this.setUi(this._currentLang,t.target)))},get currentLang(){return this._currentLang},get currentLangDesc(){const t=this.formLanguages.querySelector(`[value="${this._currentLang}"]`);return t?t.textContent:null},setUi(t,e=this.form.view.html){const n=this.formLanguages.querySelector(`[value="${t}"]`).dataset.dir||"ltr",i=[...e.querySelectorAll("[lang]")];this.form.view.html.setAttribute("dir",n),i.forEach(t=>t.classList.remove("active")),i.filter(e=>e.matches(`[lang="${t}"], [lang=""]`)&&(!e.classList.contains("or-form-short")||e.classList.contains("or-form-short")&&0===l(e,".or-form-long").length)).forEach(t=>t.classList.add("active")),window.enketoFormLocale=t,this.form.view.html.querySelectorAll("select, datalist").forEach(t=>this.setSelect(t)),this.form.view.html.dispatchEvent(C.ChangeLanguage())},setSelect(t){const e=t.nodeName.toLowerCase(),n=t.closest(".question"),i=n?n.querySelector(".or-option-translations"):null;i&&[...t.children].filter(t=>t.matches("option")&&!t.matches('[value=""], [data-value=""]')).forEach(t=>{const n="datalist"===e?t.value:t.textContent,r="datalist"===e?t.dataset.value:t.value,o=i.querySelector(`.active[data-option-value="${r}"]`);let a=n;o&&o.textContent&&(a=o.textContent),t.value=r,t.textContent=a})}},te={init(){const t=this;if(!this.form)throw new Error("Preload module not correctly instantiated with form property.");this.form.view.$.find("input[data-preload], select[data-preload], textarea[data-preload]").each((function(){const e=s()(this),n=t.form.input.getProps(this),i=e.attr("data-preload").toLowerCase(),r=e.attr("data-preload-params").toLowerCase();if(void 0!==t[i]){const e=t.form.model.node(n.path,n.index);if(e.getElements().length){const o=e.getVal(),a=t[i]({param:r,curVal:o,dataNode:e});e.setVal(a,n.xmlType)}}else console.log(`Preload "${i}" not supported. May or may not be a big deal.`)}))},timestamp:function(t){let e;const n=this;return"start"===t.param?t.curVal.length>0?t.curVal:this.form.model.evaluate("now()","string"):"end"===t.param?(this.form.view.$.on("beforesave",()=>{e=n.form.model.evaluate("now()","string"),t.dataNode.setVal(e,"datetime")}),this.form.model.evaluate("now()","string")):"error - unknown timestamp parameter"},date:function(t){let e,n,i,r;return 0===t.curVal.length?(e=new Date(this.form.model.evaluate("today()","string")),n=e.getFullYear().toString().pad(4),i=(e.getMonth()+1).toString().pad(2),r=e.getDate().toString().pad(2),`${n}-${i}-${r}`):t.curVal},property:function(t){let e;return 0===t.curVal.length?(e=this.form.model.node(`instance("__session")/session/context/${t.param}`),e.getElements().length?e.getVal():`no ${t.param} property in enketo`):t.curVal},context:function(t){return 0===t.curVal.length?"application"===t.param?"enketo":`${t.param} not supported in enketo`:t.curVal},patient:function(t){return 0===t.curVal.length?"patient preload item not supported in enketo":t.curVal},user:function(t){return 0===t.curVal.length?"user preload item not supported in enketo yet":t.curVal},uid:function(t){return 0===t.curVal.length?this.form.model.evaluate('concat("uuid:", uuid())',"string"):t.curVal}},ee={update(t){const e={};let n="";const i=this;if(!this.form)throw new Error("Output module not correctly instantiated with form property.");const r=this.form.getRelatedNodes("data-value",".or-output",t),o=this.form.repeatsPresent&&this.form.view.html.querySelector(".or-repeat.clone");r.each((function(){const t=s()(this);if(t.closest(".or-branch").parent().closest(".disabled").length)return;const r=this.dataset.value;let a=this.closest(".question, .or-group");a.matches(".or-group")||(a=a.querySelector("[name]"));let u=i.form.input.getName(a);s()(a).children(`.or-repeat-info[data-name="${u}"]`).length&&!s()(a).children(`.or-repeat[name="${u}"]`).length&&(u=null);const l=o&&t.parentsUntil(".or",".or-repeat").length>0,c=l&&t.parentsUntil(".or",".or-repeat.clone").length>0&&u?i.form.input.getIndex(a):0;void 0!==e[r]?n=e[r]:(n=i.form.model.evaluate(r,"string",u,c,!0),l||(e[r]=n)),t.text()!==n&&t.text(n)}))}},ne={update(t={},e=""){let n;if(!this.form)throw new Error("Calculation module not correctly instantiated with form property.");n=t.relevantPath?this.form.getRelatedNodes("data-calculate",`[name^="${t.relevantPath}/"]${e}`).add(this.form.getRelatedNodes("data-calculate",`[name="${t.relevantPath}"]${e}`)).add(this.form.getRelatedNodes("data-calculate",`[data-name="${t.relevantPath}"]${e}`)).get():this.form.getRelatedNodes("data-calculate",e,t).get(),n.forEach(e=>{const n=this.form.input.getName(e),i=this.form.model.node(n),r=i.getElements(),o={name:n,expr:this.form.input.getCalculation(e),dataType:this.form.input.getXmlType(e),relevantExpr:this.form.input.getRelevant(e),index:0,dataNodesObj:i};if(r.length>1)if(t.repeatPath&&-1!==n.indexOf(t.repeatPath+"/")){const i=-1!==n.lastIndexOf("/")?n.substring(n.lastIndexOf("/")+1):n,a=this.form.model.node(t.repeatPath,t.repeatIndex).getElement().querySelector(i);o.index=r.indexOf(a),this._updateCalc(e,o)}else if("hidden"===e.type)r.forEach((t,n)=>{const i=Object.create(o);i.index=n,this._updateCalc(e,i)});else{const t=u(e.closest(".or-repeat"),".or-repeat");t.length===r.length&&(o.index=t.indexOf(e.closest(".or-repeat")),this._updateCalc(e,o))}else 1===r.length&&this._updateCalc(e,o)})},setValue(t){let e=!1;if(!t)return;if(!this.form)throw new Error("Setvalue module not correctly instantiated with form property.");let n=[];if(t.type===(new C.InstanceFirstLoad).type)e=!0,n=this.form.filterRadioCheckSiblings([...this.form.view.html.querySelectorAll(`[data-setvalue][data-event*="${t.type}"]`)]);else if(t.type===(new C.NewRepeat).type)n=this.form.getRelatedNodes("data-setvalue",`[data-event*="${t.type}"]`,t.detail).get();else if(t.type===(new C.XFormsValueChanged).type){const e=t.target.closest(".question"),i=e?e.querySelector(`[data-setvalue][data-event*="${t.type}"]`):null;i&&(n=[i])}n.forEach(n=>{const i=this.form.input.getName(n),r=this.form.model.node(i),o=r.getElements(),a={name:i,expr:n.dataset.setvalue,dataType:this.form.input.getXmlType(n),relevantExpr:this.form.input.getRelevant(n),index:t.detail&&void 0!==t.detail.repeatIndex?t.detail.repeatIndex:0,dataNodesObj:r};o.length>1&&t.type!==(new C.NewRepeat).type&&t.type!==(new C.XFormsValueChanged).type?o.forEach((t,i)=>{const r=Object.create(a);r.index=i,this._updateCalc(n,r,e)}):o[0]?this._updateCalc(n,a,e):console.error("SetValue called for node that does not exist in model.")})},_updateCalc(t,e,n=!1){let i=!0;n||(i=this._isRelevant(e));const r=this.form.replaceChoiceNameFn(e.expr,"string",e.name,e.index),o="number"===this.form.input.getInputType(t)?"number":"string",a=i&&r?this.form.model.evaluate(r,o,e.name,e.index):"";e.dataNodesObj.setIndex(e.index),e.dataNodesObj.setVal(a,e.dataType),this.form.input.setVal(t,e.dataNodesObj.getVal()),"hidden"!==t.type&&!0===_.validateContinuously&&this.form.validateInput(t)},_isRelevant(t){let e=!t.relevantExpr||this.form.model.evaluate(t.relevantExpr,"boolean",t.name,t.index);if(e){const n=t.name.split("/"),i=n.splice(0,n.length-1).join("/");let r;r=0===t.index?this.form.view.html.querySelector(`.or-group[name="${i}"],.or-group-data[name="${i}"]`):this.form.view.html.querySelectorAll(`.or-repeat[name="${i}"]`)[t.index]||this.form.view.html.querySelectorAll(`.or-group[name="${i}"],.or-group-data[name="${i}"]`)[t.index];const o=r?[r].concat(h(r,".or-group, .or-group-data")):[];o.length&&(e=o.filter(t=>t.matches("[data-relevant]")).map(t=>{const e=this.form.input.getName(t);return{context:e,index:[...this.form.view.html.querySelectorAll(`.or-group[name="${e}"], .or-group-data[name="${e}"]`)].indexOf(t),expr:this.form.input.getRelevant(t)}}).concat([{context:t.name,index:t.index,expr:t.relevantExpr}]).every(t=>!t.expr||this.form.model.evaluate(t.expr,"boolean",t.context,t.index)))}return e}},ie={update(t){const e=this,n={};if(!this.form)throw new Error("Required module not correctly instantiated with form property.");const i=this.form.getRelatedNodes("data-required","",t),r=this.form.repeatsPresent&&this.form.view.html.querySelector(".or-repeat.clone");i.each((function(){const t=s()(this),i=e.form.input.getRequired(this),o=e.form.input.getName(this),a=r?e.form.input.getIndex(this):0,u=`${i}__${o.substring(0,o.lastIndexOf("/"))}__${a}`;void 0===n[u]&&(n[u]=e.form.model.node(o,a).isRequired(i)),t.closest(".question").find(".required").toggleClass("hide",!n[u])}))}};function re(t,e,n){s()(t).on("keydown",t=>!(!function(t){return t.key.length>1&&"Spacebar"!==t.key}(t)&&!function(t){return-1!=="xvc".indexOf(t.key)&&(t.metaKey||t.ctrlKey)}(t)&&-1===n.indexOf(t.key))).on("paste",(function(t){const n=Object(o.c)(t);return!(!n||!e.test(n.trim()))||(s()(this).val("").trigger("change"),!1)})).on("blur",(function(){void 0!==this.validity&&void 0!==this.validity.badInput&&this.validity.badInput?this.value="":void 0===this.validity.badInput&&this.value&&!e.test(this.value.trim())&&(this.value="")}))}var oe={init:function(){re('[data-type-xml="int"]',/^(-?[0-9]+$)/,"-0123456789"),re('[data-type-xml="decimal"]',/^(-?[0-9]+[.,]?[0-9]*$)/,"-0123456789.,")}},ae={update(t){this.form.getRelatedNodes("readonly","",t).each((function(){s()(this).closest(".question").addClass("readonly"),this.value||this.dataset.calculate||this.classList.contains("readonly-forced")||this.classList.add("empty")}))}};function se(t,e,n){const i=s()(t);this.nonRepeats={},this.all={},this.options="object"!=typeof n?{}:n,void 0===this.options.clearIrrelevantImmediately&&(this.options.clearIrrelevantImmediately=!0),this.view={$:i,html:i[0],$clone:i.clone()},this.model=new R(e),this.repeatsPresent=!!this.view.html.querySelector(".or-repeat"),this.widgetsInitialized=!1,this.repeatsInitialized=!1,this.pageNavigationBlocked=!1,this.initialized=!1}s.a.fn.clearInputs=function(t,e){return t=t||"edit",e=e||"",this.each((function(){s()(this).find(".file-preview").remove(),s()(this).find("input, select, textarea").not(".ignore").each((function(){const n=s()(this);let i,r=n.attr("type");switch("SELECT"===n.prop("nodeName").toUpperCase()&&(r="select"),"TEXTAREA"===n.prop("nodeName").toUpperCase()&&(r="textarea"),r){case"file":i=this.dataset.loadedFileName,delete this.dataset.loadedFileName;case"date":case"datetime-local":case"month":case"time":case"number":case"search":case"color":case"range":case"url":case"email":case"password":case"text":case"tel":case"hidden":case"textarea":(""!==n.val()||i)&&n.val("").trigger(t).trigger(e);break;case"radio":case"checkbox":n.prop("checked")&&(n.prop("checked",!1),n.trigger(t).trigger(e));break;case"select":n[0].selectedIndex>0&&(n[0].selectedIndex=0,n.trigger(t).trigger(e));break;default:console.error("Unrecognized input type found when trying to reset",this)}}))}))},s.a.fn.reverse=[].reverse,n.d(e,"a",(function(){return se})),n.d(e,"b",(function(){return R})),se.prototype={evaluationCascadeAdditions:[],get evaluationCascade(){return[this.calc.update.bind(this.calc),this.repeats.countUpdate.bind(this.repeats),this.relevant.update.bind(this.relevant),this.output.update.bind(this.output),this.itemset.update.bind(this.itemset),this.required.update.bind(this.required),this.readonly.update.bind(this.readonly),this.validationUpdate].concat(this.evaluationCascadeAdditions)},get recordName(){return this.view.$.attr("name")},set recordName(t){this.view.$.attr("name",t)},get editStatus(){return"true"===this.view.html.dataset.edited},set editStatus(t){t&&t!==this.editStatus&&this.view.html.dispatchEvent(C.Edited()),this.view.html.dataset.edited=t},get surveyName(){return this.view.$.find("#form-title").text()},get instanceID(){return this.model.instanceID},get deprecatedID(){return this.model.deprecatedID},get instanceName(){return this.model.instanceName},get version(){return this.model.version},get encryptionKey(){return this.view.$.data("base64rsapublickey")},get action(){return this.view.$.attr("action")},get method(){return this.view.$.attr("method")},get id(){return this.view.html.id}},se.prototype.addModule=function(t){return Object.create(t,{form:{value:this}})},se.prototype.init=function(){let t=[];const e=this;if(this.toc=this.addModule(V),this.pages=this.addModule(H),this.langs=this.addModule(Qt),this.progress=this.addModule(G),this.widgets=this.addModule(Jt),this.preloads=this.addModule(te),this.relevant=this.addModule(W),this.repeats=this.addModule(z),this.input=this.addModule(F),this.output=this.addModule(ee),this.itemset=this.addModule(Z),this.calc=this.addModule(ne),this.required=this.addModule(ie),this.mask=this.addModule(oe),this.readonly=this.addModule(ae),this.model.events.addEventListener(C.InstanceFirstLoad().type,t=>this.calc.setValue(t)),this.view.html.addEventListener(C.NewRepeat().type,t=>this.calc.setValue(t)),this.view.html.addEventListener(C.XFormsValueChanged().type,t=>this.calc.setValue(t)),t=t.concat(this.model.init()),void 0===this.model||!(this.model instanceof R))return t.push("Form could not be initialized without a model."),t;this.model.events.addEventListener(C.DataUpdate().type,t=>{e.view.html.dispatchEvent(C.DataUpdate(t.detail))}),this.model.events.addEventListener(C.Removed().type,t=>{e.view.html.dispatchEvent(C.Removed(t.detail))});try{this.preloads.init(),this.view.$.data({instanceID:this.model.instanceID}),this.grosslyViolateStandardComplianceByIgnoringCertainCalcs(),this.calc.update(),this.langs.init(this.options.language),this.pages.init();const n=t=>this.calc.update(t.detail);return this.view.html.addEventListener(C.AddRepeat().type,n),this.repeatsInitialized=!0,this.repeats.init(),this.view.html.removeEventListener(C.AddRepeat().type,n),this.output.update(),this.itemset.update(),this.setAllVals(),this.readonly.update(),this.options.input=this.input,this.options.pathToAbsolute=this.pathToAbsolute.bind(this),this.options.evaluate=this.model.evaluate.bind(this.model),this.options.formClasses=Object(o.i)(this.view.html.classList),this.options.getModelValue=this.getModelValue.bind(this),this.widgetsInitialized=this.widgets.init(null,this.options),this.relevant.update(),this.setEventHandlers(),this.calc.update(),this.required.update(),this.mask.init(),this.editStatus=!1,!1!==this.options.printRelevantOnly&&this.view.$.addClass("print-relevant-only"),setTimeout(()=>{e.progress.update()},0),this.initialized=!0,t}catch(e){console.error(e),t.push(`${e.name}: ${e.message}`)}return document.querySelector("body").scrollIntoView(),console.debug("loadErrors",t),t},se.prototype.goTo=function(t){const e=[];return this.goToTarget(this.getGoToTarget(t))||e.push(Object(q.a)("alert.gotonotfound.msg",{path:location.hash.substring(1)})),e},se.prototype.getDataStr=function(t){return!1===(t="object"!=typeof t||null===t?{}:t).irrelevant?this.getDataStrWithoutIrrelevantNodes():this.model.getStr()},se.prototype.resetView=function(){s()("#form-languages").remove(),this.view.$.replaceWith(this.view.$clone)},se.prototype.replaceChoiceNameFn=function(t,e,n,i,r){const a=this;return Object(o.e)(t,"jr:choice-name").forEach(u=>{const l=u[1];if(2!==l.length)throw new y(`jr:choice-name function has incorrect number of parameters: ${u[0]}`);{let c="";const h=a.model.evaluate(l[0],e,n,i,r),d=Object(o.h)(l[1]).trim(),p=a.view.$.find(`[name="${d}"]`);h?p.length>0&&"select"===p.prop("nodeName").toLowerCase()?c=p.find(`[value="${h}"]`).text():p.length>0&&"input"===p.prop("nodeName").toLowerCase()&&(c=p.attr("list")?p.siblings(`datalist#${p.attr("list")}`).find(`[data-value="${h}"]`).attr("value"):p.filter((function(){return s()(this).attr("value")===h})).siblings(".option-label.active").text()):c="",t=t.replace(u[0],`"${c}"`)}}),t},se.prototype.setAllVals=function(t,e){const n=this,i=t&&t.attr("name")?t.attr("name"):null;e=void 0!==e?e:null,this.model.node(i,e).getElements().reduce((t,e)=>{const n=[...e.querySelectorAll("*")].filter(t=>0===t.children.length&&t.textContent);return t.concat(n)},[]).forEach(t=>{try{var e=t.textContent,i=f(t,"instance");const r=n.model.node(i).getElements().indexOf(t),o=n.input.find(i,r);o&&(n.input.setVal(o,e,null),"binary"===n.input.getXmlType(o)&&e.startsWith("jr://")&&t.getAttribute("src")&&o.setAttribute("data-loaded-url",t.getAttribute("src")))}catch(t){throw console.error(t),new Error(`Could not load input field value with name: ${i} and value: ${e}`)}})},se.prototype.getModelValue=function(t){const e=t[0],n=this.input.getName(e),i=this.input.getIndex(e);return this.model.node(n,i).getVal()},se.prototype.getRelatedNodes=function(t,e,n){let i,r,o=null,a=[];const u=this;if(n=n||{},e=e||"",this.nonRepeats[t]||(r=[...this.view.html.querySelectorAll(`:not(.or-repeat-info)[${t}]`)].filter(t=>!t.closest(".or-repeat")),this.nonRepeats[t]=this.filterRadioCheckSiblings(r)),void 0!==n.repeatPath&&n.repeatIndex>=0){const e=[...this.view.html.querySelectorAll(`.or-repeat[name="${n.repeatPath}"]`)][n.repeatIndex];r=e?[...e.querySelectorAll(`[${t}]`)]:[],o=this.filterRadioCheckSiblings(r)}!this.all[t]||n.repeatPath&&!n.cloned?this.all[t]=this.repeatsInitialized?this.filterRadioCheckSiblings([...this.view.html.querySelectorAll(`[${t}]`)]):this.nonRepeats[t]:n.cloned&&o&&(this.all[t]=this.all[t].concat(o)),i=o?this.nonRepeats[t].concat(o):this.all[t],n.nodes&&0!==n.nodes.length?(n.nodes.forEach(n=>{a=a.concat(u.getQuerySelectorsForLogic(e,t,n))}),a=a.concat(u.getQuerySelectorsForLogic(e,t,"*"))):a=a.concat([e]);const l=a.join(", ");return i=l?i.filter(t=>t.matches(l)):i,s()(i)},se.prototype.filterRadioCheckSiblings=t=>{const e=[];return t.filter(t=>{const n="radio"===t.type||"checkbox"===t.type?d(t,".option-wrapper",".question"):null;if(n){if(-1!==e.indexOf(n))return!1;e.push(n)}return!0})},se.prototype.getQuerySelectorsForLogic=(t,e,n)=>[`${t}[${e}*="/${n} "]`,`${t}[${e}*="/${n})"]`,`${t}[${e}*="/${n},"]`,`${t}[${e}$="/${n}"]`,`${t}[${e}*="/${n}]"]`,`${t}[${e}*="/${n}["]`],se.prototype.getDataStrWithoutIrrelevantNodes=function(){const t=this,e=new R(this.model.getStr());return e.init(),this.getRelatedNodes("data-relevant").reverse().each((function(){const n=s()(this),i=t.input.getRelevant(this),r=t.input.getIndex(this),o=t.input.getName(this);let a;a=n.children(`.or-repeat-info[data-name="${o}"]`).length&&!n.children(`.or-repeat[name="${o}"]`).length?null:o,a&&!t.model.evaluate(i,"boolean",a,r)&&e.node(a,r).remove()})),e.getStr()},se.prototype.grosslyViolateStandardComplianceByIgnoringCertainCalcs=function(){const t=this.view.$.find('[name$="instanceID"][data-calculate]');t.length>0&&t.removeAttr("data-calculate")},se.prototype.validationUpdate=function(t){let e;const n=this;let i;!0===_.validateContinuously&&(i=t||{},t.cloned&&(i={nodes:t.repeatPath.split("/").reverse().slice(0,1)}),e=this.getRelatedNodes("data-constraint","",i).add(this.getRelatedNodes("data-required","",i)),e.each((function(){n.validateInput(this)})))},se.prototype.setEventHandlers=function(){const t=this;this.view.$.attr("onsubmit","return false;"),this.view.$.on("change.file","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",(function(){const e=this,n={path:t.input.getName(e),inputType:t.input.getInputType(e),xmlType:t.input.getXmlType(e),val:t.input.getVal(e),index:t.input.getIndex(e)};n.val.length>0&&"file"===n.inputType&&e.files[0]&&e.files[0].size>0&&(n.val=Object(o.b)(e.files[0],e.dataset.filenamePostfix)),n.val.length>0&&"drawing"===n.inputType&&(n.val=Object(o.b)({name:n.val},e.dataset.filenamePostfix)),t.model.node(n.path,n.index).setVal(n.val,n.xmlType)&&t.validateInput(e).then(()=>{e.dispatchEvent(C.XFormsValueChanged({repeatIndex:n.index}))})})),this.view.html.addEventListener("focusin",t=>{this.progress.update(t.target)}),this.view.html.addEventListener(C.FakeFocus().type,t=>{this.progress.update(t.target)}),this.model.events.addEventListener(C.DataUpdate().type,e=>{t.evaluationCascade.forEach(n=>{n.call(t,e.detail)},!0),t.editStatus=!0}),this.view.html.addEventListener(C.AddRepeat().type,e=>{const n=s()(e.target);this.setAllVals(n,e.detail.repeatIndex),this.evaluationCascade.forEach(n=>{n.call(t,e.detail)}),this.progress.update()}),this.view.html.addEventListener(C.RemoveRepeat().type,()=>{this.progress.update()}),this.view.html.addEventListener(C.ChangeLanguage().type,()=>{this.output.update()}),this.view.$.find(".or-group > h4").on("click",(function(){s()(this).closest(".or-group").toggleClass("or-appearance-compact").trigger("resize")}))},se.prototype.setValid=function(t,e){const n=e?[`invalid-${e}`]:["invalid-constraint","invalid-required","invalid-relevant"];this.input.getWrapNode(t).classList.remove(...n)},se.prototype.setInvalid=function(t,e){e=e||"constraint",!1===_.validatePage&&this.isValid(t)&&this.blockPageNavigation(),this.input.getWrapNode(t).classList.add(`invalid-${e}`)},se.prototype.blockPageNavigation=function(){const t=this;this.pageNavigationBlocked=!0,window.clearTimeout(this.blockPageNavigationTimeout),this.blockPageNavigationTimeout=window.setTimeout(()=>{t.pageNavigationBlocked=!1},600)},se.prototype.isValid=function(t){if(t){const e=this.input.getWrapNode(t).classList;return!e.contains("invalid-required")&&!e.contains("invalid-constraint")&&!e.contains("invalid-relevant")}return null===this.view.html.querySelector(".invalid-required, .invalid-constraint, .invalid-relevant")},se.prototype.clearIrrelevant=function(){this.relevant.update(null,!0)},se.prototype.validateAll=function(){const t=this;return!1===this.options.clearIrrelevantImmediately&&this.clearIrrelevant(),this.validateContent(this.view.$).then(e=>(t.view.html.dispatchEvent(C.ValidationComplete()),e))},se.prototype.validate=se.prototype.validateAll,se.prototype.validateContent=function(t){let e;const n=this;t.find("fieldset:disabled input, fieldset:disabled select, fieldset:disabled textarea, input:disabled, select:disabled, textarea:disabled").each((function(){n.setValid(this)}));const i=t.find(".question").addBack(".question").map((function(){const t=this.querySelector("input:not(.ignore):not(:disabled), select:not(.ignore):not(:disabled), textarea:not(.ignore):not(:disabled)");return t?n.validateInput(t):Promise.resolve()})).toArray();return Promise.all(i).then(()=>(e=t.find(".invalid-required, .invalid-constraint, .invalid-relevant").addBack(".invalid-required, .invalid-constraint, .invalid-relevant").eq(0),e.length>0&&n.goToTarget(e[0]),0===e.length)).catch(()=>!1)},se.prototype.pathToAbsolute=function(t,e){let n;return 0===t.indexOf("/")?t:(n=this.model.evaluate(t,"node",e,0,!0),f(n,"instance",!1))},se.prototype.validateInput=function(t){if(!this.initialized)return Promise.resolve();const e=this;let n;const i={path:this.input.getName(t),inputType:this.input.getInputType(t),xmlType:this.input.getXmlType(t),enabled:this.input.isEnabled(t),constraint:this.input.getConstraint(t),calculation:this.input.getCalculation(t),required:this.input.getRequired(t),readonly:this.input.getReadonly(t),val:this.input.getVal(t)};return!i.readonly||i.val||i.required||i.constraint||i.calculation?(i.enabled&&"hidden"!==i.inputType?(i.ind=this.input.getIndex(t),n=this.model.node(i.path,i.ind).validate(i.constraint,i.required,i.xmlType)):n=Promise.resolve({requiredValid:!0,constraintValid:!0}),n.then(n=>{let r=!1;const o=!1!==n.requiredValid&&!1!==n.constraintValid;return"hidden"!==i.inputType&&(i.q=e.input.getWrapNode(t),r=i.q.classList.contains("invalid-required")||i.q.classList.contains("invalid-constraint"),!1===n.requiredValid?(e.setValid(t,"constraint"),e.setInvalid(t,"required")):!1===n.constraintValid?(e.setValid(t,"required"),e.setInvalid(t,"constraint")):(e.setValid(t,"constraint"),e.setValid(t,"required"))),o||r||t.dispatchEvent(C.Invalidated()),o}).catch(n=>{throw console.error("validation error",n),e.setInvalid(t,"constraint"),n})):Promise.resolve()},se.prototype.getGoToTarget=function(t){let e,n,i,r,o="";const a=/([^[]+)\[(\d+)\]([^[]*$)?/g;if(t&&(n=this.model.node(t).getElement(),n)){if(t=f(n,"instance",!0),i=this.view.html.querySelector(`[name="${t}"]`),!i)for(r=this.view.html;null!==(e=a.exec(t))&&r;)o+=e[1],r=r.querySelectorAll(`[name="${o}"], [data-name="${o}"]`)[e[2]],r&&e[3]&&(o+=e[3],r=r.querySelector(`[name="${o}"],[data-name="${o}"]`)),i=r;return i?this.input.getWrapNode(i):i}},se.prototype.goToTarget=function(t){if(t){this.pages.active&&this.pages.flipToPageContaining(s()(t)),t.closest(".or-branch.disabled")&&t.dispatchEvent(C.GoToHidden()),t.scrollIntoView();const e=t.querySelector("input:not(.ignore), textarea:not(.ignore), select:not(.ignore)");e.focus(),e.dispatchEvent(C.ApplyFocus())}return!!t},se.requiredTransformerVersion="1.38.1"},function(t,e,n){var i=n(522),r=n(523),o=n(524);n(307),t.exports=function(){var t,e,n,a,s,u,l,c,h,d,p,f,m,g,v,y,_,b,w=[],x="http://www.w3.org/XML/1998/namespace",$=function(t){var e=[],n=function(t,e){var n,i,r=[];for(i=0;i<t.length;i++)n=t.item(i),!1!==U(n.nodeType,e)&&r.push(n);return r};switch(t.nodeType){case 1:e=n(t.childNodes,[1,3,4,7,8]);break;case 9:e=n(t.childNodes,[1,7,8]);break;case 2:case 3:case 4:case 7:case 8:case 13:break;default:throw new Error("Internal Error: nodeChildren - unsupported node type: "+t.nodeType)}return e},E=function(t){var e,n,i=[];for(e=$(t),n=0;n<e.length;n++)i.push(e[n]),i.push.apply(i,E(e[n]));return i},k=function(t){switch(t.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:return t.parentNode;case 2:return t.ownerElement?t.ownerElement:R(t.ownerDocument,!0,(function(e,n){if(n===t)return!0}));case 13:return t.ownerElement;default:throw new Error("Internal Error: nodeParent - node type not supported: "+t.type)}},L=function(t){for(var e,n=[];e=k(t);)n.push(e),t=e;return n},C=function(t){return S(t,"nextSibling")},T=function(t){return S(t,"previousSibling")},S=function(t,e){for(var n,i=[];n=t[e];){switch(n.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:i.push(n)}t=n}return i},D=function(t){switch(t.nodeType){case 9:return t;default:return t.ownerDocument}},M=function(t){var e,n=[];if(1===t.nodeType)for(e=0;e<t.attributes.length;e++)t.attributes[e].specified&&n.push(t.attributes[e]);return n.length>1&&n[0].compareDocumentPosition&&n.sort((function(t,e){var n=t.compareDocumentPosition(e);return 2==(2&n)?1:4==(4&n)?-1:0})),n},A=function(t){var e,n=M(t),i=[];for(e=0;e<n.length;e++)!1===I(n[e])&&i.push(n[e]);return i},P=function(t,e){var n,i,r,o,a=e||[];if(1===t.nodeType){if(t.ownerDocument.documentElement===t&&"object"==typeof t.ownerDocument.namespaces)for(i=t.ownerDocument.namespaces.length-1;i>=0;i--)o=t.ownerDocument.namespaces.item(i),O.call(this,a,o.name,o.urn,t);for(i=(n=M(t)).length-1;i>=0;i--)!1!==(r=I(n[i]))&&(1!==r.length?O.call(this,a,r[1],n[i].nodeValue,t):O.call(this,a,"",n[i].nodeValue,t));if(P.call(this,t.parentNode,a),void 0===e&&(O.call(this,a,"xml",x,t),a[0]&&""===a[0].prefix&&""===a[0].namespaceURI&&a.shift()),void 0===e)for(i=0;i<a.length;i++)a[i].ownerElement!==t&&(a[i]=Z(a[i].prefix,a[i].nodeValue,t))}return a},O=function(t,e,n,i){var r,o;for(this.opts["case-sensitive"]||(e=e.toLowerCase()),r=0;r<t.length;r++)if(t[r].prefix===e)return!1;return o=Z(e,n,i),""===e&&null!==n?t.unshift(o):t.push(o),!0},I=function(t){var e=t.nodeName.split(":");return"xmlns"===e[0]&&e},N=function(t,e){var n,i,r,o,a,s;if(1===t.nodeType)for(r=e?[e]:A(t),o=P.call(this,t),n=0;n<r.length;n++){for(1===(s=r[n].nodeName.split(":")).length&&(s[1]=s[0],s[0]=""),a=null,i=0;i<o.length;i++)if(o[i].prefix===s[0]){a=o[i].namespaceURI;break}if(null===a&&(a=""),this.opts["unique-ids"][a]===s[1])return r[n]}return null},R=function(t,e,n){var i,r,o,a,s=[];for(o=t.getElementsByTagName("*"),i=0;i<o.length;i++)if(1==(a=o.item(i)).nodeType)for(r=0;r<a.attributes.length;r++)if(a.attributes[r].specified&&!0===n(a,a.attributes[r])){if(e)return a;s.push(a);break}return e?null:s},j=function(t){var e,n,i,r;switch(t.nodeType){case 1:for(r=void 0===t.scopeName||document.addEventListener?1==(e=t.nodeName.split(":")).length?{prefix:"",name:e[0]}:{prefix:e[0],name:e[1]}:{prefix:"HTML"==t.scopeName?"":t.scopeName,name:t.nodeName},this.opts["case-sensitive"]||(r.prefix=r.prefix.toLowerCase(),r.name=r.name.toLowerCase()),n=P.call(this,t),i=0;i<n.length;i++)if(n[i].prefix===r.prefix)return r.ns=n[i].namespaceURI,r;if(""===r.prefix)return r.ns=null,r;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+r.prefix+'" on element: '+t.nodeName);case 2:if(1==(e=t.nodeName.split(":")).length)return{prefix:"",ns:null,name:e[0]};for(r={prefix:e[0],name:e[1]},this.opts["case-sensitive"]||(r.prefix=r.prefix.toLowerCase(),r.name=r.name.toLowerCase()),n=P.call(this,k(t)),i=0;i<n.length;i++)if(n[i].prefix===r.prefix)return r.ns=n[i].namespaceURI,r;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+r.prefix+'" on attribute: '+t.nodeName);case 13:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?t.prefix.toLowerCase():t.prefix};case 7:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?t.target.toLowerCase():t.target};default:return!1}},q=function(t){var e,n,i="";switch(t.nodeType){case 9:case 1:for((n=c(new p(t,1,1,{},{},{}),{type:"step",args:["descendant",{type:"nodeType",args:["text",[]]}]})).sortDocumentOrder(),e=0;e<n.value.length;e++)i+=n.value[e].data;return i;case 2:return t.nodeValue;case 13:return t.namespaceURI;case 7:case 8:case 3:case 4:return t.data;default:throw new Error("Internal Error: nodeStringValue does not support node type: "+t.nodeType)}},F=function(t,e,n){var i=new Error(n);return i.name=e,i.code=t,i},U=function(t,e){for(var n=e.length;n--;)if(e[n]===t)return n;return!1},B=function(t,e,n,i){var r,o,a,s,u;if(t instanceof y)if(e instanceof y){for(s=e.stringValues(),a=t.stringValues(),r=0;r<a.length;r++)for(o=0;o<s.length;o++)if((u=B(a[r],s[o],n,i)).toBoolean())return u}else if(e instanceof v){for(a=t.stringValues(),r=0;r<a.length;r++)if((u=B(new v(a[r].toNumber()),e,n,i)).toBoolean())return u}else if(e instanceof _||e instanceof g&&e.isDateString()){for(e instanceof g&&(e=new _(e)),a=t.stringValues(),r=0;r<a.length;r++)if((u=B(new _(a[r].toDate()),e,n,i)).toBoolean())return u}else{if(!(e instanceof g))return B(new m(t.toBoolean()),e,n,i);for(a=t.stringValues(),r=0;r<a.length;r++)if((u=B(a[r],e,n,i)).toBoolean())return u}else if(e instanceof y)if(t instanceof v){for(s=e.stringValues(),r=0;r<s.length;r++)if((u=B(t,new v(s[r].toNumber()),n,i)).toBoolean())return u}else if(t instanceof _||t instanceof g&&t.isDateString()){for(t instanceof g&&(t=new _(t)),s=e.stringValues(),r=0;r<s.length;r++)if((u=B(t,new _(s[r].toDate()),n,i)).toBoolean())return u}else{if(!(t instanceof g))return B(t,new m(e.toBoolean()),n,i);for(s=e.stringValues(),r=0;r<s.length;r++)if((u=B(t,s[r],n,i)).toBoolean())return u}else switch(n){case"=":case"!=":return t instanceof m||e instanceof m?new m(i(t.toBoolean(),e.toBoolean())):t instanceof v||e instanceof v?new m(i(t.toNumber(),e.toNumber())):t instanceof _||e instanceof _||t instanceof g&&t.isDateString()||e instanceof g&&e.isDateString()?new m(i(t.toNumber(),e.toNumber())):new m(i(t.toString(),e.toString()));default:return new m(i(t.toNumber(),e.toNumber()))}return new m(!1)},z=function(t){switch(t.nodeType){case 2:case 3:case 4:case 7:case 8:return k(t);case 1:case 9:return t;case 13:default:throw new Error("Internal Error: getComparableNode - Node type not supported: "+t.nodeType)}},V=function(t,e){var n,i,r;if(13==t.nodeType&&13==e.nodeType&&t.ownerElement==e.ownerElement){if(t===e)return 0;for(i=P.call(b,t.ownerElement),r=0;r<i.length;r++){if(i[r]===t){n=4;break}if(i[r]===e){n=2;break}}}else 13==t.nodeType&&(t=t.ownerElement),13==e.nodeType&&(e=e.ownerElement),n=H(t,e);return n},H=function(t,e){var n,i,r,o,a,s=function(t,e,n,i,r,o,a,s,u){return 0===r||(r&o)===o?s+o:(r&a)===a?u:r};if(t.compareDocumentPosition)return t.compareDocumentPosition(e);if(t===e)return 0;if(n=z(t),i=z(e),9===n.nodeType)if(9===i.nodeType){if(n!==i)return 1;r=0}else{if(n!==i.ownerDocument)return 1;r=20}else if(9===i.nodeType){if(i!==n.ownerDocument)return 1;r=10}else{if(n.ownerDocument!==i.ownerDocument)return 1;if(!n.contains||void 0===n.sourceIndex||!i.contains||void 0===i.sourceIndex)throw new Error('Cannot compare elements. Neither "compareDocumentPosition" nor "contains" available.');r=(n!=i&&n.contains(i)&&16)+(n!=i&&i.contains(n)&&8)+(n.sourceIndex>=0&&i.sourceIndex>=0?(n.sourceIndex<i.sourceIndex&&4)+(n.sourceIndex>i.sourceIndex&&2):1)+0}if(t===n&&e===i)return r;if(t===n)return s(0,0,0,0,r,16,8,4,2);if(e===i)return s(0,0,0,0,r,8,16,2,4);if(16==(16&r))return 4;if(8==(8&r))return 2;if(0===r){for(o=0;o<n.attributes.length;o++)if((a=n.attributes[o]).specified){if(a===e)return 2;if(a===t)return 4}throw new Error("Internal Error: compareDocumentPosition failed to sort attributes.")}return r},W=function(t){if(!t)throw F(9,"NOT_SUPPORTED_ERR","Context node was not supplied.");if(9!=t.nodeType&&1!=t.nodeType&&2!=t.nodeType&&3!=t.nodeType&&4!=t.nodeType&&8!=t.nodeType&&7!=t.nodeType&&13!=t.nodeType)throw F(9,"NOT_SUPPORTED_ERR","The supplied node type is not supported. (nodeType: "+t.nodeType+")");if(2==t.nodeType&&!t.specified)throw F(9,"NOT_SUPPORTED_ERR","The supplied node is a non-specified attribute node. Only specified attribute nodes are supported.")},Z=function(t,e,n){var i,r;for(i=0;i<w.length;i++)if((r=w[i]).prefix===t&&r.nodeValue===e&&r.ownerElement===n)return r;return r=new u(t,e,n),w.push(r),r};return(f=function(t,e,n){this.value=t,this.type=e,this.supports=n}).prototype={value:null,type:null,supports:[],toBoolean:function(){throw new Error('Unable to convert "'+this.type+'" to "boolean".')},toString:function(){throw new Error('Unable to convert "'+this.type+'" to "string".')},toNumber:function(){throw new Error('Unable to convert "'+this.type+'" to "number".')},toNodeSet:function(){throw new Error('Unable to convert "'+this.type+'" to "node-set".')},toDate:function(){throw new Error('Unable to convert "'+this.type+'" to "date".')},canConvertTo:function(t){return!1!==U(t,this.supports)}},(m=function(t){f.call(this,t,"boolean",["boolean","string","number","date"])}).prototype=new f,m.constructor=m,m.prototype.toBoolean=function(){return this.value},m.prototype.toString=function(){return!0===this.value?"true":"false"},m.prototype.toNumber=function(){return this.value?1:0},m.prototype.toDate=function(){return null},(y=function(t,e){f.call(this,t,"node-set",["boolean","string","number","node-set","date"]),this.docOrder=e||"unsorted"}).prototype=new f,y.constructor=y,y.prototype.toBoolean=function(){return this.value.length>0},y.prototype.toString=function(){return this.value.length<1?"":(this.sortDocumentOrder(),q(this.value[0]))},y.prototype.toNumber=function(){return new g(this.toString()).toNumber()},y.prototype.toNodeSet=function(){return this.value},y.prototype.toDate=function(){return new g(this.toString()).toDate()},y.prototype.sortDocumentOrder=function(){switch(this.docOrder){case"document-order":break;case"reverse-document-order":this.value.reverse();break;default:this.value.sort((function(t,e){var n=V(t,e);if(4==(4&n))return-1;if(2==(2&n))return 1;throw new Error("NodeSetType.sortDocumentOrder - unexpected compare result: "+n)}))}this.docOrder="document-order"},y.prototype.sortReverseDocumentOrder=function(){switch(this.docOrder){case"document-order":this.value.reverse();break;case"reverse-document-order":break;default:this.sortDocumentOrder(),this.value.reverse()}this.docOrder="reverse-document-order"},y.prototype.append=function(t){var e,n=0,i=0;if(!(t instanceof y))throw new Error("NodeSetType can be passed into NodeSetType.append method");for(this.sortDocumentOrder(),t.sortDocumentOrder();n<this.value.length&&i<t.value.length;)if(0==(e=V(this.value[n],t.value[i])))i++;else if(4==(4&e))n++;else{if(2!=(2&e))throw new Error("Internal Error: NodeSetType.append - unable to sort nodes. (result: "+e+")");this.value.splice(n,0,t.value[i]),n++,i++}for(;i<t.value.length;i++)this.value.push(t.value[i]);this.docOrder="document-order"},y.prototype.stringValues=function(){var t,e,n=[];for(t=0;t<this.value.length;t++)(e=new g(q(this.value[t]))).isDateString()&&(e=new _(e.value)),n.push(e);return n},(g=function(t){f.call(this,t,"string",["boolean","string","number","date"])}).prototype=new f,g.constructor=g,g.prototype.toBoolean=function(){return this.value.length>0},g.prototype.toString=function(){return this.value},g.prototype.toNumber=function(){var t;return this.isDateString(this.value)?new _(this.value).toNumber():null!==(t=this.value.match(/^[ \t\r\n]*(-?[0-9]+(?:[.][0-9]*)?)[ \t\r\n]*$/))?parseFloat(t[1]):null!==(t=this.value.match(/^[ \t\r\n]*(-?[.][0-9]+)[ \t\r\n]*$/))?parseFloat(t[1]):Number.NaN},g.prototype.toDate=function(){return new _(this.value).toDate()},g.prototype.isDateString=function(){return!!isNaN(this.value)&&(!isNaN(Date.parse(this.value))&&!!/('|")?[0-9]{4}(-|\/)[0-9]{2}(-|\/)[0-9]{2}('|")?/.test(this.value))},(v=function(t){f.call(this,t,"number",["boolean","string","number","date"])}).prototype=new f,v.constructor=v,v.prototype.toBoolean=function(){return 0!==this.value&&!isNaN(this.value)},v.prototype.toString=function(){return this.value.toString()},v.prototype.toNumber=function(){return this.value},v.prototype.toDate=function(){return new Date(864e5*this.value)},(_=function(t){/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(t)&&(t+="T00:00:00.000"+new Date(t).getTimezoneOffsetAsTime()),f.call(this,t,"date",["date","string","number","boolean"])}).prototype=new f,_.constructor=_,_.prototype.toDate=function(){return new Date(this.value)},_.prototype.toString=function(){return new Date(this.value).toISOLocalString()},_.prototype.toNumber=function(){return new Date(this.value).getTime()/864e5},_.prototype.toBoolean=function(){return!isNaN(new Date(this.value).getTime())},(t=function(e,n){var i;switch(this.code=e,this.code){case t.INVALID_EXPRESSION_ERR:this.name="INVALID_EXPRESSION_ERR";break;case t.TYPE_ERR:this.name="TYPE_ERR";break;default:throw(i=new Error("Unsupported XPathException code: "+this.code)).name="XPathExceptionInternalError",i}this.message=n||""}).prototype.toString=function(){return'XPathException: "'+this.message+'", code: "'+this.code+'", name: "'+this.name+'"'},t.INVALID_EXPRESSION_ERR=51,t.TYPE_ERR=52,(e=function(t){var e,n,i;for(e in t){for(n in i=!1,this.opts)if(e===n){this.opts[e]=t[e],i=!0;break}if(!i)throw new Error("Unsupported option: "+e)}this.opts["unique-ids"][x]="id",this.opts["unique-ids"]["http://www.w3.org/1999/xhtml"]="id"}).prototype={opts:{"unique-ids":{},"case-sensitive":!1},createExpression:function(e,r){var o,a,s,u,l={};try{o=i.parse(e)}catch(e){throw a="The expression is not a legal expression.",e instanceof i.SyntaxError?a+=" (line: "+e.line+", character: "+e.column+")":a+=" ("+e.message+")",new t(t.INVALID_EXPRESSION_ERR,a)}if(o.nsPrefixes.length>0){if("object"!=typeof r||void 0===r.lookupNamespaceURI)throw new t(t.INVALID_EXPRESSION_ERR,"No namespace resolver provided or lookupNamespaceURI function not supported.");for(s=0;s<o.nsPrefixes.length;s++)if(l[u=o.nsPrefixes[s]]=r.lookupNamespaceURI(u),null===l[u])throw F(14,"NAMESPACE_ERR",'Undefined namespace prefix "'+u+'" in the context of the given resolver.')}return new n(o,l,this.opts)},createNSResolver:function(t){return new a(t)},evaluate:function(t,e,n,i,r){return(t=this.createExpression(t,n)).evaluate(e,i,r)}},(n=function(t,e,n){this.parsedExpression=t,this.namespaceMapping=e,this.opts=n||{}}).prototype={parsedExpression:null,namespaceMapping:null,opts:{},evaluate:function(t,e){var n;return b=this,W(t),n=new p(t,1,1,{},d,this.namespaceMapping,this.opts),s.factory(n,e,c(n,this.parsedExpression.tree))}},(p=function(t,e,n,i,r,o,a){this.node=t,this.pos=e,this.size=n,this.vars=i,this.fns=r,this.nsMap=o,this.opts=a||{}}).prototype={node:null,pos:null,size:null,vars:null,fns:null,nsMap:null,opts:null,clone:function(t,e,n){return new p(t||this.node,void 0!==e?e:this.pos,void 0!==n?n:this.size,this.vars,this.fns,this.nsMap,this.opts)}},(a=function(t){W(t),this.node=t}).prototype={node:null,lookupNamespaceURI:function(t){var e,n,i,r=this.node;switch(t){case"xml":return x;case"xmlns":return"http://www.w3.org/2000/xmlns/";default:switch(this.node.nodeType){case 9:r=r.documentElement;break;case 1:break;default:r=k(r)}if(null!=r&&1==r.nodeType){if(""==t){if(null!==(n=r.getAttribute("xmlns")))return n}else{if(r.ownerDocument.documentElement===r&&"object"==typeof r.ownerDocument.namespaces)for(e=0;e<r.ownerDocument.namespaces.length;e++)if((n=r.ownerDocument.namespaces.item(e)).name==t)return n.urn;for(e=0;e<r.attributes.length;e++)if(r.attributes[e].specified&&"xmlns:"+t==r.attributes[e].nodeName)return r.attributes[e].nodeValue}if(r.ownerDocument.documentElement!==r&&r.parentNode)return i=this.node,this.node=r.parentNode,n=this.lookupNamespaceURI(t),this.node=i,n}return null}}},h={"/":function(t,e){var n,i,r,o,a;if(null===t)i=new y([D(this.node)],"document-order");else if(!((i=c(this,t))instanceof y))throw new Error("Left side of path separator (/) must be of node-set type. (type: "+i.type+")");if(null===e)o=i;else for(o=new y([],"document-order"),n=0;n<i.value.length;n++){if(a=this.clone(i.value[n]),!((r=c(a,e))instanceof y))throw new Error("Right side of path separator (/) must be of node-set type. (type: "+r.type+")");o.append(r)}return o},step:function(t,e){var n,i,r,o,a,s,u;switch(t){case"child":n=new y($(this.node),"document-order");break;case"descendant":n=new y(E(this.node),"document-order");break;case"parent":r=k(this.node),n=new y(r?[r]:[],"document-order");break;case"ancestor":n=new y(L(this.node),"reverse-document-order");break;case"following-sibling":n=new y(C(this.node),"document-order");break;case"preceding-sibling":n=new y(T(this.node),"reverse-document-order");break;case"following":n=new y(function(t){var e,n,i,r,o=[];for((e=L(t)).unshift(t),n=0;n<e.length;n++)for(i=C(e[n]),r=0;r<i.length;r++)o.push(i[r]),o.push.apply(o,E(i[r]));return o}(this.node),"document-order");break;case"preceding":n=new y(function(t){var e,n,i,r,o=[];for((e=L(t)).unshift(t),n=0;n<e.length;n++)for(i=T(e[n]),r=0;r<i.length;r++)o.push.apply(o,E(i[r]).reverse()),o.push(i[r]);return o}(this.node),"reverse-document-order");break;case"attribute":n=new y(A(this.node),"document-order");break;case"namespace":n=new y(P.call(this,this.node),"document-order");break;case"self":n=new y([this.node],"document-order");break;case"descendant-or-self":(o=E(this.node)).unshift(this.node),n=new y(o,"document-order");break;case"ancestor-or-self":(o=L(this.node)).unshift(this.node),n=new y(o,"reverse-document-order");break;default:throw new Error("Axis type not supported: "+t)}switch(e.type){case"nodeType":if("node"==e.args[0])break;for(i=n.value.length-1;i>=0;i--)switch(e.args[0]){case"text":3!=n.value[i].nodeType&&4!=n.value[i].nodeType&&n.value.splice(i,1);break;case"comment":8!=n.value[i].nodeType&&n.value.splice(i,1);break;case"processing-instruction":(7!=n.value[i].nodeType||e.args[1].length>0&&c(this,e.args[1][0])!=n.value[i].nodeName)&&n.value.splice(i,1)}break;case"name":switch(a=c(this,e),t){case"attribute":s=2;break;case"namespace":s=13;break;default:s=1}for(i=n.value.length-1;i>=0;i--)n.value[i].nodeType==s?null===a.ns&&null===a.name||(!1!==(u=j.call(this,n.value[i]))&&u.ns===a.ns?null!==a.name&&u.name.toLowerCase()!=a.name.toLowerCase()&&n.value.splice(i,1):n.value.splice(i,1)):n.value.splice(i,1);break;default:throw new Error("NodeTest type not supported in step: "+e.type)}return n},predicate:function(t,e,n){var i,r,o,a,s,u;if(!((i=c(this,e))instanceof y))throw new Error('Expected "node-set", got: '+i.type);switch(t){case"ancestor":case"ancestor-or-self":case"preceding":case"preceding-sibling":i.sortReverseDocumentOrder();break;default:i.sortDocumentOrder()}for(a=0;a<n.length;a++)for(r=0,s=1,u=i.value.length;r<i.value.length;s++){if((o=c(this.clone(i.value[r],s,u),n[a]))instanceof v){if(o.value!=s){i.value.splice(r,1);continue}}else if(!o.toBoolean()){i.value.splice(r,1);continue}r++}return i},function:function(t,e){var n,i,r,o,a=[],s=function(t){return(null!==t.ns?"{"+t.ns+"}":"{}")+t.name},u=function(t){var e,n,i=[];for(e=0;e<t.length;e++)n=void 0===t[e].t?"object":t[e].t,!1!==t[e].r?!0===t[e].rep&&(n+="+"):!0===t[e].rep?n+="*":n+="?",i.push(n);return"("+i.join(", ")+")"},l=0,h=[];if(null===(n=c(this,t)).ns&&(n.ns=""),!this.fns[n.ns]||!this.fns[n.ns][n.name])throw new Error('Function "'+s(n)+'" does not exist.');for((i=this.fns[n.ns][n.name]).args||(i.args=[]),r=0,l=0;r<i.args.length;l++,r++){if(void 0===e[l]){if(!1!==i.args[r].r)throw new Error('Function "'+s(n)+'" expects '+u(i.args)+".")}else h.push(void 0===i.args[r].t?"object":i.args[r].t);if(!0===i.args[r].rep){for(;l<e.length;l++)h.push(void 0===i.args[r].t?"object":i.args[r].t);break}}if(h.length<e.length)throw new Error('Function "'+s(n)+'" expects '+u(i.args)+".");for(r=0;r<e.length;r++){if(o=c(this,e[r]),"object"!==h[r]&&!o.canConvertTo(h[r]))throw new Error('Function "'+s(n)+'" expects '+u(i.args)+'.Cannot convert "'+o.type+'" to "'+h[r]+'".');a.push(o)}var d=i.fn.apply(this,a);if(!(d instanceof f))throw new Error('Function "'+s(n)+'" did not return a value that inherits from BaseType.');if("object"!==i.ret&&!d.canConvertTo(i.ret))throw new Error('Function "'+s(n)+'" return "'+d.type+'" type that cannot be converted to "'+i.ret+'".');return d},"|":function(t,e){if(t=c(this,t),e=c(this,e),!(void 0!==t&&void 0!==e&&t instanceof y&&e instanceof y))throw new Error('Unable to perform union on non-"node-set" types.');return t.append(e),t},or:function(t,e){return c(this,t).toBoolean()?new m(!0):new m(c(this,e).toBoolean())},and:function(t,e){return c(this,t).toBoolean()?new m(c(this,e).toBoolean()):new m(!1)},"=":function(t,e){return B.call(this,c(this,t),c(this,e),"=",(function(t,e){return t==e}))},"!=":function(t,e){return B.call(this,c(this,t),c(this,e),"!=",(function(t,e){return t!=e}))},"<=":function(t,e){return B.call(this,c(this,t),c(this,e),"<=",(function(t,e){return t<=e}))},"<":function(t,e){return B.call(this,c(this,t),c(this,e),"<",(function(t,e){return t<e}))},">=":function(t,e){return B.call(this,c(this,t),c(this,e),">=",(function(t,e){return t>=e}))},">":function(t,e){return B.call(this,c(this,t),c(this,e),">",(function(t,e){return t>e}))},"+":function(t,e){return new v(c(this,t).toNumber()+c(this,e).toNumber())},"-":function(t,e){return new v(c(this,t).toNumber()-c(this,e).toNumber())},div:function(t,e){return new v(c(this,t).toNumber()/c(this,e).toNumber())},mod:function(t,e){return new v(c(this,t).toNumber()%c(this,e).toNumber())},"*":function(t,e){return new v(c(this,t).toNumber()*c(this,e).toNumber())},string:function(t){return new g(t)},number:function(t){return new v(t)},$:function(){throw new Error("TODO: Not implemented.16")},name:function(t,e){var n=null;if(null!==t&&!(n=this.nsMap[t]))throw new Error('Namespace prefix "'+t+'" is not mapped to a namespace.');return{ns:n,name:e}}},(d={"":{last:{fn:function(){return new v(this.size)},ret:"number"},count:{fn:function(t){return new v(t.toNodeSet().length)},args:[{t:"node-set"}],ret:"number"},id:{fn:function(t){var e,n,i,r=this,o=[],a=[],s=function(t){var e,n=t.split(/[\u0020\u0009\u000D\u000A]+/);for(e=n.length-1;e>=0;e--)0==n[e].length&&n.splice(e,1);return n};if(t instanceof y)for(e=0;e<t.value.length;e++)o.push.apply(o,s(q(t.value[e])));else t=t.toString(),o=s(t);for(e=o.length-1;e>=0;e--)for(n=e-1;n>=0;n--)if(o[e]==o[n]&&e!=n){o.splice(e,1);break}for(e=0;e<o.length;e++)(i=D(this.node).getElementById(o[e]))&&N.call(this,i)?a.push(i):R(D(this.node),!0,(function(t,n){var i=N.call(r,t,n);if(i&&i.nodeValue==o[e])return a.push(t),!0}));return new y(a)},args:[{}],ret:"node-set"},"local-name":{fn:function(t){var e,n="";return 0==arguments.length&&(t=new y([this.node])),t.toNodeSet().length>0&&(t.sortDocumentOrder(),!1!==(e=j.call(this,t.value[0]))&&(n=e.name)),new g(n)},args:[{t:"node-set",r:!1}],ret:"string"},"namespace-uri":{fn:function(t){var e,n="";return 0==arguments.length&&(t=new y([this.node])),t.toNodeSet().length>0&&(t.sortDocumentOrder(),!1!==(e=j.call(this,t.value[0]))&&null!==e.ns&&(n=e.ns)),new g(n)},args:[{t:"node-set",r:!1}],ret:"string"},name:{fn:function(t){var e,n="";return 0==arguments.length&&(t=new y([this.node])),t.toNodeSet().length>0&&(t.sortDocumentOrder(),!1!==(e=j.call(this,t.value[0]))&&(n=e.prefix&&e.prefix.length>0?e.prefix+":"+e.name:e.name)),new g(n)},args:[{t:"node-set",r:!1}],ret:"string"},string:{fn:function(t){return 0==arguments.length&&(t=new y([this.node],"document-order")),new g(t.toString())},args:[{t:"object",r:!1}],ret:"string"},"starts-with":{fn:function(t,e){return new m(t.toString().substr(0,(e=e.toString()).length)==e)},args:[{t:"string"},{t:"string"}],ret:"string"},contains:{fn:function(t,e){return new m(-1!=t.toString().indexOf(e=e.toString()))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-before":{fn:function(t,e){return e=(t=t.toString()).indexOf(e.toString()),new g(-1==e?"":t.substr(0,e))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-after":{fn:function(t,e){var n;return t=t.toString(),e=e.toString(),n=t.indexOf(e),new g(-1==n?"":t.substr(n+e.length))},args:[{t:"string"},{t:"string"}],ret:"string"},substring:{fn:function(t,e,n){return t=t.toString(),e=Math.round(e.toNumber())-1,new g(isNaN(e)?"":2==arguments.length?t.substring(e<0?0:e):t.substring(e<0?0:e,e+Math.round(n.toNumber())))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},"string-length":{fn:function(t){return t=0==arguments.length?q(this.node):t.toString(),new v(t.length)},args:[{t:"string",r:!1}],ret:"number"},"normalize-space":{fn:function(t){return t=0==arguments.length?q(this.node):t.toString(),new g(t.replace(/^[\u0020\u0009\u000D\u000A]+/,"").replace(/[\u0020\u0009\u000D\u000A]+$/,"").replace(/[\u0020\u0009\u000D\u000A]+/g," "))},args:[{t:"string",r:!1}],ret:"string"},translate:{fn:function(t,e,n){var i,r,o,a="";for(t=t.toString(),e=e.toString(),n=n.toString(),i=0;i<t.length;i++)(-1==(r=e.indexOf(o=t.charAt(i)))||(o=n.charAt(r)))&&(a+=o);return new g(a)},args:[{t:"string"},{t:"string"},{t:"string"}],ret:"string"},boolean:{fn:function(t){return new m(t.toBoolean())},args:[{r:!0}],ret:"boolean"},not:{fn:function(t){return new m(!t.toBoolean())},args:[{t:"boolean"}],ret:"boolean"},true:{fn:function(){return new m(!0)},ret:"boolean"},false:{fn:function(){return new m(!1)},ret:"boolean"},lang:{fn:function(t){for(var e,n,i,r,o,a,s,u=this.node,l=t.toString().toLowerCase().split("-");9!=u.nodeType;u=k(u))for(e=A(u),o=0;o<e.length;o++)if(1===(n=e[o].nodeName.split(":")).length&&(n[1]=n[0],n[0]=""),"lang"==n[1]){if((i=e[o].nodeValue.toLowerCase().split("-")).length<l.length)continue;for(s=!0,a=0;a<l.length;a++)if(l[a]!=i[a]){s=!1;break}if(s)for(r=P.call(this,u),a=0;a<r.length;a++)if(r[a].prefix==n[0]&&r[a].nodeValue==x)return new m(!0)}return new m(!1)},args:[{t:"string"}],ret:"boolean"},number:{fn:function(t){return 0==arguments.length&&(t=new y([this.node],"document-order")),new v(t.toNumber())},args:[{t:"object",r:!1}],ret:"number"},sum:{fn:function(t){var e,n=0;for(t=t.toNodeSet(),e=0;e<t.length;e++)n+=new g(q(t[e])).toNumber();return new v(n)},args:[{t:"node-set"}],ret:"number"},floor:{fn:function(t){return new v(Math.floor(t))},args:[{t:"number"}],ret:"number"},ceiling:{fn:function(t){return new v(Math.ceil(t))},args:[{t:"number"}],ret:"number"},"count-non-empty":{fn:function(t){var e,n=0;for(t=t.toNodeSet(),e=0;e<t.length;e++)new g(q(t[e])).toString().length>0&&n++;return new v(n)},args:[{t:"node-set"}],ret:"number"},position:{fn:function(t){if(t){var e,n,i;if(1===(t=t.toNodeSet()).length){for(i=1,n=(e=t[0]).tagName;e.previousElementSibling&&e.previousElementSibling.tagName===n;)e=e.previousElementSibling,i++;return new v(i)}throw new Error("nodeset provided to position() contained multiple nodes")}return new v(this.pos)},args:[{t:"node-set",r:!1}],ret:"number"},concat:{fn:function(){var t,e="";for(t=0;t<arguments.length;t++)e+=arguments[t]instanceof y?arguments[t].stringValues().join(""):arguments[t].toString();return new g(e)},args:[{t:"object",r:!1,rep:!0}],ret:"string"},round:{fn:function(t,e){return e=Math.round(e)||0,new v(Math.round(t*Math.pow(10,e))/Math.pow(10,e))},args:[{t:"number"},{t:"number",r:!1}],ret:"number"},selected:{fn:function(t,e){var n;return e=e.toString().trim(),n=t.toString(),new m(-1!=(" "+n+" ").indexOf(" "+e+" "))},args:[{t:"object"},{t:"string"}],ret:"boolean"},"selected-at":{fn:function(t,e){var n,i;return e=Math.round(e.toNumber()),n=t.toString().split(" "),i=e>=0&&e<n.length?n[e]:"",new g(i)},args:[{t:"object"},{t:"number"}],ret:"string"},"count-selected":{fn:function(t){var e=[];return(t=t.toNodeSet()).length>0?1==(e=q(t[0]).trim().split(" ")).length&&""===e[0]?new v(0):new v(e.length):new v(0)},args:[{t:"node-set"}],ret:"number"},checklist:{fn:function(t,e){var n,i,r=0;for(t=t.toNumber(),e=e.toNumber(),n=2;n<arguments.length;n++)if(arguments[n]instanceof y)for(i=0;i<arguments[n].stringValues().length;i++)!0===arguments[n].stringValues()[i].toBoolean()&&r++;else!0===arguments[n].toBoolean()&&r++;return new m((t<0||r>=t)&&(e<0||r<=e))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"weighted-checklist":{fn:function(t,e){var n,i=[],r=[],o=0;for(t=t.toNumber(),e=e.toNumber(),n=2;n<arguments.length;n+=2){var a=arguments[n],s=arguments[n+1];a&&s&&(a instanceof y?i=i.concat(a.stringValues()):i.push(a),s instanceof y?r=r.concat(s.stringValues()):r.push(s))}for(n=0;n<i.length;n++)!0===i[n].toBoolean()&&(o+=r[n].toNumber());return new m((t<0||o>=t)&&(e<0||o<=e))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"boolean-from-string":{fn:function(t){return new m("true"===t.toString().toLowerCase()||"1"===String(t))},args:[{t:"string"}],ret:"boolean"},if:{fn:function(t,e,n){return t.toBoolean()?e:n},args:[{t:"object"},{t:"object"},{t:"object"}],ret:"object"},date:{fn:function(t){return new _(t.toDate())},args:[{t:"object"}],ret:"string"},"date-time":{fn:function(t){return new _(t.toDate())},args:[{t:"object"}],ret:"string"},"decimal-date-time":{fn:function(t){var e,n=t.toDate();return e="Invalid Date"!==n.toString()?n.getTime()/864e5:Number.NaN,new v(e)},args:[{t:"object"}],ret:"number"},"decimal-time":{fn:function(t){var e,n=t.toString().match(/^(\d\d):(\d\d):(\d\d)(\.\d\d?\d?)?(\+|-)(\d\d):(\d\d)$/);if(n&&n[1]<24&&n[1]>=0&&n[2]<60&&n[2]>=0&&n[3]<60&&n[3]>=0&&n[6]<24&&n[6]>=0&&n[7]<60&&n[7]>=0){var i=function(t){return t<10?"0"+t:t},r=new Date,o=new Date(r.getFullYear()+"-"+i(r.getMonth()+1)+"-"+i(r.getDate())+"T"+t);e="Invalid Date"===o.toString()?Number.NaN:(o.getSeconds()/3600+o.getMinutes()/60+o.getHours())/24}else e=Number.NaN;return new v(e)},args:[{t:"string"}],ret:"number"},today:{fn:function(){var t=new Date;return new _(new Date(t.getFullYear(),t.getMonth(),t.getDate()))},ret:"string"},now:{fn:function(){return new _(new Date)},ret:"string"},regex:{fn:function(t,e){var n,i;return n=t.toString(),i=new RegExp(e),new m(i.test(n))},args:[{t:"object"},{t:"string"}],ret:"boolean"},uuid:{fn:function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}));return new g(t)},ret:"string"},int:{fn:function(t){return new v(t.toNumber()>=0?Math.floor(t.toNumber()):-Math.floor(Math.abs(t.toNumber())))},args:[{t:"string"}],ret:"number"},substr:{fn:function(t,e,n){var i=(t=t.toString()).length;return e=Math.round(e.toNumber()),n=n?Math.round(n.toNumber()):i,new g(isNaN(e)?"":t.substring(e<0?i+e:e,n<0?i+n:n))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},random:{fn:function(){return new v(Math.random().toFixed(15))},ret:"number"},min:{fn:function(){var t,e,n,i,r;for(t=0;t<arguments.length;t++)if(arguments[t]instanceof y){for(r=arguments[t].toNodeSet(),e=0;e<r.length;e++)(i=new g(q(r[e])))&&(n=void 0!==n?Math.min(n,i.toNumber()):i.toNumber());0===r.length&&(n=NaN)}else(i=new g(arguments[t].toString()))&&(n=void 0!==n?Math.min(n,i.toNumber()):i.toNumber());return new v(n)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},max:{fn:function(){var t,e,n,i,r;for(t=0;t<arguments.length;t++)if(arguments[t]instanceof y){for(r=arguments[t].toNodeSet(),e=0;e<r.length;e++)(i=new g(q(r[e])))&&(n=void 0!==n?Math.max(n,i.toNumber()):i.toNumber());0===r.length&&(n=NaN)}else(i=new g(arguments[t].toString()))&&(n=void 0!==n?Math.max(n,i.toNumber()):i.toNumber());return new v(n)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},join:{fn:function(t){var e,n=[];for(e=1;e<arguments.length;e++)arguments[e]instanceof y?n=n.concat(arguments[e].stringValues()):n.push(arguments[e].toString());var i=n[0]||"";for(e=1;e<n.length;e++)i+=t.toString()+n[e];return new g(i)},args:[{t:"string"},{t:"object",r:!1,rep:!0}],ret:"string"},coalesce:{fn:function(t,e){return t.toString().length>0?t:e},args:[{t:"object"},{t:"object"}],ret:"string"},"format-date":{fn:function(t,e){var n,i=(t=new _(t)).toDate(),r=e.toString(),o=function(t,e){var i=t.toString(),r=e-i.length;for(n=0;n<r;n++)i="0"+i;return i},a=window?window.enketoFormLocale:void 0;if(!t.toBoolean())return new g(i.toString());var s={Y:i.getFullYear(),y:i.getFullYear().toString().substring(2,4),m:o(i.getMonth()+1,2),n:i.getMonth()+1,b:i.toLocaleDateString(a,{month:"short"}),d:o(i.getDate(),2),e:i.getDate(),H:o(i.getHours(),2),h:i.getHours(),M:o(i.getMinutes(),2),S:o(i.getSeconds(),2),3:o(i.getMilliseconds(),3),a:i.toLocaleDateString(a,{weekday:"short"})};for(var u in s)r=r.replace("%"+u,s[u]);return new g(r)},args:[{t:"date"},{t:"string"}],ret:"string"},pow:{fn:function(t,e){return new v(Math.pow(t,e))},args:[{t:"number"},{t:"number"}],ret:"number"},sin:{fn:function(t){return new v(Math.sin(t))},args:[{t:"number"}],ret:"number"},cos:{fn:function(t){return new v(Math.cos(t))},args:[{t:"number"}],ret:"number"},tan:{fn:function(t){return new v(Math.tan(t))},args:[{t:"number"}],ret:"number"},acos:{fn:function(t){return new v(Math.acos(t))},args:[{t:"number"}],ret:"number"},asin:{fn:function(t){return new v(Math.asin(t))},args:[{t:"number"}],ret:"number"},atan:{fn:function(t){return new v(Math.atan(t))},args:[{t:"number"}],ret:"number"},atan2:{fn:function(t,e){return new v(Math.atan2(t,e))},args:[{t:"number"},{t:"number"}],ret:"number"},log10:{fn:function(t){return void 0!==Math.log10?new v(Math.log10(t)):new v(Math.log(t)/Math.LN10)},args:[{t:"number"}],ret:"number"},log:{fn:function(t){return new v(Math.log(t))},args:[{t:"number"}],ret:"number"},pi:{fn:function(){return new v(Math.PI)},args:[],ret:"number"},exp:{fn:function(t){return new v(Math.exp(t))},args:[{t:"number"}],ret:"number"},exp10:{fn:function(t){return new v(Math.pow(10,t))},args:[{t:"number"}],ret:"number"},sqrt:{fn:function(t){return new v(Math.sqrt(t))},args:[{t:"number"}],ret:"number"},once:{fn:function(t){var e=q(this.node),n=t.toString();return n="NaN"===n?"":n,new g(""!==e?e:n)},args:[{t:"string"}],ret:"string"},area:{fn:function(t){var e=[];return t instanceof y&&t.value.length>1?t.value.forEach((function(t){e.push(q(t))})):t instanceof y?e=q(t.value[0]).split(";"):t instanceof g&&(e=t.value.split(";")),new v(o.area(e))},args:[{t:"string"}],ret:"number"},distance:{fn:function(t){var e=[];return t instanceof y&&t.value.length>1?t.value.forEach((function(t){e.push(q(t))})):t instanceof y?e=q(t.value[0]).split(";"):t instanceof g&&(e=t.value.split(";")),new v(o.distance(e))},args:[{t:"string"}],ret:"number"},"ends-with":{fn:function(t,e){return new m(t.toString().substr(t.toString().length-e.toString().length)===e.toString())},args:[{t:"string"},{t:"string"}],ret:"string"},abs:{fn:function(t){return new v(Math.abs(t))},args:[{t:"number"}],ret:"number"},randomize:{fn:function(t,e){var n=e?e.toNumber():void 0;return new y(r(t.toNodeSet(),n),"document-order")},args:[{t:"node-set"},{t:"number",r:!1}],ret:"node-set"}}})[""]["format-date-time"]=d[""]["format-date"],c=function(t,e){if("function"!=typeof h[e.type])throw new Error("Internal Error: Expression type does not exist: "+e.type);return h[e.type].apply(t,e.args)},(s=function(e,n,i){switch(n){case s.NUMBER_TYPE:this.resultType=s.NUMBER_TYPE,this.numberValue=i.toNumber();break;case s.STRING_TYPE:this.resultType=s.STRING_TYPE,this.stringValue=i.toString();break;case s.BOOLEAN_TYPE:this.resultType=s.BOOLEAN_TYPE,this.booleanValue=i.toBoolean();break;case s.UNORDERED_NODE_ITERATOR_TYPE:case s.ORDERED_NODE_ITERATOR_TYPE:case s.UNORDERED_NODE_SNAPSHOT_TYPE:case s.ORDERED_NODE_SNAPSHOT_TYPE:case s.ANY_UNORDERED_NODE_TYPE:case s.FIRST_ORDERED_NODE_TYPE:if(!(i instanceof y))throw new Error('Expected result of type "node-set", got: "'+i.type+'"');switch(this.resultType=n,n){case s.UNORDERED_NODE_ITERATOR_TYPE:case s.UNORDERED_NODE_SNAPSHOT_TYPE:this._value=i.toNodeSet(),this.snapshotLength=this._value.length;break;case s.ORDERED_NODE_ITERATOR_TYPE:case s.ORDERED_NODE_SNAPSHOT_TYPE:i.sortDocumentOrder(),this._value=i.toNodeSet(),this.snapshotLength=this._value.length;break;case s.ANY_UNORDERED_NODE_TYPE:i=i.toNodeSet(),this.singleNodeValue=i.length?i[0]:null;break;case s.FIRST_ORDERED_NODE_TYPE:i.sortDocumentOrder(),i=i.toNodeSet(),this.singleNodeValue=i.length?i[0]:null;break;default:throw new t(t.TYPE_ERR,"XPath result type not supported. (type: "+n+")")}break;default:throw new t(t.TYPE_ERR,"XPath result type not supported. (type: "+n+")")}}).factory=function(e,n,i){var r;if(n!==s.ANY_TYPE)return new s(e,n,i);if(i instanceof y)r=new s(e,s.UNORDERED_NODE_ITERATOR_TYPE,i);else if(i instanceof v)r=new s(e,s.NUMBER_TYPE,i);else if(i instanceof m)r=new s(e,s.BOOLEAN_TYPE,i);else{if(!(i instanceof g))throw new t(t.TYPE_ERR,"Internal Error: Unsupported value type: "+typeof i);r=new s(e,s.STRING_TYPE,i)}return r},s.prototype={resultType:null,numberValue:null,stringValue:null,booleanValue:null,singleNodeValue:null,invalidIteratorState:null,snapshotLength:null,_iteratorIndex:0,iterateNext:function(){if(this.resultType!=s.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=s.ORDERED_NODE_ITERATOR_TYPE)throw new t(t.TYPE_ERR,"iterateNext() method may only be used with results of type UNORDERED_NODE_ITERATOR_TYPE or ORDERED_NODE_ITERATOR_TYPE");return this._iteratorIndex<this._value.length?this._value[this._iteratorIndex++]:null},snapshotItem:function(e){if(this.resultType!=s.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=s.ORDERED_NODE_SNAPSHOT_TYPE)throw new t(t.TYPE_ERR,"snapshotItem() method may only be used with results of type UNORDERED_NODE_SNAPSHOT_TYPE or ORDERED_NODE_SNAPSHOT_TYPE");return this._value[e]}},s.ANY_TYPE=0,s.NUMBER_TYPE=1,s.STRING_TYPE=2,s.BOOLEAN_TYPE=3,s.UNORDERED_NODE_ITERATOR_TYPE=4,s.ORDERED_NODE_ITERATOR_TYPE=5,s.UNORDERED_NODE_SNAPSHOT_TYPE=6,s.ORDERED_NODE_SNAPSHOT_TYPE=7,s.ANY_UNORDERED_NODE_TYPE=8,s.FIRST_ORDERED_NODE_TYPE=9,(u=function(t,e,n){if(1!=n.nodeType)throw new Error("Internal Error: XPathNamespace owner element must be an Element node.");this.ownerElement=n,this.ownerDocument=n.ownerDocument,this.nodeName="#namespace",this.prefix=t,this.localName=t,this.nodeType=u.XPATH_NAMESPACE_NODE,this.namespaceURI=e,this.nodeValue=e}).XPATH_NAMESPACE_NODE=13,l={XPathException:t,XPathEvaluator:e,XPathNSResolver:a,XPathExpression:n,XPathResult:s,XPathNamespace:u,customXPathFunction:{type:{StringType:g,NumberType:v,NodeSetType:y,BooleanType:m},add:function(t,e){d[""][t]=e},remove:function(t){delete d[""][t]}},getCurrentDomLevel3XPathBindings:function(){return{window:{XPathException:window.XPathException,XPathExpression:window.XPathExpression,XPathNSResolver:window.XPathNSResolver,XPathResult:window.XPathResult,XPathNamespace:window.XPathNamespace},document:{createExpression:document.createExpression,createNSResolver:document.createNSResolver,evaluate:document.evaluate}}},createDomLevel3XPathBindings:function(i){var r=new e(i);return{window:{XPathException:t,XPathExpression:n,XPathNSResolver:a,XPathResult:s,XPathNamespace:u},document:{createExpression:function(){return r.createExpression.apply(r,arguments)},createNSResolver:function(){return r.createNSResolver.apply(r,arguments)},evaluate:function(){return r.evaluate.apply(r,arguments)}}}},bindDomLevel3XPath:function(t,e){var n,i=e||l.createDomLevel3XPathBindings(),r=l.getCurrentDomLevel3XPathBindings();for(n in t=t||document,i.window)window[n]=i.window[n];for(n in i.document)t[n]=i.document[n];return r}}}()},function(t,e,n){t.exports=function(){"use strict";function t(t,e,n){this.x=t,this.y=e,this.time=n||(new Date).getTime()}function e(t,e,n,i){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=i}function n(t,e){var i=this,r=e||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this.throttle?this._strokeMoveUpdate=function(t,e,n){var i,r,o,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),a=null,o=t.apply(i,r),a||(i=r=null)};return function(){var l=Date.now();s||!1!==n.leading||(s=l);var c=e-(l-s);return i=this,r=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=l,o=t.apply(i,r),a||(i=r=null)):a||!1===n.trailing||(a=setTimeout(u,c)),o}}(n.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=n.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(i._mouseButtonDown=!0,i._strokeBegin(t))},this._handleMouseMove=function(t){i._mouseButtonDown&&i._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&i._mouseButtonDown&&(i._mouseButtonDown=!1,i._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var e=t.changedTouches[0];i._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];i._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){t.target===i._canvas&&(t.preventDefault(),i._strokeEnd(t))},this.on()}return t.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},e.prototype.length=function(){for(var t=0,e=void 0,n=void 0,i=0;i<=10;i+=1){var r=i/10,o=this._point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this._point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var s=o-e,u=a-n;t+=Math.sqrt(s*s+u*u)}e=o,n=a}return t},e.prototype._point=function(t,e,n,i,r){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*i*(1-t)*t*t+r*t*t*t},n.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},n.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new Image,r=n.ratio||window.devicePixelRatio||1,o=n.width||this._canvas.width/r,a=n.height||this._canvas.height/r;this._reset(),i.src=t,i.onload=function(){e._ctx.drawImage(i,0,0,o,a)},this._isEmpty=!1},n.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(e=this._canvas).toDataURL.apply(e,[t].concat(i))}},n.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},n.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},n.prototype.isEmpty=function(){return this._isEmpty},n.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},n.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,i=this._createPoint(e,n),r=this._data[this._data.length-1],o=r&&r[r.length-1],a=o&&i.distanceTo(o)<this.minDistance;if(!o||!a){var s=this._addPoint(i),u=s.curve,l=s.widths;u&&l&&this._drawCurve(u,l.start,l.end),this._data[this._data.length-1].push({x:i.x,y:i.y,time:i.time,color:this.penColor})}},n.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var i=this._data[this._data.length-1],r=i[i.length-1];n.equals(r)||i.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(t)},n.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},n.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},n.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},n.prototype._createPoint=function(e,n,i){var r=this._canvas.getBoundingClientRect();return new t(e-r.left,n-r.top,i||(new Date).getTime())},n.prototype._addPoint=function(t){var n=this.points;if(n.push(t),n.length>2){3===n.length&&n.unshift(n[0]);var i=this._calculateCurveControlPoints(n[0],n[1],n[2]).c2,r=this._calculateCurveControlPoints(n[1],n[2],n[3]).c1,o=new e(n[1],i,r,n[2]),a=this._calculateCurveWidths(o);return n.shift(),{curve:o,widths:a}}return{}},n.prototype._calculateCurveControlPoints=function(e,n,i){var r=e.x-n.x,o=e.y-n.y,a=n.x-i.x,s=n.y-i.y,u=(e.x+n.x)/2,l=(e.y+n.y)/2,c=(n.x+i.x)/2,h=(n.y+i.y)/2,d=Math.sqrt(r*r+o*o),p=Math.sqrt(a*a+s*s),f=p/(d+p),m=c+(u-c)*f,g=h+(l-h)*f,v=n.x-m,y=n.y-g;return{c1:new t(u+v,l+y),c2:new t(c+v,h+y)}},n.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,i={start:null,end:null},r=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(r);return i.start=this._lastWidth,i.end=o,this._lastVelocity=r,this._lastWidth=o,i},n.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},n.prototype._drawPoint=function(t,e,n){var i=this._ctx;i.moveTo(t,e),i.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1},n.prototype._drawCurve=function(t,e,n){var i=this._ctx,r=n-e,o=Math.floor(t.length());i.beginPath();for(var a=0;a<o;a+=1){var s=a/o,u=s*s,l=u*s,c=1-s,h=c*c,d=h*c,p=d*t.startPoint.x;p+=3*h*s*t.control1.x,p+=3*c*u*t.control2.x,p+=l*t.endPoint.x;var f=d*t.startPoint.y;f+=3*h*s*t.control1.y,f+=3*c*u*t.control2.y,f+=l*t.endPoint.y;var m=e+l*r;this._drawPoint(p,f,m)}i.closePath(),i.fill()},n.prototype._drawDot=function(t){var e=this._ctx,n="function"==typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()},n.prototype._fromData=function(e,n,i){for(var r=0;r<e.length;r+=1){var o=e[r];if(o.length>1)for(var a=0;a<o.length;a+=1){var s=o[a],u=new t(s.x,s.y,s.time),l=s.color;if(0===a)this.penColor=l,this._reset(),this._addPoint(u);else if(a!==o.length-1){var c=this._addPoint(u),h=c.curve,d=c.widths;h&&d&&n(h,d,l)}}else this._reset(),i(o[0])}},n.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,i=Math.max(window.devicePixelRatio||1,1),r=n.width/i,o=n.height/i,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"width",n.width),a.setAttributeNS(null,"height",n.height),this._fromData(e,(function(t,e,n){var i=document.createElement("path");if(!(isNaN(t.control1.x)||isNaN(t.control1.y)||isNaN(t.control2.x)||isNaN(t.control2.y))){var r="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" C "+t.control1.x.toFixed(3)+","+t.control1.y.toFixed(3)+" "+t.control2.x.toFixed(3)+","+t.control2.y.toFixed(3)+" "+t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3);i.setAttribute("d",r),i.setAttribute("stroke-width",(2.25*e.end).toFixed(3)),i.setAttribute("stroke",n),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),a.appendChild(i)}}),(function(e){var n=document.createElement("circle"),i="function"==typeof t.dotSize?t.dotSize():t.dotSize;n.setAttribute("r",i),n.setAttribute("cx",e.x),n.setAttribute("cy",e.y),n.setAttribute("fill",e.color),a.appendChild(n)}));var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+r+" "+o+'" width="'+r+'" height="'+o+'">',u=a.innerHTML;if(void 0===u){var l=document.createElement("dummy"),c=a.childNodes;l.innerHTML="";for(var h=0;h<c.length;h+=1)l.appendChild(c[h].cloneNode(!0));u=l.innerHTML}return"data:image/svg+xml;base64,"+btoa(s+u+"</svg>")},n.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,(function(t,n){return e._drawCurve(t,n.start,n.end)}),(function(t){return e._drawDot(t)})),this._data=t},n.prototype.toData=function(){return this._data},n}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(193),r=n(194),o=n(195),a=n(161),s=function(t,e){window.localStorage.setItem(t,e)},u=function(t){return window.localStorage.getItem(t)},l={},c={en:i,lo:r,zh:o},h=i;l.set=function(t){c.hasOwnProperty(t)?(this.language=t,this.translations=c[t],this.translateDocument(),s("language",this.language)):console.error("Language not found: "+t)},l.get=function(){return this.language},l._=function(t,e){null==e&&(e={});var n=a.get(this.translations,t,a.get(h,t,""));for(var t in e)n=n.replace(new RegExp(":"+t,"g"),e[t]);return n},l.translateDocument=function(){for(var t=document.querySelectorAll("[data-i18n]"),e=0;e<t.length;e++){var n=t[e],i=n.getAttribute("data-i18n"),r=this._(i);n.innerHTML=r}},document.onreadystatechange=function(){var t=u("language");null==t&&(t="en"),l.set(t)},window.i18n=l,t.exports=l},function(t,e){t.exports={index:{upload:"Upload"},survey:{loading:"Loading Survey!",wait:"This will take a few moments...",errors:"Form contains errors, please fix all errors before submitting.",saved:"Active session has been saved",camera:"Camera",save:"Save",validate:"Validate",first:"First",last:"Last",jump_to:"Jump To",submit:"Validate &amp; Submit",back:"Back",next:"Next"},session:{title:"Survey Session",description:"Start a New Session",name:"Name this Session",start:"Start"},constraint:{required:"This field is required.",invalid:"Value not allowed"},submissions:{back:"Back",upload_all:"Upload All",upload_single:"Upload This",title:"Upload Surveys",uploaded:"Uploaded!",name:"Name",hint:"Hint",size:"Size",created_at:"Created At",error:"An error occured while trying to submit packet named :packet",success:"Packet named :packet has been submitted!"}}},function(t,e){t.exports={index:{upload:"ອັບໂຫລດ"},survey:{loading:"ກໍາລັງໂຫລດ",wait:"ລໍຖ້າ",errors:"ຜິດພາດ",saved:"ບັນທຶກໄວ້ແລ້ວ",camera:"ກ້ອງຖ່າຍຮູບ",save:"ບັນທຶກ",validate:"ກວດສອບ",first:"ຫນ້າທໍາອິດ",last:"ໜ້າສຸດທ້າຍ",jump_to:"ຄົ້ນຫາ",submit:"ສົ່ງຂໍ້ມູນ",back:"ກັບຄືນໄປບ່ອນເກົ່າ",next:"ຕໍ່ໄປ"},session:{title:"ຫົວຂໍ້",description:"ລາຍລະອຽດ",name:"ຊື່",start:"ເລີ່ມຕົ້ນ"},constraint:{required:"ຕ້ອງການ",invalid:"ບໍ່ຖືກຕ້ອງ"},submissions:{back:"Back",upload_all:"ອັບໂຫລດທັງຫມົດ",upload_single:"ອັບໂຫລດ",title:"ຢູ່ລະຫວ່າງການສົ່ງຂໍ້ມູນ",uploaded:"ອັບ!",name:"ຊື່",hint:"Hint",size:"ຂະຫນາດ",created_at:"ປະດິດສ້າງຂື້ນໃນ",error:"ຜິດພາດ :packet",success:"ສໍາເລັດ :packet ຊຸດ"}}},function(t,e){t.exports={index:{upload:"上传"},survey:{loading:"加载问卷！",wait:"需要一些时间...",errors:"表单包含错误，请在提交之前修复所有错误。",saved:"已保存操作",camera:"相机",save:"保存",validate:"确认",first:"首页",last:"末页",search:"搜索",submit:"确认并提交",back:"返回",next:"下一页"},session:{title:"问卷调查会话",description:"开始一个新的会话",name:"会话命名",start:"开始"},constraint:{required:"此字段必填.",invalid:"值不可用"},submissions:{upload_all:"上传所有",upload_single:"上传此次数据",title:"申请数据提交",uploaded:"上传完成！",name:"名称",hint:"提示",size:"大小",created_at:"创建于",error:"试图提交名为:packet的数据包时出错。",success:"包名:packet已提交！"}}},function(t,e,n){(function(e){var n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/,r=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,l="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,h=l||c||Function("return this")();var d,p=Array.prototype,f=Function.prototype,m=Object.prototype,g=h["__core-js_shared__"],v=(d=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",y=f.toString,_=m.hasOwnProperty,b=m.toString,w=RegExp("^"+y.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=h.Symbol,$=p.splice,E=N(h,"Map"),k=N(Object,"create"),L=x?x.prototype:void 0,C=L?L.toString:void 0;function T(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function S(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function D(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function M(t,e,n){var i=t[e];_.call(t,e)&&U(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function A(t,e){for(var n=t.length;n--;)if(U(t[n][0],e))return n;return-1}function P(t){return!(!z(t)||(e=t,v&&v in e))&&(function(t){var e=z(t)?b.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?w:s).test(function(t){if(null!=t){try{return y.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function O(t,e,r,o){if(!z(t))return t;for(var a=-1,s=(e=function(t,e){if(B(t))return!1;var r=typeof t;if("number"==r||"symbol"==r||"boolean"==r||null==t||V(t))return!0;return i.test(t)||!n.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:function(t){return B(t)?t:j(t)}(e)).length,u=s-1,l=t;null!=l&&++a<s;){var c=q(e[a]),h=r;if(a!=u){var d=l[c];void 0===(h=o?o(d,c,l):void 0)&&(h=z(d)?d:R(e[a+1])?[]:{})}M(l,c,h),l=l[c]}return t}function I(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function N(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return P(n)?n:void 0}function R(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||u.test(t))&&t>-1&&t%1==0&&t<e}T.prototype.clear=function(){this.__data__=k?k(null):{}},T.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},T.prototype.get=function(t){var e=this.__data__;if(k){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return _.call(e,t)?e[t]:void 0},T.prototype.has=function(t){var e=this.__data__;return k?void 0!==e[t]:_.call(e,t)},T.prototype.set=function(t,e){return this.__data__[t]=k&&void 0===e?"__lodash_hash_undefined__":e,this},S.prototype.clear=function(){this.__data__=[]},S.prototype.delete=function(t){var e=this.__data__,n=A(e,t);return!(n<0)&&(n==e.length-1?e.pop():$.call(e,n,1),!0)},S.prototype.get=function(t){var e=this.__data__,n=A(e,t);return n<0?void 0:e[n][1]},S.prototype.has=function(t){return A(this.__data__,t)>-1},S.prototype.set=function(t,e){var n=this.__data__,i=A(n,t);return i<0?n.push([t,e]):n[i][1]=e,this},D.prototype.clear=function(){this.__data__={hash:new T,map:new(E||S),string:new T}},D.prototype.delete=function(t){return I(this,t).delete(t)},D.prototype.get=function(t){return I(this,t).get(t)},D.prototype.has=function(t){return I(this,t).has(t)},D.prototype.set=function(t,e){return I(this,t).set(t,e),this};var j=F((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(V(t))return C?C.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return r.test(t)&&n.push(""),t.replace(o,(function(t,e,i,r){n.push(i?r.replace(a,"$1"):e||t)})),n}));function q(t){if("string"==typeof t||V(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function F(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new(F.Cache||D),n}function U(t,e){return t===e||t!=t&&e!=e}F.Cache=D;var B=Array.isArray;function z(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function V(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==b.call(t)}t.exports=function(t,e,n){return null==t?t:O(t,e,n)}}).call(this,n(28))},function(t,e,n){var i;void 0===(i=function(){"use strict";return Object.getPrototypeOf}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(113)],void 0===(r=function(t){"use strict";return t.call(Object)}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(200)],void 0===(r=function(t,e){"use strict";t.find=e,t.expr=e.selectors,t.expr[":"]=t.expr.pseudos,t.uniqueSort=t.unique=e.uniqueSort,t.text=e.getText,t.isXMLDoc=e.isXML,t.contains=e.contains,t.escapeSelector=e.escape}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;!function(r){var o,a,s,u,l,c,h,d,p,f,m,g,v,y,_,b,w,x,$,E="sizzle"+1*new Date,k=r.document,L=0,C=0,T=ct(),S=ct(),D=ct(),M=function(t,e){return t===e&&(m=!0),0},A={}.hasOwnProperty,P=[],O=P.pop,I=P.push,N=P.push,R=P.slice,j=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+F+"*("+U+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+F+"*\\]",z=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",V=new RegExp(F+"+","g"),H=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),Z=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),G=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),Y=new RegExp(z),X=new RegExp("^"+U+"$"),K={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+q+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,tt=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nt=/[+~]/,it=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),rt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ot=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,at=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=function(){g()},ut=xt((function(t){return!0===t.disabled&&("form"in t||"label"in t)}),{dir:"parentNode",next:"legend"});try{N.apply(P=R.call(k.childNodes),k.childNodes),P[k.childNodes.length].nodeType}catch(t){N={apply:P.length?function(t,e){I.apply(t,R.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function lt(t,e,n,i){var r,o,s,u,l,h,p,f=e&&e.ownerDocument,m=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==m&&9!==m&&11!==m)return n;if(!i&&((e?e.ownerDocument||e:k)!==v&&g(e),e=e||v,_)){if(11!==m&&(l=et.exec(t)))if(r=l[1]){if(9===m){if(!(s=e.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(f&&(s=f.getElementById(r))&&$(e,s)&&s.id===r)return n.push(s),n}else{if(l[2])return N.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&a.getElementsByClassName&&e.getElementsByClassName)return N.apply(n,e.getElementsByClassName(r)),n}if(a.qsa&&!D[t+" "]&&(!b||!b.test(t))){if(1!==m)f=e,p=t;else if("object"!==e.nodeName.toLowerCase()){for((u=e.getAttribute("id"))?u=u.replace(ot,at):e.setAttribute("id",u=E),o=(h=c(t)).length;o--;)h[o]="#"+u+" "+wt(h[o]);p=h.join(","),f=nt.test(t)&&_t(e.parentNode)||e}if(p)try{return N.apply(n,f.querySelectorAll(p)),n}catch(t){}finally{u===E&&e.removeAttribute("id")}}}return d(t.replace(H,"$1"),e,n,i)}function ct(){var t=[];return function e(n,i){return t.push(n+" ")>s.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function ht(t){return t[E]=!0,t}function dt(t){var e=v.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function pt(t,e){for(var n=t.split("|"),i=n.length;i--;)s.attrHandle[n[i]]=e}function ft(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function mt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function gt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function vt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ut(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function yt(t){return ht((function(e){return e=+e,ht((function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))}))}))}function _t(t){return t&&void 0!==t.getElementsByTagName&&t}for(o in a=lt.support={},l=lt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},g=lt.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:k;return i!==v&&9===i.nodeType&&i.documentElement?(y=(v=i).documentElement,_=!l(v),k!==v&&(n=v.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",st,!1):n.attachEvent&&n.attachEvent("onunload",st)),a.attributes=dt((function(t){return t.className="i",!t.getAttribute("className")})),a.getElementsByTagName=dt((function(t){return t.appendChild(v.createComment("")),!t.getElementsByTagName("*").length})),a.getElementsByClassName=tt.test(v.getElementsByClassName),a.getById=dt((function(t){return y.appendChild(t).id=E,!v.getElementsByName||!v.getElementsByName(E).length})),a.getById?(s.filter.ID=function(t){var e=t.replace(it,rt);return function(t){return t.getAttribute("id")===e}},s.find.ID=function(t,e){if(void 0!==e.getElementById&&_){var n=e.getElementById(t);return n?[n]:[]}}):(s.filter.ID=function(t){var e=t.replace(it,rt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},s.find.ID=function(t,e){if(void 0!==e.getElementById&&_){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),s.find.TAG=a.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):a.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},s.find.CLASS=a.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&_)return e.getElementsByClassName(t)},w=[],b=[],(a.qsa=tt.test(v.querySelectorAll))&&(dt((function(t){y.appendChild(t).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&b.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||b.push("\\["+F+"*(?:value|"+q+")"),t.querySelectorAll("[id~="+E+"-]").length||b.push("~="),t.querySelectorAll(":checked").length||b.push(":checked"),t.querySelectorAll("a#"+E+"+*").length||b.push(".#.+[+~]")})),dt((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=v.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&b.push("name"+F+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&b.push(":enabled",":disabled"),y.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&b.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),b.push(",.*:")}))),(a.matchesSelector=tt.test(x=y.matches||y.webkitMatchesSelector||y.mozMatchesSelector||y.oMatchesSelector||y.msMatchesSelector))&&dt((function(t){a.disconnectedMatch=x.call(t,"*"),x.call(t,"[s!='']:x"),w.push("!=",z)})),b=b.length&&new RegExp(b.join("|")),w=w.length&&new RegExp(w.join("|")),e=tt.test(y.compareDocumentPosition),$=e||tt.test(y.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},M=e?function(t,e){if(t===e)return m=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!a.sortDetached&&e.compareDocumentPosition(t)===n?t===v||t.ownerDocument===k&&$(k,t)?-1:e===v||e.ownerDocument===k&&$(k,e)?1:f?j(f,t)-j(f,e):0:4&n?-1:1)}:function(t,e){if(t===e)return m=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t===v?-1:e===v?1:r?-1:o?1:f?j(f,t)-j(f,e):0;if(r===o)return ft(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?ft(a[i],s[i]):a[i]===k?-1:s[i]===k?1:0},v):v},lt.matches=function(t,e){return lt(t,null,null,e)},lt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==v&&g(t),e=e.replace(G,"='$1']"),a.matchesSelector&&_&&!D[e+" "]&&(!w||!w.test(e))&&(!b||!b.test(e)))try{var n=x.call(t,e);if(n||a.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return lt(e,v,null,[t]).length>0},lt.contains=function(t,e){return(t.ownerDocument||t)!==v&&g(t),$(t,e)},lt.attr=function(t,e){(t.ownerDocument||t)!==v&&g(t);var n=s.attrHandle[e.toLowerCase()],i=n&&A.call(s.attrHandle,e.toLowerCase())?n(t,e,!_):void 0;return void 0!==i?i:a.attributes||!_?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},lt.escape=function(t){return(t+"").replace(ot,at)},lt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},lt.uniqueSort=function(t){var e,n=[],i=0,r=0;if(m=!a.detectDuplicates,f=!a.sortStable&&t.slice(0),t.sort(M),m){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return f=null,t},u=lt.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=u(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=u(e);return n},(s=lt.selectors={cacheLength:50,createPseudo:ht,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(it,rt),t[3]=(t[3]||t[4]||t[5]||"").replace(it,rt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||lt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&lt.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&Y.test(n)&&(e=c(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(it,rt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=T[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&T(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var r=lt.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(V," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,d,p,f,m=o!==a?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!u&&!s,_=!1;if(g){if(o){for(;m;){for(d=e;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(_=(p=(l=(c=(h=(d=g)[E]||(d[E]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===L&&l[1])&&l[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(_=p=0)||f.pop();)if(1===d.nodeType&&++_&&d===e){c[t]=[L,p,_];break}}else if(y&&(_=p=(l=(c=(h=(d=e)[E]||(d[E]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===L&&l[1]),!1===_)for(;(d=++p&&d&&d[m]||(_=p=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++_||(y&&((c=(h=d[E]||(d[E]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[L,_]),d!==e)););return(_-=r)===i||_%i==0&&_/i>=0}}},PSEUDO:function(t,e){var n,i=s.pseudos[t]||s.setFilters[t.toLowerCase()]||lt.error("unsupported pseudo: "+t);return i[E]?i(e):i.length>1?(n=[t,t,"",e],s.setFilters.hasOwnProperty(t.toLowerCase())?ht((function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=j(t,o[a])]=!(n[r]=o[a])})):function(t){return i(t,0,n)}):i}},pseudos:{not:ht((function(t){var e=[],n=[],i=h(t.replace(H,"$1"));return i[E]?ht((function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}})),has:ht((function(t){return function(e){return lt(t,e).length>0}})),contains:ht((function(t){return t=t.replace(it,rt),function(e){return(e.textContent||e.innerText||u(e)).indexOf(t)>-1}})),lang:ht((function(t){return X.test(t||"")||lt.error("unsupported lang: "+t),t=t.replace(it,rt).toLowerCase(),function(e){var n;do{if(n=_?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=r.location&&r.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===y},focus:function(t){return t===v.activeElement&&(!v.hasFocus||v.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:vt(!1),disabled:vt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!s.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:yt((function(){return[0]})),last:yt((function(t,e){return[e-1]})),eq:yt((function(t,e,n){return[n<0?n+e:n]})),even:yt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:yt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:yt((function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t})),gt:yt((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}}).pseudos.nth=s.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[o]=mt(o);for(o in{submit:!0,reset:!0})s.pseudos[o]=gt(o);function bt(){}function wt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function xt(t,e,n){var i=e.dir,r=e.next,o=r||i,a=n&&"parentNode"===o,s=C++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,r);return!1}:function(e,n,u){var l,c,h,d=[L,s];if(u){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,u))return!0}else for(;e=e[i];)if(1===e.nodeType||a)if(c=(h=e[E]||(e[E]={}))[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=c[o])&&l[0]===L&&l[1]===s)return d[2]=l[2];if(c[o]=d,d[2]=t(e,n,u))return!0}return!1}}function $t(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function Et(t,e,n,i,r){for(var o,a=[],s=0,u=t.length,l=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),l&&e.push(s)));return a}function kt(t,e,n,i,r,o){return i&&!i[E]&&(i=kt(i)),r&&!r[E]&&(r=kt(r,o)),ht((function(o,a,s,u){var l,c,h,d=[],p=[],f=a.length,m=o||function(t,e,n){for(var i=0,r=e.length;i<r;i++)lt(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),g=!t||!o&&e?m:Et(m,d,t,s,u),v=n?r||(o?t:f||i)?[]:a:g;if(n&&n(g,v,s,u),i)for(l=Et(v,p),i(l,[],s,u),c=l.length;c--;)(h=l[c])&&(v[p[c]]=!(g[p[c]]=h));if(o){if(r||t){if(r){for(l=[],c=v.length;c--;)(h=v[c])&&l.push(g[c]=h);r(null,v=[],l,u)}for(c=v.length;c--;)(h=v[c])&&(l=r?j(o,h):d[c])>-1&&(o[l]=!(a[l]=h))}}else v=Et(v===a?v.splice(f,v.length):v),r?r(null,a,v,u):N.apply(a,v)}))}function Lt(t){for(var e,n,i,r=t.length,o=s.relative[t[0].type],a=o||s.relative[" "],u=o?1:0,l=xt((function(t){return t===e}),a,!0),c=xt((function(t){return j(e,t)>-1}),a,!0),h=[function(t,n,i){var r=!o&&(i||n!==p)||((e=n).nodeType?l(t,n,i):c(t,n,i));return e=null,r}];u<r;u++)if(n=s.relative[t[u].type])h=[xt($t(h),n)];else{if((n=s.filter[t[u].type].apply(null,t[u].matches))[E]){for(i=++u;i<r&&!s.relative[t[i].type];i++);return kt(u>1&&$t(h),u>1&&wt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(H,"$1"),n,u<i&&Lt(t.slice(u,i)),i<r&&Lt(t=t.slice(i)),i<r&&wt(t))}h.push(n)}return $t(h)}bt.prototype=s.filters=s.pseudos,s.setFilters=new bt,c=lt.tokenize=function(t,e){var n,i,r,o,a,u,l,c=S[t+" "];if(c)return e?0:c.slice(0);for(a=t,u=[],l=s.preFilter;a;){for(o in n&&!(i=W.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(r=[])),n=!1,(i=Z.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(H," ")}),a=a.slice(n.length)),s.filter)!(i=K[o].exec(a))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?lt.error(t):S(t,u).slice(0)},h=lt.compile=function(t,e){var n,i=[],r=[],o=D[t+" "];if(!o){for(e||(e=c(t)),n=e.length;n--;)(o=Lt(e[n]))[E]?i.push(o):r.push(o);(o=D(t,function(t,e){var n=e.length>0,i=t.length>0,r=function(r,o,a,u,l){var c,h,d,f=0,m="0",y=r&&[],b=[],w=p,x=r||i&&s.find.TAG("*",l),$=L+=null==w?1:Math.random()||.1,E=x.length;for(l&&(p=o===v||o||l);m!==E&&null!=(c=x[m]);m++){if(i&&c){for(h=0,o||c.ownerDocument===v||(g(c),a=!_);d=t[h++];)if(d(c,o||v,a)){u.push(c);break}l&&(L=$)}n&&((c=!d&&c)&&f--,r&&y.push(c))}if(f+=m,n&&m!==f){for(h=0;d=e[h++];)d(y,b,o,a);if(r){if(f>0)for(;m--;)y[m]||b[m]||(b[m]=O.call(u));b=Et(b)}N.apply(u,b),l&&!r&&b.length>0&&f+e.length>1&&lt.uniqueSort(u)}return l&&(L=$,p=w),y};return n?ht(r):r}(r,i))).selector=t}return o},d=lt.select=function(t,e,n,i){var r,o,a,u,l,d="function"==typeof t&&t,p=!i&&c(t=d.selector||t);if(n=n||[],1===p.length){if((o=p[0]=p[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===e.nodeType&&_&&s.relative[o[1].type]){if(!(e=(s.find.ID(a.matches[0].replace(it,rt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=K.needsContext.test(t)?0:o.length;r--&&(a=o[r],!s.relative[u=a.type]);)if((l=s.find[u])&&(i=l(a.matches[0].replace(it,rt),nt.test(o[0].type)&&_t(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&wt(o)))return N.apply(n,i),n;break}}return(d||h(t,p))(i,e,!_,n,!e||nt.test(t)&&_t(e.parentNode)||e),n},a.sortStable=E.split("").sort(M).join("")===E,a.detectDuplicates=!!m,g(),a.sortDetached=dt((function(t){return 1&t.compareDocumentPosition(v.createElement("fieldset"))})),dt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||pt("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),a.attributes&&dt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||pt("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),dt((function(t){return null==t.getAttribute("disabled")}))||pt(q,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}));var Ct=r.Sizzle;lt.noConflict=function(){return r.Sizzle===lt&&(r.Sizzle=Ct),lt},void 0===(i=function(){return lt}.call(e,n,e,t))||(t.exports=i)}(window)},function(t,e,n){var i,r;i=[n(2)],void 0===(r=function(t){"use strict";return function(e,n,i){for(var r=[],o=void 0!==i;(e=e[n])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&t(e).is(i))break;r.push(e)}return r}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";return function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2),n(34)],void 0===(r=function(t){"use strict";var e=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;t.Deferred.exceptionHook=function(t,n){window.console&&window.console.warn&&t&&e.test(t.name)&&window.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2)],void 0===(r=function(t){"use strict";t.readyException=function(t){window.setTimeout((function(){throw t}))}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(27),n(51),n(19),n(120)],void 0===(r=function(t,e,n,i,r){"use strict";var o=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,a=/[A-Z]/g;function s(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(a,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:o.test(t)?JSON.parse(t):t)}(n)}catch(t){}r.set(t,e,n)}else n=void 0;return n}return t.extend({hasData:function(t){return r.hasData(t)||i.hasData(t)},data:function(t,e,n){return r.access(t,e,n)},removeData:function(t,e){r.remove(t,e)},_data:function(t,e,n){return i.access(t,e,n)},_removeData:function(t,e){i.remove(t,e)}}),t.fn.extend({data:function(t,o){var a,u,l,c=this[0],h=c&&c.attributes;if(void 0===t){if(this.length&&(l=r.get(c),1===c.nodeType&&!i.get(c,"hasDataAttrs"))){for(a=h.length;a--;)h[a]&&0===(u=h[a].name).indexOf("data-")&&(u=n(u.slice(5)),s(c,u,l[u]));i.set(c,"hasDataAttrs",!0)}return l}return"object"==typeof t?this.each((function(){r.set(this,t)})):e(this,(function(e){var n;if(c&&void 0===e)return void 0!==(n=r.get(c,t))?n:void 0!==(n=s(c,t))?n:void 0;this.each((function(){r.set(this,t,e)}))}),null,o,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){r.remove(this,t)}))}}),t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(86),n(87)],void 0===(r=function(t){"use strict";return t.fn.delay=function(e,n){return e=t.fx&&t.fx.speeds[e]||e,n=n||"fx",this.queue(n,(function(t,n){var i=window.setTimeout(t,e);n.stop=function(){window.clearTimeout(i)}}))},t.fn.delay}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(19),n(121)],void 0===(r=function(t,e,n){"use strict";var i={};function r(e){var n,r=e.ownerDocument,o=e.nodeName,a=i[o];return a||(n=r.body.appendChild(r.createElement(o)),a=t.css(n,"display"),n.parentNode.removeChild(n),"none"===a&&(a="block"),i[o]=a,a)}function o(t,i){for(var o,a,s=[],u=0,l=t.length;u<l;u++)(a=t[u]).style&&(o=a.style.display,i?("none"===o&&(s[u]=e.get(a,"display")||null,s[u]||(a.style.display="")),""===a.style.display&&n(a)&&(s[u]=r(a))):"none"!==o&&(s[u]="none",e.set(a,"display",o)));for(u=0;u<l;u++)null!=s[u]&&(t[u].style.display=s[u]);return t}return t.fn.extend({show:function(){return o(this,!0)},hide:function(){return o(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){n(this)?t(this).show():t(this).hide()}))}}),o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(9),n(25)],void 0===(r=function(t,e){"use strict";var n,i;return n=t.createDocumentFragment().appendChild(t.createElement("div")),(i=t.createElement("input")).setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),n.appendChild(i),e.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,n.innerHTML="<textarea>x</textarea>",e.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue,e}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(90)],void 0===(r=function(t){"use strict";return new RegExp(t.join("|"),"i")}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(52)],void 0===(r=function(t){"use strict";function e(t,n,i,r,o){return new e.prototype.init(t,n,i,r,o)}t.Tween=e,e.prototype={constructor:e,init:function(e,n,i,r,o,a){this.elem=e,this.prop=i,this.easing=o||t.easing._default,this.options=n,this.start=this.now=this.cur(),this.end=r,this.unit=a||(t.cssNumber[i]?"":"px")},cur:function(){var t=e.propHooks[this.prop];return t&&t.get?t.get(this):e.propHooks._default.get(this)},run:function(n){var i,r=e.propHooks[this.prop];return this.options.duration?this.pos=i=t.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):this.pos=i=n,this.now=(this.end-this.start)*i+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):e.propHooks._default.set(this),this}},e.prototype.init.prototype=e.prototype,e.propHooks={_default:{get:function(e){var n;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(n=t.css(e.elem,e.prop,""))&&"auto"!==n?n:0},set:function(e){t.fx.step[e.prop]?t.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[t.cssProps[e.prop]]&&!t.cssHooks[e.prop]?e.elem[e.prop]=e.now:t.style(e.elem,e.prop,e.now+e.unit)}}},e.propHooks.scrollTop=e.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},t.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},t.fx=e.prototype.init,t.fx.step={}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(212),n(134),n(213),n(214)],void 0===(r=function(t){"use strict";return t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(27),n(26),n(94),n(21),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";var o,a=t.expr.attrHandle;t.fn.extend({attr:function(n,i){return e(this,t.attr,n,i,arguments.length>1)},removeAttr:function(e){return this.each((function(){t.removeAttr(this,e)}))}}),t.extend({attr:function(e,n,i){var r,a,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?t.prop(e,n,i):(1===s&&t.isXMLDoc(e)||(a=t.attrHooks[n.toLowerCase()]||(t.expr.match.bool.test(n)?o:void 0)),void 0!==i?null===i?void t.removeAttr(e,n):a&&"set"in a&&void 0!==(r=a.set(e,i,n))?r:(e.setAttribute(n,i+""),i):a&&"get"in a&&null!==(r=a.get(e,n))?r:null==(r=t.find.attr(e,n))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!i.radioValue&&"radio"===e&&n(t,"input")){var r=t.value;return t.setAttribute("type",e),r&&(t.value=r),e}}}},removeAttr:function(t,e){var n,i=0,o=e&&e.match(r);if(o&&1===t.nodeType)for(;n=o[i++];)t.removeAttribute(n)}}),o={set:function(e,n,i){return!1===n?t.removeAttr(e,i):e.setAttribute(i,i),i}},t.each(t.expr.match.bool.source.match(/\w+/g),(function(e,n){var i=a[n]||t.find.attr;a[n]=function(t,e,n){var r,o,s=e.toLowerCase();return n||(o=a[s],a[s]=r,r=null!=i(t,e,n)?s:null,a[s]=o),r}}))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(95),n(7),n(21),n(19),n(17)],void 0===(r=function(t,e,n,i,r){"use strict";function o(t){return t.getAttribute&&t.getAttribute("class")||""}function a(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(i)||[]}t.fn.extend({addClass:function(i){var r,s,u,l,c,h,d,p=0;if(n(i))return this.each((function(e){t(this).addClass(i.call(this,e,o(this)))}));if((r=a(i)).length)for(;s=this[p++];)if(l=o(s),u=1===s.nodeType&&" "+e(l)+" "){for(h=0;c=r[h++];)u.indexOf(" "+c+" ")<0&&(u+=c+" ");l!==(d=e(u))&&s.setAttribute("class",d)}return this},removeClass:function(i){var r,s,u,l,c,h,d,p=0;if(n(i))return this.each((function(e){t(this).removeClass(i.call(this,e,o(this)))}));if(!arguments.length)return this.attr("class","");if((r=a(i)).length)for(;s=this[p++];)if(l=o(s),u=1===s.nodeType&&" "+e(l)+" "){for(h=0;c=r[h++];)for(;u.indexOf(" "+c+" ")>-1;)u=u.replace(" "+c+" "," ");l!==(d=e(u))&&s.setAttribute("class",d)}return this},toggleClass:function(e,i){var s=typeof e,u="string"===s||Array.isArray(e);return"boolean"==typeof i&&u?i?this.addClass(e):this.removeClass(e):n(e)?this.each((function(n){t(this).toggleClass(e.call(this,n,o(this),i),i)})):this.each((function(){var n,i,l,c;if(u)for(i=0,l=t(this),c=a(e);n=c[i++];)l.hasClass(n)?l.removeClass(n):l.addClass(n);else void 0!==e&&"boolean"!==s||((n=o(this))&&r.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===e?"":r.get(this,"__className__")||""))}))},hasClass:function(t){var n,i,r=0;for(n=" "+t+" ";i=this[r++];)if(1===i.nodeType&&(" "+e(o(i))+" ").indexOf(n)>-1)return!0;return!1}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(95),n(94),n(26),n(7),n(17)],void 0===(r=function(t,e,n,i,r){"use strict";var o=/\r/g;t.fn.extend({val:function(e){var n,i,a,s=this[0];return arguments.length?(a=r(e),this.each((function(i){var r;1===this.nodeType&&(null==(r=a?e.call(this,i,t(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=t.map(r,(function(t){return null==t?"":t+""}))),(n=t.valHooks[this.type]||t.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,r,"value")||(this.value=r))}))):s?(n=t.valHooks[s.type]||t.valHooks[s.nodeName.toLowerCase()])&&"get"in n&&void 0!==(i=n.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(o,""):null==i?"":i:void 0}}),t.extend({valHooks:{option:{get:function(n){var i=t.find.attr(n,"value");return null!=i?i:e(t.text(n))}},select:{get:function(e){var n,r,o,a=e.options,s=e.selectedIndex,u="select-one"===e.type,l=u?null:[],c=u?s+1:a.length;for(o=s<0?c:u?s:0;o<c;o++)if(((r=a[o]).selected||o===s)&&!r.disabled&&(!r.parentNode.disabled||!i(r.parentNode,"optgroup"))){if(n=t(r).val(),u)return n;l.push(n)}return l},set:function(e,n){for(var i,r,o=e.options,a=t.makeArray(n),s=o.length;s--;)((r=o[s]).selected=t.inArray(t.valHooks.option.get(r),a)>-1)&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),t.each(["radio","checkbox"],(function(){t.valHooks[this]={set:function(e,n){if(Array.isArray(n))return e.checked=t.inArray(t(e).val(),n)>-1}},n.checkOn||(t.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(19),n(216),n(35),n(96)],void 0===(r=function(t,e,n){"use strict";return n.focusin||t.each({focus:"focusin",blur:"focusout"},(function(n,i){var r=function(e){t.event.simulate(i,e.target,t.event.fix(e))};t.event.special[i]={setup:function(){var t=this.ownerDocument||this,o=e.access(t,i);o||t.addEventListener(n,r,!0),e.access(t,i,(o||0)+1)},teardown:function(){var t=this.ownerDocument||this,o=e.access(t,i)-1;o?e.access(t,i,o):(t.removeEventListener(n,r,!0),e.remove(t,i))}}})),t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(25)],void 0===(r=function(t){"use strict";return t.focusin="onfocusin"in window,t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(36)],void 0===(r=function(t){"use strict";return t._evalUrl=function(e){return t.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},t._evalUrl}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";return window.location}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,r;i=[n(2)],void 0===(r=function(t){"use strict";return t.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new window.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||t.error("Invalid XML: "+e),n},t.parseXML}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(7),n(17),n(62),n(33)],void 0===(r=function(t,e){"use strict";return t.fn.extend({wrapAll:function(n){var i;return this[0]&&(e(n)&&(n=n.call(this[0])),i=t(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&i.insertBefore(this[0]),i.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(n){return e(n)?this.each((function(e){t(this).wrapInner(n.call(this,e))})):this.each((function(){var e=t(this),i=e.contents();i.length?i.wrapAll(n):e.append(n)}))},wrap:function(n){var i=e(n);return this.each((function(e){t(this).wrapAll(i?n.call(this,e):n)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){t(this).replaceWith(this.childNodes)})),this}}),t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(11)],void 0===(r=function(t){"use strict";t.expr.pseudos.hidden=function(e){return!t.expr.pseudos.visible(e)},t.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(25),n(36)],void 0===(r=function(t,e){"use strict";t.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(t){}};var n={0:200,1223:204},i=t.ajaxSettings.xhr();e.cors=!!i&&"withCredentials"in i,e.ajax=i=!!i,t.ajaxTransport((function(t){var r,o;if(e.cors||i&&!t.crossDomain)return{send:function(e,i){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)s.setRequestHeader(a,e[a]);r=function(t){return function(){r&&(r=o=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(n[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=r(),o=s.onerror=s.ontimeout=r("error"),void 0!==s.onabort?s.onabort=o:s.onreadystatechange=function(){4===s.readyState&&window.setTimeout((function(){r&&o()}))},r=r("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(r)throw t}},abort:function(){r&&r()}}}))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(9),n(36)],void 0===(r=function(t,e){"use strict";t.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),t.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return t.globalEval(e),e}}}),t.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),t.ajaxTransport("script",(function(n){var i,r;if(n.crossDomain)return{send:function(o,a){i=t("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(t){i.remove(),r=null,t&&a("error"===t.type?404:200,t.type)}),e.head.appendChild(i[0])},abort:function(){r&&r()}}}))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(7),n(135),n(136),n(36)],void 0===(r=function(t,e,n,i){"use strict";var r=[],o=/(=)\?(?=&|$)|\?\?/;t.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=r.pop()||t.expando+"_"+n++;return this[e]=!0,e}}),t.ajaxPrefilter("json jsonp",(function(n,a,s){var u,l,c,h=!1!==n.jsonp&&(o.test(n.url)?"url":"string"==typeof n.data&&0===(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&o.test(n.data)&&"data");if(h||"jsonp"===n.dataTypes[0])return u=n.jsonpCallback=e(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,h?n[h]=n[h].replace(o,"$1"+u):!1!==n.jsonp&&(n.url+=(i.test(n.url)?"&":"?")+n.jsonp+"="+u),n.converters["script json"]=function(){return c||t.error(u+" was not called"),c[0]},n.dataTypes[0]="json",l=window[u],window[u]=function(){c=arguments},s.always((function(){void 0===l?t(window).removeProp(u):window[u]=l,n[u]&&(n.jsonpCallback=a.jsonpCallback,r.push(u)),c&&e(l)&&l(c[0]),c=l=void 0})),"script"}))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(95),n(7),n(226),n(36),n(33),n(62),n(11)],void 0===(r=function(t,e,n){"use strict";t.fn.load=function(i,r,o){var a,s,u,l=this,c=i.indexOf(" ");return c>-1&&(a=e(i.slice(c)),i=i.slice(0,c)),n(r)?(o=r,r=void 0):r&&"object"==typeof r&&(s="POST"),l.length>0&&t.ajax({url:i,type:s||"GET",dataType:"html",data:r}).done((function(e){u=arguments,l.html(a?t("<div>").append(t.parseHTML(e)).find(a):e)})).always(o&&function(t,e){l.each((function(){o.apply(this,u||[t.responseText,e,t])}))}),this}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(9),n(116),n(130),n(227)],void 0===(r=function(t,e,n,i,r){"use strict";return t.parseHTML=function(o,a,s){return"string"!=typeof o?[]:("boolean"==typeof a&&(s=a,a=!1),a||(r.createHTMLDocument?((u=(a=e.implementation.createHTMLDocument("")).createElement("base")).href=e.location.href,a.head.appendChild(u)):a=e),c=!s&&[],(l=n.exec(o))?[a.createElement(l[1])]:(l=i([o],a,c),c&&c.length&&t(c).remove(),t.merge([],l.childNodes)));var u,l,c},t.parseHTML}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(9),n(25)],void 0===(r=function(t,e){"use strict";var n;return e.createHTMLDocument=((n=t.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===n.childNodes.length),e}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(35)],void 0===(r=function(t){"use strict";t.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,n){t.fn[n]=function(t){return this.on(n,t)}}))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(11),n(87)],void 0===(r=function(t){"use strict";t.expr.pseudos.animated=function(e){return t.grep(t.timers,(function(t){return e===t.elem})).length}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(27),n(9),n(91),n(7),n(92),n(132),n(133),n(93),n(50),n(17),n(52),n(11)],void 0===(r=function(t,e,n,i,r,o,a,s,u,l){"use strict";return t.offset={setOffset:function(e,n,i){var o,a,s,u,l,c,h=t.css(e,"position"),d=t(e),p={};"static"===h&&(e.style.position="relative"),l=d.offset(),s=t.css(e,"top"),c=t.css(e,"left"),("absolute"===h||"fixed"===h)&&(s+c).indexOf("auto")>-1?(u=(o=d.position()).top,a=o.left):(u=parseFloat(s)||0,a=parseFloat(c)||0),r(n)&&(n=n.call(e,i,t.extend({},l))),null!=n.top&&(p.top=n.top-l.top+u),null!=n.left&&(p.left=n.left-l.left+a),"using"in n?n.using.call(e,p):d.css(p)}},t.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(n){t.offset.setOffset(this,e,n)}));var n,i,r=this[0];return r?r.getClientRects().length?(n=r.getBoundingClientRect(),i=r.ownerDocument.defaultView,{top:n.top+i.pageYOffset,left:n.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,n,i,r=this[0],o={top:0,left:0};if("fixed"===t.css(r,"position"))n=r.getBoundingClientRect();else{for(n=this.offset(),i=r.ownerDocument,e=r.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===t.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=t(e).offset()).top+=t.css(e,"borderTopWidth",!0),o.left+=t.css(e,"borderLeftWidth",!0))}return{top:n.top-o.top-t.css(r,"marginTop",!0),left:n.left-o.left-t.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===t.css(e,"position");)e=e.offsetParent;return e||i}))}}),t.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(n,i){var r="pageYOffset"===i;t.fn[n]=function(t){return e(this,(function(t,e,n){var o;if(l(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===n)return o?o[i]:t[e];o?o.scrollTo(r?o.pageXOffset:n,r?n:o.pageYOffset):t[e]=n}),n,t,arguments.length)}})),t.each(["top","left"],(function(e,n){t.cssHooks[n]=s(u.pixelPosition,(function(e,i){if(i)return i=a(e,n),o.test(i)?t(e).position()[n]+"px":i}))})),t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(27),n(50),n(52)],void 0===(r=function(t,e,n){"use strict";return t.each({Height:"height",Width:"width"},(function(i,r){t.each({padding:"inner"+i,content:r,"":"outer"+i},(function(o,a){t.fn[a]=function(s,u){var l=arguments.length&&(o||"boolean"!=typeof s),c=o||(!0===s||!0===u?"margin":"border");return e(this,(function(e,r,o){var s;return n(e)?0===a.indexOf("outer")?e["inner"+i]:e.document.documentElement["client"+i]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+i],s["scroll"+i],e.body["offset"+i],s["offset"+i],s["client"+i])):void 0===o?t.css(e,r,c):t.style(e,r,o,c)}),r,l?s:void 0,l)}}))})),t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(26),n(51),n(32),n(7),n(50),n(60),n(233)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";t.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),t.proxy=function(e,n){var i,o,s;if("string"==typeof n&&(i=e[n],n=e,e=i),r(e))return o=a.call(arguments,2),(s=function(){return e.apply(n||this,o.concat(a.call(arguments)))}).guid=e.guid=e.guid||t.guid++,s},t.holdReady=function(e){e?t.readyWait++:t.ready(!0)},t.isArray=Array.isArray,t.parseJSON=JSON.parse,t.nodeName=e,t.isFunction=r,t.isWindow=o,t.camelCase=n,t.type=i,t.now=Date.now,t.isNumeric=function(e){var n=t.type(e);return("number"===n||"string"===n)&&!isNaN(e-parseFloat(e))}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2),n(35),n(96)],void 0===(r=function(t){"use strict";t.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,n){t.fn[n]=function(t,e){return arguments.length>0?this.on(n,null,t,e):this.trigger(n)}})),t.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2)],void 0===(r=function(n){"use strict";void 0===(r=function(){return n}.apply(e,i=[]))||(t.exports=r)}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2)],void 0===(r=function(t,e){"use strict";var n=window.jQuery,i=window.$;t.noConflict=function(e){return window.$===t&&(window.$=i),e&&window.jQuery===t&&(window.jQuery=n),t},e||(window.jQuery=window.$=t)}.apply(e,i))||(t.exports=r)},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){!function(t){"use strict";var e={objectMaxDepth:5,urlErrorParamsEnabled:!0};function n(t){if(!q(t))return e;j(t.objectMaxDepth)&&(e.objectMaxDepth=i(t.objectMaxDepth)?t.objectMaxDepth:NaN),j(t.urlErrorParamsEnabled)&&X(t.urlErrorParamsEnabled)&&(e.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function i(t){return B(t)&&t>0}function r(t,n){n=n||Error;var i="https://errors.angularjs.org/1.7.4/",r=i.replace(".","\\.")+"[\\s\\S]*",o=new RegExp(r,"g");return function(){var r,a,s=arguments[0],u=arguments[1],l="["+(t?t+":":"")+s+"] ",c=ht(arguments,2).map((function(t){return Bt(t,e.objectMaxDepth)}));if(l+=u.replace(/\{\d+\}/g,(function(t){var e=+t.slice(1,-1);return e<c.length?c[e].replace(o,""):t})),l+="\n"+i+(t?t+"/":"")+s,e.urlErrorParamsEnabled)for(a=0,r="?";a<c.length;a++,r="&")l+=r+"p"+a+"="+encodeURIComponent(c[a]);return new n(l)}}var o,a,s,u,l=/^\/(.+)\/([a-z]*)$/,c=Object.prototype.hasOwnProperty,h=function(t){return U(t)?t.toLowerCase():t},d=function(t){return U(t)?t.toUpperCase():t},p=[].slice,f=[].splice,m=[].push,g=Object.prototype.toString,v=Object.getPrototypeOf,y=r("ng"),_=t.angular||(t.angular={}),b=0;function w(t){if(null==t||G(t))return!1;if(V(t)||U(t)||a&&t instanceof a)return!0;var e="length"in Object(t)&&t.length;return B(e)&&(e>=0&&e-1 in t||"function"==typeof t.item)}function x(t,e,n){var i,r;if(t)if(W(t))for(i in t)"prototype"!==i&&"length"!==i&&"name"!==i&&t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else if(V(t)||w(t)){var o="object"!=typeof t;for(i=0,r=t.length;i<r;i++)(o||i in t)&&e.call(n,t[i],i,t)}else if(t.forEach&&t.forEach!==x)t.forEach(e,n,t);else if(F(t))for(i in t)e.call(n,t[i],i,t);else if("function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else for(i in t)c.call(t,i)&&e.call(n,t[i],i,t);return t}function $(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function E(t){return function(e,n){t(n,e)}}function k(){return++b}function L(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function C(t,e,n){for(var i=t.$$hashKey,r=0,o=e.length;r<o;++r){var a=e[r];if(q(a)||W(a))for(var s=Object.keys(a),u=0,l=s.length;u<l;u++){var c=s[u],h=a[c];n&&q(h)?z(h)?t[c]=new Date(h.valueOf()):Z(h)?t[c]=new RegExp(h):h.nodeName?t[c]=h.cloneNode(!0):et(h)?t[c]=h.clone():(q(t[c])||(t[c]=V(h)?[]:{}),C(t[c],[h],!0)):t[c]=h}}return L(t,i),t}function T(t){return C(t,p.call(arguments,1),!1)}function S(t){return C(t,p.call(arguments,1),!0)}function D(t){return parseInt(t,10)}o=t.document.documentMode;var M=Number.isNaN||function(t){return t!=t};function A(t,e){return T(Object.create(t),e)}function P(){}function O(t){return t}function I(t){return function(){return t}}function N(t){return W(t.toString)&&t.toString!==g}function R(t){return void 0===t}function j(t){return void 0!==t}function q(t){return null!==t&&"object"==typeof t}function F(t){return null!==t&&"object"==typeof t&&!v(t)}function U(t){return"string"==typeof t}function B(t){return"number"==typeof t}function z(t){return"[object Date]"===g.call(t)}function V(t){return Array.isArray(t)||t instanceof Array}function H(t){switch(g.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function W(t){return"function"==typeof t}function Z(t){return"[object RegExp]"===g.call(t)}function G(t){return t&&t.window===t}function Y(t){return t&&t.$evalAsync&&t.$watch}function X(t){return"boolean"==typeof t}function K(t){return t&&W(t.then)}P.$inject=[],O.$inject=[];var J=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var Q=function(t){return U(t)?t.trim():t},tt=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function et(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function nt(t){return h(t.nodeName||t[0]&&t[0].nodeName)}function it(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function rt(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function ot(t,e,n){var r,o,a=[],s=[];if(n=i(n)?n:NaN,e){if((o=e)&&B(o.length)&&J.test(g.call(o))||(r=e,"[object ArrayBuffer]"===g.call(r)))throw y("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw y("cpi","Can't copy! Source and destination are identical.");return V(e)?e.length=0:x(e,(function(t,n){"$$hashKey"!==n&&delete e[n]})),a.push(t),s.push(e),u(t,e,n)}return l(t,n);function u(t,e,n){if(--n<0)return"...";var i,r=e.$$hashKey;if(V(t))for(var o=0,a=t.length;o<a;o++)e.push(l(t[o],n));else if(F(t))for(i in t)e[i]=l(t[i],n);else if(t&&"function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&(e[i]=l(t[i],n));else for(i in t)c.call(t,i)&&(e[i]=l(t[i],n));return L(e,r),e}function l(t,e){if(!q(t))return t;var n=a.indexOf(t);if(-1!==n)return s[n];if(G(t)||Y(t))throw y("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var i=!1,r=function(t){switch(g.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(l(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(W(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===r&&(r=V(t)?[]:Object.create(v(t)),i=!0),a.push(t),s.push(r),i?u(t,r,e):r}}function at(t,e){return t===e||t!=t&&e!=e}function st(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,i,r,o=typeof t;if(o===typeof e&&"object"===o){if(!V(t)){if(z(t))return!!z(e)&&at(t.getTime(),e.getTime());if(Z(t))return!!Z(e)&&t.toString()===e.toString();if(Y(t)||Y(e)||G(t)||G(e)||V(e)||z(e)||Z(e))return!1;for(i in r=jt(),t)if("$"!==i.charAt(0)&&!W(t[i])){if(!st(t[i],e[i]))return!1;r[i]=!0}for(i in e)if(!(i in r)&&"$"!==i.charAt(0)&&j(e[i])&&!W(e[i]))return!1;return!0}if(!V(e))return!1;if((n=t.length)===e.length){for(i=0;i<n;i++)if(!st(t[i],e[i]))return!1;return!0}}return!1}var ut=function(){if(!j(ut.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ut.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ut.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ut.rules},lt=function(){if(j(lt.name_))return lt.name_;var e,n,i,r,o=kt.length;for(n=0;n<o;++n)if(i=kt[n],e=t.document.querySelector("["+i.replace(":","\\:")+"jq]")){r=e.getAttribute(i+"jq");break}return lt.name_=r};function ct(t,e,n){return t.concat(p.call(e,n))}function ht(t,e){return p.call(t,e||0)}function dt(t,e){var n=arguments.length>2?ht(arguments,2):[];return!W(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,ct(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function pt(e,n){var i=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=void 0:G(n)?i="$WINDOW":n&&t.document===n?i="$DOCUMENT":Y(n)&&(i="$SCOPE"),i}function ft(t,e){if(!R(t))return B(e)||(e=e?2:null),JSON.stringify(t,pt,e)}function mt(t){return U(t)?JSON.parse(t):t}var gt=/:/g;function vt(t,e){t=t.replace(gt,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return M(n)?e:n}function yt(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function _t(t,e,n){n=n?-1:1;var i=t.getTimezoneOffset();return yt(t,n*(vt(e,i)-i))}function bt(t){t=a(t).clone().empty();var e=a("<div></div>").append(t).html();try{return t[0].nodeType===Ft?h(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(t,e){return"<"+h(e)}))}catch(t){return h(e)}}function wt(t){try{return decodeURIComponent(t)}catch(t){}}function xt(t){var e={};return x((t||"").split("&"),(function(t){var n,i,r;t&&(i=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(i=t.substring(0,n),r=t.substring(n+1)),j(i=wt(i))&&(r=!j(r)||wt(r),c.call(e,i)?V(e[i])?e[i].push(r):e[i]=[e[i],r]:e[i]=r))})),e}function $t(t){return Et(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Et(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var kt=["ng-","data-ng-","ng:","x-ng-"];var Lt=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var i=n.attributes;return[i.getNamedItem("src"),i.getNamedItem("href"),i.getNamedItem("xlink:href")].every((function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(t.document);function Ct(e,n){var i,r,o={};if(x(kt,(function(t){var n=t+"app";!i&&e.hasAttribute&&e.hasAttribute(n)&&(i=e,r=e.getAttribute(n))})),x(kt,(function(t){var n,o=t+"app";!i&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(i=n,r=n.getAttribute(o))})),i){if(!Lt){try{t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.")}catch(t){}return}o.strictDi=null!==function(t,e){var n,i,r=kt.length;for(i=0;i<r;++i)if(n=kt[i]+e,U(n=t.getAttribute(n)))return n;return null}(i,"strict-di"),n(i,r?[r]:[],o)}}function Tt(e,n,i){q(i)||(i={});i=T({strictDi:!1},i);var r=function(){if((e=a(e)).injector()){var r=e[0]===t.document?"document":bt(e);throw y("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=We(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply((function(){e.data("$injector",i),n(e)(t)}))}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!s.test(t.name))return r();t.name=t.name.replace(s,""),_.resumeBootstrap=function(t){return x(t,(function(t){n.push(t)})),r()},W(_.resumeDeferredBootstrap)&&_.resumeDeferredBootstrap()}function St(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function Dt(t){var e=_.element(t).injector();if(!e)throw y("test","no injector found for element argument to getTestability");return e.get("$$testability")}var Mt=/[A-Z]/g;function At(t,e){return e=e||"_",t.replace(Mt,(function(t,n){return(n?e:"")+t.toLowerCase()}))}var Pt=!1;function Ot(t,e,n){if(!t)throw y("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function It(t,e,n){return n&&V(t)&&(t=t[t.length-1]),Ot(W(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Nt(t,e){if("hasOwnProperty"===t)throw y("badname","hasOwnProperty is not a valid {0} name",e)}function Rt(t){for(var e,n=t[0],i=t[t.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(e||t[r]!==n)&&(e||(e=a(p.call(t,0,r))),e.push(n));return e||t}function jt(){return Object.create(null)}function qt(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!N(t)||V(t)||z(t)?ft(t):t.toString()}return t}var Ft=3;function Ut(t,e){if(V(t)){e=e||[];for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}else if(q(t))for(var r in e=e||{},t)"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r]);return e||t}function Bt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):R(t)?"undefined":"string"!=typeof t?function(t,e){var n=[];return i(e)&&(t=_.copy(t,null,e)),JSON.stringify(t,(function(t,e){if(q(e=pt(t,e))){if(n.indexOf(e)>=0)return"...";n.push(e)}return e}))}(t,e):t}var zt={full:"1.7.4",major:1,minor:7,dot:4,codeName:"interstellar-exploration"};se.expando="ng339";var Vt=se.cache={},Ht=1;se._data=function(t){return this.cache[t[this.expando]]||{}};var Wt=/-([a-z])/g,Zt=/^-ms-/,Gt={mouseleave:"mouseout",mouseenter:"mouseover"},Yt=r("jqLite");function Xt(t,e){return e.toUpperCase()}function Kt(t){return t.replace(Wt,Xt)}var Jt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Qt=/<|&#?\w+;/,te=/<([\w:-]+)/,ee=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ne={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ie(t){return!Qt.test(t)}function re(t){var e=t.nodeType;return 1===e||!e||9===e}function oe(t,e){var n,i,r,o,a=e.createDocumentFragment(),s=[];if(ie(t))s.push(e.createTextNode(t));else{for(n=a.appendChild(e.createElement("div")),i=(te.exec(t)||["",""])[1].toLowerCase(),r=ne[i]||ne._default,n.innerHTML=r[1]+t.replace(ee,"<$1></$2>")+r[2],o=r[0];o--;)n=n.lastChild;s=ct(s,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",x(s,(function(t){a.appendChild(t)})),a}ne.optgroup=ne.option,ne.tbody=ne.tfoot=ne.colgroup=ne.caption=ne.thead,ne.th=ne.td;var ae=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function se(e){if(e instanceof se)return e;var n,i,r,o;if(U(e)&&(e=Q(e),n=!0),!(this instanceof se)){if(n&&"<"!==e.charAt(0))throw Yt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new se(e)}n?_e(this,(i=e,r=r||t.document,(o=Jt.exec(i))?[r.createElement(o[1])]:(o=oe(i,r))?o.childNodes:[])):W(e)?Ee(e):_e(this,e)}function ue(t){return t.cloneNode(!0)}function le(t,e){!e&&re(t)&&a.cleanData([t]),t.querySelectorAll&&a.cleanData(t.querySelectorAll("*"))}function ce(t){var e;for(e in t)return!1;return!0}function he(t){var e=t.ng339,n=e&&Vt[e],i=n&&n.events,r=n&&n.data;r&&!ce(r)||i&&!ce(i)||(delete Vt[e],t.ng339=void 0)}function de(t,e,n,i){if(j(i))throw Yt("offargs","jqLite#off() does not support the `selector` argument");var r=fe(t),o=r&&r.events,a=r&&r.handle;if(a){if(e){var s=function(e){var i=o[e];j(n)&&rt(i||[],n),j(n)&&i&&i.length>0||(t.removeEventListener(e,a),delete o[e])};x(e.split(" "),(function(t){s(t),Gt[t]&&s(Gt[t])}))}else for(e in o)"$destroy"!==e&&t.removeEventListener(e,a),delete o[e];he(t)}}function pe(t,e){var n=t.ng339,i=n&&Vt[n];i&&(e?delete i.data[e]:i.data={},he(t))}function fe(t,e){var n=t.ng339,i=n&&Vt[n];return e&&!i&&(t.ng339=n=++Ht,i=Vt[n]={events:{},data:{},handle:void 0}),i}function me(t,e,n){if(re(t)){var i,r=j(n),o=!r&&e&&!q(e),a=!e,s=fe(t,!o),u=s&&s.data;if(r)u[Kt(e)]=n;else{if(a)return u;if(o)return u&&u[Kt(e)];for(i in e)u[Kt(i)]=e[i]}}}function ge(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function ve(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n;x(e.split(" "),(function(t){t=Q(t),i=i.replace(" "+t+" "," ")})),i!==n&&t.setAttribute("class",Q(i))}}function ye(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n;x(e.split(" "),(function(t){t=Q(t),-1===i.indexOf(" "+t+" ")&&(i+=t+" ")})),i!==n&&t.setAttribute("class",Q(i))}}function _e(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;i<n;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function be(t,e){return we(t,"$"+(e||"ngController")+"Controller")}function we(t,e,n){9===t.nodeType&&(t=t.documentElement);for(var i=V(e)?e:[e];t;){for(var r=0,o=i.length;r<o;r++)if(j(n=a.data(t,i[r])))return n;t=t.parentNode||11===t.nodeType&&t.host}}function xe(t){for(le(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function $e(t,e){e||le(t);var n=t.parentNode;n&&n.removeChild(t)}function Ee(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var ke=se.prototype={ready:Ee,toString:function(){var t=[];return x(this,(function(e){t.push(""+e)})),"["+t.join(", ")+"]"},eq:function(t){return a(t>=0?this[t]:this[this.length+t])},length:0,push:m,sort:[].sort,splice:[].splice},Le={};x("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(t){Le[h(t)]=t}));var Ce={};x("input,select,option,textarea,button,form,details".split(","),(function(t){Ce[t]=!0}));var Te={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Se(t,e){var n=Le[e.toLowerCase()];return n&&Ce[nt(t)]&&n}function De(t,e,n){n.call(t,e)}function Me(t,e,n){var i=e.relatedTarget;i&&(i===t||ae.call(t,i))||n.call(t,e)}function Ae(){this.$get=function(){return T(se,{hasClass:function(t,e){return t.attr&&(t=t[0]),ge(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),ye(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),ve(t,e)}})}}function Pe(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return n="function"===i||"object"===i&&null!==t?t.$$hashKey=i+":"+(e||k)():i+":"+t}x({data:me,removeData:pe,hasData:function(t){for(var e in Vt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)pe(t[e]),de(t[e])}},(function(t,e){se[e]=t})),x({data:me,inheritedData:we,scope:function(t){return a.data(t,"$scope")||we(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return a.data(t,"$isolateScope")||a.data(t,"$isolateScopeNoTemplate")},controller:be,injector:function(t){return we(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:ge,css:function(t,e,n){if(e=function(t){return Kt(t.replace(Zt,"ms-"))}(e),!j(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var i,r=t.nodeType;if(r!==Ft&&2!==r&&8!==r&&t.getAttribute){var o=h(e),a=Le[o];if(!j(n))return i=t.getAttribute(e),a&&null!==i&&(i=o),null===i?void 0:i;null===n||!1===n&&a?t.removeAttribute(e):t.setAttribute(e,a?o:n)}},prop:function(t,e,n){if(!j(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(R(e)){var n=t.nodeType;return 1===n||n===Ft?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(R(e)){if(t.multiple&&"select"===nt(t)){var n=[];return x(t.options,(function(t){t.selected&&n.push(t.value||t.text)})),n}return t.value}t.value=e},html:function(t,e){if(R(e))return t.innerHTML;le(t,!0),t.innerHTML=e},empty:xe},(function(t,e){se.prototype[e]=function(e,n){var i,r,o=this.length;if(t!==xe&&R(2===t.length&&t!==ge&&t!==be?e:n)){if(q(e)){for(i=0;i<o;i++)if(t===me)t(this[i],e);else for(r in e)t(this[i],r,e[r]);return this}for(var a=t.$dv,s=R(a)?Math.min(o,1):o,u=0;u<s;u++){var l=t(this[u],e,n);a=a?a+l:l}return a}for(i=0;i<o;i++)t(this[i],e,n);return this}})),x({removeData:pe,on:function(t,e,n,i){if(j(i))throw Yt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(re(t)){var r=fe(t,!0),o=r.events,a=r.handle;a||(a=r.handle=function(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type],o=r?r.length:0;if(o){if(R(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=r.specialHandlerWrapper||De;o>1&&(r=Ut(r));for(var u=0;u<o;u++)n.isImmediatePropagationStopped()||s(t,n,r[u])}};return n.elem=t,n}(t,o));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],u=s.length,l=function(e,i,r){var s=o[e];s||((s=o[e]=[]).specialHandlerWrapper=i,"$destroy"===e||r||t.addEventListener(e,a)),s.push(n)};u--;)e=s[u],Gt[e]?(l(Gt[e],Me),l(e,void 0,!0)):l(e)}},off:de,one:function(t,e,n){(t=a(t)).on(e,(function i(){t.off(e,n),t.off(e,i)})),t.on(e,n)},replaceWith:function(t,e){var n,i=t.parentNode;le(t),x(new se(e),(function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e}))},children:function(t){var e=[];return x(t.childNodes,(function(t){1===t.nodeType&&e.push(t)})),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(1===n||11===n)for(var i=0,r=(e=new se(e)).length;i<r;i++){var o=e[i];t.appendChild(o)}},prepend:function(t,e){if(1===t.nodeType){var n=t.firstChild;x(new se(e),(function(e){t.insertBefore(e,n)}))}},wrap:function(t,e){var n,i,r;n=t,i=a(e).eq(0).clone()[0],(r=n.parentNode)&&r.replaceChild(i,n),i.appendChild(n)},remove:$e,detach:function(t){$e(t,!0)},after:function(t,e){var n=t,i=t.parentNode;if(i)for(var r=0,o=(e=new se(e)).length;r<o;r++){var a=e[r];i.insertBefore(a,n.nextSibling),n=a}},addClass:ye,removeClass:ve,toggleClass:function(t,e,n){e&&x(e.split(" "),(function(e){var i=n;R(i)&&(i=!ge(t,e)),(i?ye:ve)(t,e)}))},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:ue,triggerHandler:function(t,e,n){var i,r,o,a=e.type||e,s=fe(t),u=s&&s.events,l=u&&u[a];l&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:P,type:a,target:t},e.type&&(i=T(i,e)),r=Ut(l),o=n?[i].concat(n):[i],x(r,(function(e){i.isImmediatePropagationStopped()||e.apply(t,o)})))}},(function(t,e){se.prototype[e]=function(e,n,i){for(var r,o=0,s=this.length;o<s;o++)R(r)?j(r=t(this[o],e,n,i))&&(r=a(r)):_e(r,t(this[o],e,n,i));return j(r)?r:this}})),se.prototype.bind=se.prototype.on,se.prototype.unbind=se.prototype.off;var Oe=Object.create(null);function Ie(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Ie.prototype={_idx:function(t){return t!==this._lastKey&&(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return M(t)?Oe:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},has:function(t){return t=this._transformKey(t),-1!==this._idx(t)},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Ne=Ie,Re=[function(){this.$get=[function(){return Ne}]}],je=/^([^(]+?)=>/,qe=/^[^(]*\(\s*([^)]*)\)/m,Fe=/,/,Ue=/^\s*(_?)(\S+?)\1\s*$/,Be=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ze=r("$injector");function Ve(t){return Function.prototype.toString.call(t)}function He(t){var e=Ve(t).replace(Be,"");return e.match(je)||e.match(qe)}function We(t,e){e=!0===e;var n={},i=[],r=new Ne,a={$provide:{provider:p(f),factory:p(g),service:p((function(t,e){return g(t,["$injector",function(t){return t.instantiate(e)}])})),value:p((function(t,e){return g(t,I(e),!1)})),constant:p((function(t,e){Nt(t,"constant"),a[t]=e,l[t]=e})),decorator:function(t,e){var n=s.get(t+"Provider"),i=n.$get;n.$get=function(){var t=h.invoke(i,n);return h.invoke(e,null,{$delegate:t})}}}},s=a.$injector=y(a,(function(t,e){throw _.isString(e)&&i.push(e),ze("unpr","Unknown provider: {0}",i.join(" <- "))})),l={},c=y(l,(function(t,e){var n=s.get(t+"Provider",e);return h.invoke(n.$get,n,void 0,t)})),h=c;a.$injectorProvider={$get:I(c)},h.modules=s.modules=jt();var d=v(t);return(h=c.get("$injector")).strictDi=e,x(d,(function(t){t&&h.invoke(t)})),h.loadNewModules=function(t){x(v(t),(function(t){t&&h.invoke(t)}))},h;function p(t){return function(e,n){if(!q(e))return t(e,n);x(e,E(t))}}function f(t,e){if(Nt(t,"service"),(W(e)||V(e))&&(e=s.instantiate(e)),!e.$get)throw ze("pget","Provider '{0}' must define $get factory method.",t);return a[t+"Provider"]=e}function m(t,e){return function(){var n=h.invoke(e,this);if(R(n))throw ze("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function g(t,e,n){return f(t,{$get:!1!==n?m(t,e):e})}function v(t){Ot(R(t)||V(t),"modulesToLoad","not an array");var e,n=[];return x(t,(function(t){if(!r.get(t)){r.set(t,!0);try{U(t)?(e=u(t),h.modules[t]=e,n=n.concat(v(e.requires)).concat(e._runBlocks),i(e._invokeQueue),i(e._configBlocks)):W(t)?n.push(s.invoke(t)):V(t)?n.push(s.invoke(t)):It(t,"module")}catch(e){throw V(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),ze("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function i(t){var e,n;for(e=0,n=t.length;e<n;e++){var i=t[e],r=s.get(i[0]);r[i[1]].apply(r,i[2])}}})),n}function y(t,r){function s(e,o){if(t.hasOwnProperty(e)){if(t[e]===n)throw ze("cdep","Circular dependency found: {0}",e+" <- "+i.join(" <- "));return t[e]}try{return i.unshift(e),t[e]=n,t[e]=r(e,o),t[e]}catch(i){throw t[e]===n&&delete t[e],i}finally{i.shift()}}function u(t,n,i){for(var r=[],o=We.$$annotate(t,e,i),a=0,u=o.length;a<u;a++){var l=o[a];if("string"!=typeof l)throw ze("itkn","Incorrect injection token! Expected service name as string, got {0}",l);r.push(n&&n.hasOwnProperty(l)?n[l]:s(l,i))}return r}return{invoke:function(t,e,n,i){"string"==typeof n&&(i=n,n=null);var r=u(t,n,i);return V(t)&&(t=t[t.length-1]),function(t){if(o||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return X(e)||(e=t.$$ngIsClass=/^class\b/.test(Ve(t))),e}(t)?(r.unshift(null),new(Function.prototype.bind.apply(t,r))):t.apply(e,r)},instantiate:function(t,e,n){var i=V(t)?t[t.length-1]:t,r=u(t,e,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))},get:s,annotate:We.$$annotate,has:function(e){return a.hasOwnProperty(e+"Provider")||t.hasOwnProperty(e)}}}}function Ze(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,i,r){var o=n.document;function s(t){if(t){t.scrollIntoView();var e=function(){var t=u.yOffset;if(W(t))t=t();else if(et(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else B(t)||(t=0);return t}();if(e){var i=t.getBoundingClientRect().top;n.scrollBy(0,i-e)}}else n.scrollTo(0,0)}function u(t){var e,n,r;(t=U(t)?t:B(t)?t.toString():i.hash())?(e=o.getElementById(t))?s(e):(n=o.getElementsByName(t),r=null,Array.prototype.some.call(n,(function(t){if("a"===nt(t))return r=t,!0})),(e=r)?s(e):"top"===t&&s(null)):s(null)}return e&&r.$watch((function(){return i.hash()}),(function(e,n){var i,o;e===n&&""===e||(i=function(){r.$evalAsync(u)},"complete"===(o=o||t).document.readyState?o.setTimeout(i):a(o).on("load",i))})),u}]}We.$$annotate=function(t,e,n){var i,r;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw U(n)&&n||(n=t.name||function(t){var e=He(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),ze("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);x(He(t)[1].split(Fe),(function(t){t.replace(Ue,(function(t,e,n){i.push(n)}))}))}t.$inject=i}}else V(t)?(It(t[r=t.length-1],"fn"),i=t.slice(0,r)):It(t,"fn",!0);return i};var Ge=r("$animate");function Ye(t,e){return t||e?t?e?(V(t)&&(t=t.join(" ")),V(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function Xe(t){return q(t)?t:{}}var Ke=function(){this.$get=P},Je=function(){var t=new Ne,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){return{enabled:P,on:P,off:P,pin:P,push:function(a,s,u,l){l&&l(),(u=u||{}).from&&a.css(u.from),u.to&&a.css(u.to),(u.addClass||u.removeClass)&&function(n,a,s){var u=t.get(n)||{},l=r(u,a,!0),c=r(u,s,!1);(l||c)&&(t.set(n,u),e.push(n),1===e.length&&i.$$postDigest(o))}(a,u.addClass,u.removeClass);var c=new n;return c.complete(),c}};function r(t,e,n){var i=!1;return e&&x(e=U(e)?e.split(" "):V(e)?e:[],(function(e){e&&(i=!0,t[e]=n)})),i}function o(){x(e,(function(e){var n=t.get(e);if(n){var i=function(t){U(t)&&(t=t.split(" "));var e=jt();return x(t,(function(t){t.length&&(e[t]=!0)})),e}(e.attr("class")),r="",o="";x(n,(function(t,e){t!==!!i[e]&&(t?r+=(r.length?" ":"")+e:o+=(o.length?" ":"")+e)})),x(e,(function(t){r&&ye(t,r),o&&ve(t,o)})),t.delete(e)}})),e.length=0}}]},Qe=["$provide",function(t){var e=this,n=null,i=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw Ge("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";e.$$registeredAnimations[n.substr(1)]=r,t.factory(r,i)},this.customFilter=function(t){return 1===arguments.length&&(i=W(t)?t:null),i},this.classNameFilter=function(t){if(1===arguments.length&&(n=t instanceof RegExp?t:null)){var e=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(e.test(n.toString()))throw n=null,Ge("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate")}return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(1===n.nodeType)return n}}(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(n,i,r,o){return i=i&&a(i),r=r&&a(r),e(n,i=i||r.parent(),r),t.push(n,"enter",Xe(o))},move:function(n,i,r,o){return i=i&&a(i),r=r&&a(r),e(n,i=i||r.parent(),r),t.push(n,"move",Xe(o))},leave:function(e,n){return t.push(e,"leave",Xe(n),(function(){e.remove()}))},addClass:function(e,n,i){return(i=Xe(i)).addClass=Ye(i.addclass,n),t.push(e,"addClass",i)},removeClass:function(e,n,i){return(i=Xe(i)).removeClass=Ye(i.removeClass,n),t.push(e,"removeClass",i)},setClass:function(e,n,i,r){return(r=Xe(r)).addClass=Ye(r.addClass,n),r.removeClass=Ye(r.removeClass,i),t.push(e,"setClass",r)},animate:function(e,n,i,r,o){return(o=Xe(o)).from=o.from?T(o.from,n):n,o.to=o.to?T(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=Ye(o.tempClasses,r),t.push(e,"animate",o)}}}]}],tn=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t((function(){for(var t=0;t<e.length;t++)e[t]();e=[]}))}return function(){var t=!1;return n((function(){t=!0})),function(e){t?e():n(e)}}}]},en=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,i,r){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){i()?function(t){r(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function i(){if(n===t.length)return void e(!0);t[n]((function(t){!1!==t?(n++,i()):e(!1)}))}()},o.all=function(t,e){var n=0,i=!0;function r(r){i=i&&r,++n===t.length&&e(i)}x(t,(function(t){t.done(r)}))},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:P,getPromise:function(){if(!this.promise){var e=this;this.promise=t((function(t,n){e.done((function(e){!1===e?n():t()}))}))}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick((function(){e._resolve(t)})))},_resolve:function(t){2!==this._state&&(x(this._doneCallbacks,(function(e){e(t)})),this._doneCallbacks.length=0,this._state=2)}},o}]},nn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,i){var r=i||{};r.$$prepared||(r=ot(r)),r.cleanupStyles&&(r.from=r.to=null),r.from&&(e.css(r.from),r.from=null);var o,a=new n;return{start:s,end:s};function s(){return t((function(){!function(){r.addClass&&(e.addClass(r.addClass),r.addClass=null);r.removeClass&&(e.removeClass(r.removeClass),r.removeClass=null);r.to&&(e.css(r.to),r.to=null)}(),o||a.complete(),o=!0})),a}}}]};function rn(t,e,n,i,r){var o=this,s=t.location,u=t.history,l=t.setTimeout,c=t.clearTimeout,h={},d=r(n);o.isMock=!1,o.$$completeOutstandingRequest=d.completeTask,o.$$incOutstandingRequestCount=d.incTaskCount,o.notifyWhenNoOutstandingRequests=d.notifyWhenNoPendingTasks;var p,f,m=s.href,g=e.find("base"),v=null,y=i.history?function(){try{return u.state}catch(t){}}:P;E(),o.url=function(e,n,r){if(R(r)&&(r=null),s!==t.location&&(s=t.location),u!==t.history&&(u=t.history),e){var a=f===r;if(m===e&&(!i.history||a))return o;var l=m&&ni(m)===ni(e);return m=e,f=r,!i.history||l&&a?(l||(v=e),n?s.replace(e):l?s.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):s.href=e,s.href!==e&&(v=e)):(u[n?"replaceState":"pushState"](r,"",e),E()),v&&(v=e),o}return function(t){return t.replace(/#$/,"")}(v||s.href)},o.state=function(){return p};var _=[],b=!1;function w(){v=null,k()}var $=null;function E(){st(p=R(p=y())?null:p,$)&&(p=$),$=p,f=p}function k(){var t=f;E(),m===o.url()&&t===p||(m=o.url(),f=p,x(_,(function(t){t(o.url(),p)})))}o.onUrlChange=function(e){return b||(i.history&&a(t).on("popstate",w),a(t).on("hashchange",w),b=!0),_.push(e),e},o.$$applicationDestroyed=function(){a(t).off("hashchange popstate",w)},o.$$checkUrlChange=k,o.baseHref=function(){var t=g.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},o.defer=function(t,e,n){var i;return e=e||0,n=n||d.DEFAULT_TASK_TYPE,d.incTaskCount(n),i=l((function(){delete h[i],d.completeTask(t,n)}),e),h[i]=n,i},o.defer.cancel=function(t){if(h.hasOwnProperty(t)){var e=h[t];return delete h[t],c(t),d.completeTask(P,e),!0}return!1}}function on(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(t,e,n,i,r){return new rn(t,i,e,n,r)}]}function an(){this.$get=function(){var t={};function e(e,n){if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var i=0,o=T({},n,{id:e}),a=jt(),s=n&&n.capacity||Number.MAX_VALUE,u=jt(),l=null,c=null;return t[e]={put:function(t,e){if(!R(e)){if(s<Number.MAX_VALUE)h(u[t]||(u[t]={key:t}));return t in a||i++,a[t]=e,i>s&&this.remove(c.key),e}},get:function(t){if(s<Number.MAX_VALUE){var e=u[t];if(!e)return;h(e)}return a[t]},remove:function(t){if(s<Number.MAX_VALUE){var e=u[t];if(!e)return;e===l&&(l=e.p),e===c&&(c=e.n),d(e.n,e.p),delete u[t]}t in a&&(delete a[t],i--)},removeAll:function(){a=jt(),i=0,u=jt(),l=c=null},destroy:function(){a=null,o=null,u=null,delete t[e]},info:function(){return T({},o,{size:i})}};function h(t){t!==l&&(c?c===t&&(c=t.n):c=t,d(t.n,t.p),d(t,l),(l=t).n=null)}function d(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return x(t,(function(t,n){e[n]=t.info()})),e},e.get=function(e){return t[e]},e}}function sn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var un=r("$compile");var ln=new function(){};function cn(e,n){var i={},r=/^\s*directive:\s*([\w-]+)\s+(.*)$/,s=/(([\w-]+)(?::([^;]+))?;?)/,u=function(t){var e,n={},i=t.split(",");for(e=0;e<i.length;e++)n[i[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,d=/^(on[a-z]+|formaction)$/,p=jt();function f(t,e,n){var i=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,r=jt();return x(t,(function(t,o){if((t=t.trim())in p)r[o]=p[t];else{var a=t.match(i);if(!a)throw un("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");r[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(p[t]=r[o])}})),r}function m(t,e){var n={isolateScope:null,bindToController:null};if(q(t.scope)&&(!0===t.bindToController?(n.bindToController=f(t.scope,e,!0),n.isolateScope={}):n.isolateScope=f(t.scope,e,!1)),q(t.bindToController)&&(n.bindToController=f(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw un("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,r){return Ot(n,"name"),Nt(n,"directive"),U(n)?(!function(t){var e=t.charAt(0);if(!e||e!==h(e))throw un("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw un("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),Ot(r,"directiveFactory"),i.hasOwnProperty(n)||(i[n]=[],e.factory(n+"Directive",["$injector","$exceptionHandler",function(t,e){var r=[];return x(i[n],(function(i,o){try{var a=t.invoke(i);W(a)?a={compile:I(a)}:!a.compile&&a.link&&(a.compile=I(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=function(t){var e=t.require||t.controller&&t.name;return!V(e)&&q(e)&&x(e,(function(t,n){var i=t.match(l);t.substring(i[0].length)||(e[n]=i[0]+n)})),e}(a),a.restrict=function(t,e){if(t&&(!U(t)||!/[EACM]/.test(t)))throw un("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(a.restrict,n),a.$$moduleName=i.$$moduleName,r.push(a)}catch(t){e(t)}})),r}])),i[n].push(r)):x(n,E(t)),this},this.component=function t(e,n){if(!U(e))return x(e,E(dt(this,t))),this;var i=n.controller||function(){};function r(t){function e(e){return W(e)||V(e)?function(n,i){return t.invoke(e,this,{$element:n,$attrs:i})}:e}var r=n.template||n.templateUrl?n.template:"",o={controller:i,controllerAs:_n(n.controller)||n.controllerAs||"$ctrl",template:e(r),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return x(n,(function(t,e){"$"===e.charAt(0)&&(o[e]=t)})),o}return x(n,(function(t,e){"$"===e.charAt(0)&&(r[e]=t,W(i)&&(i[e]=t))})),r.$inject=["$injector"],this.directive(e,r)},this.aHrefSanitizationWhitelist=function(t){return j(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return j(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var v=!0;this.debugInfoEnabled=function(t){return j(t)?(v=t,this):v};var y=!1;this.strictComponentBindingsEnabled=function(t){return j(t)?(y=t,this):y};var _=10;this.onChangesTtl=function(t){return arguments.length?(_=t,this):_};var b=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(b=t,this):b};var w=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(w=t,this):w};var $=jt();this.addPropertySecurityContext=function(t,e,n){var i=t.toLowerCase()+"|"+e.toLowerCase();if(i in $&&$[i]!==n)throw un("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",t,e,$[i],n);return $[i]=n,this},function(){function t(t,e){x(e,(function(e){$[e.toLowerCase()]=t}))}t(qi.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),t(qi.CSS,["*|style"]),t(qi.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),t(qi.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),t(qi.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,n,p,f,E,k,L,C,S){var D,M=/^\w/,I=t.document.createElement("div"),N=b,j=w,F=_;function B(){try{if(!--F)throw D=void 0,un("infchng","{0} $onChanges() iterations reached. Aborting!\n",_);L.$apply((function(){for(var t=0,e=D.length;t<e;++t)try{D[t]()}catch(t){p(t)}D=void 0}))}finally{F++}}function z(t,e){if(!t)return t;if(!U(t))throw un("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',e,t.toString());for(var n="",i=Q(t),r=/\s/.test(i)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,o=i.split(r),a=Math.floor(o.length/2),s=0;s<a;s++){var u=2*s;n+=C.getTrustedMediaUrl(Q(o[u])),n+=" "+Q(o[u+1])}var l=Q(o[2*s]).split(/\s/);return n+=C.getTrustedMediaUrl(Q(l[0])),2===l.length&&(n+=" "+Q(l[1])),n}function Z(t,e){if(e){var n,i,r,o=Object.keys(e);for(n=0,i=o.length;n<i;n++)this[r=o[n]]=e[r]}else this.$attr={};this.$$element=t}function G(t,e){try{t.addClass(e)}catch(t){}}Z.prototype={$normalize:fn,$addClass:function(t){t&&t.length>0&&S.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&S.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=mn(t,e);n&&n.length&&S.addClass(this.$$element,n);var i=mn(e,t);i&&i.length&&S.removeClass(this.$$element,i)},$set:function(t,e,n,i){var r=Se(this.$$element[0],t),o=Te[t],a=t;r?(this.$$element.prop(t,e),i=r):o&&(this[o]=e,a=o),this[t]=e,i?this.$attr[t]=i:(i=this.$attr[t])||(this.$attr[t]=i=At(t,"-")),"img"===nt(this.$$element)&&"srcset"===t&&(this[t]=e=z(e,"$set('srcset', value)")),!1!==n&&(null===e||R(e)?this.$$element.removeAttr(i):M.test(i)?this.$$element.attr(i,e):function(t,e,n){I.innerHTML="<span "+e+">";var i=I.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,t.attributes.setNamedItem(r)}(this.$$element[0],i,e));var s=this.$$observers;s&&x(s[a],(function(t){try{t(e)}catch(t){p(t)}}))},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=jt()),r=i[t]||(i[t]=[]);return r.push(e),L.$evalAsync((function(){r.$$inter||!n.hasOwnProperty(t)||R(n[t])||e(n[t])})),function(){rt(r,e)}}};var K=n.startSymbol(),J=n.endSymbol(),tt="{{"===K&&"}}"===J?O:function(t){return t.replace(/\{\{/g,K).replace(/}}/g,J)},et=/^ng(Attr|Prop|On)([A-Z].*)$/,it=/^(.+)Start$/;return ot.$$addBindingInfo=v?function(t,e){var n=t.data("$binding")||[];V(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:P,ot.$$addBindingClass=v?function(t){G(t,"ng-binding")}:P,ot.$$addScopeInfo=v?function(t,e,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(r,e)}:P,ot.$$addScopeClass=v?function(t,e){G(t,e?"ng-isolate-scope":"ng-scope")}:P,ot.$$createComment=function(e,n){var i="";return v&&(i=" "+(e||"")+": ",n&&(i+=n+" ")),t.document.createComment(i)},ot;function ot(t,e,n,i,r){t instanceof a||(t=a(t));var o=ut(t,e,t,n,i,r);ot.$$addScopeClass(t);var s=null;return function(e,n,i){if(!t)throw un("multilink","This element has already been linked.");Ot(e,"scope"),r&&r.needsNewScope&&(e=e.$parent.$new());var u,l,c,h=(i=i||{}).parentBoundTranscludeFn,d=i.transcludeControllers,p=i.futureParentElement;if(h&&h.$$boundTransclude&&(h=h.$$boundTransclude),s||(l=(u=p)&&u[0],s=l&&"foreignobject"!==nt(l)&&g.call(l).match(/SVG/)?"svg":"html"),c="html"!==s?a(Ct(s,a("<div></div>").append(t).html())):n?ke.clone.call(t):t,d)for(var f in d)c.data("$"+f+"Controller",d[f].instance);return ot.$$addScopeInfo(c,e),n&&n(c,e),o&&o(e,c,c,h),n||(t=o=null),c}}function ut(t,e,n,i,r,s){for(var u,l,c,h,d,p,f,m=[],g=V(t)||t instanceof a,v=0;v<t.length;v++)u=new Z,11===o&&lt(t,v,g),(c=(l=pt(t[v],[],u,0===v?i:void 0,r)).length?vt(l,t[v],u,e,n,null,[],[],s):null)&&c.scope&&ot.$$addScopeClass(u.$$element),d=c&&c.terminal||!(h=t[v].childNodes)||!h.length?null:ut(h,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e),(c||d)&&(m.push(v,c,d),p=!0,f=f||c),s=null;return p?function(t,n,i,r){var o,s,u,l,c,h,d,p,g;if(f){var v=n.length;for(g=new Array(v),c=0;c<m.length;c+=3)d=m[c],g[d]=n[d]}else g=n;for(c=0,h=m.length;c<h;)u=g[m[c++]],o=m[c++],s=m[c++],o?(o.scope?(l=t.$new(),ot.$$addScopeInfo(a(u),l)):l=t,p=o.transcludeOnThisElement?ct(t,o.transclude,r):!o.templateOnThisElement&&r?r:!r&&e?ct(t,e):null,o(s,l,u,i,p)):s&&s(t,u.childNodes,void 0,r)}:null}function lt(t,e,n){var i,r=t[e],o=r.parentNode;if(r.nodeType===Ft)for(;(i=o?r.nextSibling:t[e+1])&&i.nodeType===Ft;)r.nodeValue=r.nodeValue+i.nodeValue,i.parentNode&&i.parentNode.removeChild(i),n&&i===t[e+1]&&t.splice(e+1,1)}function ct(t,e,n){function i(i,r,o,a,s){return i||((i=t.$new(!1,s)).$$transcluded=!0),e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var r=i.$$slots=jt();for(var o in e.$$slots)e.$$slots[o]?r[o]=ct(t,e.$$slots[o],n):r[o]=null;return i}function pt(t,e,i,o,a){var u,l,c,h=t.nodeType,d=i.$attr;switch(h){case 1:wt(e,fn(l=nt(t)),"E",o,a);for(var p,f,m,g,v,y=t.attributes,_=0,b=y&&y.length;_<b;_++){var w,x=!1,$=!1,E=!1,k=!1,L=!1;f=(p=y[_]).name,g=p.value,(v=(m=fn(f.toLowerCase())).match(et))?(E="Attr"===v[1],k="Prop"===v[1],L="On"===v[1],f=f.replace(dn,"").toLowerCase().substr(4+v[1].length).replace(/_(.)/g,(function(t,e){return e.toUpperCase()}))):(w=m.match(it))&&xt(w[1])&&(x=f,$=f.substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),k||L?(i[m]=g,d[m]=p.name,k?St(t,e,m,f):Dt(e,m,f)):(d[m=fn(f.toLowerCase())]=f,!E&&i.hasOwnProperty(m)||(i[m]=g,Se(t,m)&&(i[m]=!0)),Mt(t,e,g,m,E),wt(e,m,"A",o,a,x,$))}if("input"===l&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!j)break;if(q(c=t.className)&&(c=c.animVal),U(c)&&""!==c)for(;u=s.exec(c);)wt(e,m=fn(u[2]),"C",o,a)&&(i[m]=Q(u[3])),c=c.substr(u.index+u[0].length);break;case Ft:!function(t,e){var i=n(e,!0);i&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&ot.$$addBindingClass(e),function(t,e){var r=e.parent();n||ot.$$addBindingClass(r),ot.$$addBindingInfo(r,i.expressions),t.$watch(i,(function(t){e[0].nodeValue=t}))}}})}(e,t.nodeValue);break;case 8:if(!N)break;!function(t,e,n,i,o){try{var a=r.exec(t.nodeValue);if(a){var s=fn(a[1]);wt(e,s,"M",i,o)&&(n[s]=Q(a[2]))}}catch(t){}}(t,e,i,o,a)}return e.sort(kt),e}function ft(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw un("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);1===t.nodeType&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),i.push(t),t=t.nextSibling}while(r>0);else i.push(t);return a(i)}function mt(t,e,n){return function(i,r,o,a,s){return r=ft(r[0],e,n),t(i,r,o,a,s)}}function gt(t,e,n,i,r,o){var a;return t?ot(e,n,i,r,o):function(){return a||(a=ot(e,n,i,r,o),e=n=o=null),a.apply(this,arguments)}}function vt(e,n,i,r,o,s,u,l,c){c=c||{};for(var h,d,f,m,g,v=-Number.MAX_VALUE,y=c.newScopeDirective,_=c.controllerDirectives,b=c.newIsolateScopeDirective,w=c.templateDirective,$=c.nonTlbTranscludeDirective,E=!1,L=!1,C=c.hasElementTranscludeDirective,S=i.$$element=a(n),D=s,M=r,A=!1,P=!1,O=0,I=e.length;O<I;O++){var N=(h=e[O]).$$start,j=h.$$end;if(N&&(S=ft(n,N,j)),f=void 0,v>h.priority)break;if((g=h.scope)&&(h.templateUrl||(q(g)?(Lt("new/isolated scope",b||y,h,S),b=h):Lt("new/isolated scope",b,h,S)),y=y||h),d=h.name,!A&&(h.replace&&(h.templateUrl||h.template)||h.transclude&&!h.$$tlb)){for(var F,U=O+1;F=e[U++];)if(F.transclude&&!F.$$tlb||F.replace&&(F.templateUrl||F.template)){P=!0;break}A=!0}if(!h.templateUrl&&h.controller&&(_=_||jt(),Lt("'"+d+"' controller",_[d],h,S),_[d]=h),g=h.transclude)if(E=!0,h.$$tlb||(Lt("transclusion",$,h,S),$=h),"element"===g)C=!0,v=h.priority,f=S,S=i.$$element=a(ot.$$createComment(d,i[d])),n=S[0],Pt(o,ht(f),n),M=gt(P,f,r,v,D&&D.name,{nonTlbTranscludeDirective:$});else{var B=jt();if(q(g)){f=t.document.createDocumentFragment();var z=jt(),H=jt();for(var G in x(g,(function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,z[t]=e,B[e]=null,H[e]=n})),x(S.contents(),(function(e){var n=z[fn(nt(e))];n?(H[n]=!0,B[n]=B[n]||t.document.createDocumentFragment(),B[n].appendChild(e)):f.appendChild(e)})),x(H,(function(t,e){if(!t)throw un("reqslot","Required transclusion slot `{0}` was not filled.",e)})),B)if(B[G]){var X=a(B[G].childNodes);B[G]=gt(P,X,r)}f=a(f.childNodes)}else f=a(ue(n)).contents();S.empty(),(M=gt(P,f,r,void 0,void 0,{needsNewScope:h.$$isolateScope||h.$$newScope})).$$slots=B}if(h.template)if(L=!0,Lt("template",w,h,S),w=h,g=W(h.template)?h.template(S,i):h.template,g=tt(g),h.replace){if(D=h,f=ie(g)?[]:gn(Ct(h.templateNamespace,Q(g))),n=f[0],1!==f.length||1!==n.nodeType)throw un("tplrt","Template for directive '{0}' must have exactly one root element. {1}",d,"");Pt(o,S,n);var K={$attr:{}},J=pt(n,[],K),et=e.splice(O+1,e.length-(O+1));(b||y)&&_t(J,b,y),e=e.concat(J).concat(et),$t(i,K),I=e.length}else S.html(g);if(h.templateUrl)L=!0,Lt("template",w,h,S),w=h,h.replace&&(D=h),at=Et(e.splice(O,e.length-O),S,i,o,E&&M,u,l,{controllerDirectives:_,newScopeDirective:y!==h&&y,newIsolateScopeDirective:b,templateDirective:w,nonTlbTranscludeDirective:$}),I=e.length;else if(h.compile)try{m=h.compile(S,i,M);var it=h.$$originalDirective||h;W(m)?rt(null,dt(it,m),N,j):m&&rt(dt(it,m.pre),dt(it,m.post),N,j)}catch(t){p(t,bt(S))}h.terminal&&(at.terminal=!0,v=Math.max(v,h.priority))}return at.scope=y&&!0===y.scope,at.transcludeOnThisElement=E,at.templateOnThisElement=L,at.transclude=M,c.hasElementTranscludeDirective=C,at;function rt(t,e,n,i){t&&(n&&(t=mt(t,n,i)),t.require=h.require,t.directiveName=d,(b===h||h.$$isolateScope)&&(t=It(t,{isolateScope:!0})),u.push(t)),e&&(n&&(e=mt(e,n,i)),e.require=h.require,e.directiveName=d,(b===h||h.$$isolateScope)&&(e=It(e,{isolateScope:!0})),l.push(e))}function at(t,e,r,o,s){var c,h,d,f,m,g,v,$,E,L;for(var S in n===r?(E=i,$=i.$$element):E=new Z($=a(r),i),m=e,b?f=e.$new(!0):y&&(m=e.$parent),s&&((v=function(t,e,n,i){var r;Y(t)||(i=n,n=e,e=t,t=void 0);C&&(r=g);n||(n=C?$.parent():$);if(!i)return s(t,e,r,n,P);var o=s.$$slots[i];if(o)return o(t,e,r,n,P);if(R(o))throw un("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,bt($))}).$$boundTransclude=s,v.isSlotFilled=function(t){return!!s.$$slots[t]}),_&&(g=function(t,e,n,i,r,o,a){var s=jt();for(var u in i){var l=i[u],c={$scope:l===a||l.$$isolateScope?r:o,$element:t,$attrs:e,$transclude:n},h=l.controller;"@"===h&&(h=e[l.name]);var d=k(h,c,!0,l.controllerAs);s[l.name]=d,t.data("$"+l.name+"Controller",d.instance)}return s}($,E,v,_,f,e,b)),b&&(ot.$$addScopeInfo($,f,!0,!(w&&(w===b||w===b.$$originalDirective))),ot.$$addScopeClass($,!0),f.$$isolateBindings=b.$$isolateBindings,(L=qt(e,E,f,f.$$isolateBindings,b)).removeWatches&&f.$on("$destroy",L.removeWatches)),g){var D=_[S],M=g[S],A=D.$$bindings.bindToController;M.instance=M(),$.data("$"+D.name+"Controller",M.instance),M.bindingInfo=qt(m,E,M.instance,A,D)}for(x(_,(function(t,e){var n=t.require;t.bindToController&&!V(n)&&q(n)&&T(g[e].instance,yt(e,n,$,g))})),x(g,(function(t){var e=t.instance;if(W(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){p(t)}if(W(e.$onInit))try{e.$onInit()}catch(t){p(t)}W(e.$doCheck)&&(m.$watch((function(){e.$doCheck()})),e.$doCheck()),W(e.$onDestroy)&&m.$on("$destroy",(function(){e.$onDestroy()}))})),c=0,h=u.length;c<h;c++)Nt(d=u[c],d.isolateScope?f:e,$,E,d.require&&yt(d.directiveName,d.require,$,g),v);var P=e;for(b&&(b.template||null===b.templateUrl)&&(P=f),t&&t(P,r.childNodes,void 0,s),c=l.length-1;c>=0;c--)Nt(d=l[c],d.isolateScope?f:e,$,E,d.require&&yt(d.directiveName,d.require,$,g),v);x(g,(function(t){var e=t.instance;W(e.$postLink)&&e.$postLink()}))}}function yt(t,e,n,i){var r;if(U(e)){var o=e.match(l),a=e.substring(o[0].length),s=o[1]||o[3],u="?"===o[2];if("^^"===s?n=n.parent():r=(r=i&&i[a])&&r.instance,!r){var c="$"+a+"Controller";r="^^"===s&&n[0]&&9===n[0].nodeType?null:s?n.inheritedData(c):n.data(c)}if(!r&&!u)throw un("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(V(e)){r=[];for(var h=0,d=e.length;h<d;h++)r[h]=yt(t,e[h],n,i)}else q(e)&&(r={},x(e,(function(e,o){r[o]=yt(t,e,n,i)})));return r||null}function _t(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i]=A(t[i],{$$isolateScope:e,$$newScope:n})}function wt(t,n,r,o,a,s,u){if(n===a)return null;var l=null;if(i.hasOwnProperty(n))for(var c,h=e.get(n+"Directive"),d=0,p=h.length;d<p;d++)if(c=h[d],(R(o)||o>c.priority)&&-1!==c.restrict.indexOf(r)){if(s&&(c=A(c,{$$start:s,$$end:u})),!c.$$bindings){var f=c.$$bindings=m(c,c.name);q(f.isolateScope)&&(c.$$isolateBindings=f.isolateScope)}t.push(c),l=c}return l}function xt(t){if(i.hasOwnProperty(t))for(var n=e.get(t+"Directive"),r=0,o=n.length;r<o;r++)if(n[r].multiElement)return!0;return!1}function $t(t,e){var n=e.$attr,i=t.$attr;x(t,(function(i,r){"$"!==r.charAt(0)&&(e[r]&&e[r]!==i&&(i.length?i+=("style"===r?";":" ")+e[r]:i=e[r]),t.$set(r,i,!0,n[r]))})),x(e,(function(e,r){t.hasOwnProperty(r)||"$"===r.charAt(0)||(t[r]=e,"class"!==r&&"style"!==r&&(i[r]=n[r]))}))}function Et(t,e,n,i,r,o,s,u){var l,c,h=[],d=e[0],m=t.shift(),g=A(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),v=W(m.templateUrl)?m.templateUrl(e,n):m.templateUrl,y=m.templateNamespace;return e.empty(),f(v).then((function(p){var f,_,b,w;if(p=tt(p),m.replace){if(b=ie(p)?[]:gn(Ct(y,Q(p))),f=b[0],1!==b.length||1!==f.nodeType)throw un("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,v);_={$attr:{}},Pt(i,e,f);var $=pt(f,[],_);q(m.scope)&&_t($,!0),t=$.concat(t),$t(n,_)}else f=d,e.html(p);for(t.unshift(g),l=vt(t,f,n,r,e,m,o,s,u),x(i,(function(t,n){t===f&&(i[n]=e[0])})),c=ut(e[0].childNodes,r);h.length;){var E=h.shift(),k=h.shift(),L=h.shift(),C=h.shift(),T=e[0];if(!E.$$destroyed){if(k!==d){var S=k.className;u.hasElementTranscludeDirective&&m.replace||(T=ue(f)),Pt(L,a(k),T),G(a(T),S)}w=l.transcludeOnThisElement?ct(E,l.transclude,C):C,l(c,E,T,i,w)}}h=null})).catch((function(t){H(t)&&p(t)})),function(t,e,n,i,r){var o=r;e.$$destroyed||(h?h.push(e,n,i,o):(l.transcludeOnThisElement&&(o=ct(e,l.transclude,r)),l(c,e,n,i,o)))}}function kt(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function Lt(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e)throw un("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,bt(i))}function Ct(e,n){switch(e=h(e||"html")){case"svg":case"math":var i=t.document.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function Tt(t){return z(C.valueOf(t),"ng-prop-srcset")}function St(t,e,n,i){if(d.test(i))throw un("nodomevents","Property bindings for HTML DOM event properties are disallowed");var r=nt(t),o=function(t,e){var n=e.toLowerCase();return $[t+"|"+n]||$["*|"+n]}(r,i),a=O;"srcset"!==i||"img"!==r&&"source"!==r?o&&(a=C.getTrusted.bind(C,o)):a=Tt,e.push({priority:100,compile:function(t,e){var r=E(e[n]),o=E(e[n],(function(t){return C.valueOf(t)}));return{pre:function(t,e){function n(){var n=r(t);e.prop(i,a(n))}n(),t.$watch(o,n)}}}})}function Dt(t,e,n){t.push(ko(E,L,p,e,n,!1))}function Mt(t,e,i,r,o){var a=nt(t),s=function(t,e){return"srcdoc"===e?C.HTML:"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(t)?C.RESOURCE_URL:C.MEDIA_URL:"xlinkHref"===e?"image"===t?C.MEDIA_URL:"a"===t?C.URL:C.RESOURCE_URL:"form"===t&&"action"===e||"base"===t&&"href"===e||"link"===t&&"href"===e?C.RESOURCE_URL:"a"!==t||"href"!==e&&"ngHref"!==e?void 0:C.URL}(a,r),l=!o,c=u[r]||o,h=n(i,l,s,c);if(h){if("multiple"===r&&"select"===a)throw un("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",bt(t));if(d.test(r))throw un("nodomevents","Interpolations for HTML DOM event attributes are disallowed");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var a=o.$$observers||(o.$$observers=jt()),u=o[r];u!==i&&(h=u&&n(u,!0,s,c),i=u),h&&(o[r]=h(t),(a[r]||(a[r]=[])).$$inter=!0,(o.$$observers&&o.$$observers[r].$$scope||t).$watch(h,(function(t,e){"class"===r&&t!==e?o.$updateClass(t,e):o.$set(r,t)})))}}}})}}function Pt(e,n,i){var r,o,s=n[0],u=n.length,l=s.parentNode;if(e)for(r=0,o=e.length;r<o;r++)if(e[r]===s){e[r++]=i;for(var c=r,h=c+u-1,d=e.length;c<d;c++,h++)h<d?e[c]=e[h]:delete e[c];e.length-=u-1,e.context===s&&(e.context=i);break}l&&l.replaceChild(i,s);var p=t.document.createDocumentFragment();for(r=0;r<u;r++)p.appendChild(n[r]);for(a.hasData(s)&&(a.data(i,a.data(s)),a(s).off("$destroy")),a.cleanData(p.querySelectorAll("*")),r=1;r<u;r++)delete n[r];n[0]=i,n.length=1}function It(t,e){return T((function(){return t.apply(null,arguments)}),t,e)}function Nt(t,e,n,i,r,o){try{t(e,n,i,r,o)}catch(t){p(t,bt(n))}}function Rt(t,e){if(y)throw un("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function qt(t,e,i,r,o){var a,s=[],u={};function l(e,n,r){W(i.$onChanges)&&!at(n,r)&&(D||(t.$$postDigest(B),D=[]),a||(a={},D.push(h)),a[e]&&(r=a[e].previousValue),a[e]=new hn(r,n))}function h(){i.$onChanges(a),a=void 0}return x(r,(function(r,a){var h,d,p,f,m,g=r.attrName,v=r.optional;switch(r.mode){case"@":v||c.call(e,g)||(Rt(g,o.name),i[a]=e[g]=void 0),m=e.$observe(g,(function(t){if(U(t)||X(t)){var e=i[a];l(a,t,e),i[a]=t}})),e.$$observers[g].$$scope=t,U(h=e[g])?i[a]=n(h)(t):X(h)&&(i[a]=h),u[a]=new hn(ln,i[a]),s.push(m);break;case"=":if(!c.call(e,g)){if(v)break;Rt(g,o.name),e[g]=void 0}if(v&&!e[g])break;d=E(e[g]),f=d.literal?st:at,p=d.assign||function(){throw h=i[a]=d(t),un("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[g],g,o.name)},h=i[a]=d(t);var y=function(e){return f(e,i[a])||(f(e,h)?p(t,e=i[a]):i[a]=e),h=e};y.$stateful=!0,m=r.collection?t.$watchCollection(e[g],y):t.$watch(E(e[g],y),null,d.literal),s.push(m);break;case"<":if(!c.call(e,g)){if(v)break;Rt(g,o.name),e[g]=void 0}if(v&&!e[g])break;var _=(d=E(e[g])).literal,b=i[a]=d(t);u[a]=new hn(ln,i[a]),m=t[r.collection?"$watchCollection":"$watch"](d,(function(t,e){if(e===t){if(e===b||_&&st(e,b))return;e=b}l(a,t,e),i[a]=t})),s.push(m);break;case"&":if(v||c.call(e,g)||Rt(g,o.name),(d=e.hasOwnProperty(g)?E(e[g]):P)===P&&v)break;i[a]=function(e){return d(t,e)}}})),{initialChanges:u,removeWatches:s.length&&function(){for(var t=0,e=s.length;t<e;++t)s[t]()}}}}]}function hn(t,e){this.previousValue=t,this.currentValue=e}cn.$inject=["$provide","$$sanitizeUriProvider"],hn.prototype.isFirstChange=function(){return this.previousValue===ln};var dn=/^((?:x|data)[:\-_])/i,pn=/[:\-_]+(.)/g;function fn(t){return t.replace(dn,"").replace(pn,(function(t,e,n){return n?e.toUpperCase():e}))}function mn(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var o=0;o<i.length;o++){for(var a=i[o],s=0;s<r.length;s++)if(a===r[s])continue t;n+=(n.length>0?" ":"")+a}return n}function gn(t){var e=(t=a(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(8===n.nodeType||n.nodeType===Ft&&""===n.nodeValue.trim())&&f.call(t,e,1)}return t}var vn=r("$controller"),yn=/^(\S+)(\s+as\s+([\w$]+))?$/;function _n(t,e){if(e&&U(e))return e;if(U(t)){var n=yn.exec(t);if(n)return n[3]}}function bn(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Nt(e,"controller"),q(e)?T(t,e):t[e]=n},this.$get=["$injector",function(e){return function(i,r,o,a){var s,u,l,c;if(o=!0===o,a&&U(a)&&(c=a),U(i)){if(!(u=i.match(yn)))throw vn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);if(l=u[1],c=c||u[3],!(i=t.hasOwnProperty(l)?t[l]:function(t,e,n){if(!e)return t;for(var i,r=e.split("."),o=t,a=r.length,s=0;s<a;s++)i=r[s],t&&(t=(o=t)[i]);return!n&&W(t)?dt(o,t):t}(r.$scope,l,!0)))throw vn("ctrlreg","The controller with the name '{0}' is not registered.",l);It(i,l,!0)}if(o){var h=(V(i)?i[i.length-1]:i).prototype;return s=Object.create(h||null),c&&n(r,c,s,l||i.name),T((function(){var t=e.invoke(i,s,r,l);return t!==s&&(q(t)||W(t))&&(s=t,c&&n(r,c,s,l||i.name)),s}),{instance:s,identifier:c})}return s=e.instantiate(i,r,l),c&&n(r,c,s,l||i.name),s};function n(t,e,n,i){if(!t||!q(t.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,e);t.$scope[e]=n}}]}function wn(){this.$get=["$window",function(t){return a(t.document)}]}function xn(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],i=n&&n.hidden;function r(){i=n.hidden}return t.on("visibilitychange",r),e.$on("$destroy",(function(){t.off("visibilitychange",r)})),function(){return i}}]}function $n(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var En=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof a&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},kn={"Content-Type":"application/json;charset=utf-8"},Ln=/^\[|^\{(?!\{)/,Cn={"[":/]$/,"{":/}$/},Tn=/^\)]\}',?\n/,Sn=r("$http");function Dn(t){return q(t)?z(t)?t.toISOString():ft(t):t}function Mn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return $(t,(function(t,n){null===t||R(t)||W(t)||(V(t)?x(t,(function(t){e.push(Et(n)+"="+Et(Dn(t)))})):e.push(Et(n)+"="+Et(Dn(t))))})),e.join("&")}}}function An(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,i,r){V(n)?x(n,(function(e,n){t(e,i+"["+(q(e)?n:"")+"]")})):q(n)&&!z(n)?$(n,(function(e,n){t(e,i+(r?"":"[")+n+(r?"":"]"))})):(W(n)&&(n=n()),e.push(Et(i)+"="+(null==n?"":Et(Dn(n)))))}(t,"",!0),e.join("&")}}}function Pn(t,e){if(U(t)){var n=t.replace(Tn,"").trim();if(n){var i=e("Content-Type"),r=i&&0===i.indexOf("application/json");if(r||(a=(o=n).match(Ln))&&Cn[a[0]].test(o))try{t=mt(n)}catch(e){if(!r)return t;throw Sn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}var o,a;return t}function On(t){var e,n=jt();function i(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return U(t)?x(t.split("\n"),(function(t){e=t.indexOf(":"),i(h(Q(t.substr(0,e))),Q(t.substr(e+1)))})):q(t)&&x(t,(function(t,e){i(h(e),Q(t))})),n}function In(t){var e;return function(n){if(e||(e=On(t)),n){var i=e[h(n)];return void 0===i&&(i=null),i}return e}}function Nn(t,e,n,i){return W(i)?i(t,e,n):(x(i,(function(i){t=i(t,e,n)})),t)}function Rn(t){return 200<=t&&t<300}function jn(){var t=this.defaults={transformResponse:[Pn],transformRequest:[function(t){return!q(t)||(e=t,"[object File]"===g.call(e))||function(t){return"[object Blob]"===g.call(t)}(t)||function(t){return"[object FormData]"===g.call(t)}(t)?t:ft(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ut(kn),put:Ut(kn),patch:Ut(kn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return j(t)?(e=!!t,this):e};var n=this.interceptors=[],i=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,a,s,u,l,c,p,f){var m=u("$http");t.paramSerializer=U(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var g=[];x(n,(function(t){g.unshift(U(t)?p.get(t):p.invoke(t))}));var v,y=(v=[er].concat(i.map(nr)),function(t){var e=nr(t);return v.some(ir.bind(null,e))});function _(n){if(!q(n))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!U(f.valueOf(n.url)))throw r("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var i=T({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);i.headers=function(e){var n,i,r,o=t.headers,a=T({},e.headers);o=T({},o.common,o[h(e.method)]);t:for(n in o){for(r in i=h(n),a)if(h(r)===i)continue t;a[n]=o[n]}return function(t,e){var n,i={};return x(t,(function(t,r){W(t)?null!=(n=t(e))&&(i[r]=n):i[r]=t})),i}(a,Ut(e))}(n),i.method=d(i.method),i.paramSerializer=U(i.paramSerializer)?p.get(i.paramSerializer):i.paramSerializer,o.$$incOutstandingRequestCount("$http");var u=[],v=[],b=c.resolve(i);return x(g,(function(t){(t.request||t.requestError)&&u.unshift(t.request,t.requestError),(t.response||t.responseError)&&v.push(t.response,t.responseError)})),b=w(b,u),b=(b=w(b=b.then((function(n){var i=n.headers,r=Nn(n.data,In(i),void 0,n.transformRequest);R(r)&&x(i,(function(t,e){"content-type"===h(e)&&delete i[e]}));R(n.withCredentials)&&!R(t.withCredentials)&&(n.withCredentials=t.withCredentials);return function(n,i){var r,o,u=c.defer(),d=u.promise,p=n.headers,g="jsonp"===h(n.method),v=n.url;g?v=f.getTrustedResourceUrl(v):U(v)||(v=f.valueOf(v));v=function(t,e){e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e);return t}(v,n.paramSerializer(n.params)),g&&(v=function(t,e){var n=t.split("?");if(n.length>2)throw Sn("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return x(xt(n[1]),(function(n,i){if("JSON_CALLBACK"===n)throw Sn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(i===e)throw Sn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)})),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(v,n.jsonpCallbackParam));_.pendingRequests.push(n),d.then(k,k),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(r=q(n.cache)?n.cache:q(t.cache)?t.cache:m);r&&(j(o=r.get(v))?K(o)?o.then(E,E):V(o)?$(o[1],o[0],Ut(o[2]),o[3],o[4]):$(o,200,{},"OK","complete"):r.put(v,d));if(R(o)){var b=y(n.url)?s()[n.xsrfCookieName||t.xsrfCookieName]:void 0;b&&(p[n.xsrfHeaderName||t.xsrfHeaderName]=b),a(n.method,v,i,(function(t,n,i,o,a){r&&(Rn(t)?r.put(v,[t,n,On(i),o,a]):r.remove(v));function s(){$(n,t,i,o,a)}e?l.$applyAsync(s):(s(),l.$$phase||l.$apply())}),p,n.timeout,n.withCredentials,n.responseType,w(n.eventHandlers),w(n.uploadEventHandlers))}return d;function w(t){if(t){var n={};return x(t,(function(t,i){n[i]=function(n){function i(){t(n)}e?l.$applyAsync(i):l.$$phase?i():l.$apply(i)}})),n}}function $(t,e,i,r,o){(Rn(e=e>=-1?e:0)?u.resolve:u.reject)({data:t,status:e,headers:In(i),config:n,statusText:r,xhrStatus:o})}function E(t){$(t.data,t.status,Ut(t.headers()),t.statusText,t.xhrStatus)}function k(){var t=_.pendingRequests.indexOf(n);-1!==t&&_.pendingRequests.splice(t,1)}}(n,r).then($,$)})),v)).finally((function(){o.$$completeOutstandingRequest(P,"$http")}));function w(t,e){for(var n=0,i=e.length;n<i;){var r=e[n++],o=e[n++];t=t.then(r,o)}return e.length=0,t}function $(t){var e=T({},t);return e.data=Nn(t.data,t.headers,t.status,i.transformResponse),Rn(t.status)?e:c.reject(e)}}return _.pendingRequests=[],function(t){x(arguments,(function(t){_[t]=function(e,n){return _(T({},n||{},{method:t,url:e}))}}))}("get","delete","head","jsonp"),function(t){x(arguments,(function(t){_[t]=function(e,n,i){return _(T({},i||{},{method:t,url:e,data:n}))}}))}("post","put","patch"),_.defaults=t,_}]}function qn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Fn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,i){return function(t,e,n,i,r){return function(o,a,s,u,l,c,d,p,f,m){if(a=a||t.url(),"jsonp"===h(o))var g=i.createCallback(a),v=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=r.createElement("script"),a=null;return o.type="text/javascript",o.src=t,o.async=!0,a=function(t){o.removeEventListener("load",a),o.removeEventListener("error",a),r.body.removeChild(o),o=null;var s=-1,u="unknown";t&&("load"!==t.type||i.wasCalled(e)||(t={type:"error"}),u=t.type,s="error"===t.type?404:200),n&&n(s,u)},o.addEventListener("load",a),o.addEventListener("error",a),r.body.appendChild(o),a}(a,g,(function(t,e){var n=200===t&&i.getResponse(g);$(u,t,n,"",e,"complete"),i.removeCallback(g)}));else{var y=e(o,a),_=!1;y.open(o,a,!0),x(l,(function(t,e){j(t)&&y.setRequestHeader(e,t)})),y.onload=function(){var t=y.statusText||"",e="response"in y?y.response:y.responseText,n=1223===y.status?204:y.status;0===n&&(n=e?200:"file"===nr(a).protocol?404:0),$(u,n,e,y.getAllResponseHeaders(),t,"complete")};if(y.onerror=function(){$(u,-1,null,null,"","error")},y.ontimeout=function(){$(u,-1,null,null,"","timeout")},y.onabort=function(){$(u,-1,null,null,"",_?"timeout":"abort")},x(f,(function(t,e){y.addEventListener(e,t)})),x(m,(function(t,e){y.upload.addEventListener(e,t)})),d&&(y.withCredentials=!0),p)try{y.responseType=p}catch(t){if("json"!==p)throw t}y.send(R(s)?null:s)}if(c>0)var b=n((function(){w("timeout")}),c);else K(c)&&c.then((function(){w(j(c.$$timeoutId)?"timeout":"abort")}));function w(t){_="timeout"===t,v&&v(),y&&y.abort()}function $(t,e,i,r,o,a){j(b)&&n.cancel(b),v=y=null,t(e,i,r,o,a)}}}(t,i,t.defer,e,n[0])}]}var Un=_.$interpolateMinErr=r("$interpolate");function Bn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){var o=t.length,a=e.length,s=new RegExp(t.replace(/./g,l),"g"),u=new RegExp(e.replace(/./g,l),"g");function l(t){return"\\\\\\"+t}function c(n){return n.replace(s,t).replace(u,e)}function h(t,e,n,i){var r=t.$watch((function(t){return r(),i(t)}),e,n);return r}function d(s,u,l,d){var p=l===r.URL||l===r.MEDIA_URL;if(!s.length||-1===s.indexOf(t)){if(u&&!p)return;var f=c(s);p&&(f=r.getTrusted(l,f));var m=I(f);return m.exp=s,m.expressions=[],m.$$watchDelegate=h,m}d=!!d;for(var g,v,y,_,b,w=0,x=[],$=s.length,E=[],k=[];w<$;){if(-1===(g=s.indexOf(t,w))||-1===(v=s.indexOf(e,g+o))){w!==$&&E.push(c(s.substring(w)));break}w!==g&&E.push(c(s.substring(w,g))),_=s.substring(g+o,v),x.push(_),w=v+a,k.push(E.length),E.push("")}b=1===E.length&&1===k.length;var L=p&&b?void 0:function(t){try{return t=l&&!p?r.getTrusted(l,t):r.valueOf(t),d&&!j(t)?t:qt(t)}catch(t){i(Un.interr(s,t))}};if(y=x.map((function(t){return n(t,L)})),!u||x.length){var C=function(t){for(var e=0,n=x.length;e<n;e++){if(d&&R(t[e]))return;E[k[e]]=t[e]}return p?r.getTrusted(l,b?E[0]:E.join("")):(l&&E.length>1&&Un.throwNoconcat(s),E.join(""))};return T((function(t){var e=0,n=x.length,r=new Array(n);try{for(;e<n;e++)r[e]=y[e](t);return C(r)}catch(t){i(Un.interr(s,t))}}),{exp:s,expressions:x,$$watchDelegate:function(t,e){var n;return t.$watchGroup(y,(function(i,r){var o=C(i);e.call(this,o,i!==r?n:o,t),n=o}))}})}}return d.startSymbol=function(){return t},d.endSymbol=function(){return e},d}]}Un.throwNoconcat=function(t){throw Un("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Un.interr=function(t,e){return Un("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var zn=r("$interval");function Vn(){this.$get=["$$intervalFactory","$window",function(t,e){var n={},i=function(t){e.clearInterval(t),delete n[t]},r=t((function(t,i,r){var o=e.setInterval(t,i);return n[o]=r,o}),i);return r.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw zn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!n.hasOwnProperty(t.$$intervalId))return!1;var e=t.$$intervalId,r=n[e];return Oi(r.promise),r.reject("canceled"),i(e),!0},r}]}function Hn(){this.$get=["$browser","$q","$$q","$rootScope",function(t,e,n,i){return function(r,o){return function(a,s,u,l){var c=arguments.length>4,h=c?ht(arguments,4):[],d=0,p=j(l)&&!l,f=(p?n:e).defer(),m=f.promise;function g(){c?a.apply(null,h):a(d)}function v(){p?t.defer(g):i.$evalAsync(g),f.notify(d++),u>0&&d>=u&&(f.resolve(d),o(m.$$intervalId)),p||i.$apply()}return u=j(u)?u:0,m.$$intervalId=r(v,s,f,p),m}}}]}var Wn=function(){this.$get=function(){var t=_.callbacks,e={};return{createCallback:function(n){var i="_"+(t.$$counter++).toString(36),r="angular.callbacks."+i,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(i);return e[r]=t[i]=o,r},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var i=e[n];delete t[i.id],delete e[n]}}}},Zn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Gn={http:80,https:443,ftp:21},Yn=r("$location");function Xn(t,e,n){var i,r=(i=[],x(e,(function(t,e){V(t)?x(t,(function(t){i.push(Et(e,!0)+(!0===t?"":"="+Et(t,!0)))})):i.push(Et(e,!0)+(!0===t?"":"="+Et(t,!0)))})),i.length?i.join("&"):""),o=n?"#"+$t(n):"";return function(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=$t(e[n].replace(/%2F/g,"/"));return e.join("/")}(t)+(r?"?"+r:"")+o}function Kn(t,e){var n=nr(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=D(n.port)||Gn[n.protocol]||null}var Jn=/^\s*[\\/]{2,}/;function Qn(t,e,n){if(Jn.test(t))throw Yn("badpath",'Invalid url "{0}".',t);var i="/"!==t.charAt(0);i&&(t="/"+t);var r=nr(t),o=i&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname;e.$$path=function(t,e){for(var n=t.split("/"),i=n.length;i--;)n[i]=decodeURIComponent(n[i]),e&&(n[i]=n[i].replace(/\//g,"%2F"));return n.join("/")}(o,n),e.$$search=xt(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function ti(t,e){return t.slice(0,e.length)===e}function ei(t,e){if(ti(e,t))return e.substr(t.length)}function ni(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function ii(t,e,n){this.$$html5=!0,n=n||"",Kn(t,this),this.$$parse=function(t){var n=ei(e,t);if(!U(n))throw Yn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);Qn(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(t){return e+t.substr(1)},this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(j(o=ei(t,i))?(a=o,s=n&&j(o=ei(n,o))?e+(ei("/",o)||o):t+a):j(o=ei(e,i))?s=e+o:e===i+"/"&&(s=e),s&&this.$$parse(s),!!s);var o,a,s}}function ri(t,e,n){Kn(t,this),this.$$parse=function(i){var r,o=ei(t,i)||ei(e,i);R(o)||"#"!==o.charAt(0)?this.$$html5?r=o:(r="",R(o)&&(t=i,this.replace())):R(r=ei(n,o))&&(r=o),Qn(r,this,!1),this.$$path=function(t,e,n){var i,r=/^\/[A-Z]:(\/.*)/;ti(e,n)&&(e=e.replace(n,""));if(r.exec(e))return t;return(i=r.exec(t))?i[1]:t}(this.$$path,r,t),this.$$compose()},this.$$normalizeUrl=function(e){return t+(e?n+e:"")},this.$$parseLinkUrl=function(e,n){return ni(t)===ni(e)&&(this.$$parse(e),!0)}}function oi(t,e,n){this.$$html5=!0,ri.apply(this,arguments),this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(t===ni(i)?o=i:(a=ei(e,i))?o=t+n+a:e===i+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,a},this.$$normalizeUrl=function(e){return t+n+e}}var ai={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=Xn(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:si("$$absUrl"),url:function(t){if(R(t))return this.$$url;var e=Zn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:si("$$protocol"),host:si("$$host"),port:si("$$port"),path:ui("$$path",(function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t})),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(U(t)||B(t))t=t.toString(),this.$$search=xt(t);else{if(!q(t))throw Yn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");x(t=ot(t,{}),(function(e,n){null==e&&delete t[n]})),this.$$search=t}break;default:R(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:ui("$$hash",(function(t){return null!==t?t.toString():""})),replace:function(){return this.$$replace=!0,this}};function si(t){return function(){return this[t]}}function ui(t,e){return function(n){return R(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function li(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return j(e)?(t=e,this):t},this.html5Mode=function(t){return X(t)?(e.enabled=t,this):q(t)?(X(t.enabled)&&(e.enabled=t.enabled),X(t.requireBase)&&(e.requireBase=t.requireBase),(X(t.rewriteLinks)||U(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,s){var u,l,c,h,d=i.baseHref(),p=i.url();if(e.enabled){if(!d&&e.requireBase)throw Yn("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=(h=p).substring(0,h.indexOf("/",h.indexOf("//")+2))+(d||"/"),l=r.history?ii:oi}else c=ni(p),l=ri;var f=function(t){return t.substr(0,ni(t).lastIndexOf("/")+1)}(c);(u=new l(c,f,"#"+t)).$$parseLinkUrl(p,p),u.$$state=i.state();var m=/^\s*(javascript|mailto):/i;function g(t,e,n){var r=u.url(),o=u.$$state;try{i.url(t,e,n),u.$$state=i.state()}catch(t){throw u.url(r),u.$$state=o,t}}o.on("click",(function(t){var r=e.rewriteLinks;if(r&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var s=a(t.target);"a"!==nt(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!U(r)||!R(s.attr(r))){var l=s.prop("href"),c=s.attr("href")||s.attr("xlink:href");q(l)&&"[object SVGAnimatedString]"===l.toString()&&(l=nr(l.animVal).href),m.test(l)||!l||s.attr("target")||t.isDefaultPrevented()||u.$$parseLinkUrl(l,c)&&(t.preventDefault(),u.absUrl()!==i.url()&&n.$apply())}}})),u.absUrl()!==p&&i.url(u.absUrl(),!0);var v=!0;return i.onUrlChange((function(t,e){ti(t,f)?(n.$evalAsync((function(){var i,r=u.absUrl(),o=u.$$state;u.$$parse(t),u.$$state=e,i=n.$broadcast("$locationChangeStart",t,r,e,o).defaultPrevented,u.absUrl()===t&&(i?(u.$$parse(r),u.$$state=o,g(r,!1,o)):(v=!1,y(r,o)))})),n.$$phase||n.$digest()):s.location.href=t})),n.$watch((function(){if(v||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=!1;var t=i.url(),e=u.absUrl(),o=i.state(),a=u.$$replace,s=!((l=t)===(c=e)||nr(l).href===nr(c).href)||u.$$html5&&r.history&&o!==u.$$state;(v||s)&&(v=!1,n.$evalAsync((function(){var e=u.absUrl(),i=n.$broadcast("$locationChangeStart",e,t,u.$$state,o).defaultPrevented;u.absUrl()===e&&(i?(u.$$parse(t),u.$$state=o):(s&&g(e,a,o===u.$$state?null:u.$$state),y(t,o)))})))}var l,c;u.$$replace=!1})),u;function y(t,e){n.$broadcast("$locationChangeSuccess",u.absUrl(),t,u.$$state,e)}}]}function ci(){var t=!0,e=this;this.debugEnabled=function(e){return j(e)?(t=e,this):t},this.$get=["$window",function(n){var i,r=o||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:s("log"),info:s("info"),warn:s("warn"),error:s("error"),debug:(i=s("debug"),function(){t&&i.apply(e,arguments)})};function a(t){return H(t)&&(t.stack&&r?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function s(t){var e=n.console||{},i=e[t]||e.log||P;return function(){var t=[];return x(arguments,(function(e){t.push(a(e))})),Function.prototype.apply.call(i,e,t)}}}]}x([oi,ri,ii],(function(t){t.prototype=Object.create(ai),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==ii||!this.$$html5)throw Yn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=R(e)?null:e,this.$$urlUpdatedByLocation=!0,this}}));var hi=r("$parse"),di={}.constructor.prototype.valueOf;function pi(t){return t+""}var fi=jt();x("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(t){fi[t]=!0}));var mi={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},gi=function(t){this.options=t};gi.prototype={constructor:gi,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=fi[e],o=fi[n],a=fi[i];if(r||o||a){var s=a?i:o?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=j(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw hi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=h(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=mi[o]||o}r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var vi=function(t,e){this.lexer=t,this.options=e};function yi(t,e){return void 0!==t?t:e}function _i(t,e){return void 0===t?e:void 0===e?t:t+e}vi.Program="Program",vi.ExpressionStatement="ExpressionStatement",vi.AssignmentExpression="AssignmentExpression",vi.ConditionalExpression="ConditionalExpression",vi.LogicalExpression="LogicalExpression",vi.BinaryExpression="BinaryExpression",vi.UnaryExpression="UnaryExpression",vi.CallExpression="CallExpression",vi.MemberExpression="MemberExpression",vi.Identifier="Identifier",vi.Literal="Literal",vi.ArrayExpression="ArrayExpression",vi.Property="Property",vi.ObjectExpression="ObjectExpression",vi.ThisExpression="ThisExpression",vi.LocalsExpression="LocalsExpression",vi.NGValueParameter="NGValueParameter",vi.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:vi.Program,body:t}},expressionStatement:function(){return{type:vi.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!xi(t))throw hi("lval","Trying to assign a value to a non l-value");t={type:vi.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:vi.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:vi.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:vi.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:vi.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:vi.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:vi.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:vi.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:vi.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=ot(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:vi.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:vi.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:vi.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:vi.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:vi.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:vi.Identifier,name:t.text}},constant:function(){return{type:vi.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:vi.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:vi.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:vi.ObjectExpression,properties:e}},throwError:function(t,e){throw hi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw hi("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw hi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===i||a===r||!e&&!n&&!i&&!r)return o}return!1},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:vi.ThisExpression},$locals:{type:vi.LocalsExpression}}};function bi(t,e,n){var i,r,o,a=t.isPure=function(t,e){switch(t.type){case vi.MemberExpression:if(t.computed)return!1;break;case vi.UnaryExpression:return 1;case vi.BinaryExpression:return"+"!==t.operator&&1;case vi.CallExpression:return!1}return void 0===e?2:e}(t,n);switch(t.type){case vi.Program:i=!0,x(t.body,(function(t){bi(t.expression,e,a),i=i&&t.expression.constant})),t.constant=i;break;case vi.Literal:t.constant=!0,t.toWatch=[];break;case vi.UnaryExpression:bi(t.argument,e,a),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case vi.BinaryExpression:bi(t.left,e,a),bi(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case vi.LogicalExpression:bi(t.left,e,a),bi(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case vi.ConditionalExpression:bi(t.test,e,a),bi(t.alternate,e,a),bi(t.consequent,e,a),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case vi.Identifier:t.constant=!1,t.toWatch=[t];break;case vi.MemberExpression:bi(t.object,e,a),t.computed&&bi(t.property,e,a),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case vi.CallExpression:o=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),i=o,r=[],x(t.arguments,(function(t){bi(t,e,a),i=i&&t.constant,r.push.apply(r,t.toWatch)})),t.constant=i,t.toWatch=o?r:[t];break;case vi.AssignmentExpression:bi(t.left,e,a),bi(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case vi.ArrayExpression:i=!0,r=[],x(t.elements,(function(t){bi(t,e,a),i=i&&t.constant,r.push.apply(r,t.toWatch)})),t.constant=i,t.toWatch=r;break;case vi.ObjectExpression:i=!0,r=[],x(t.properties,(function(t){bi(t.value,e,a),i=i&&t.value.constant,r.push.apply(r,t.value.toWatch),t.computed&&(bi(t.key,e,!1),i=i&&t.key.constant,r.push.apply(r,t.key.toWatch))})),t.constant=i,t.toWatch=r;break;case vi.ThisExpression:case vi.LocalsExpression:t.constant=!1,t.toWatch=[]}}function wi(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function xi(t){return t.type===vi.Identifier||t.type===vi.MemberExpression}function $i(t){if(1===t.body.length&&xi(t.body[0].expression))return{type:vi.AssignmentExpression,left:t.body[0].expression,right:{type:vi.NGValueParameter},operator:"="}}function Ei(t){this.$filter=t}function ki(t){this.$filter=t}function Li(t,e,n){this.ast=new vi(t,n),this.astCompiler=n.csp?new ki(e):new Ei(e)}function Ci(t){return W(t.valueOf)?t.valueOf():di.call(t)}function Ti(){var t,e,n=jt(),i={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){i[t]=e},this.setIdentifierFns=function(n,i){return t=n,e=i,this},this.$get=["$filter",function(r){var o={csp:ut().noUnsafeEval,literals:ot(i),isIdentifierStart:W(t)&&t,isIdentifierContinue:W(e)&&e};return a.$$getAst=function(t){return new Li(new gi(o),r,o).getAst(t).ast},a;function a(t,e){var i,a;switch(typeof t){case"string":if(t=t.trim(),!(i=n[a=t]))i=new Li(new gi(o),r,o).parse(t),n[a]=d(i);return p(i,e);case"function":return p(t,e);default:return p(P,e)}}function s(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Ci(t))&&!n)&&(t===e||t!=t&&e!=e)}function u(t,e,n,i,r){var o,a=i.inputs;if(1===a.length){var u=s;return a=a[0],t.$watch((function(t){var e=a(t);return s(e,u,a.isPure)||(o=i(t,void 0,void 0,[e]),u=e&&Ci(e)),o}),e,n,r)}for(var l=[],c=[],h=0,d=a.length;h<d;h++)l[h]=s,c[h]=null;return t.$watch((function(t){for(var e=!1,n=0,r=a.length;n<r;n++){var u=a[n](t);(e||(e=!s(u,l[n],a[n].isPure)))&&(c[n]=u,l[n]=u&&Ci(u))}return e&&(o=i(t,void 0,void 0,c)),o}),e,n,r)}function l(t,e,n,i,r){var o,a,s=i.literal?c:j,u=i.$$intercepted||i,l=i.$$interceptor||O,h=i.inputs&&!u.inputs;return f.literal=i.literal,f.constant=i.constant,f.inputs=i.inputs,d(f),o=t.$watch(f,e,n,r);function p(){s(a)&&o()}function f(t,e,n,i){return a=h&&i?i[0]:u(t,e,n,i),s(a)&&t.$$postDigest(p),l(a)}}function c(t){var e=!0;return x(t,(function(t){j(t)||(e=!1)})),e}function h(t,e,n,i){var r=t.$watch((function(t){return r(),i(t)}),e,n);return r}function d(t){return t.constant?t.$$watchDelegate=h:t.oneTime?t.$$watchDelegate=l:t.inputs&&(t.$$watchDelegate=u),t}function p(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function n(n){return e(t(n))}return n.$stateful=t.$stateful||e.$stateful,n.$$pure=t.$$pure&&e.$$pure,n}(t.$$interceptor,e),t=t.$$intercepted);var n=!1,i=function(i,r,o,a){var s=n&&a?a[0]:t(i,r,o,a);return e(s)};return i.$$intercepted=t,i.$$interceptor=e,i.literal=t.literal,i.oneTime=t.oneTime,i.constant=t.constant,e.$stateful||(n=!t.inputs,i.inputs=t.inputs?t.inputs:[t],e.$$pure||(i.inputs=i.inputs.map((function(t){return 2===t.isPure?function(e){return t(e)}:t})))),d(i)}}]}function Si(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return Mi((function(t){e.$evalAsync(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return j(e)?(t=e,this):t}}function Di(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return Mi((function(t){e.defer(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return j(e)?(t=e,this):t}}function Mi(t,e,n){var i=r("$q",TypeError),o=0,a=[];function s(){return new u}function u(){var t=this.promise=new l;this.resolve=function(e){d(t,e)},this.reject=function(e){p(t,e)},this.notify=function(e){m(t,e)}}function l(){this.$$state={status:0}}function c(){for(;!o&&a.length;){var t=a.shift();if(!Ai(t)){Pi(t);var n="Possibly unhandled rejection: "+Bt(t.value);H(t.value)?e(t.value,n):e(n)}}}function h(i){!n||i.pending||2!==i.status||Ai(i)||(0===o&&0===a.length&&t(c),a.push(i)),!i.processScheduled&&i.pending&&(i.processScheduled=!0,++o,t((function(){!function(i){var r,a,s;s=i.pending,i.processScheduled=!1,i.pending=void 0;try{for(var u=0,l=s.length;u<l;++u){Pi(i),a=s[u][0],r=s[u][i.status];try{W(r)?d(a,r(i.value)):1===i.status?d(a,i.value):p(a,i.value)}catch(t){p(a,t),t&&!0===t.$$passToExceptionHandler&&e(t)}}}finally{--o,n&&0===o&&t(c)}}(i)})))}function d(t,e){t.$$state.status||(e===t?f(t,i("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):function t(e,n){var i,r=!1;try{(q(n)||W(n))&&(i=n.then),W(i)?(e.$$state.status=-1,i.call(n,o,a,(function(t){m(e,t)}))):(e.$$state.value=n,e.$$state.status=1,h(e.$$state))}catch(t){a(t)}function o(n){r||(r=!0,t(e,n))}function a(t){r||(r=!0,f(e,t))}}(t,e))}function p(t,e){t.$$state.status||f(t,e)}function f(t,e){t.$$state.value=e,t.$$state.status=2,h(t.$$state)}function m(n,i){var r=n.$$state.pending;n.$$state.status<=0&&r&&r.length&&t((function(){for(var t,n,o=0,a=r.length;o<a;o++){n=r[o][0],t=r[o][3];try{m(n,W(t)?t(i):i)}catch(t){e(t)}}}))}function g(t){var e=new l;return p(e,t),e}function v(t,e,n){var i=null;try{W(n)&&(i=n())}catch(t){return g(t)}return K(i)?i.then((function(){return e(t)}),g):e(t)}function y(t,e,n,i){var r=new l;return d(r,t),r.then(e,n,i)}T(l.prototype,{then:function(t,e,n){if(R(t)&&R(e)&&R(n))return this;var i=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),this.$$state.status>0&&h(this.$$state),i},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then((function(e){return v(e,_,t)}),(function(e){return v(e,g,t)}),e)}});var _=y;function b(t){if(!W(t))throw i("norslvr","Expected resolverFn, got '{0}'",t);var e=new l;return t((function(t){d(e,t)}),(function(t){p(e,t)})),e}return b.prototype=l.prototype,b.defer=s,b.reject=g,b.when=y,b.resolve=_,b.all=function(t){var e=new l,n=0,i=V(t)?[]:{};return x(t,(function(t,r){n++,y(t).then((function(t){i[r]=t,--n||d(e,i)}),(function(t){p(e,t)}))})),0===n&&d(e,i),e},b.race=function(t){var e=s();return x(t,(function(t){y(t).then(e.resolve,e.reject)})),e.promise},b}function Ai(t){return!!t.pur}function Pi(t){t.pur=!0}function Oi(t){Pi(t.$$state)}function Ii(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(t){var e=n(t);return function(){i(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=r,o}]}function Ni(){var t=10,e=r("$rootScope"),n=null,i=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(r,a,s){function u(t){t.currentScope.$$destroyed=!0}function l(){this.$id=k(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}l.prototype={constructor:l,$new:function(t,e){var n;return e=e||this,t?(n=new l).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=k(),this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",u),n},$watch:function(t,e,i,r){var o=a(t),s=W(e)?e:P;if(o.$$watchDelegate)return o.$$watchDelegate(this,s,i,o,t);var u=this,l=u.$$watchers,c={fn:s,last:b,get:o,exp:r||t,eq:!!i};return n=null,l||((l=u.$$watchers=[]).$$digestWatchIndex=-1),l.unshift(c),l.$$digestWatchIndex++,y(this,1),function(){var t=rt(l,c);t>=0&&(y(u,-1),t<l.$$digestWatchIndex&&l.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),i=new Array(t.length),r=[],o=this,a=!1,s=!0;if(!t.length){var u=!0;return o.$evalAsync((function(){u&&e(i,i,o)})),function(){u=!1}}if(1===t.length)return this.$watch(t[0],(function(t,r,o){i[0]=t,n[0]=r,e(i,t===r?i:n,o)}));function l(){a=!1;try{s?(s=!1,e(i,i,o)):e(i,n,o)}finally{for(var r=0;r<t.length;r++)n[r]=i[r]}}return x(t,(function(t,e){var n=o.$watch(t,(function(t){i[e]=t,a||(a=!0,o.$evalAsync(l))}));r.push(n)})),function(){for(;r.length;)r.shift()()}},$watchCollection:function(t,e){m.$$pure=a(t).literal,m.$stateful=!m.$$pure;var n,i,r,o=this,s=e.length>1,u=0,l=a(t,m),h=[],d={},p=!0,f=0;function m(t){var e,r,o,a;if(!R(n=t)){if(q(n))if(w(n)){i!==h&&(f=(i=h).length=0,u++),e=n.length,f!==e&&(u++,i.length=f=e);for(var s=0;s<e;s++)a=i[s],o=n[s],a!=a&&o!=o||a===o||(u++,i[s]=o)}else{for(r in i!==d&&(i=d={},f=0,u++),e=0,n)c.call(n,r)&&(e++,o=n[r],a=i[r],r in i?a!=a&&o!=o||a===o||(u++,i[r]=o):(f++,i[r]=o,u++));if(f>e)for(r in u++,i)c.call(n,r)||(f--,delete i[r])}else i!==n&&(i=n,u++);return u}}return this.$watch(l,(function(){if(p?(p=!1,e(n,n,o)):e(n,r,o),s)if(q(n))if(w(n)){r=new Array(n.length);for(var t=0;t<n.length;t++)r[t]=n[t]}else for(var i in r={},n)c.call(n,i)&&(r[i]=n[i]);else r=n}))},$digest:function(){var o,a,u,l,c,f,y,_,w,x=t,E=d.length?h:this,k=[];g("$digest"),s.$$checkUrlChange(),this===h&&null!==i&&(s.defer.cancel(i),$()),n=null;do{c=!1,y=E;for(var L=0;L<d.length;L++){try{(0,(w=d[L]).fn)(w.scope,w.locals)}catch(t){r(t)}n=null}d.length=0;t:do{if(l=!y.$$suspended&&y.$$watchers)for(l.$$digestWatchIndex=l.length;l.$$digestWatchIndex--;)try{if(o=l[l.$$digestWatchIndex])if((a=(0,o.get)(y))===(u=o.last)||(o.eq?st(a,u):M(a)&&M(u))){if(o===n){c=!1;break t}}else c=!0,n=o,o.last=o.eq?ot(a,null):a,(0,o.fn)(a,u===b?a:u,y),x<5&&(k[_=4-x]||(k[_]=[]),k[_].push({msg:W(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:a,oldVal:u}))}catch(t){r(t)}if(!(f=!y.$$suspended&&y.$$watchersCount&&y.$$childHead||y!==E&&y.$$nextSibling))for(;y!==E&&!(f=y.$$nextSibling);)y=y.$parent}while(y=f);if((c||d.length)&&!x--)throw v(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,k)}while(c||d.length);for(v();m<p.length;)try{p[m++]()}catch(t){r(t)}p.length=m=0,s.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===h&&s.$$applicationDestroyed(),y(this,-this.$$watchersCount),this.$$listenerCount)_(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=P,this.$on=this.$watch=this.$watchGroup=function(){return P},this.$$listeners={},this.$$nextSibling=null,function t(e){9===o&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return a(t)(this,e)},$evalAsync:function(t,e){h.$$phase||d.length||s.defer((function(){d.length&&h.$digest()}),null,"$evalAsync"),d.push({scope:this,fn:a(t),locals:e})},$$postDigest:function(t){p.push(t)},$apply:function(t){try{g("$apply");try{return this.$eval(t)}finally{v()}}catch(t){r(t)}finally{try{h.$digest()}catch(t){throw r(t),t}}},$applyAsync:function(t){var e=this;t&&f.push((function(){e.$eval(t)})),t=a(t),null===i&&(i=s.defer((function(){h.$apply($)}),null,"$applyAsync"))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var i=this;do{i.$$listenerCount[t]||(i.$$listenerCount[t]=0),i.$$listenerCount[t]++}while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);-1!==i&&(delete n[i],_(r,1,t))}},$emit:function(t,e){var n,i,o,a=[],s=this,u=!1,l={name:t,targetScope:s,stopPropagation:function(){u=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=ct([l],arguments,1);do{for(n=s.$$listeners[t]||a,l.currentScope=s,i=0,o=n.length;i<o;i++)if(n[i])try{n[i].apply(null,c)}catch(t){r(t)}else n.splice(i,1),i--,o--;if(u)break;s=s.$parent}while(s);return l.currentScope=null,l},$broadcast:function(t,e){var n=this,i=n,o=n,a={name:t,targetScope:n,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return a;for(var s,u,l,c=ct([a],arguments,1);i=o;){for(a.currentScope=i,u=0,l=(s=i.$$listeners[t]||[]).length;u<l;u++)if(s[u])try{s[u].apply(null,c)}catch(t){r(t)}else s.splice(u,1),u--,l--;if(!(o=i.$$listenerCount[t]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(o=i.$$nextSibling);)i=i.$parent}return a.currentScope=null,a}};var h=new l,d=h.$$asyncQueue=[],p=h.$$postDigestQueue=[],f=h.$$applyAsyncQueue=[],m=0;return h;function g(t){if(h.$$phase)throw e("inprog","{0} already in progress",h.$$phase);h.$$phase=t}function v(){h.$$phase=null}function y(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function _(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function b(){}function $(){for(;f.length;)try{f.shift()()}catch(t){r(t)}i=null}}]}function Ri(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return j(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return j(t)?(e=t,this):e},this.$get=function(){return function(n,i){var r=i?e:t,o=nr(n&&n.trim()).href;return""===o||o.match(r)?n:"unsafe:"+o}}}Ei.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},bi(t,e.$filter);var n,i="";if(this.stage="assign",n=$i(t)){this.state.computing="assign";var r=this.nextId();this.recurse(n,r),this.return_(r),i="fn.assign="+this.generateFunction("assign","s,v,l")}var o=wi(t.body);e.stage="inputs",x(o,(function(t,n){var i="fn"+n;e.state[i]={vars:[],body:[],own:{}},e.state.computing=i;var r=e.nextId();e.recurse(t,r),e.return_(r),e.state.inputs.push({name:i,isPure:t.isPure}),t.watchId=n})),this.state.computing="fn",this.stage="main",this.recurse(t);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+i+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,pi,yi,_i);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return x(e,(function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")})),e.length&&t.push("fn.inputs=["+e.map((function(t){return t.name})).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return x(this.state.filters,(function(n,i){t.push(n+"=$filter("+e.escape(i)+")")})),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,i,r,o){var a,s,u,l,c,h=this;if(i=i||P,!o&&j(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,i,r,!0));switch(t.type){case vi.Program:x(t.body,(function(e,n){h.recurse(e.expression,void 0,void 0,(function(t){s=t})),n!==t.body.length-1?h.current().body.push(s,";"):h.return_(s)}));break;case vi.Literal:l=this.escape(t.value),this.assign(e,l),i(e||l);break;case vi.UnaryExpression:this.recurse(t.argument,void 0,void 0,(function(t){s=t})),l=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,l),i(l);break;case vi.BinaryExpression:this.recurse(t.left,void 0,void 0,(function(t){a=t})),this.recurse(t.right,void 0,void 0,(function(t){s=t})),l="+"===t.operator?this.plus(a,s):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(s,0):"("+a+")"+t.operator+"("+s+")",this.assign(e,l),i(l);break;case vi.LogicalExpression:e=e||this.nextId(),h.recurse(t.left,e),h.if_("&&"===t.operator?e:h.not(e),h.lazyRecurse(t.right,e)),i(e);break;case vi.ConditionalExpression:e=e||this.nextId(),h.recurse(t.test,e),h.if_(e,h.lazyRecurse(t.alternate,e),h.lazyRecurse(t.consequent,e)),i(e);break;case vi.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",t.name)),(function(){h.if_("inputs"===h.stage||"s",(function(){r&&1!==r&&h.if_(h.isNull(h.nonComputedMember("s",t.name)),h.lazyAssign(h.nonComputedMember("s",t.name),"{}")),h.assign(e,h.nonComputedMember("s",t.name))}))}),e&&h.lazyAssign(e,h.nonComputedMember("l",t.name))),i(e);break;case vi.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),h.recurse(t.object,a,void 0,(function(){h.if_(h.notNull(a),(function(){t.computed?(s=h.nextId(),h.recurse(t.property,s),h.getStringValue(s),r&&1!==r&&h.if_(h.not(h.computedMember(a,s)),h.lazyAssign(h.computedMember(a,s),"{}")),l=h.computedMember(a,s),h.assign(e,l),n&&(n.computed=!0,n.name=s)):(r&&1!==r&&h.if_(h.isNull(h.nonComputedMember(a,t.property.name)),h.lazyAssign(h.nonComputedMember(a,t.property.name),"{}")),l=h.nonComputedMember(a,t.property.name),h.assign(e,l),n&&(n.computed=!1,n.name=t.property.name))}),(function(){h.assign(e,"undefined")})),i(e)}),!!r);break;case vi.CallExpression:e=e||this.nextId(),t.filter?(s=h.filter(t.callee.name),u=[],x(t.arguments,(function(t){var e=h.nextId();h.recurse(t,e),u.push(e)})),l=s+"("+u.join(",")+")",h.assign(e,l),i(e)):(s=h.nextId(),a={},u=[],h.recurse(t.callee,s,a,(function(){h.if_(h.notNull(s),(function(){x(t.arguments,(function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,(function(t){u.push(t)}))})),l=a.name?h.member(a.context,a.name,a.computed)+"("+u.join(",")+")":s+"("+u.join(",")+")",h.assign(e,l)}),(function(){h.assign(e,"undefined")})),i(e)})));break;case vi.AssignmentExpression:s=this.nextId(),a={},this.recurse(t.left,void 0,a,(function(){h.if_(h.notNull(a.context),(function(){h.recurse(t.right,s),l=h.member(a.context,a.name,a.computed)+t.operator+s,h.assign(e,l),i(e||l)}))}),1);break;case vi.ArrayExpression:u=[],x(t.elements,(function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,(function(t){u.push(t)}))})),l="["+u.join(",")+"]",this.assign(e,l),i(e||l);break;case vi.ObjectExpression:u=[],c=!1,x(t.properties,(function(t){t.computed&&(c=!0)})),c?(e=e||this.nextId(),this.assign(e,"{}"),x(t.properties,(function(t){t.computed?(a=h.nextId(),h.recurse(t.key,a)):a=t.key.type===vi.Identifier?t.key.name:""+t.key.value,s=h.nextId(),h.recurse(t.value,s),h.assign(h.member(e,a,t.computed),s)}))):(x(t.properties,(function(e){h.recurse(e.value,t.constant?void 0:h.nextId(),void 0,(function(t){u.push(h.escape(e.key.type===vi.Identifier?e.key.name:""+e.key.value)+":"+t)}))})),l="{"+u.join(",")+"}",this.assign(e,l)),i(e||l);break;case vi.ThisExpression:this.assign(e,"s"),i(e||"s");break;case vi.LocalsExpression:this.assign(e,"l"),i(e||"l");break;case vi.NGValueParameter:this.assign(e,"v"),i(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var i=this.current().body;i.push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,i,r,o){var a=this;return function(){a.recurse(t,e,n,i,r,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(U(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(B(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw hi("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},ki.prototype={compile:function(t){var e,n,i=this;bi(t,i.$filter),(e=$i(t))&&(n=this.recurse(e));var r,o=wi(t.body);o&&(r=[],x(o,(function(t,e){var n=i.recurse(t);n.isPure=t.isPure,t.input=n,r.push(n),t.watchId=e})));var a=[];x(t.body,(function(t){a.push(i.recurse(t.expression))}));var s=0===t.body.length?P:1===t.body.length?a[0]:function(t,e){var n;return x(a,(function(i){n=i(t,e)})),n};return n&&(s.assign=function(t,e,i){return n(t,i,e)}),r&&(s.inputs=r),s},recurse:function(t,e,n){var i,r,o,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case vi.Literal:return this.value(t.value,e);case vi.UnaryExpression:return r=this.recurse(t.argument),this["unary"+t.operator](r,e);case vi.BinaryExpression:case vi.LogicalExpression:return i=this.recurse(t.left),r=this.recurse(t.right),this["binary"+t.operator](i,r,e);case vi.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case vi.Identifier:return a.identifier(t.name,e,n);case vi.MemberExpression:return i=this.recurse(t.object,!1,!!n),t.computed||(r=t.property.name),t.computed&&(r=this.recurse(t.property)),t.computed?this.computedMember(i,r,e,n):this.nonComputedMember(i,r,e,n);case vi.CallExpression:return o=[],x(t.arguments,(function(t){o.push(a.recurse(t))})),t.filter&&(r=this.$filter(t.callee.name)),t.filter||(r=this.recurse(t.callee,!0)),t.filter?function(t,n,i,a){for(var s=[],u=0;u<o.length;++u)s.push(o[u](t,n,i,a));var l=r.apply(void 0,s,a);return e?{context:void 0,name:void 0,value:l}:l}:function(t,n,i,a){var s,u=r(t,n,i,a);if(null!=u.value){for(var l=[],c=0;c<o.length;++c)l.push(o[c](t,n,i,a));s=u.value.apply(u.context,l)}return e?{value:s}:s};case vi.AssignmentExpression:return i=this.recurse(t.left,!0,1),r=this.recurse(t.right),function(t,n,o,a){var s=i(t,n,o,a),u=r(t,n,o,a);return s.context[s.name]=u,e?{value:u}:u};case vi.ArrayExpression:return o=[],x(t.elements,(function(t){o.push(a.recurse(t))})),function(t,n,i,r){for(var a=[],s=0;s<o.length;++s)a.push(o[s](t,n,i,r));return e?{value:a}:a};case vi.ObjectExpression:return o=[],x(t.properties,(function(t){t.computed?o.push({key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}):o.push({key:t.key.type===vi.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})})),function(t,n,i,r){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(t,n,i,r)]=o[s].value(t,n,i,r):a[o[s].key]=o[s].value(t,n,i,r);return e?{value:a}:a};case vi.ThisExpression:return function(t){return e?{value:t}:t};case vi.LocalsExpression:return function(t,n){return e?{value:n}:n};case vi.NGValueParameter:return function(t,n,i){return e?{value:i}:i}}},"unary+":function(t,e){return function(n,i,r,o){var a=t(n,i,r,o);return a=j(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,i,r,o){var a=t(n,i,r,o);return a=j(a)?-a:-0,e?{value:a}:a}},"unary!":function(t,e){return function(n,i,r,o){var a=!t(n,i,r,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(i,r,o,a){var s=_i(t(i,r,o,a),e(i,r,o,a));return n?{value:s}:s}},"binary-":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a),u=e(i,r,o,a),l=(j(s)?s:0)-(j(u)?u:0);return n?{value:l}:l}},"binary*":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)*e(i,r,o,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)/e(i,r,o,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)%e(i,r,o,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)===e(i,r,o,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)!==e(i,r,o,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)==e(i,r,o,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)!=e(i,r,o,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)<e(i,r,o,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)>e(i,r,o,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)<=e(i,r,o,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)>=e(i,r,o,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)&&e(i,r,o,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)||e(i,r,o,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,i){return function(r,o,a,s){var u=t(r,o,a,s)?e(r,o,a,s):n(r,o,a,s);return i?{value:u}:u}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(i,r,o,a){var s=r&&t in r?r:i;n&&1!==n&&s&&null==s[t]&&(s[t]={});var u=s?s[t]:void 0;return e?{context:s,name:t,value:u}:u}},computedMember:function(t,e,n,i){return function(r,o,a,s){var u,l,c=t(r,o,a,s);return null!=c&&(u=pi(u=e(r,o,a,s)),i&&1!==i&&c&&!c[u]&&(c[u]={}),l=c[u]),n?{context:c,name:u,value:l}:l}},nonComputedMember:function(t,e,n,i){return function(r,o,a,s){var u=t(r,o,a,s);i&&1!==i&&u&&null==u[e]&&(u[e]={});var l=null!=u?u[e]:void 0;return n?{context:u,name:e,value:l}:l}},inputs:function(t,e){return function(n,i,r,o){return o?o[e]:t(n,i,r)}}},Li.prototype={constructor:Li,parse:function(t){var e=this.getAst(t),n=this.astCompiler.compile(e.ast);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===vi.Literal||t.body[0].expression.type===vi.ArrayExpression||t.body[0].expression.type===vi.ObjectExpression)}(e.ast),n.constant=function(t){return t.constant}(e.ast),n.oneTime=e.oneTime,n},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var ji=r("$sce"),qi={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Fi=/_([a-z])/g;function Ui(t){return t.replace(Fi,Xt)}function Bi(t){var e=[];return j(t)&&x(t,(function(t){e.push(function(t){if("self"===t)return t;if(U(t)){if(t.indexOf("***")>-1)throw ji("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=tt(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(Z(t))return new RegExp("^"+t.source+"$");throw ji("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))})),e}function zi(){this.SCE_CONTEXTS=qi;var e=["self"],n=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Bi(t)),e},this.resourceUrlBlacklist=function(t){return arguments.length&&(n=Bi(t)),n},this.$get=["$injector","$$sanitizeUri",function(i,r){var o=function(t){throw ji("unsafe","Attempting to use an unsafe value in a safe context.")};function a(e,n){return"self"===e?ir(n,er)||function(e){return ir(e,function(){if(t.document.baseURI)return t.document.baseURI;Qi||((Qi=t.document.createElement("a")).href=".",Qi=Qi.cloneNode(!1));return Qi.href}())}(n):!!e.exec(n.href)}function s(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}i.has("$sanitize")&&(o=i.get("$sanitize"));var u=s(),l={};return l[qi.HTML]=s(u),l[qi.CSS]=s(u),l[qi.MEDIA_URL]=s(u),l[qi.URL]=s(l[qi.MEDIA_URL]),l[qi.JS]=s(u),l[qi.RESOURCE_URL]=s(l[qi.URL]),{trustAs:function(t,e){var n=l.hasOwnProperty(t)?l[t]:null;if(!n)throw ji("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||R(e)||""===e)return e;if("string"!=typeof e)throw ji("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,i){if(null===i||R(i)||""===i)return i;var s=l.hasOwnProperty(t)?l[t]:null;if(s&&i instanceof s)return i.$$unwrapTrustedValue();if(W(i.$$unwrapTrustedValue)&&(i=i.$$unwrapTrustedValue()),t===qi.MEDIA_URL||t===qi.URL)return r(i.toString(),t===qi.MEDIA_URL);if(t===qi.RESOURCE_URL){if(function(t){var i,r,o=nr(t.toString()),s=!1;for(i=0,r=e.length;i<r;i++)if(a(e[i],o)){s=!0;break}if(s)for(i=0,r=n.length;i<r;i++)if(a(n[i],o)){s=!1;break}return s}(i))return i;throw ji("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",i.toString())}if(t===qi.HTML)return o(i);throw ji("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof u?t.$$unwrapTrustedValue():t}}}]}function Vi(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&o<8)throw ji("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=Ut(qi);i.isEnabled=function(){return t},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,t||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=O),i.parseAs=function(t,n){var r=e(n);return r.literal&&r.constant?r:e(n,(function(e){return i.getTrusted(t,e)}))};var r=i.parseAs,a=i.getTrusted,s=i.trustAs;return x(qi,(function(t,e){var n=h(e);i[Ui("parse_as_"+n)]=function(e){return r(t,e)},i[Ui("get_trusted_"+n)]=function(e){return a(t,e)},i[Ui("trust_as_"+n)]=function(e){return s(t,e)}})),i}]}function Hi(){this.$get=["$window","$document",function(t,e){var n={},i=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,r=D((/android (\d+)/.exec(h((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},u=s.body&&s.body.style,l=!1,c=!1;return u&&(l=!!("transition"in u||"webkitTransition"in u),c=!!("animation"in u||"webkitAnimation"in u)),{history:!(!i||r<4||a),hasEvent:function(t){if("input"===t&&o)return!1;if(R(n[t])){var e=s.createElement("div");n[t]="on"+t in e}return n[t]},csp:ut(),transitions:l,animations:c,android:r}}]}function Wi(){this.$get=I((function(t){return new Zi(t)}))}function Zi(t){var e={},n=[],i=this.ALL_TASKS_TYPE="$$all$$",r=this.DEFAULT_TASK_TYPE="$$default$$";function o(){var t=n.pop();return t&&t.cb}function a(t){for(var e=n.length-1;e>=0;--e){var i=n[e];if(i.type===t)return n.splice(e,1),i.cb}}this.completeTask=function(n,s){s=s||r;try{n()}finally{!function(t){e[t=t||r]&&(e[t]--,e[i]--)}(s);var u=e[s],l=e[i];if(!l||!u)for(var c,h=l?a:o;c=h(s);)try{c()}catch(e){t.error(e)}}},this.incTaskCount=function(t){e[t=t||r]=(e[t]||0)+1,e[i]=(e[i]||0)+1},this.notifyWhenNoPendingTasks=function(t,r){e[r=r||i]?n.push({type:r,cb:t}):t()}}var Gi=r("$templateRequest");function Yi(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,i,r,o){function a(s,u){a.totalPendingRequests++,U(s)&&!R(n.get(s))||(s=o.getTrustedResourceUrl(s));var l=i.defaults&&i.defaults.transformResponse;return V(l)?l=l.filter((function(t){return t!==Pn})):l===Pn&&(l=null),i.get(s,T({cache:n,transformResponse:l},t)).finally((function(){a.totalPendingRequests--})).then((function(t){return n.put(s,t.data)}),(function(t){u||(t=Gi("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText),e(t));return r.reject(t)}))}return a.totalPendingRequests=0,a}]}function Xi(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var i={findBindings:function(t,e,n){var i=t.getElementsByClassName("ng-binding"),r=[];return x(i,(function(t){var i=_.element(t).data("$binding");i&&x(i,(function(i){n?new RegExp("(^|\\s)"+tt(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!==i.indexOf(e)&&r.push(t)}))})),r},findModels:function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o="["+i[r]+"model"+(n?"=":"*=")+'"'+e+'"]',a=t.querySelectorAll(o);if(a.length)return a}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return i}]}var Ki=r("$timeout");function Ji(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){var o={};function a(a,s,u){W(a)||(u=s,s=a,a=P);var l,c=ht(arguments,3),h=j(u)&&!u,d=(h?i:n).defer(),p=d.promise;return l=e.defer((function(){try{d.resolve(a.apply(null,c))}catch(t){d.reject(t),r(t)}finally{delete o[p.$$timeoutId]}h||t.$apply()}),s,"$timeout"),p.$$timeoutId=l,o[l]=d,p}return a.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw Ki("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!o.hasOwnProperty(t.$$timeoutId))return!1;var n=t.$$timeoutId,i=o[n];return Oi(i.promise),i.reject("canceled"),delete o[n],e.defer.cancel(n)},a}]}var Qi,tr=t.document.createElement("a"),er=nr(t.location.href);function nr(t){if(!U(t))return t;var e=t;return o&&(tr.setAttribute("href",e),e=tr.href),tr.setAttribute("href",e),{href:tr.href,protocol:tr.protocol?tr.protocol.replace(/:$/,""):"",host:tr.host,search:tr.search?tr.search.replace(/^\?/,""):"",hash:tr.hash?tr.hash.replace(/^#/,""):"",hostname:tr.hostname,port:tr.port,pathname:"/"===tr.pathname.charAt(0)?tr.pathname:"/"+tr.pathname}}function ir(t,e){return t=nr(t),e=nr(e),t.protocol===e.protocol&&t.host===e.host}function rr(){this.$get=I(t)}function or(t){var e=t[0]||{},n={},i="";function r(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,a,s,u,l=function(t){try{return t.cookie||""}catch(t){return""}}(e);if(l!==i)for(t=(i=l).split("; "),n={},a=0;a<t.length;a++)(s=(o=t[a]).indexOf("="))>0&&(u=r(o.substring(0,s)),R(n[u])&&(n[u]=r(o.substring(s+1))));return n}}function ar(){this.$get=or}function sr(t){function e(n,i){if(q(n)){var r={};return x(n,(function(t,n){r[n]=e(n,t)})),r}return t.factory(n+"Filter",i)}this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+"Filter")}}],e("currency",hr),e("date",$r),e("filter",ur),e("json",Er),e("limitTo",Cr),e("lowercase",kr),e("number",dr),e("orderBy",Sr),e("uppercase",Lr)}function ur(){return function(t,e,n,i){if(!w(t)){if(null==t)return t;throw r("filter")("notarray","Expected array but received: {0}",t)}var o,a;switch(i=i||"$",cr(e)){case"function":o=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=function(t,e,n,i){var r=q(t)&&n in t;!0===e?e=st:W(e)||(e=function(t,e){return!R(t)&&(null===t||null===e?t===e:!(q(e)||q(t)&&!N(t))&&(t=h(""+t),e=h(""+e),-1!==t.indexOf(e)))});return function(o){return r&&!q(o)?lr(o,t[n],e,n,!1):lr(o,t,e,n,i)}}(e,n,i,a);break;default:return t}return Array.prototype.filter.call(t,o)}}function lr(t,e,n,i,r,o){var a=cr(t),s=cr(e);if("string"===s&&"!"===e.charAt(0))return!lr(t,e.substring(1),n,i,r);if(V(t))return t.some((function(t){return lr(t,e,n,i,r)}));switch(a){case"object":var u;if(r){for(u in t)if(u.charAt&&"$"!==u.charAt(0)&&lr(t[u],e,n,i,!0))return!0;return!o&&lr(t,e,n,i,!1)}if("object"===s){for(u in e){var l=e[u];if(!W(l)&&!R(l)){var c=u===i;if(!lr(c?t:t[u],l,n,i,c,c))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function cr(t){return null===t?"null":typeof t}or.$inject=["$document"],sr.$inject=["$provide"];function hr(t){var e=t.NUMBER_FORMATS;return function(t,n,i){R(n)&&(n=e.CURRENCY_SYM),R(i)&&(i=e.PATTERNS[1].maxFrac);var r=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:pr(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(r,n)}}function dr(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:pr(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function pr(t,e,n,i,r){if(!U(t)&&!B(t)||isNaN(t))return"";var o,a=!isFinite(t),s=!1,u=Math.abs(t)+"",l="";if(a)l="∞";else{(function(t,e,n,i){var r=t.d,o=r.length-t.i,a=(e=R(e)?Math.min(Math.max(n,o),i):+e)+t.i,s=r[a];if(a>0){r.splice(Math.max(t.i,a));for(var u=a;u<r.length;u++)r[u]=0}else{o=Math.max(0,o),t.i=1,r.length=Math.max(1,a=e+1),r[0]=0;for(var l=1;l<a;l++)r[l]=0}if(s>=5)if(a-1<0){for(var c=0;c>a;c--)r.unshift(0),t.i++;r.unshift(1),t.i++}else r[a-1]++;for(;o<Math.max(0,e);o++)r.push(0);var h=r.reduceRight((function(t,e,n,i){return e+=t,i[n]=e%10,Math.floor(e/10)}),0);h&&(r.unshift(h),t.i++)})(o=function(t){var e,n,i,r,o,a=0;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;"0"===t.charAt(i);i++);if(i===(o=t.length))e=[0],n=1;else{for(o--;"0"===t.charAt(o);)o--;for(n-=i,e=[],r=0;i<=o;i++,r++)e[r]=+t.charAt(i)}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{d:e,e:a,i:n}}(u),r,e.minFrac,e.maxFrac);var c=o.d,h=o.i,d=o.e,p=[];for(s=c.reduce((function(t,e){return t&&!e}),!0);h<0;)c.unshift(0),h++;h>0?p=c.splice(h,c.length):(p=c,c=[0]);var f=[];for(c.length>=e.lgSize&&f.unshift(c.splice(-e.lgSize,c.length).join(""));c.length>e.gSize;)f.unshift(c.splice(-e.gSize,c.length).join(""));c.length&&f.unshift(c.join("")),l=f.join(n),p.length&&(l+=i+p.join("")),d&&(l+="e+"+d)}return t<0&&!s?e.negPre+l+e.negSuf:e.posPre+l+e.posSuf}function fr(t,e,n,i){var r="";for((t<0||i&&t<=0)&&(i?t=1-t:(t=-t,r="-")),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function mr(t,e,n,i,r){return n=n||0,function(o){var a=o["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),fr(a,e,i,r)}}function gr(t,e,n){return function(i,r){var o=i["get"+t]();return r[d((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function vr(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function yr(t){return function(e){var n,i=vr(e.getFullYear()),r=+(n=e,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+i;return fr(1+Math.round(r/6048e5),t)}}function _r(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}hr.$inject=["$locale"],dr.$inject=["$locale"];var br={yyyy:mr("FullYear",4,0,!1,!0),yy:mr("FullYear",2,0,!0,!0),y:mr("FullYear",1,0,!1,!0),MMMM:gr("Month"),MMM:gr("Month",!0),MM:mr("Month",2,1),M:mr("Month",1,1),LLLL:gr("Month",!1,!0),dd:mr("Date",2),d:mr("Date",1),HH:mr("Hours",2),H:mr("Hours",1),hh:mr("Hours",2,-12),h:mr("Hours",1,-12),mm:mr("Minutes",2),m:mr("Minutes",1),ss:mr("Seconds",2),s:mr("Seconds",1),sss:mr("Milliseconds",3),EEEE:gr("Day"),EEE:gr("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var i=-1*n,r=i>=0?"+":"";return r+=fr(Math[i>0?"floor":"ceil"](i/60),2)+fr(Math.abs(i%60),2)},ww:yr(2),w:yr(1),G:_r,GG:_r,GGG:_r,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},wr=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,xr=/^-?\d+$/;function $r(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var o,a,s="",u=[];if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,U(n)&&(n=xr.test(n)?D(n):function(t){var n;if(n=t.match(e)){var i=new Date(0),r=0,o=0,a=n[8]?i.setUTCFullYear:i.setFullYear,s=n[8]?i.setUTCHours:i.setHours;n[9]&&(r=D(n[9]+n[10]),o=D(n[9]+n[11])),a.call(i,D(n[1]),D(n[2])-1,D(n[3]));var u=D(n[4]||0)-r,l=D(n[5]||0)-o,c=D(n[6]||0),h=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(i,u,l,c,h),i}return t}(n)),B(n)&&(n=new Date(n)),!z(n)||!isFinite(n.getTime()))return n;for(;i;)(a=wr.exec(i))?i=(u=ct(u,a,1)).pop():(u.push(i),i=null);var l=n.getTimezoneOffset();return r&&(l=vt(r,l),n=_t(n,r,!0)),x(u,(function(e){s+=(o=br[e])?o(n,t.DATETIME_FORMATS,l):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),s}}function Er(){return function(t,e){return R(e)&&(e=2),ft(t,e)}}$r.$inject=["$locale"];var kr=I(h),Lr=I(d);function Cr(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):D(e),M(e)?t:(B(t)&&(t=t.toString()),w(t)?(n=(n=!n||isNaN(n)?0:D(n))<0?Math.max(0,t.length+n):n,e>=0?Tr(t,n,n+e):0===n?Tr(t,e,t.length):Tr(t,Math.max(0,n+e),n)):t)}}function Tr(t,e,n){return U(t)?t.slice(e,n):p.call(t,e,n)}function Sr(t){return function(i,o,a,s){if(null==i)return i;if(!w(i))throw r("orderBy")("notarray","Expected array but received: {0}",i);V(o)||(o=[o]),0===o.length&&(o=["+"]);var u=o.map((function(e){var n=1,i=O;if(W(e))i=e;else if(U(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(i=t(e)).constant)){var r=i();i=function(t){return t[r]}}return{get:i,descending:n}})),l=a?-1:1,c=W(s)?s:n,h=Array.prototype.map.call(i,(function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:u.map((function(i){return function(t,n){var i=typeof t;null===t?i="null":"object"===i&&(t=function(t){if(W(t.valueOf)&&e(t=t.valueOf()))return t;if(N(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:i,index:n}}(i.get(t),n)}))}}));return h.sort((function(t,e){for(var i=0,r=u.length;i<r;i++){var o=c(t.predicateValues[i],e.predicateValues[i]);if(o)return o*u[i].descending*l}return(c(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*l})),i=h.map((function(t){return t.value}))};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,i=t.type,r=e.type;if(i===r){var o=t.value,a=e.value;"string"===i?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===i&&(q(o)&&(o=t.index),q(a)&&(a=e.index)),o!==a&&(n=o<a?-1:1)}else n="undefined"===i?1:"undefined"===r?-1:"null"===i?1:"null"===r?-1:i<r?-1:1;return n}}function Dr(t){return W(t)&&(t={link:t}),t.restrict=t.restrict||"AC",I(t)}Sr.$inject=["$parse"];var Mr=I({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===g.call(e.prop("href"))?"xlink:href":"href";e.on("click",(function(t){e.attr(n)||t.preventDefault()}))}}}}),Ar={};x(Le,(function(t,e){if("multiple"!==t){var n=fn("ng-"+e),i=r;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[n]&&r(t,0,i)}),Ar[n]=function(){return{restrict:"A",priority:100,link:i}}}function r(t,i,r){t.$watch(r[n],(function(t){r.$set(e,!!t)}))}})),x(Te,(function(t,e){Ar[e]=function(){return{priority:100,link:function(t,n,i){if("ngPattern"===e&&"/"===i.ngPattern.charAt(0)){var r=i.ngPattern.match(l);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}t.$watch(i[e],(function(t){i.$set(e,t)}))}}}})),x(["src","srcset","href"],(function(t){var e=fn("ng-"+t);Ar[e]=function(){return{priority:99,link:function(n,i,r){var a=t,s=t;"href"===t&&"[object SVGAnimatedString]"===g.call(i.prop("href"))&&(s="xlinkHref",r.$attr[s]="xlink:href",a=null),r.$observe(e,(function(e){e?(r.$set(s,e),o&&a&&i.prop(a,r[s])):"href"===t&&r.$set(s,null)}))}}}}));var Pr={$addControl:P,$getControls:I([]),$$renameControl:function(t,e){t.$name=e},$removeControl:P,$setValidity:P,$setDirty:P,$setPristine:P,$setSubmitted:P,$$setSubmitted:P};function Or(t,e,n,i,r){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=r(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Pr,this.$$element=t,this.$$animate=i,jr(this)}Or.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Or.prototype={$rollbackViewValue:function(){x(this.$$controls,(function(t){t.$rollbackViewValue()}))},$commitViewValue:function(){x(this.$$controls,(function(t){t.$commitViewValue()}))},$addControl:function(t){Nt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$getControls:function(){return Ut(this.$$controls)},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],x(this.$pending,(function(e,n){this.$setValidity(n,null,t)}),this),x(this.$error,(function(e,n){this.$setValidity(n,null,t)}),this),x(this.$$success,(function(e,n){this.$setValidity(n,null,t)}),this),rt(this.$$controls,t),t.$$parentForm=Pr},$setDirty:function(){this.$$animate.removeClass(this.$$element,Po),this.$$animate.addClass(this.$$element,Oo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Po,Oo+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,x(this.$$controls,(function(t){t.$setPristine()}))},$setUntouched:function(){x(this.$$controls,(function(t){t.$setUntouched()}))},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==Pr;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,x(this.$$controls,(function(t){t.$$setSubmitted&&t.$$setSubmitted()}))}},qr({clazz:Or,set:function(t,e,n){var i=t[e];i?-1===i.indexOf(n)&&i.push(n):t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(rt(i,n),0===i.length&&delete t[e])}});var Ir=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Or,compile:function(n,r){n.addClass(Po).addClass(Mo);var o=r.name?"name":!(!t||!r.ngForm)&&"ngForm";return{pre:function(t,n,r,a){var s=a[0];if(!("action"in r)){var u=function(e){t.$apply((function(){s.$commitViewValue(),s.$setSubmitted()})),e.preventDefault()};n[0].addEventListener("submit",u),n.on("$destroy",(function(){e((function(){n[0].removeEventListener("submit",u)}),0,!1)}))}(a[1]||s.$$parentForm).$addControl(s);var l=o?i(s.$name):P;o&&(l(t,s),r.$observe(o,(function(e){s.$name!==e&&(l(t,void 0),s.$$parentForm.$$renameControl(s,e),(l=i(s.$name))(t,s))}))),n.on("$destroy",(function(){s.$$parentForm.$removeControl(s),l(t,void 0),T(s,Pr)}))}}}};function i(t){return""===t?n('this[""]').assign:n(t).assign||P}}]},Nr=Ir(),Rr=Ir(!0);function jr(t){t.$$classCache={},t.$$classCache[Ao]=!(t.$$classCache[Mo]=t.$$element.hasClass(Mo))}function qr(t){var e=t.clazz,n=t.set,i=t.unset;function r(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function o(t,e,n){e=e?"-"+At(e,"-"):"",r(t,Mo+e,!0===n),r(t,Ao+e,!1===n)}e.prototype.$setValidity=function(t,e,a){var s;R(e)?function(t,e,i,r){t[e]||(t[e]={});n(t[e],i,r)}(this,"$pending",t,a):function(t,e,n,r){t[e]&&i(t[e],n,r);Fr(t[e])&&(t[e]=void 0)}(this,"$pending",t,a),X(e)?e?(i(this.$error,t,a),n(this.$$success,t,a)):(n(this.$error,t,a),i(this.$$success,t,a)):(i(this.$error,t,a),i(this.$$success,t,a)),this.$pending?(r(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(r(this,"ng-pending",!1),this.$valid=Fr(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,t,s=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,s,this)}}function Fr(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Ur=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Br=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,zr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Vr=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Hr=/^(\d{4,})-(\d{2})-(\d{2})$/,Wr=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Zr=/^(\d{4,})-W(\d\d)$/,Gr=/^(\d{4,})-(\d\d)$/,Yr=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Xr=jt();x("date,datetime-local,month,time,week".split(","),(function(t){Xr[t]=!0}));var Kr={text:function(t,e,n,i,r,o){Qr(t,e,n,i,r,o),Jr(i)},date:eo("date",Hr,to(Hr,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":eo("datetimelocal",Wr,to(Wr,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:eo("time",Yr,to(Yr,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:eo("week",Zr,(function(t,e){if(z(t))return t;if(U(t)){Zr.lastIndex=0;var n=Zr.exec(t);if(n){var i=+n[1],r=+n[2],o=0,a=0,s=0,u=0,l=vr(i),c=7*(r-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),u=e.getMilliseconds()),new Date(i,0,l.getDate()+c,o,a,s,u)}}return NaN}),"yyyy-Www"),month:eo("month",Gr,to(Gr,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,i,r,o){var a,s;no(t,e,n,i,"number"),io(i),Qr(t,e,n,i,r,o),(j(n.min)||n.ngMin)&&(i.$validators.min=function(t,e){return i.$isEmpty(e)||R(a)||e>=a},n.$observe("min",(function(t){a=ro(t),i.$validate()})));(j(n.max)||n.ngMax)&&(i.$validators.max=function(t,e){return i.$isEmpty(e)||R(s)||e<=s},n.$observe("max",(function(t){s=ro(t),i.$validate()})));if(j(n.step)||n.ngStep){var u;i.$validators.step=function(t,e){return i.$isEmpty(e)||R(u)||so(e,a||0,u)},n.$observe("step",(function(t){u=ro(t),i.$validate()}))}},url:function(t,e,n,i,r,o){Qr(t,e,n,i,r,o),Jr(i),i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||Br.test(n)}},email:function(t,e,n,i,r,o){Qr(t,e,n,i,r,o),Jr(i),i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||zr.test(n)}},radio:function(t,e,n,i){var r=!n.ngTrim||"false"!==Q(n.ngTrim);R(n.name)&&e.attr("name",k());e.on("change",(function(t){var o;e[0].checked&&(o=n.value,r&&(o=Q(o)),i.$setViewValue(o,t&&t.type))})),i.$render=function(){var t=n.value;r&&(t=Q(t)),e[0].checked=t===i.$viewValue},n.$observe("value",i.$render)},range:function(t,e,n,i,r,o){no(t,e,n,i,"range"),io(i),Qr(t,e,n,i,r,o);var a=i.$$hasNativeValidators&&"range"===e[0].type,s=a?0:void 0,u=a?100:void 0,l=a?1:void 0,c=e[0].validity,h=j(n.min),d=j(n.max),p=j(n.step),f=i.$render;i.$render=a&&j(c.rangeUnderflow)&&j(c.rangeOverflow)?function(){f(),i.$setViewValue(e.val())}:f,h&&(i.$validators.min=a?function(){return!0}:function(t,e){return i.$isEmpty(e)||R(s)||e>=s},m("min",(function(t){if(s=ro(t),M(i.$modelValue))return;if(a){var n=e.val();s>n&&(n=s,e.val(n)),i.$setViewValue(n)}else i.$validate()})));d&&(i.$validators.max=a?function(){return!0}:function(t,e){return i.$isEmpty(e)||R(u)||e<=u},m("max",(function(t){if(u=ro(t),M(i.$modelValue))return;if(a){var n=e.val();u<n&&(e.val(u),n=u<s?s:u),i.$setViewValue(n)}else i.$validate()})));p&&(i.$validators.step=a?function(){return!c.stepMismatch}:function(t,e){return i.$isEmpty(e)||R(l)||so(e,s||0,l)},m("step",(function(t){if(l=ro(t),M(i.$modelValue))return;a&&i.$viewValue!==e.val()?i.$setViewValue(e.val()):i.$validate()})));function m(t,i){e.attr(t,n[t]),n.$observe(t,i)}},checkbox:function(t,e,n,i,r,o,a,s){var u=uo(s,t,"ngTrueValue",n.ngTrueValue,!0),l=uo(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("change",(function(t){i.$setViewValue(e[0].checked,t&&t.type)})),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return!1===t},i.$formatters.push((function(t){return st(t,u)})),i.$parsers.push((function(t){return t?u:l}))},hidden:P,button:P,submit:P,reset:P,file:P};function Jr(t){t.$formatters.push((function(e){return t.$isEmpty(e)?e:e.toString()}))}function Qr(t,e,n,i,r,o){var a,s=h(e[0].type);if(!r.android){var u=!1;e.on("compositionstart",(function(){u=!0})),e.on("compositionupdate",(function(t){(R(t.data)||""===t.data)&&(u=!1)})),e.on("compositionend",(function(){u=!1,l()}))}var l=function(t){if(a&&(o.defer.cancel(a),a=null),!u){var r=e.val(),l=t&&t.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(r=Q(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,l)}};if(r.hasEvent("input"))e.on("input",l);else{var c=function(t,e,n){a||(a=o.defer((function(){a=null,e&&e.value===n||l(t)})))};e.on("keydown",(function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||c(t,this,this.value)})),r.hasEvent("paste")&&e.on("paste cut drop",c)}e.on("change",l),Xr[s]&&i.$$hasNativeValidators&&s===n.type&&e.on("keydown wheel mousedown",(function(t){if(!a){var e=this.validity,n=e.badInput,i=e.typeMismatch;a=o.defer((function(){a=null,e.badInput===n&&e.typeMismatch===i||l(t)}))}})),i.$render=function(){var t=i.$isEmpty(i.$viewValue)?"":i.$viewValue;e.val()!==t&&e.val(t)}}function to(t,e){return function(n,i){var r,o;if(z(n))return n;if(U(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Ur.test(n))return new Date(n);if(t.lastIndex=0,r=t.exec(n)){r.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},x(r,(function(t,n){n<e.length&&(o[e[n]]=+t)}));var a=new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0);return o.yyyy<100&&a.setFullYear(o.yyyy),a}}return NaN}}function eo(t,e,n,i){return function(r,o,a,s,u,l,c){no(r,o,a,s,t),Qr(0,o,a,s,u,l);var h,d,p,f,m="time"===t||"datetimelocal"===t;(s.$parsers.push((function(n){return s.$isEmpty(n)?null:e.test(n)?y(n,h):void(s.$$parserName=t)})),s.$formatters.push((function(t){if(t&&!z(t))throw Io("datefmt","Expected `{0}` to be a date",t);if(g(t)){h=t;var e=s.$options.getOption("timezone");return e&&(d=e,h=_t(h,e,!0)),function(t,e){var n=i;m&&U(s.$options.getOption("timeSecondsFormat"))&&(n=i.replace("ss.sss",s.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var r=c("date")(t,n,e);m&&s.$options.getOption("timeStripZeroSeconds")&&(r=r.replace(/(?::00)?(?:\.000)?$/,""));return r}(t,e)}return h=null,d=null,""})),j(a.min)||a.ngMin)&&(s.$validators.min=function(t){return!g(t)||R(p)||n(t)>=p},a.$observe("min",(function(t){p=v(t),s.$validate()})));(j(a.max)||a.ngMax)&&(s.$validators.max=function(t){return!g(t)||R(f)||n(t)<=f},a.$observe("max",(function(t){f=v(t),s.$validate()})));function g(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function v(t){return j(t)&&!z(t)?y(t)||void 0:t}function y(t,e){var i=s.$options.getOption("timezone");d&&d!==i&&(e=yt(e,vt(d)));var r=n(t,e);return!isNaN(r)&&i&&(r=_t(r,i)),r}}}function no(t,e,n,i,r){var o=e[0];(i.$$hasNativeValidators=q(o.validity))&&i.$parsers.push((function(t){var n=e.prop("validity")||{};if(!n.badInput&&!n.typeMismatch)return t;i.$$parserName=r}))}function io(t){t.$parsers.push((function(e){return t.$isEmpty(e)?null:Vr.test(e)?parseFloat(e):void(t.$$parserName="number")})),t.$formatters.push((function(e){if(!t.$isEmpty(e)){if(!B(e))throw Io("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}))}function ro(t){return j(t)&&!B(t)&&(t=parseFloat(t)),M(t)?void 0:t}function oo(t){return(0|t)===t}function ao(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var i=/e-(\d+)$/.exec(e);if(i)return Number(i[1])}return 0}return e.length-n-1}function so(t,e,n){var i=Number(t),r=!oo(i),o=!oo(e),a=!oo(n);if(r||o||a){var s=r?ao(i):0,u=o?ao(e):0,l=a?ao(n):0,c=Math.max(s,u,l),h=Math.pow(10,c);i*=h,e*=h,n*=h,r&&(i=Math.round(i)),o&&(e=Math.round(e)),a&&(n=Math.round(n))}return(i-e)%n==0}function uo(t,e,n,i,r){var o;if(j(i)){if(!(o=t(i)).constant)throw Io("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(e)}return r}var lo=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,a,s){s[0]&&(Kr[h(a.type)]||Kr.text)(r,o,a,s[0],e,t,n,i)}}}}],co=/^(true|false|\d+)$/,ho=function(){function t(t,e,n){var i=j(n)?n:9===o?"":null;t.prop("value",i),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return co.test(n.ngValue)?function(e,n,i){t(n,i,e.$eval(i.ngValue))}:function(e,n,i){e.$watch(i.ngValue,(function(e){t(n,i,e)}))}}}},po=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,i){t.$$addBindingInfo(n,i.ngBind),n=n[0],e.$watch(i.ngBind,(function(t){n.textContent=qt(t)}))}}}}],fo=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,i,r){var o=t(i.attr(r.$attr.ngBindTemplate));e.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",(function(t){i.textContent=R(t)?"":t}))}}}}],mo=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(i,r){var o=e(r.ngBindHtml),a=e(r.ngBindHtml,(function(e){return t.valueOf(e)}));return n.$$addBindingClass(i),function(e,i,r){n.$$addBindingInfo(i,r.ngBindHtml),e.$watch(a,(function(){var n=o(e);i.html(t.getTrustedHtml(n)||"")}))}}}}],go=I({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push((function(){t.$eval(n.ngChange)}))}});function vo(t,e){var n;return t="ngClass"+t,["$parse",function(a){return{restrict:"AC",link:function(s,u,l){var c,h=u.data("$classCounts"),d=!0;function p(t,e){var n=[];return x(t,(function(t){(e>0||h[t])&&(h[t]=(h[t]||0)+e,h[t]===+(e>0)&&n.push(t))})),n.join(" ")}h||(h=jt(),u.data("$classCounts",h)),"ngClass"!==t&&(n||(n=a("$index",(function(t){return 1&t}))),s.$watch(n,(function(t){t===e?(n=p(r(n=c),1),l.$addClass(n)):function(t){t=p(r(t),-1),l.$removeClass(t)}(c);var n;d=t}))),s.$watch(a(l[t],o),(function(t){d===e&&function(t,e){var n=r(t),o=r(e),a=i(n,o),s=i(o,n),u=p(a,-1),c=p(s,1);l.$addClass(c),l.$removeClass(u)}(c,t);c=t}))}}}];function i(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r===e[o])continue t;n.push(r)}return n}function r(t){return t&&t.split(" ")}function o(t){var e=t;return V(t)?e=t.map(o).join(" "):q(t)&&(e=Object.keys(t).filter((function(e){return t[e]})).join(" ")),e}}var yo=vo("",!0),_o=vo("Odd",0),bo=vo("Even",1),wo=Dr({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),xo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],$o={},Eo={blur:!0,focus:!0};function ko(t,e,n,i,r,o){return{restrict:"A",compile:function(a,s){var u=t(s[i]);return function(t,i){i.on(r,(function(i){var r=function(){u(t,{$event:i})};if(e.$$phase)if(o)t.$evalAsync(r);else try{r()}catch(t){n(t)}else t.$apply(r)}))}}}}x("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(t){var e=fn("ng-"+t);$o[e]=["$parse","$rootScope","$exceptionHandler",function(n,i,r){return ko(n,i,r,e,t,Eo[t])}]}));var Lo=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,a){var s,u,l;n.$watch(r.ngIf,(function(n){n?u||a((function(n,o){u=o,n[n.length++]=e.$$createComment("end ngIf",r.ngIf),s={clone:n},t.enter(n,i.parent(),i)})):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),s&&(l=Rt(s.clone),t.leave(l).done((function(t){!1!==t&&(l=null)})),s=null))}))}}}],Co=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:_.noop,compile:function(i,r){var o=r.ngInclude||r.src,a=r.onload||"",s=r.autoscroll;return function(i,r,u,l,c){var h,d,p,f=0,m=function(){d&&(d.remove(),d=null),h&&(h.$destroy(),h=null),p&&(n.leave(p).done((function(t){!1!==t&&(d=null)})),d=p,p=null)};i.$watch(o,(function(o){var u=function(t){!1===t||!j(s)||s&&!i.$eval(s)||e()},d=++f;o?(t(o,!0).then((function(t){if(!i.$$destroyed&&d===f){var e=i.$new();l.template=t;var s=c(e,(function(t){m(),n.enter(t,null,r).done(u)}));p=s,(h=e).$emit("$includeContentLoaded",o),i.$eval(a)}}),(function(){i.$$destroyed||d===f&&(m(),i.$emit("$includeContentError",o))})),i.$emit("$includeContentRequested",o)):(m(),l.template=null)}))}}}}],To=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){if(g.call(i[0]).match(/SVG/))return i.empty(),void e(oe(o.template,t.document).childNodes)(n,(function(t){i.append(t)}),{futureParentElement:i});i.html(o.template),e(i.contents())(n)}}}],So=Dr({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Do=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,i){var r=n.ngList||", ",o="false"!==n.ngTrim,a=o?Q(r):r;i.$parsers.push((function(t){if(!R(t)){var e=[];return t&&x(t.split(a),(function(t){t&&e.push(o?Q(t):t)})),e}})),i.$formatters.push((function(t){if(V(t))return t.join(r)})),i.$isEmpty=function(t){return!t||!t.length}}}},Mo="ng-valid",Ao="ng-invalid",Po="ng-pristine",Oo="ng-dirty",Io=r("ngModel");function No(t,e,n,i,r,o,a,s,u){var l;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=u(n.name||"",!1)(t),this.$$parentForm=Pr,this.$options=Ro,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=r(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=n,this.$$element=i,this.$$animate=o,this.$$timeout=a,this.$$parse=r,this.$$q=s,this.$$exceptionHandler=e,jr(this),(l=this).$$scope.$watch((function(t){var e=l.$$ngModelGet(t);return e===l.$modelValue||l.$modelValue!=l.$modelValue&&e!=e||l.$$setModelValue(e),e}))}No.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],No.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return W(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){W(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Io("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,bt(this.$$element))},$render:P,$isEmpty:function(t){return R(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Oo),this.$$animate.addClass(this.$$element,Po)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Po),this.$$animate.addClass(this.$$element,Oo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!M(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,i=this.$modelValue,r=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,(function(t){r||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==i&&o.$$writeModelToScope())}))}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var i,r,o=this.$$currentValidationRunId,a=this;(function(){var t=a.$$parserName;if(!R(a.$$parserValid))return a.$$parserValid||(x(a.$validators,(function(t,e){s(e,null)})),x(a.$asyncValidators,(function(t,e){s(e,null)}))),s(t,a.$$parserValid),a.$$parserValid;s(t,null);return!0})()?!function(){var n=!0;if(x(a.$validators,(function(i,r){var o=Boolean(i(t,e));n=n&&o,s(r,o)})),!n)return x(a.$asyncValidators,(function(t,e){s(e,null)})),!1;return!0}()?u(!1):(i=[],r=!0,x(a.$asyncValidators,(function(n,o){var a=n(t,e);if(!K(a))throw Io("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),i.push(a.then((function(){s(o,!0)}),(function(){r=!1,s(o,!1)})))})),i.length?a.$$q.all(i).then((function(){u(r)}),P):u(!0)):u(!1);function s(t,e){o===a.$$currentValidationRunId&&a.$setValidity(t,e)}function u(t){o===a.$$currentValidationRunId&&n(t)}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!R(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(R(t=this.$parsers[n](t))){this.$$parserValid=!1;break}M(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var i=this.$modelValue,r=this.$options.getOption("allowInvalid");function o(){e.$modelValue!==i&&e.$$writeModelToScope()}this.$$rawModelValue=t,r&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,(function(n){r||(e.$modelValue=n?t:void 0,o())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),x(this.$viewChangeListeners,(function(t){try{t()}catch(t){this.$$exceptionHandler(t)}}),this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");B(e[t])?e=e[t]:B(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:B(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout((function(){n.$commitViewValue()}),e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){n.$commitViewValue()}))},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,P))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},qr({clazz:No,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Ro,jo=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:No,priority:1,compile:function(e){return e.addClass(Po).addClass("ng-untouched").addClass(Mo),{pre:function(t,e,n,i){var r=i[0],o=i[1]||r.$$parentForm,a=i[2];a&&(r.$options=a.$options),r.$$initGetterSetters(),o.$addControl(r),n.$observe("name",(function(t){r.$name!==t&&r.$$parentForm.$$renameControl(r,t)})),t.$on("$destroy",(function(){r.$$parentForm.$removeControl(r)}))},post:function(e,n,i,r){var o=r[0];function a(){o.$setTouched()}o.$$setUpdateOnEvents(),n.on("blur",(function(){o.$touched||(t.$$phase?e.$evalAsync(a):e.$apply(a))}))}}}}}],qo=/(\s+|^)default(\s+|$)/;function Fo(t){this.$$options=t}Fo.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return x(t=T({},t),(function(n,i){"$inherit"===n?"*"===i?e=!0:(t[i]=this.$$options[i],"updateOn"===i&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===i&&(t.updateOnDefault=!1,t[i]=Q(n.replace(qo,(function(){return t.updateOnDefault=!0," "}))))}),this),e&&(delete t["*"],Bo(t,this.$$options)),Bo(t,Ro.$$options),new Fo(t)}},Ro=new Fo({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Uo=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Ro,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function Bo(t,e){x(e,(function(e,n){j(t[n])||(t[n]=e)}))}var zo=Dr({terminal:!0,priority:1e3}),Vo=r("ngOptions"),Ho=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Wo=["$compile","$document","$parse",function(e,n,i){var r=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,i){i[0].registerOption=P},post:function(t,s,u,l){for(var c=l[0],h=l[1],d=u.multiple,p=0,f=s.children(),m=f.length;p<m;p++)if(""===f[p].value){c.hasEmptyOption=!0,c.emptyOption=f.eq(p);break}s.empty();var g,v=!!c.emptyOption;a(r.cloneNode(!1)).val("?");var y=function(t,e,n){var r=t.match(Ho);if(!r)throw Vo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,bt(e));var o=r[5]||r[7],a=r[6],s=/ as /.test(r[0])&&r[1],u=r[9],l=i(r[2]?r[1]:o),c=s&&i(s)||l,h=u&&i(u),d=u?function(t,e){return h(n,e)}:function(t){return Pe(t)},p=function(t,e){return d(t,_(t,e))},f=i(r[2]||r[1]),m=i(r[3]||""),g=i(r[4]||""),v=i(r[8]),y={},_=a?function(t,e){return y[a]=e,y[o]=t,y}:function(t){return y[o]=t,y};function b(t,e,n,i,r){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=r}function x(t){var e;if(!a&&w(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:u,getTrackByValue:p,getWatchables:i(v,(function(t){for(var e=[],i=x(t=t||[]),o=i.length,a=0;a<o;a++){var s=t===i?a:i[a],u=t[s],l=_(u,s),c=d(u,l);if(e.push(c),r[2]||r[1]){var h=f(n,l);e.push(h)}if(r[4]){var p=g(n,l);e.push(p)}}return e})),getOptions:function(){for(var t=[],e={},i=v(n)||[],r=x(i),o=r.length,a=0;a<o;a++){var s=i===r?a:r[a],l=i[s],h=_(l,s),y=c(n,h),w=d(y,h),$=new b(w,y,f(n,h),m(n,h),g(n,h));t.push($),e[w]=$}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[p(t)]},getViewValueFromOption:function(t){return u?ot(t.viewValue):t.viewValue}}}}}(u.ngOptions,s,t),_=n[0].createDocumentFragment();function b(t,e){var n=r.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label);e.value=t.selectValue}(t,n)}function $(t){var e=g.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}c.generateUnknownOptionValue=function(t){return"?"},d?(c.writeValue=function(t){if(g){var e=t&&t.map($)||[];g.items.forEach((function(t){t.element.selected&&!it(e,t)&&(t.element.selected=!1)}))}},c.readValue=function(){var t=s.val()||[],e=[];return x(t,(function(t){var n=g.selectValueMap[t];n&&!n.disabled&&e.push(g.getViewValueFromOption(n))})),e},y.trackBy&&t.$watchCollection((function(){if(V(h.$viewValue))return h.$viewValue.map((function(t){return y.getTrackByValue(t)}))}),(function(){h.$render()}))):(c.writeValue=function(t){if(g){var e=s[0].options[s[0].selectedIndex],n=g.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(s[0].value!==n.selectValue&&(c.removeUnknownOption(),s[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):c.selectUnknownOrEmptyOption(t)}},c.readValue=function(){var t=g.selectValueMap[s.val()];return t&&!t.disabled?(c.unselectEmptyOption(),c.removeUnknownOption(),g.getViewValueFromOption(t)):null},y.trackBy&&t.$watch((function(){return y.getTrackByValue(h.$viewValue)}),(function(){h.$render()}))),v&&(e(c.emptyOption)(t),s.prepend(c.emptyOption),8===c.emptyOption[0].nodeType?(c.hasEmptyOption=!1,c.registerOption=function(t,e){""===e.val()&&(c.hasEmptyOption=!0,c.emptyOption=e,c.emptyOption.removeClass("ng-scope"),h.$render(),e.on("$destroy",(function(){var t=c.$isEmptyOptionSelected();c.hasEmptyOption=!1,c.emptyOption=void 0,t&&h.$render()})))}):c.emptyOption.removeClass("ng-scope")),t.$watchCollection(y.getWatchables,(function(){var t=g&&c.readValue();if(g)for(var e=g.items.length-1;e>=0;e--){var n=g.items[e];j(n.group)?$e(n.element.parentNode):$e(n.element)}g=y.getOptions();var i={};if(g.items.forEach((function(t){var e;j(t.group)?((e=i[t.group])||(e=o.cloneNode(!1),_.appendChild(e),e.label=null===t.group?"null":t.group,i[t.group]=e),b(t,e)):b(t,_)})),s[0].appendChild(_),h.$render(),!h.$isEmpty(t)){var r=c.readValue();(y.trackBy||d?st(t,r):t===r)||(h.$setViewValue(r),h.$render())}}))}}}}],Zo=["$locale","$interpolate","$log",function(t,e,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(o,a,s){var u,l=s.count,c=s.$attr.when&&a.attr(s.$attr.when),d=s.offset||0,p=o.$eval(c)||{},f={},m=e.startSymbol(),g=e.endSymbol(),v=m+l+"-"+d+g,y=_.noop;function b(t){a.text(t||"")}x(s,(function(t,e){var n=r.exec(e);if(n){var i=(n[1]?"-":"")+h(n[2]);p[i]=a.attr(s.$attr[e])}})),x(p,(function(t,n){f[n]=e(t.replace(i,v))})),o.$watch(l,(function(e){var i=parseFloat(e),r=M(i);if(r||i in p||(i=t.pluralCat(i-d)),!(i===u||r&&M(u))){y();var a=f[i];R(a)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+c),y=P,b()):y=o.$watch(a,b),u=i}}))}}}],Go=r("ngRef"),Yo=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,n){var i=fn(nt(e)),r=t(n.ngRef),o=r.assign||function(){throw Go("nonassign",'Expression in ngRef="{0}" is non-assignable!',n.ngRef)};return function(t,e,a){var s;if(a.hasOwnProperty("ngRefRead")){if("$element"===a.ngRefRead)s=e;else if(!(s=e.data("$"+a.ngRefRead+"Controller")))throw Go("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',a.ngRefRead,n.ngRef)}else s=e.data("$"+i+"Controller");o(t,s=s||e),e.on("$destroy",(function(){r(t)===s&&o(t,null)}))}}}}],Xo=["$parse","$animate","$compile",function(t,e,n){var i=r("ngRepeat"),o=function(t,e,n,i,r,o,a){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},a=function(t){return t.clone[0]},s=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,u){var l=u.ngRepeat,h=n.$$createComment("end ngRepeat",l),d=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!d)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",l);var p=d[1],f=d[2],m=d[3],g=d[4];if(!(d=p.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",p);var v,y,_,b,$=d[3]||d[1],E=d[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m);var k={$id:Pe};return g?v=t(g):(_=function(t,e){return Pe(e)},b=function(t){return t}),function(t,n,r,u,d){v&&(y=function(e,n,i){return E&&(k[E]=e),k[$]=n,k.$index=i,v(t,k)});var p=jt();t.$watchCollection(f,(function(r){var u,f,g,v,k,L,C,T,S,D,M,A,P=n[0],O=jt();if(m&&(t[m]=r),w(r))S=r,T=y||_;else for(var I in T=y||b,S=[],r)c.call(r,I)&&"$"!==I.charAt(0)&&S.push(I);for(v=S.length,M=new Array(v),u=0;u<v;u++)if(k=r===S?u:S[u],L=r[k],C=T(k,L,u),p[C])D=p[C],delete p[C],O[C]=D,M[u]=D;else{if(O[C])throw x(M,(function(t){t&&t.scope&&(p[t.id]=t)})),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",l,C,L);M[u]={id:C,scope:void 0,clone:void 0},O[C]=!0}for(var N in p){if(A=Rt((D=p[N]).clone),e.leave(A),A[0].parentNode)for(u=0,f=A.length;u<f;u++)A[u].$$NG_REMOVED=!0;D.scope.$destroy()}for(u=0;u<v;u++)if(k=r===S?u:S[u],L=r[k],(D=M[u]).scope){g=P;do{g=g.nextSibling}while(g&&g.$$NG_REMOVED);a(D)!==g&&e.move(Rt(D.clone),null,P),P=s(D),o(D.scope,u,$,L,E,k,v)}else d((function(t,n){D.scope=n;var i=h.cloneNode(!1);t[t.length++]=i,e.enter(t,null,P),P=i,D.clone=t,O[D.id]=D,o(D.scope,u,$,L,E,k,v)}));p=O}))}}}}],Ko=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngShow,(function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],Jo=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngHide,(function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],Qo=Dr((function(t,e,n){t.$watchCollection(n.ngStyle,(function(t,n){n&&t!==n&&x(n,(function(t,n){e.css(n,"")})),t&&e.css(t)}))})),ta=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,o){var a=r.ngSwitch||r.on,s=[],u=[],l=[],c=[],h=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(a,(function(n){for(var i,r;l.length;)t.cancel(l.pop());for(i=0,r=c.length;i<r;++i){var a=Rt(u[i].clone);c[i].$destroy(),(l[i]=t.leave(a)).done(h(l,i))}u.length=0,c.length=0,(s=o.cases["!"+n]||o.cases["?"])&&x(s,(function(n){n.transclude((function(i,r){c.push(r);var o=n.element;i[i.length++]=e.$$createComment("end ngSwitchWhen");var a={clone:i};u.push(a),t.enter(i,o.parent(),o)}))}))}))}}}],ea=Dr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){x(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter((function(t,e,n){return n[e-1]!==t})),(function(t){i.cases["!"+t]=i.cases["!"+t]||[],i.cases["!"+t].push({transclude:r,element:e})}))}}),na=Dr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),ia=r("ngTransclude"),ra=["$compile",function(t){return{restrict:"EAC",compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,i,r,o){if(!o)throw ia("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",bt(e));i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude="");var a=i.ngTransclude||i.ngTranscludeSlot;function s(){n(t,(function(t){e.append(t)}))}o((function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];if(i.nodeType!==Ft||i.nodeValue.trim())return!0}}(t)?e.append(t):(s(),n.$destroy())}),null,a),a&&!o.isSlotFilled(a)&&s()}}}}],oa=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var i=n.id,r=e[0].text;t.put(i,r)}}}}],aa={$setViewValue:P,$render:P};function sa(t,e){t.prop("selected",e),t.attr("selected",e)}var ua=["$element","$scope",function(e,n){var i=this,r=new Ne;i.selectValueMap={},i.ngModelCtrl=aa,i.multiple=!1,i.unknownOption=a(t.document.createElement("option")),i.hasEmptyOption=!1,i.emptyOption=void 0,i.renderUnknownOption=function(t){var n=i.generateUnknownOptionValue(t);i.unknownOption.val(n),e.prepend(i.unknownOption),sa(i.unknownOption,!0),e.val(n)},i.updateUnknownOption=function(t){var n=i.generateUnknownOptionValue(t);i.unknownOption.val(n),sa(i.unknownOption,!0),e.val(n)},i.generateUnknownOptionValue=function(t){return"? "+Pe(t)+" ?"},i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.selectEmptyOption=function(){i.emptyOption&&(e.val(""),sa(i.emptyOption,!0))},i.unselectEmptyOption=function(){i.hasEmptyOption&&sa(i.emptyOption,!1)},n.$on("$destroy",(function(){i.renderUnknownOption=P})),i.readValue=function(){var t=e.val(),n=t in i.selectValueMap?i.selectValueMap[t]:t;return i.hasOption(n)?n:null},i.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&sa(a(n),!1),i.hasOption(t)){i.removeUnknownOption();var r=Pe(t);e.val(r in i.selectValueMap?r:t);var o=e[0].options[e[0].selectedIndex];sa(a(o),!0)}else i.selectUnknownOrEmptyOption(t)},i.addOption=function(t,e){if(8!==e[0].nodeType){Nt(t,'"option value"'),""===t&&(i.hasEmptyOption=!0,i.emptyOption=e);var n=r.get(t)||0;r.set(t,n+1),s()}},i.removeOption=function(t){var e=r.get(t);e&&(1===e?(r.delete(t),""===t&&(i.hasEmptyOption=!1,i.emptyOption=void 0)):r.set(t,e-1))},i.hasOption=function(t){return!!r.get(t)},i.$hasEmptyOption=function(){return i.hasEmptyOption},i.$isUnknownOptionSelected=function(){return e[0].options[0]===i.unknownOption[0]},i.$isEmptyOptionSelected=function(){return i.hasEmptyOption&&e[0].options[e[0].selectedIndex]===i.emptyOption[0]},i.selectUnknownOrEmptyOption=function(t){null==t&&i.emptyOption?(i.removeUnknownOption(),i.selectEmptyOption()):i.unknownOption.parent().length?i.updateUnknownOption(t):i.renderUnknownOption(t)};var o=!1;function s(){o||(o=!0,n.$$postDigest((function(){o=!1,i.ngModelCtrl.$render()})))}var u=!1;function l(t){u||(u=!0,n.$$postDigest((function(){n.$$destroyed||(u=!1,i.ngModelCtrl.$setViewValue(i.readValue()),t&&i.ngModelCtrl.$render())})))}i.registerOption=function(t,e,n,r,o){var a,u;n.$attr.ngValue?n.$observe("value",(function(t){var n,r=e.prop("selected");j(u)&&(i.removeOption(a),delete i.selectValueMap[u],n=!0),u=Pe(t),a=t,i.selectValueMap[u]=t,i.addOption(t,e),e.attr("value",u),n&&r&&l()})):r?n.$observe("value",(function(t){var n;i.readValue();var r=e.prop("selected");j(a)&&(i.removeOption(a),n=!0),a=t,i.addOption(t,e),n&&r&&l()})):o?t.$watch(o,(function(t,r){n.$set("value",t);var o=e.prop("selected");r!==t&&i.removeOption(r),i.addOption(t,e),r&&o&&l()})):i.addOption(n.value,e);n.$observe("disabled",(function(t){("true"===t||t&&e.prop("selected"))&&(i.multiple?l(!0):(i.ngModelCtrl.$setViewValue(null),i.ngModelCtrl.$render()))})),e.on("$destroy",(function(){var t=i.readValue(),e=n.value;i.removeOption(e),s(),(i.multiple&&t&&-1!==t.indexOf(e)||t===e)&&l(!0)}))}}],la=function(){return{restrict:"E",require:["select","?ngModel"],controller:ua,priority:1,link:{pre:function(t,e,n,i){var r=i[0],o=i[1];if(!o)return void(r.registerOption=P);if(r.ngModelCtrl=o,e.on("change",(function(){r.removeUnknownOption(),t.$apply((function(){o.$setViewValue(r.readValue())}))})),n.multiple){r.multiple=!0,r.readValue=function(){var t=[];return x(e.find("option"),(function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in r.selectValueMap?r.selectValueMap[n]:n)}})),t},r.writeValue=function(t){x(e.find("option"),(function(e){var n=!!t&&(it(t,e.value)||it(t,r.selectValueMap[e.value]));n!==e.selected&&sa(a(e),n)}))};var s,u=NaN;t.$watch((function(){u!==o.$viewValue||st(s,o.$viewValue)||(s=Ut(o.$viewValue),o.$render()),u=o.$viewValue})),o.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,i){var r=i[1];if(!r)return;var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}}},ca=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var i,r;return j(n.ngValue)||(j(n.value)?i=t(n.value,!0):(r=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o=e.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.registerOption(t,e,n,i,r)}}}}],ha=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){i&&(n.required=!0,i.$validators.required=function(t,e){return!n.required||!i.$isEmpty(e)},n.$observe("required",(function(){i.$validate()})))}}},da=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var o,a=n.ngPattern||n.pattern;n.$observe("pattern",(function(t){if(U(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,t,bt(e));o=t||void 0,i.$validate()})),i.$validators.pattern=function(t,e){return i.$isEmpty(e)||R(o)||o.test(e)}}}}},pa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=-1;n.$observe("maxlength",(function(t){var e=D(t);r=M(e)?-1:e,i.$validate()})),i.$validators.maxlength=function(t,e){return r<0||i.$isEmpty(e)||e.length<=r}}}}},fa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=0;n.$observe("minlength",(function(t){r=D(t)||0,i.$validate()})),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=r}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var e;if(!Pt){var n=lt();(s=R(n)?t.jQuery:n?t[n]:void 0)&&s.fn.on?(a=s,T(s.fn,{scope:ke.scope,isolateScope:ke.isolateScope,controller:ke.controller,injector:ke.injector,inheritedData:ke.inheritedData})):a=se,e=a.cleanData,a.cleanData=function(t){for(var n,i,r=0;null!=(i=t[r]);r++)(n=(a._data(i)||{}).events)&&n.$destroy&&a(i).triggerHandler("$destroy");e(t)},_.element=a,Pt=!0}}(),function(e){T(e,{errorHandlingConfig:n,bootstrap:Tt,copy:ot,extend:T,merge:S,equals:st,element:a,forEach:x,injector:We,noop:P,bind:dt,toJson:ft,fromJson:mt,identity:O,isUndefined:R,isDefined:j,isString:U,isFunction:W,isObject:q,isNumber:B,isElement:et,isArray:V,version:zt,isDate:z,callbacks:{$$counter:0},getTestability:Dt,reloadWithDebugInfo:St,$$minErr:r,$$csp:ut,$$encodeUriSegment:$t,$$encodeUriQuery:Et,$$lowercase:h,$$stringify:qt,$$uppercase:d}),(u=function(t){var e=r("$injector"),n=r("ng");function i(t,e,n){return t[e]||(t[e]=n())}var o=i(t,"angular",Object);return o.$$minErr=o.$$minErr||r,i(o,"module",(function(){var t={};return function(r,o,a){var s={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name",e)}(r,"module"),o&&t.hasOwnProperty(r)&&(t[r]=null),i(t,r,(function(){if(!o)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var t=[],i=[],u=[],l=h("$injector","invoke","push",i),c={_invokeQueue:t,_configBlocks:i,_runBlocks:u,info:function(t){if(j(t)){if(!q(t))throw n("aobj","Argument '{0}' must be an object","value");return s=t,this}return s},requires:o,name:r,provider:d("$provide","provider"),factory:d("$provide","factory"),service:d("$provide","service"),value:h("$provide","value"),constant:h("$provide","constant","unshift"),decorator:d("$provide","decorator",i),animation:d("$animateProvider","register"),filter:d("$filterProvider","register"),controller:d("$controllerProvider","register"),directive:d("$compileProvider","directive"),component:d("$compileProvider","component"),config:l,run:function(t){return u.push(t),this}};return a&&l(a),c;function h(e,n,i,r){return r||(r=t),function(){return r[i||"push"]([e,n,arguments]),c}}function d(e,n,i){return i||(i=t),function(t,o){return o&&W(o)&&(o.$$moduleName=r),i.push([e,n,arguments]),c}}}))}}))}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Ri}),t.provider("$compile",cn).directive({a:Mr,input:lo,textarea:lo,form:Nr,script:oa,select:la,option:ca,ngBind:po,ngBindHtml:mo,ngBindTemplate:fo,ngClass:yo,ngClassEven:bo,ngClassOdd:_o,ngCloak:wo,ngController:xo,ngForm:Rr,ngHide:Jo,ngIf:Lo,ngInclude:Co,ngInit:So,ngNonBindable:zo,ngPluralize:Zo,ngRef:Yo,ngRepeat:Xo,ngShow:Ko,ngStyle:Qo,ngSwitch:ta,ngSwitchWhen:ea,ngSwitchDefault:na,ngOptions:Wo,ngTransclude:ra,ngModel:jo,ngList:Do,ngChange:go,pattern:da,ngPattern:da,required:ha,ngRequired:ha,minlength:fa,ngMinlength:fa,maxlength:pa,ngMaxlength:pa,ngValue:ho,ngModelOptions:Uo}).directive({ngInclude:To}).directive(Ar).directive($o),t.provider({$anchorScroll:Ze,$animate:Qe,$animateCss:nn,$$animateJs:Ke,$$animateQueue:Je,$$AnimateRunner:en,$$animateAsyncRun:tn,$browser:on,$cacheFactory:an,$controller:bn,$document:wn,$$isDocumentHidden:xn,$exceptionHandler:$n,$filter:sr,$$forceReflow:En,$interpolate:Bn,$interval:Vn,$$intervalFactory:Hn,$http:jn,$httpParamSerializer:Mn,$httpParamSerializerJQLike:An,$httpBackend:Fn,$xhrFactory:qn,$jsonpCallbacks:Wn,$location:li,$log:ci,$parse:Ti,$rootScope:Ni,$q:Si,$$q:Di,$sce:Vi,$sceDelegate:zi,$sniffer:Hi,$$taskTrackerFactory:Wi,$templateCache:sn,$templateRequest:Yi,$$testability:Xi,$timeout:Ji,$window:rr,$$rAF:Ii,$$jqLite:Ae,$$Map:Re,$$cookieReader:ar})}]).info({angularVersion:"1.7.4"})}(_),_.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,i){var r=0|t,o=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var i=Math.pow(10,n);return{v:n,f:(t*i|0)%i}}(t,i);return 1==r&&0==o.v?e:n}})}]),a((function(){Ct(t.document,Tt)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(t,e,n){"use strict";(function(e){function n(t){return encodeURIComponent(t).replace(a,l)}function i(t){return decodeURIComponent(t.replace(s," "))}function r(t){if(this[h]=Object.create(null),t)for(var e,n,r=(t||"").split("&"),o=0,a=r.length;o<a;o++)-1<(e=(n=r[o]).indexOf("="))&&this.append(i(n.slice(0,e)),i(n.slice(e+1)))}var o=r.prototype,a=/[!'\(\)~]|%20|%00/g,s=/\+/g,u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},l=function(t){return u[t]},c=function(){try{return!!Symbol.iterator}catch(t){return!1}}(),h="__URLSearchParams__:"+Math.random();o.append=function(t,e){var n=this[h];t in n?n[t].push(""+e):n[t]=[""+e]},o.delete=function(t){delete this[h][t]},o.get=function(t){var e=this[h];return t in e?e[t][0]:null},o.getAll=function(t){var e=this[h];return t in e?e[t].slice(0):[]},o.has=function(t){return t in this[h]},o.set=function(t,e){this[h][t]=[""+e]},o.forEach=function(t,e){var n=this[h];Object.getOwnPropertyNames(n).forEach((function(i){n[i].forEach((function(n){t.call(e,n,i,this)}),this)}),this)},o.keys=function(){var t=[];this.forEach((function(e,n){t.push(n)}));var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c&&(e[Symbol.iterator]=function(){return e}),e},o.values=function(){var t=[];this.forEach((function(e){t.push(e)}));var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c&&(e[Symbol.iterator]=function(){return e}),e},o.entries=function(){var t=[];this.forEach((function(e,n){t.push([n,e])}));var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c&&(e[Symbol.iterator]=function(){return e}),e},c&&(o[Symbol.iterator]=o.entries),o.toJSON=function(){return{}},o.toString=function(){var t,e,i,r,o=this[h],a=[];for(e in o)for(i=n(e),t=0,r=o[e];t<r.length;t++)a.push(i+"="+n(r[t]));return a.join("&")},t.exports=e.URLSearchParams||r}).call(this,n(28))},function(t,e,n){"use strict";var i=n(14),r=n(138),o=n(241),a=n(97);function s(t){var e=new o(t),n=r(o.prototype.request,e);return i.extend(n,o.prototype,e),i.extend(n,e),n}var u=s(a);u.Axios=o,u.create=function(t){return s(i.merge(a,t))},u.Cancel=n(142),u.CancelToken=n(254),u.isCancel=n(141),u.all=function(t){return Promise.all(t)},u.spread=n(255),t.exports=u,t.exports.default=u},function(t,e){t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,n){"use strict";var i=n(97),r=n(14),o=n(249),a=n(250);function s(t){this.defaults=t,this.interceptors={request:new o,response:new o}}s.prototype.request=function(t){"string"==typeof t&&(t=r.merge({url:arguments[0]},arguments[1])),(t=r.merge(i,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},r.forEach(["delete","get","head","options"],(function(t){s.prototype[t]=function(e,n){return this.request(r.merge(n||{},{method:t,url:e}))}})),r.forEach(["post","put","patch"],(function(t){s.prototype[t]=function(e,n,i){return this.request(r.merge(i||{},{method:t,url:e,data:n}))}})),t.exports=s},function(t,e,n){"use strict";var i=n(14);t.exports=function(t,e){i.forEach(t,(function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])}))}},function(t,e,n){"use strict";var i=n(140);t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,i,r){return t.config=e,n&&(t.code=n),t.request=i,t.response=r,t}},function(t,e,n){"use strict";var i=n(14);function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var a=[];i.forEach(e,(function(t,e){null!=t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,(function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))})))})),o=a.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var i=n(14),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(i.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=i.trim(t.substr(0,o)).toLowerCase(),n=i.trim(t.substr(o+1)),e){if(a[e]&&r.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a):a}},function(t,e,n){"use strict";var i=n(14);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=i.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var i=n(14);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,n,r,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(r)&&s.push("path="+r),i.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var i=n(14);function r(){this.handlers=[]}r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=r},function(t,e,n){"use strict";var i=n(14),r=n(251),o=n(141),a=n(97),s=n(252),u=n(253);function l(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return l(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return l(t),e.data=r(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(l(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,n){"use strict";var i=n(14);t.exports=function(t,e,n){return i.forEach(n,(function(n){t=n(t,e)})),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var i=n(142);function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new i(t),e(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r((function(e){t=e})),cancel:t}},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";var i=n(143);function r(){}var o={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==r&&p(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){i((function(){var i;try{i=e(n)}catch(e){return o.reject(t,e)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var a=f((function(){e(r,i)}));"error"===a.status&&i(a.value)}function f(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}t.exports=l,l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(r);this.state!==u?h(n,this.state===s?t:e,this.outcome):this.queue.push(new c(n,t,e));return n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=f(d,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)p(t,i);else{t.state=s,t.outcome=e;for(var r=-1,a=t.queue.length;++r<a;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},l.resolve=function(t){if(t instanceof this)return t;return o.resolve(new this(r),t)},l.reject=function(t){var e=new this(r);return o.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);var a=new Array(n),s=0,u=-1,l=new this(r);for(;++u<n;)c(t[u],u);return l;function c(t,r){e.resolve(t).then((function(t){a[r]=t,++s!==n||i||(i=!0,o.resolve(l,a))}),(function(t){i||(i=!0,o.reject(l,t))}))}},l.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);var a=-1,s=new this(r);for(;++a<n;)u=t[a],e.resolve(u).then((function(t){i||(i=!0,o.resolve(s,t))}),(function(t){i||(i=!0,o.reject(s,t))}));var u;return s}},function(t,e,n){"use strict";t.exports=function(t){return function(){var e=arguments.length;if(e){for(var n=[],i=-1;++i<e;)n[i]=arguments[i];return t.call(this,n)}return t.call(this,[])}}},function(t,e,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function c(t,e,n,i){var r,o,a,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(r=l(t))>0&&a.length>r&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function h(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}function d(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=h.bind(i);return r.listener=n,i.wrapFn=r,r}function p(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):m(r,r.length)}function f(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=r[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var l=u.length,c=m(u,l);for(n=0;n<l;++n)o(c[n],this,e)}return!0},s.prototype.addListener=function(t,e){return c(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return c(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,d(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,d(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,i,r,o,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var i=n(261),r=n(262),o=r;o.v1=i,o.v4=r,t.exports=o},function(t,e,n){var i,r,o=n(144),a=n(145),s=0,u=0;t.exports=function(t,e,n){var l=e&&n||0,c=e||[],h=(t=t||{}).node||i,d=void 0!==t.clockseq?t.clockseq:r;if(null==h||null==d){var p=o();null==h&&(h=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=r=16383&(p[6]<<8|p[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),m=void 0!==t.nsecs?t.nsecs:u+1,g=f-s+(m-u)/1e4;if(g<0&&void 0===t.clockseq&&(d=d+1&16383),(g<0||f>s)&&void 0===t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,u=m,r=d;var v=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;c[l++]=v>>>24&255,c[l++]=v>>>16&255,c[l++]=v>>>8&255,c[l++]=255&v;var y=f/4294967296*1e4&268435455;c[l++]=y>>>8&255,c[l++]=255&y,c[l++]=y>>>24&15|16,c[l++]=y>>>16&255,c[l++]=d>>>8|128,c[l++]=255&d;for(var _=0;_<6;++_)c[l+_]=h[_];return e||a(c)}},function(t,e,n){var i=n(144),r=n(145);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[o+s]=a[s];return e||r(a)}},function(t,e,n){(function(i){function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG),t}(e=t.exports=n(264)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(o=r))})),t.splice(o,0,i)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())}).call(this,n(103))},function(t,e,n){function i(t){var n;function i(){if(i.enabled){var t=i,r=+new Date,o=r-(n||r);t.diff=o,t.prev=n,t.curr=r,n=r;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;u++;var r=e.formatters[i];if("function"==typeof r){var o=a[u];n=r.call(t,o),a.splice(u,1),u--}return n})),e.formatArgs.call(t,a);var l=i.log||e.log||console.log.bind(console);l.apply(t,a)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=r,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var o=e.instances[n];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(265),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e){var n=1e3,i=6e4,r=36e5,o=24*r;function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var s,u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===u&&!1===isNaN(t))return e.long?a(s=t,o,"day")||a(s,r,"hour")||a(s,i,"minute")||a(s,n,"second")||s+" ms":function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=r)return Math.round(t/r)+"h";if(t>=i)return Math.round(t/i)+"m";if(t>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){t.exports=function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],i=t[1],r=t[2],o=t[3];i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[0]-680876936|0)<<7|n>>>25)+i|0)&i|~n&r)+e[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&i)+e[2]+606105819|0)<<17|r>>>15)+o|0)&o|~r&n)+e[3]-1044525330|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[4]-176418897|0)<<7|n>>>25)+i|0)&i|~n&r)+e[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&i)+e[6]-1473231341|0)<<17|r>>>15)+o|0)&o|~r&n)+e[7]-45705983|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[8]+1770035416|0)<<7|n>>>25)+i|0)&i|~n&r)+e[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&i)+e[10]-42063|0)<<17|r>>>15)+o|0)&o|~r&n)+e[11]-1990404162|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[12]+1804603682|0)<<7|n>>>25)+i|0)&i|~n&r)+e[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&i)+e[14]-1502002290|0)<<17|r>>>15)+o|0)&o|~r&n)+e[15]+1236535329|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[1]-165796510|0)<<5|n>>>27)+i|0)&r|i&~r)+e[6]-1069501632|0)<<9|o>>>23)+n|0)&i|n&~i)+e[11]+643717713|0)<<14|r>>>18)+o|0)&n|o&~n)+e[0]-373897302|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[5]-701558691|0)<<5|n>>>27)+i|0)&r|i&~r)+e[10]+38016083|0)<<9|o>>>23)+n|0)&i|n&~i)+e[15]-660478335|0)<<14|r>>>18)+o|0)&n|o&~n)+e[4]-405537848|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[9]+568446438|0)<<5|n>>>27)+i|0)&r|i&~r)+e[14]-1019803690|0)<<9|o>>>23)+n|0)&i|n&~i)+e[3]-187363961|0)<<14|r>>>18)+o|0)&n|o&~n)+e[8]+1163531501|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[13]-1444681467|0)<<5|n>>>27)+i|0)&r|i&~r)+e[2]-51403784|0)<<9|o>>>23)+n|0)&i|n&~i)+e[7]+1735328473|0)<<14|r>>>18)+o|0)&n|o&~n)+e[12]-1926607734|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[5]-378558|0)<<4|n>>>28)+i|0)^i^r)+e[8]-2022574463|0)<<11|o>>>21)+n|0)^n^i)+e[11]+1839030562|0)<<16|r>>>16)+o|0)^o^n)+e[14]-35309556|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[1]-1530992060|0)<<4|n>>>28)+i|0)^i^r)+e[4]+1272893353|0)<<11|o>>>21)+n|0)^n^i)+e[7]-155497632|0)<<16|r>>>16)+o|0)^o^n)+e[10]-1094730640|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[13]+681279174|0)<<4|n>>>28)+i|0)^i^r)+e[0]-358537222|0)<<11|o>>>21)+n|0)^n^i)+e[3]-722521979|0)<<16|r>>>16)+o|0)^o^n)+e[6]+76029189|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[9]-640364487|0)<<4|n>>>28)+i|0)^i^r)+e[12]-421815835|0)<<11|o>>>21)+n|0)^n^i)+e[15]+530742520|0)<<16|r>>>16)+o|0)^o^n)+e[2]-995338651|0)<<23|i>>>9)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[0]-198630844|0)<<6|n>>>26)+i|0)|~r))+e[7]+1126891415|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[14]-1416354905|0)<<15|r>>>17)+o|0)|~n))+e[5]-57434055|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[12]+1700485571|0)<<6|n>>>26)+i|0)|~r))+e[3]-1894986606|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[10]-1051523|0)<<15|r>>>17)+o|0)|~n))+e[1]-2054922799|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[8]+1873313359|0)<<6|n>>>26)+i|0)|~r))+e[15]-30611744|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[6]-1560198380|0)<<15|r>>>17)+o|0)|~n))+e[13]+1309151649|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[4]-145523070|0)<<6|n>>>26)+i|0)|~r))+e[11]-1120210379|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[2]+718787259|0)<<15|r>>>17)+o|0)|~n))+e[9]-343485551|0)<<21|i>>>11)+r|0,t[0]=n+t[0]|0,t[1]=i+t[1]|0,t[2]=r+t[2]|0,t[3]=o+t[3]|0}function i(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function o(t){var e,r,o,a,s,u,l=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=l;e+=64)n(c,i(t.substring(e-64,e)));for(r=(t=t.substring(e-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(n(c,o),e=0;e<16;e+=1)o[e]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,o[14]=s,o[15]=u,n(c,o),c}function a(t){var n,i="";for(n=0;n<4;n+=1)i+=e[t>>8*n+4&15]+e[t>>8*n&15];return i}function s(t){var e;for(e=0;e<t.length;e+=1)t[e]=a(t[e]);return t.join("")}function u(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function l(t){var e,n=[],i=t.length;for(e=0;e<i-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function c(){this.reset()}return s(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,i){var r,o,a,s,u=this.byteLength,l=e(n,u),c=u;return i!==t&&(c=e(i,u)),l>c?new ArrayBuffer(0):(r=c-l,o=new ArrayBuffer(r),a=new Uint8Array(o),s=new Uint8Array(this,l,r),a.set(s),o)}}(),c.prototype.append=function(t){return this.appendBinary(u(t)),this},c.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,r=this._buff.length;for(e=64;e<=r;e+=64)n(this._hash,i(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},c.prototype.end=function(t){var e,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r;e+=1)o[e>>2]|=i.charCodeAt(e)<<(e%4<<3);return this._finish(o,r),n=s(this._hash),t&&(n=l(n)),this.reset(),n},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},c.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(t,e){var i,r,o,a=e;if(t[a>>2]|=128<<(a%4<<3),a>55)for(n(this._hash,t),a=0;a<16;a+=1)t[a]=0;i=(i=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(i[2],16),o=parseInt(i[1],16)||0,t[14]=r,t[15]=o,n(this._hash,t)},c.hash=function(t,e){return c.hashBinary(u(t),e)},c.hashBinary=function(t,e){var n=s(o(t));return e?l(n):n},c.ArrayBuffer=function(){this.reset()},c.ArrayBuffer.prototype.append=function(t){var e,i,o,a,s,u=(i=this._buff.buffer,o=t,a=!0,(s=new Uint8Array(i.byteLength+o.byteLength)).set(new Uint8Array(i)),s.set(new Uint8Array(o),i.byteLength),a?s:s.buffer),l=u.length;for(this._length+=t.byteLength,e=64;e<=l;e+=64)n(this._hash,r(u.subarray(e-64,e)));return this._buff=e-64<l?new Uint8Array(u.buffer.slice(e-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(t){var e,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r;e+=1)o[e>>2]|=i[e]<<(e%4<<3);return this._finish(o,r),n=s(this._hash),t&&(n=l(n)),this.reset(),n},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var t,e=c.prototype.getState.call(this);return e.buff=(t=e.buff,String.fromCharCode.apply(null,new Uint8Array(t))),e},c.ArrayBuffer.prototype.setState=function(t){return t.buff=function(t,e){var n,i=t.length,r=new ArrayBuffer(i),o=new Uint8Array(r);for(n=0;n<i;n+=1)o[n]=t.charCodeAt(n);return e?o:r}(t.buff,!0),c.prototype.setState.call(this,t)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(t,e){var i=s(function(t){var e,i,o,a,s,u,l=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=l;e+=64)n(c,r(t.subarray(e-64,e)));for(t=e-64<l?t.subarray(e-64):new Uint8Array(0),i=t.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<i;e+=1)o[e>>2]|=t[e]<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(n(c,o),e=0;e<16;e+=1)o[e]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,o[14]=s,o[15]=u,n(c,o),c}(new Uint8Array(t)));return e?l(i):i},c}()},function(t,e,n){"use strict";function i(t,e,n){var i=n[n.length-1];t===i.element&&(n.pop(),i=n[n.length-1]);var r=i.element,o=i.index;if(Array.isArray(r))r.push(t);else if(o===e.length-2){r[e.pop()]=t}else e.push(t)}e.stringify=function(t){var e=[];e.push({obj:t});for(var n,i,r,o,a,s,u,l,c,h,d="";n=e.pop();)if(i=n.obj,d+=n.prefix||"",r=n.val||"")d+=r;else if("object"!=typeof i)d+=void 0===i?null:JSON.stringify(i);else if(null===i)d+="null";else if(Array.isArray(i)){for(e.push({val:"]"}),o=i.length-1;o>=0;o--)a=0===o?"":",",e.push({obj:i[o],prefix:a});e.push({val:"["})}else{for(u in s=[],i)i.hasOwnProperty(u)&&s.push(u);for(e.push({val:"}"}),o=s.length-1;o>=0;o--)c=i[l=s[o]],h=o>0?",":"",h+=JSON.stringify(l)+":",e.push({obj:c,prefix:h});e.push({val:"{"})}return d},e.parse=function(t){for(var e,n,r,o,a,s,u,l,c,h=[],d=[],p=0;;)if("}"!==(e=t[p++])&&"]"!==e&&void 0!==e)switch(e){case" ":case"\t":case"\n":case":":case",":break;case"n":p+=3,i(null,h,d);break;case"t":p+=3,i(!0,h,d);break;case"f":p+=4,i(!1,h,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",p--;;){if(r=t[p++],!/[\d\.\-e\+]/.test(r)){p--;break}n+=r}i(parseFloat(n),h,d);break;case'"':for(o="",a=void 0,s=0;'"'!==(u=t[p++])||"\\"===a&&s%2==1;)o+=u,"\\"===(a=u)?s++:s=0;i(JSON.parse('"'+o+'"'),h,d);break;case"[":l={element:[],index:h.length},h.push(l.element),d.push(l);break;case"{":c={element:{},index:h.length},h.push(c.element),d.push(c);break;default:throw new Error("unexpectedly reached end of input: "+e)}else{if(1===h.length)return h.pop();i(h.pop(),h,d)}}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return p}));var i=n(3);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(n,!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}var d=n(70),p=function(){function t(e){l(this,t),this.session=e}var e,n;return h(t,[{key:"transcode",value:function(t){return new m(t).parse()}},{key:"objectToText",value:function(t){return Object.keys(t).map((function(e){return"".concat(e,":").concat(t[e])})).join(";")}},{key:"submit",value:(e=regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.a.get("sms"),n=a({},"object"===r(this.session.data.payload)?this.session.data.payload:{},{},this.transcode(this.session.data.xml)),o=this._smsLink(e,this.objectToText(n)),window.clickSendSms=function(){d.emit("SMS.click")},d.emit("EnketoForm.submit.status",'<a href="'+o+'" class="btn btn-primary" id="instantSubmit__sms-send" target="_blank" onclick="clickSendSms()">Click here to send SMS</a>'),t.abrupt("return",new Promise((function(t){d.once("SMS.click",(function(){setTimeout(t,200)}))})));case 6:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(t){u(o,i,r,a,s,"next",t)}function s(t){u(o,i,r,a,s,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"_smsLink",value:function(t,e){var n="sms:"+encodeURIComponent(t);return this._isPlatformApple()?n+"&body="+encodeURIComponent(e):n+"?body="+encodeURIComponent(e)}},{key:"_isPlatformApple",value:function(){var t=window.navigator.userAgent.toLowerCase();return/iphone|ipod|ipad|os\sx/.test(t)}}]),t}(),f=["meta","start","end","today","username","simserial","subscriberid","deviceid","phonenumber"],m=function(){function e(n){l(this,e),this.$xml=t(t.parseXML(n)),this.output={}}return h(e,[{key:"parse",value:function(){return this._appendMeta(),this._appendFromNodes(this.$xml.find("data").children()),this.output}},{key:"_appendMeta",value:function(){var t=this.$xml.find("meta");this._appendFromNodes(t.children())}},{key:"_appendFromNodes",value:function(e){var n=this;e.each((function(){if(t(this).children().length)return n._appendFromNodes(t(this).children());var e=t(this)[0];f.includes(e.nodeName)||"file"!==e.getAttribute("type")&&e.textContent&&(n.output[e.nodeName]=e.textContent)}))}}]),e}()}).call(this,n(0))},function(t,e,n){"use strict";(function(t){var i=n(64),r=n(3);function o(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(t){o(a,i,r,s,u,"next",t)}function u(t){o(a,i,r,s,u,"throw",t)}s(void 0)}))}}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,o,u,l,c;return n=e,(o=[{key:"loadAndAttach",value:(c=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._load();case 2:this._preprocessFormHtml(),this._attachSurveyFormToDom();case 4:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_load",value:(l=a(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.create().json(r.a.getPath("survey"));case 2:this.survey=e.sent,r.a.has("readonly")&&(n=t(this.survey.form),t("input,select",n).attr("readonly","true()"),this.survey.form=n.prop("outerHTML"));case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"_preprocessFormHtml",value:function(){this.survey.form=this.survey.form.replace(/jr:\/\/images\//g,r.a.getPath("assets")+"/")}},{key:"_attachSurveyFormToDom",value:function(){document.querySelector(".form-header").insertAdjacentHTML("afterend",this.survey.form),this._hideSurveyTitle()}},{key:"_hideSurveyTitle",value:function(){"off"===r.a.get("title")&&document.getElementById("form-title").remove()}}])&&s(n.prototype,o),u&&s(n,u),e}();e.a=new u}).call(this,n(0))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=306},function(t,e){Date.prototype.toISOLocalString=function(){if("Invalid Date"===this.toString())return this.toString();var t=new Date(this.getTime()-60*this.getTimezoneOffset()*1e3).toISOString().replace("Z",this.getTimezoneOffsetAsTime());return t.indexOf("T00:00:00.000")>0?t.split("T")[0]:t},Date.prototype.getTimezoneOffsetAsTime=function(){var t,e=function(t){return t<10?"0"+t:t};return"Invalid Date"===this.toString()?this.toString():((t=this.getTimezoneOffset())<0?"+":"-")+e(Math.floor(Math.abs(t)/60))+":"+e(Math.floor(Math.abs(t)%60))}},function(t,e,n){var i,r,o;r=[n(0)],void 0===(o="function"==typeof(i=function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function r(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function o(n,i){return function(){return i!==e&&t.fn.datepicker.deprecated(i),this[n].apply(this,arguments)}}var a,s=(a={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;n<i;n++)if(0<=this[n].valueOf()-e&&this[n].valueOf()-e<864e5)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new s;return t.replace(this),t}},function(){var e=[];return e.push.apply(e,arguments),t.extend(e,a),e}),u=function(e,n){t.data(e,"datepicker",this),this._events=[],this._secondaryEvents=[],this._process_options(n),this.dates=new s,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .input-group-append, .input-group-prepend, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=t(v.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",(function(t,e){return Number(e)+1})),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};u.prototype={constructor:u,_resolveViewName:function(e){return t.each(v.viewModes,(function(n,i){if(e===n||-1!==t.inArray(e,i.names))return e=n,!1})),e},_resolveDaysOfWeek:function(e){return t.isArray(e)||(e=e.split(/[,\s]*/)),t.map(e,Number)},_check_template:function(n){try{return n!==e&&""!==n&&((n.match(/[<>]/g)||[]).length<=0||t(n).length>0)}catch(t){return!1}},_process_options:function(e){this._o=t.extend({},this._o,e);var r=this.o=t.extend({},this._o),o=r.language;g[o]||(o=o.split("-")[0],g[o]||(o=f.language)),r.language=o,r.startView=this._resolveViewName(r.startView),r.minViewMode=this._resolveViewName(r.minViewMode),r.maxViewMode=this._resolveViewName(r.maxViewMode),r.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,r.startView)),!0!==r.multidate&&(r.multidate=Number(r.multidate)||!1,!1!==r.multidate&&(r.multidate=Math.max(0,r.multidate))),r.multidateSeparator=String(r.multidateSeparator),r.weekStart%=7,r.weekEnd=(r.weekStart+6)%7;var a=v.parseFormat(r.format);r.startDate!==-1/0&&(r.startDate?r.startDate instanceof Date?r.startDate=this._local_to_utc(this._zero_time(r.startDate)):r.startDate=v.parseDate(r.startDate,a,r.language,r.assumeNearbyYear):r.startDate=-1/0),r.endDate!==1/0&&(r.endDate?r.endDate instanceof Date?r.endDate=this._local_to_utc(this._zero_time(r.endDate)):r.endDate=v.parseDate(r.endDate,a,r.language,r.assumeNearbyYear):r.endDate=1/0),r.daysOfWeekDisabled=this._resolveDaysOfWeek(r.daysOfWeekDisabled||[]),r.daysOfWeekHighlighted=this._resolveDaysOfWeek(r.daysOfWeekHighlighted||[]),r.datesDisabled=r.datesDisabled||[],t.isArray(r.datesDisabled)||(r.datesDisabled=r.datesDisabled.split(",")),r.datesDisabled=t.map(r.datesDisabled,(function(t){return v.parseDate(t,a,r.language,r.assumeNearbyYear)}));var s=String(r.orientation).toLowerCase().split(/\s+/g),u=r.orientation.toLowerCase();if(s=t.grep(s,(function(t){return/^auto|left|right|top|bottom$/.test(t)})),r.orientation={x:"auto",y:"auto"},u&&"auto"!==u)if(1===s.length)switch(s[0]){case"top":case"bottom":r.orientation.y=s[0];break;case"left":case"right":r.orientation.x=s[0]}else u=t.grep(s,(function(t){return/^left|right$/.test(t)})),r.orientation.x=u[0]||"auto",u=t.grep(s,(function(t){return/^top|bottom$/.test(t)})),r.orientation.y=u[0]||"auto";if(r.defaultViewDate instanceof Date||"string"==typeof r.defaultViewDate)r.defaultViewDate=v.parseDate(r.defaultViewDate,a,r.language,r.assumeNearbyYear);else if(r.defaultViewDate){var l=r.defaultViewDate.year||(new Date).getFullYear(),c=r.defaultViewDate.month||0,h=r.defaultViewDate.day||1;r.defaultViewDate=n(l,c,h)}else r.defaultViewDate=i()},_applyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(i=e,r=t[o][1]):3===t[o].length&&(i=t[o][1],r=t[o][2]),n.on(r,i)},_unapplyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(r=e,i=t[o][1]):3===t[o].length&&(r=t[o][1],i=t[o][2]),n.off(i,r)},_buildEvents:function(){var e={keyup:t.proxy((function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()}),this),keydown:t.proxy(this.keydown,this),paste:t.proxy(this.paste,this)};!0===this.o.showOnFocus&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.inputField.length?this._events=[[this.inputField,e],[this.component,{click:t.proxy(this.show,this)}]]:this._events=[[this.element,{click:t.proxy(this.show,this),keydown:t.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:t.proxy((function(t){this._focused_from=t.target}),this)}],[this.element,{blur:t.proxy((function(t){this._focused_from=t.target}),this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":t.proxy((function(t){this.update(t.date)}),this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[this.picker,".prev, .next",{click:t.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:t.proxy(this.dayCellClick,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy((function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.isInline||this.hide()}),this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),r=this._utc_to_local(i);this.element.trigger({type:e,date:r,viewMode:this.viewMode,dates:t.map(this.dates,this._utc_to_local),format:t.proxy((function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return v.formatDate(n,e,this.o.language)}),this)})},show:function(){if(!(this.inputField.is(":disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var n;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==t.inArray("text/plain",e.originalEvent.clipboardData.types))n=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),e.preventDefault()},_utc_to_local:function(t){if(!t)return t;var e=new Date(t.getTime()+6e4*t.getTimezoneOffset());return e.getTimezoneOffset()!==t.getTimezoneOffset()&&(e=new Date(t.getTime()+6e4*e.getTimezoneOffset())),e},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&n(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,(function(t){return new Date(t)}))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return t!==e?new Date(t):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,t.map(e,this._utc_to_local)),this},setDate:o("setDates"),setUTCDate:o("setUTCDates"),remove:o("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var t=this.getFormattedDate();return this.inputField.val(t),this},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,(function(t){return v.formatDate(t,n,i)})).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){return this._process_options({datesDisabled:t}),this.update(),this},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=t(this.o.container),r=i.width(),o="body"===this.o.container?t(document).scrollTop():i.scrollTop(),a=i.offset(),s=[0];this.element.parents().each((function(){var e=t(this).css("z-index");"auto"!==e&&0!==Number(e)&&s.push(Number(e))}));var u=Math.max.apply(Math,s)+this.o.zIndexOffset,l=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),d=l.left-a.left,p=l.top-a.top;"body"!==this.o.container&&(p+=o),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(d-=e-h)):l.left<0?(this.picker.addClass("datepicker-orient-left"),d-=l.left-10):d+e>r?(this.picker.addClass("datepicker-orient-right"),d+=h-e):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var f=this.o.orientation.y;if("auto"===f&&(f=-o+p-n<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+f),"top"===f?p-=n+parseInt(this.picker.css("padding-top")):p+=c,this.o.rtl){var m=r-(d+h);this.picker.css({top:p,right:m,zIndex:u})}else this.picker.css({top:p,left:d,zIndex:u});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),n=[],i=!1;return arguments.length?(t.each(arguments,t.proxy((function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)}),this)),i=!0):(n=(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy((function(t){return v.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)}),this)),n=t.grep(n,t.proxy((function(t){return!this.dateWithinRange(t)||!t}),this),!0),this.dates.replace(n),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),i?(this.setValue(),this.element.change()):this.dates.length&&String(e)!==String(this.dates)&&i&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&e.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var e=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(n+='<th class="cw">&#160;</th>');e<this.o.weekStart+7;)n+='<th class="dow',-1!==t.inArray(e,this.o.daysOfWeekDisabled)&&(n+=" disabled"),n+='">'+g[this.o.language].daysMin[e++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)}},fillMonths:function(){for(var t=this._utc_to_local(this.viewDate),e="",n=0;n<12;n++)e+='<span class="month'+(t&&t.getMonth()===n?" focused":"")+'">'+g[this.o.language].monthsShort[n]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(e){e&&e.length?this.range=t.map(e,(function(t){return t.valueOf()})):delete this.range,this.fill()},getClassNames:function(e){var n=[],o=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),s=i();return e.getUTCFullYear()<o||e.getUTCFullYear()===o&&e.getUTCMonth()<a?n.push("old"):(e.getUTCFullYear()>o||e.getUTCFullYear()===o&&e.getUTCMonth()>a)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&r(e,s)&&n.push("today"),-1!==this.dates.contains(e)&&n.push("active"),this.dateWithinRange(e)||n.push("disabled"),this.dateIsDisabled(e)&&n.push("disabled","disabled-date"),-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&n.push("selected"),e.valueOf()===this.range[0]&&n.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,i,r,o,a,s,u){for(var l,c,h,d="",p=r/10,f=this.picker.find(n),m=Math.floor(o/r)*r,g=m+9*p,v=Math.floor(this.viewDate.getFullYear()/p)*p,y=t.map(this.dates,(function(t){return Math.floor(t.getUTCFullYear()/p)*p})),_=m-p;_<=g+p;_+=p)l=[i],c=null,_===m-p?l.push("old"):_===g+p&&l.push("new"),-1!==t.inArray(_,y)&&l.push("active"),(_<a||_>s)&&l.push("disabled"),_===v&&l.push("focused"),u!==t.noop&&((h=u(new Date(_,0,1)))===e?h={}:"boolean"==typeof h?h={enabled:h}:"string"==typeof h&&(h={classes:h}),!1===h.enabled&&l.push("disabled"),h.classes&&(l=l.concat(h.classes.split(/\s+/))),h.tooltip&&(c=h.tooltip)),d+='<span class="'+l.join(" ")+'"'+(c?' title="'+c+'"':"")+">"+_+"</span>";f.find(".datepicker-switch").text(m+"-"+g),f.find("td").html(d)},fill:function(){var r,o,a=new Date(this.viewDate),s=a.getUTCFullYear(),u=a.getUTCMonth(),l=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,c=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,d=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,p=g[this.o.language].today||g.en.today||"",f=g[this.o.language].clear||g.en.clear||"",m=g[this.o.language].titleFormat||g.en.titleFormat,y=i(),_=(!0===this.o.todayBtn||"linked"===this.o.todayBtn)&&y>=this.o.startDate&&y<=this.o.endDate&&!this.weekOfDateIsDisabled(y);if(!isNaN(s)&&!isNaN(u)){this.picker.find(".datepicker-days .datepicker-switch").text(v.formatDate(a,m,this.o.language)),this.picker.find("tfoot .today").text(p).css("display",_?"table-cell":"none"),this.picker.find("tfoot .clear").text(f).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var b=n(s,u,0),w=b.getUTCDate();b.setUTCDate(w-(b.getUTCDay()-this.o.weekStart+7)%7);var x=new Date(b);b.getUTCFullYear()<100&&x.setUTCFullYear(b.getUTCFullYear()),x.setUTCDate(x.getUTCDate()+42),x=x.valueOf();for(var $,E,k=[];b.valueOf()<x;){if(($=b.getUTCDay())===this.o.weekStart&&(k.push("<tr>"),this.o.calendarWeeks)){var L=new Date(+b+(this.o.weekStart-$-7)%7*864e5),C=new Date(Number(L)+(11-L.getUTCDay())%7*864e5),T=new Date(Number(T=n(C.getUTCFullYear(),0,1))+(11-T.getUTCDay())%7*864e5),S=(C-T)/864e5/7+1;k.push('<td class="cw">'+S+"</td>")}(E=this.getClassNames(b)).push("day");var D=b.getUTCDate();this.o.beforeShowDay!==t.noop&&((o=this.o.beforeShowDay(this._utc_to_local(b)))===e?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),!1===o.enabled&&E.push("disabled"),o.classes&&(E=E.concat(o.classes.split(/\s+/))),o.tooltip&&(r=o.tooltip),o.content&&(D=o.content)),E=t.isFunction(t.uniqueSort)?t.uniqueSort(E):t.unique(E),k.push('<td class="'+E.join(" ")+'"'+(r?' title="'+r+'"':"")+' data-date="'+b.getTime().toString()+'">'+D+"</td>"),r=null,$===this.o.weekEnd&&k.push("</tr>"),b.setUTCDate(b.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(k.join(""));var M=g[this.o.language].monthsTitle||g.en.monthsTitle||"Months",A=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?M:s).end().find("tbody span").removeClass("active");if(t.each(this.dates,(function(t,e){e.getUTCFullYear()===s&&A.eq(e.getUTCMonth()).addClass("active")})),(s<l||s>h)&&A.addClass("disabled"),s===l&&A.slice(0,c).addClass("disabled"),s===h&&A.slice(d+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var P=this;t.each(A,(function(n,i){var r=new Date(s,n,1),o=P.o.beforeShowMonth(r);o===e?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),!1!==o.enabled||t(i).hasClass("disabled")||t(i).addClass("disabled"),o.classes&&t(i).addClass(o.classes),o.tooltip&&t(i).prop("title",o.tooltip)}))}this._fill_yearsView(".datepicker-years","year",10,s,l,h,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,s,l,h,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,s,l,h,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var t,e,n=new Date(this.viewDate),i=n.getUTCFullYear(),r=n.getUTCMonth(),o=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,a=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,s=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,u=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,l=1;switch(this.viewMode){case 4:l*=10;case 3:l*=10;case 2:l*=10;case 1:t=Math.floor(i/l)*l<=o,e=Math.floor(i/l)*l+l>s;break;case 0:t=i<=o&&r<=a,e=i>=s&&r>=u}this.picker.find(".prev").toggleClass("disabled",t),this.picker.find(".next").toggleClass("disabled",e)}},click:function(e){var r,o,a;e.preventDefault(),e.stopPropagation(),(r=t(e.target)).hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),r.hasClass("today")&&!r.hasClass("day")&&(this.setViewMode(0),this._setDate(i(),"linked"===this.o.todayBtn?null:"view")),r.hasClass("clear")&&this.clearDates(),r.hasClass("disabled")||(r.hasClass("month")||r.hasClass("year")||r.hasClass("decade")||r.hasClass("century"))&&(this.viewDate.setUTCDate(1),1===this.viewMode?(a=r.parent().find("span").index(r),o=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(a)):(a=0,o=Number(r.text()),this.viewDate.setUTCFullYear(o)),this._trigger(v.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(n(o,a,1)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(e){var n=t(e.currentTarget).data("date"),i=new Date(n);this.o.updateViewDate&&(i.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),i.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(i)},navArrowsClick:function(e){var n=t(e.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(n*=12*v.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,n),this._trigger(v.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):!1===this.o.multidate?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),(!e&&this.o.updateViewDate||"view"===e)&&(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var n=new Date(t);return n.setUTCDate(t.getUTCDate()+e),n},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!(n=t)||isNaN(n.getTime()))return this.o.defaultViewDate;var n;if(!e)return t;var i,r,o=new Date(t.valueOf()),a=o.getUTCDate(),s=o.getUTCMonth(),u=Math.abs(e);if(e=e>0?1:-1,1===u)r=-1===e?function(){return o.getUTCMonth()===s}:function(){return o.getUTCMonth()!==i},i=s+e,o.setUTCMonth(i),i=(i+12)%12;else{for(var l=0;l<u;l++)o=this.moveMonth(o,e);i=o.getUTCMonth(),o.setUTCDate(a),r=function(){return i!==o.getUTCMonth()}}for(;r();)o.setUTCDate(--a),o.setUTCMonth(i);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,n){do{if(t=this[n](t,e),!this.dateWithinRange(t))return!1;n="moveDay"}while(this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(e){return-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(e){return this.weekOfDateIsDisabled(e)||t.grep(this.o.datesDisabled,(function(t){return r(e,t)})).length>0},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":visible")){var e,n,i=!1,r=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault(),t.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1,0===this.viewMode?t.ctrlKey?(n=this.moveAvailableDate(r,e,"moveYear"))&&this._trigger("changeYear",this.viewDate):t.shiftKey?(n=this.moveAvailableDate(r,e,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===t.keyCode||39===t.keyCode?n=this.moveAvailableDate(r,e,"moveDay"):this.weekOfDateIsDisabled(r)||(n=this.moveAvailableDate(r,e,"moveWeek")):1===this.viewMode?(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(r,e,"moveMonth")):2===this.viewMode&&(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(r,e,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 13:if(!this.o.forceParse)break;r=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(r),i=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),t.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}i&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else 40!==t.keyCode&&27!==t.keyCode||(this.show(),t.stopPropagation())},setViewMode:function(t){this.viewMode=t,this.picker.children("div").hide().filter(".datepicker-"+v.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var l=function(e,n){t.data(e,"datepicker",this),this.element=t(e),this.inputs=t.map(n.inputs,(function(t){return t.jquery?t[0]:t})),delete n.inputs,this.keepEmptyValues=n.keepEmptyValues,delete n.keepEmptyValues,p.call(t(this.inputs),n).on("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,(function(e){return t.data(e,"datepicker")})),this.updateDates()};function c(e,n){var i=t(e).data(),r={},o=new RegExp("^"+n.toLowerCase()+"([A-Z])");function a(t,e){return e.toLowerCase()}for(var s in n=new RegExp("^"+n.toLowerCase()),i)n.test(s)&&(r[s.replace(o,a)]=i[s]);return r}function h(e){var n={};if(g[e]||(e=e.split("-")[0],g[e])){var i=g[e];return t.each(m,(function(t,e){e in i&&(n[e]=i[e])})),n}}l.prototype={updateDates:function(){this.dates=t.map(this.pickers,(function(t){return t.getUTCDate()})),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,(function(t){return t.valueOf()}));t.each(this.pickers,(function(t,n){n.setRange(e)}))},clearDates:function(){t.each(this.pickers,(function(t,e){e.clearDates()}))},dateUpdated:function(n){if(!this.updating){this.updating=!0;var i=t.data(n.target,"datepicker");if(i!==e){var r=i.getUTCDate(),o=this.keepEmptyValues,a=t.inArray(n.target,this.inputs),s=a-1,u=a+1,l=this.inputs.length;if(-1!==a){if(t.each(this.pickers,(function(t,e){e.getUTCDate()||e!==i&&o||e.setUTCDate(r)})),r<this.dates[s])for(;s>=0&&r<this.dates[s];)this.pickers[s--].setUTCDate(r);else if(r>this.dates[u])for(;u<l&&r>this.dates[u];)this.pickers[u++].setUTCDate(r);this.updateDates(),delete this.updating}}}},destroy:function(){t.map(this.pickers,(function(t){t.destroy()})),t(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:o("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var d=t.fn.datepicker,p=function(n){var i,r=Array.apply(null,arguments);if(r.shift(),this.each((function(){var e=t(this),o=e.data("datepicker"),a="object"==typeof n&&n;if(!o){var s=c(this,"date"),d=h(t.extend({},f,s,a).language),p=t.extend({},f,d,s,a);e.hasClass("input-daterange")||p.inputs?(t.extend(p,{inputs:p.inputs||e.find("input").toArray()}),o=new l(this,p)):o=new u(this,p),e.data("datepicker",o)}"string"==typeof n&&"function"==typeof o[n]&&(i=o[n].apply(o,r))})),i===e||i instanceof u||i instanceof l)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return i};t.fn.datepicker=p;var f=t.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,beforeShowYear:t.noop,beforeShowDecade:t.noop,beforeShowCentury:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},m=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=u;var g=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},v={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(n,r,o,a){if(!n)return e;if(n instanceof Date)return n;if("string"==typeof r&&(r=v.parseFormat(r)),r.toValue)return r.toValue(n,r,o);var s,l,c,h,d,p={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},f={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(n in f&&(n=f[n]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(n)){for(s=n.match(/([\-+]\d+)([dmwy])/gi),n=new Date,h=0;h<s.length;h++)l=s[h].match(/([\-+]\d+)([dmwy])/i),c=Number(l[1]),d=p[l[2].toLowerCase()],n=u.prototype[d](n,c);return u.prototype._zero_utc_time(n)}s=n&&n.match(this.nonpunctuation)||[];var m,y,_={},b=["yyyy","yy","M","MM","m","mm","d","dd"],w={yyyy:function(t,e){return t.setUTCFullYear(a?(!0===(i=a)&&(i=10),(n=e)<100&&(n+=2e3)>(new Date).getFullYear()+i&&(n-=100),n):e);var n,i},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};w.yy=w.yyyy,w.M=w.MM=w.mm=w.m,w.dd=w.d,n=i();var x=r.parts.slice();function $(){var t=this.slice(0,s[h].length),e=s[h].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(s.length!==x.length&&(x=t(x).filter((function(e,n){return-1!==t.inArray(n,b)})).toArray()),s.length===x.length){var E,k,L;for(h=0,E=x.length;h<E;h++){if(m=parseInt(s[h],10),l=x[h],isNaN(m))switch(l){case"MM":y=t(g[o].months).filter($),m=t.inArray(y[0],g[o].months)+1;break;case"M":y=t(g[o].monthsShort).filter($),m=t.inArray(y[0],g[o].monthsShort)+1}_[l]=m}for(h=0;h<b.length;h++)(L=b[h])in _&&!isNaN(_[L])&&(k=new Date(n),w[L](k,_[L]),isNaN(k)||(n=k))}return n},formatDate:function(e,n,i){if(!e)return"";if("string"==typeof n&&(n=v.parseFormat(n)),n.toDisplay)return n.toDisplay(e,n,i);var r={d:e.getUTCDate(),D:g[i].daysShort[e.getUTCDay()],DD:g[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:g[i].monthsShort[e.getUTCMonth()],MM:g[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,e=[];for(var o=t.extend([],n.separators),a=0,s=n.parts.length;a<=s;a++)o.length&&e.push(o.shift()),e.push(r[n.parts[a]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+f.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+f.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=v,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=d,this},t.fn.datepicker.version="1.9.0",t.fn.datepicker.deprecated=function(t){var e=window.console;e&&e.warn&&e.warn("DEPRECATED: "+t)},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',(function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),p.call(n,"show"))})),t((function(){p.call(t('[data-provide="datepicker-inline"]'))}))})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){(function(i,r){var o,a,s;!function(u,l){"use strict";a=[],void 0===(s="function"==typeof(o=function(){return function(t){var e,o,a,s,u,l,c,h,d,p,f={pfx:"_",psr:"http://www.w3.org/1999/xhtml",xpe:"http://www.w3.org/2000/xmlns/"},m=this,g=function(){for(var t,e,n=!1,i=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","Microsoft.XmlDom"],l=i.length,h=0;h<l;h++)try{var d=new ActiveXObject(i[h]);if(d.async=!1,n=!0,d.loadXML("<x></x>")&&d.selectSingleNode("/"))break}catch(t){}n?h<l?(o=i[h],t=1):t="nox":("undefined"!=typeof window?(e=window,t=2):void 0!==r?(e=r,t=3):e={},e.DOMParser?e.XMLSerializer?e.XPathEvaluator?2===t?(a=new e.DOMParser,s=new e.XPathEvaluator,u=e.XPathResult,n=a.parseFromString("<invalid","text/xml"),f.psr=n.getElementsByTagName("parsererror")[0].namespaceURI):(a=new e.DOMParser({xmlns:f.psr,errorHandler:function(){c=!0}}),s=e.XPathEvaluator,u=e.XPathEvaluator.XPathResult,f.xpe=s.XPath.XMLNS_NAMESPACE_URI):t="nox":t="nos":t="nod");return"string"==typeof t?k(t):t};m.Init=function(t){return"object"!=typeof t&&(t={}),void 0===t.stay?void 0===h&&(h=["all"]):h=t.stay?"object"==typeof t.stay&&t.stay instanceof Array?t.stay:[t.stay]:[],void 0===t.join?void 0===d&&(d=["root"]):d=t.join?[String(t.join)]:[!1],d[1]=!1,void 0!==t.updn?p=t.updn:void 0===p&&(p=!0),m.dom=null,m.nsp={},m.count=0,e&&(m.error={code:"",text:""}),e},m.AddFile=function(t){return e?t&&t.target?t.target.result?m.AddSource(t.target.result):k("emf"):k("nof"):e},m.AddSource=function(t){var n,i;if(e)if("object"==typeof t)(i=!!m.Get(1,t)&&t)&&(e>1&&!DOMParser||1===e&&!i.selectSingleNode("/"))&&(i=null);else try{i=v(t)}catch(t){i=!1}if(e)if(null===i)n=k("nob");else if(!1===i)n=k("inv");else if(!0===i)m.nsp=x(m.dom.documentElement),m.count=1,n=m.dom;else if(_(i)){if(b(i,"/"),!0===d[1]){var r=m.dom.createTextNode("\r\n");m.dom.documentElement.appendChild(r)}m.count++,n=m.dom}else n=!1;else n=e;return n};var v=function(t){var n,i;return e>1?(c=!1,m.dom?(i=a.parseFromString(t,"text/xml"),n=!!y(i)&&i):(m.dom=a.parseFromString(t,"text/xml"),n=!!y(m.dom))):m.dom?((i=new ActiveXObject(o)).async=!1,n=!!i.loadXML(t)&&i):(m.dom=new ActiveXObject(o),m.dom.async=!1,m.dom.setProperty("SelectionLanguage","XPath"),n=!!m.dom.loadXML(t)),n},y=function(t){return!c&&!t.getElementsByTagNameNS(f.psr,"parsererror").length},_=function(t){var n=!0,i=m.dom.characterSet||m.dom.inputEncoding||m.dom.xmlEncoding;if((t.characterSet||t.inputEncoding||t.xmlEncoding)!==i)n=k("enc");else if(t.documentElement.namespaceURI!==m.dom.documentElement.namespaceURI)n=k("nse");else if(t.documentElement.nodeName!==m.dom.documentElement.nodeName)if(d[0]){if(!d[1]){var r=void 0!==i?i:"UTF-8",o='<?xml version="'+(m.dom.xmlVersion?m.dom.xmlVersion:"1.0")+'" encoding="'+r+'"?>\r\n<'+d[0]+">\r\n</"+d[0]+">",a=v(o);if(a){var s=m.dom.documentElement.cloneNode(!0);a.documentElement.appendChild(s),s=a.createTextNode("\r\n"),a.documentElement.appendChild(s),m.dom=a,d[1]=!0}else n=k("jne"),d[1]=null}}else n=k("dif");if(n){var u=x(t.documentElement);for(var c in u)m.nsp[c]||(void 0!==m.dom.documentElement.setAttributeNS?m.dom.documentElement.setAttributeNS(f.xpe,"xmlns:"+c,u[c]):m.dom.documentElement.setAttribute("xmlns:"+c,u[c]),m.nsp[c]=u[c]);p?1===e?$():l=3===e?m:m.lookupNamespaceURI:l=null}return n},b=function(t,e){for(var n=0;n<t.childNodes.length;n++){var i,r=t.childNodes[n],o=w(t.childNodes,r,e,n),a=m.Query(o);if(1===r.nodeType){var s=!0;if(null===a||a.namespaceURI!==r.namespaceURI)i=r.cloneNode(!0),(a=m.Query(e)).appendChild(i);else if(!1!==E(a.getAttribute("stay"),h)&&(s=!1),s)try{for(var u=0;u<r.attributes.length;u++)r.attributes[u].namespaceURI&&void 0!==r.setAttributeNS?a.setAttributeNS(r.attributes[u].namespaceURI,r.attributes[u].nodeName,r.attributes[u].nodeValue):a.setAttribute(r.attributes[u].nodeName,r.attributes[u].nodeValue)}catch(t){}r.hasChildNodes()&&s&&b(r,o)}else 3!==r.nodeType&&8!==r.nodeType||(null===a||a.nodeType!==r.nodeType?(a=m.Query(e),i=3===r.nodeType?m.dom.createTextNode(r.nodeValue):m.dom.createComment(r.nodeValue),a.appendChild(i)):(a.nodeValue=r.nodeValue,a.data=r.data))}},w=function(t,n,i,r){var o,a,s=0;if(1===n.nodeType){for(a=0;a<=r;a++)(p&&t[a].nodeType===n.nodeType&&t[a].nodeName===n.nodeName||!p&&7!==t[a].nodeType)&&s++;if(p){var u=!1,l=x(n);for(var c in l)c!==f.pfx&&(m.nsp[c]=l[c],u=1===e);u&&$(),o=n.prefix?n.prefix+":":m.nsp[f.pfx]?f.pfx+":":"",o+=n.localName?n.localName:n.baseName}else o="node()"}else if(3===n.nodeType||8===n.nodeType){for(a=0;a<=r;a++)t[a].nodeType===n.nodeType&&s++;o=3===n.nodeType?"text()":"comment()"}else o=i;return s&&(o=i+("/"===i.slice(-1)?"":"/")+o+"["+s+"]"),o},x=function(t){for(var e={},n=t.attributes,i=0;i<n.length;++i){var r=n[i].name.split(":");if("xmlns"===r[0])e[r[1]?r[1]:f.pfx]=n[i].value}return e};m.Query=function(t){if(!e)return null;var n;d[1]&&(t="/"+m.dom.documentElement.nodeName+("/"===t?"":t));try{n=e>1?(n=s.evaluate(t,m.dom,l,u.FIRST_ORDERED_NODE_TYPE,null)).singleNodeValue:m.dom.selectSingleNode(t)}catch(t){n=null}return n},m.lookupNamespaceURI=function(t){return m.nsp[t]||null};var $=function(){var t="";for(var e in m.nsp)t+=" xmlns:"+e+"='"+m.nsp[e]+"'";t&&m.dom.setProperty("SelectionNamespaces",t.substr(1))},E=function(t,e){var n=!1;for(var i in e)if(e[i]===t){n=i;break}return n};m.Get=function(t,n){var i;if(t&&!n&&(n=m.dom),e)if(t)if(n)if(n.xml)i=n.xml;else try{i=(new XMLSerializer).serializeToString(n)}catch(e){i=e.message,t=null}else i="";else i=m.dom;else i=m.error.text;if(i&&2===t){if(d[1]){var r=i.indexOf("<"+d[0]);i=i.substr(0,r)+"\r\n"+i.substr(r)}i=(i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ |\t/g,"&nbsp;")).replace(/(\r\n|\n|\r)/g,"<br>")}return i};var k=function(t){var e={nod:"XML DOM is not supported",nos:"Serializer is not supported",nox:"xPath is not supported",nob:"Incompatible source object",nof:"File not found",emf:"File is empty",inv:"Invalid XML source",enc:"Different encoding",dif:"Different root nodes",jne:"Invalid join parameter",nse:"Namespace incompatibility",und:"Undefined error"};return m.error.code=e[t]?t:"und",m.error.text=e[m.error.code],!1};!function(){if(m.error={},void 0!==i&&i.versions&&i.versions.node){var o="object"==typeof t&&"string"==typeof t.path?t.path:"";try{r.XPathEvaluator=n(521)(o+"xpath"),r.DOMParser=n(306)(o+"xmldom").DOMParser,r.XMLSerializer=n(306)(o+"xmldom").XMLSerializer}catch(t){console.log(t.message)}}e=g(),m.Init(t)}()}})?o.apply(e,a):o)||(t.exports=s)}()}).call(this,n(103),n(28))},function(t,e,n){"use strict";var i=n(38),r=n(37),o=r.getFileUrl;r.getFileUrl=function(t){return t&&"string"==typeof t?i.a.attachmentUrl(t):o(t)},e.a=r},function(t,e,n){var i=n(529),r=n(530);n(23).default;function o(t,e){t.data._id;var n=t.data._attachments;function o(e,n){return function(t,e){return Promise.resolve(e.data)}(0,n).then((function(t){return r(t,600)})).then((function(i){t.data._attachments[e]={content_type:n.content_type,data:i}}))}this.process=function(){var r=new i;return e&&r.onProgress(e),Object.keys(n).forEach((function(t){var e,i=t,a=n[t];-1===(e=a).content_type.indexOf("image/")||e.length<3e5||r.add((function(){return o(i,a)}))})),r.isEmpty()?Promise.resolve(t):r.run().then((function(){return t}))}}t.exports=function(t,e){return new o(t,e).process()}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){(function(t){var e;e=t("body"),t.fn.overlay=t.fn.overlay=function(n){switch(n){case"show":i=this,t(window).scrollTop(0),setTimeout((function(){e.addClass("noScroll"),i.show()}));break;case"hide":!function(t){e.removeClass("noScroll"),t.hide()}(this);break;default:throw new Exception("Unknown action. Either use show or hide.")}var i;return this}}).call(this,n(0))},function(t,e,n){"use strict";(function(t){var e=n(63),i=n.n(e),r=(n(517),n(3)),o=n(65),a=n(70);!function(){if(t("#jump-to-block").hide(),"off"!==r.a.get("jumpto")){var e=i.a.module("jumpTo",["vAccordion"]),s=n(161);e.controller("jumpCtrl",["$scope",function(e){var n=[];e.pages={},e.search={label:""},a.on("EnketoForm.initialized",(function(){return e.$apply((function(){t('[role="page"]').each((function(){var e=t(this);t(".question-label.active",e).each((function(){var i=t(this).text();if(!(i.length<2||"."!=i[1])){var r=i.indexOf(" "),o=i.substr(0,r).split(".").filter((function(t){return""!=t}));n.push({el:e.children().first(),notations:o,label:i})}}))})),n.forEach((function(t){if(s.set(e.pages,t.notations.join(".items."),t),t.notations.length>1){t.notations.pop();var n=t.notations.join(".items.");null==s.get(e.pages,n+".label",null)&&(s.set(e.pages,n+".label",t.label),s.set(e.pages,n+".el",t.el))}}))}))})),e.jump=function(n){e.accordion.collapseAll(),o.a.form.pages.flipToPageContaining(n.el),setTimeout((function(){t("#jump-to-block").overlay("hide")}))},t("#jump-to-close").click((function(){e.accordion.collapseAll(),t("#jump-to-block").overlay("hide")}))}]),t("#jump-to").click((function(){t("#jump-to-block").overlay("show")})),i.a.bootstrap(document.getElementById("jump-to-block"),["jumpTo"])}else t("#jump-to").remove()}()}).call(this,n(0))},function(t,e,n){n(518),t.exports="vAccordion"},function(t,e){!function(t){"use strict";function e(e){return{restrict:"E",transclude:!0,controller:n,scope:{control:"=?",expandCb:"&?onexpand",collapseCb:"&?oncollapse",id:"@?"},link:{pre:function(e,n,i){e.allowMultiple=t.isDefined(i.multiple)&&(""===i.multiple||"true"===i.multiple)},post:function(n,i,r,o,a){if(a(n.$parent.$new(),(function(t,e){e.$accordion=n.internalControl,n.id&&(e.$accordion.id=n.id),i.append(t)})),r.$set("role","tablist"),n.allowMultiple&&r.$set("aria-multiselectable","true"),t.isDefined(n.control)){t.forEach(["toggle","expand","collapse","expandAll","collapseAll","hasExpandedPane"],(function(t){if(n.control[t])throw new Error("The `"+t+"` method can not be overwritten")}));var s=t.extend({},n.internalControl,n.control);n.control=n.internalControl=s}else n.control=n.internalControl;e((function(){var e=t.isDefined(o.getAccordionId())?o.getAccordionId()+":onReady":"vAccordion:onReady";n.$emit(e)}),0)}}}}function n(e){var n=this,i=!1;e.panes=[],e.expandCb=t.isFunction(e.expandCb)?e.expandCb:t.noop,e.collapseCb=t.isFunction(e.collapseCb)?e.collapseCb:t.noop,n.hasExpandedPane=function(){for(var t=!1,n=0,i=e.panes.length;n<i;n++){if(e.panes[n].isExpanded){t=!0;break}}return t},n.getPaneByIndex=function(n){var i;return t.forEach(e.panes,(function(e){e.$parent&&t.isDefined(e.$parent.$index)&&e.$parent.$index===n&&(i=e)})),i||e.panes[n]},n.getPaneIndex=function(n){var i;return t.forEach(e.panes,(function(e){e.$parent&&t.isDefined(e.$parent.$index)&&e===n&&(i=e.$parent.$index)})),t.isDefined(i)?i:e.panes.indexOf(n)},n.getPaneById=function(n){var i;return t.forEach(e.panes,(function(t){t.id&&t.id===n&&(i=t)})),i},n.getPaneId=function(t){return t.id},n.getAccordionId=function(){return e.id},n.disable=function(){i=!0},n.enable=function(){i=!1},n.addPane=function(t){if(!e.allowMultiple&&n.hasExpandedPane()&&t.isExpanded)throw new Error("The `multiple` attribute can't be found");e.panes.push(t),t.isExpanded&&e.expandCb({index:n.getPaneIndex(t),id:t.id,pane:t})},n.focusNext=function(){for(var t=e.panes.length,n=0;n<t;n++){if(e.panes[n].isFocused){var i=n+1;i>e.panes.length-1&&(i=0),e.panes[i].paneElement.find("v-pane-header")[0].focus();break}}},n.focusPrevious=function(){for(var t=e.panes.length,n=0;n<t;n++){if(e.panes[n].isFocused){var i=n-1;i<0&&(i=e.panes.length-1),e.panes[i].paneElement.find("v-pane-header")[0].focus();break}}},n.toggle=function(t){!i&&t&&(e.allowMultiple||n.collapseAll(t),t.isExpanded=!t.isExpanded,t.isExpanded?e.expandCb({index:n.getPaneIndex(t),id:t.id,pane:t}):e.collapseCb({index:n.getPaneIndex(t),id:t.id,pane:t}))},n.expand=function(t){!i&&t&&(e.allowMultiple||n.collapseAll(t),t.isExpanded||(t.isExpanded=!0,e.expandCb({index:n.getPaneIndex(t),id:t.id,pane:t})))},n.collapse=function(t){!i&&t&&t.isExpanded&&(t.isExpanded=!1,e.collapseCb({index:n.getPaneIndex(t),id:t.id,pane:t}))},n.expandAll=function(){if(!i){if(!e.allowMultiple)throw new Error("The `multiple` attribute can't be found");t.forEach(e.panes,(function(t){n.expand(t)}))}},n.collapseAll=function(r){i||t.forEach(e.panes,(function(t){t!==r&&n.collapse(t)}))},e.internalControl={toggle:function(e){t.isString(e)?n.toggle(n.getPaneById(e)):n.toggle(n.getPaneByIndex(e))},expand:function(e){t.isString(e)?n.expand(n.getPaneById(e)):n.expand(n.getPaneByIndex(e))},collapse:function(e){t.isString(e)?n.collapse(n.getPaneById(e)):n.collapse(n.getPaneByIndex(e))},expandAll:n.expandAll,collapseAll:n.collapseAll,hasExpandedPane:n.hasExpandedPane}}function i(e,n,i){return{restrict:"E",require:"^vAccordion",transclude:!0,controller:r,scope:{isExpanded:"=?expanded",isDisabled:"=?ngDisabled",id:"@?"},link:function(e,r,o,a,s){s(e.$parent.$new(),(function(t,n){n.$pane=e.internalControl,e.id&&(n.$pane.id=e.id),r.append(t)})),t.isDefined(e.isExpanded)||(e.isExpanded=t.isDefined(o.expanded)&&""===o.expanded),t.isDefined(o.disabled)&&(e.isDisabled=!0);var u=i.states,l=r.find("v-pane-header"),c=r.find("v-pane-content"),h=c.find("div"),d=a.getAccordionId();if(!l[0])throw new Error("The `v-pane-header` directive can't be found");if(!c[0])throw new Error("The `v-pane-content` directive can't be found");function p(n){n=t.isDefined(d)?d+":"+n:"vAccordion:"+n,e.$emit(n)}e.paneElement=r,e.paneContentElement=c,e.paneInnerElement=h,e.accordionCtrl=a,a.addPane(e),e.$evalAsync((function(){e.isExpanded?(r.addClass(u.expanded),c.css("max-height","none").attr("aria-hidden","false"),l.attr({"aria-selected":"true","aria-expanded":"true"})):(c.css("max-height","0px").attr("aria-hidden","true"),l.attr({"aria-selected":"false","aria-expanded":"false"}))})),e.$watch("isExpanded",(function(t,e){if(t===e)return!0;t?(a.disable(),c.attr("aria-hidden","false"),l.attr({"aria-selected":"true","aria-expanded":"true"}),p("onExpand"),n.addClass(r,u.expanded).then((function(){a.enable(),p("onExpandAnimationEnd")}))):(a.disable(),c.attr("aria-hidden","true"),l.attr({"aria-selected":"false","aria-expanded":"false"}),p("onCollapse"),n.removeClass(r,u.expanded).then((function(){a.enable(),p("onCollapseAnimationEnd")})))}))}}}function r(t){this.isExpanded=function(){return t.isExpanded},this.toggle=function(){t.isAnimating||t.isDisabled||t.accordionCtrl.toggle(t)},this.expand=function(){t.isAnimating||t.isDisabled||t.accordionCtrl.expand(t)},this.collapse=function(){t.isAnimating||t.isDisabled||t.accordionCtrl.collapse(t)},this.focusPane=function(){t.isFocused=!0},this.blurPane=function(){t.isFocused=!1},t.internalControl={toggle:this.toggle,expand:this.expand,collapse:this.collapse,isExpanded:this.isExpanded}}t.module("vAccordion.config",[]).constant("accordionConfig",{states:{expanded:"is-expanded"},expandAnimationDuration:.5}).animation(".is-expanded",["$animateCss","accordionConfig",function(e,n){return{addClass:function(i,r,o){var a=t.element(i[0].querySelector("v-pane-content")),s=t.element(a[0].querySelector("div"))[0].offsetHeight;return e(a,{easing:"ease",from:{maxHeight:"0px"},to:{maxHeight:s+"px"},duration:n.expandAnimationDuration}).start().done((function(){a.css("max-height","none"),o()})),function(t){t&&a.css("max-height","none")}},removeClass:function(i,r,o){var a=t.element(i[0].querySelector("v-pane-content")),s=t.element(a[0].querySelector("div"))[0].offsetHeight;return e(a,{easing:"ease",from:{maxHeight:s+"px"},to:{maxHeight:"0px"},duration:n.expandAnimationDuration}).start().done(o),function(t){t&&a.css("max-height","0px")}}}}]),t.module("vAccordion.directives",[]),t.module("vAccordion",["vAccordion.config","vAccordion.directives"]),t.module("vAccordion.directives").directive("vAccordion",e),e.$inject=["$timeout"],n.$inject=["$scope"],t.module("vAccordion.directives").directive("vPane",i),i.$inject=["$timeout","$animate","accordionConfig"],r.$inject=["$scope"],t.module("vAccordion.directives").directive("vPaneContent",(function(){return{restrict:"E",require:"^vPane",transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(t,e,n){n.$set("role","tabpanel"),n.$set("aria-hidden","true")}}})),t.module("vAccordion.directives").directive("vPaneHeader",(function(){return{restrict:"E",require:["^vPane","^vAccordion"],transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(e,n,i,r){i.$set("role","tab"),i.$set("tabindex","0");var o=r[0],a=r[1],s=t.isDefined(i.inactive);function u(){if(s)return!1;e.$apply((function(){o.toggle()}))}function l(t){32===t.keyCode||13===t.keyCode?(e.$apply((function(){o.toggle()})),t.preventDefault()):39===t.keyCode||40===t.keyCode?(e.$apply((function(){a.focusNext()})),t.preventDefault()):37!==t.keyCode&&38!==t.keyCode||(e.$apply((function(){a.focusPrevious()})),t.preventDefault())}n[0].onfocus=function(){o.focusPane()},n[0].onblur=function(){o.blurPane()},n.bind("click",u),n.bind("keydown",l),e.$on("$destroy",(function(){n.unbind("click",u),n.unbind("keydown",l),n[0].onfocus=null,n[0].onblur=null}))}}}))}(angular)},function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function r(){i.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,a=i.length;o<a;o++)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}},t.exports=n,t.exports.TinyEmitter=n},function(t,e,n){"use strict";var i=n(162);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=new DOMParser;i.b.prototype.createSession=function(t,e){var n,i,a=this.xml.querySelector("model");a&&(e="object"===r(e)?e:{},(n=a.querySelector('instance[id="'+t+'"]'))||(n=o.parseFromString('<instance id="'+t+'"/>',"text/xml").documentElement,this.xml.adoptNode(n),a.appendChild(n)),Object.keys(e).forEach((function(t){e[t]=e[t]||utils.readCookie("__enketo_meta_"+t)||t+" not found"})),i=o.parseFromString("<session><context>"+Object.keys(e).map((function(t){return"<"+t+">"+e[t]+"</"+t+">"})).join("")+"</context></session>","text/xml").documentElement,this.xml.adoptNode(i),n.appendChild(i))}},function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=521},function(t,e){t.exports=function(){"use strict";function t(e,n,i,r){this.message=e,this.expected=n,this.found=i,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(t,Error),{SyntaxError:t,parse:function(e){var n,i=arguments.length>1?arguments[1]:{},r={},o={XPath:kn},a=kn,s=function(t){return{tree:t,nsPrefixes:gi}},u="/",l={type:"literal",value:"/",description:'"/"'},c=function(t){return{type:"/",args:[null,t?t[1]:null]}},h="//",d={type:"literal",value:"//",description:'"//"'},p=function(t,e){var n;for(n=0;n<e.length;n++)t=_i(e[n][1],t,e[n][3]);return t},f=function(t,e,n){return mi({type:"step",args:[t,e]},t,n,1)},m="::",g={type:"literal",value:"::",description:'"::"'},v=function(t){return t},y=function(t){return t.length?t:"child"},_="ancestor-or-self",b={type:"literal",value:"ancestor-or-self",description:'"ancestor-or-self"'},w="ancestor",x={type:"literal",value:"ancestor",description:'"ancestor"'},$="attribute",E={type:"literal",value:"attribute",description:'"attribute"'},k="child",L={type:"literal",value:"child",description:'"child"'},C="descendant-or-self",T={type:"literal",value:"descendant-or-self",description:'"descendant-or-self"'},S="descendant",D={type:"literal",value:"descendant",description:'"descendant"'},M="following-sibling",A={type:"literal",value:"following-sibling",description:'"following-sibling"'},P="following",O={type:"literal",value:"following",description:'"following"'},I="namespace",N={type:"literal",value:"namespace",description:'"namespace"'},R="parent",j={type:"literal",value:"parent",description:'"parent"'},q="preceding-sibling",F={type:"literal",value:"preceding-sibling",description:'"preceding-sibling"'},U="preceding",B={type:"literal",value:"preceding",description:'"preceding"'},z="self",V={type:"literal",value:"self",description:'"self"'},H="(",W={type:"literal",value:"(",description:'"("'},Z=")",G={type:"literal",value:")",description:'")"'},Y=function(t){return{type:"nodeType",args:[t,[]]}},X="processing-instruction",K={type:"literal",value:"processing-instruction",description:'"processing-instruction"'},J=function(t,e){return{type:"nodeType",args:[t,[e]]}},Q=function(t){return t},tt="[",et={type:"literal",value:"[",description:'"["'},nt="]",it={type:"literal",value:"]",description:'"]"'},rt=function(t){return t},ot=function(t){return _i("//",null,t)},at="..",st={type:"literal",value:"..",description:'".."'},ut=".",lt={type:"literal",value:".",description:'"."'},ct=function(t){var e={type:"step",args:["self",{type:"nodeType",args:["node",[]]}]};return".."==t&&(e.args[0]="parent"),e},ht="@",dt={type:"literal",value:"@",description:'"@"'},pt=function(t){return t?"attribute":""},ft=function(t){return t},mt=function(t){return t},gt=function(t){return t},vt=",",yt={type:"literal",value:",",description:'","'},_t=function(t,e){var n,i=[];if(e)for(i.push(e[1]),n=0;n<e[2].length;n++)i.push(e[2][n][3]);return{type:"function",args:[t,i]}},bt="|",wt={type:"literal",value:"|",description:'"|"'},xt=function(t,e){return fi(t,e,1,3)},$t=function(t,e){return e?_i(e[1],t,e[3]):t},Et=function(t){return t},kt=function(t,e){return mi(t,"child",e,1)},Lt="or",Ct={type:"literal",value:"or",description:'"or"'},Tt="and",St={type:"literal",value:"and",description:'"and"'},Dt="=",Mt={type:"literal",value:"=",description:'"="'},At="!=",Pt={type:"literal",value:"!=",description:'"!="'},Ot="<=",It={type:"literal",value:"<=",description:'"<="'},Nt="<",Rt={type:"literal",value:"<",description:'"<"'},jt=">=",qt={type:"literal",value:">=",description:'">="'},Ft=">",Ut={type:"literal",value:">",description:'">"'},Bt="+",zt={type:"literal",value:"+",description:'"+"'},Vt="-",Ht={type:"literal",value:"-",description:'"-"'},Wt="div",Zt={type:"literal",value:"div",description:'"div"'},Gt="mod",Yt={type:"literal",value:"mod",description:'"mod"'},Xt=function(t){return{type:"*",args:[{type:"number",args:[-1]},t]}},Kt='"',Jt={type:"literal",value:'"',description:'"\\""'},Qt=/^[^"]/,te={type:"class",value:'[^"]',description:'[^"]'},ee=function(t){return{type:"string",args:[t.join("")]}},ne="'",ie={type:"literal",value:"'",description:'"\'"'},re=/^[^']/,oe={type:"class",value:"[^']",description:"[^']"},ae=function(t,e){return{type:"number",args:[e?parseFloat(t+"."+e[1]):parseInt(t)]}},se=function(t){return{type:"number",args:[parseFloat("."+t)]}},ue=/^[0-9]/,le={type:"class",value:"[0-9]",description:"[0-9]"},ce=function(t){return t.join("")},he="*",de={type:"literal",value:"*",description:'"*"'},pe=function(t){var e;if(null===pi.args[0])for(e=0;e<yi.length;e++)if(pi.args[1]==yi[e])return!1;return!0},fe=function(t){return""===t.args[0]?t={type:t.type,args:[null,t.args[1]]}:vi(t.args[0]),t},me="$",ge={type:"literal",value:"$",description:'"$"'},ve=function(t){return vi(t.args[0]),{type:"$",args:[t]}},ye=function(){return{type:"name",args:[null,null]}},_e=":",be={type:"literal",value:":",description:'":"'},we=function(t){return vi(t),{type:"name",args:[t,null]}},xe=function(t){return vi(t.args[0]),t},$e="comment",Ee={type:"literal",value:"comment",description:'"comment"'},ke="text",Le={type:"literal",value:"text",description:'"text"'},Ce="node",Te={type:"literal",value:"node",description:'"node"'},Se=/^[ \t\r\n]/,De={type:"class",value:"[\\u0020\\u0009\\u000D\\u000A]",description:"[\\u0020\\u0009\\u000D\\u000A]"},Me=function(t){return pi=t,t},Ae=function(t,e){return{type:"name",args:[t,e]}},Pe=function(t){return{type:"name",args:[null,t]}},Oe=/^[A-Z]/,Ie={type:"class",value:"[A-Z]",description:"[A-Z]"},Ne="_",Re={type:"literal",value:"_",description:'"_"'},je=/^[a-z]/,qe={type:"class",value:"[a-z]",description:"[a-z]"},Fe=/^[\xC0-\xD6]/,Ue={type:"class",value:"[\\u00C0-\\u00D6]",description:"[\\u00C0-\\u00D6]"},Be=/^[\xD8-\xF6]/,ze={type:"class",value:"[\\u00D8-\\u00F6]",description:"[\\u00D8-\\u00F6]"},Ve=/^[\xF8-\u02FF]/,He={type:"class",value:"[\\u00F8-\\u02FF]",description:"[\\u00F8-\\u02FF]"},We=/^[\u0370-\u037D]/,Ze={type:"class",value:"[\\u0370-\\u037D]",description:"[\\u0370-\\u037D]"},Ge=/^[\u037F-\u1FFF]/,Ye={type:"class",value:"[\\u037F-\\u1FFF]",description:"[\\u037F-\\u1FFF]"},Xe=/^[\u200C-\u200D]/,Ke={type:"class",value:"[\\u200C-\\u200D]",description:"[\\u200C-\\u200D]"},Je=/^[\u2070-\u218F]/,Qe={type:"class",value:"[\\u2070-\\u218F]",description:"[\\u2070-\\u218F]"},tn=/^[\u2C00-\u2FEF]/,en={type:"class",value:"[\\u2C00-\\u2FEF]",description:"[\\u2C00-\\u2FEF]"},nn=/^[\u3001-\uD7FF]/,rn={type:"class",value:"[\\u3001-\\uD7FF]",description:"[\\u3001-\\uD7FF]"},on=/^[\uF900-\uFDCF]/,an={type:"class",value:"[\\uF900-\\uFDCF]",description:"[\\uF900-\\uFDCF]"},sn=/^[\uFDF0-\uFFFD]/,un={type:"class",value:"[\\uFDF0-\\uFFFD]",description:"[\\uFDF0-\\uFFFD]"},ln=/^[\xB7]/,cn={type:"class",value:"[\\u00B7]",description:"[\\u00B7]"},hn=/^[\u0300-\u036F]/,dn={type:"class",value:"[\\u0300-\\u036F]",description:"[\\u0300-\\u036F]"},pn=/^[\u203F-\u2040]/,fn={type:"class",value:"[\\u203F-\\u2040]",description:"[\\u203F-\\u2040]"},mn=function(t,e){return t+e.join("")},gn=0,vn=[{line:1,column:1,seenCR:!1}],yn=0,_n=[],bn=0;if("startRule"in i){if(!(i.startRule in o))throw new Error("Can't start parsing from rule \""+i.startRule+'".');a=o[i.startRule]}function wn(t){var n,i,r=vn[t];if(r)return r;for(n=t-1;!vn[n];)n--;for(r={line:(r=vn[n]).line,column:r.column,seenCR:r.seenCR};n<t;)"\n"===(i=e.charAt(n))?(r.seenCR||r.line++,r.column=1,r.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(r.line++,r.column=1,r.seenCR=!0):(r.column++,r.seenCR=!1),n++;return vn[t]=r,r}function xn(t,e){var n=wn(t),i=wn(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:i.line,column:i.column}}}function $n(t){gn<yn||(gn>yn&&(yn=gn,_n=[]),_n.push(t))}function En(e,n,i,r){return null!==n&&function(t){var e=1;for(t.sort((function(t,e){return t.description<e.description?-1:t.description>e.description?1:0}));e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(n),new t(null!==e?e:function(t,e){var n,i=new Array(t.length);for(n=0;n<t.length;n++)i[n]=t[n].description;return"Expected "+(t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(t){return"\\x0"+e(t)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(t){return"\\x"+e(t)})).replace(/[\u0100-\u0FFF]/g,(function(t){return"\\u0"+e(t)})).replace(/[\u1000-\uFFFF]/g,(function(t){return"\\u"+e(t)}))}(e)+'"':"end of input")+" found."}(n,i),n,i,r)}function kn(){var t,e;return t=gn,oi()!==r&&(e=Rn())!==r&&oi()!==r?(t,t=s(e)):(gn=t,t=r),t}function Ln(){var t;return(t=Tn())===r&&(t=Cn()),t}function Cn(){var t,n,i,o,a;return(t=On())===r&&(t=gn,47===e.charCodeAt(gn)?(n=u,gn++):(n=r,0===bn&&$n(l)),n!==r?(i=gn,(o=oi())!==r&&(a=Tn())!==r?i=o=[o,a]:(gn=i,i=r),i===r&&(i=null),i!==r?(t,t=n=c(i)):(gn=t,t=r)):(gn=t,t=r)),t}function Tn(){var t,n,i,o,a,s,c,f;if(t=gn,(n=Sn())!==r){for(i=[],o=gn,(a=oi())!==r?(e.substr(gn,2)===h?(s=h,gn+=2):(s=r,0===bn&&$n(d)),s===r&&(47===e.charCodeAt(gn)?(s=u,gn++):(s=r,0===bn&&$n(l))),s!==r&&(c=oi())!==r&&(f=Sn())!==r?o=a=[a,s,c,f]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(a=oi())!==r?(e.substr(gn,2)===h?(s=h,gn+=2):(s=r,0===bn&&$n(d)),s===r&&(47===e.charCodeAt(gn)?(s=u,gn++):(s=r,0===bn&&$n(l))),s!==r&&(c=oi())!==r&&(f=Sn())!==r?o=a=[a,s,c,f]:(gn=o,o=r)):(gn=o,o=r);i!==r?(t,t=n=p(n,i)):(gn=t,t=r)}else gn=t,t=r;return t}function Sn(){var t,e,n,i,o,a,s;if(t=gn,(e=Dn())!==r)if(oi()!==r)if((n=An())!==r){for(i=[],o=gn,(a=oi())!==r&&(s=Pn())!==r?o=a=[a,s]:(gn=o,o=r);o!==r;)i.push(o),o=gn,(a=oi())!==r&&(s=Pn())!==r?o=a=[a,s]:(gn=o,o=r);i!==r?(t,t=e=f(e,n,i)):(gn=t,t=r)}else gn=t,t=r;else gn=t,t=r;else gn=t,t=r;return t===r&&(t=In()),t}function Dn(){var t,n,i;return t=gn,(n=Mn())!==r&&oi()!==r?(e.substr(gn,2)===m?(i=m,gn+=2):(i=r,0===bn&&$n(g)),i!==r?(t,t=n=v(n)):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,(n=Nn())!==r&&(t,n=y(n)),t=n),t}function Mn(){var t;return e.substr(gn,16)===_?(t=_,gn+=16):(t=r,0===bn&&$n(b)),t===r&&(e.substr(gn,8)===w?(t=w,gn+=8):(t=r,0===bn&&$n(x)),t===r&&(e.substr(gn,9)===$?(t=$,gn+=9):(t=r,0===bn&&$n(E)),t===r&&(e.substr(gn,5)===k?(t=k,gn+=5):(t=r,0===bn&&$n(L)),t===r&&(e.substr(gn,18)===C?(t=C,gn+=18):(t=r,0===bn&&$n(T)),t===r&&(e.substr(gn,10)===S?(t=S,gn+=10):(t=r,0===bn&&$n(D)),t===r&&(e.substr(gn,17)===M?(t=M,gn+=17):(t=r,0===bn&&$n(A)),t===r&&(e.substr(gn,9)===P?(t=P,gn+=9):(t=r,0===bn&&$n(O)),t===r&&(e.substr(gn,9)===I?(t=I,gn+=9):(t=r,0===bn&&$n(N)),t===r&&(e.substr(gn,6)===R?(t=R,gn+=6):(t=r,0===bn&&$n(j)),t===r&&(e.substr(gn,17)===q?(t=q,gn+=17):(t=r,0===bn&&$n(F)),t===r&&(e.substr(gn,9)===U?(t=U,gn+=9):(t=r,0===bn&&$n(B)),t===r&&(e.substr(gn,4)===z?(t=z,gn+=4):(t=r,0===bn&&$n(V)))))))))))))),t}function An(){var t,n,i,o,a;return t=gn,(n=ii())!==r&&oi()!==r?(40===e.charCodeAt(gn)?(i=H,gn++):(i=r,0===bn&&$n(W)),i!==r&&oi()!==r?(41===e.charCodeAt(gn)?(o=Z,gn++):(o=r,0===bn&&$n(G)),o!==r?(t,t=n=Y(n)):(gn=t,t=r)):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,e.substr(gn,22)===X?(n=X,gn+=22):(n=r,0===bn&&$n(K)),n!==r&&oi()!==r?(40===e.charCodeAt(gn)?(i=H,gn++):(i=r,0===bn&&$n(W)),i!==r&&oi()!==r&&(o=Xn())!==r&&oi()!==r?(41===e.charCodeAt(gn)?(a=Z,gn++):(a=r,0===bn&&$n(G)),a!==r?(t,t=n=J(n,o)):(gn=t,t=r)):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,(n=ni())!==r&&(t,n=Q(n)),t=n)),t}function Pn(){var t,n,i,o;return t=gn,91===e.charCodeAt(gn)?(n=tt,gn++):(n=r,0===bn&&$n(et)),n!==r&&oi()!==r&&(i=Rn())!==r&&oi()!==r?(93===e.charCodeAt(gn)?(o=nt,gn++):(o=r,0===bn&&$n(it)),o!==r?(t,t=n=rt(i)):(gn=t,t=r)):(gn=t,t=r),t}function On(){var t,n,i;return t=gn,e.substr(gn,2)===h?(n=h,gn+=2):(n=r,0===bn&&$n(d)),n!==r&&oi()!==r&&(i=Tn())!==r?(t,t=n=ot(i)):(gn=t,t=r),t}function In(){var t,n;return t=gn,e.substr(gn,2)===at?(n=at,gn+=2):(n=r,0===bn&&$n(st)),n===r&&(46===e.charCodeAt(gn)?(n=ut,gn++):(n=r,0===bn&&$n(lt))),n!==r&&(t,n=ct(n)),t=n}function Nn(){var t,n;return t=gn,64===e.charCodeAt(gn)?(n=ht,gn++):(n=r,0===bn&&$n(dt)),n===r&&(n=null),n!==r&&(t,n=pt(n)),t=n}function Rn(){var t,e;return t=gn,(e=zn())!==r&&(t,e=rt(e)),t=e}function jn(){var t,n,i,o;return t=gn,(n=ei())!==r&&(t,n=ft(n)),(t=n)===r&&(t=gn,40===e.charCodeAt(gn)?(n=H,gn++):(n=r,0===bn&&$n(W)),n!==r&&oi()!==r&&(i=Rn())!==r&&oi()!==r?(41===e.charCodeAt(gn)?(o=Z,gn++):(o=r,0===bn&&$n(G)),o!==r?(t,t=n=rt(i)):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,(n=Xn())!==r&&(t,n=mt(n)),(t=n)===r&&(t=gn,(n=Kn())!==r&&(t,n=gt(n)),(t=n)===r&&(t=qn())))),t}function qn(){var t,n,i,o,a,s,u,l,c,h,d,p;if(t=gn,(n=ti())!==r)if(oi()!==r)if(40===e.charCodeAt(gn)?(i=H,gn++):(i=r,0===bn&&$n(W)),i!==r){if(o=gn,(a=oi())!==r)if((s=Rn())!==r){for(u=[],l=gn,(c=oi())!==r?(44===e.charCodeAt(gn)?(h=vt,gn++):(h=r,0===bn&&$n(yt)),h!==r&&(d=oi())!==r&&(p=Rn())!==r?l=c=[c,h,d,p]:(gn=l,l=r)):(gn=l,l=r);l!==r;)u.push(l),l=gn,(c=oi())!==r?(44===e.charCodeAt(gn)?(h=vt,gn++):(h=r,0===bn&&$n(yt)),h!==r&&(d=oi())!==r&&(p=Rn())!==r?l=c=[c,h,d,p]:(gn=l,l=r)):(gn=l,l=r);u!==r?o=a=[a,s,u]:(gn=o,o=r)}else gn=o,o=r;else gn=o,o=r;o===r&&(o=null),o!==r&&(a=oi())!==r?(41===e.charCodeAt(gn)?(s=Z,gn++):(s=r,0===bn&&$n(G)),s!==r?(t,t=n=_t(n,o)):(gn=t,t=r)):(gn=t,t=r)}else gn=t,t=r;else gn=t,t=r;else gn=t,t=r;return t}function Fn(){var t,n,i,o,a,s,u,l;if(t=gn,(n=Un())!==r){for(i=[],o=gn,(a=oi())!==r?(124===e.charCodeAt(gn)?(s=bt,gn++):(s=r,0===bn&&$n(wt)),s!==r&&(u=oi())!==r&&(l=Un())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(a=oi())!==r?(124===e.charCodeAt(gn)?(s=bt,gn++):(s=r,0===bn&&$n(wt)),s!==r&&(u=oi())!==r&&(l=Un())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?(t,t=n=xt(n,i)):(gn=t,t=r)}else gn=t,t=r;return t}function Un(){var t,n,i,o,a,s,c;return t=gn,(n=Bn())!==r?(i=gn,(o=oi())!==r?(e.substr(gn,2)===h?(a=h,gn+=2):(a=r,0===bn&&$n(d)),a===r&&(47===e.charCodeAt(gn)?(a=u,gn++):(a=r,0===bn&&$n(l))),a!==r&&(s=oi())!==r&&(c=Tn())!==r?i=o=[o,a,s,c]:(gn=i,i=r)):(gn=i,i=r),i===r&&(i=null),i!==r?(t,t=n=$t(n,i)):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,(n=Ln())!==r&&(t,n=Et(n)),t=n),t}function Bn(){var t,e,n,i,o,a;if(t=gn,(e=jn())!==r){for(n=[],i=gn,(o=oi())!==r&&(a=Pn())!==r?i=o=[o,a]:(gn=i,i=r);i!==r;)n.push(i),i=gn,(o=oi())!==r&&(a=Pn())!==r?i=o=[o,a]:(gn=i,i=r);n!==r?(t,t=e=kt(e,n)):(gn=t,t=r)}else gn=t,t=r;return t}function zn(){var t,n,i,o,a,s,u,l;if(t=gn,(n=Vn())!==r){for(i=[],o=gn,(a=oi())!==r?(e.substr(gn,2)===Lt?(s=Lt,gn+=2):(s=r,0===bn&&$n(Ct)),s!==r&&(u=oi())!==r&&(l=Vn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(a=oi())!==r?(e.substr(gn,2)===Lt?(s=Lt,gn+=2):(s=r,0===bn&&$n(Ct)),s!==r&&(u=oi())!==r&&(l=Vn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?(t,t=n=xt(n,i)):(gn=t,t=r)}else gn=t,t=r;return t}function Vn(){var t,n,i,o,a,s,u,l;if(t=gn,(n=Hn())!==r){for(i=[],o=gn,(a=oi())!==r?(e.substr(gn,3)===Tt?(s=Tt,gn+=3):(s=r,0===bn&&$n(St)),s!==r&&(u=oi())!==r&&(l=Hn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(a=oi())!==r?(e.substr(gn,3)===Tt?(s=Tt,gn+=3):(s=r,0===bn&&$n(St)),s!==r&&(u=oi())!==r&&(l=Hn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?(t,t=n=xt(n,i)):(gn=t,t=r)}else gn=t,t=r;return t}function Hn(){var t,n,i,o,a,s,u,l;if(t=gn,(n=Wn())!==r){for(i=[],o=gn,(a=oi())!==r?(61===e.charCodeAt(gn)?(s=Dt,gn++):(s=r,0===bn&&$n(Mt)),s===r&&(e.substr(gn,2)===At?(s=At,gn+=2):(s=r,0===bn&&$n(Pt))),s!==r&&(u=oi())!==r&&(l=Wn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(a=oi())!==r?(61===e.charCodeAt(gn)?(s=Dt,gn++):(s=r,0===bn&&$n(Mt)),s===r&&(e.substr(gn,2)===At?(s=At,gn+=2):(s=r,0===bn&&$n(Pt))),s!==r&&(u=oi())!==r&&(l=Wn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?(t,t=n=xt(n,i)):(gn=t,t=r)}else gn=t,t=r;return t}function Wn(){var t,n,i,o,a,s,u,l;if(t=gn,(n=Zn())!==r){for(i=[],o=gn,(a=oi())!==r?(e.substr(gn,2)===Ot?(s=Ot,gn+=2):(s=r,0===bn&&$n(It)),s===r&&(60===e.charCodeAt(gn)?(s=Nt,gn++):(s=r,0===bn&&$n(Rt)),s===r&&(e.substr(gn,2)===jt?(s=jt,gn+=2):(s=r,0===bn&&$n(qt)),s===r&&(62===e.charCodeAt(gn)?(s=Ft,gn++):(s=r,0===bn&&$n(Ut))))),s!==r&&(u=oi())!==r&&(l=Zn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(a=oi())!==r?(e.substr(gn,2)===Ot?(s=Ot,gn+=2):(s=r,0===bn&&$n(It)),s===r&&(60===e.charCodeAt(gn)?(s=Nt,gn++):(s=r,0===bn&&$n(Rt)),s===r&&(e.substr(gn,2)===jt?(s=jt,gn+=2):(s=r,0===bn&&$n(qt)),s===r&&(62===e.charCodeAt(gn)?(s=Ft,gn++):(s=r,0===bn&&$n(Ut))))),s!==r&&(u=oi())!==r&&(l=Zn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?(t,t=n=xt(n,i)):(gn=t,t=r)}else gn=t,t=r;return t}function Zn(){var t,n,i,o,a,s,u,l;if(t=gn,(n=Gn())!==r){for(i=[],o=gn,(a=oi())!==r?(43===e.charCodeAt(gn)?(s=Bt,gn++):(s=r,0===bn&&$n(zt)),s===r&&(45===e.charCodeAt(gn)?(s=Vt,gn++):(s=r,0===bn&&$n(Ht))),s!==r&&(u=oi())!==r&&(l=Gn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(a=oi())!==r?(43===e.charCodeAt(gn)?(s=Bt,gn++):(s=r,0===bn&&$n(zt)),s===r&&(45===e.charCodeAt(gn)?(s=Vt,gn++):(s=r,0===bn&&$n(Ht))),s!==r&&(u=oi())!==r&&(l=Gn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?(t,t=n=xt(n,i)):(gn=t,t=r)}else gn=t,t=r;return t}function Gn(){var t,n,i,o,a,s,u,l;if(t=gn,(n=Yn())!==r){for(i=[],o=gn,(a=oi())!==r?((s=Qn())===r&&(e.substr(gn,3)===Wt?(s=Wt,gn+=3):(s=r,0===bn&&$n(Zt)),s===r&&(e.substr(gn,3)===Gt?(s=Gt,gn+=3):(s=r,0===bn&&$n(Yt)))),s!==r&&(u=oi())!==r&&(l=Yn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);o!==r;)i.push(o),o=gn,(a=oi())!==r?((s=Qn())===r&&(e.substr(gn,3)===Wt?(s=Wt,gn+=3):(s=r,0===bn&&$n(Zt)),s===r&&(e.substr(gn,3)===Gt?(s=Gt,gn+=3):(s=r,0===bn&&$n(Yt)))),s!==r&&(u=oi())!==r&&(l=Yn())!==r?o=a=[a,s,u,l]:(gn=o,o=r)):(gn=o,o=r);i!==r?(t,t=n=xt(n,i)):(gn=t,t=r)}else gn=t,t=r;return t}function Yn(){var t,n,i;return t=gn,(n=Fn())!==r&&(t,n=rt(n)),(t=n)===r&&(t=gn,45===e.charCodeAt(gn)?(n=Vt,gn++):(n=r,0===bn&&$n(Ht)),n!==r&&oi()!==r&&(i=Yn())!==r?(t,t=n=Xt(i)):(gn=t,t=r)),t}function Xn(){var t,n,i,o;if(t=gn,34===e.charCodeAt(gn)?(n=Kt,gn++):(n=r,0===bn&&$n(Jt)),n!==r){for(i=[],Qt.test(e.charAt(gn))?(o=e.charAt(gn),gn++):(o=r,0===bn&&$n(te));o!==r;)i.push(o),Qt.test(e.charAt(gn))?(o=e.charAt(gn),gn++):(o=r,0===bn&&$n(te));i!==r?(34===e.charCodeAt(gn)?(o=Kt,gn++):(o=r,0===bn&&$n(Jt)),o!==r?(t,t=n=ee(i)):(gn=t,t=r)):(gn=t,t=r)}else gn=t,t=r;if(t===r)if(t=gn,39===e.charCodeAt(gn)?(n=ne,gn++):(n=r,0===bn&&$n(ie)),n!==r){for(i=[],re.test(e.charAt(gn))?(o=e.charAt(gn),gn++):(o=r,0===bn&&$n(oe));o!==r;)i.push(o),re.test(e.charAt(gn))?(o=e.charAt(gn),gn++):(o=r,0===bn&&$n(oe));i!==r?(39===e.charCodeAt(gn)?(o=ne,gn++):(o=r,0===bn&&$n(ie)),o!==r?(t,t=n=ee(i)):(gn=t,t=r)):(gn=t,t=r)}else gn=t,t=r;return t}function Kn(){var t,n,i,o,a;return t=gn,(n=Jn())!==r?(i=gn,46===e.charCodeAt(gn)?(o=ut,gn++):(o=r,0===bn&&$n(lt)),o!==r?((a=Jn())===r&&(a=null),a!==r?i=o=[o,a]:(gn=i,i=r)):(gn=i,i=r),i===r&&(i=null),i!==r?(t,t=n=ae(n,i)):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,46===e.charCodeAt(gn)?(n=ut,gn++):(n=r,0===bn&&$n(lt)),n!==r&&(i=Jn())!==r?(t,t=n=se(i)):(gn=t,t=r)),t}function Jn(){var t,n,i;if(t=gn,n=[],ue.test(e.charAt(gn))?(i=e.charAt(gn),gn++):(i=r,0===bn&&$n(le)),i!==r)for(;i!==r;)n.push(i),ue.test(e.charAt(gn))?(i=e.charAt(gn),gn++):(i=r,0===bn&&$n(le));else n=r;return n!==r&&(t,n=ce(n)),t=n}function Qn(){var t;return 42===e.charCodeAt(gn)?(t=he,gn++):(t=r,0===bn&&$n(de)),t}function ti(){var t,e;return t=gn,(e=ai())!==r?(gn,(pe(e)?void 0:r)!==r?(t,t=e=fe(e)):(gn=t,t=r)):(gn=t,t=r),t}function ei(){var t,n,i;return t=gn,36===e.charCodeAt(gn)?(n=me,gn++):(n=r,0===bn&&$n(ge)),n!==r&&(i=ai())!==r?(t,t=n=ve(i)):(gn=t,t=r),t}function ni(){var t,n,i,o;return t=gn,42===e.charCodeAt(gn)?(n=he,gn++):(n=r,0===bn&&$n(de)),n!==r&&(t,n=ye()),(t=n)===r&&(t=gn,(n=li())!==r?(58===e.charCodeAt(gn)?(i=_e,gn++):(i=r,0===bn&&$n(be)),i!==r?(42===e.charCodeAt(gn)?(o=he,gn++):(o=r,0===bn&&$n(de)),o!==r?(t,t=n=we(n)):(gn=t,t=r)):(gn=t,t=r)):(gn=t,t=r),t===r&&(t=gn,(n=ai())!==r&&(t,n=xe(n)),t=n)),t}function ii(){var t;return e.substr(gn,7)===$e?(t=$e,gn+=7):(t=r,0===bn&&$n(Ee)),t===r&&(e.substr(gn,4)===ke?(t=ke,gn+=4):(t=r,0===bn&&$n(Le)),t===r&&(e.substr(gn,22)===X?(t=X,gn+=22):(t=r,0===bn&&$n(K)),t===r&&(e.substr(gn,4)===Ce?(t=Ce,gn+=4):(t=r,0===bn&&$n(Te))))),t}function ri(){var t,n;if(t=[],Se.test(e.charAt(gn))?(n=e.charAt(gn),gn++):(n=r,0===bn&&$n(De)),n!==r)for(;n!==r;)t.push(n),Se.test(e.charAt(gn))?(n=e.charAt(gn),gn++):(n=r,0===bn&&$n(De));else t=r;return t}function oi(){var t;return(t=ri())===r&&(t=null),t}function ai(){var t,e;return t=gn,(e=si())===r&&(e=ui()),e!==r&&(t,e=Me(e)),t=e}function si(){var t,n,i,o;return t=gn,(n=li())!==r?(58===e.charCodeAt(gn)?(i=_e,gn++):(i=r,0===bn&&$n(be)),i!==r&&(o=li())!==r?(t,t=n=Ae(n,o)):(gn=t,t=r)):(gn=t,t=r),t}function ui(){var t,e;return t=gn,(e=li())!==r&&(t,e=Pe(e)),t=e}function li(){return di()}function ci(){var t;return Oe.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Ie)),t===r&&(95===e.charCodeAt(gn)?(t=Ne,gn++):(t=r,0===bn&&$n(Re)),t===r&&(je.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(qe)),t===r&&(Fe.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Ue)),t===r&&(Be.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(ze)),t===r&&(Ve.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(He)),t===r&&(We.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Ze)),t===r&&(Ge.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Ye)),t===r&&(Xe.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Ke)),t===r&&(Je.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(Qe)),t===r&&(tn.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(en)),t===r&&(nn.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(rn)),t===r&&(on.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(an)),t===r&&(sn.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(un))))))))))))))),t}function hi(){var t;return(t=ci())===r&&(45===e.charCodeAt(gn)?(t=Vt,gn++):(t=r,0===bn&&$n(Ht)),t===r&&(46===e.charCodeAt(gn)?(t=ut,gn++):(t=r,0===bn&&$n(lt)),t===r&&(ue.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(le)),t===r&&(ln.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(cn)),t===r&&(hn.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(dn)),t===r&&(pn.test(e.charAt(gn))?(t=e.charAt(gn),gn++):(t=r,0===bn&&$n(fn)))))))),t}function di(){var t,e,n,i;if(t=gn,(e=ci())!==r){for(n=[],i=hi();i!==r;)n.push(i),i=hi();n!==r?(t,t=e=mn(e,n)):(gn=t,t=r)}else gn=t,t=r;return t}var pi,fi=function(t,e,n,i){var r,o,a={type:"",args:[]};for(a.args.push(t),r=0;r<e.length;r++){switch(typeof n){case"string":a.type=n;break;case"object":for(a.type=e[r][n[0]],o=1;o<n.length;o++)a.type=a.type[n[o]];break;default:a.type=e[r][n]}a.args.push(void 0===i?e[r]:e[r][i]),a={type:"",args:[a]}}return a.args[0]},mi=function(t,e,n,i){var r,o=[];if(n.length<1)return t;for(r=0;r<n.length;r++)o.push(n[r][i]);return{type:"predicate",args:[e,t,o]}},gi=[],vi=function(t){var e,n=!1;if(null!==t){for(e=0;e<gi.length;e++)if(gi[e]===t){n=!0;break}n||gi.push(t)}},yi=["comment","text","processing-instruction","node"],_i=function(t,e,n){return"/"==t?{type:"/",args:[e,n]}:{type:"/",args:[{type:"/",args:[e,{type:"step",args:["descendant-or-self",{type:"nodeType",args:["node",[]]}]}]},n]}};if((n=a())!==r&&gn===e.length)return n;throw n!==r&&gn<e.length&&$n({type:"end",description:"end of input"}),En(null,_n,yn<e.length?e.charAt(yn):null,yn<e.length?xn(yn,yn+1):xn(yn,yn))}}}()},function(t,e){function n(t){this._seed=t%2147483647,this._seed<=0&&(this._seed+=2147483646)}Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.prototype.next=function(){return this._seed=16807*this._seed%2147483647},n.prototype.nextFloat=function(){return(this.next()-1)/2147483646},t.exports=function(t,e){var i,r=[];if(void 0!==e){if(!Number.isInteger(e))throw new Error("Invalid seed argument. Integer required.");var o=new n(e);i=o.nextFloat.bind(o)}else i=Math.random;for(var a=0;a<t.length;++a){var s=Math.floor(i()*(a+1));s!==a&&(r[a]=r[s]),r[s]=t[a]}return r}},function(t,e){function n(t){return t.map((function(t){return t.trim().split(" ")}))}function i(t){return t*Math.PI/180}function r(t){return t.every((function(t){return""!==t[0]&&t[0]>=-90&&t[0]<=90&&""!==t[1]&&t[1]>=-180&&t[1]<=180&&(void 0===t[2]||!isNaN(t[2]))&&(void 0===t[3]||!isNaN(t[3])&&t[3]>=0)}))}function o(t,e){var n=i(t.lng-e.lng),r=i(t.lat),o=i(e.lat);return 6378100*Math.acos(Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos(n))}t.exports={area:function(t){var e=n(t);if(!r(e))return Number.NaN;var o=e.length,a=0;if(o>2){for(var s=0;s<o;s++){var u={lat:e[s][0],lng:e[s][1]},l={lat:e[(s+1)%o][0],lng:e[(s+1)%o][1]};a+=i(l.lng-u.lng)*(2+Math.sin(i(u.lat))+Math.sin(i(l.lat)))}a=6378100*a*6378100/2}return Math.abs(Math.round(100*a))/100},distance:function(t){var e=n(t);if(!r(e))return Number.NaN;var i=e.length,a=0;if(i>1)for(var s=1;s<i;s++){a+=o({lat:e[s-1][0],lng:e[s-1][1]},{lat:e[s][0],lng:e[s][1]})}return Math.abs(Math.round(100*a))/100}}},function(t,e,n){(function(i){var r,o,a,s;s=function(t){"use strict";function e(e){return!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll=l),void 0!==e.click&&void 0===e.tap&&(e.tap=e.click),e||(e={}),e=t.extend({},t.fn.swipe.defaults,e),this.each((function(){var i=t(this),r=i.data(C);r||(r=new n(this,e),i.data(C,r))}))}function n(e,n){function T(e){if(!(!0===xt.data(C+"_intouch")||t(e.target).closest(n.excludedElements,xt).length>0)){var s=e.originalEvent?e.originalEvent:e;if(!s.pointerType||"mouse"!=s.pointerType||0!=n.fallbackToMouseEvents){var u,l=s.touches,c=l?l[0]:s;return $t=b,l?Et=l.length:!1!==n.preventDefaultEvents&&e.preventDefault(),dt=0,pt=null,ft=null,bt=null,mt=0,gt=0,vt=0,yt=1,_t=0,(h={})[i]=et(i),h[r]=et(r),h[o]=et(o),h[a]=et(a),wt=h,Y(),J(0,c),!l||Et===n.fingers||n.fingers===y||U()?(Lt=ot(),2==Et&&(J(1,l[1]),gt=vt=it(kt[0].start,kt[1].start)),(n.swipeStatus||n.pinchStatus)&&(u=I(s,$t))):u=!1,!1===u?(I(s,$t=$),u):(n.hold&&(At=setTimeout(t.proxy((function(){xt.trigger("hold",[s.target]),n.hold&&(u=n.hold.call(xt,s,s.target))}),this),n.longTapThreshold)),K(!0),null)}}var h}function S(e){var h,d,p,f,m=e.originalEvent?e.originalEvent:e;if($t!==x&&$t!==$&&!X()){var _,b=m.touches,E=Q(b?b[0]:m);if(Ct=ot(),b&&(Et=b.length),n.hold&&clearTimeout(At),$t=w,2==Et&&(0==gt?(J(1,b[1]),gt=vt=it(kt[0].start,kt[1].start)):(Q(b[1]),vt=it(kt[0].end,kt[1].end),kt[0].end,kt[1].end,bt=1>yt?u:s),yt=(vt/gt*1).toFixed(2),_t=Math.abs(gt-vt)),Et===n.fingers||n.fingers===y||!b||U()){if(pt=rt(E.start,E.end),function(t,e){if(!1!==n.preventDefaultEvents)if(n.allowPageScroll===l)t.preventDefault();else{var s=n.allowPageScroll===c;switch(e){case i:(n.swipeLeft&&s||!s&&n.allowPageScroll!=g)&&t.preventDefault();break;case r:(n.swipeRight&&s||!s&&n.allowPageScroll!=g)&&t.preventDefault();break;case o:(n.swipeUp&&s||!s&&n.allowPageScroll!=v)&&t.preventDefault();break;case a:(n.swipeDown&&s||!s&&n.allowPageScroll!=v)&&t.preventDefault()}}}(e,ft=rt(E.last,E.end)),p=E.start,f=E.end,dt=Math.round(Math.sqrt(Math.pow(f.x-p.x,2)+Math.pow(f.y-p.y,2))),mt=nt(),function(t,e){t!=l&&(e=Math.max(e,tt(t)),wt[t].distance=e)}(pt,dt),_=I(m,$t),!n.triggerOnTouchEnd||n.triggerOnTouchLeave){var k=!0;if(n.triggerOnTouchLeave){var L={left:(d=(h=t(h=this)).offset()).left,right:d.left+h.outerWidth(),top:d.top,bottom:d.top+h.outerHeight()};k=function(t,e){return t.x>e.left&&t.x<e.right&&t.y>e.top&&t.y<e.bottom}(E.end,L)}!n.triggerOnTouchEnd&&k?$t=O(w):n.triggerOnTouchLeave&&!k&&($t=O(x)),$t!=$&&$t!=x||I(m,$t)}}else I(m,$t=$);!1===_&&I(m,$t=$)}}function D(t){var e=t.originalEvent?t.originalEvent:t,i=e.touches;if(i){if(i.length&&!X())return function(t){Tt=ot(),St=t.touches.length+1}(e),!0;if(i.length&&X())return!0}return X()&&(Et=St),Ct=ot(),mt=nt(),j()||!R()?I(e,$t=$):n.triggerOnTouchEnd||!1===n.triggerOnTouchEnd&&$t===w?(!1!==n.preventDefaultEvents&&!1!==t.cancelable&&t.preventDefault(),I(e,$t=x)):!n.triggerOnTouchEnd&&W()?N(e,$t=x,p):$t===w&&I(e,$t=$),K(!1),null}function M(){Et=0,Ct=0,Lt=0,gt=0,vt=0,yt=1,Y(),K(!1)}function A(t){var e=t.originalEvent?t.originalEvent:t;n.triggerOnTouchLeave&&I(e,$t=O(x))}function P(){xt.off(st,T),xt.off(ht,M),xt.off(ut,S),xt.off(lt,D),ct&&xt.off(ct,A),K(!1)}function O(t){var e=t,i=q(),r=R(),o=j();return!i||o?e=$:!r||t!=w||n.triggerOnTouchEnd&&!n.triggerOnTouchLeave?!r&&t==x&&n.triggerOnTouchLeave&&(e=$):e=x,e}function I(t,e){var i,r=t.touches;return(!(!B()||!z())||z())&&(i=N(t,e,h)),(!(!F()||!U())||U())&&!1!==i&&(i=N(t,e,d)),G()&&Z()&&!1!==i?i=N(t,e,f):mt>n.longTapThreshold&&_>dt&&n.longTap&&!1!==i?i=N(t,e,m):!(1!==Et&&E||!(isNaN(dt)||dt<n.threshold)||!W())&&!1!==i&&(i=N(t,e,p)),e===$&&M(),e===x&&(r&&r.length||M()),i}function N(e,l,c){var g;if(c==h){if(xt.trigger("swipeStatus",[l,pt||null,dt||0,mt||0,Et,kt,ft]),n.swipeStatus&&!1===(g=n.swipeStatus.call(xt,e,l,pt||null,dt||0,mt||0,Et,kt,ft)))return!1;if(l==x&&B()){if(clearTimeout(Mt),clearTimeout(At),xt.trigger("swipe",[pt,dt,mt,Et,kt,ft]),n.swipe&&!1===(g=n.swipe.call(xt,e,pt,dt,mt,Et,kt,ft)))return!1;switch(pt){case i:xt.trigger("swipeLeft",[pt,dt,mt,Et,kt,ft]),n.swipeLeft&&(g=n.swipeLeft.call(xt,e,pt,dt,mt,Et,kt,ft));break;case r:xt.trigger("swipeRight",[pt,dt,mt,Et,kt,ft]),n.swipeRight&&(g=n.swipeRight.call(xt,e,pt,dt,mt,Et,kt,ft));break;case o:xt.trigger("swipeUp",[pt,dt,mt,Et,kt,ft]),n.swipeUp&&(g=n.swipeUp.call(xt,e,pt,dt,mt,Et,kt,ft));break;case a:xt.trigger("swipeDown",[pt,dt,mt,Et,kt,ft]),n.swipeDown&&(g=n.swipeDown.call(xt,e,pt,dt,mt,Et,kt,ft))}}}if(c==d){if(xt.trigger("pinchStatus",[l,bt||null,_t||0,mt||0,Et,yt,kt]),n.pinchStatus&&!1===(g=n.pinchStatus.call(xt,e,l,bt||null,_t||0,mt||0,Et,yt,kt)))return!1;if(l==x&&F())switch(bt){case s:xt.trigger("pinchIn",[bt||null,_t||0,mt||0,Et,yt,kt]),n.pinchIn&&(g=n.pinchIn.call(xt,e,bt||null,_t||0,mt||0,Et,yt,kt));break;case u:xt.trigger("pinchOut",[bt||null,_t||0,mt||0,Et,yt,kt]),n.pinchOut&&(g=n.pinchOut.call(xt,e,bt||null,_t||0,mt||0,Et,yt,kt))}}return c==p?l!==$&&l!==x||(clearTimeout(Mt),clearTimeout(At),Z()&&!G()?(Dt=ot(),Mt=setTimeout(t.proxy((function(){Dt=null,xt.trigger("tap",[e.target]),n.tap&&(g=n.tap.call(xt,e,e.target))}),this),n.doubleTapThreshold)):(Dt=null,xt.trigger("tap",[e.target]),n.tap&&(g=n.tap.call(xt,e,e.target)))):c==f?l!==$&&l!==x||(clearTimeout(Mt),clearTimeout(At),Dt=null,xt.trigger("doubletap",[e.target]),n.doubleTap&&(g=n.doubleTap.call(xt,e,e.target))):c==m&&(l!==$&&l!==x||(clearTimeout(Mt),Dt=null,xt.trigger("longtap",[e.target]),n.longTap&&(g=n.longTap.call(xt,e,e.target)))),g}function R(){var t=!0;return null!==n.threshold&&(t=dt>=n.threshold),t}function j(){var t=!1;return null!==n.cancelThreshold&&null!==pt&&(t=tt(pt)-dt>=n.cancelThreshold),t}function q(){return!(n.maxTimeThreshold&&mt>=n.maxTimeThreshold)}function F(){var t=V(),e=H(),i=null===n.pinchThreshold||_t>=n.pinchThreshold;return t&&e&&i}function U(){return!!(n.pinchStatus||n.pinchIn||n.pinchOut)}function B(){var t=q(),e=R(),n=V(),i=H();return!j()&&i&&n&&e&&t}function z(){return!!(n.swipe||n.swipeStatus||n.swipeLeft||n.swipeRight||n.swipeUp||n.swipeDown)}function V(){return Et===n.fingers||n.fingers===y||!E}function H(){return 0!==kt[0].end.x}function W(){return!!n.tap}function Z(){return!!n.doubleTap}function G(){if(null==Dt)return!1;var t=ot();return Z()&&t-Dt<=n.doubleTapThreshold}function Y(){Tt=0,St=0}function X(){var t=!1;return Tt&&ot()-Tt<=n.fingerReleaseThreshold&&(t=!0),t}function K(t){xt&&(!0===t?(xt.on(ut,S),xt.on(lt,D),ct&&xt.on(ct,A)):(xt.off(ut,S,!1),xt.off(lt,D,!1),ct&&xt.off(ct,A,!1)),xt.data(C+"_intouch",!0===t))}function J(t,e){var n={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return n.start.x=n.last.x=n.end.x=e.pageX||e.clientX,n.start.y=n.last.y=n.end.y=e.pageY||e.clientY,kt[t]=n,n}function Q(t){var e=void 0!==t.identifier?t.identifier:0,n=function(t){return kt[t]||null}(e);return null===n&&(n=J(e,t)),n.last.x=n.end.x,n.last.y=n.end.y,n.end.x=t.pageX||t.clientX,n.end.y=t.pageY||t.clientY,n}function tt(t){return wt[t]?wt[t].distance:void 0}function et(t){return{direction:t,distance:0}}function nt(){return Ct-Lt}function it(t,e){var n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return Math.round(Math.sqrt(n*n+i*i))}function rt(t,e){if(s=e,(n=t).x==s.x&&n.y==s.y)return l;var n,s,u=function(t,e){var n=t.x-e.x,i=e.y-t.y,r=Math.atan2(i,n),o=Math.round(180*r/Math.PI);return 0>o&&(o=360-Math.abs(o)),o}(t,e);return 45>=u&&u>=0?i:360>=u&&u>=315?i:u>=135&&225>=u?r:u>45&&135>u?a:o}function ot(){return(new Date).getTime()}n=t.extend({},n);var at=E||L||!n.fallbackToMouseEvents,st=at?L?k?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ut=at?L?k?"MSPointerMove":"pointermove":"touchmove":"mousemove",lt=at?L?k?"MSPointerUp":"pointerup":"touchend":"mouseup",ct=at?L?"mouseleave":null:"mouseleave",ht=L?k?"MSPointerCancel":"pointercancel":"touchcancel",dt=0,pt=null,ft=null,mt=0,gt=0,vt=0,yt=1,_t=0,bt=0,wt=null,xt=t(e),$t="start",Et=0,kt={},Lt=0,Ct=0,Tt=0,St=0,Dt=0,Mt=null,At=null;try{xt.on(st,T),xt.on(ht,M)}catch(e){t.error("events not supported "+st+","+ht+" on jQuery.swipe")}this.enable=function(){return this.disable(),xt.on(st,T),xt.on(ht,M),xt},this.disable=function(){return P(),xt},this.destroy=function(){P(),xt.data(C,null),xt=null},this.option=function(e,i){if("object"==typeof e)n=t.extend(n,e);else if(void 0!==n[e]){if(void 0===i)return n[e];n[e]=i}else{if(!e)return n;t.error("Option "+e+" does not exist on jQuery.swipe.options")}return null}}var i="left",r="right",o="up",a="down",s="in",u="out",l="none",c="auto",h="swipe",d="pinch",p="tap",f="doubletap",m="longtap",g="horizontal",v="vertical",y="all",_=10,b="start",w="move",x="end",$="cancel",E="ontouchstart"in window,k=window.navigator.msPointerEnabled&&!window.PointerEvent&&!E,L=(window.PointerEvent||window.navigator.msPointerEnabled)&&!E,C="TouchSwipe";t.fn.swipe=function(n){var i=t(this),r=i.data(C);if(r&&"string"==typeof n){if(r[n])return r[n].apply(r,Array.prototype.slice.call(arguments,1));t.error("Method "+n+" does not exist on jQuery.swipe")}else if(r&&"object"==typeof n)r.option.apply(r,arguments);else if(!(r||"object"!=typeof n&&n))return e.apply(this,arguments);return i},t.fn.swipe.version="1.6.18",t.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0},t.fn.swipe.phases={PHASE_START:b,PHASE_MOVE:w,PHASE_END:x,PHASE_CANCEL:$},t.fn.swipe.directions={LEFT:i,RIGHT:r,UP:o,DOWN:a,IN:s,OUT:u},t.fn.swipe.pageScroll={NONE:l,HORIZONTAL:g,VERTICAL:v,AUTO:c},t.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:y}},n(526).jQuery?(o=[n(0)],void 0===(a="function"==typeof(r=s)?r.apply(e,o):r)||(t.exports=a)):s(t.exports?n(0):i)}).call(this,n(0))},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e){var n,i;n=window,i=document,L.drawVersion="1.0.4+838a63b",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e);var n=L.version.split(".");1===parseInt(n[0],10)&&parseInt(n[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,n=e.getLatLngs(),i=n.splice(-1,1)[0];this._poly.setLatLngs(n),this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(i,!1)}},addVertex:function(t){this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(t,!0))},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);!this.options.allowIntersection&&e||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),n=this._map.layerPointToLatLng(e);this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(e),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,n=e.clientX,i=e.clientY;this._startPoint.call(this,n,i)}},_startPoint:function(t,e){this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){var e=t.originalEvent,n=e.clientX,i=e.clientY;this._endPoint.call(this,n,i,t),this._clickHandled=null},_endPoint:function(t,e,i){if(this._mouseDownOrigin){var r=L.point(t,e).distanceTo(this._mouseDownOrigin),o=this._calculateFinishDistance(i.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(i.latlng),this._finishShape()):o<10&&L.Browser.touch?this._finishShape():Math.abs(r)<9*(n.devicePixelRatio||1)&&this.addVertex(i.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,n,i=t.originalEvent;!i.touches||!i.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=i.touches[0].clientX,n=i.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,n),this._endPoint.call(this,e,n,t),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t){var e;if(this._markers.length>0){var n;if(this.type===L.Draw.Polyline.TYPE)n=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;n=this._markers[0]}var i=this._map.latLngToContainerPoint(n.getLatLng()),r=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),o=this._map.latLngToContainerPoint(r.getLatLng());e=i.distanceTo(o)}else e=1/0;return e},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var n,i,r,o=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),a=this.options.guidelineDistance,s=this.options.maxGuideLineLength,u=o>s?o-s:a;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));u<o;u+=this.options.guidelineDistance)n=u/o,i={x:Math.floor(t.x*(1-n)+n*e.x),y:Math.floor(t.y*(1-n)+n*e.y)},(r=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(r,i)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,n=this._guidesContainer.childNodes.length;e<n;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,n=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=n?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var n,i,r=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(n=r-(e?2:1),i=L.GeometryUtil.isVersion07x()?t.distanceTo(this._markers[n].getLatLng())*(this.options.factor||1):this._map.distance(t,this._markers[n].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=i*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();return t=L.GeometryUtil.isVersion07x()?n&&e&&e.distanceTo?this._measurementRunningTotal+e.distanceTo(n)*(this.options.factor||1):this._measurementRunningTotal||0:n&&e?this._measurementRunningTotal+this._map.distance(e,n)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(t=L.drawLocal.draw.handlers.polygon.tooltip.cont,e=this._getMeasurementString()):(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area,e="";return t||this.options.showLength?(this.options.showLength&&(e=L.Draw.Polyline.prototype._getMeasurementString.call(this)),t&&(e+="<br>"+L.GeometryUtil.readableArea(t,this.options.metric,this.options.precision)),e):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var n;!this.options.allowIntersection&&this.options.showArea&&(n=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(n)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),i.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(i,"mouseup",this._onMouseUp,this),L.DomEvent.off(i,"touchend",this._onMouseUp,this),i.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(i,"mouseup",this._onMouseUp,this).on(i,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(t){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}(t.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,n,i=L.Draw.SimpleShape.prototype._getTooltipText.call(this),r=this._shape,o=this.options.showArea;return r&&(t=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),n=o?L.GeometryUtil.readableArea(e,this.options.metric):""),{text:i.text,subtext:n}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=this._createMarker(e),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(t){return new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},_fireCreatedEvent:function(){var t=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)},_createMarker:function(t){return new L.CircleMarker(t,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){if(L.GeometryUtil.isVersion07x())var e=this._startLatLng.distanceTo(t);else e=this._map.distance(this._startLatLng,t);this._shape?this._shape.setRadius(e):(this._shape=new L.Circle(this._startLatLng,e,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,n=t.latlng,i=this.options.showRadius,r=this.options.metric;if(this._tooltip.updatePosition(n),this._isDrawing){this._drawShape(n),e=this._shape.getRadius().toFixed(1);var o="";i&&(o=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,r,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:o})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display="")},_offsetMarker:function(t,e){var n=parseInt(t.style.marginTop,10)-e,i=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=i+"px"}}),L.Marker.addInitHook((function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())})),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(t){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler((function(t){t.addHooks()}))},removeHooks:function(){this._eachVertexHandler((function(t){t.removeHooks()}))},updateMarkers:function(){this._eachVertexHandler((function(t){t.updateMarkers()}))},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this._poly.options.poly))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t,e,n){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,n&&n.drawError&&(n.drawError=L.Util.extend({},this.options.drawError,n.drawError)),this._latlngs=e,L.setOptions(this,n)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t=this._poly,e=t._path;t instanceof L.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1)),e&&t.options.editing&&t.options.editing.className&&(t.options.original.className&&t.options.original.className.split(" ").forEach((function(t){L.DomUtil.removeClass(e,t)})),t.options.editing.className.split(" ").forEach((function(t){L.DomUtil.addClass(e,t)}))),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly,e=t._path;e&&t.options.editing&&t.options.editing.className&&(t.options.editing.className.split(" ").forEach((function(t){L.DomUtil.removeClass(e,t)})),t.options.original.className&&t.options.original.className.split(" ").forEach((function(t){L.DomUtil.addClass(e,t)}))),t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,n,i,r,o,a=this._defaultShape();for(t=0,n=a.length;t<n;t++)(i=this._createMarker(a[t],t)).on("click",this._onMarkerClick,this),i.on("contextmenu",this._onContextMenu,this),this._markers.push(i);for(t=0,e=n-1;t<n;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(r=this._markers[e],o=this._markers[t],this._createMiddleMarker(r,o),this._updatePrevNext(r,o))},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return n._origLatLng=t,n._index=e,n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(n),n},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t){var e=t.target,n=this._poly,i=L.LatLngUtil.cloneLatLng(e._origLatLng);if(L.extend(e._origLatLng,e._latlng),n.options.poly){var r=n._map._editTooltip;if(!n.options.poly.allowIntersection&&n.intersects()){L.extend(e._origLatLng,i),e.setLatLng(i);var o=n.options.color;n.setStyle({color:this.options.drawError.color}),r&&r.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout((function(){n.setStyle({color:o}),r&&r.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})}),1e3)}}e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var a=this._poly.getLatLngs();this._poly._convertLatLngs(a,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,n=t.target;this._defaultShape().length<e||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._markerGroup.removeLayer(n._middleLeft),n._middleRight&&this._markerGroup.removeLayer(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(t){var e=t.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:e,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e),i=t.target;L.extend(i._origLatLng,n),i._middleLeft&&i._middleLeft.setLatLng(this._getMiddleLatLng(i._prev,i)),i._middleRight&&i._middleRight.setLatLng(this._getMiddleLatLng(i,i._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t,e){this._markerGroup.eachLayer((function(n){n._index>t&&(n._index+=e)}))},_createMiddleMarker:function(t,e){var n,i,r,o=this._getMiddleLatLng(t,e),a=this._createMarker(o);a.setOpacity(.6),t._middleRight=e._middleLeft=a,i=function(){a.off("touchmove",i,this);var r=e._index;a._index=r,a.off("click",n,this).on("click",this._onMarkerClick,this),o.lat=a.getLatLng().lat,o.lng=a.getLatLng().lng,this._spliceLatLngs(r,0,o),this._markers.splice(r,0,a),a.setOpacity(1),this._updateIndexes(r,1),e._index++,this._updatePrevNext(t,a),this._updatePrevNext(a,e),this._poly.fire("editstart")},r=function(){a.off("dragstart",i,this),a.off("dragend",r,this),a.off("touchmove",i,this),this._createMiddleMarker(t,a),this._createMiddleMarker(a,e)},n=function(){i.call(this),r.call(this),this._fireEdit()},a.on("click",n,this).on("dragstart",i,this).on("dragend",r,this).on("touchmove",i,this),this._markerGroup.addLayer(a)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var n=this._poly._map,i=n.project(t.getLatLng()),r=n.project(e.getLatLng());return n.unproject(i._add(r)._divideBy(2))}}),L.Polyline.addInitHook((function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",(function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()})),this.on("remove",(function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})))})),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,n=e.getLatLng();e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),"function"==typeof this._getCorners){var e=this._getCorners(),n=t.target,i=n._cornerIndex;n.setOpacity(0),this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)}this._shape.fire("editstart")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e);return t.target===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),!1},_onTouchEnd:function(t){t.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;e<n;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),n=t.target._cornerIndex;this._oppositeCorner=e[(n+2)%4],this._toggleCornerMarkers(0,n)},_onMarkerDragEnd:function(t){var e,n=t.target;n===this._moveMarker&&(e=this._shape.getBounds().getCenter(),n.setLatLng(e)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),i=this._shape.getBounds().getCenter(),r=[],o=0,a=n.length;o<a;o++)e=[n[o].lat-i.lat,n[o].lng-i.lng],r.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(r),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook((function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())})),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(t){if(this._resizeMarkers.length){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e)}this._shape.setLatLng(t),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook((function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",(function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()})),this.on("remove",(function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))})),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(t);return this._map.unproject([n.x+e,n.y-e])},_resize:function(t){var e=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=e.distanceTo(t):radius=this._map.distance(e,t),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook((function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())})),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(t,e){var n={};if(void 0!==t.touches){if(!t.touches.length)return;n=t.touches[0]}else{if("touch"!==t.pointerType)return;if(n=t,!this._filterClick(t))return}var i=this._map.mouseEventToContainerPoint(n),r=this._map.mouseEventToLayerPoint(n),o=this._map.layerPointToLatLng(r);this._map.fire(e,{latlng:o,layerPoint:r,containerPoint:i,pageX:n.pageX,pageY:n.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,n=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){this._map._loaded&&this._touchEvent(t,"touchstart")},_onTouchEnd:function(t){this._map._loaded&&this._touchEvent(t,"touchend")},_onTouchCancel:function(t){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(t,e)}},_onTouchLeave:function(t){this._map._loaded&&this._touchEvent(t,"touchleave")},_onTouchMove:function(t){this._map._loaded&&this._touchEvent(t,"touchmove")},_detectIE:function(){var t=n.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var r=t.indexOf("Edge/");return r>0&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e.concat(["touchcancel"]),L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)L.DomEvent.on(t,e[n],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var t=n.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var r=t.indexOf("Edge/");return r>0&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],n=0,i=t.length;n<i;n++)Array.isArray(t[n])?e.push(L.LatLngUtil.cloneLatLngs(t[n])):e.push(this.cloneLatLng(t[n]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},function(){var t={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,n,i=t.length,r=0,o=Math.PI/180;if(i>2){for(var a=0;a<i;a++)e=t[a],r+=((n=t[(a+1)%i]).lng-e.lng)*o*(2+Math.sin(e.lat*o)+Math.sin(n.lat*o));r=6378137*r*6378137/2}return Math.abs(r)},formattedNumber:function(t,e){var n=parseFloat(t).toFixed(e),i=L.drawLocal.format&&L.drawLocal.format.numeric,r=i&&i.delimiters,o=r&&r.thousands,a=r&&r.decimal;if(o||a){var s=n.split(".");n=o?s[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o):s[0],a=a||".",s.length>1&&(n=n+a+s[1])}return n},readableArea:function(e,n,i){var r,o,a;return i=L.Util.extend({},t,i),n?(o=["ha","m"],"string"==(a=typeof n)?o=[n]:"boolean"!==a&&(o=n),r=e>=1e6&&-1!==o.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*e,i.km)+" km²":e>=1e4&&-1!==o.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*e,i.ha)+" ha":L.GeometryUtil.formattedNumber(e,i.m)+" m²"):r=(e/=.836127)>=3097600?L.GeometryUtil.formattedNumber(e/3097600,i.mi)+" mi²":e>=4840?L.GeometryUtil.formattedNumber(e/4840,i.ac)+" acres":L.GeometryUtil.formattedNumber(e,i.yd)+" yd²",r},readableDistance:function(e,n,i,r,o){var a;switch(o=L.Util.extend({},t,o),n?"string"==typeof n?n:"metric":i?"feet":r?"nauticalMile":"yards"){case"metric":a=e>1e3?L.GeometryUtil.formattedNumber(e/1e3,o.km)+" km":L.GeometryUtil.formattedNumber(e,o.m)+" m";break;case"feet":e*=3.28083,a=L.GeometryUtil.formattedNumber(e,o.ft)+" ft";break;case"nauticalMile":e*=.53996,a=L.GeometryUtil.formattedNumber(e/1e3,o.nm)+" nm";break;case"yards":default:a=(e*=1.09361)>1760?L.GeometryUtil.formattedNumber(e/1760,o.mi)+" miles":L.GeometryUtil.formattedNumber(e,o.yd)+" yd"}return a},isVersion07x:function(){var t=L.version.split(".");return 0===parseInt(t[0],10)&&7===parseInt(t[1],10)}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,n,i){return this._checkCounterclockwise(t,n,i)!==this._checkCounterclockwise(e,n,i)&&this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(t,e,i)},_checkCounterclockwise:function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,n,i=this._getProjectedPoints(),r=i?i.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=r-1;t>=3;t--)if(e=i[t-1],n=i[t],this._lineSegmentsIntersectsRange(e,n,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var n=this._getProjectedPoints(),i=n?n.length:0,r=n?n[i-1]:null,o=i-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(r,t,o,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),n=e?e.length:0;return!e||(n+=t||0)<=3},_lineSegmentsIntersectsRange:function(t,e,n,i){var r,o,a=this._getProjectedPoints();i=i||0;for(var s=n;s>i;s--)if(r=a[s-1],o=a[s],L.LineUtil.segmentsIntersect(t,e,r,o))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),n=0;n<e.length;n++)t.push(this._map.latLngToLayerPoint(e[n]));return t}}),L.Polygon.include({intersects:function(){var t,e,n,i,r=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=r.length,e=r[0],n=r[t-1],i=t-2,this._lineSegmentsIntersectsRange(n,e,i,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var e;L.Control.prototype.initialize.call(this,t),this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,n=L.DomUtil.create("div","leaflet-draw"),i=!1;for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&(e=this._toolbars[r].addToolbar(t))&&(i||(L.DomUtil.hasClass(e,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(e.childNodes[0],"leaflet-draw-toolbar-top"),i=!0),n.appendChild(e));return n},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var n in this._toolbars)this._toolbars[n]!==e&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook((function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))})),L.Toolbar=L.Class.extend({initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null;var e=L.version.split(".");1===parseInt(e[0],10)&&parseInt(e[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,n=L.DomUtil.create("div","leaflet-draw-section"),i=0,r=this._toolbarClass||"",o=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<o.length;e++)o[e].enabled&&this._initModeHandler(o[e].handler,this._toolbarContainer,i++,r,o[e].title);if(i)return this._lastButtonIndex=--i,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),n.appendChild(this._toolbarContainer),n.appendChild(this._actionsContainer),n},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,n=this._actionButtons.length;e<n;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,n,i,r){var o=t.type;this._modes[o]={},this._modes[o].handler=t,this._modes[o].button=this._createButton({type:o,title:r,className:i+"-"+o,container:e,callback:this._modes[o].handler.enable,context:this._modes[o].handler}),this._modes[o].buttonIndex=n,this._modes[o].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!n.MSStream},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container),n=L.DomUtil.create("span","sr-only",t.container);e.href="#",e.appendChild(n),t.title&&(e.title=t.title,n.innerHTML=t.title),t.text&&(e.innerHTML=t.text,n.innerHTML=t.text);var i=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"touchstart",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,i,t.callback,t.context),e},_disposeButton:function(t,e){var n=this._detectIOS()?"touchstart":"click";L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"touchstart",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,n,e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,n,i,r,o=this._actionsContainer,a=this.getActions(t),s=a.length;for(n=0,i=this._actionButtons.length;n<i;n++)this._disposeButton(this._actionButtons[n].button,this._actionButtons[n].callback);for(this._actionButtons=[];o.firstChild;)o.removeChild(o.firstChild);for(var u=0;u<s;u++)"enabled"in a[u]&&!a[u].enabled||(e=L.DomUtil.create("li","",o),r=this._createButton({title:a[u].title,text:a[u].text,container:e,callback:a[u].callback,context:a[u].context}),this._actionButtons.push({button:r,callback:a[u].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,n=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=n+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._visible=!1,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",t.text||t.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),n=this._container;return this._container&&(this._visible&&(n.style.visibility="inherit"),L.DomUtil.setPosition(n,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(t,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){for(var e in L.setOptions(this,t),this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&(void 0===t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(t){var e=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return t.removeAllLayers&&e.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),e},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var n=L.version.split(".");1===parseInt(n[0],10)&&parseInt(n[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer((function(t){this._revertLayer(t)}),this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer((function(e){e.edited&&(t.addLayer(e),e.edited=!1)})),this._map.fire(L.Draw.Event.EDITED,{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:(t instanceof L.Marker||t instanceof L.CircleMarker)&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):(t instanceof L.Marker||t instanceof L.CircleMarker)&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,n,i=t.layer||t.target||t;this._backupLayer(i),this.options.poly&&(n=L.Util.extend({},this.options.poly),i.options.poly=n),this.options.selectedPathOptions&&((e=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(e.color=i.options.color,e.fillColor=i.options.fillColor),i.options.original=L.extend({},i.options),i.options.editing=e),i instanceof L.Marker?(i.editing&&i.editing.enable(),i.dragging.enable(),i.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):i.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],n=this._map.mouseEventToLayerPoint(e),i=this._map.layerPointToLatLng(n);t.target.setLatLng(i)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var n=L.version.split(".");1===parseInt(n[0],10)&&parseInt(n[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer((function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})}),this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer((function(t){this._removeLayer({layer:t})}),this),this.save()},_enableLayerDelete:function(t){(t.layer||t.target||t).on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})},function(t,e){L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{minZoom:0,maxZoom:23,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._ready=!!window.google&&!!window.google.maps&&!!window.google.maps.Map,this._GAPIPromise=this._ready?Promise.resolve(window.google):new Promise((function(t,e){var n=0,i=null;i=setInterval((function(){return n>=10?(clearInterval(i),e(new Error("window.google not found after 10 attempts"))):window.google&&window.google.maps&&window.google.maps.Map?(clearInterval(i),t(window.google)):void n++}),500)})),this._tileCallbacks={},this._freshTiles={},this._imagesPerTile="hybrid"===this.options.type?2:1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(t){L.GridLayer.prototype.onAdd.call(this,t),this._initMutantContainer(),this._GAPIPromise.then(function(){if(this._ready=!0,this._map=t,this._initMutant(),t.on("viewreset",this._reset,this),this.options.updateWhenIdle?t.on("moveend",this._update,this):t.on("move",this._update,this),t.on("zoomend",this._handleZoomAnim,this),t.on("resize",this._resize,this),google.maps.event.addListenerOnce(this._mutant,"idle",function(){this._checkZoomLevels(),this._mutantIsReady=!0}.bind(this)),t._controlCorners.bottomright.style.marginBottom="20px",t._controlCorners.bottomleft.style.marginBottom="20px",this._reset(),this._update(),this._subLayers)for(var e in this._subLayers)this._subLayers[e].setMap(this._mutant)}.bind(this))},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),google.maps.event.clearListeners(t,"idle"),google.maps.event.clearListeners(this._mutant,"idle"),t.off("viewreset",this._reset,this),t.off("move",this._update,this),t.off("moveend",this._update,this),t.off("zoomend",this._handleZoomAnim,this),t.off("resize",this._resize,this),t._controlCorners&&(t._controlCorners.bottomright.style.marginBottom="0em",t._controlCorners.bottomleft.style.marginBottom="0em")},getAttribution:function(){return this.options.attribution},setElementSize:function(t,e){t.style.width=e.x+"px",t.style.height=e.y+"px"},addGoogleLayer:function(t,e){return this._subLayers||(this._subLayers={}),this._GAPIPromise.then(function(){var n=new(0,google.maps[t])(e);return n.setMap(this._mutant),this._subLayers[t]=n,n}.bind(this))},removeGoogleLayer:function(t){var e=this._subLayers&&this._subLayers[t];e&&(e.setMap(null),delete this._subLayers[t])},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.zIndex="800",this._mutantContainer.style.pointerEvents="none",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity),this.setElementSize(this._mutantContainer,this._map.getSize()),this._attachObserver(this._mutantContainer)},_initMutant:function(){if(this._ready&&this._mutantContainer)if(this._mutant)this._resize();else{this._mutantCenter=new google.maps.LatLng(0,0);var t=new google.maps.Map(this._mutantContainer,{center:this._mutantCenter,zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.styles||{},backgroundColor:"transparent"});this._mutant=t,google.maps.event.addListenerOnce(t,"idle",function(){for(var t=this._mutantContainer.querySelectorAll("a"),e=0;e<t.length;e++)t[e].style.pointerEvents="auto"}.bind(this)),this.fire("spawned",{mapObject:t})}},_attachObserver:function(t){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(t,{childList:!0,subtree:!0}),Array.prototype.forEach.call(t.querySelectorAll("img"),this._boundOnMutatedImage)},_onMutations:function(t){for(var e=0;e<t.length;++e)for(var n=t[e],i=0;i<n.addedNodes.length;++i){var r=n.addedNodes[i];r instanceof HTMLImageElement?this._onMutatedImage(r):r instanceof HTMLElement&&(Array.prototype.forEach.call(r.querySelectorAll("img"),this._boundOnMutatedImage),"white"===r.style.backgroundColor&&L.DomUtil.remove(r),0===r.textContent.indexOf("For development purposes only")&&L.DomUtil.remove(r),Array.prototype.forEach.call(r.querySelectorAll('div[draggable=false][style*="text-align: center"]'),L.DomUtil.remove))}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(t){var e,n=t.src.match(this._roadRegexp),i=0;if(n?(e={z:n[1],x:n[2],y:n[3]},this._imagesPerTile>1&&(t.style.zIndex=1,i=1)):((n=t.src.match(this._satRegexp))&&(e={x:n[1],y:n[2],z:n[3]}),i=0),e){var r=this._tileCoordsToKey(e);t.style.position="absolute",t.style.visibility="hidden";var o=r+"/"+i;if(this._freshTiles[o]=t,o in this._tileCallbacks&&this._tileCallbacks[o])this._tileCallbacks[o].pop()(t),this._tileCallbacks[o].length||delete this._tileCallbacks[o];else if(this._tiles[r]){var a=this._tiles[r].el,s=0===i?a.firstChild:a.firstChild.nextSibling,u=this._clone(t);a.replaceChild(u,s)}}else t.src.match(this._staticRegExp)&&(t.style.visibility="hidden")},createTile:function(t,e){var n=this._tileCoordsToKey(t),i=L.DomUtil.create("div");i.dataset.pending=this._imagesPerTile,e=e.bind(this,null,i);for(var r=0;r<this._imagesPerTile;r++){var o=n+"/"+r;if(o in this._freshTiles){var a=this._freshTiles[o];i.appendChild(this._clone(a)),i.dataset.pending--}else this._tileCallbacks[o]=this._tileCallbacks[o]||[],this._tileCallbacks[o].push(function(t){return function(n){t.appendChild(this._clone(n)),t.dataset.pending--,parseInt(t.dataset.pending)||e()}.bind(this)}.bind(this)(i))}return parseInt(i.dataset.pending)||L.Util.requestAnimFrame(e),i},_clone:function(t){var e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){var t=this._map.getZoom(),e=this._mutant.getZoom();t&&e&&(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!=this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_reset:function(){this._initContainer()},_update:function(){if(this._mutant){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e);var n=this._map.getZoom(),i=n!==Math.round(n),r=this._mutant.getZoom();i||n==r||(this._mutant.setZoom(n),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this)},_resize:function(){var t=this._map.getSize();this._mutantContainer.style.width===t.x&&this._mutantContainer.style.height===t.y||(this.setElementSize(this._mutantContainer,t),this._mutant&&google.maps.event.trigger(this._mutant,"resize"))},_handleZoomAnim:function(){if(this._mutant){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e),this._mutant.setZoom(Math.round(this._map.getZoom()))}},_removeTile:function(t){if(this._mutant)return setTimeout(this._pruneTile.bind(this,t),1e3),L.GridLayer.prototype._removeTile.call(this,t)},_pruneTile:function(t){for(var e=this._mutant.getZoom(),n=t.split(":")[2],i=this._mutant.getBounds(),r=i.getSouthWest(),o=i.getNorthEast(),a=L.latLngBounds([[r.lat(),r.lng()],[o.lat(),o.lng()]]),s=0;s<this._imagesPerTile;s++){var u=t+"/"+s;if(u in this._freshTiles){var l=this._map&&this._keyToBounds(t);this._map&&l.overlaps(a)&&n==e||delete this._freshTiles[u]}}}}),L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)}},function(t,e){t.exports=function(){var t=[],e=this,n=null;this.progress={total:0,done:0},this.onProgress=function(t){n=t},this.add=function(n){t.push(n),e.progress.total+=1},this.isEmpty=function(){return!t.length},this.run=function(){return t.reduce((function(t,i){return t.then((function(){return i().then((function(){e.progress.done+=1,null!==n&&n(e.progress)}))}))}),Promise.resolve())}}},function(t,e,n){function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(531);t.exports=function(t,e){return new Promise((function(n,a){new o(t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},{maxWidth:e,quality:.6,convertSize:1/0},{success:n,error:a}))}))}},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){r(t,e,n[e])}))}return t}var s=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){"undefined"!=typeof window&&function(e){var n=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,i=e.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),r=i&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),o=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,a=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(i||o)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(t){var e,n,s,u,l,c,h,d,p;if(!(e=t.match(a)))throw new Error("invalid data URI");for(n=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),s=!!e[4],u=t.slice(e[0].length),l=s?atob(u):decodeURIComponent(u),c=new ArrayBuffer(l.length),h=new Uint8Array(c),d=0;d<l.length;d+=1)h[d]=l.charCodeAt(d);return i?new Blob([r?h:c],{type:n}):((p=new o).append(c),p.getBlob(n))};e.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(t,e,i){var r=this;setTimeout((function(){i&&n.toDataURL&&s?t(s(r.toDataURL(e,i))):t(r.mozGetAsFile("blob",e))}))}:n.toDataURL&&s&&(n.toBlob=function(t,e,n){var i=this;setTimeout((function(){t(s(i.toDataURL(e,n)))}))})),t.exports?t.exports=s:e.dataURLtoBlob=s}(window)})),u={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,quality:.8,mimeType:"auto",convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},l="undefined"!=typeof window?window:{},c=Array.prototype.slice;var h=/^image\/.+$/;function d(t){return h.test(t)}var p=String.fromCharCode;var f=l.btoa;function m(t){var e,n=new DataView(t);try{var i,r,o;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var a=n.byteLength,s=2;s+1<a;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){r=s;break}s+=1}if(r){var u=r+10;if("Exif"===function(t,e,n){var i,r="";for(n+=e,i=e;i<n;i+=1)r+=p(t.getUint8(i));return r}(n,r+4,4)){var l=n.getUint16(u);if(((i=18761===l)||19789===l)&&42===n.getUint16(u+2,i)){var c=n.getUint32(u+4,i);c>=8&&(o=u+c)}}}if(o){var h,d,f=n.getUint16(o,i);for(d=0;d<f;d+=1)if(h=o+12*d+2,274===n.getUint16(h,i)){h+=8,e=n.getUint16(h,i),n.setUint16(h,1,i);break}}}catch(t){e=1}return e}var g=/\.\d*(?:0|9){12}\d*$/;function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return g.test(t)?Math.round(t*e)/e:t}var y=l.ArrayBuffer,_=l.FileReader,b=l.URL||l.webkitURL,w=/\.\w+$/,x=l.Compressor,$=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.file=e,this.image=new Image,this.options=a({},u,n),this.aborted=!1,this.result=null,this.init()}var e,n,r;return e=t,r=[{key:"noConflict",value:function(){return window.Compressor=x,t}},{key:"setDefaults",value:function(t){o(u,t)}}],(n=[{key:"init",value:function(){var t=this,e=this.file,n=this.options;if(i=e,"undefined"!=typeof Blob&&(i instanceof Blob||"[object Blob]"===Object.prototype.toString.call(i))){var i,r=e.type;if(d(r))if(b&&_)if(y||(n.checkOrientation=!1),b&&!n.checkOrientation)this.load({url:b.createObjectURL(e)});else{var a=new _,s=n.checkOrientation&&"image/jpeg"===r;this.reader=a,a.onload=function(n){var i=n.target.result,a={};if(s){var u=m(i);u>1||!b?(a.url=function(t,e){for(var n,i=[],r=new Uint8Array(t);r.length>0;)i.push(p.apply(null,(n=r.subarray(0,8192),Array.from?Array.from(n):c.call(n)))),r=r.subarray(8192);return"data:".concat(e,";base64,").concat(f(i.join("")))}(i,r),u>1&&o(a,function(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:i}}(u))):a.url=b.createObjectURL(e)}else a.url=i;t.load(a)},a.onabort=function(){t.fail(new Error("Aborted to read the image with FileReader."))},a.onerror=function(){t.fail(new Error("Failed to read the image with FileReader."))},a.onloadend=function(){t.reader=null},s?a.readAsArrayBuffer(e):a.readAsDataURL(e)}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(t){var e=this,n=this.file,i=this.image;i.onload=function(){e.draw(a({},t,{naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight}))},i.onabort=function(){e.fail(new Error("Aborted to load the image."))},i.onerror=function(){e.fail(new Error("Failed to load the image."))},i.alt=n.name,i.src=t.url}},{key:"draw",value:function(t){var e=this,n=t.naturalWidth,i=t.naturalHeight,r=t.rotate,o=void 0===r?0:r,a=t.scaleX,u=void 0===a?1:a,l=t.scaleY,c=void 0===l?1:l,h=this.file,p=this.image,f=this.options,m=document.createElement("canvas"),g=m.getContext("2d"),y=n/i,_=Math.abs(o)%180==90,b=Math.max(f.maxWidth,0)||1/0,w=Math.max(f.maxHeight,0)||1/0,x=Math.max(f.minWidth,0)||0,$=Math.max(f.minHeight,0)||0,E=Math.max(f.width,0)||n,k=Math.max(f.height,0)||i;if(_){var L=[w,b];b=L[0],w=L[1];var C=[$,x];x=C[0],$=C[1];var T=[k,E];E=T[0],k=T[1]}b<1/0&&w<1/0?w*y>b?w=b/y:b=w*y:b<1/0?w=b/y:w<1/0&&(b=w*y),x>0&&$>0?$*y>x?$=x/y:x=$*y:x>0?$=x/y:$>0&&(x=$*y),k*y>E?k=E/y:E=k*y;var S=-(E=Math.floor(v(Math.min(Math.max(E,x),b))))/2,D=-(k=Math.floor(v(Math.min(Math.max(k,$),w))))/2,M=E,A=k;if(_){var P=[k,E];E=P[0],k=P[1]}m.width=E,m.height=k,d(f.mimeType)||(f.mimeType=h.type);var O="transparent";if(h.size>f.convertSize&&"image/png"===f.mimeType&&(O="#fff",f.mimeType="image/jpeg"),g.fillStyle=O,g.fillRect(0,0,E,k),f.beforeDraw&&f.beforeDraw.call(this,g,m),!this.aborted&&(g.save(),g.translate(E/2,k/2),g.rotate(o*Math.PI/180),g.scale(u,c),g.drawImage(p,S,D,M,A),g.restore(),f.drew&&f.drew.call(this,g,m),!this.aborted)){var I=function(t){e.aborted||e.done({naturalWidth:n,naturalHeight:i,result:t})};m.toBlob?m.toBlob(I,f.mimeType,f.quality):I(s(m.toDataURL(f.mimeType,f.quality)))}}},{key:"done",value:function(t){var e,n,i=t.naturalWidth,r=t.naturalHeight,o=t.result,a=this.file,s=this.image,u=this.options;if(b&&!u.checkOrientation&&b.revokeObjectURL(s.src),o)if(u.strict&&o.size>a.size&&u.mimeType===a.type&&!(u.width>i||u.height>r||u.minWidth>i||u.minHeight>r))o=a;else{var l=new Date;o.lastModified=l.getTime(),o.lastModifiedDate=l,o.name=a.name,o.name&&o.type!==a.type&&(o.name=o.name.replace(w,(e=o.type,"jpeg"===(n=d(e)?e.substr(6):"")&&(n="jpg"),".".concat(n))))}else o=a;this.result=o,u.success&&u.success.call(this,o)}},{key:"fail",value:function(t){var e=this.options;if(!e.error)throw t;e.error.call(this,t)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}])&&i(e.prototype,n),r&&i(e,r),t}();t.exports=$},function(t,e,n){"use strict";(function(t){var e=n(146),i=n(65);t(document).ready((function(){t(".save-progress").click((function(){i.a.save()})),t("#close-button").click((function(){e.a.saveAndExit()})),t(".validate-form").on("click",(function(){i.a.validate()})),t(".first-page-alias").click((function(){t(".first-page").click()})),t(".last-page-alias").click((function(){t(".last-page").click()})),t(".submit-form").on("click",(function(){var n=t(this);return n.attr("disabled","disabled"),e.a.submit().catch((function(t){console.error(t),n.removeAttr("disabled")})),!1}))}))}).call(this,n(0))},function(t,e,n){"use strict";(function(t){var e=n(57),i=n.n(e),r=n(3),o=n(38),a=n(70);t(document).ready((function(){return s()})),a.once("EnketoForm.initialized",(function(){return u()})),a.on("EnketoForm.saving",(function(){return l()})),a.on("EnketoForm.savingProgress",(function(t,e){return c(t,e)})),a.on("EnketoForm.saveFailed",(function(){return d()})),a.on("EnketoForm.saveSucceded",(function(){return p()})),a.on("EnketoForm.validating",(function(){return f()})),a.on("EnketoForm.validationFailed",(function(){return g()})),a.on("EnketoForm.validationSucceeded",(function(){return v()})),a.on("EnketoForm.submitting",(function(){return y()})),a.on("EnketoForm.submitFailed",(function(t){return _(t)})),a.on("EnketoForm.submitSucceeded",(function(){return submitSucceeded()})),a.on("EnketoForm.submit.status",(function(t){return b(t)}));var s=function(){if(r.a.has("bg")){var e="content: ' ';display: block;position: absolute;top: 0;left: 0;width: 100%;height: 100%;opacity: 0.2;z-index: -1;background-image: url('"+r.a.get("bg")+"');background-size: cover;background-position: center;background-repeat: no-repeat;";t("<style>#loading-block:after { "+e+"} </style>").appendTo("head")}},u=function(){o.a.driver.canSave()||document.querySelector(".save-progress").remove(),r.a.has("readonly")&&(document.querySelector(".save-progress").remove(),document.querySelector(".submit-form").remove(),document.querySelector(".validate-form").remove()),document.querySelector(".form-header").style.display="block",document.querySelector("#submit-progress").style.display="none",document.querySelector("#loading-block").remove(),window.scrollTo(0,0)},l=function(){var e=t(".save-progress");e.html('<i class="fa fa-spinner fa-spin"></i>'),e.attr("disabled","disabled")},c=function(e){var n=e.total,i=e.done;1===n&&1===i||(t("#submit-progress").overlay("show"),b("Optimizing attachments... ".concat(i," out of ").concat(n)))},h=function(e,n){t("#submit-progress").overlay("hide");var r=t(".save-progress");r.html('<i class="fa fa-save"></i>'),r.removeAttr("disabled","disabled"),n&&i.a[e](n)},d=function(){h("error","An error occured while saving this sesssion...")},p=function(){h("success",i18n._("survey.saved"))},f=function(){t(".submit-form").data("original-content",t(".submit-form").text()).attr("disabled","disabled").text("Validating...")},m=function(e,n){t(".submit-form").removeAttr("disabled").text(t(".submit-form").data("original-content")),i.a[e](n)},g=function(){m("error","The form contains validation errors.")},v=function(){m("success","The data looks valid!"),t(".last-page").click()},y=function(){t("#submit-progress").overlay("show")},_=function(e){t("#submit-progress").overlay("hide"),i.a.error("Submission failed","string"==typeof e?e:e.toString())},b=function(e){t("#submit-progress-text").html(e)}}).call(this,n(0))},function(t,e,n){"use strict";(function(t){var e=n(3);t(document).ready((function(){if(e.a.has("css")){var t=e.a.get("css");t.indexOf(".css")>=0?i(t):r(t)}}));var i=function(t){var e=document.createElement("link");e.id="ssas_enketo_custom_css_link",e.rel="stylesheet",e.href=t,document.head.appendChild(e)},r=function(t){var e=document.createElement("style");e.id="ssas_enketo_custom_css_stlye",e.innerHTML=t,document.head.appendChild(e)}}).call(this,n(0))},,function(t,e,n){"use strict";n.r(e);n(514),n(192),n(515);var i=n(57),r=n.n(i),o=n(63),a=n.n(o),s=(n(516),n(532),n(533),n(534),n(70)),u=a.a.module("sessionModal",[]);u.filter("timeAgo",(function(){return function(t){return new Date(t).toLocaleString()}})),u.controller("Controller",(function(t){t.form={name:""},t.show=!1,t.sessions=[],t.disableCreateButton=!1,s.on("SessionModal.activate",(function(){return t.$apply((function(){t.show=!0}))})),s.on("SessionModal.updateSessions",(function(e){return t.$apply((function(){t.sessions=e}))})),t.createSession=function(){var e=t.form.name.trim();if(!e)return t.name="",alert("Please enter a session name");t.show=!1,t.disableCreateButton=!0,s.emit("Session.create",e)},t.delete=function(t){confirm("Do you really want to delete this session? DATA WILL BE LOST!")&&s.emit("Session.delete",t)},t.select=function(e){t.show=!1,s.emit("Session.select",e)}})),a.a.bootstrap(document.getElementById("sessionModal"),["sessionModal"]);var l=n(146);r.a.options={positionClass:"toast-top-left"},l.a.boot()}])}));